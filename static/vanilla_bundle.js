"use strict";(()=>{function b(n,a="cal-heatmap"){if(document.querySelector(`#${a} > svg`)){console.log("Heatmap already exists. Skipping creation.");return}let o=[{src:"https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js",type:"js"},{src:"https://d3js.org/d3.v7.min.js",type:"js"},{src:"https://unpkg.com/cal-heatmap/dist/cal-heatmap.min.js",type:"js"},{src:"https://unpkg.com/cal-heatmap/dist/cal-heatmap.css",type:"style"},{src:"https://unpkg.com/cal-heatmap/dist/plugins/Legend.min.js",type:"js"},{src:"https://unpkg.com/@popperjs/core@2",type:"js"},{src:"https://unpkg.com/cal-heatmap/dist/plugins/Tooltip.min.js",type:"js"},{src:"https://unpkg.com/cal-heatmap/dist/plugins/CalendarLabel.min.js",type:"js"}];function i(c){let d=[];function e(l){return new Promise((p,m)=>{let r;l.type==="js"?(r=document.createElement("script"),r.src=l.src,r.onload=p,r.onerror=m,document.head.appendChild(r)):l.type==="style"?(r=document.createElement("link"),r.rel="stylesheet",r.href=l.src,r.onload=p,r.onerror=m,document.head.appendChild(r)):m(new Error(`Unsupported file type: ${l.type}`))})}return c.forEach(l=>{d.push(e(l))}),Promise.all(d)}i(o).then(()=>{console.log("All files loaded successfully"),j(n,a)}).catch(c=>{console.error("Error loading files:",c)})}function j(n,a="cal-heatmap"){function o(t){return t.map(s=>({date:dayjs(s.date).format("YYYY-MM-DD"),value:s.value}))}n=o(n);function i(){let t={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},s=window.innerWidth;return s<t.sm?"small":s<t.md?"medium":s<t.lg?"large":"extralarge"}let c=i(),e={small:{subtract:3,range:4},medium:{subtract:4,range:5},large:{subtract:5,range:6},extralarge:{subtract:6,range:7}}[c],l=dayjs().subtract(e.subtract,"month"),p=function(t){return{name:"ghDayUpToToday",parent:"ghDay",mapping:(s,u)=>{let w=0,v=-1;return t.intervals("day",s,t.date(u)).map(h=>{let g=t.date(h);return g>new Date?null:(w!==g.week()&&(w=g.week(),v+=1),{t:h,x:v,y:g.day()})}).filter(h=>h!==null)}}},m=new CalHeatmap;m.addTemplates(p);function r(t){m.paint({data:{source:n,x:"date",y:"value"},range:e.range,date:{start:l,max:new Date},domain:{type:"month",gutter:10,dynamicDimension:!0,label:{position:"top"}},subDomain:{type:"ghDayUpToToday",radius:3,width:15,height:15,gutter:4},scale:{color:{type:"linear",scheme:"Greens",domain:[0,3]}},theme:t})}r(y());function y(){return document.documentElement.getAttribute("data-theme")=="lightmode"?"light":"dark"}let f=new MutationObserver(t=>{t.forEach(s=>{if(s.type==="attributes"&&s.attributeName==="data-theme"){let u=document.querySelector(`#${a} > svg`);u&&u.setAttribute("data-theme",y())}})});return f.observe(document.documentElement,{attributes:!0}),f}function S(n){let a=[];function o(i){return new Promise((c,d)=>{let e;i.endsWith(".js")?(e=document.createElement("script"),e.src=i,e.onload=c,e.onerror=d,document.head.appendChild(e)):i.endsWith(".css")?(e=document.createElement("link"),e.rel="stylesheet",e.href=i,e.onload=c,e.onerror=d,document.head.appendChild(e)):d(new Error(`Unsupported file type: ${i}`))})}return n.forEach(i=>{a.push(o(i))}),Promise.all(a)}window.initializeJS=function(a){console.log("initialize js"),k(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{type:"classic"}).then(function(o){console.log("Service Worker registered with scope:",o.scope)}).catch(function(o){console.log("Service Worker registration failed:",o)}),T()};function k(){let n=document.querySelector('meta[name="viewport"]');function a(){window.innerWidth<1024?n.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"):n.setAttribute("content","width=device-width, initial-scale=1.0")}a(),window.addEventListener("resize",a)}function T(){document.addEventListener("visibilitychange",function(){if(document.visibilityState==="visible"){let n=new Date().getTime(),a=localStorage.getItem("lastVisitTime");n-a>6e5&&(console.log("Refreshing data after inactivity"),window.location.reload())}else localStorage.setItem("lastVisitTime",new Date().getTime())})}window.createCalHeatmap=b;window.loadScriptsAndStyles=S;})();
//# sourceMappingURL=vanilla_bundle.js.map
