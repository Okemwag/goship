var CS = Object.create;
var H3 = Object.defineProperty;
var ES = Object.getOwnPropertyDescriptor;
var TS = Object.getOwnPropertyNames;
var MS = Object.getPrototypeOf,
  AS = Object.prototype.hasOwnProperty;
var Rh = (i, e) => () => (e || i((e = { exports: {} }).exports, e), e.exports);
var IS = (i, e, t, r) => {
  if ((e && typeof e == "object") || typeof e == "function")
    for (let o of TS(e))
      !AS.call(i, o) &&
        o !== t &&
        H3(i, o, {
          get: () => e[o],
          enumerable: !(r = ES(e, o)) || r.enumerable,
        });
  return i;
};
var ws = (i, e, t) => (
  (t = i != null ? CS(MS(i)) : {}),
  IS(
    e || !i || !i.__esModule
      ? H3(t, "default", { value: i, enumerable: !0 })
      : t,
    i
  )
);
var l8 = Rh((iee, a8) => {
  var i8 = [
      "input",
      "select",
      "textarea",
      "a[href]",
      "button",
      "[tabindex]",
      "audio[controls]",
      "video[controls]",
      '[contenteditable]:not([contenteditable="false"])',
    ],
    Kb = i8.join(","),
    Jb =
      typeof Element > "u"
        ? function () {}
        : Element.prototype.matches ||
          Element.prototype.msMatchesSelector ||
          Element.prototype.webkitMatchesSelector;
  function Xb(i, e) {
    e = e || {};
    var t = [],
      r = [],
      o = i.querySelectorAll(Kb);
    e.includeContainer &&
      Jb.call(i, Kb) &&
      ((o = Array.prototype.slice.apply(o)), o.unshift(i));
    var n, u, h;
    for (n = 0; n < o.length; n++)
      (u = o[n]),
        r8(u) &&
          ((h = o8(u)),
          h === 0
            ? t.push(u)
            : r.push({ documentOrder: n, tabIndex: h, node: u }));
    var m = r
      .sort(lz)
      .map(function (b) {
        return b.node;
      })
      .concat(t);
    return m;
  }
  Xb.isTabbable = oz;
  Xb.isFocusable = az;
  function r8(i) {
    return !(!n8(i) || hz(i) || o8(i) < 0);
  }
  function oz(i) {
    if (!i) throw new Error("No node provided");
    return Jb.call(i, Kb) === !1 ? !1 : r8(i);
  }
  function n8(i) {
    return !(i.disabled || uz(i) || mz(i));
  }
  var sz = i8.concat("iframe").join(",");
  function az(i) {
    if (!i) throw new Error("No node provided");
    return Jb.call(i, sz) === !1 ? !1 : n8(i);
  }
  function o8(i) {
    var e = parseInt(i.getAttribute("tabindex"), 10);
    return isNaN(e) ? (cz(i) ? 0 : i.tabIndex) : e;
  }
  function lz(i, e) {
    return i.tabIndex === e.tabIndex
      ? i.documentOrder - e.documentOrder
      : i.tabIndex - e.tabIndex;
  }
  function cz(i) {
    return i.contentEditable === "true";
  }
  function s8(i) {
    return i.tagName === "INPUT";
  }
  function uz(i) {
    return s8(i) && i.type === "hidden";
  }
  function dz(i) {
    return s8(i) && i.type === "radio";
  }
  function hz(i) {
    return dz(i) && !fz(i);
  }
  function pz(i) {
    for (var e = 0; e < i.length; e++) if (i[e].checked) return i[e];
  }
  function fz(i) {
    if (!i.name) return !0;
    var e = i.ownerDocument.querySelectorAll(
        'input[type="radio"][name="' + i.name + '"]'
      ),
      t = pz(e);
    return !t || t === i;
  }
  function mz(i) {
    return (
      i.offsetParent === null || getComputedStyle(i).visibility === "hidden"
    );
  }
  a8.exports = Xb;
});
var u8 = Rh((ree, c8) => {
  c8.exports = yz;
  var gz = Object.prototype.hasOwnProperty;
  function yz() {
    for (var i = {}, e = 0; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r in t) gz.call(t, r) && (i[r] = t[r]);
    }
    return i;
  }
});
var g8 = Rh((nee, m8) => {
  var d8 = l8(),
    bz = u8(),
    h8,
    p8 = (function () {
      var i = [];
      return {
        activateTrap: function (e) {
          if (i.length > 0) {
            var t = i[i.length - 1];
            t !== e && t.pause();
          }
          var r = i.indexOf(e);
          r === -1 || i.splice(r, 1), i.push(e);
        },
        deactivateTrap: function (e) {
          var t = i.indexOf(e);
          t !== -1 && i.splice(t, 1), i.length > 0 && i[i.length - 1].unpause();
        },
      };
    })();
  function vz(i, e) {
    var t = document,
      r = typeof i == "string" ? t.querySelector(i) : i,
      o = bz({ returnFocusOnDeactivate: !0, escapeDeactivates: !0 }, e),
      n = {
        firstTabbableNode: null,
        lastTabbableNode: null,
        nodeFocusedBeforeActivation: null,
        mostRecentlyFocusedNode: null,
        active: !1,
        paused: !1,
      },
      u = { activate: h, deactivate: m, pause: b, unpause: _ };
    return u;
    function h(fe) {
      if (!n.active) {
        Ie(),
          (n.active = !0),
          (n.paused = !1),
          (n.nodeFocusedBeforeActivation = t.activeElement);
        var Le = fe && fe.onActivate ? fe.onActivate : o.onActivate;
        return Le && Le(), S(), u;
      }
    }
    function m(fe) {
      if (n.active) {
        clearTimeout(h8),
          T(),
          (n.active = !1),
          (n.paused = !1),
          p8.deactivateTrap(u);
        var Le =
          fe && fe.onDeactivate !== void 0 ? fe.onDeactivate : o.onDeactivate;
        Le && Le();
        var De =
          fe && fe.returnFocus !== void 0
            ? fe.returnFocus
            : o.returnFocusOnDeactivate;
        return (
          De &&
            f8(function () {
              Te(q(n.nodeFocusedBeforeActivation));
            }),
          u
        );
      }
    }
    function b() {
      n.paused || !n.active || ((n.paused = !0), T());
    }
    function _() {
      !n.paused || !n.active || ((n.paused = !1), Ie(), S());
    }
    function S() {
      if (n.active)
        return (
          p8.activateTrap(u),
          (h8 = f8(function () {
            Te(F());
          })),
          t.addEventListener("focusin", te, !0),
          t.addEventListener("mousedown", Q, { capture: !0, passive: !1 }),
          t.addEventListener("touchstart", Q, { capture: !0, passive: !1 }),
          t.addEventListener("click", Y, { capture: !0, passive: !1 }),
          t.addEventListener("keydown", ce, { capture: !0, passive: !1 }),
          u
        );
    }
    function T() {
      if (n.active)
        return (
          t.removeEventListener("focusin", te, !0),
          t.removeEventListener("mousedown", Q, !0),
          t.removeEventListener("touchstart", Q, !0),
          t.removeEventListener("click", Y, !0),
          t.removeEventListener("keydown", ce, !0),
          u
        );
    }
    function D(fe) {
      var Le = o[fe],
        De = Le;
      if (!Le) return null;
      if (typeof Le == "string" && ((De = t.querySelector(Le)), !De))
        throw new Error("`" + fe + "` refers to no known node");
      if (typeof Le == "function" && ((De = Le()), !De))
        throw new Error("`" + fe + "` did not return a node");
      return De;
    }
    function F() {
      var fe;
      if (
        (D("initialFocus") !== null
          ? (fe = D("initialFocus"))
          : r.contains(t.activeElement)
          ? (fe = t.activeElement)
          : (fe = n.firstTabbableNode || D("fallbackFocus")),
        !fe)
      )
        throw new Error(
          "Your focus-trap needs to have at least one focusable element"
        );
      return fe;
    }
    function q(fe) {
      var Le = D("setReturnFocus");
      return Le || fe;
    }
    function Q(fe) {
      if (!r.contains(fe.target)) {
        if (o.clickOutsideDeactivates) {
          m({ returnFocus: !d8.isFocusable(fe.target) });
          return;
        }
        (o.allowOutsideClick && o.allowOutsideClick(fe)) || fe.preventDefault();
      }
    }
    function te(fe) {
      r.contains(fe.target) ||
        fe.target instanceof Document ||
        (fe.stopImmediatePropagation(), Te(n.mostRecentlyFocusedNode || F()));
    }
    function ce(fe) {
      if (o.escapeDeactivates !== !1 && xz(fe)) {
        fe.preventDefault(), m();
        return;
      }
      if (wz(fe)) {
        be(fe);
        return;
      }
    }
    function be(fe) {
      if ((Ie(), fe.shiftKey && fe.target === n.firstTabbableNode)) {
        fe.preventDefault(), Te(n.lastTabbableNode);
        return;
      }
      if (!fe.shiftKey && fe.target === n.lastTabbableNode) {
        fe.preventDefault(), Te(n.firstTabbableNode);
        return;
      }
    }
    function Y(fe) {
      o.clickOutsideDeactivates ||
        r.contains(fe.target) ||
        (o.allowOutsideClick && o.allowOutsideClick(fe)) ||
        (fe.preventDefault(), fe.stopImmediatePropagation());
    }
    function Ie() {
      var fe = d8(r);
      (n.firstTabbableNode = fe[0] || F()),
        (n.lastTabbableNode = fe[fe.length - 1] || F());
    }
    function Te(fe) {
      if (fe !== t.activeElement) {
        if (!fe || !fe.focus) {
          Te(F());
          return;
        }
        fe.focus(), (n.mostRecentlyFocusedNode = fe), _z(fe) && fe.select();
      }
    }
  }
  function _z(i) {
    return (
      i.tagName &&
      i.tagName.toLowerCase() === "input" &&
      typeof i.select == "function"
    );
  }
  function xz(i) {
    return i.key === "Escape" || i.key === "Esc" || i.keyCode === 27;
  }
  function wz(i) {
    return i.key === "Tab" || i.keyCode === 9;
  }
  function f8(i) {
    return setTimeout(i, 0);
  }
  m8.exports = vz;
});
var rv = Rh((tv, iv) => {
  (function (i, e) {
    typeof tv == "object" && typeof iv < "u"
      ? (iv.exports = e())
      : typeof define == "function" && define.amd
      ? define(e)
      : ((i = typeof globalThis < "u" ? globalThis : i || self),
        (i.Cropper = e()));
  })(tv, function () {
    "use strict";
    function i(ue, R) {
      var X = Object.keys(ue);
      if (Object.getOwnPropertySymbols) {
        var G = Object.getOwnPropertySymbols(ue);
        R &&
          (G = G.filter(function (Me) {
            return Object.getOwnPropertyDescriptor(ue, Me).enumerable;
          })),
          X.push.apply(X, G);
      }
      return X;
    }
    function e(ue) {
      for (var R = 1; R < arguments.length; R++) {
        var X = arguments[R] != null ? arguments[R] : {};
        R % 2
          ? i(Object(X), !0).forEach(function (G) {
              u(ue, G, X[G]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(ue, Object.getOwnPropertyDescriptors(X))
          : i(Object(X)).forEach(function (G) {
              Object.defineProperty(
                ue,
                G,
                Object.getOwnPropertyDescriptor(X, G)
              );
            });
      }
      return ue;
    }
    function t(ue) {
      "@babel/helpers - typeof";
      return (
        (t =
          typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
            ? function (R) {
                return typeof R;
              }
            : function (R) {
                return R &&
                  typeof Symbol == "function" &&
                  R.constructor === Symbol &&
                  R !== Symbol.prototype
                  ? "symbol"
                  : typeof R;
              }),
        t(ue)
      );
    }
    function r(ue, R) {
      if (!(ue instanceof R))
        throw new TypeError("Cannot call a class as a function");
    }
    function o(ue, R) {
      for (var X = 0; X < R.length; X++) {
        var G = R[X];
        (G.enumerable = G.enumerable || !1),
          (G.configurable = !0),
          "value" in G && (G.writable = !0),
          Object.defineProperty(ue, F(G.key), G);
      }
    }
    function n(ue, R, X) {
      return (
        R && o(ue.prototype, R),
        X && o(ue, X),
        Object.defineProperty(ue, "prototype", { writable: !1 }),
        ue
      );
    }
    function u(ue, R, X) {
      return (
        (R = F(R)),
        R in ue
          ? Object.defineProperty(ue, R, {
              value: X,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (ue[R] = X),
        ue
      );
    }
    function h(ue) {
      return m(ue) || b(ue) || _(ue) || T();
    }
    function m(ue) {
      if (Array.isArray(ue)) return S(ue);
    }
    function b(ue) {
      if (
        (typeof Symbol < "u" && ue[Symbol.iterator] != null) ||
        ue["@@iterator"] != null
      )
        return Array.from(ue);
    }
    function _(ue, R) {
      if (ue) {
        if (typeof ue == "string") return S(ue, R);
        var X = Object.prototype.toString.call(ue).slice(8, -1);
        if (
          (X === "Object" && ue.constructor && (X = ue.constructor.name),
          X === "Map" || X === "Set")
        )
          return Array.from(ue);
        if (
          X === "Arguments" ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X)
        )
          return S(ue, R);
      }
    }
    function S(ue, R) {
      (R == null || R > ue.length) && (R = ue.length);
      for (var X = 0, G = new Array(R); X < R; X++) G[X] = ue[X];
      return G;
    }
    function T() {
      throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
    }
    function D(ue, R) {
      if (typeof ue != "object" || ue === null) return ue;
      var X = ue[Symbol.toPrimitive];
      if (X !== void 0) {
        var G = X.call(ue, R || "default");
        if (typeof G != "object") return G;
        throw new TypeError("@@toPrimitive must return a primitive value.");
      }
      return (R === "string" ? String : Number)(ue);
    }
    function F(ue) {
      var R = D(ue, "string");
      return typeof R == "symbol" ? R : String(R);
    }
    var q = typeof window < "u" && typeof window.document < "u",
      Q = q ? window : {},
      te =
        q && Q.document.documentElement
          ? "ontouchstart" in Q.document.documentElement
          : !1,
      ce = q ? "PointerEvent" in Q : !1,
      be = "cropper",
      Y = "all",
      Ie = "crop",
      Te = "move",
      fe = "zoom",
      Le = "e",
      De = "w",
      st = "s",
      qe = "n",
      zt = "ne",
      Rt = "nw",
      Gt = "se",
      qt = "sw",
      ct = "".concat(be, "-crop"),
      vt = "".concat(be, "-disabled"),
      ht = "".concat(be, "-hidden"),
      Vt = "".concat(be, "-hide"),
      hi = "".concat(be, "-invisible"),
      Pi = "".concat(be, "-modal"),
      Zt = "".concat(be, "-move"),
      Re = "".concat(be, "Action"),
      Ce = "".concat(be, "Preview"),
      Bt = "crop",
      ei = "move",
      Li = "none",
      it = "crop",
      ii = "cropend",
      wi = "cropmove",
      sr = "cropstart",
      Wr = "dblclick",
      pt = te ? "touchstart" : "mousedown",
      Ai = te ? "touchmove" : "mousemove",
      je = te ? "touchend touchcancel" : "mouseup",
      Si = ce ? "pointerdown" : pt,
      gi = ce ? "pointermove" : Ai,
      ui = ce ? "pointerup pointercancel" : je,
      pr = "ready",
      Er = "resize",
      en = "wheel",
      tn = "zoom",
      yn = "image/jpeg",
      Vn = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,
      An = /^data:/,
      Zr = /^data:image\/jpeg;base64,/,
      at = /^img|canvas$/i,
      Pr = 200,
      Dr = 100,
      Kn = {
        viewMode: 0,
        dragMode: Bt,
        initialAspectRatio: NaN,
        aspectRatio: NaN,
        data: null,
        preview: "",
        responsive: !0,
        restore: !0,
        checkCrossOrigin: !0,
        checkOrientation: !0,
        modal: !0,
        guides: !0,
        center: !0,
        highlight: !0,
        background: !0,
        autoCrop: !0,
        autoCropArea: 0.8,
        movable: !0,
        rotatable: !0,
        scalable: !0,
        zoomable: !0,
        zoomOnTouch: !0,
        zoomOnWheel: !0,
        wheelZoomRatio: 0.1,
        cropBoxMovable: !0,
        cropBoxResizable: !0,
        toggleDragModeOnDblclick: !0,
        minCanvasWidth: 0,
        minCanvasHeight: 0,
        minCropBoxWidth: 0,
        minCropBoxHeight: 0,
        minContainerWidth: Pr,
        minContainerHeight: Dr,
        ready: null,
        cropstart: null,
        cropmove: null,
        cropend: null,
        crop: null,
        zoom: null,
      },
      ko =
        '<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',
      ft = Number.isNaN || Q.isNaN;
    function Tt(ue) {
      return typeof ue == "number" && !ft(ue);
    }
    var Fe = function (R) {
      return R > 0 && R < 1 / 0;
    };
    function At(ue) {
      return typeof ue > "u";
    }
    function $t(ue) {
      return t(ue) === "object" && ue !== null;
    }
    var Pt = Object.prototype.hasOwnProperty;
    function yi(ue) {
      if (!$t(ue)) return !1;
      try {
        var R = ue.constructor,
          X = R.prototype;
        return R && X && Pt.call(X, "isPrototypeOf");
      } catch {
        return !1;
      }
    }
    function Fi(ue) {
      return typeof ue == "function";
    }
    var re = Array.prototype.slice;
    function V(ue) {
      return Array.from ? Array.from(ue) : re.call(ue);
    }
    function H(ue, R) {
      return (
        ue &&
          Fi(R) &&
          (Array.isArray(ue) || Tt(ue.length)
            ? V(ue).forEach(function (X, G) {
                R.call(ue, X, G, ue);
              })
            : $t(ue) &&
              Object.keys(ue).forEach(function (X) {
                R.call(ue, ue[X], X, ue);
              })),
        ue
      );
    }
    var $ =
        Object.assign ||
        function (R) {
          for (
            var X = arguments.length, G = new Array(X > 1 ? X - 1 : 0), Me = 1;
            Me < X;
            Me++
          )
            G[Me - 1] = arguments[Me];
          return (
            $t(R) &&
              G.length > 0 &&
              G.forEach(function (ge) {
                $t(ge) &&
                  Object.keys(ge).forEach(function (Ae) {
                    R[Ae] = ge[Ae];
                  });
              }),
            R
          );
        },
      ne = /\.\d*(?:0|9){12}\d*$/;
    function ve(ue) {
      var R =
        arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e11;
      return ne.test(ue) ? Math.round(ue * R) / R : ue;
    }
    var xe = /^width|height|left|top|marginLeft|marginTop$/;
    function ke(ue, R) {
      var X = ue.style;
      H(R, function (G, Me) {
        xe.test(Me) && Tt(G) && (G = "".concat(G, "px")), (X[Me] = G);
      });
    }
    function me(ue, R) {
      return ue.classList
        ? ue.classList.contains(R)
        : ue.className.indexOf(R) > -1;
    }
    function we(ue, R) {
      if (R) {
        if (Tt(ue.length)) {
          H(ue, function (G) {
            we(G, R);
          });
          return;
        }
        if (ue.classList) {
          ue.classList.add(R);
          return;
        }
        var X = ue.className.trim();
        X
          ? X.indexOf(R) < 0 && (ue.className = "".concat(X, " ").concat(R))
          : (ue.className = R);
      }
    }
    function Ze(ue, R) {
      if (R) {
        if (Tt(ue.length)) {
          H(ue, function (X) {
            Ze(X, R);
          });
          return;
        }
        if (ue.classList) {
          ue.classList.remove(R);
          return;
        }
        ue.className.indexOf(R) >= 0 &&
          (ue.className = ue.className.replace(R, ""));
      }
    }
    function Qe(ue, R, X) {
      if (R) {
        if (Tt(ue.length)) {
          H(ue, function (G) {
            Qe(G, R, X);
          });
          return;
        }
        X ? we(ue, R) : Ze(ue, R);
      }
    }
    var Xe = /([a-z\d])([A-Z])/g;
    function jt(ue) {
      return ue.replace(Xe, "$1-$2").toLowerCase();
    }
    function oi(ue, R) {
      return $t(ue[R])
        ? ue[R]
        : ue.dataset
        ? ue.dataset[R]
        : ue.getAttribute("data-".concat(jt(R)));
    }
    function ti(ue, R, X) {
      $t(X)
        ? (ue[R] = X)
        : ue.dataset
        ? (ue.dataset[R] = X)
        : ue.setAttribute("data-".concat(jt(R)), X);
    }
    function zi(ue, R) {
      if ($t(ue[R]))
        try {
          delete ue[R];
        } catch {
          ue[R] = void 0;
        }
      else if (ue.dataset)
        try {
          delete ue.dataset[R];
        } catch {
          ue.dataset[R] = void 0;
        }
      else ue.removeAttribute("data-".concat(jt(R)));
    }
    var di = /\s\s*/,
      lr = (function () {
        var ue = !1;
        if (q) {
          var R = !1,
            X = function () {},
            G = Object.defineProperty({}, "once", {
              get: function () {
                return (ue = !0), R;
              },
              set: function (ge) {
                R = ge;
              },
            });
          Q.addEventListener("test", X, G), Q.removeEventListener("test", X, G);
        }
        return ue;
      })();
    function Ni(ue, R, X) {
      var G =
          arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {},
        Me = X;
      R.trim()
        .split(di)
        .forEach(function (ge) {
          if (!lr) {
            var Ae = ue.listeners;
            Ae &&
              Ae[ge] &&
              Ae[ge][X] &&
              ((Me = Ae[ge][X]),
              delete Ae[ge][X],
              Object.keys(Ae[ge]).length === 0 && delete Ae[ge],
              Object.keys(Ae).length === 0 && delete ue.listeners);
          }
          ue.removeEventListener(ge, Me, G);
        });
    }
    function Wi(ue, R, X) {
      var G =
          arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {},
        Me = X;
      R.trim()
        .split(di)
        .forEach(function (ge) {
          if (G.once && !lr) {
            var Ae = ue.listeners,
              Ke = Ae === void 0 ? {} : Ae;
            (Me = function () {
              delete Ke[ge][X], ue.removeEventListener(ge, Me, G);
              for (
                var lt = arguments.length, Ye = new Array(lt), et = 0;
                et < lt;
                et++
              )
                Ye[et] = arguments[et];
              X.apply(ue, Ye);
            }),
              Ke[ge] || (Ke[ge] = {}),
              Ke[ge][X] && ue.removeEventListener(ge, Ke[ge][X], G),
              (Ke[ge][X] = Me),
              (ue.listeners = Ke);
          }
          ue.addEventListener(ge, Me, G);
        });
    }
    function ci(ue, R, X) {
      var G;
      return (
        Fi(Event) && Fi(CustomEvent)
          ? (G = new CustomEvent(R, { detail: X, bubbles: !0, cancelable: !0 }))
          : ((G = document.createEvent("CustomEvent")),
            G.initCustomEvent(R, !0, !0, X)),
        ue.dispatchEvent(G)
      );
    }
    function br(ue) {
      var R = ue.getBoundingClientRect();
      return {
        left:
          R.left + (window.pageXOffset - document.documentElement.clientLeft),
        top: R.top + (window.pageYOffset - document.documentElement.clientTop),
      };
    }
    var Or = Q.location,
      In = /^(\w+:)\/\/([^:/?#]*):?(\d*)/i;
    function rn(ue) {
      var R = ue.match(In);
      return (
        R !== null &&
        (R[1] !== Or.protocol || R[2] !== Or.hostname || R[3] !== Or.port)
      );
    }
    function un(ue) {
      var R = "timestamp=".concat(new Date().getTime());
      return ue + (ue.indexOf("?") === -1 ? "?" : "&") + R;
    }
    function nn(ue) {
      var R = ue.rotate,
        X = ue.scaleX,
        G = ue.scaleY,
        Me = ue.translateX,
        ge = ue.translateY,
        Ae = [];
      Tt(Me) && Me !== 0 && Ae.push("translateX(".concat(Me, "px)")),
        Tt(ge) && ge !== 0 && Ae.push("translateY(".concat(ge, "px)")),
        Tt(R) && R !== 0 && Ae.push("rotate(".concat(R, "deg)")),
        Tt(X) && X !== 1 && Ae.push("scaleX(".concat(X, ")")),
        Tt(G) && G !== 1 && Ae.push("scaleY(".concat(G, ")"));
      var Ke = Ae.length ? Ae.join(" ") : "none";
      return { WebkitTransform: Ke, msTransform: Ke, transform: Ke };
    }
    function vl(ue) {
      var R = e({}, ue),
        X = 0;
      return (
        H(ue, function (G, Me) {
          delete R[Me],
            H(R, function (ge) {
              var Ae = Math.abs(G.startX - ge.startX),
                Ke = Math.abs(G.startY - ge.startY),
                _t = Math.abs(G.endX - ge.endX),
                lt = Math.abs(G.endY - ge.endY),
                Ye = Math.sqrt(Ae * Ae + Ke * Ke),
                et = Math.sqrt(_t * _t + lt * lt),
                bt = (et - Ye) / Ye;
              Math.abs(bt) > Math.abs(X) && (X = bt);
            });
        }),
        X
      );
    }
    function ha(ue, R) {
      var X = ue.pageX,
        G = ue.pageY,
        Me = { endX: X, endY: G };
      return R ? Me : e({ startX: X, startY: G }, Me);
    }
    function tr(ue) {
      var R = 0,
        X = 0,
        G = 0;
      return (
        H(ue, function (Me) {
          var ge = Me.startX,
            Ae = Me.startY;
          (R += ge), (X += Ae), (G += 1);
        }),
        (R /= G),
        (X /= G),
        { pageX: R, pageY: X }
      );
    }
    function So(ue) {
      var R = ue.aspectRatio,
        X = ue.height,
        G = ue.width,
        Me =
          arguments.length > 1 && arguments[1] !== void 0
            ? arguments[1]
            : "contain",
        ge = Fe(G),
        Ae = Fe(X);
      if (ge && Ae) {
        var Ke = X * R;
        (Me === "contain" && Ke > G) || (Me === "cover" && Ke < G)
          ? (X = G / R)
          : (G = X * R);
      } else ge ? (X = G / R) : Ae && (G = X * R);
      return { width: G, height: X };
    }
    function Pa(ue) {
      var R = ue.width,
        X = ue.height,
        G = ue.degree;
      if (((G = Math.abs(G) % 180), G === 90)) return { width: X, height: R };
      var Me = ((G % 90) * Math.PI) / 180,
        ge = Math.sin(Me),
        Ae = Math.cos(Me),
        Ke = R * Ae + X * ge,
        _t = R * ge + X * Ae;
      return G > 90 ? { width: _t, height: Ke } : { width: Ke, height: _t };
    }
    function jn(ue, R, X, G) {
      var Me = R.aspectRatio,
        ge = R.naturalWidth,
        Ae = R.naturalHeight,
        Ke = R.rotate,
        _t = Ke === void 0 ? 0 : Ke,
        lt = R.scaleX,
        Ye = lt === void 0 ? 1 : lt,
        et = R.scaleY,
        bt = et === void 0 ? 1 : et,
        Zi = X.aspectRatio,
        Ri = X.naturalWidth,
        vr = X.naturalHeight,
        nr = G.fillColor,
        Kr = nr === void 0 ? "transparent" : nr,
        Hr = G.imageSmoothingEnabled,
        _r = Hr === void 0 ? !0 : Hr,
        Co = G.imageSmoothingQuality,
        Tr = Co === void 0 ? "low" : Co,
        wt = G.maxWidth,
        Ki = wt === void 0 ? 1 / 0 : wt,
        Fr = G.maxHeight,
        qn = Fr === void 0 ? 1 / 0 : Fr,
        uo = G.minWidth,
        Eo = uo === void 0 ? 0 : uo,
        Qs = G.minHeight,
        Ts = Qs === void 0 ? 0 : Qs,
        qo = document.createElement("canvas"),
        Xn = qo.getContext("2d"),
        ho = So({ aspectRatio: Zi, width: Ki, height: qn }),
        Gs = So({ aspectRatio: Zi, width: Eo, height: Ts }, "cover"),
        $n = Math.min(ho.width, Math.max(Gs.width, Ri)),
        bn = Math.min(ho.height, Math.max(Gs.height, vr)),
        Ws = So({ aspectRatio: Me, width: Ki, height: qn }),
        $i = So({ aspectRatio: Me, width: Eo, height: Ts }, "cover"),
        Da = Math.min(Ws.width, Math.max($i.width, ge)),
        wl = Math.min(Ws.height, Math.max($i.height, Ae)),
        dc = [-Da / 2, -wl / 2, Da, wl];
      return (
        (qo.width = ve($n)),
        (qo.height = ve(bn)),
        (Xn.fillStyle = Kr),
        Xn.fillRect(0, 0, $n, bn),
        Xn.save(),
        Xn.translate($n / 2, bn / 2),
        Xn.rotate((_t * Math.PI) / 180),
        Xn.scale(Ye, bt),
        (Xn.imageSmoothingEnabled = _r),
        (Xn.imageSmoothingQuality = Tr),
        Xn.drawImage.apply(
          Xn,
          [ue].concat(
            h(
              dc.map(function (kl) {
                return Math.floor(ve(kl));
              })
            )
          )
        ),
        Xn.restore(),
        qo
      );
    }
    var Pn = String.fromCharCode;
    function _l(ue, R, X) {
      var G = "";
      X += R;
      for (var Me = R; Me < X; Me += 1) G += Pn(ue.getUint8(Me));
      return G;
    }
    var dn = /^data:.*,/;
    function Jn(ue) {
      var R = ue.replace(dn, ""),
        X = atob(R),
        G = new ArrayBuffer(X.length),
        Me = new Uint8Array(G);
      return (
        H(Me, function (ge, Ae) {
          Me[Ae] = X.charCodeAt(Ae);
        }),
        G
      );
    }
    function xl(ue, R) {
      for (var X = [], G = 8192, Me = new Uint8Array(ue); Me.length > 0; )
        X.push(Pn.apply(null, V(Me.subarray(0, G)))), (Me = Me.subarray(G));
      return "data:".concat(R, ";base64,").concat(btoa(X.join("")));
    }
    function de(ue) {
      var R = new DataView(ue),
        X;
      try {
        var G, Me, ge;
        if (R.getUint8(0) === 255 && R.getUint8(1) === 216)
          for (var Ae = R.byteLength, Ke = 2; Ke + 1 < Ae; ) {
            if (R.getUint8(Ke) === 255 && R.getUint8(Ke + 1) === 225) {
              Me = Ke;
              break;
            }
            Ke += 1;
          }
        if (Me) {
          var _t = Me + 4,
            lt = Me + 10;
          if (_l(R, _t, 4) === "Exif") {
            var Ye = R.getUint16(lt);
            if (
              ((G = Ye === 18761),
              (G || Ye === 19789) && R.getUint16(lt + 2, G) === 42)
            ) {
              var et = R.getUint32(lt + 4, G);
              et >= 8 && (ge = lt + et);
            }
          }
        }
        if (ge) {
          var bt = R.getUint16(ge, G),
            Zi,
            Ri;
          for (Ri = 0; Ri < bt; Ri += 1)
            if (((Zi = ge + Ri * 12 + 2), R.getUint16(Zi, G) === 274)) {
              (Zi += 8), (X = R.getUint16(Zi, G)), R.setUint16(Zi, 1, G);
              break;
            }
        }
      } catch {
        X = 1;
      }
      return X;
    }
    function ai(ue) {
      var R = 0,
        X = 1,
        G = 1;
      switch (ue) {
        case 2:
          X = -1;
          break;
        case 3:
          R = -180;
          break;
        case 4:
          G = -1;
          break;
        case 5:
          (R = 90), (G = -1);
          break;
        case 6:
          R = 90;
          break;
        case 7:
          (R = 90), (X = -1);
          break;
        case 8:
          R = -90;
          break;
      }
      return { rotate: R, scaleX: X, scaleY: G };
    }
    var fr = {
        render: function () {
          this.initContainer(),
            this.initCanvas(),
            this.initCropBox(),
            this.renderCanvas(),
            this.cropped && this.renderCropBox();
        },
        initContainer: function () {
          var R = this.element,
            X = this.options,
            G = this.container,
            Me = this.cropper,
            ge = Number(X.minContainerWidth),
            Ae = Number(X.minContainerHeight);
          we(Me, ht), Ze(R, ht);
          var Ke = {
            width: Math.max(G.offsetWidth, ge >= 0 ? ge : Pr),
            height: Math.max(G.offsetHeight, Ae >= 0 ? Ae : Dr),
          };
          (this.containerData = Ke),
            ke(Me, { width: Ke.width, height: Ke.height }),
            we(R, ht),
            Ze(Me, ht);
        },
        initCanvas: function () {
          var R = this.containerData,
            X = this.imageData,
            G = this.options.viewMode,
            Me = Math.abs(X.rotate) % 180 === 90,
            ge = Me ? X.naturalHeight : X.naturalWidth,
            Ae = Me ? X.naturalWidth : X.naturalHeight,
            Ke = ge / Ae,
            _t = R.width,
            lt = R.height;
          R.height * Ke > R.width
            ? G === 3
              ? (_t = R.height * Ke)
              : (lt = R.width / Ke)
            : G === 3
            ? (lt = R.width / Ke)
            : (_t = R.height * Ke);
          var Ye = {
            aspectRatio: Ke,
            naturalWidth: ge,
            naturalHeight: Ae,
            width: _t,
            height: lt,
          };
          (this.canvasData = Ye),
            (this.limited = G === 1 || G === 2),
            this.limitCanvas(!0, !0),
            (Ye.width = Math.min(Math.max(Ye.width, Ye.minWidth), Ye.maxWidth)),
            (Ye.height = Math.min(
              Math.max(Ye.height, Ye.minHeight),
              Ye.maxHeight
            )),
            (Ye.left = (R.width - Ye.width) / 2),
            (Ye.top = (R.height - Ye.height) / 2),
            (Ye.oldLeft = Ye.left),
            (Ye.oldTop = Ye.top),
            (this.initialCanvasData = $({}, Ye));
        },
        limitCanvas: function (R, X) {
          var G = this.options,
            Me = this.containerData,
            ge = this.canvasData,
            Ae = this.cropBoxData,
            Ke = G.viewMode,
            _t = ge.aspectRatio,
            lt = this.cropped && Ae;
          if (R) {
            var Ye = Number(G.minCanvasWidth) || 0,
              et = Number(G.minCanvasHeight) || 0;
            Ke > 1
              ? ((Ye = Math.max(Ye, Me.width)),
                (et = Math.max(et, Me.height)),
                Ke === 3 && (et * _t > Ye ? (Ye = et * _t) : (et = Ye / _t)))
              : Ke > 0 &&
                (Ye
                  ? (Ye = Math.max(Ye, lt ? Ae.width : 0))
                  : et
                  ? (et = Math.max(et, lt ? Ae.height : 0))
                  : lt &&
                    ((Ye = Ae.width),
                    (et = Ae.height),
                    et * _t > Ye ? (Ye = et * _t) : (et = Ye / _t)));
            var bt = So({ aspectRatio: _t, width: Ye, height: et });
            (Ye = bt.width),
              (et = bt.height),
              (ge.minWidth = Ye),
              (ge.minHeight = et),
              (ge.maxWidth = 1 / 0),
              (ge.maxHeight = 1 / 0);
          }
          if (X)
            if (Ke > (lt ? 0 : 1)) {
              var Zi = Me.width - ge.width,
                Ri = Me.height - ge.height;
              (ge.minLeft = Math.min(0, Zi)),
                (ge.minTop = Math.min(0, Ri)),
                (ge.maxLeft = Math.max(0, Zi)),
                (ge.maxTop = Math.max(0, Ri)),
                lt &&
                  this.limited &&
                  ((ge.minLeft = Math.min(
                    Ae.left,
                    Ae.left + (Ae.width - ge.width)
                  )),
                  (ge.minTop = Math.min(
                    Ae.top,
                    Ae.top + (Ae.height - ge.height)
                  )),
                  (ge.maxLeft = Ae.left),
                  (ge.maxTop = Ae.top),
                  Ke === 2 &&
                    (ge.width >= Me.width &&
                      ((ge.minLeft = Math.min(0, Zi)),
                      (ge.maxLeft = Math.max(0, Zi))),
                    ge.height >= Me.height &&
                      ((ge.minTop = Math.min(0, Ri)),
                      (ge.maxTop = Math.max(0, Ri)))));
            } else
              (ge.minLeft = -ge.width),
                (ge.minTop = -ge.height),
                (ge.maxLeft = Me.width),
                (ge.maxTop = Me.height);
        },
        renderCanvas: function (R, X) {
          var G = this.canvasData,
            Me = this.imageData;
          if (X) {
            var ge = Pa({
                width: Me.naturalWidth * Math.abs(Me.scaleX || 1),
                height: Me.naturalHeight * Math.abs(Me.scaleY || 1),
                degree: Me.rotate || 0,
              }),
              Ae = ge.width,
              Ke = ge.height,
              _t = G.width * (Ae / G.naturalWidth),
              lt = G.height * (Ke / G.naturalHeight);
            (G.left -= (_t - G.width) / 2),
              (G.top -= (lt - G.height) / 2),
              (G.width = _t),
              (G.height = lt),
              (G.aspectRatio = Ae / Ke),
              (G.naturalWidth = Ae),
              (G.naturalHeight = Ke),
              this.limitCanvas(!0, !1);
          }
          (G.width > G.maxWidth || G.width < G.minWidth) &&
            (G.left = G.oldLeft),
            (G.height > G.maxHeight || G.height < G.minHeight) &&
              (G.top = G.oldTop),
            (G.width = Math.min(Math.max(G.width, G.minWidth), G.maxWidth)),
            (G.height = Math.min(Math.max(G.height, G.minHeight), G.maxHeight)),
            this.limitCanvas(!1, !0),
            (G.left = Math.min(Math.max(G.left, G.minLeft), G.maxLeft)),
            (G.top = Math.min(Math.max(G.top, G.minTop), G.maxTop)),
            (G.oldLeft = G.left),
            (G.oldTop = G.top),
            ke(
              this.canvas,
              $(
                { width: G.width, height: G.height },
                nn({ translateX: G.left, translateY: G.top })
              )
            ),
            this.renderImage(R),
            this.cropped && this.limited && this.limitCropBox(!0, !0);
        },
        renderImage: function (R) {
          var X = this.canvasData,
            G = this.imageData,
            Me = G.naturalWidth * (X.width / X.naturalWidth),
            ge = G.naturalHeight * (X.height / X.naturalHeight);
          $(G, {
            width: Me,
            height: ge,
            left: (X.width - Me) / 2,
            top: (X.height - ge) / 2,
          }),
            ke(
              this.image,
              $(
                { width: G.width, height: G.height },
                nn($({ translateX: G.left, translateY: G.top }, G))
              )
            ),
            R && this.output();
        },
        initCropBox: function () {
          var R = this.options,
            X = this.canvasData,
            G = R.aspectRatio || R.initialAspectRatio,
            Me = Number(R.autoCropArea) || 0.8,
            ge = { width: X.width, height: X.height };
          G &&
            (X.height * G > X.width
              ? (ge.height = ge.width / G)
              : (ge.width = ge.height * G)),
            (this.cropBoxData = ge),
            this.limitCropBox(!0, !0),
            (ge.width = Math.min(Math.max(ge.width, ge.minWidth), ge.maxWidth)),
            (ge.height = Math.min(
              Math.max(ge.height, ge.minHeight),
              ge.maxHeight
            )),
            (ge.width = Math.max(ge.minWidth, ge.width * Me)),
            (ge.height = Math.max(ge.minHeight, ge.height * Me)),
            (ge.left = X.left + (X.width - ge.width) / 2),
            (ge.top = X.top + (X.height - ge.height) / 2),
            (ge.oldLeft = ge.left),
            (ge.oldTop = ge.top),
            (this.initialCropBoxData = $({}, ge));
        },
        limitCropBox: function (R, X) {
          var G = this.options,
            Me = this.containerData,
            ge = this.canvasData,
            Ae = this.cropBoxData,
            Ke = this.limited,
            _t = G.aspectRatio;
          if (R) {
            var lt = Number(G.minCropBoxWidth) || 0,
              Ye = Number(G.minCropBoxHeight) || 0,
              et = Ke
                ? Math.min(
                    Me.width,
                    ge.width,
                    ge.width + ge.left,
                    Me.width - ge.left
                  )
                : Me.width,
              bt = Ke
                ? Math.min(
                    Me.height,
                    ge.height,
                    ge.height + ge.top,
                    Me.height - ge.top
                  )
                : Me.height;
            (lt = Math.min(lt, Me.width)),
              (Ye = Math.min(Ye, Me.height)),
              _t &&
                (lt && Ye
                  ? Ye * _t > lt
                    ? (Ye = lt / _t)
                    : (lt = Ye * _t)
                  : lt
                  ? (Ye = lt / _t)
                  : Ye && (lt = Ye * _t),
                bt * _t > et ? (bt = et / _t) : (et = bt * _t)),
              (Ae.minWidth = Math.min(lt, et)),
              (Ae.minHeight = Math.min(Ye, bt)),
              (Ae.maxWidth = et),
              (Ae.maxHeight = bt);
          }
          X &&
            (Ke
              ? ((Ae.minLeft = Math.max(0, ge.left)),
                (Ae.minTop = Math.max(0, ge.top)),
                (Ae.maxLeft =
                  Math.min(Me.width, ge.left + ge.width) - Ae.width),
                (Ae.maxTop =
                  Math.min(Me.height, ge.top + ge.height) - Ae.height))
              : ((Ae.minLeft = 0),
                (Ae.minTop = 0),
                (Ae.maxLeft = Me.width - Ae.width),
                (Ae.maxTop = Me.height - Ae.height)));
        },
        renderCropBox: function () {
          var R = this.options,
            X = this.containerData,
            G = this.cropBoxData;
          (G.width > G.maxWidth || G.width < G.minWidth) &&
            (G.left = G.oldLeft),
            (G.height > G.maxHeight || G.height < G.minHeight) &&
              (G.top = G.oldTop),
            (G.width = Math.min(Math.max(G.width, G.minWidth), G.maxWidth)),
            (G.height = Math.min(Math.max(G.height, G.minHeight), G.maxHeight)),
            this.limitCropBox(!1, !0),
            (G.left = Math.min(Math.max(G.left, G.minLeft), G.maxLeft)),
            (G.top = Math.min(Math.max(G.top, G.minTop), G.maxTop)),
            (G.oldLeft = G.left),
            (G.oldTop = G.top),
            R.movable &&
              R.cropBoxMovable &&
              ti(
                this.face,
                Re,
                G.width >= X.width && G.height >= X.height ? Te : Y
              ),
            ke(
              this.cropBox,
              $(
                { width: G.width, height: G.height },
                nn({ translateX: G.left, translateY: G.top })
              )
            ),
            this.cropped && this.limited && this.limitCanvas(!0, !0),
            this.disabled || this.output();
        },
        output: function () {
          this.preview(), ci(this.element, it, this.getData());
        },
      },
      Lr = {
        initPreview: function () {
          var R = this.element,
            X = this.crossOrigin,
            G = this.options.preview,
            Me = X ? this.crossOriginUrl : this.url,
            ge = R.alt || "The image to preview",
            Ae = document.createElement("img");
          if (
            (X && (Ae.crossOrigin = X),
            (Ae.src = Me),
            (Ae.alt = ge),
            this.viewBox.appendChild(Ae),
            (this.viewBoxImage = Ae),
            !!G)
          ) {
            var Ke = G;
            typeof G == "string"
              ? (Ke = R.ownerDocument.querySelectorAll(G))
              : G.querySelector && (Ke = [G]),
              (this.previews = Ke),
              H(Ke, function (_t) {
                var lt = document.createElement("img");
                ti(_t, Ce, {
                  width: _t.offsetWidth,
                  height: _t.offsetHeight,
                  html: _t.innerHTML,
                }),
                  X && (lt.crossOrigin = X),
                  (lt.src = Me),
                  (lt.alt = ge),
                  (lt.style.cssText =
                    'display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"'),
                  (_t.innerHTML = ""),
                  _t.appendChild(lt);
              });
          }
        },
        resetPreview: function () {
          H(this.previews, function (R) {
            var X = oi(R, Ce);
            ke(R, { width: X.width, height: X.height }),
              (R.innerHTML = X.html),
              zi(R, Ce);
          });
        },
        preview: function () {
          var R = this.imageData,
            X = this.canvasData,
            G = this.cropBoxData,
            Me = G.width,
            ge = G.height,
            Ae = R.width,
            Ke = R.height,
            _t = G.left - X.left - R.left,
            lt = G.top - X.top - R.top;
          !this.cropped ||
            this.disabled ||
            (ke(
              this.viewBoxImage,
              $(
                { width: Ae, height: Ke },
                nn($({ translateX: -_t, translateY: -lt }, R))
              )
            ),
            H(this.previews, function (Ye) {
              var et = oi(Ye, Ce),
                bt = et.width,
                Zi = et.height,
                Ri = bt,
                vr = Zi,
                nr = 1;
              Me && ((nr = bt / Me), (vr = ge * nr)),
                ge && vr > Zi && ((nr = Zi / ge), (Ri = Me * nr), (vr = Zi)),
                ke(Ye, { width: Ri, height: vr }),
                ke(
                  Ye.getElementsByTagName("img")[0],
                  $(
                    { width: Ae * nr, height: Ke * nr },
                    nn($({ translateX: -_t * nr, translateY: -lt * nr }, R))
                  )
                );
            }));
        },
      },
      cr = {
        bind: function () {
          var R = this.element,
            X = this.options,
            G = this.cropper;
          Fi(X.cropstart) && Wi(R, sr, X.cropstart),
            Fi(X.cropmove) && Wi(R, wi, X.cropmove),
            Fi(X.cropend) && Wi(R, ii, X.cropend),
            Fi(X.crop) && Wi(R, it, X.crop),
            Fi(X.zoom) && Wi(R, tn, X.zoom),
            Wi(G, Si, (this.onCropStart = this.cropStart.bind(this))),
            X.zoomable &&
              X.zoomOnWheel &&
              Wi(G, en, (this.onWheel = this.wheel.bind(this)), {
                passive: !1,
                capture: !0,
              }),
            X.toggleDragModeOnDblclick &&
              Wi(G, Wr, (this.onDblclick = this.dblclick.bind(this))),
            Wi(
              R.ownerDocument,
              gi,
              (this.onCropMove = this.cropMove.bind(this))
            ),
            Wi(R.ownerDocument, ui, (this.onCropEnd = this.cropEnd.bind(this))),
            X.responsive &&
              Wi(window, Er, (this.onResize = this.resize.bind(this)));
        },
        unbind: function () {
          var R = this.element,
            X = this.options,
            G = this.cropper;
          Fi(X.cropstart) && Ni(R, sr, X.cropstart),
            Fi(X.cropmove) && Ni(R, wi, X.cropmove),
            Fi(X.cropend) && Ni(R, ii, X.cropend),
            Fi(X.crop) && Ni(R, it, X.crop),
            Fi(X.zoom) && Ni(R, tn, X.zoom),
            Ni(G, Si, this.onCropStart),
            X.zoomable &&
              X.zoomOnWheel &&
              Ni(G, en, this.onWheel, { passive: !1, capture: !0 }),
            X.toggleDragModeOnDblclick && Ni(G, Wr, this.onDblclick),
            Ni(R.ownerDocument, gi, this.onCropMove),
            Ni(R.ownerDocument, ui, this.onCropEnd),
            X.responsive && Ni(window, Er, this.onResize);
        },
      },
      Ho = {
        resize: function () {
          if (!this.disabled) {
            var R = this.options,
              X = this.container,
              G = this.containerData,
              Me = X.offsetWidth / G.width,
              ge = X.offsetHeight / G.height,
              Ae = Math.abs(Me - 1) > Math.abs(ge - 1) ? Me : ge;
            if (Ae !== 1) {
              var Ke, _t;
              R.restore &&
                ((Ke = this.getCanvasData()), (_t = this.getCropBoxData())),
                this.render(),
                R.restore &&
                  (this.setCanvasData(
                    H(Ke, function (lt, Ye) {
                      Ke[Ye] = lt * Ae;
                    })
                  ),
                  this.setCropBoxData(
                    H(_t, function (lt, Ye) {
                      _t[Ye] = lt * Ae;
                    })
                  ));
            }
          }
        },
        dblclick: function () {
          this.disabled ||
            this.options.dragMode === Li ||
            this.setDragMode(me(this.dragBox, ct) ? ei : Bt);
        },
        wheel: function (R) {
          var X = this,
            G = Number(this.options.wheelZoomRatio) || 0.1,
            Me = 1;
          this.disabled ||
            (R.preventDefault(),
            !this.wheeling &&
              ((this.wheeling = !0),
              setTimeout(function () {
                X.wheeling = !1;
              }, 50),
              R.deltaY
                ? (Me = R.deltaY > 0 ? 1 : -1)
                : R.wheelDelta
                ? (Me = -R.wheelDelta / 120)
                : R.detail && (Me = R.detail > 0 ? 1 : -1),
              this.zoom(-Me * G, R)));
        },
        cropStart: function (R) {
          var X = R.buttons,
            G = R.button;
          if (
            !(
              this.disabled ||
              ((R.type === "mousedown" ||
                (R.type === "pointerdown" && R.pointerType === "mouse")) &&
                ((Tt(X) && X !== 1) || (Tt(G) && G !== 0) || R.ctrlKey))
            )
          ) {
            var Me = this.options,
              ge = this.pointers,
              Ae;
            R.changedTouches
              ? H(R.changedTouches, function (Ke) {
                  ge[Ke.identifier] = ha(Ke);
                })
              : (ge[R.pointerId || 0] = ha(R)),
              Object.keys(ge).length > 1 && Me.zoomable && Me.zoomOnTouch
                ? (Ae = fe)
                : (Ae = oi(R.target, Re)),
              Vn.test(Ae) &&
                ci(this.element, sr, { originalEvent: R, action: Ae }) !== !1 &&
                (R.preventDefault(),
                (this.action = Ae),
                (this.cropping = !1),
                Ae === Ie && ((this.cropping = !0), we(this.dragBox, Pi)));
          }
        },
        cropMove: function (R) {
          var X = this.action;
          if (!(this.disabled || !X)) {
            var G = this.pointers;
            R.preventDefault(),
              ci(this.element, wi, { originalEvent: R, action: X }) !== !1 &&
                (R.changedTouches
                  ? H(R.changedTouches, function (Me) {
                      $(G[Me.identifier] || {}, ha(Me, !0));
                    })
                  : $(G[R.pointerId || 0] || {}, ha(R, !0)),
                this.change(R));
          }
        },
        cropEnd: function (R) {
          if (!this.disabled) {
            var X = this.action,
              G = this.pointers;
            R.changedTouches
              ? H(R.changedTouches, function (Me) {
                  delete G[Me.identifier];
                })
              : delete G[R.pointerId || 0],
              X &&
                (R.preventDefault(),
                Object.keys(G).length || (this.action = ""),
                this.cropping &&
                  ((this.cropping = !1),
                  Qe(this.dragBox, Pi, this.cropped && this.options.modal)),
                ci(this.element, ii, { originalEvent: R, action: X }));
          }
        },
      },
      on = {
        change: function (R) {
          var X = this.options,
            G = this.canvasData,
            Me = this.containerData,
            ge = this.cropBoxData,
            Ae = this.pointers,
            Ke = this.action,
            _t = X.aspectRatio,
            lt = ge.left,
            Ye = ge.top,
            et = ge.width,
            bt = ge.height,
            Zi = lt + et,
            Ri = Ye + bt,
            vr = 0,
            nr = 0,
            Kr = Me.width,
            Hr = Me.height,
            _r = !0,
            Co;
          !_t && R.shiftKey && (_t = et && bt ? et / bt : 1),
            this.limited &&
              ((vr = ge.minLeft),
              (nr = ge.minTop),
              (Kr = vr + Math.min(Me.width, G.width, G.left + G.width)),
              (Hr = nr + Math.min(Me.height, G.height, G.top + G.height)));
          var Tr = Ae[Object.keys(Ae)[0]],
            wt = { x: Tr.endX - Tr.startX, y: Tr.endY - Tr.startY },
            Ki = function (qn) {
              switch (qn) {
                case Le:
                  Zi + wt.x > Kr && (wt.x = Kr - Zi);
                  break;
                case De:
                  lt + wt.x < vr && (wt.x = vr - lt);
                  break;
                case qe:
                  Ye + wt.y < nr && (wt.y = nr - Ye);
                  break;
                case st:
                  Ri + wt.y > Hr && (wt.y = Hr - Ri);
                  break;
              }
            };
          switch (Ke) {
            case Y:
              (lt += wt.x), (Ye += wt.y);
              break;
            case Le:
              if (wt.x >= 0 && (Zi >= Kr || (_t && (Ye <= nr || Ri >= Hr)))) {
                _r = !1;
                break;
              }
              Ki(Le),
                (et += wt.x),
                et < 0 && ((Ke = De), (et = -et), (lt -= et)),
                _t && ((bt = et / _t), (Ye += (ge.height - bt) / 2));
              break;
            case qe:
              if (wt.y <= 0 && (Ye <= nr || (_t && (lt <= vr || Zi >= Kr)))) {
                _r = !1;
                break;
              }
              Ki(qe),
                (bt -= wt.y),
                (Ye += wt.y),
                bt < 0 && ((Ke = st), (bt = -bt), (Ye -= bt)),
                _t && ((et = bt * _t), (lt += (ge.width - et) / 2));
              break;
            case De:
              if (wt.x <= 0 && (lt <= vr || (_t && (Ye <= nr || Ri >= Hr)))) {
                _r = !1;
                break;
              }
              Ki(De),
                (et -= wt.x),
                (lt += wt.x),
                et < 0 && ((Ke = Le), (et = -et), (lt -= et)),
                _t && ((bt = et / _t), (Ye += (ge.height - bt) / 2));
              break;
            case st:
              if (wt.y >= 0 && (Ri >= Hr || (_t && (lt <= vr || Zi >= Kr)))) {
                _r = !1;
                break;
              }
              Ki(st),
                (bt += wt.y),
                bt < 0 && ((Ke = qe), (bt = -bt), (Ye -= bt)),
                _t && ((et = bt * _t), (lt += (ge.width - et) / 2));
              break;
            case zt:
              if (_t) {
                if (wt.y <= 0 && (Ye <= nr || Zi >= Kr)) {
                  _r = !1;
                  break;
                }
                Ki(qe), (bt -= wt.y), (Ye += wt.y), (et = bt * _t);
              } else
                Ki(qe),
                  Ki(Le),
                  wt.x >= 0
                    ? Zi < Kr
                      ? (et += wt.x)
                      : wt.y <= 0 && Ye <= nr && (_r = !1)
                    : (et += wt.x),
                  wt.y <= 0
                    ? Ye > nr && ((bt -= wt.y), (Ye += wt.y))
                    : ((bt -= wt.y), (Ye += wt.y));
              et < 0 && bt < 0
                ? ((Ke = qt), (bt = -bt), (et = -et), (Ye -= bt), (lt -= et))
                : et < 0
                ? ((Ke = Rt), (et = -et), (lt -= et))
                : bt < 0 && ((Ke = Gt), (bt = -bt), (Ye -= bt));
              break;
            case Rt:
              if (_t) {
                if (wt.y <= 0 && (Ye <= nr || lt <= vr)) {
                  _r = !1;
                  break;
                }
                Ki(qe),
                  (bt -= wt.y),
                  (Ye += wt.y),
                  (et = bt * _t),
                  (lt += ge.width - et);
              } else
                Ki(qe),
                  Ki(De),
                  wt.x <= 0
                    ? lt > vr
                      ? ((et -= wt.x), (lt += wt.x))
                      : wt.y <= 0 && Ye <= nr && (_r = !1)
                    : ((et -= wt.x), (lt += wt.x)),
                  wt.y <= 0
                    ? Ye > nr && ((bt -= wt.y), (Ye += wt.y))
                    : ((bt -= wt.y), (Ye += wt.y));
              et < 0 && bt < 0
                ? ((Ke = Gt), (bt = -bt), (et = -et), (Ye -= bt), (lt -= et))
                : et < 0
                ? ((Ke = zt), (et = -et), (lt -= et))
                : bt < 0 && ((Ke = qt), (bt = -bt), (Ye -= bt));
              break;
            case qt:
              if (_t) {
                if (wt.x <= 0 && (lt <= vr || Ri >= Hr)) {
                  _r = !1;
                  break;
                }
                Ki(De), (et -= wt.x), (lt += wt.x), (bt = et / _t);
              } else
                Ki(st),
                  Ki(De),
                  wt.x <= 0
                    ? lt > vr
                      ? ((et -= wt.x), (lt += wt.x))
                      : wt.y >= 0 && Ri >= Hr && (_r = !1)
                    : ((et -= wt.x), (lt += wt.x)),
                  wt.y >= 0 ? Ri < Hr && (bt += wt.y) : (bt += wt.y);
              et < 0 && bt < 0
                ? ((Ke = zt), (bt = -bt), (et = -et), (Ye -= bt), (lt -= et))
                : et < 0
                ? ((Ke = Gt), (et = -et), (lt -= et))
                : bt < 0 && ((Ke = Rt), (bt = -bt), (Ye -= bt));
              break;
            case Gt:
              if (_t) {
                if (wt.x >= 0 && (Zi >= Kr || Ri >= Hr)) {
                  _r = !1;
                  break;
                }
                Ki(Le), (et += wt.x), (bt = et / _t);
              } else
                Ki(st),
                  Ki(Le),
                  wt.x >= 0
                    ? Zi < Kr
                      ? (et += wt.x)
                      : wt.y >= 0 && Ri >= Hr && (_r = !1)
                    : (et += wt.x),
                  wt.y >= 0 ? Ri < Hr && (bt += wt.y) : (bt += wt.y);
              et < 0 && bt < 0
                ? ((Ke = Rt), (bt = -bt), (et = -et), (Ye -= bt), (lt -= et))
                : et < 0
                ? ((Ke = qt), (et = -et), (lt -= et))
                : bt < 0 && ((Ke = zt), (bt = -bt), (Ye -= bt));
              break;
            case Te:
              this.move(wt.x, wt.y), (_r = !1);
              break;
            case fe:
              this.zoom(vl(Ae), R), (_r = !1);
              break;
            case Ie:
              if (!wt.x || !wt.y) {
                _r = !1;
                break;
              }
              (Co = br(this.cropper)),
                (lt = Tr.startX - Co.left),
                (Ye = Tr.startY - Co.top),
                (et = ge.minWidth),
                (bt = ge.minHeight),
                wt.x > 0
                  ? (Ke = wt.y > 0 ? Gt : zt)
                  : wt.x < 0 && ((lt -= et), (Ke = wt.y > 0 ? qt : Rt)),
                wt.y < 0 && (Ye -= bt),
                this.cropped ||
                  (Ze(this.cropBox, ht),
                  (this.cropped = !0),
                  this.limited && this.limitCropBox(!0, !0));
              break;
          }
          _r &&
            ((ge.width = et),
            (ge.height = bt),
            (ge.left = lt),
            (ge.top = Ye),
            (this.action = Ke),
            this.renderCropBox()),
            H(Ae, function (Fr) {
              (Fr.startX = Fr.endX), (Fr.startY = Fr.endY);
            });
        },
      },
      cs = {
        crop: function () {
          return (
            this.ready &&
              !this.cropped &&
              !this.disabled &&
              ((this.cropped = !0),
              this.limitCropBox(!0, !0),
              this.options.modal && we(this.dragBox, Pi),
              Ze(this.cropBox, ht),
              this.setCropBoxData(this.initialCropBoxData)),
            this
          );
        },
        reset: function () {
          return (
            this.ready &&
              !this.disabled &&
              ((this.imageData = $({}, this.initialImageData)),
              (this.canvasData = $({}, this.initialCanvasData)),
              (this.cropBoxData = $({}, this.initialCropBoxData)),
              this.renderCanvas(),
              this.cropped && this.renderCropBox()),
            this
          );
        },
        clear: function () {
          return (
            this.cropped &&
              !this.disabled &&
              ($(this.cropBoxData, { left: 0, top: 0, width: 0, height: 0 }),
              (this.cropped = !1),
              this.renderCropBox(),
              this.limitCanvas(!0, !0),
              this.renderCanvas(),
              Ze(this.dragBox, Pi),
              we(this.cropBox, ht)),
            this
          );
        },
        replace: function (R) {
          var X =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : !1;
          return (
            !this.disabled &&
              R &&
              (this.isImg && (this.element.src = R),
              X
                ? ((this.url = R),
                  (this.image.src = R),
                  this.ready &&
                    ((this.viewBoxImage.src = R),
                    H(this.previews, function (G) {
                      G.getElementsByTagName("img")[0].src = R;
                    })))
                : (this.isImg && (this.replaced = !0),
                  (this.options.data = null),
                  this.uncreate(),
                  this.load(R))),
            this
          );
        },
        enable: function () {
          return (
            this.ready &&
              this.disabled &&
              ((this.disabled = !1), Ze(this.cropper, vt)),
            this
          );
        },
        disable: function () {
          return (
            this.ready &&
              !this.disabled &&
              ((this.disabled = !0), we(this.cropper, vt)),
            this
          );
        },
        destroy: function () {
          var R = this.element;
          return R[be]
            ? ((R[be] = void 0),
              this.isImg && this.replaced && (R.src = this.originalUrl),
              this.uncreate(),
              this)
            : this;
        },
        move: function (R) {
          var X =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : R,
            G = this.canvasData,
            Me = G.left,
            ge = G.top;
          return this.moveTo(
            At(R) ? R : Me + Number(R),
            At(X) ? X : ge + Number(X)
          );
        },
        moveTo: function (R) {
          var X =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : R,
            G = this.canvasData,
            Me = !1;
          return (
            (R = Number(R)),
            (X = Number(X)),
            this.ready &&
              !this.disabled &&
              this.options.movable &&
              (Tt(R) && ((G.left = R), (Me = !0)),
              Tt(X) && ((G.top = X), (Me = !0)),
              Me && this.renderCanvas(!0)),
            this
          );
        },
        zoom: function (R, X) {
          var G = this.canvasData;
          return (
            (R = Number(R)),
            R < 0 ? (R = 1 / (1 - R)) : (R = 1 + R),
            this.zoomTo((G.width * R) / G.naturalWidth, null, X)
          );
        },
        zoomTo: function (R, X, G) {
          var Me = this.options,
            ge = this.canvasData,
            Ae = ge.width,
            Ke = ge.height,
            _t = ge.naturalWidth,
            lt = ge.naturalHeight;
          if (
            ((R = Number(R)),
            R >= 0 && this.ready && !this.disabled && Me.zoomable)
          ) {
            var Ye = _t * R,
              et = lt * R;
            if (
              ci(this.element, tn, {
                ratio: R,
                oldRatio: Ae / _t,
                originalEvent: G,
              }) === !1
            )
              return this;
            if (G) {
              var bt = this.pointers,
                Zi = br(this.cropper),
                Ri =
                  bt && Object.keys(bt).length
                    ? tr(bt)
                    : { pageX: G.pageX, pageY: G.pageY };
              (ge.left -= (Ye - Ae) * ((Ri.pageX - Zi.left - ge.left) / Ae)),
                (ge.top -= (et - Ke) * ((Ri.pageY - Zi.top - ge.top) / Ke));
            } else
              yi(X) && Tt(X.x) && Tt(X.y)
                ? ((ge.left -= (Ye - Ae) * ((X.x - ge.left) / Ae)),
                  (ge.top -= (et - Ke) * ((X.y - ge.top) / Ke)))
                : ((ge.left -= (Ye - Ae) / 2), (ge.top -= (et - Ke) / 2));
            (ge.width = Ye), (ge.height = et), this.renderCanvas(!0);
          }
          return this;
        },
        rotate: function (R) {
          return this.rotateTo((this.imageData.rotate || 0) + Number(R));
        },
        rotateTo: function (R) {
          return (
            (R = Number(R)),
            Tt(R) &&
              this.ready &&
              !this.disabled &&
              this.options.rotatable &&
              ((this.imageData.rotate = R % 360), this.renderCanvas(!0, !0)),
            this
          );
        },
        scaleX: function (R) {
          var X = this.imageData.scaleY;
          return this.scale(R, Tt(X) ? X : 1);
        },
        scaleY: function (R) {
          var X = this.imageData.scaleX;
          return this.scale(Tt(X) ? X : 1, R);
        },
        scale: function (R) {
          var X =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : R,
            G = this.imageData,
            Me = !1;
          return (
            (R = Number(R)),
            (X = Number(X)),
            this.ready &&
              !this.disabled &&
              this.options.scalable &&
              (Tt(R) && ((G.scaleX = R), (Me = !0)),
              Tt(X) && ((G.scaleY = X), (Me = !0)),
              Me && this.renderCanvas(!0, !0)),
            this
          );
        },
        getData: function () {
          var R =
              arguments.length > 0 && arguments[0] !== void 0
                ? arguments[0]
                : !1,
            X = this.options,
            G = this.imageData,
            Me = this.canvasData,
            ge = this.cropBoxData,
            Ae;
          if (this.ready && this.cropped) {
            Ae = {
              x: ge.left - Me.left,
              y: ge.top - Me.top,
              width: ge.width,
              height: ge.height,
            };
            var Ke = G.width / G.naturalWidth;
            if (
              (H(Ae, function (Ye, et) {
                Ae[et] = Ye / Ke;
              }),
              R)
            ) {
              var _t = Math.round(Ae.y + Ae.height),
                lt = Math.round(Ae.x + Ae.width);
              (Ae.x = Math.round(Ae.x)),
                (Ae.y = Math.round(Ae.y)),
                (Ae.width = lt - Ae.x),
                (Ae.height = _t - Ae.y);
            }
          } else Ae = { x: 0, y: 0, width: 0, height: 0 };
          return (
            X.rotatable && (Ae.rotate = G.rotate || 0),
            X.scalable &&
              ((Ae.scaleX = G.scaleX || 1), (Ae.scaleY = G.scaleY || 1)),
            Ae
          );
        },
        setData: function (R) {
          var X = this.options,
            G = this.imageData,
            Me = this.canvasData,
            ge = {};
          if (this.ready && !this.disabled && yi(R)) {
            var Ae = !1;
            X.rotatable &&
              Tt(R.rotate) &&
              R.rotate !== G.rotate &&
              ((G.rotate = R.rotate), (Ae = !0)),
              X.scalable &&
                (Tt(R.scaleX) &&
                  R.scaleX !== G.scaleX &&
                  ((G.scaleX = R.scaleX), (Ae = !0)),
                Tt(R.scaleY) &&
                  R.scaleY !== G.scaleY &&
                  ((G.scaleY = R.scaleY), (Ae = !0))),
              Ae && this.renderCanvas(!0, !0);
            var Ke = G.width / G.naturalWidth;
            Tt(R.x) && (ge.left = R.x * Ke + Me.left),
              Tt(R.y) && (ge.top = R.y * Ke + Me.top),
              Tt(R.width) && (ge.width = R.width * Ke),
              Tt(R.height) && (ge.height = R.height * Ke),
              this.setCropBoxData(ge);
          }
          return this;
        },
        getContainerData: function () {
          return this.ready ? $({}, this.containerData) : {};
        },
        getImageData: function () {
          return this.sized ? $({}, this.imageData) : {};
        },
        getCanvasData: function () {
          var R = this.canvasData,
            X = {};
          return (
            this.ready &&
              H(
                [
                  "left",
                  "top",
                  "width",
                  "height",
                  "naturalWidth",
                  "naturalHeight",
                ],
                function (G) {
                  X[G] = R[G];
                }
              ),
            X
          );
        },
        setCanvasData: function (R) {
          var X = this.canvasData,
            G = X.aspectRatio;
          return (
            this.ready &&
              !this.disabled &&
              yi(R) &&
              (Tt(R.left) && (X.left = R.left),
              Tt(R.top) && (X.top = R.top),
              Tt(R.width)
                ? ((X.width = R.width), (X.height = R.width / G))
                : Tt(R.height) &&
                  ((X.height = R.height), (X.width = R.height * G)),
              this.renderCanvas(!0)),
            this
          );
        },
        getCropBoxData: function () {
          var R = this.cropBoxData,
            X;
          return (
            this.ready &&
              this.cropped &&
              (X = {
                left: R.left,
                top: R.top,
                width: R.width,
                height: R.height,
              }),
            X || {}
          );
        },
        setCropBoxData: function (R) {
          var X = this.cropBoxData,
            G = this.options.aspectRatio,
            Me,
            ge;
          return (
            this.ready &&
              this.cropped &&
              !this.disabled &&
              yi(R) &&
              (Tt(R.left) && (X.left = R.left),
              Tt(R.top) && (X.top = R.top),
              Tt(R.width) &&
                R.width !== X.width &&
                ((Me = !0), (X.width = R.width)),
              Tt(R.height) &&
                R.height !== X.height &&
                ((ge = !0), (X.height = R.height)),
              G &&
                (Me
                  ? (X.height = X.width / G)
                  : ge && (X.width = X.height * G)),
              this.renderCropBox()),
            this
          );
        },
        getCroppedCanvas: function () {
          var R =
            arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          if (!this.ready || !window.HTMLCanvasElement) return null;
          var X = this.canvasData,
            G = jn(this.image, this.imageData, X, R);
          if (!this.cropped) return G;
          var Me = this.getData(R.rounded),
            ge = Me.x,
            Ae = Me.y,
            Ke = Me.width,
            _t = Me.height,
            lt = G.width / Math.floor(X.naturalWidth);
          lt !== 1 && ((ge *= lt), (Ae *= lt), (Ke *= lt), (_t *= lt));
          var Ye = Ke / _t,
            et = So({
              aspectRatio: Ye,
              width: R.maxWidth || 1 / 0,
              height: R.maxHeight || 1 / 0,
            }),
            bt = So(
              {
                aspectRatio: Ye,
                width: R.minWidth || 0,
                height: R.minHeight || 0,
              },
              "cover"
            ),
            Zi = So({
              aspectRatio: Ye,
              width: R.width || (lt !== 1 ? G.width : Ke),
              height: R.height || (lt !== 1 ? G.height : _t),
            }),
            Ri = Zi.width,
            vr = Zi.height;
          (Ri = Math.min(et.width, Math.max(bt.width, Ri))),
            (vr = Math.min(et.height, Math.max(bt.height, vr)));
          var nr = document.createElement("canvas"),
            Kr = nr.getContext("2d");
          (nr.width = ve(Ri)),
            (nr.height = ve(vr)),
            (Kr.fillStyle = R.fillColor || "transparent"),
            Kr.fillRect(0, 0, Ri, vr);
          var Hr = R.imageSmoothingEnabled,
            _r = Hr === void 0 ? !0 : Hr,
            Co = R.imageSmoothingQuality;
          (Kr.imageSmoothingEnabled = _r),
            Co && (Kr.imageSmoothingQuality = Co);
          var Tr = G.width,
            wt = G.height,
            Ki = ge,
            Fr = Ae,
            qn,
            uo,
            Eo,
            Qs,
            Ts,
            qo;
          Ki <= -Ke || Ki > Tr
            ? ((Ki = 0), (qn = 0), (Eo = 0), (Ts = 0))
            : Ki <= 0
            ? ((Eo = -Ki), (Ki = 0), (qn = Math.min(Tr, Ke + Ki)), (Ts = qn))
            : Ki <= Tr && ((Eo = 0), (qn = Math.min(Ke, Tr - Ki)), (Ts = qn)),
            qn <= 0 || Fr <= -_t || Fr > wt
              ? ((Fr = 0), (uo = 0), (Qs = 0), (qo = 0))
              : Fr <= 0
              ? ((Qs = -Fr), (Fr = 0), (uo = Math.min(wt, _t + Fr)), (qo = uo))
              : Fr <= wt && ((Qs = 0), (uo = Math.min(_t, wt - Fr)), (qo = uo));
          var Xn = [Ki, Fr, qn, uo];
          if (Ts > 0 && qo > 0) {
            var ho = Ri / Ke;
            Xn.push(Eo * ho, Qs * ho, Ts * ho, qo * ho);
          }
          return (
            Kr.drawImage.apply(
              Kr,
              [G].concat(
                h(
                  Xn.map(function (Gs) {
                    return Math.floor(ve(Gs));
                  })
                )
              )
            ),
            nr
          );
        },
        setAspectRatio: function (R) {
          var X = this.options;
          return (
            !this.disabled &&
              !At(R) &&
              ((X.aspectRatio = Math.max(0, R) || NaN),
              this.ready &&
                (this.initCropBox(), this.cropped && this.renderCropBox())),
            this
          );
        },
        setDragMode: function (R) {
          var X = this.options,
            G = this.dragBox,
            Me = this.face;
          if (this.ready && !this.disabled) {
            var ge = R === Bt,
              Ae = X.movable && R === ei;
            (R = ge || Ae ? R : Li),
              (X.dragMode = R),
              ti(G, Re, R),
              Qe(G, ct, ge),
              Qe(G, Zt, Ae),
              X.cropBoxMovable ||
                (ti(Me, Re, R), Qe(Me, ct, ge), Qe(Me, Zt, Ae));
          }
          return this;
        },
      },
      Hn = Q.Cropper,
      Es = (function () {
        function ue(R) {
          var X =
            arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
          if ((r(this, ue), !R || !at.test(R.tagName)))
            throw new Error(
              "The first argument is required and must be an <img> or <canvas> element."
            );
          (this.element = R),
            (this.options = $({}, Kn, yi(X) && X)),
            (this.cropped = !1),
            (this.disabled = !1),
            (this.pointers = {}),
            (this.ready = !1),
            (this.reloading = !1),
            (this.replaced = !1),
            (this.sized = !1),
            (this.sizing = !1),
            this.init();
        }
        return (
          n(
            ue,
            [
              {
                key: "init",
                value: function () {
                  var X = this.element,
                    G = X.tagName.toLowerCase(),
                    Me;
                  if (!X[be]) {
                    if (((X[be] = this), G === "img")) {
                      if (
                        ((this.isImg = !0),
                        (Me = X.getAttribute("src") || ""),
                        (this.originalUrl = Me),
                        !Me)
                      )
                        return;
                      Me = X.src;
                    } else
                      G === "canvas" &&
                        window.HTMLCanvasElement &&
                        (Me = X.toDataURL());
                    this.load(Me);
                  }
                },
              },
              {
                key: "load",
                value: function (X) {
                  var G = this;
                  if (X) {
                    (this.url = X), (this.imageData = {});
                    var Me = this.element,
                      ge = this.options;
                    if (
                      (!ge.rotatable &&
                        !ge.scalable &&
                        (ge.checkOrientation = !1),
                      !ge.checkOrientation || !window.ArrayBuffer)
                    ) {
                      this.clone();
                      return;
                    }
                    if (An.test(X)) {
                      Zr.test(X) ? this.read(Jn(X)) : this.clone();
                      return;
                    }
                    var Ae = new XMLHttpRequest(),
                      Ke = this.clone.bind(this);
                    (this.reloading = !0),
                      (this.xhr = Ae),
                      (Ae.onabort = Ke),
                      (Ae.onerror = Ke),
                      (Ae.ontimeout = Ke),
                      (Ae.onprogress = function () {
                        Ae.getResponseHeader("content-type") !== yn &&
                          Ae.abort();
                      }),
                      (Ae.onload = function () {
                        G.read(Ae.response);
                      }),
                      (Ae.onloadend = function () {
                        (G.reloading = !1), (G.xhr = null);
                      }),
                      ge.checkCrossOrigin &&
                        rn(X) &&
                        Me.crossOrigin &&
                        (X = un(X)),
                      Ae.open("GET", X, !0),
                      (Ae.responseType = "arraybuffer"),
                      (Ae.withCredentials =
                        Me.crossOrigin === "use-credentials"),
                      Ae.send();
                  }
                },
              },
              {
                key: "read",
                value: function (X) {
                  var G = this.options,
                    Me = this.imageData,
                    ge = de(X),
                    Ae = 0,
                    Ke = 1,
                    _t = 1;
                  if (ge > 1) {
                    this.url = xl(X, yn);
                    var lt = ai(ge);
                    (Ae = lt.rotate), (Ke = lt.scaleX), (_t = lt.scaleY);
                  }
                  G.rotatable && (Me.rotate = Ae),
                    G.scalable && ((Me.scaleX = Ke), (Me.scaleY = _t)),
                    this.clone();
                },
              },
              {
                key: "clone",
                value: function () {
                  var X = this.element,
                    G = this.url,
                    Me = X.crossOrigin,
                    ge = G;
                  this.options.checkCrossOrigin &&
                    rn(G) &&
                    (Me || (Me = "anonymous"), (ge = un(G))),
                    (this.crossOrigin = Me),
                    (this.crossOriginUrl = ge);
                  var Ae = document.createElement("img");
                  Me && (Ae.crossOrigin = Me),
                    (Ae.src = ge || G),
                    (Ae.alt = X.alt || "The image to crop"),
                    (this.image = Ae),
                    (Ae.onload = this.start.bind(this)),
                    (Ae.onerror = this.stop.bind(this)),
                    we(Ae, Vt),
                    X.parentNode.insertBefore(Ae, X.nextSibling);
                },
              },
              {
                key: "start",
                value: function () {
                  var X = this,
                    G = this.image;
                  (G.onload = null), (G.onerror = null), (this.sizing = !0);
                  var Me =
                      Q.navigator &&
                      /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(
                        Q.navigator.userAgent
                      ),
                    ge = function (lt, Ye) {
                      $(X.imageData, {
                        naturalWidth: lt,
                        naturalHeight: Ye,
                        aspectRatio: lt / Ye,
                      }),
                        (X.initialImageData = $({}, X.imageData)),
                        (X.sizing = !1),
                        (X.sized = !0),
                        X.build();
                    };
                  if (G.naturalWidth && !Me) {
                    ge(G.naturalWidth, G.naturalHeight);
                    return;
                  }
                  var Ae = document.createElement("img"),
                    Ke = document.body || document.documentElement;
                  (this.sizingImage = Ae),
                    (Ae.onload = function () {
                      ge(Ae.width, Ae.height), Me || Ke.removeChild(Ae);
                    }),
                    (Ae.src = G.src),
                    Me ||
                      ((Ae.style.cssText =
                        "left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;"),
                      Ke.appendChild(Ae));
                },
              },
              {
                key: "stop",
                value: function () {
                  var X = this.image;
                  (X.onload = null),
                    (X.onerror = null),
                    X.parentNode.removeChild(X),
                    (this.image = null);
                },
              },
              {
                key: "build",
                value: function () {
                  if (!(!this.sized || this.ready)) {
                    var X = this.element,
                      G = this.options,
                      Me = this.image,
                      ge = X.parentNode,
                      Ae = document.createElement("div");
                    Ae.innerHTML = ko;
                    var Ke = Ae.querySelector(".".concat(be, "-container")),
                      _t = Ke.querySelector(".".concat(be, "-canvas")),
                      lt = Ke.querySelector(".".concat(be, "-drag-box")),
                      Ye = Ke.querySelector(".".concat(be, "-crop-box")),
                      et = Ye.querySelector(".".concat(be, "-face"));
                    (this.container = ge),
                      (this.cropper = Ke),
                      (this.canvas = _t),
                      (this.dragBox = lt),
                      (this.cropBox = Ye),
                      (this.viewBox = Ke.querySelector(
                        ".".concat(be, "-view-box")
                      )),
                      (this.face = et),
                      _t.appendChild(Me),
                      we(X, ht),
                      ge.insertBefore(Ke, X.nextSibling),
                      Ze(Me, Vt),
                      this.initPreview(),
                      this.bind(),
                      (G.initialAspectRatio =
                        Math.max(0, G.initialAspectRatio) || NaN),
                      (G.aspectRatio = Math.max(0, G.aspectRatio) || NaN),
                      (G.viewMode =
                        Math.max(0, Math.min(3, Math.round(G.viewMode))) || 0),
                      we(Ye, ht),
                      G.guides ||
                        we(
                          Ye.getElementsByClassName("".concat(be, "-dashed")),
                          ht
                        ),
                      G.center ||
                        we(
                          Ye.getElementsByClassName("".concat(be, "-center")),
                          ht
                        ),
                      G.background && we(Ke, "".concat(be, "-bg")),
                      G.highlight || we(et, hi),
                      G.cropBoxMovable && (we(et, Zt), ti(et, Re, Y)),
                      G.cropBoxResizable ||
                        (we(
                          Ye.getElementsByClassName("".concat(be, "-line")),
                          ht
                        ),
                        we(
                          Ye.getElementsByClassName("".concat(be, "-point")),
                          ht
                        )),
                      this.render(),
                      (this.ready = !0),
                      this.setDragMode(G.dragMode),
                      G.autoCrop && this.crop(),
                      this.setData(G.data),
                      Fi(G.ready) && Wi(X, pr, G.ready, { once: !0 }),
                      ci(X, pr);
                  }
                },
              },
              {
                key: "unbuild",
                value: function () {
                  if (this.ready) {
                    (this.ready = !1), this.unbind(), this.resetPreview();
                    var X = this.cropper.parentNode;
                    X && X.removeChild(this.cropper), Ze(this.element, ht);
                  }
                },
              },
              {
                key: "uncreate",
                value: function () {
                  this.ready
                    ? (this.unbuild(), (this.ready = !1), (this.cropped = !1))
                    : this.sizing
                    ? ((this.sizingImage.onload = null),
                      (this.sizing = !1),
                      (this.sized = !1))
                    : this.reloading
                    ? ((this.xhr.onabort = null), this.xhr.abort())
                    : this.image && this.stop();
                },
              },
            ],
            [
              {
                key: "noConflict",
                value: function () {
                  return (window.Cropper = Hn), ue;
                },
              },
              {
                key: "setDefaults",
                value: function (X) {
                  $(Kn, yi(X) && X);
                },
              },
            ]
          ),
          ue
        );
      })();
    return $(Es.prototype, fr, Lr, cr, Ho, on, cs), Es;
  });
});
var da = Rh((Qv, Gv) => {
  (function (i, e) {
    typeof Qv == "object" && typeof Gv < "u"
      ? (Gv.exports = e())
      : typeof define == "function" && define.amd
      ? define(e)
      : ((i = typeof globalThis < "u" ? globalThis : i || self),
        (i.maplibregl = e()));
  })(Qv, function () {
    "use strict";
    var i = {},
      e = {};
    function t(o, n, u) {
      if (((e[o] = u), o === "index")) {
        var h =
            "var sharedModule = {}; (" +
            e.shared +
            ")(sharedModule); (" +
            e.worker +
            ")(sharedModule);",
          m = {};
        return (
          e.shared(m),
          e.index(i, m),
          typeof window < "u" &&
            i.setWorkerUrl(
              window.URL.createObjectURL(
                new Blob([h], { type: "text/javascript" })
              )
            ),
          i
        );
      }
    }
    t("shared", ["exports"], function (o) {
      "use strict";
      function n(l, s, c, p) {
        return new (c || (c = Promise))(function (y, w) {
          function k(P) {
            try {
              A(p.next(P));
            } catch (N) {
              w(N);
            }
          }
          function C(P) {
            try {
              A(p.throw(P));
            } catch (N) {
              w(N);
            }
          }
          function A(P) {
            var N;
            P.done
              ? y(P.value)
              : ((N = P.value),
                N instanceof c
                  ? N
                  : new c(function (O) {
                      O(N);
                    })).then(k, C);
          }
          A((p = p.apply(l, s || [])).next());
        });
      }
      function u(l) {
        return l &&
          l.__esModule &&
          Object.prototype.hasOwnProperty.call(l, "default")
          ? l.default
          : l;
      }
      typeof SuppressedError == "function" && SuppressedError;
      var h = m;
      function m(l, s) {
        (this.x = l), (this.y = s);
      }
      (m.prototype = {
        clone: function () {
          return new m(this.x, this.y);
        },
        add: function (l) {
          return this.clone()._add(l);
        },
        sub: function (l) {
          return this.clone()._sub(l);
        },
        multByPoint: function (l) {
          return this.clone()._multByPoint(l);
        },
        divByPoint: function (l) {
          return this.clone()._divByPoint(l);
        },
        mult: function (l) {
          return this.clone()._mult(l);
        },
        div: function (l) {
          return this.clone()._div(l);
        },
        rotate: function (l) {
          return this.clone()._rotate(l);
        },
        rotateAround: function (l, s) {
          return this.clone()._rotateAround(l, s);
        },
        matMult: function (l) {
          return this.clone()._matMult(l);
        },
        unit: function () {
          return this.clone()._unit();
        },
        perp: function () {
          return this.clone()._perp();
        },
        round: function () {
          return this.clone()._round();
        },
        mag: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y);
        },
        equals: function (l) {
          return this.x === l.x && this.y === l.y;
        },
        dist: function (l) {
          return Math.sqrt(this.distSqr(l));
        },
        distSqr: function (l) {
          var s = l.x - this.x,
            c = l.y - this.y;
          return s * s + c * c;
        },
        angle: function () {
          return Math.atan2(this.y, this.x);
        },
        angleTo: function (l) {
          return Math.atan2(this.y - l.y, this.x - l.x);
        },
        angleWith: function (l) {
          return this.angleWithSep(l.x, l.y);
        },
        angleWithSep: function (l, s) {
          return Math.atan2(this.x * s - this.y * l, this.x * l + this.y * s);
        },
        _matMult: function (l) {
          var s = l[2] * this.x + l[3] * this.y;
          return (this.x = l[0] * this.x + l[1] * this.y), (this.y = s), this;
        },
        _add: function (l) {
          return (this.x += l.x), (this.y += l.y), this;
        },
        _sub: function (l) {
          return (this.x -= l.x), (this.y -= l.y), this;
        },
        _mult: function (l) {
          return (this.x *= l), (this.y *= l), this;
        },
        _div: function (l) {
          return (this.x /= l), (this.y /= l), this;
        },
        _multByPoint: function (l) {
          return (this.x *= l.x), (this.y *= l.y), this;
        },
        _divByPoint: function (l) {
          return (this.x /= l.x), (this.y /= l.y), this;
        },
        _unit: function () {
          return this._div(this.mag()), this;
        },
        _perp: function () {
          var l = this.y;
          return (this.y = this.x), (this.x = -l), this;
        },
        _rotate: function (l) {
          var s = Math.cos(l),
            c = Math.sin(l),
            p = c * this.x + s * this.y;
          return (this.x = s * this.x - c * this.y), (this.y = p), this;
        },
        _rotateAround: function (l, s) {
          var c = Math.cos(l),
            p = Math.sin(l),
            y = s.y + p * (this.x - s.x) + c * (this.y - s.y);
          return (
            (this.x = s.x + c * (this.x - s.x) - p * (this.y - s.y)),
            (this.y = y),
            this
          );
        },
        _round: function () {
          return (
            (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
          );
        },
      }),
        (m.convert = function (l) {
          return l instanceof m ? l : Array.isArray(l) ? new m(l[0], l[1]) : l;
        });
      var b = u(h),
        _ = S;
      function S(l, s, c, p) {
        (this.cx = 3 * l),
          (this.bx = 3 * (c - l) - this.cx),
          (this.ax = 1 - this.cx - this.bx),
          (this.cy = 3 * s),
          (this.by = 3 * (p - s) - this.cy),
          (this.ay = 1 - this.cy - this.by),
          (this.p1x = l),
          (this.p1y = s),
          (this.p2x = c),
          (this.p2y = p);
      }
      S.prototype = {
        sampleCurveX: function (l) {
          return ((this.ax * l + this.bx) * l + this.cx) * l;
        },
        sampleCurveY: function (l) {
          return ((this.ay * l + this.by) * l + this.cy) * l;
        },
        sampleCurveDerivativeX: function (l) {
          return (3 * this.ax * l + 2 * this.bx) * l + this.cx;
        },
        solveCurveX: function (l, s) {
          if ((s === void 0 && (s = 1e-6), l < 0)) return 0;
          if (l > 1) return 1;
          for (var c = l, p = 0; p < 8; p++) {
            var y = this.sampleCurveX(c) - l;
            if (Math.abs(y) < s) return c;
            var w = this.sampleCurveDerivativeX(c);
            if (Math.abs(w) < 1e-6) break;
            c -= y / w;
          }
          var k = 0,
            C = 1;
          for (
            c = l, p = 0;
            p < 20 && ((y = this.sampleCurveX(c)), !(Math.abs(y - l) < s));
            p++
          )
            l > y ? (k = c) : (C = c), (c = 0.5 * (C - k) + k);
          return c;
        },
        solve: function (l, s) {
          return this.sampleCurveY(this.solveCurveX(l, s));
        },
      };
      var T = u(_);
      let D, F;
      function q() {
        return (
          D == null &&
            (D =
              typeof OffscreenCanvas < "u" &&
              new OffscreenCanvas(1, 1).getContext("2d") &&
              typeof createImageBitmap == "function"),
          D
        );
      }
      function Q() {
        if (F == null && ((F = !1), q())) {
          let s = new OffscreenCanvas(5, 5).getContext("2d", {
            willReadFrequently: !0,
          });
          if (s) {
            for (let p = 0; p < 5 * 5; p++) {
              let y = 4 * p;
              (s.fillStyle = `rgb(${y},${y + 1},${y + 2})`),
                s.fillRect(p % 5, Math.floor(p / 5), 1, 1);
            }
            let c = s.getImageData(0, 0, 5, 5).data;
            for (let p = 0; p < 5 * 5 * 4; p++)
              if (p % 4 != 3 && c[p] !== p) {
                F = !0;
                break;
              }
          }
        }
        return F || !1;
      }
      function te(l, s, c, p) {
        let y = new T(l, s, c, p);
        return function (w) {
          return y.solve(w);
        };
      }
      let ce = te(0.25, 0.1, 0.25, 1);
      function be(l, s, c) {
        return Math.min(c, Math.max(s, l));
      }
      function Y(l, s, c) {
        let p = c - s,
          y = ((((l - s) % p) + p) % p) + s;
        return y === s ? c : y;
      }
      function Ie(l, ...s) {
        for (let c of s) for (let p in c) l[p] = c[p];
        return l;
      }
      let Te = 1;
      function fe(l, s, c) {
        let p = {};
        for (let y in l) p[y] = s.call(c || this, l[y], y, l);
        return p;
      }
      function Le(l, s, c) {
        let p = {};
        for (let y in l) s.call(c || this, l[y], y, l) && (p[y] = l[y]);
        return p;
      }
      function De(l) {
        return Array.isArray(l)
          ? l.map(De)
          : typeof l == "object" && l
          ? fe(l, De)
          : l;
      }
      let st = {};
      function qe(l) {
        st[l] || (typeof console < "u" && console.warn(l), (st[l] = !0));
      }
      function zt(l, s, c) {
        return (c.y - l.y) * (s.x - l.x) > (s.y - l.y) * (c.x - l.x);
      }
      function Rt(l) {
        let s = 0;
        for (let c, p, y = 0, w = l.length, k = w - 1; y < w; k = y++)
          (c = l[y]), (p = l[k]), (s += (p.x - c.x) * (c.y + p.y));
        return s;
      }
      function Gt(l) {
        return (
          typeof WorkerGlobalScope < "u" &&
          l !== void 0 &&
          l instanceof WorkerGlobalScope
        );
      }
      let qt = null;
      function ct(l) {
        return typeof ImageBitmap < "u" && l instanceof ImageBitmap;
      }
      let vt =
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
      function ht(l, s, c, p, y) {
        return n(this, void 0, void 0, function* () {
          if (typeof VideoFrame > "u")
            throw new Error("VideoFrame not supported");
          let w = new VideoFrame(l, { timestamp: 0 });
          try {
            let k = w?.format;
            if (!k || (!k.startsWith("BGR") && !k.startsWith("RGB")))
              throw new Error(`Unrecognized format ${k}`);
            let C = k.startsWith("BGR"),
              A = new Uint8ClampedArray(p * y * 4);
            if (
              (yield w.copyTo(
                A,
                (function (P, N, O, j, W) {
                  let K = 4 * Math.max(-N, 0),
                    ie = (Math.max(0, O) - O) * j * 4 + K,
                    ae = 4 * j,
                    pe = Math.max(0, N),
                    Pe = Math.max(0, O);
                  return {
                    rect: {
                      x: pe,
                      y: Pe,
                      width: Math.min(P.width, N + j) - pe,
                      height: Math.min(P.height, O + W) - Pe,
                    },
                    layout: [{ offset: ie, stride: ae }],
                  };
                })(l, s, c, p, y)
              ),
              C)
            )
              for (let P = 0; P < A.length; P += 4) {
                let N = A[P];
                (A[P] = A[P + 2]), (A[P + 2] = N);
              }
            return A;
          } finally {
            w.close();
          }
        });
      }
      let Vt,
        hi,
        Pi = "AbortError";
      function Zt() {
        return new Error(Pi);
      }
      let Re = {
        MAX_PARALLEL_IMAGE_REQUESTS: 16,
        MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME: 8,
        MAX_TILE_CACHE_ZOOM_LEVELS: 5,
        REGISTERED_PROTOCOLS: {},
        WORKER_URL: "",
      };
      function Ce(l) {
        return Re.REGISTERED_PROTOCOLS[l.substring(0, l.indexOf("://"))];
      }
      let Bt = "global-dispatcher";
      class ei extends Error {
        constructor(s, c, p, y) {
          super(`AJAXError: ${c} (${s}): ${p}`),
            (this.status = s),
            (this.statusText = c),
            (this.url = p),
            (this.body = y);
        }
      }
      let Li = () =>
          Gt(self)
            ? self.worker && self.worker.referrer
            : (window.location.protocol === "blob:" ? window.parent : window)
                .location.href,
        it = function (l, s) {
          if (/:\/\//.test(l.url) && !/^https?:|^file:/.test(l.url)) {
            let p = Ce(l.url);
            if (p) return p(l, s);
            if (Gt(self) && self.worker && self.worker.actor)
              return self.worker.actor.sendAsync(
                { type: "getResource", data: l, targetMapId: Bt },
                s
              );
          }
          if (
            !(
              /^file:/.test((c = l.url)) ||
              (/^file:/.test(Li()) && !/^\w+:/.test(c))
            )
          ) {
            if (
              fetch &&
              Request &&
              AbortController &&
              Object.prototype.hasOwnProperty.call(Request.prototype, "signal")
            )
              return (function (p, y) {
                return n(this, void 0, void 0, function* () {
                  let w = new Request(p.url, {
                    method: p.method || "GET",
                    body: p.body,
                    credentials: p.credentials,
                    headers: p.headers,
                    cache: p.cache,
                    referrer: Li(),
                    signal: y.signal,
                  });
                  p.type === "json" &&
                    w.headers.set("Accept", "application/json");
                  let k = yield fetch(w);
                  if (!k.ok) {
                    let P = yield k.blob();
                    throw new ei(k.status, k.statusText, p.url, P);
                  }
                  let C;
                  C =
                    p.type === "arrayBuffer" || p.type === "image"
                      ? k.arrayBuffer()
                      : p.type === "json"
                      ? k.json()
                      : k.text();
                  let A = yield C;
                  if (y.signal.aborted) throw Zt();
                  return {
                    data: A,
                    cacheControl: k.headers.get("Cache-Control"),
                    expires: k.headers.get("Expires"),
                  };
                });
              })(l, s);
            if (Gt(self) && self.worker && self.worker.actor)
              return self.worker.actor.sendAsync(
                {
                  type: "getResource",
                  data: l,
                  mustQueue: !0,
                  targetMapId: Bt,
                },
                s
              );
          }
          var c;
          return (function (p, y) {
            return new Promise((w, k) => {
              let C = new XMLHttpRequest();
              C.open(p.method || "GET", p.url, !0),
                (p.type !== "arrayBuffer" && p.type !== "image") ||
                  (C.responseType = "arraybuffer");
              for (let A in p.headers) C.setRequestHeader(A, p.headers[A]);
              p.type === "json" &&
                ((C.responseType = "text"),
                C.setRequestHeader("Accept", "application/json")),
                (C.withCredentials = p.credentials === "include"),
                (C.onerror = () => {
                  k(new Error(C.statusText));
                }),
                (C.onload = () => {
                  if (!y.signal.aborted)
                    if (
                      ((C.status >= 200 && C.status < 300) || C.status === 0) &&
                      C.response !== null
                    ) {
                      let A = C.response;
                      if (p.type === "json")
                        try {
                          A = JSON.parse(C.response);
                        } catch (P) {
                          return void k(P);
                        }
                      w({
                        data: A,
                        cacheControl: C.getResponseHeader("Cache-Control"),
                        expires: C.getResponseHeader("Expires"),
                      });
                    } else {
                      let A = new Blob([C.response], {
                        type: C.getResponseHeader("Content-Type"),
                      });
                      k(new ei(C.status, C.statusText, p.url, A));
                    }
                }),
                y.signal.addEventListener("abort", () => {
                  C.abort(), k(Zt());
                }),
                C.send(p.body);
            });
          })(l, s);
        };
      function ii(l) {
        if (
          !l ||
          l.indexOf("://") <= 0 ||
          l.indexOf("data:image/") === 0 ||
          l.indexOf("blob:") === 0
        )
          return !0;
        let s = new URL(l),
          c = window.location;
        return s.protocol === c.protocol && s.host === c.host;
      }
      function wi(l, s, c) {
        (c[l] && c[l].indexOf(s) !== -1) || ((c[l] = c[l] || []), c[l].push(s));
      }
      function sr(l, s, c) {
        if (c && c[l]) {
          let p = c[l].indexOf(s);
          p !== -1 && c[l].splice(p, 1);
        }
      }
      class Wr {
        constructor(s, c = {}) {
          Ie(this, c), (this.type = s);
        }
      }
      class pt extends Wr {
        constructor(s, c = {}) {
          super("error", Ie({ error: s }, c));
        }
      }
      class Ai {
        on(s, c) {
          return (
            (this._listeners = this._listeners || {}),
            wi(s, c, this._listeners),
            this
          );
        }
        off(s, c) {
          return (
            sr(s, c, this._listeners), sr(s, c, this._oneTimeListeners), this
          );
        }
        once(s, c) {
          return c
            ? ((this._oneTimeListeners = this._oneTimeListeners || {}),
              wi(s, c, this._oneTimeListeners),
              this)
            : new Promise((p) => this.once(s, p));
        }
        fire(s, c) {
          typeof s == "string" && (s = new Wr(s, c || {}));
          let p = s.type;
          if (this.listens(p)) {
            s.target = this;
            let y =
              this._listeners && this._listeners[p]
                ? this._listeners[p].slice()
                : [];
            for (let C of y) C.call(this, s);
            let w =
              this._oneTimeListeners && this._oneTimeListeners[p]
                ? this._oneTimeListeners[p].slice()
                : [];
            for (let C of w) sr(p, C, this._oneTimeListeners), C.call(this, s);
            let k = this._eventedParent;
            k &&
              (Ie(
                s,
                typeof this._eventedParentData == "function"
                  ? this._eventedParentData()
                  : this._eventedParentData
              ),
              k.fire(s));
          } else s instanceof pt && console.error(s.error);
          return this;
        }
        listens(s) {
          return (
            (this._listeners &&
              this._listeners[s] &&
              this._listeners[s].length > 0) ||
            (this._oneTimeListeners &&
              this._oneTimeListeners[s] &&
              this._oneTimeListeners[s].length > 0) ||
            (this._eventedParent && this._eventedParent.listens(s))
          );
        }
        setEventedParent(s, c) {
          return (this._eventedParent = s), (this._eventedParentData = c), this;
        }
      }
      var je = {
        $version: 8,
        $root: {
          version: { required: !0, type: "enum", values: [8] },
          name: { type: "string" },
          metadata: { type: "*" },
          center: { type: "array", value: "number" },
          zoom: { type: "number" },
          bearing: {
            type: "number",
            default: 0,
            period: 360,
            units: "degrees",
          },
          pitch: { type: "number", default: 0, units: "degrees" },
          light: { type: "light" },
          sky: { type: "sky" },
          terrain: { type: "terrain" },
          sources: { required: !0, type: "sources" },
          sprite: { type: "sprite" },
          glyphs: { type: "string" },
          transition: { type: "transition" },
          layers: { required: !0, type: "array", value: "layer" },
        },
        sources: { "*": { type: "source" } },
        source: [
          "source_vector",
          "source_raster",
          "source_raster_dem",
          "source_geojson",
          "source_video",
          "source_image",
        ],
        source_vector: {
          type: { required: !0, type: "enum", values: { vector: {} } },
          url: { type: "string" },
          tiles: { type: "array", value: "string" },
          bounds: {
            type: "array",
            value: "number",
            length: 4,
            default: [-180, -85.051129, 180, 85.051129],
          },
          scheme: {
            type: "enum",
            values: { xyz: {}, tms: {} },
            default: "xyz",
          },
          minzoom: { type: "number", default: 0 },
          maxzoom: { type: "number", default: 22 },
          attribution: { type: "string" },
          promoteId: { type: "promoteId" },
          volatile: { type: "boolean", default: !1 },
          "*": { type: "*" },
        },
        source_raster: {
          type: { required: !0, type: "enum", values: { raster: {} } },
          url: { type: "string" },
          tiles: { type: "array", value: "string" },
          bounds: {
            type: "array",
            value: "number",
            length: 4,
            default: [-180, -85.051129, 180, 85.051129],
          },
          minzoom: { type: "number", default: 0 },
          maxzoom: { type: "number", default: 22 },
          tileSize: { type: "number", default: 512, units: "pixels" },
          scheme: {
            type: "enum",
            values: { xyz: {}, tms: {} },
            default: "xyz",
          },
          attribution: { type: "string" },
          volatile: { type: "boolean", default: !1 },
          "*": { type: "*" },
        },
        source_raster_dem: {
          type: { required: !0, type: "enum", values: { "raster-dem": {} } },
          url: { type: "string" },
          tiles: { type: "array", value: "string" },
          bounds: {
            type: "array",
            value: "number",
            length: 4,
            default: [-180, -85.051129, 180, 85.051129],
          },
          minzoom: { type: "number", default: 0 },
          maxzoom: { type: "number", default: 22 },
          tileSize: { type: "number", default: 512, units: "pixels" },
          attribution: { type: "string" },
          encoding: {
            type: "enum",
            values: { terrarium: {}, mapbox: {}, custom: {} },
            default: "mapbox",
          },
          redFactor: { type: "number", default: 1 },
          blueFactor: { type: "number", default: 1 },
          greenFactor: { type: "number", default: 1 },
          baseShift: { type: "number", default: 0 },
          volatile: { type: "boolean", default: !1 },
          "*": { type: "*" },
        },
        source_geojson: {
          type: { required: !0, type: "enum", values: { geojson: {} } },
          data: { required: !0, type: "*" },
          maxzoom: { type: "number", default: 18 },
          attribution: { type: "string" },
          buffer: { type: "number", default: 128, maximum: 512, minimum: 0 },
          filter: { type: "*" },
          tolerance: { type: "number", default: 0.375 },
          cluster: { type: "boolean", default: !1 },
          clusterRadius: { type: "number", default: 50, minimum: 0 },
          clusterMaxZoom: { type: "number" },
          clusterMinPoints: { type: "number" },
          clusterProperties: { type: "*" },
          lineMetrics: { type: "boolean", default: !1 },
          generateId: { type: "boolean", default: !1 },
          promoteId: { type: "promoteId" },
        },
        source_video: {
          type: { required: !0, type: "enum", values: { video: {} } },
          urls: { required: !0, type: "array", value: "string" },
          coordinates: {
            required: !0,
            type: "array",
            length: 4,
            value: { type: "array", length: 2, value: "number" },
          },
        },
        source_image: {
          type: { required: !0, type: "enum", values: { image: {} } },
          url: { required: !0, type: "string" },
          coordinates: {
            required: !0,
            type: "array",
            length: 4,
            value: { type: "array", length: 2, value: "number" },
          },
        },
        layer: {
          id: { type: "string", required: !0 },
          type: {
            type: "enum",
            values: {
              fill: {},
              line: {},
              symbol: {},
              circle: {},
              heatmap: {},
              "fill-extrusion": {},
              raster: {},
              hillshade: {},
              background: {},
            },
            required: !0,
          },
          metadata: { type: "*" },
          source: { type: "string" },
          "source-layer": { type: "string" },
          minzoom: { type: "number", minimum: 0, maximum: 24 },
          maxzoom: { type: "number", minimum: 0, maximum: 24 },
          filter: { type: "filter" },
          layout: { type: "layout" },
          paint: { type: "paint" },
        },
        layout: [
          "layout_fill",
          "layout_line",
          "layout_circle",
          "layout_heatmap",
          "layout_fill-extrusion",
          "layout_symbol",
          "layout_raster",
          "layout_hillshade",
          "layout_background",
        ],
        layout_background: {
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_fill: {
          "fill-sort-key": {
            type: "number",
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_circle: {
          "circle-sort-key": {
            type: "number",
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_heatmap: {
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        "layout_fill-extrusion": {
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_line: {
          "line-cap": {
            type: "enum",
            values: { butt: {}, round: {}, square: {} },
            default: "butt",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "line-join": {
            type: "enum",
            values: { bevel: {}, round: {}, miter: {} },
            default: "miter",
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "line-miter-limit": {
            type: "number",
            default: 2,
            requires: [{ "line-join": "miter" }],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "line-round-limit": {
            type: "number",
            default: 1.05,
            requires: [{ "line-join": "round" }],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "line-sort-key": {
            type: "number",
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_symbol: {
          "symbol-placement": {
            type: "enum",
            values: { point: {}, line: {}, "line-center": {} },
            default: "point",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "symbol-spacing": {
            type: "number",
            default: 250,
            minimum: 1,
            units: "pixels",
            requires: [{ "symbol-placement": "line" }],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "symbol-avoid-edges": {
            type: "boolean",
            default: !1,
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "symbol-sort-key": {
            type: "number",
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "symbol-z-order": {
            type: "enum",
            values: { auto: {}, "viewport-y": {}, source: {} },
            default: "auto",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-allow-overlap": {
            type: "boolean",
            default: !1,
            requires: ["icon-image", { "!": "icon-overlap" }],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-overlap": {
            type: "enum",
            values: { never: {}, always: {}, cooperative: {} },
            requires: ["icon-image"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-ignore-placement": {
            type: "boolean",
            default: !1,
            requires: ["icon-image"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-optional": {
            type: "boolean",
            default: !1,
            requires: ["icon-image", "text-field"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-rotation-alignment": {
            type: "enum",
            values: { map: {}, viewport: {}, auto: {} },
            default: "auto",
            requires: ["icon-image"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-size": {
            type: "number",
            default: 1,
            minimum: 0,
            units: "factor of the original icon size",
            requires: ["icon-image"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "icon-text-fit": {
            type: "enum",
            values: { none: {}, width: {}, height: {}, both: {} },
            default: "none",
            requires: ["icon-image", "text-field"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-text-fit-padding": {
            type: "array",
            value: "number",
            length: 4,
            default: [0, 0, 0, 0],
            units: "pixels",
            requires: [
              "icon-image",
              "text-field",
              { "icon-text-fit": ["both", "width", "height"] },
            ],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-image": {
            type: "resolvedImage",
            tokens: !0,
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "icon-rotate": {
            type: "number",
            default: 0,
            period: 360,
            units: "degrees",
            requires: ["icon-image"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "icon-padding": {
            type: "padding",
            default: [2],
            units: "pixels",
            requires: ["icon-image"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "icon-keep-upright": {
            type: "boolean",
            default: !1,
            requires: [
              "icon-image",
              { "icon-rotation-alignment": "map" },
              { "symbol-placement": ["line", "line-center"] },
            ],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-offset": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            requires: ["icon-image"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "icon-anchor": {
            type: "enum",
            values: {
              center: {},
              left: {},
              right: {},
              top: {},
              bottom: {},
              "top-left": {},
              "top-right": {},
              "bottom-left": {},
              "bottom-right": {},
            },
            default: "center",
            requires: ["icon-image"],
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "icon-pitch-alignment": {
            type: "enum",
            values: { map: {}, viewport: {}, auto: {} },
            default: "auto",
            requires: ["icon-image"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-pitch-alignment": {
            type: "enum",
            values: { map: {}, viewport: {}, auto: {} },
            default: "auto",
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-rotation-alignment": {
            type: "enum",
            values: { map: {}, viewport: {}, "viewport-glyph": {}, auto: {} },
            default: "auto",
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-field": {
            type: "formatted",
            default: "",
            tokens: !0,
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-font": {
            type: "array",
            value: "string",
            default: ["Open Sans Regular", "Arial Unicode MS Regular"],
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-size": {
            type: "number",
            default: 16,
            minimum: 0,
            units: "pixels",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-max-width": {
            type: "number",
            default: 10,
            minimum: 0,
            units: "ems",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-line-height": {
            type: "number",
            default: 1.2,
            units: "ems",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-letter-spacing": {
            type: "number",
            default: 0,
            units: "ems",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-justify": {
            type: "enum",
            values: { auto: {}, left: {}, center: {}, right: {} },
            default: "center",
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-radial-offset": {
            type: "number",
            units: "ems",
            default: 0,
            requires: ["text-field"],
            "property-type": "data-driven",
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
          },
          "text-variable-anchor": {
            type: "array",
            value: "enum",
            values: {
              center: {},
              left: {},
              right: {},
              top: {},
              bottom: {},
              "top-left": {},
              "top-right": {},
              "bottom-left": {},
              "bottom-right": {},
            },
            requires: ["text-field", { "symbol-placement": ["point"] }],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-variable-anchor-offset": {
            type: "variableAnchorOffsetCollection",
            requires: ["text-field", { "symbol-placement": ["point"] }],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-anchor": {
            type: "enum",
            values: {
              center: {},
              left: {},
              right: {},
              top: {},
              bottom: {},
              "top-left": {},
              "top-right": {},
              "bottom-left": {},
              "bottom-right": {},
            },
            default: "center",
            requires: ["text-field", { "!": "text-variable-anchor" }],
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-max-angle": {
            type: "number",
            default: 45,
            units: "degrees",
            requires: [
              "text-field",
              { "symbol-placement": ["line", "line-center"] },
            ],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-writing-mode": {
            type: "array",
            value: "enum",
            values: { horizontal: {}, vertical: {} },
            requires: ["text-field", { "symbol-placement": ["point"] }],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-rotate": {
            type: "number",
            default: 0,
            period: 360,
            units: "degrees",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-padding": {
            type: "number",
            default: 2,
            minimum: 0,
            units: "pixels",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-keep-upright": {
            type: "boolean",
            default: !0,
            requires: [
              "text-field",
              { "text-rotation-alignment": "map" },
              { "symbol-placement": ["line", "line-center"] },
            ],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-transform": {
            type: "enum",
            values: { none: {}, uppercase: {}, lowercase: {} },
            default: "none",
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-offset": {
            type: "array",
            value: "number",
            units: "ems",
            length: 2,
            default: [0, 0],
            requires: ["text-field", { "!": "text-radial-offset" }],
            expression: { interpolated: !0, parameters: ["zoom", "feature"] },
            "property-type": "data-driven",
          },
          "text-allow-overlap": {
            type: "boolean",
            default: !1,
            requires: ["text-field", { "!": "text-overlap" }],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-overlap": {
            type: "enum",
            values: { never: {}, always: {}, cooperative: {} },
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-ignore-placement": {
            type: "boolean",
            default: !1,
            requires: ["text-field"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-optional": {
            type: "boolean",
            default: !1,
            requires: ["text-field", "icon-image"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_raster: {
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        layout_hillshade: {
          visibility: {
            type: "enum",
            values: { visible: {}, none: {} },
            default: "visible",
            "property-type": "constant",
          },
        },
        filter: { type: "array", value: "*" },
        filter_operator: {
          type: "enum",
          values: {
            "==": {},
            "!=": {},
            ">": {},
            ">=": {},
            "<": {},
            "<=": {},
            in: {},
            "!in": {},
            all: {},
            any: {},
            none: {},
            has: {},
            "!has": {},
            within: {},
          },
        },
        geometry_type: {
          type: "enum",
          values: { Point: {}, LineString: {}, Polygon: {} },
        },
        function: {
          expression: { type: "expression" },
          stops: { type: "array", value: "function_stop" },
          base: { type: "number", default: 1, minimum: 0 },
          property: { type: "string", default: "$zoom" },
          type: {
            type: "enum",
            values: {
              identity: {},
              exponential: {},
              interval: {},
              categorical: {},
            },
            default: "exponential",
          },
          colorSpace: {
            type: "enum",
            values: { rgb: {}, lab: {}, hcl: {} },
            default: "rgb",
          },
          default: { type: "*", required: !1 },
        },
        function_stop: {
          type: "array",
          minimum: 0,
          maximum: 24,
          value: ["number", "color"],
          length: 2,
        },
        expression: { type: "array", value: "*", minimum: 1 },
        light: {
          anchor: {
            type: "enum",
            default: "viewport",
            values: { map: {}, viewport: {} },
            "property-type": "data-constant",
            transition: !1,
            expression: { interpolated: !1, parameters: ["zoom"] },
          },
          position: {
            type: "array",
            default: [1.15, 210, 30],
            length: 3,
            value: "number",
            "property-type": "data-constant",
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
          },
          color: {
            type: "color",
            "property-type": "data-constant",
            default: "#ffffff",
            expression: { interpolated: !0, parameters: ["zoom"] },
            transition: !0,
          },
          intensity: {
            type: "number",
            "property-type": "data-constant",
            default: 0.5,
            minimum: 0,
            maximum: 1,
            expression: { interpolated: !0, parameters: ["zoom"] },
            transition: !0,
          },
        },
        sky: {
          "sky-color": {
            type: "color",
            "property-type": "data-constant",
            default: "#88C6FC",
            expression: { interpolated: !0, parameters: ["zoom"] },
            transition: !0,
          },
          "fog-color": {
            type: "color",
            "property-type": "data-constant",
            default: "#ffffff",
            expression: { interpolated: !0, parameters: ["zoom"] },
            transition: !0,
          },
          "fog-blend": {
            type: "number",
            "property-type": "data-constant",
            default: 0.5,
            minimum: 0,
            maximum: 1,
            expression: { interpolated: !0, parameters: ["zoom"] },
            transition: !0,
          },
          "horizon-blend": {
            type: "number",
            "property-type": "data-constant",
            default: 0.8,
            minimum: 0,
            maximum: 1,
            expression: { interpolated: !0, parameters: ["zoom"] },
            transition: !0,
          },
        },
        terrain: {
          source: { type: "string", required: !0 },
          exaggeration: { type: "number", minimum: 0, default: 1 },
        },
        paint: [
          "paint_fill",
          "paint_line",
          "paint_circle",
          "paint_heatmap",
          "paint_fill-extrusion",
          "paint_symbol",
          "paint_raster",
          "paint_hillshade",
          "paint_background",
        ],
        paint_fill: {
          "fill-antialias": {
            type: "boolean",
            default: !0,
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "fill-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "fill-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            requires: [{ "!": "fill-pattern" }],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "fill-outline-color": {
            type: "color",
            transition: !0,
            requires: [{ "!": "fill-pattern" }, { "fill-antialias": !0 }],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "fill-translate": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            transition: !0,
            units: "pixels",
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "fill-translate-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            requires: ["fill-translate"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "fill-pattern": {
            type: "resolvedImage",
            transition: !0,
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "cross-faded-data-driven",
          },
        },
        "paint_fill-extrusion": {
          "fill-extrusion-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "fill-extrusion-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            requires: [{ "!": "fill-extrusion-pattern" }],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "fill-extrusion-translate": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            transition: !0,
            units: "pixels",
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "fill-extrusion-translate-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            requires: ["fill-extrusion-translate"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "fill-extrusion-pattern": {
            type: "resolvedImage",
            transition: !0,
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "cross-faded-data-driven",
          },
          "fill-extrusion-height": {
            type: "number",
            default: 0,
            minimum: 0,
            units: "meters",
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "fill-extrusion-base": {
            type: "number",
            default: 0,
            minimum: 0,
            units: "meters",
            transition: !0,
            requires: ["fill-extrusion-height"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "fill-extrusion-vertical-gradient": {
            type: "boolean",
            default: !0,
            transition: !1,
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
        },
        paint_line: {
          "line-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "line-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            requires: [{ "!": "line-pattern" }],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "line-translate": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            transition: !0,
            units: "pixels",
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "line-translate-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            requires: ["line-translate"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "line-width": {
            type: "number",
            default: 1,
            minimum: 0,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "line-gap-width": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "line-offset": {
            type: "number",
            default: 0,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "line-blur": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "line-dasharray": {
            type: "array",
            value: "number",
            minimum: 0,
            transition: !0,
            units: "line widths",
            requires: [{ "!": "line-pattern" }],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "cross-faded",
          },
          "line-pattern": {
            type: "resolvedImage",
            transition: !0,
            expression: { interpolated: !1, parameters: ["zoom", "feature"] },
            "property-type": "cross-faded-data-driven",
          },
          "line-gradient": {
            type: "color",
            transition: !1,
            requires: [
              { "!": "line-dasharray" },
              { "!": "line-pattern" },
              { source: "geojson", has: { lineMetrics: !0 } },
            ],
            expression: { interpolated: !0, parameters: ["line-progress"] },
            "property-type": "color-ramp",
          },
        },
        paint_circle: {
          "circle-radius": {
            type: "number",
            default: 5,
            minimum: 0,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "circle-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "circle-blur": {
            type: "number",
            default: 0,
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "circle-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "circle-translate": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            transition: !0,
            units: "pixels",
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "circle-translate-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            requires: ["circle-translate"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "circle-pitch-scale": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "circle-pitch-alignment": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "viewport",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "circle-stroke-width": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "circle-stroke-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "circle-stroke-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
        },
        paint_heatmap: {
          "heatmap-radius": {
            type: "number",
            default: 30,
            minimum: 1,
            transition: !0,
            units: "pixels",
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "heatmap-weight": {
            type: "number",
            default: 1,
            minimum: 0,
            transition: !1,
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "heatmap-intensity": {
            type: "number",
            default: 1,
            minimum: 0,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "heatmap-color": {
            type: "color",
            default: [
              "interpolate",
              ["linear"],
              ["heatmap-density"],
              0,
              "rgba(0, 0, 255, 0)",
              0.1,
              "royalblue",
              0.3,
              "cyan",
              0.5,
              "lime",
              0.7,
              "yellow",
              1,
              "red",
            ],
            transition: !1,
            expression: { interpolated: !0, parameters: ["heatmap-density"] },
            "property-type": "color-ramp",
          },
          "heatmap-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
        },
        paint_symbol: {
          "icon-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            requires: ["icon-image"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "icon-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            requires: ["icon-image"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "icon-halo-color": {
            type: "color",
            default: "rgba(0, 0, 0, 0)",
            transition: !0,
            requires: ["icon-image"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "icon-halo-width": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            requires: ["icon-image"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "icon-halo-blur": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            requires: ["icon-image"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "icon-translate": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            transition: !0,
            units: "pixels",
            requires: ["icon-image"],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "icon-translate-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            requires: ["icon-image", "icon-translate"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            requires: ["text-field"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "text-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            overridable: !0,
            requires: ["text-field"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "text-halo-color": {
            type: "color",
            default: "rgba(0, 0, 0, 0)",
            transition: !0,
            requires: ["text-field"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "text-halo-width": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            requires: ["text-field"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "text-halo-blur": {
            type: "number",
            default: 0,
            minimum: 0,
            transition: !0,
            units: "pixels",
            requires: ["text-field"],
            expression: {
              interpolated: !0,
              parameters: ["zoom", "feature", "feature-state"],
            },
            "property-type": "data-driven",
          },
          "text-translate": {
            type: "array",
            value: "number",
            length: 2,
            default: [0, 0],
            transition: !0,
            units: "pixels",
            requires: ["text-field"],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "text-translate-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "map",
            requires: ["text-field", "text-translate"],
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
        },
        paint_raster: {
          "raster-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-hue-rotate": {
            type: "number",
            default: 0,
            period: 360,
            transition: !0,
            units: "degrees",
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-brightness-min": {
            type: "number",
            default: 0,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-brightness-max": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-saturation": {
            type: "number",
            default: 0,
            minimum: -1,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-contrast": {
            type: "number",
            default: 0,
            minimum: -1,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-resampling": {
            type: "enum",
            values: { linear: {}, nearest: {} },
            default: "linear",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "raster-fade-duration": {
            type: "number",
            default: 300,
            minimum: 0,
            transition: !1,
            units: "milliseconds",
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
        },
        paint_hillshade: {
          "hillshade-illumination-direction": {
            type: "number",
            default: 335,
            minimum: 0,
            maximum: 359,
            transition: !1,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "hillshade-illumination-anchor": {
            type: "enum",
            values: { map: {}, viewport: {} },
            default: "viewport",
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "hillshade-exaggeration": {
            type: "number",
            default: 0.5,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "hillshade-shadow-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "hillshade-highlight-color": {
            type: "color",
            default: "#FFFFFF",
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "hillshade-accent-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
        },
        paint_background: {
          "background-color": {
            type: "color",
            default: "#000000",
            transition: !0,
            requires: [{ "!": "background-pattern" }],
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
          "background-pattern": {
            type: "resolvedImage",
            transition: !0,
            expression: { interpolated: !1, parameters: ["zoom"] },
            "property-type": "cross-faded",
          },
          "background-opacity": {
            type: "number",
            default: 1,
            minimum: 0,
            maximum: 1,
            transition: !0,
            expression: { interpolated: !0, parameters: ["zoom"] },
            "property-type": "data-constant",
          },
        },
        transition: {
          duration: {
            type: "number",
            default: 300,
            minimum: 0,
            units: "milliseconds",
          },
          delay: {
            type: "number",
            default: 0,
            minimum: 0,
            units: "milliseconds",
          },
        },
        "property-type": {
          "data-driven": { type: "property-type" },
          "cross-faded": { type: "property-type" },
          "cross-faded-data-driven": { type: "property-type" },
          "color-ramp": { type: "property-type" },
          "data-constant": { type: "property-type" },
          constant: { type: "property-type" },
        },
        promoteId: { "*": { type: "string" } },
      };
      let Si = [
        "type",
        "source",
        "source-layer",
        "minzoom",
        "maxzoom",
        "filter",
        "layout",
      ];
      function gi(l, s) {
        let c = {};
        for (let p in l) p !== "ref" && (c[p] = l[p]);
        return (
          Si.forEach((p) => {
            p in s && (c[p] = s[p]);
          }),
          c
        );
      }
      function ui(l, s) {
        if (Array.isArray(l)) {
          if (!Array.isArray(s) || l.length !== s.length) return !1;
          for (let c = 0; c < l.length; c++) if (!ui(l[c], s[c])) return !1;
          return !0;
        }
        if (typeof l == "object" && l !== null && s !== null) {
          if (
            typeof s != "object" ||
            Object.keys(l).length !== Object.keys(s).length
          )
            return !1;
          for (let c in l) if (!ui(l[c], s[c])) return !1;
          return !0;
        }
        return l === s;
      }
      function pr(l, s) {
        l.push(s);
      }
      function Er(l, s, c) {
        pr(c, { command: "addSource", args: [l, s[l]] });
      }
      function en(l, s, c) {
        pr(s, { command: "removeSource", args: [l] }), (c[l] = !0);
      }
      function tn(l, s, c, p) {
        en(l, c, p), Er(l, s, c);
      }
      function yn(l, s, c) {
        let p;
        for (p in l[c])
          if (
            Object.prototype.hasOwnProperty.call(l[c], p) &&
            p !== "data" &&
            !ui(l[c][p], s[c][p])
          )
            return !1;
        for (p in s[c])
          if (
            Object.prototype.hasOwnProperty.call(s[c], p) &&
            p !== "data" &&
            !ui(l[c][p], s[c][p])
          )
            return !1;
        return !0;
      }
      function Vn(l, s, c, p, y, w) {
        (l = l || {}), (s = s || {});
        for (let k in l)
          Object.prototype.hasOwnProperty.call(l, k) &&
            (ui(l[k], s[k]) || c.push({ command: w, args: [p, k, s[k], y] }));
        for (let k in s)
          Object.prototype.hasOwnProperty.call(s, k) &&
            !Object.prototype.hasOwnProperty.call(l, k) &&
            (ui(l[k], s[k]) || c.push({ command: w, args: [p, k, s[k], y] }));
      }
      function An(l) {
        return l.id;
      }
      function Zr(l, s) {
        return (l[s.id] = s), l;
      }
      class at {
        constructor(s, c, p, y) {
          (this.message = (s ? `${s}: ` : "") + p),
            y && (this.identifier = y),
            c != null && c.__line__ && (this.line = c.__line__);
        }
      }
      function Pr(l, ...s) {
        for (let c of s) for (let p in c) l[p] = c[p];
        return l;
      }
      class Dr extends Error {
        constructor(s, c) {
          super(c), (this.message = c), (this.key = s);
        }
      }
      class Kn {
        constructor(s, c = []) {
          (this.parent = s), (this.bindings = {});
          for (let [p, y] of c) this.bindings[p] = y;
        }
        concat(s) {
          return new Kn(this, s);
        }
        get(s) {
          if (this.bindings[s]) return this.bindings[s];
          if (this.parent) return this.parent.get(s);
          throw new Error(`${s} not found in scope.`);
        }
        has(s) {
          return !!this.bindings[s] || (!!this.parent && this.parent.has(s));
        }
      }
      let ko = { kind: "null" },
        ft = { kind: "number" },
        Tt = { kind: "string" },
        Fe = { kind: "boolean" },
        At = { kind: "color" },
        $t = { kind: "object" },
        Pt = { kind: "value" },
        yi = { kind: "collator" },
        Fi = { kind: "formatted" },
        re = { kind: "padding" },
        V = { kind: "resolvedImage" },
        H = { kind: "variableAnchorOffsetCollection" };
      function $(l, s) {
        return { kind: "array", itemType: l, N: s };
      }
      function ne(l) {
        if (l.kind === "array") {
          let s = ne(l.itemType);
          return typeof l.N == "number"
            ? `array<${s}, ${l.N}>`
            : l.itemType.kind === "value"
            ? "array"
            : `array<${s}>`;
        }
        return l.kind;
      }
      let ve = [ko, ft, Tt, Fe, At, Fi, $t, $(Pt), re, V, H];
      function xe(l, s) {
        if (s.kind === "error") return null;
        if (l.kind === "array") {
          if (
            s.kind === "array" &&
            ((s.N === 0 && s.itemType.kind === "value") ||
              !xe(l.itemType, s.itemType)) &&
            (typeof l.N != "number" || l.N === s.N)
          )
            return null;
        } else {
          if (l.kind === s.kind) return null;
          if (l.kind === "value") {
            for (let c of ve) if (!xe(c, s)) return null;
          }
        }
        return `Expected ${ne(l)} but found ${ne(s)} instead.`;
      }
      function ke(l, s) {
        return s.some((c) => c.kind === l.kind);
      }
      function me(l, s) {
        return s.some((c) =>
          c === "null"
            ? l === null
            : c === "array"
            ? Array.isArray(l)
            : c === "object"
            ? l && !Array.isArray(l) && typeof l == "object"
            : c === typeof l
        );
      }
      function we(l, s) {
        return l.kind === "array" && s.kind === "array"
          ? l.itemType.kind === s.itemType.kind && typeof l.N == "number"
          : l.kind === s.kind;
      }
      let Ze = 0.96422,
        Qe = 0.82521,
        Xe = 4 / 29,
        jt = 6 / 29,
        oi = 3 * jt * jt,
        ti = jt * jt * jt,
        zi = Math.PI / 180,
        di = 180 / Math.PI;
      function lr(l) {
        return (l %= 360) < 0 && (l += 360), l;
      }
      function Ni([l, s, c, p]) {
        let y,
          w,
          k = ci(
            (0.2225045 * (l = Wi(l)) +
              0.7168786 * (s = Wi(s)) +
              0.0606169 * (c = Wi(c))) /
              1
          );
        l === s && s === c
          ? (y = w = k)
          : ((y = ci((0.4360747 * l + 0.3850649 * s + 0.1430804 * c) / Ze)),
            (w = ci((0.0139322 * l + 0.0971045 * s + 0.7141733 * c) / Qe)));
        let C = 116 * k - 16;
        return [C < 0 ? 0 : C, 500 * (y - k), 200 * (k - w), p];
      }
      function Wi(l) {
        return l <= 0.04045 ? l / 12.92 : Math.pow((l + 0.055) / 1.055, 2.4);
      }
      function ci(l) {
        return l > ti ? Math.pow(l, 1 / 3) : l / oi + Xe;
      }
      function br([l, s, c, p]) {
        let y = (l + 16) / 116,
          w = isNaN(s) ? y : y + s / 500,
          k = isNaN(c) ? y : y - c / 200;
        return (
          (y = 1 * In(y)),
          (w = Ze * In(w)),
          (k = Qe * In(k)),
          [
            Or(3.1338561 * w - 1.6168667 * y - 0.4906146 * k),
            Or(-0.9787684 * w + 1.9161415 * y + 0.033454 * k),
            Or(0.0719453 * w - 0.2289914 * y + 1.4052427 * k),
            p,
          ]
        );
      }
      function Or(l) {
        return (l =
          l <= 0.00304 ? 12.92 * l : 1.055 * Math.pow(l, 1 / 2.4) - 0.055) < 0
          ? 0
          : l > 1
          ? 1
          : l;
      }
      function In(l) {
        return l > jt ? l * l * l : oi * (l - Xe);
      }
      function rn(l) {
        return parseInt(l.padEnd(2, l), 16) / 255;
      }
      function un(l, s) {
        return nn(s ? l / 100 : l, 0, 1);
      }
      function nn(l, s, c) {
        return Math.min(Math.max(s, l), c);
      }
      function vl(l) {
        return !l.some(Number.isNaN);
      }
      let ha = {
        aliceblue: [240, 248, 255],
        antiquewhite: [250, 235, 215],
        aqua: [0, 255, 255],
        aquamarine: [127, 255, 212],
        azure: [240, 255, 255],
        beige: [245, 245, 220],
        bisque: [255, 228, 196],
        black: [0, 0, 0],
        blanchedalmond: [255, 235, 205],
        blue: [0, 0, 255],
        blueviolet: [138, 43, 226],
        brown: [165, 42, 42],
        burlywood: [222, 184, 135],
        cadetblue: [95, 158, 160],
        chartreuse: [127, 255, 0],
        chocolate: [210, 105, 30],
        coral: [255, 127, 80],
        cornflowerblue: [100, 149, 237],
        cornsilk: [255, 248, 220],
        crimson: [220, 20, 60],
        cyan: [0, 255, 255],
        darkblue: [0, 0, 139],
        darkcyan: [0, 139, 139],
        darkgoldenrod: [184, 134, 11],
        darkgray: [169, 169, 169],
        darkgreen: [0, 100, 0],
        darkgrey: [169, 169, 169],
        darkkhaki: [189, 183, 107],
        darkmagenta: [139, 0, 139],
        darkolivegreen: [85, 107, 47],
        darkorange: [255, 140, 0],
        darkorchid: [153, 50, 204],
        darkred: [139, 0, 0],
        darksalmon: [233, 150, 122],
        darkseagreen: [143, 188, 143],
        darkslateblue: [72, 61, 139],
        darkslategray: [47, 79, 79],
        darkslategrey: [47, 79, 79],
        darkturquoise: [0, 206, 209],
        darkviolet: [148, 0, 211],
        deeppink: [255, 20, 147],
        deepskyblue: [0, 191, 255],
        dimgray: [105, 105, 105],
        dimgrey: [105, 105, 105],
        dodgerblue: [30, 144, 255],
        firebrick: [178, 34, 34],
        floralwhite: [255, 250, 240],
        forestgreen: [34, 139, 34],
        fuchsia: [255, 0, 255],
        gainsboro: [220, 220, 220],
        ghostwhite: [248, 248, 255],
        gold: [255, 215, 0],
        goldenrod: [218, 165, 32],
        gray: [128, 128, 128],
        green: [0, 128, 0],
        greenyellow: [173, 255, 47],
        grey: [128, 128, 128],
        honeydew: [240, 255, 240],
        hotpink: [255, 105, 180],
        indianred: [205, 92, 92],
        indigo: [75, 0, 130],
        ivory: [255, 255, 240],
        khaki: [240, 230, 140],
        lavender: [230, 230, 250],
        lavenderblush: [255, 240, 245],
        lawngreen: [124, 252, 0],
        lemonchiffon: [255, 250, 205],
        lightblue: [173, 216, 230],
        lightcoral: [240, 128, 128],
        lightcyan: [224, 255, 255],
        lightgoldenrodyellow: [250, 250, 210],
        lightgray: [211, 211, 211],
        lightgreen: [144, 238, 144],
        lightgrey: [211, 211, 211],
        lightpink: [255, 182, 193],
        lightsalmon: [255, 160, 122],
        lightseagreen: [32, 178, 170],
        lightskyblue: [135, 206, 250],
        lightslategray: [119, 136, 153],
        lightslategrey: [119, 136, 153],
        lightsteelblue: [176, 196, 222],
        lightyellow: [255, 255, 224],
        lime: [0, 255, 0],
        limegreen: [50, 205, 50],
        linen: [250, 240, 230],
        magenta: [255, 0, 255],
        maroon: [128, 0, 0],
        mediumaquamarine: [102, 205, 170],
        mediumblue: [0, 0, 205],
        mediumorchid: [186, 85, 211],
        mediumpurple: [147, 112, 219],
        mediumseagreen: [60, 179, 113],
        mediumslateblue: [123, 104, 238],
        mediumspringgreen: [0, 250, 154],
        mediumturquoise: [72, 209, 204],
        mediumvioletred: [199, 21, 133],
        midnightblue: [25, 25, 112],
        mintcream: [245, 255, 250],
        mistyrose: [255, 228, 225],
        moccasin: [255, 228, 181],
        navajowhite: [255, 222, 173],
        navy: [0, 0, 128],
        oldlace: [253, 245, 230],
        olive: [128, 128, 0],
        olivedrab: [107, 142, 35],
        orange: [255, 165, 0],
        orangered: [255, 69, 0],
        orchid: [218, 112, 214],
        palegoldenrod: [238, 232, 170],
        palegreen: [152, 251, 152],
        paleturquoise: [175, 238, 238],
        palevioletred: [219, 112, 147],
        papayawhip: [255, 239, 213],
        peachpuff: [255, 218, 185],
        peru: [205, 133, 63],
        pink: [255, 192, 203],
        plum: [221, 160, 221],
        powderblue: [176, 224, 230],
        purple: [128, 0, 128],
        rebeccapurple: [102, 51, 153],
        red: [255, 0, 0],
        rosybrown: [188, 143, 143],
        royalblue: [65, 105, 225],
        saddlebrown: [139, 69, 19],
        salmon: [250, 128, 114],
        sandybrown: [244, 164, 96],
        seagreen: [46, 139, 87],
        seashell: [255, 245, 238],
        sienna: [160, 82, 45],
        silver: [192, 192, 192],
        skyblue: [135, 206, 235],
        slateblue: [106, 90, 205],
        slategray: [112, 128, 144],
        slategrey: [112, 128, 144],
        snow: [255, 250, 250],
        springgreen: [0, 255, 127],
        steelblue: [70, 130, 180],
        tan: [210, 180, 140],
        teal: [0, 128, 128],
        thistle: [216, 191, 216],
        tomato: [255, 99, 71],
        turquoise: [64, 224, 208],
        violet: [238, 130, 238],
        wheat: [245, 222, 179],
        white: [255, 255, 255],
        whitesmoke: [245, 245, 245],
        yellow: [255, 255, 0],
        yellowgreen: [154, 205, 50],
      };
      class tr {
        constructor(s, c, p, y = 1, w = !0) {
          (this.r = s),
            (this.g = c),
            (this.b = p),
            (this.a = y),
            w ||
              ((this.r *= y),
              (this.g *= y),
              (this.b *= y),
              y || this.overwriteGetter("rgb", [s, c, p, y]));
        }
        static parse(s) {
          if (s instanceof tr) return s;
          if (typeof s != "string") return;
          let c = (function (p) {
            if ((p = p.toLowerCase().trim()) === "transparent")
              return [0, 0, 0, 0];
            let y = ha[p];
            if (y) {
              let [k, C, A] = y;
              return [k / 255, C / 255, A / 255, 1];
            }
            if (
              p.startsWith("#") &&
              /^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)
            ) {
              let k = p.length < 6 ? 1 : 2,
                C = 1;
              return [
                rn(p.slice(C, (C += k))),
                rn(p.slice(C, (C += k))),
                rn(p.slice(C, (C += k))),
                rn(p.slice(C, C + k) || "ff"),
              ];
            }
            if (p.startsWith("rgb")) {
              let k = p.match(
                /^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/
              );
              if (k) {
                let [C, A, P, N, O, j, W, K, ie, ae, pe, Pe] = k,
                  ye = [N || " ", W || " ", ae].join("");
                if (
                  ye === "  " ||
                  ye === "  /" ||
                  ye === ",," ||
                  ye === ",,,"
                ) {
                  let Se = [P, j, ie].join(""),
                    We = Se === "%%%" ? 100 : Se === "" ? 255 : 0;
                  if (We) {
                    let tt = [
                      nn(+A / We, 0, 1),
                      nn(+O / We, 0, 1),
                      nn(+K / We, 0, 1),
                      pe ? un(+pe, Pe) : 1,
                    ];
                    if (vl(tt)) return tt;
                  }
                }
                return;
              }
            }
            let w = p.match(
              /^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/
            );
            if (w) {
              let [k, C, A, P, N, O, j, W, K] = w,
                ie = [A || " ", N || " ", j].join("");
              if (ie === "  " || ie === "  /" || ie === ",," || ie === ",,,") {
                let ae = [
                  +C,
                  nn(+P, 0, 100),
                  nn(+O, 0, 100),
                  W ? un(+W, K) : 1,
                ];
                if (vl(ae))
                  return (function ([pe, Pe, ye, Se]) {
                    function We(tt) {
                      let Dt = (tt + pe / 30) % 12,
                        Qt = Pe * Math.min(ye, 1 - ye);
                      return (
                        ye - Qt * Math.max(-1, Math.min(Dt - 3, 9 - Dt, 1))
                      );
                    }
                    return (
                      (pe = lr(pe)),
                      (Pe /= 100),
                      (ye /= 100),
                      [We(0), We(8), We(4), Se]
                    );
                  })(ae);
              }
            }
          })(s);
          return c ? new tr(...c, !1) : void 0;
        }
        get rgb() {
          let { r: s, g: c, b: p, a: y } = this,
            w = y || 1 / 0;
          return this.overwriteGetter("rgb", [s / w, c / w, p / w, y]);
        }
        get hcl() {
          return this.overwriteGetter(
            "hcl",
            (function (s) {
              let [c, p, y, w] = Ni(s),
                k = Math.sqrt(p * p + y * y);
              return [
                Math.round(1e4 * k) ? lr(Math.atan2(y, p) * di) : NaN,
                k,
                c,
                w,
              ];
            })(this.rgb)
          );
        }
        get lab() {
          return this.overwriteGetter("lab", Ni(this.rgb));
        }
        overwriteGetter(s, c) {
          return Object.defineProperty(this, s, { value: c }), c;
        }
        toString() {
          let [s, c, p, y] = this.rgb;
          return `rgba(${[s, c, p]
            .map((w) => Math.round(255 * w))
            .join(",")},${y})`;
        }
      }
      (tr.black = new tr(0, 0, 0, 1)),
        (tr.white = new tr(1, 1, 1, 1)),
        (tr.transparent = new tr(0, 0, 0, 0)),
        (tr.red = new tr(1, 0, 0, 1));
      class So {
        constructor(s, c, p) {
          (this.sensitivity = s
            ? c
              ? "variant"
              : "case"
            : c
            ? "accent"
            : "base"),
            (this.locale = p),
            (this.collator = new Intl.Collator(this.locale ? this.locale : [], {
              sensitivity: this.sensitivity,
              usage: "search",
            }));
        }
        compare(s, c) {
          return this.collator.compare(s, c);
        }
        resolvedLocale() {
          return new Intl.Collator(
            this.locale ? this.locale : []
          ).resolvedOptions().locale;
        }
      }
      class Pa {
        constructor(s, c, p, y, w) {
          (this.text = s),
            (this.image = c),
            (this.scale = p),
            (this.fontStack = y),
            (this.textColor = w);
        }
      }
      class jn {
        constructor(s) {
          this.sections = s;
        }
        static fromString(s) {
          return new jn([new Pa(s, null, null, null, null)]);
        }
        isEmpty() {
          return (
            this.sections.length === 0 ||
            !this.sections.some(
              (s) =>
                s.text.length !== 0 || (s.image && s.image.name.length !== 0)
            )
          );
        }
        static factory(s) {
          return s instanceof jn ? s : jn.fromString(s);
        }
        toString() {
          return this.sections.length === 0
            ? ""
            : this.sections.map((s) => s.text).join("");
        }
      }
      class Pn {
        constructor(s) {
          this.values = s.slice();
        }
        static parse(s) {
          if (s instanceof Pn) return s;
          if (typeof s == "number") return new Pn([s, s, s, s]);
          if (Array.isArray(s) && !(s.length < 1 || s.length > 4)) {
            for (let c of s) if (typeof c != "number") return;
            switch (s.length) {
              case 1:
                s = [s[0], s[0], s[0], s[0]];
                break;
              case 2:
                s = [s[0], s[1], s[0], s[1]];
                break;
              case 3:
                s = [s[0], s[1], s[2], s[1]];
            }
            return new Pn(s);
          }
        }
        toString() {
          return JSON.stringify(this.values);
        }
      }
      let _l = new Set([
        "center",
        "left",
        "right",
        "top",
        "bottom",
        "top-left",
        "top-right",
        "bottom-left",
        "bottom-right",
      ]);
      class dn {
        constructor(s) {
          this.values = s.slice();
        }
        static parse(s) {
          if (s instanceof dn) return s;
          if (Array.isArray(s) && !(s.length < 1) && s.length % 2 == 0) {
            for (let c = 0; c < s.length; c += 2) {
              let p = s[c],
                y = s[c + 1];
              if (
                typeof p != "string" ||
                !_l.has(p) ||
                !Array.isArray(y) ||
                y.length !== 2 ||
                typeof y[0] != "number" ||
                typeof y[1] != "number"
              )
                return;
            }
            return new dn(s);
          }
        }
        toString() {
          return JSON.stringify(this.values);
        }
      }
      class Jn {
        constructor(s) {
          (this.name = s.name), (this.available = s.available);
        }
        toString() {
          return this.name;
        }
        static fromString(s) {
          return s ? new Jn({ name: s, available: !1 }) : null;
        }
      }
      function xl(l, s, c, p) {
        return typeof l == "number" &&
          l >= 0 &&
          l <= 255 &&
          typeof s == "number" &&
          s >= 0 &&
          s <= 255 &&
          typeof c == "number" &&
          c >= 0 &&
          c <= 255
          ? p === void 0 || (typeof p == "number" && p >= 0 && p <= 1)
            ? null
            : `Invalid rgba value [${[l, s, c, p].join(
                ", "
              )}]: 'a' must be between 0 and 1.`
          : `Invalid rgba value [${(typeof p == "number"
              ? [l, s, c, p]
              : [l, s, c]
            ).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`;
      }
      function de(l) {
        if (
          l === null ||
          typeof l == "string" ||
          typeof l == "boolean" ||
          typeof l == "number" ||
          l instanceof tr ||
          l instanceof So ||
          l instanceof jn ||
          l instanceof Pn ||
          l instanceof dn ||
          l instanceof Jn
        )
          return !0;
        if (Array.isArray(l)) {
          for (let s of l) if (!de(s)) return !1;
          return !0;
        }
        if (typeof l == "object") {
          for (let s in l) if (!de(l[s])) return !1;
          return !0;
        }
        return !1;
      }
      function ai(l) {
        if (l === null) return ko;
        if (typeof l == "string") return Tt;
        if (typeof l == "boolean") return Fe;
        if (typeof l == "number") return ft;
        if (l instanceof tr) return At;
        if (l instanceof So) return yi;
        if (l instanceof jn) return Fi;
        if (l instanceof Pn) return re;
        if (l instanceof dn) return H;
        if (l instanceof Jn) return V;
        if (Array.isArray(l)) {
          let s = l.length,
            c;
          for (let p of l) {
            let y = ai(p);
            if (c) {
              if (c === y) continue;
              c = Pt;
              break;
            }
            c = y;
          }
          return $(c || Pt, s);
        }
        return $t;
      }
      function fr(l) {
        let s = typeof l;
        return l === null
          ? ""
          : s === "string" || s === "number" || s === "boolean"
          ? String(l)
          : l instanceof tr ||
            l instanceof jn ||
            l instanceof Pn ||
            l instanceof dn ||
            l instanceof Jn
          ? l.toString()
          : JSON.stringify(l);
      }
      class Lr {
        constructor(s, c) {
          (this.type = s), (this.value = c);
        }
        static parse(s, c) {
          if (s.length !== 2)
            return c.error(
              `'literal' expression requires exactly one argument, but found ${
                s.length - 1
              } instead.`
            );
          if (!de(s[1])) return c.error("invalid value");
          let p = s[1],
            y = ai(p),
            w = c.expectedType;
          return (
            y.kind !== "array" ||
              y.N !== 0 ||
              !w ||
              w.kind !== "array" ||
              (typeof w.N == "number" && w.N !== 0) ||
              (y = w),
            new Lr(y, p)
          );
        }
        evaluate() {
          return this.value;
        }
        eachChild() {}
        outputDefined() {
          return !0;
        }
      }
      class cr {
        constructor(s) {
          (this.name = "ExpressionEvaluationError"), (this.message = s);
        }
        toJSON() {
          return this.message;
        }
      }
      let Ho = { string: Tt, number: ft, boolean: Fe, object: $t };
      class on {
        constructor(s, c) {
          (this.type = s), (this.args = c);
        }
        static parse(s, c) {
          if (s.length < 2) return c.error("Expected at least one argument.");
          let p,
            y = 1,
            w = s[0];
          if (w === "array") {
            let C, A;
            if (s.length > 2) {
              let P = s[1];
              if (typeof P != "string" || !(P in Ho) || P === "object")
                return c.error(
                  'The item type argument of "array" must be one of string, number, boolean',
                  1
                );
              (C = Ho[P]), y++;
            } else C = Pt;
            if (s.length > 3) {
              if (
                s[2] !== null &&
                (typeof s[2] != "number" ||
                  s[2] < 0 ||
                  s[2] !== Math.floor(s[2]))
              )
                return c.error(
                  'The length argument to "array" must be a positive integer literal',
                  2
                );
              (A = s[2]), y++;
            }
            p = $(C, A);
          } else {
            if (!Ho[w]) throw new Error(`Types doesn't contain name = ${w}`);
            p = Ho[w];
          }
          let k = [];
          for (; y < s.length; y++) {
            let C = c.parse(s[y], y, Pt);
            if (!C) return null;
            k.push(C);
          }
          return new on(p, k);
        }
        evaluate(s) {
          for (let c = 0; c < this.args.length; c++) {
            let p = this.args[c].evaluate(s);
            if (!xe(this.type, ai(p))) return p;
            if (c === this.args.length - 1)
              throw new cr(
                `Expected value to be of type ${ne(this.type)}, but found ${ne(
                  ai(p)
                )} instead.`
              );
          }
          throw new Error();
        }
        eachChild(s) {
          this.args.forEach(s);
        }
        outputDefined() {
          return this.args.every((s) => s.outputDefined());
        }
      }
      let cs = {
        "to-boolean": Fe,
        "to-color": At,
        "to-number": ft,
        "to-string": Tt,
      };
      class Hn {
        constructor(s, c) {
          (this.type = s), (this.args = c);
        }
        static parse(s, c) {
          if (s.length < 2) return c.error("Expected at least one argument.");
          let p = s[0];
          if (!cs[p])
            throw new Error(
              `Can't parse ${p} as it is not part of the known types`
            );
          if ((p === "to-boolean" || p === "to-string") && s.length !== 2)
            return c.error("Expected one argument.");
          let y = cs[p],
            w = [];
          for (let k = 1; k < s.length; k++) {
            let C = c.parse(s[k], k, Pt);
            if (!C) return null;
            w.push(C);
          }
          return new Hn(y, w);
        }
        evaluate(s) {
          switch (this.type.kind) {
            case "boolean":
              return !!this.args[0].evaluate(s);
            case "color": {
              let c, p;
              for (let y of this.args) {
                if (((c = y.evaluate(s)), (p = null), c instanceof tr))
                  return c;
                if (typeof c == "string") {
                  let w = s.parseColor(c);
                  if (w) return w;
                } else if (
                  Array.isArray(c) &&
                  ((p =
                    c.length < 3 || c.length > 4
                      ? `Invalid rbga value ${JSON.stringify(
                          c
                        )}: expected an array containing either three or four numeric values.`
                      : xl(c[0], c[1], c[2], c[3])),
                  !p)
                )
                  return new tr(c[0] / 255, c[1] / 255, c[2] / 255, c[3]);
              }
              throw new cr(
                p ||
                  `Could not parse color from value '${
                    typeof c == "string" ? c : JSON.stringify(c)
                  }'`
              );
            }
            case "padding": {
              let c;
              for (let p of this.args) {
                c = p.evaluate(s);
                let y = Pn.parse(c);
                if (y) return y;
              }
              throw new cr(
                `Could not parse padding from value '${
                  typeof c == "string" ? c : JSON.stringify(c)
                }'`
              );
            }
            case "variableAnchorOffsetCollection": {
              let c;
              for (let p of this.args) {
                c = p.evaluate(s);
                let y = dn.parse(c);
                if (y) return y;
              }
              throw new cr(
                `Could not parse variableAnchorOffsetCollection from value '${
                  typeof c == "string" ? c : JSON.stringify(c)
                }'`
              );
            }
            case "number": {
              let c = null;
              for (let p of this.args) {
                if (((c = p.evaluate(s)), c === null)) return 0;
                let y = Number(c);
                if (!isNaN(y)) return y;
              }
              throw new cr(`Could not convert ${JSON.stringify(c)} to number.`);
            }
            case "formatted":
              return jn.fromString(fr(this.args[0].evaluate(s)));
            case "resolvedImage":
              return Jn.fromString(fr(this.args[0].evaluate(s)));
            default:
              return fr(this.args[0].evaluate(s));
          }
        }
        eachChild(s) {
          this.args.forEach(s);
        }
        outputDefined() {
          return this.args.every((s) => s.outputDefined());
        }
      }
      let Es = ["Unknown", "Point", "LineString", "Polygon"];
      class ue {
        constructor() {
          (this.globals = null),
            (this.feature = null),
            (this.featureState = null),
            (this.formattedSection = null),
            (this._parseColorCache = {}),
            (this.availableImages = null),
            (this.canonical = null);
        }
        id() {
          return this.feature && "id" in this.feature ? this.feature.id : null;
        }
        geometryType() {
          return this.feature
            ? typeof this.feature.type == "number"
              ? Es[this.feature.type]
              : this.feature.type
            : null;
        }
        geometry() {
          return this.feature && "geometry" in this.feature
            ? this.feature.geometry
            : null;
        }
        canonicalID() {
          return this.canonical;
        }
        properties() {
          return (this.feature && this.feature.properties) || {};
        }
        parseColor(s) {
          let c = this._parseColorCache[s];
          return c || (c = this._parseColorCache[s] = tr.parse(s)), c;
        }
      }
      class R {
        constructor(s, c, p = [], y, w = new Kn(), k = []) {
          (this.registry = s),
            (this.path = p),
            (this.key = p.map((C) => `[${C}]`).join("")),
            (this.scope = w),
            (this.errors = k),
            (this.expectedType = y),
            (this._isConstant = c);
        }
        parse(s, c, p, y, w = {}) {
          return c ? this.concat(c, p, y)._parse(s, w) : this._parse(s, w);
        }
        _parse(s, c) {
          function p(y, w, k) {
            return k === "assert"
              ? new on(w, [y])
              : k === "coerce"
              ? new Hn(w, [y])
              : y;
          }
          if (
            ((s !== null &&
              typeof s != "string" &&
              typeof s != "boolean" &&
              typeof s != "number") ||
              (s = ["literal", s]),
            Array.isArray(s))
          ) {
            if (s.length === 0)
              return this.error(
                'Expected an array with at least one element. If you wanted a literal array, use ["literal", []].'
              );
            let y = s[0];
            if (typeof y != "string")
              return (
                this.error(
                  `Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,
                  0
                ),
                null
              );
            let w = this.registry[y];
            if (w) {
              let k = w.parse(s, this);
              if (!k) return null;
              if (this.expectedType) {
                let C = this.expectedType,
                  A = k.type;
                if (
                  (C.kind !== "string" &&
                    C.kind !== "number" &&
                    C.kind !== "boolean" &&
                    C.kind !== "object" &&
                    C.kind !== "array") ||
                  A.kind !== "value"
                )
                  if (
                    (C.kind !== "color" &&
                      C.kind !== "formatted" &&
                      C.kind !== "resolvedImage") ||
                    (A.kind !== "value" && A.kind !== "string")
                  )
                    if (
                      C.kind !== "padding" ||
                      (A.kind !== "value" &&
                        A.kind !== "number" &&
                        A.kind !== "array")
                    )
                      if (
                        C.kind !== "variableAnchorOffsetCollection" ||
                        (A.kind !== "value" && A.kind !== "array")
                      ) {
                        if (this.checkSubtype(C, A)) return null;
                      } else k = p(k, C, c.typeAnnotation || "coerce");
                    else k = p(k, C, c.typeAnnotation || "coerce");
                  else k = p(k, C, c.typeAnnotation || "coerce");
                else k = p(k, C, c.typeAnnotation || "assert");
              }
              if (
                !(k instanceof Lr) &&
                k.type.kind !== "resolvedImage" &&
                this._isConstant(k)
              ) {
                let C = new ue();
                try {
                  k = new Lr(k.type, k.evaluate(C));
                } catch (A) {
                  return this.error(A.message), null;
                }
              }
              return k;
            }
            return this.error(
              `Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,
              0
            );
          }
          return this.error(
            s === void 0
              ? "'undefined' value invalid. Use null instead."
              : typeof s == "object"
              ? 'Bare objects invalid. Use ["literal", {...}] instead.'
              : `Expected an array, but found ${typeof s} instead.`
          );
        }
        concat(s, c, p) {
          let y = typeof s == "number" ? this.path.concat(s) : this.path,
            w = p ? this.scope.concat(p) : this.scope;
          return new R(
            this.registry,
            this._isConstant,
            y,
            c || null,
            w,
            this.errors
          );
        }
        error(s, ...c) {
          let p = `${this.key}${c.map((y) => `[${y}]`).join("")}`;
          this.errors.push(new Dr(p, s));
        }
        checkSubtype(s, c) {
          let p = xe(s, c);
          return p && this.error(p), p;
        }
      }
      class X {
        constructor(s, c, p) {
          (this.type = yi),
            (this.locale = p),
            (this.caseSensitive = s),
            (this.diacriticSensitive = c);
        }
        static parse(s, c) {
          if (s.length !== 2) return c.error("Expected one argument.");
          let p = s[1];
          if (typeof p != "object" || Array.isArray(p))
            return c.error("Collator options argument must be an object.");
          let y = c.parse(
            p["case-sensitive"] !== void 0 && p["case-sensitive"],
            1,
            Fe
          );
          if (!y) return null;
          let w = c.parse(
            p["diacritic-sensitive"] !== void 0 && p["diacritic-sensitive"],
            1,
            Fe
          );
          if (!w) return null;
          let k = null;
          return p.locale && ((k = c.parse(p.locale, 1, Tt)), !k)
            ? null
            : new X(y, w, k);
        }
        evaluate(s) {
          return new So(
            this.caseSensitive.evaluate(s),
            this.diacriticSensitive.evaluate(s),
            this.locale ? this.locale.evaluate(s) : null
          );
        }
        eachChild(s) {
          s(this.caseSensitive),
            s(this.diacriticSensitive),
            this.locale && s(this.locale);
        }
        outputDefined() {
          return !1;
        }
      }
      let G = 8192;
      function Me(l, s) {
        (l[0] = Math.min(l[0], s[0])),
          (l[1] = Math.min(l[1], s[1])),
          (l[2] = Math.max(l[2], s[0])),
          (l[3] = Math.max(l[3], s[1]));
      }
      function ge(l, s) {
        return !(l[0] <= s[0] || l[2] >= s[2] || l[1] <= s[1] || l[3] >= s[3]);
      }
      function Ae(l, s) {
        let c = (180 + l[0]) / 360,
          p =
            (180 -
              (180 / Math.PI) *
                Math.log(Math.tan(Math.PI / 4 + (l[1] * Math.PI) / 360))) /
            360,
          y = Math.pow(2, s.z);
        return [Math.round(c * y * G), Math.round(p * y * G)];
      }
      function Ke(l, s, c) {
        let p = l[0] - s[0],
          y = l[1] - s[1],
          w = l[0] - c[0],
          k = l[1] - c[1];
        return p * k - w * y == 0 && p * w <= 0 && y * k <= 0;
      }
      function _t(l, s) {
        let c = !1;
        for (let k = 0, C = s.length; k < C; k++) {
          let A = s[k];
          for (let P = 0, N = A.length; P < N - 1; P++) {
            if (Ke(l, A[P], A[P + 1])) return !1;
            (y = A[P])[1] > (p = l)[1] != (w = A[P + 1])[1] > p[1] &&
              p[0] < ((w[0] - y[0]) * (p[1] - y[1])) / (w[1] - y[1]) + y[0] &&
              (c = !c);
          }
        }
        var p, y, w;
        return c;
      }
      function lt(l, s) {
        for (let c = 0; c < s.length; c++) if (_t(l, s[c])) return !0;
        return !1;
      }
      function Ye(l, s, c, p) {
        let y = p[0] - c[0],
          w = p[1] - c[1],
          k = (l[0] - c[0]) * w - y * (l[1] - c[1]),
          C = (s[0] - c[0]) * w - y * (s[1] - c[1]);
        return (k > 0 && C < 0) || (k < 0 && C > 0);
      }
      function et(l, s, c) {
        for (let P of c)
          for (let N = 0; N < P.length - 1; ++N)
            if (
              (C = [(k = P[N + 1])[0] - (w = P[N])[0], k[1] - w[1]])[0] *
                (A = [(y = s)[0] - (p = l)[0], y[1] - p[1]])[1] -
                C[1] * A[0] !=
                0 &&
              Ye(p, y, w, k) &&
              Ye(w, k, p, y)
            )
              return !0;
        var p, y, w, k, C, A;
        return !1;
      }
      function bt(l, s) {
        for (let c = 0; c < l.length; ++c) if (!_t(l[c], s)) return !1;
        for (let c = 0; c < l.length - 1; ++c)
          if (et(l[c], l[c + 1], s)) return !1;
        return !0;
      }
      function Zi(l, s) {
        for (let c = 0; c < s.length; c++) if (bt(l, s[c])) return !0;
        return !1;
      }
      function Ri(l, s, c) {
        let p = [];
        for (let y = 0; y < l.length; y++) {
          let w = [];
          for (let k = 0; k < l[y].length; k++) {
            let C = Ae(l[y][k], c);
            Me(s, C), w.push(C);
          }
          p.push(w);
        }
        return p;
      }
      function vr(l, s, c) {
        let p = [];
        for (let y = 0; y < l.length; y++) {
          let w = Ri(l[y], s, c);
          p.push(w);
        }
        return p;
      }
      function nr(l, s, c, p) {
        if (l[0] < c[0] || l[0] > c[2]) {
          let y = 0.5 * p,
            w = l[0] - c[0] > y ? -p : c[0] - l[0] > y ? p : 0;
          w === 0 && (w = l[0] - c[2] > y ? -p : c[2] - l[0] > y ? p : 0),
            (l[0] += w);
        }
        Me(s, l);
      }
      function Kr(l, s, c, p) {
        let y = Math.pow(2, p.z) * G,
          w = [p.x * G, p.y * G],
          k = [];
        for (let C of l)
          for (let A of C) {
            let P = [A.x + w[0], A.y + w[1]];
            nr(P, s, c, y), k.push(P);
          }
        return k;
      }
      function Hr(l, s, c, p) {
        let y = Math.pow(2, p.z) * G,
          w = [p.x * G, p.y * G],
          k = [];
        for (let A of l) {
          let P = [];
          for (let N of A) {
            let O = [N.x + w[0], N.y + w[1]];
            Me(s, O), P.push(O);
          }
          k.push(P);
        }
        if (s[2] - s[0] <= y / 2) {
          ((C = s)[0] = C[1] = 1 / 0), (C[2] = C[3] = -1 / 0);
          for (let A of k) for (let P of A) nr(P, s, c, y);
        }
        var C;
        return k;
      }
      class _r {
        constructor(s, c) {
          (this.type = Fe), (this.geojson = s), (this.geometries = c);
        }
        static parse(s, c) {
          if (s.length !== 2)
            return c.error(
              `'within' expression requires exactly one argument, but found ${
                s.length - 1
              } instead.`
            );
          if (de(s[1])) {
            let p = s[1];
            if (p.type === "FeatureCollection") {
              let y = [];
              for (let w of p.features) {
                let { type: k, coordinates: C } = w.geometry;
                k === "Polygon" && y.push(C),
                  k === "MultiPolygon" && y.push(...C);
              }
              if (y.length)
                return new _r(p, { type: "MultiPolygon", coordinates: y });
            } else if (p.type === "Feature") {
              let y = p.geometry.type;
              if (y === "Polygon" || y === "MultiPolygon")
                return new _r(p, p.geometry);
            } else if (p.type === "Polygon" || p.type === "MultiPolygon")
              return new _r(p, p);
          }
          return c.error(
            "'within' expression requires valid geojson object that contains polygon geometry type."
          );
        }
        evaluate(s) {
          if (s.geometry() != null && s.canonicalID() != null) {
            if (s.geometryType() === "Point")
              return (function (c, p) {
                let y = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                  w = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                  k = c.canonicalID();
                if (p.type === "Polygon") {
                  let C = Ri(p.coordinates, w, k),
                    A = Kr(c.geometry(), y, w, k);
                  if (!ge(y, w)) return !1;
                  for (let P of A) if (!_t(P, C)) return !1;
                }
                if (p.type === "MultiPolygon") {
                  let C = vr(p.coordinates, w, k),
                    A = Kr(c.geometry(), y, w, k);
                  if (!ge(y, w)) return !1;
                  for (let P of A) if (!lt(P, C)) return !1;
                }
                return !0;
              })(s, this.geometries);
            if (s.geometryType() === "LineString")
              return (function (c, p) {
                let y = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                  w = [1 / 0, 1 / 0, -1 / 0, -1 / 0],
                  k = c.canonicalID();
                if (p.type === "Polygon") {
                  let C = Ri(p.coordinates, w, k),
                    A = Hr(c.geometry(), y, w, k);
                  if (!ge(y, w)) return !1;
                  for (let P of A) if (!bt(P, C)) return !1;
                }
                if (p.type === "MultiPolygon") {
                  let C = vr(p.coordinates, w, k),
                    A = Hr(c.geometry(), y, w, k);
                  if (!ge(y, w)) return !1;
                  for (let P of A) if (!Zi(P, C)) return !1;
                }
                return !0;
              })(s, this.geometries);
          }
          return !1;
        }
        eachChild() {}
        outputDefined() {
          return !0;
        }
      }
      class Co {
        constructor(s, c) {
          (this.type = c.type), (this.name = s), (this.boundExpression = c);
        }
        static parse(s, c) {
          if (s.length !== 2 || typeof s[1] != "string")
            return c.error(
              "'var' expression requires exactly one string literal argument."
            );
          let p = s[1];
          return c.scope.has(p)
            ? new Co(p, c.scope.get(p))
            : c.error(
                `Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,
                1
              );
        }
        evaluate(s) {
          return this.boundExpression.evaluate(s);
        }
        eachChild() {}
        outputDefined() {
          return !1;
        }
      }
      class Tr {
        constructor(s, c, p, y) {
          (this.name = s),
            (this.type = c),
            (this._evaluate = p),
            (this.args = y);
        }
        evaluate(s) {
          return this._evaluate(s, this.args);
        }
        eachChild(s) {
          this.args.forEach(s);
        }
        outputDefined() {
          return !1;
        }
        static parse(s, c) {
          let p = s[0],
            y = Tr.definitions[p];
          if (!y)
            return c.error(
              `Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,
              0
            );
          let w = Array.isArray(y) ? y[0] : y.type,
            k = Array.isArray(y) ? [[y[1], y[2]]] : y.overloads,
            C = k.filter(
              ([P]) => !Array.isArray(P) || P.length === s.length - 1
            ),
            A = null;
          for (let [P, N] of C) {
            A = new R(c.registry, wt, c.path, null, c.scope);
            let O = [],
              j = !1;
            for (let W = 1; W < s.length; W++) {
              let K = s[W],
                ie = Array.isArray(P) ? P[W - 1] : P.type,
                ae = A.parse(K, 1 + O.length, ie);
              if (!ae) {
                j = !0;
                break;
              }
              O.push(ae);
            }
            if (!j)
              if (Array.isArray(P) && P.length !== O.length)
                A.error(
                  `Expected ${P.length} arguments, but found ${O.length} instead.`
                );
              else {
                for (let W = 0; W < O.length; W++) {
                  let K = Array.isArray(P) ? P[W] : P.type,
                    ie = O[W];
                  A.concat(W + 1).checkSubtype(K, ie.type);
                }
                if (A.errors.length === 0) return new Tr(p, w, N, O);
              }
          }
          if (C.length === 1) c.errors.push(...A.errors);
          else {
            let P = (C.length ? C : k)
                .map(([O]) => {
                  return (
                    (j = O),
                    Array.isArray(j)
                      ? `(${j.map(ne).join(", ")})`
                      : `(${ne(j.type)}...)`
                  );
                  var j;
                })
                .join(" | "),
              N = [];
            for (let O = 1; O < s.length; O++) {
              let j = c.parse(s[O], 1 + N.length);
              if (!j) return null;
              N.push(ne(j.type));
            }
            c.error(
              `Expected arguments of type ${P}, but found (${N.join(
                ", "
              )}) instead.`
            );
          }
          return null;
        }
        static register(s, c) {
          Tr.definitions = c;
          for (let p in c) s[p] = Tr;
        }
      }
      function wt(l) {
        if (l instanceof Co) return wt(l.boundExpression);
        if (
          (l instanceof Tr && l.name === "error") ||
          l instanceof X ||
          l instanceof _r
        )
          return !1;
        let s = l instanceof Hn || l instanceof on,
          c = !0;
        return (
          l.eachChild((p) => {
            c = s ? c && wt(p) : c && p instanceof Lr;
          }),
          !!c &&
            Ki(l) &&
            qn(l, [
              "zoom",
              "heatmap-density",
              "line-progress",
              "accumulated",
              "is-supported-script",
            ])
        );
      }
      function Ki(l) {
        if (
          (l instanceof Tr &&
            ((l.name === "get" && l.args.length === 1) ||
              l.name === "feature-state" ||
              (l.name === "has" && l.args.length === 1) ||
              l.name === "properties" ||
              l.name === "geometry-type" ||
              l.name === "id" ||
              /^filter-/.test(l.name))) ||
          l instanceof _r
        )
          return !1;
        let s = !0;
        return (
          l.eachChild((c) => {
            s && !Ki(c) && (s = !1);
          }),
          s
        );
      }
      function Fr(l) {
        if (l instanceof Tr && l.name === "feature-state") return !1;
        let s = !0;
        return (
          l.eachChild((c) => {
            s && !Fr(c) && (s = !1);
          }),
          s
        );
      }
      function qn(l, s) {
        if (l instanceof Tr && s.indexOf(l.name) >= 0) return !1;
        let c = !0;
        return (
          l.eachChild((p) => {
            c && !qn(p, s) && (c = !1);
          }),
          c
        );
      }
      function uo(l, s) {
        let c = l.length - 1,
          p,
          y,
          w = 0,
          k = c,
          C = 0;
        for (; w <= k; )
          if (
            ((C = Math.floor((w + k) / 2)), (p = l[C]), (y = l[C + 1]), p <= s)
          ) {
            if (C === c || s < y) return C;
            w = C + 1;
          } else {
            if (!(p > s)) throw new cr("Input is not a number.");
            k = C - 1;
          }
        return 0;
      }
      class Eo {
        constructor(s, c, p) {
          (this.type = s),
            (this.input = c),
            (this.labels = []),
            (this.outputs = []);
          for (let [y, w] of p) this.labels.push(y), this.outputs.push(w);
        }
        static parse(s, c) {
          if (s.length - 1 < 4)
            return c.error(
              `Expected at least 4 arguments, but found only ${s.length - 1}.`
            );
          if ((s.length - 1) % 2 != 0)
            return c.error("Expected an even number of arguments.");
          let p = c.parse(s[1], 1, ft);
          if (!p) return null;
          let y = [],
            w = null;
          c.expectedType &&
            c.expectedType.kind !== "value" &&
            (w = c.expectedType);
          for (let k = 1; k < s.length; k += 2) {
            let C = k === 1 ? -1 / 0 : s[k],
              A = s[k + 1],
              P = k,
              N = k + 1;
            if (typeof C != "number")
              return c.error(
                'Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
                P
              );
            if (y.length && y[y.length - 1][0] >= C)
              return c.error(
                'Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
                P
              );
            let O = c.parse(A, N, w);
            if (!O) return null;
            (w = w || O.type), y.push([C, O]);
          }
          return new Eo(w, p, y);
        }
        evaluate(s) {
          let c = this.labels,
            p = this.outputs;
          if (c.length === 1) return p[0].evaluate(s);
          let y = this.input.evaluate(s);
          if (y <= c[0]) return p[0].evaluate(s);
          let w = c.length;
          return y >= c[w - 1] ? p[w - 1].evaluate(s) : p[uo(c, y)].evaluate(s);
        }
        eachChild(s) {
          s(this.input);
          for (let c of this.outputs) s(c);
        }
        outputDefined() {
          return this.outputs.every((s) => s.outputDefined());
        }
      }
      function Qs(l) {
        return l &&
          l.__esModule &&
          Object.prototype.hasOwnProperty.call(l, "default")
          ? l.default
          : l;
      }
      var Ts = qo;
      function qo(l, s, c, p) {
        (this.cx = 3 * l),
          (this.bx = 3 * (c - l) - this.cx),
          (this.ax = 1 - this.cx - this.bx),
          (this.cy = 3 * s),
          (this.by = 3 * (p - s) - this.cy),
          (this.ay = 1 - this.cy - this.by),
          (this.p1x = l),
          (this.p1y = s),
          (this.p2x = c),
          (this.p2y = p);
      }
      qo.prototype = {
        sampleCurveX: function (l) {
          return ((this.ax * l + this.bx) * l + this.cx) * l;
        },
        sampleCurveY: function (l) {
          return ((this.ay * l + this.by) * l + this.cy) * l;
        },
        sampleCurveDerivativeX: function (l) {
          return (3 * this.ax * l + 2 * this.bx) * l + this.cx;
        },
        solveCurveX: function (l, s) {
          if ((s === void 0 && (s = 1e-6), l < 0)) return 0;
          if (l > 1) return 1;
          for (var c = l, p = 0; p < 8; p++) {
            var y = this.sampleCurveX(c) - l;
            if (Math.abs(y) < s) return c;
            var w = this.sampleCurveDerivativeX(c);
            if (Math.abs(w) < 1e-6) break;
            c -= y / w;
          }
          var k = 0,
            C = 1;
          for (
            c = l, p = 0;
            p < 20 && ((y = this.sampleCurveX(c)), !(Math.abs(y - l) < s));
            p++
          )
            l > y ? (k = c) : (C = c), (c = 0.5 * (C - k) + k);
          return c;
        },
        solve: function (l, s) {
          return this.sampleCurveY(this.solveCurveX(l, s));
        },
      };
      var Xn = Qs(Ts);
      function ho(l, s, c) {
        return l + c * (s - l);
      }
      function Gs(l, s, c) {
        return l.map((p, y) => ho(p, s[y], c));
      }
      let $n = {
        number: ho,
        color: function (l, s, c, p = "rgb") {
          switch (p) {
            case "rgb": {
              let [y, w, k, C] = Gs(l.rgb, s.rgb, c);
              return new tr(y, w, k, C, !1);
            }
            case "hcl": {
              let [y, w, k, C] = l.hcl,
                [A, P, N, O] = s.hcl,
                j,
                W;
              if (isNaN(y) || isNaN(A))
                isNaN(y)
                  ? isNaN(A)
                    ? (j = NaN)
                    : ((j = A), (k !== 1 && k !== 0) || (W = P))
                  : ((j = y), (N !== 1 && N !== 0) || (W = w));
              else {
                let Pe = A - y;
                A > y && Pe > 180
                  ? (Pe -= 360)
                  : A < y && y - A > 180 && (Pe += 360),
                  (j = y + c * Pe);
              }
              let [K, ie, ae, pe] = (function ([Pe, ye, Se, We]) {
                return (
                  (Pe = isNaN(Pe) ? 0 : Pe * zi),
                  br([Se, Math.cos(Pe) * ye, Math.sin(Pe) * ye, We])
                );
              })([j, W ?? ho(w, P, c), ho(k, N, c), ho(C, O, c)]);
              return new tr(K, ie, ae, pe, !1);
            }
            case "lab": {
              let [y, w, k, C] = br(Gs(l.lab, s.lab, c));
              return new tr(y, w, k, C, !1);
            }
          }
        },
        array: Gs,
        padding: function (l, s, c) {
          return new Pn(Gs(l.values, s.values, c));
        },
        variableAnchorOffsetCollection: function (l, s, c) {
          let p = l.values,
            y = s.values;
          if (p.length !== y.length)
            throw new cr(
              `Cannot interpolate values of different length. from: ${l.toString()}, to: ${s.toString()}`
            );
          let w = [];
          for (let k = 0; k < p.length; k += 2) {
            if (p[k] !== y[k])
              throw new cr(
                `Cannot interpolate values containing mismatched anchors. from[${k}]: ${p[k]}, to[${k}]: ${y[k]}`
              );
            w.push(p[k]);
            let [C, A] = p[k + 1],
              [P, N] = y[k + 1];
            w.push([ho(C, P, c), ho(A, N, c)]);
          }
          return new dn(w);
        },
      };
      class bn {
        constructor(s, c, p, y, w) {
          (this.type = s),
            (this.operator = c),
            (this.interpolation = p),
            (this.input = y),
            (this.labels = []),
            (this.outputs = []);
          for (let [k, C] of w) this.labels.push(k), this.outputs.push(C);
        }
        static interpolationFactor(s, c, p, y) {
          let w = 0;
          if (s.name === "exponential") w = Ws(c, s.base, p, y);
          else if (s.name === "linear") w = Ws(c, 1, p, y);
          else if (s.name === "cubic-bezier") {
            let k = s.controlPoints;
            w = new Xn(k[0], k[1], k[2], k[3]).solve(Ws(c, 1, p, y));
          }
          return w;
        }
        static parse(s, c) {
          let [p, y, w, ...k] = s;
          if (!Array.isArray(y) || y.length === 0)
            return c.error("Expected an interpolation type expression.", 1);
          if (y[0] === "linear") y = { name: "linear" };
          else if (y[0] === "exponential") {
            let P = y[1];
            if (typeof P != "number")
              return c.error(
                "Exponential interpolation requires a numeric base.",
                1,
                1
              );
            y = { name: "exponential", base: P };
          } else {
            if (y[0] !== "cubic-bezier")
              return c.error(
                `Unknown interpolation type ${String(y[0])}`,
                1,
                0
              );
            {
              let P = y.slice(1);
              if (
                P.length !== 4 ||
                P.some((N) => typeof N != "number" || N < 0 || N > 1)
              )
                return c.error(
                  "Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",
                  1
                );
              y = { name: "cubic-bezier", controlPoints: P };
            }
          }
          if (s.length - 1 < 4)
            return c.error(
              `Expected at least 4 arguments, but found only ${s.length - 1}.`
            );
          if ((s.length - 1) % 2 != 0)
            return c.error("Expected an even number of arguments.");
          if (((w = c.parse(w, 2, ft)), !w)) return null;
          let C = [],
            A = null;
          p === "interpolate-hcl" || p === "interpolate-lab"
            ? (A = At)
            : c.expectedType &&
              c.expectedType.kind !== "value" &&
              (A = c.expectedType);
          for (let P = 0; P < k.length; P += 2) {
            let N = k[P],
              O = k[P + 1],
              j = P + 3,
              W = P + 4;
            if (typeof N != "number")
              return c.error(
                'Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
                j
              );
            if (C.length && C[C.length - 1][0] >= N)
              return c.error(
                'Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
                j
              );
            let K = c.parse(O, W, A);
            if (!K) return null;
            (A = A || K.type), C.push([N, K]);
          }
          return we(A, ft) || we(A, At) || we(A, re) || we(A, H) || we(A, $(ft))
            ? new bn(A, p, y, w, C)
            : c.error(`Type ${ne(A)} is not interpolatable.`);
        }
        evaluate(s) {
          let c = this.labels,
            p = this.outputs;
          if (c.length === 1) return p[0].evaluate(s);
          let y = this.input.evaluate(s);
          if (y <= c[0]) return p[0].evaluate(s);
          let w = c.length;
          if (y >= c[w - 1]) return p[w - 1].evaluate(s);
          let k = uo(c, y),
            C = bn.interpolationFactor(this.interpolation, y, c[k], c[k + 1]),
            A = p[k].evaluate(s),
            P = p[k + 1].evaluate(s);
          switch (this.operator) {
            case "interpolate":
              return $n[this.type.kind](A, P, C);
            case "interpolate-hcl":
              return $n.color(A, P, C, "hcl");
            case "interpolate-lab":
              return $n.color(A, P, C, "lab");
          }
        }
        eachChild(s) {
          s(this.input);
          for (let c of this.outputs) s(c);
        }
        outputDefined() {
          return this.outputs.every((s) => s.outputDefined());
        }
      }
      function Ws(l, s, c, p) {
        let y = p - c,
          w = l - c;
        return y === 0
          ? 0
          : s === 1
          ? w / y
          : (Math.pow(s, w) - 1) / (Math.pow(s, y) - 1);
      }
      class $i {
        constructor(s, c) {
          (this.type = s), (this.args = c);
        }
        static parse(s, c) {
          if (s.length < 2)
            return c.error("Expectected at least one argument.");
          let p = null,
            y = c.expectedType;
          y && y.kind !== "value" && (p = y);
          let w = [];
          for (let C of s.slice(1)) {
            let A = c.parse(C, 1 + w.length, p, void 0, {
              typeAnnotation: "omit",
            });
            if (!A) return null;
            (p = p || A.type), w.push(A);
          }
          if (!p) throw new Error("No output type");
          let k = y && w.some((C) => xe(y, C.type));
          return new $i(k ? Pt : p, w);
        }
        evaluate(s) {
          let c,
            p = null,
            y = 0;
          for (let w of this.args)
            if (
              (y++,
              (p = w.evaluate(s)),
              p &&
                p instanceof Jn &&
                !p.available &&
                (c || (c = p.name),
                (p = null),
                y === this.args.length && (p = c)),
              p !== null)
            )
              break;
          return p;
        }
        eachChild(s) {
          this.args.forEach(s);
        }
        outputDefined() {
          return this.args.every((s) => s.outputDefined());
        }
      }
      class Da {
        constructor(s, c) {
          (this.type = c.type),
            (this.bindings = [].concat(s)),
            (this.result = c);
        }
        evaluate(s) {
          return this.result.evaluate(s);
        }
        eachChild(s) {
          for (let c of this.bindings) s(c[1]);
          s(this.result);
        }
        static parse(s, c) {
          if (s.length < 4)
            return c.error(
              `Expected at least 3 arguments, but found ${
                s.length - 1
              } instead.`
            );
          let p = [];
          for (let w = 1; w < s.length - 1; w += 2) {
            let k = s[w];
            if (typeof k != "string")
              return c.error(
                `Expected string, but found ${typeof k} instead.`,
                w
              );
            if (/[^a-zA-Z0-9_]/.test(k))
              return c.error(
                "Variable names must contain only alphanumeric characters or '_'.",
                w
              );
            let C = c.parse(s[w + 1], w + 1);
            if (!C) return null;
            p.push([k, C]);
          }
          let y = c.parse(s[s.length - 1], s.length - 1, c.expectedType, p);
          return y ? new Da(p, y) : null;
        }
        outputDefined() {
          return this.result.outputDefined();
        }
      }
      class wl {
        constructor(s, c, p) {
          (this.type = s), (this.index = c), (this.input = p);
        }
        static parse(s, c) {
          if (s.length !== 3)
            return c.error(
              `Expected 2 arguments, but found ${s.length - 1} instead.`
            );
          let p = c.parse(s[1], 1, ft),
            y = c.parse(s[2], 2, $(c.expectedType || Pt));
          return p && y ? new wl(y.type.itemType, p, y) : null;
        }
        evaluate(s) {
          let c = this.index.evaluate(s),
            p = this.input.evaluate(s);
          if (c < 0) throw new cr(`Array index out of bounds: ${c} < 0.`);
          if (c >= p.length)
            throw new cr(`Array index out of bounds: ${c} > ${p.length - 1}.`);
          if (c !== Math.floor(c))
            throw new cr(
              `Array index must be an integer, but found ${c} instead.`
            );
          return p[c];
        }
        eachChild(s) {
          s(this.index), s(this.input);
        }
        outputDefined() {
          return !1;
        }
      }
      class dc {
        constructor(s, c) {
          (this.type = Fe), (this.needle = s), (this.haystack = c);
        }
        static parse(s, c) {
          if (s.length !== 3)
            return c.error(
              `Expected 2 arguments, but found ${s.length - 1} instead.`
            );
          let p = c.parse(s[1], 1, Pt),
            y = c.parse(s[2], 2, Pt);
          return p && y
            ? ke(p.type, [Fe, Tt, ft, ko, Pt])
              ? new dc(p, y)
              : c.error(
                  `Expected first argument to be of type boolean, string, number or null, but found ${ne(
                    p.type
                  )} instead`
                )
            : null;
        }
        evaluate(s) {
          let c = this.needle.evaluate(s),
            p = this.haystack.evaluate(s);
          if (!p) return !1;
          if (!me(c, ["boolean", "string", "number", "null"]))
            throw new cr(
              `Expected first argument to be of type boolean, string, number or null, but found ${ne(
                ai(c)
              )} instead.`
            );
          if (!me(p, ["string", "array"]))
            throw new cr(
              `Expected second argument to be of type array or string, but found ${ne(
                ai(p)
              )} instead.`
            );
          return p.indexOf(c) >= 0;
        }
        eachChild(s) {
          s(this.needle), s(this.haystack);
        }
        outputDefined() {
          return !0;
        }
      }
      class kl {
        constructor(s, c, p) {
          (this.type = ft),
            (this.needle = s),
            (this.haystack = c),
            (this.fromIndex = p);
        }
        static parse(s, c) {
          if (s.length <= 2 || s.length >= 5)
            return c.error(
              `Expected 3 or 4 arguments, but found ${s.length - 1} instead.`
            );
          let p = c.parse(s[1], 1, Pt),
            y = c.parse(s[2], 2, Pt);
          if (!p || !y) return null;
          if (!ke(p.type, [Fe, Tt, ft, ko, Pt]))
            return c.error(
              `Expected first argument to be of type boolean, string, number or null, but found ${ne(
                p.type
              )} instead`
            );
          if (s.length === 4) {
            let w = c.parse(s[3], 3, ft);
            return w ? new kl(p, y, w) : null;
          }
          return new kl(p, y);
        }
        evaluate(s) {
          let c = this.needle.evaluate(s),
            p = this.haystack.evaluate(s);
          if (!me(c, ["boolean", "string", "number", "null"]))
            throw new cr(
              `Expected first argument to be of type boolean, string, number or null, but found ${ne(
                ai(c)
              )} instead.`
            );
          if (!me(p, ["string", "array"]))
            throw new cr(
              `Expected second argument to be of type array or string, but found ${ne(
                ai(p)
              )} instead.`
            );
          if (this.fromIndex) {
            let y = this.fromIndex.evaluate(s);
            return p.indexOf(c, y);
          }
          return p.indexOf(c);
        }
        eachChild(s) {
          s(this.needle), s(this.haystack), this.fromIndex && s(this.fromIndex);
        }
        outputDefined() {
          return !1;
        }
      }
      class Od {
        constructor(s, c, p, y, w, k) {
          (this.inputType = s),
            (this.type = c),
            (this.input = p),
            (this.cases = y),
            (this.outputs = w),
            (this.otherwise = k);
        }
        static parse(s, c) {
          if (s.length < 5)
            return c.error(
              `Expected at least 4 arguments, but found only ${s.length - 1}.`
            );
          if (s.length % 2 != 1)
            return c.error("Expected an even number of arguments.");
          let p, y;
          c.expectedType &&
            c.expectedType.kind !== "value" &&
            (y = c.expectedType);
          let w = {},
            k = [];
          for (let P = 2; P < s.length - 1; P += 2) {
            let N = s[P],
              O = s[P + 1];
            Array.isArray(N) || (N = [N]);
            let j = c.concat(P);
            if (N.length === 0)
              return j.error("Expected at least one branch label.");
            for (let K of N) {
              if (typeof K != "number" && typeof K != "string")
                return j.error("Branch labels must be numbers or strings.");
              if (typeof K == "number" && Math.abs(K) > Number.MAX_SAFE_INTEGER)
                return j.error(
                  `Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`
                );
              if (typeof K == "number" && Math.floor(K) !== K)
                return j.error("Numeric branch labels must be integer values.");
              if (p) {
                if (j.checkSubtype(p, ai(K))) return null;
              } else p = ai(K);
              if (w[String(K)] !== void 0)
                return j.error("Branch labels must be unique.");
              w[String(K)] = k.length;
            }
            let W = c.parse(O, P, y);
            if (!W) return null;
            (y = y || W.type), k.push(W);
          }
          let C = c.parse(s[1], 1, Pt);
          if (!C) return null;
          let A = c.parse(s[s.length - 1], s.length - 1, y);
          return A
            ? C.type.kind !== "value" && c.concat(1).checkSubtype(p, C.type)
              ? null
              : new Od(p, y, C, w, k, A)
            : null;
        }
        evaluate(s) {
          let c = this.input.evaluate(s);
          return (
            (ai(c) === this.inputType && this.outputs[this.cases[c]]) ||
            this.otherwise
          ).evaluate(s);
        }
        eachChild(s) {
          s(this.input), this.outputs.forEach(s), s(this.otherwise);
        }
        outputDefined() {
          return (
            this.outputs.every((s) => s.outputDefined()) &&
            this.otherwise.outputDefined()
          );
        }
      }
      class Bd {
        constructor(s, c, p) {
          (this.type = s), (this.branches = c), (this.otherwise = p);
        }
        static parse(s, c) {
          if (s.length < 4)
            return c.error(
              `Expected at least 3 arguments, but found only ${s.length - 1}.`
            );
          if (s.length % 2 != 0)
            return c.error("Expected an odd number of arguments.");
          let p;
          c.expectedType &&
            c.expectedType.kind !== "value" &&
            (p = c.expectedType);
          let y = [];
          for (let k = 1; k < s.length - 1; k += 2) {
            let C = c.parse(s[k], k, Fe);
            if (!C) return null;
            let A = c.parse(s[k + 1], k + 1, p);
            if (!A) return null;
            y.push([C, A]), (p = p || A.type);
          }
          let w = c.parse(s[s.length - 1], s.length - 1, p);
          if (!w) return null;
          if (!p) throw new Error("Can't infer output type");
          return new Bd(p, y, w);
        }
        evaluate(s) {
          for (let [c, p] of this.branches)
            if (c.evaluate(s)) return p.evaluate(s);
          return this.otherwise.evaluate(s);
        }
        eachChild(s) {
          for (let [c, p] of this.branches) s(c), s(p);
          s(this.otherwise);
        }
        outputDefined() {
          return (
            this.branches.every(([s, c]) => c.outputDefined()) &&
            this.otherwise.outputDefined()
          );
        }
      }
      class bu {
        constructor(s, c, p, y) {
          (this.type = s),
            (this.input = c),
            (this.beginIndex = p),
            (this.endIndex = y);
        }
        static parse(s, c) {
          if (s.length <= 2 || s.length >= 5)
            return c.error(
              `Expected 3 or 4 arguments, but found ${s.length - 1} instead.`
            );
          let p = c.parse(s[1], 1, Pt),
            y = c.parse(s[2], 2, ft);
          if (!p || !y) return null;
          if (!ke(p.type, [$(Pt), Tt, Pt]))
            return c.error(
              `Expected first argument to be of type array or string, but found ${ne(
                p.type
              )} instead`
            );
          if (s.length === 4) {
            let w = c.parse(s[3], 3, ft);
            return w ? new bu(p.type, p, y, w) : null;
          }
          return new bu(p.type, p, y);
        }
        evaluate(s) {
          let c = this.input.evaluate(s),
            p = this.beginIndex.evaluate(s);
          if (!me(c, ["string", "array"]))
            throw new cr(
              `Expected first argument to be of type array or string, but found ${ne(
                ai(c)
              )} instead.`
            );
          if (this.endIndex) {
            let y = this.endIndex.evaluate(s);
            return c.slice(p, y);
          }
          return c.slice(p);
        }
        eachChild(s) {
          s(this.input), s(this.beginIndex), this.endIndex && s(this.endIndex);
        }
        outputDefined() {
          return !1;
        }
      }
      function df(l, s) {
        return l === "==" || l === "!="
          ? s.kind === "boolean" ||
              s.kind === "string" ||
              s.kind === "number" ||
              s.kind === "null" ||
              s.kind === "value"
          : s.kind === "string" || s.kind === "number" || s.kind === "value";
      }
      function hf(l, s, c, p) {
        return p.compare(s, c) === 0;
      }
      function Sl(l, s, c) {
        let p = l !== "==" && l !== "!=";
        return class a7 {
          constructor(w, k, C) {
            (this.type = Fe),
              (this.lhs = w),
              (this.rhs = k),
              (this.collator = C),
              (this.hasUntypedArgument =
                w.type.kind === "value" || k.type.kind === "value");
          }
          static parse(w, k) {
            if (w.length !== 3 && w.length !== 4)
              return k.error("Expected two or three arguments.");
            let C = w[0],
              A = k.parse(w[1], 1, Pt);
            if (!A) return null;
            if (!df(C, A.type))
              return k
                .concat(1)
                .error(
                  `"${C}" comparisons are not supported for type '${ne(
                    A.type
                  )}'.`
                );
            let P = k.parse(w[2], 2, Pt);
            if (!P) return null;
            if (!df(C, P.type))
              return k
                .concat(2)
                .error(
                  `"${C}" comparisons are not supported for type '${ne(
                    P.type
                  )}'.`
                );
            if (
              A.type.kind !== P.type.kind &&
              A.type.kind !== "value" &&
              P.type.kind !== "value"
            )
              return k.error(
                `Cannot compare types '${ne(A.type)}' and '${ne(P.type)}'.`
              );
            p &&
              (A.type.kind === "value" && P.type.kind !== "value"
                ? (A = new on(P.type, [A]))
                : A.type.kind !== "value" &&
                  P.type.kind === "value" &&
                  (P = new on(A.type, [P])));
            let N = null;
            if (w.length === 4) {
              if (
                A.type.kind !== "string" &&
                P.type.kind !== "string" &&
                A.type.kind !== "value" &&
                P.type.kind !== "value"
              )
                return k.error(
                  "Cannot use collator to compare non-string types."
                );
              if (((N = k.parse(w[3], 3, yi)), !N)) return null;
            }
            return new a7(A, P, N);
          }
          evaluate(w) {
            let k = this.lhs.evaluate(w),
              C = this.rhs.evaluate(w);
            if (p && this.hasUntypedArgument) {
              let A = ai(k),
                P = ai(C);
              if (
                A.kind !== P.kind ||
                (A.kind !== "string" && A.kind !== "number")
              )
                throw new cr(
                  `Expected arguments for "${l}" to be (string, string) or (number, number), but found (${A.kind}, ${P.kind}) instead.`
                );
            }
            if (this.collator && !p && this.hasUntypedArgument) {
              let A = ai(k),
                P = ai(C);
              if (A.kind !== "string" || P.kind !== "string") return s(w, k, C);
            }
            return this.collator
              ? c(w, k, C, this.collator.evaluate(w))
              : s(w, k, C);
          }
          eachChild(w) {
            w(this.lhs), w(this.rhs), this.collator && w(this.collator);
          }
          outputDefined() {
            return !0;
          }
        };
      }
      let o1 = Sl(
          "==",
          function (l, s, c) {
            return s === c;
          },
          hf
        ),
        s1 = Sl(
          "!=",
          function (l, s, c) {
            return s !== c;
          },
          function (l, s, c, p) {
            return !hf(0, s, c, p);
          }
        ),
        a1 = Sl(
          "<",
          function (l, s, c) {
            return s < c;
          },
          function (l, s, c, p) {
            return p.compare(s, c) < 0;
          }
        ),
        l1 = Sl(
          ">",
          function (l, s, c) {
            return s > c;
          },
          function (l, s, c, p) {
            return p.compare(s, c) > 0;
          }
        ),
        c1 = Sl(
          "<=",
          function (l, s, c) {
            return s <= c;
          },
          function (l, s, c, p) {
            return p.compare(s, c) <= 0;
          }
        ),
        u1 = Sl(
          ">=",
          function (l, s, c) {
            return s >= c;
          },
          function (l, s, c, p) {
            return p.compare(s, c) >= 0;
          }
        );
      class Rd {
        constructor(s, c, p, y, w) {
          (this.type = Tt),
            (this.number = s),
            (this.locale = c),
            (this.currency = p),
            (this.minFractionDigits = y),
            (this.maxFractionDigits = w);
        }
        static parse(s, c) {
          if (s.length !== 3) return c.error("Expected two arguments.");
          let p = c.parse(s[1], 1, ft);
          if (!p) return null;
          let y = s[2];
          if (typeof y != "object" || Array.isArray(y))
            return c.error("NumberFormat options argument must be an object.");
          let w = null;
          if (y.locale && ((w = c.parse(y.locale, 1, Tt)), !w)) return null;
          let k = null;
          if (y.currency && ((k = c.parse(y.currency, 1, Tt)), !k)) return null;
          let C = null;
          if (
            y["min-fraction-digits"] &&
            ((C = c.parse(y["min-fraction-digits"], 1, ft)), !C)
          )
            return null;
          let A = null;
          return y["max-fraction-digits"] &&
            ((A = c.parse(y["max-fraction-digits"], 1, ft)), !A)
            ? null
            : new Rd(p, w, k, C, A);
        }
        evaluate(s) {
          return new Intl.NumberFormat(
            this.locale ? this.locale.evaluate(s) : [],
            {
              style: this.currency ? "currency" : "decimal",
              currency: this.currency ? this.currency.evaluate(s) : void 0,
              minimumFractionDigits: this.minFractionDigits
                ? this.minFractionDigits.evaluate(s)
                : void 0,
              maximumFractionDigits: this.maxFractionDigits
                ? this.maxFractionDigits.evaluate(s)
                : void 0,
            }
          ).format(this.number.evaluate(s));
        }
        eachChild(s) {
          s(this.number),
            this.locale && s(this.locale),
            this.currency && s(this.currency),
            this.minFractionDigits && s(this.minFractionDigits),
            this.maxFractionDigits && s(this.maxFractionDigits);
        }
        outputDefined() {
          return !1;
        }
      }
      class vu {
        constructor(s) {
          (this.type = Fi), (this.sections = s);
        }
        static parse(s, c) {
          if (s.length < 2) return c.error("Expected at least one argument.");
          let p = s[1];
          if (!Array.isArray(p) && typeof p == "object")
            return c.error("First argument must be an image or text section.");
          let y = [],
            w = !1;
          for (let k = 1; k <= s.length - 1; ++k) {
            let C = s[k];
            if (w && typeof C == "object" && !Array.isArray(C)) {
              w = !1;
              let A = null;
              if (
                C["font-scale"] &&
                ((A = c.parse(C["font-scale"], 1, ft)), !A)
              )
                return null;
              let P = null;
              if (
                C["text-font"] &&
                ((P = c.parse(C["text-font"], 1, $(Tt))), !P)
              )
                return null;
              let N = null;
              if (
                C["text-color"] &&
                ((N = c.parse(C["text-color"], 1, At)), !N)
              )
                return null;
              let O = y[y.length - 1];
              (O.scale = A), (O.font = P), (O.textColor = N);
            } else {
              let A = c.parse(s[k], 1, Pt);
              if (!A) return null;
              let P = A.type.kind;
              if (
                P !== "string" &&
                P !== "value" &&
                P !== "null" &&
                P !== "resolvedImage"
              )
                return c.error(
                  "Formatted text type must be 'string', 'value', 'image' or 'null'."
                );
              (w = !0),
                y.push({
                  content: A,
                  scale: null,
                  font: null,
                  textColor: null,
                });
            }
          }
          return new vu(y);
        }
        evaluate(s) {
          return new jn(
            this.sections.map((c) => {
              let p = c.content.evaluate(s);
              return ai(p) === V
                ? new Pa("", p, null, null, null)
                : new Pa(
                    fr(p),
                    null,
                    c.scale ? c.scale.evaluate(s) : null,
                    c.font ? c.font.evaluate(s).join(",") : null,
                    c.textColor ? c.textColor.evaluate(s) : null
                  );
            })
          );
        }
        eachChild(s) {
          for (let c of this.sections)
            s(c.content),
              c.scale && s(c.scale),
              c.font && s(c.font),
              c.textColor && s(c.textColor);
        }
        outputDefined() {
          return !1;
        }
      }
      class Ud {
        constructor(s) {
          (this.type = V), (this.input = s);
        }
        static parse(s, c) {
          if (s.length !== 2) return c.error("Expected two arguments.");
          let p = c.parse(s[1], 1, Tt);
          return p ? new Ud(p) : c.error("No image name provided.");
        }
        evaluate(s) {
          let c = this.input.evaluate(s),
            p = Jn.fromString(c);
          return (
            p &&
              s.availableImages &&
              (p.available = s.availableImages.indexOf(c) > -1),
            p
          );
        }
        eachChild(s) {
          s(this.input);
        }
        outputDefined() {
          return !1;
        }
      }
      class Vd {
        constructor(s) {
          (this.type = ft), (this.input = s);
        }
        static parse(s, c) {
          if (s.length !== 2)
            return c.error(
              `Expected 1 argument, but found ${s.length - 1} instead.`
            );
          let p = c.parse(s[1], 1);
          return p
            ? p.type.kind !== "array" &&
              p.type.kind !== "string" &&
              p.type.kind !== "value"
              ? c.error(
                  `Expected argument of type string or array, but found ${ne(
                    p.type
                  )} instead.`
                )
              : new Vd(p)
            : null;
        }
        evaluate(s) {
          let c = this.input.evaluate(s);
          if (typeof c == "string" || Array.isArray(c)) return c.length;
          throw new cr(
            `Expected value to be of type string or array, but found ${ne(
              ai(c)
            )} instead.`
          );
        }
        eachChild(s) {
          s(this.input);
        }
        outputDefined() {
          return !1;
        }
      }
      let Cl = {
        "==": o1,
        "!=": s1,
        ">": l1,
        "<": a1,
        ">=": u1,
        "<=": c1,
        array: on,
        at: wl,
        boolean: on,
        case: Bd,
        coalesce: $i,
        collator: X,
        format: vu,
        image: Ud,
        in: dc,
        "index-of": kl,
        interpolate: bn,
        "interpolate-hcl": bn,
        "interpolate-lab": bn,
        length: Vd,
        let: Da,
        literal: Lr,
        match: Od,
        number: on,
        "number-format": Rd,
        object: on,
        slice: bu,
        step: Eo,
        string: on,
        "to-boolean": Hn,
        "to-color": Hn,
        "to-number": Hn,
        "to-string": Hn,
        var: Co,
        within: _r,
      };
      function pf(l, [s, c, p, y]) {
        (s = s.evaluate(l)), (c = c.evaluate(l)), (p = p.evaluate(l));
        let w = y ? y.evaluate(l) : 1,
          k = xl(s, c, p, w);
        if (k) throw new cr(k);
        return new tr(s / 255, c / 255, p / 255, w, !1);
      }
      function ff(l, s) {
        return l in s;
      }
      function jd(l, s) {
        let c = s[l];
        return c === void 0 ? null : c;
      }
      function La(l) {
        return { type: l };
      }
      function mf(l) {
        return { result: "success", value: l };
      }
      function El(l) {
        return { result: "error", value: l };
      }
      function Tl(l) {
        return (
          l["property-type"] === "data-driven" ||
          l["property-type"] === "cross-faded-data-driven"
        );
      }
      function gf(l) {
        return !!l.expression && l.expression.parameters.indexOf("zoom") > -1;
      }
      function Hd(l) {
        return !!l.expression && l.expression.interpolated;
      }
      function ir(l) {
        return l instanceof Number
          ? "number"
          : l instanceof String
          ? "string"
          : l instanceof Boolean
          ? "boolean"
          : Array.isArray(l)
          ? "array"
          : l === null
          ? "null"
          : typeof l;
      }
      function Ml(l) {
        return typeof l == "object" && l !== null && !Array.isArray(l);
      }
      function d1(l) {
        return l;
      }
      function yf(l, s) {
        let c = s.type === "color",
          p = l.stops && typeof l.stops[0][0] == "object",
          y = p || !(p || l.property !== void 0),
          w = l.type || (Hd(s) ? "exponential" : "interval");
        if (c || s.type === "padding") {
          let N = c ? tr.parse : Pn.parse;
          (l = Pr({}, l)).stops &&
            (l.stops = l.stops.map((O) => [O[0], N(O[1])])),
            (l.default = N(l.default ? l.default : s.default));
        }
        if (
          l.colorSpace &&
          (k = l.colorSpace) !== "rgb" &&
          k !== "hcl" &&
          k !== "lab"
        )
          throw new Error(`Unknown color space: "${l.colorSpace}"`);
        var k;
        let C, A, P;
        if (w === "exponential") C = bf;
        else if (w === "interval") C = sn;
        else if (w === "categorical") {
          (C = h1), (A = Object.create(null));
          for (let N of l.stops) A[N[0]] = N[1];
          P = typeof l.stops[0][0];
        } else {
          if (w !== "identity") throw new Error(`Unknown function type "${w}"`);
          C = Gi;
        }
        if (p) {
          let N = {},
            O = [];
          for (let K = 0; K < l.stops.length; K++) {
            let ie = l.stops[K],
              ae = ie[0].zoom;
            N[ae] === void 0 &&
              ((N[ae] = {
                zoom: ae,
                type: l.type,
                property: l.property,
                default: l.default,
                stops: [],
              }),
              O.push(ae)),
              N[ae].stops.push([ie[0].value, ie[1]]);
          }
          let j = [];
          for (let K of O) j.push([N[K].zoom, yf(N[K], s)]);
          let W = { name: "linear" };
          return {
            kind: "composite",
            interpolationType: W,
            interpolationFactor: bn.interpolationFactor.bind(void 0, W),
            zoomStops: j.map((K) => K[0]),
            evaluate: ({ zoom: K }, ie) =>
              bf({ stops: j, base: l.base }, s, K).evaluate(K, ie),
          };
        }
        if (y) {
          let N =
            w === "exponential"
              ? { name: "exponential", base: l.base !== void 0 ? l.base : 1 }
              : null;
          return {
            kind: "camera",
            interpolationType: N,
            interpolationFactor: bn.interpolationFactor.bind(void 0, N),
            zoomStops: l.stops.map((O) => O[0]),
            evaluate: ({ zoom: O }) => C(l, s, O, A, P),
          };
        }
        return {
          kind: "source",
          evaluate(N, O) {
            let j = O && O.properties ? O.properties[l.property] : void 0;
            return j === void 0 ? hc(l.default, s.default) : C(l, s, j, A, P);
          },
        };
      }
      function hc(l, s, c) {
        return l !== void 0 ? l : s !== void 0 ? s : c !== void 0 ? c : void 0;
      }
      function h1(l, s, c, p, y) {
        return hc(typeof c === y ? p[c] : void 0, l.default, s.default);
      }
      function sn(l, s, c) {
        if (ir(c) !== "number") return hc(l.default, s.default);
        let p = l.stops.length;
        if (p === 1 || c <= l.stops[0][0]) return l.stops[0][1];
        if (c >= l.stops[p - 1][0]) return l.stops[p - 1][1];
        let y = uo(
          l.stops.map((w) => w[0]),
          c
        );
        return l.stops[y][1];
      }
      function bf(l, s, c) {
        let p = l.base !== void 0 ? l.base : 1;
        if (ir(c) !== "number") return hc(l.default, s.default);
        let y = l.stops.length;
        if (y === 1 || c <= l.stops[0][0]) return l.stops[0][1];
        if (c >= l.stops[y - 1][0]) return l.stops[y - 1][1];
        let w = uo(
            l.stops.map((N) => N[0]),
            c
          ),
          k = (function (N, O, j, W) {
            let K = W - j,
              ie = N - j;
            return K === 0
              ? 0
              : O === 1
              ? ie / K
              : (Math.pow(O, ie) - 1) / (Math.pow(O, K) - 1);
          })(c, p, l.stops[w][0], l.stops[w + 1][0]),
          C = l.stops[w][1],
          A = l.stops[w + 1][1],
          P = $n[s.type] || d1;
        return typeof C.evaluate == "function"
          ? {
              evaluate(...N) {
                let O = C.evaluate.apply(void 0, N),
                  j = A.evaluate.apply(void 0, N);
                if (O !== void 0 && j !== void 0)
                  return P(O, j, k, l.colorSpace);
              },
            }
          : P(C, A, k, l.colorSpace);
      }
      function Gi(l, s, c) {
        switch (s.type) {
          case "color":
            c = tr.parse(c);
            break;
          case "formatted":
            c = jn.fromString(c.toString());
            break;
          case "resolvedImage":
            c = Jn.fromString(c.toString());
            break;
          case "padding":
            c = Pn.parse(c);
            break;
          default:
            ir(c) === s.type ||
              (s.type === "enum" && s.values[c]) ||
              (c = void 0);
        }
        return hc(c, l.default, s.default);
      }
      Tr.register(Cl, {
        error: [
          { kind: "error" },
          [Tt],
          (l, [s]) => {
            throw new cr(s.evaluate(l));
          },
        ],
        typeof: [Tt, [Pt], (l, [s]) => ne(ai(s.evaluate(l)))],
        "to-rgba": [
          $(ft, 4),
          [At],
          (l, [s]) => {
            let [c, p, y, w] = s.evaluate(l).rgb;
            return [255 * c, 255 * p, 255 * y, w];
          },
        ],
        rgb: [At, [ft, ft, ft], pf],
        rgba: [At, [ft, ft, ft, ft], pf],
        has: {
          type: Fe,
          overloads: [
            [[Tt], (l, [s]) => ff(s.evaluate(l), l.properties())],
            [[Tt, $t], (l, [s, c]) => ff(s.evaluate(l), c.evaluate(l))],
          ],
        },
        get: {
          type: Pt,
          overloads: [
            [[Tt], (l, [s]) => jd(s.evaluate(l), l.properties())],
            [[Tt, $t], (l, [s, c]) => jd(s.evaluate(l), c.evaluate(l))],
          ],
        },
        "feature-state": [
          Pt,
          [Tt],
          (l, [s]) => jd(s.evaluate(l), l.featureState || {}),
        ],
        properties: [$t, [], (l) => l.properties()],
        "geometry-type": [Tt, [], (l) => l.geometryType()],
        id: [Pt, [], (l) => l.id()],
        zoom: [ft, [], (l) => l.globals.zoom],
        "heatmap-density": [ft, [], (l) => l.globals.heatmapDensity || 0],
        "line-progress": [ft, [], (l) => l.globals.lineProgress || 0],
        accumulated: [
          Pt,
          [],
          (l) =>
            l.globals.accumulated === void 0 ? null : l.globals.accumulated,
        ],
        "+": [
          ft,
          La(ft),
          (l, s) => {
            let c = 0;
            for (let p of s) c += p.evaluate(l);
            return c;
          },
        ],
        "*": [
          ft,
          La(ft),
          (l, s) => {
            let c = 1;
            for (let p of s) c *= p.evaluate(l);
            return c;
          },
        ],
        "-": {
          type: ft,
          overloads: [
            [[ft, ft], (l, [s, c]) => s.evaluate(l) - c.evaluate(l)],
            [[ft], (l, [s]) => -s.evaluate(l)],
          ],
        },
        "/": [ft, [ft, ft], (l, [s, c]) => s.evaluate(l) / c.evaluate(l)],
        "%": [ft, [ft, ft], (l, [s, c]) => s.evaluate(l) % c.evaluate(l)],
        ln2: [ft, [], () => Math.LN2],
        pi: [ft, [], () => Math.PI],
        e: [ft, [], () => Math.E],
        "^": [
          ft,
          [ft, ft],
          (l, [s, c]) => Math.pow(s.evaluate(l), c.evaluate(l)),
        ],
        sqrt: [ft, [ft], (l, [s]) => Math.sqrt(s.evaluate(l))],
        log10: [ft, [ft], (l, [s]) => Math.log(s.evaluate(l)) / Math.LN10],
        ln: [ft, [ft], (l, [s]) => Math.log(s.evaluate(l))],
        log2: [ft, [ft], (l, [s]) => Math.log(s.evaluate(l)) / Math.LN2],
        sin: [ft, [ft], (l, [s]) => Math.sin(s.evaluate(l))],
        cos: [ft, [ft], (l, [s]) => Math.cos(s.evaluate(l))],
        tan: [ft, [ft], (l, [s]) => Math.tan(s.evaluate(l))],
        asin: [ft, [ft], (l, [s]) => Math.asin(s.evaluate(l))],
        acos: [ft, [ft], (l, [s]) => Math.acos(s.evaluate(l))],
        atan: [ft, [ft], (l, [s]) => Math.atan(s.evaluate(l))],
        min: [ft, La(ft), (l, s) => Math.min(...s.map((c) => c.evaluate(l)))],
        max: [ft, La(ft), (l, s) => Math.max(...s.map((c) => c.evaluate(l)))],
        abs: [ft, [ft], (l, [s]) => Math.abs(s.evaluate(l))],
        round: [
          ft,
          [ft],
          (l, [s]) => {
            let c = s.evaluate(l);
            return c < 0 ? -Math.round(-c) : Math.round(c);
          },
        ],
        floor: [ft, [ft], (l, [s]) => Math.floor(s.evaluate(l))],
        ceil: [ft, [ft], (l, [s]) => Math.ceil(s.evaluate(l))],
        "filter-==": [
          Fe,
          [Tt, Pt],
          (l, [s, c]) => l.properties()[s.value] === c.value,
        ],
        "filter-id-==": [Fe, [Pt], (l, [s]) => l.id() === s.value],
        "filter-type-==": [Fe, [Tt], (l, [s]) => l.geometryType() === s.value],
        "filter-<": [
          Fe,
          [Tt, Pt],
          (l, [s, c]) => {
            let p = l.properties()[s.value],
              y = c.value;
            return typeof p == typeof y && p < y;
          },
        ],
        "filter-id-<": [
          Fe,
          [Pt],
          (l, [s]) => {
            let c = l.id(),
              p = s.value;
            return typeof c == typeof p && c < p;
          },
        ],
        "filter->": [
          Fe,
          [Tt, Pt],
          (l, [s, c]) => {
            let p = l.properties()[s.value],
              y = c.value;
            return typeof p == typeof y && p > y;
          },
        ],
        "filter-id->": [
          Fe,
          [Pt],
          (l, [s]) => {
            let c = l.id(),
              p = s.value;
            return typeof c == typeof p && c > p;
          },
        ],
        "filter-<=": [
          Fe,
          [Tt, Pt],
          (l, [s, c]) => {
            let p = l.properties()[s.value],
              y = c.value;
            return typeof p == typeof y && p <= y;
          },
        ],
        "filter-id-<=": [
          Fe,
          [Pt],
          (l, [s]) => {
            let c = l.id(),
              p = s.value;
            return typeof c == typeof p && c <= p;
          },
        ],
        "filter->=": [
          Fe,
          [Tt, Pt],
          (l, [s, c]) => {
            let p = l.properties()[s.value],
              y = c.value;
            return typeof p == typeof y && p >= y;
          },
        ],
        "filter-id->=": [
          Fe,
          [Pt],
          (l, [s]) => {
            let c = l.id(),
              p = s.value;
            return typeof c == typeof p && c >= p;
          },
        ],
        "filter-has": [Fe, [Pt], (l, [s]) => s.value in l.properties()],
        "filter-has-id": [Fe, [], (l) => l.id() !== null && l.id() !== void 0],
        "filter-type-in": [
          Fe,
          [$(Tt)],
          (l, [s]) => s.value.indexOf(l.geometryType()) >= 0,
        ],
        "filter-id-in": [Fe, [$(Pt)], (l, [s]) => s.value.indexOf(l.id()) >= 0],
        "filter-in-small": [
          Fe,
          [Tt, $(Pt)],
          (l, [s, c]) => c.value.indexOf(l.properties()[s.value]) >= 0,
        ],
        "filter-in-large": [
          Fe,
          [Tt, $(Pt)],
          (l, [s, c]) =>
            (function (p, y, w, k) {
              for (; w <= k; ) {
                let C = (w + k) >> 1;
                if (y[C] === p) return !0;
                y[C] > p ? (k = C - 1) : (w = C + 1);
              }
              return !1;
            })(l.properties()[s.value], c.value, 0, c.value.length - 1),
        ],
        all: {
          type: Fe,
          overloads: [
            [[Fe, Fe], (l, [s, c]) => s.evaluate(l) && c.evaluate(l)],
            [
              La(Fe),
              (l, s) => {
                for (let c of s) if (!c.evaluate(l)) return !1;
                return !0;
              },
            ],
          ],
        },
        any: {
          type: Fe,
          overloads: [
            [[Fe, Fe], (l, [s, c]) => s.evaluate(l) || c.evaluate(l)],
            [
              La(Fe),
              (l, s) => {
                for (let c of s) if (c.evaluate(l)) return !0;
                return !1;
              },
            ],
          ],
        },
        "!": [Fe, [Fe], (l, [s]) => !s.evaluate(l)],
        "is-supported-script": [
          Fe,
          [Tt],
          (l, [s]) => {
            let c = l.globals && l.globals.isSupportedScript;
            return !c || c(s.evaluate(l));
          },
        ],
        upcase: [Tt, [Tt], (l, [s]) => s.evaluate(l).toUpperCase()],
        downcase: [Tt, [Tt], (l, [s]) => s.evaluate(l).toLowerCase()],
        concat: [
          Tt,
          La(Pt),
          (l, s) => s.map((c) => fr(c.evaluate(l))).join(""),
        ],
        "resolved-locale": [
          Tt,
          [yi],
          (l, [s]) => s.evaluate(l).resolvedLocale(),
        ],
      });
      class pc {
        constructor(s, c) {
          var p;
          (this.expression = s),
            (this._warningHistory = {}),
            (this._evaluator = new ue()),
            (this._defaultValue = c
              ? (p = c).type === "color" && Ml(p.default)
                ? new tr(0, 0, 0, 0)
                : p.type === "color"
                ? tr.parse(p.default) || null
                : p.type === "padding"
                ? Pn.parse(p.default) || null
                : p.type === "variableAnchorOffsetCollection"
                ? dn.parse(p.default) || null
                : p.default === void 0
                ? null
                : p.default
              : null),
            (this._enumValues = c && c.type === "enum" ? c.values : null);
        }
        evaluateWithoutErrorHandling(s, c, p, y, w, k) {
          return (
            (this._evaluator.globals = s),
            (this._evaluator.feature = c),
            (this._evaluator.featureState = p),
            (this._evaluator.canonical = y),
            (this._evaluator.availableImages = w || null),
            (this._evaluator.formattedSection = k),
            this.expression.evaluate(this._evaluator)
          );
        }
        evaluate(s, c, p, y, w, k) {
          (this._evaluator.globals = s),
            (this._evaluator.feature = c || null),
            (this._evaluator.featureState = p || null),
            (this._evaluator.canonical = y),
            (this._evaluator.availableImages = w || null),
            (this._evaluator.formattedSection = k || null);
          try {
            let C = this.expression.evaluate(this._evaluator);
            if (C == null || (typeof C == "number" && C != C))
              return this._defaultValue;
            if (this._enumValues && !(C in this._enumValues))
              throw new cr(
                `Expected value to be one of ${Object.keys(this._enumValues)
                  .map((A) => JSON.stringify(A))
                  .join(", ")}, but found ${JSON.stringify(C)} instead.`
              );
            return C;
          } catch (C) {
            return (
              this._warningHistory[C.message] ||
                ((this._warningHistory[C.message] = !0),
                typeof console < "u" && console.warn(C.message)),
              this._defaultValue
            );
          }
        }
      }
      function Sr(l) {
        return (
          Array.isArray(l) &&
          l.length > 0 &&
          typeof l[0] == "string" &&
          l[0] in Cl
        );
      }
      function xr(l, s) {
        let c = new R(
            Cl,
            wt,
            [],
            s
              ? (function (y) {
                  let w = {
                    color: At,
                    string: Tt,
                    number: ft,
                    enum: Tt,
                    boolean: Fe,
                    formatted: Fi,
                    padding: re,
                    resolvedImage: V,
                    variableAnchorOffsetCollection: H,
                  };
                  return y.type === "array"
                    ? $(w[y.value] || Pt, y.length)
                    : w[y.type];
                })(s)
              : void 0
          ),
          p = c.parse(
            l,
            void 0,
            void 0,
            void 0,
            s && s.type === "string" ? { typeAnnotation: "coerce" } : void 0
          );
        return p ? mf(new pc(p, s)) : El(c.errors);
      }
      class Al {
        constructor(s, c) {
          (this.kind = s),
            (this._styleExpression = c),
            (this.isStateDependent = s !== "constant" && !Fr(c.expression));
        }
        evaluateWithoutErrorHandling(s, c, p, y, w, k) {
          return this._styleExpression.evaluateWithoutErrorHandling(
            s,
            c,
            p,
            y,
            w,
            k
          );
        }
        evaluate(s, c, p, y, w, k) {
          return this._styleExpression.evaluate(s, c, p, y, w, k);
        }
      }
      class _u {
        constructor(s, c, p, y) {
          (this.kind = s),
            (this.zoomStops = p),
            (this._styleExpression = c),
            (this.isStateDependent = s !== "camera" && !Fr(c.expression)),
            (this.interpolationType = y);
        }
        evaluateWithoutErrorHandling(s, c, p, y, w, k) {
          return this._styleExpression.evaluateWithoutErrorHandling(
            s,
            c,
            p,
            y,
            w,
            k
          );
        }
        evaluate(s, c, p, y, w, k) {
          return this._styleExpression.evaluate(s, c, p, y, w, k);
        }
        interpolationFactor(s, c, p) {
          return this.interpolationType
            ? bn.interpolationFactor(this.interpolationType, s, c, p)
            : 0;
        }
      }
      function vf(l, s) {
        let c = xr(l, s);
        if (c.result === "error") return c;
        let p = c.value.expression,
          y = Ki(p);
        if (!y && !Tl(s))
          return El([new Dr("", "data expressions not supported")]);
        let w = qn(p, ["zoom"]);
        if (!w && !gf(s))
          return El([new Dr("", "zoom expressions not supported")]);
        let k = wu(p);
        return k || w
          ? k instanceof Dr
            ? El([k])
            : k instanceof bn && !Hd(s)
            ? El([
                new Dr(
                  "",
                  '"interpolate" expressions cannot be used with this property'
                ),
              ])
            : mf(
                k
                  ? new _u(
                      y ? "camera" : "composite",
                      c.value,
                      k.labels,
                      k instanceof bn ? k.interpolation : void 0
                    )
                  : new Al(y ? "constant" : "source", c.value)
              )
          : El([
              new Dr(
                "",
                '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'
              ),
            ]);
      }
      class xu {
        constructor(s, c) {
          (this._parameters = s),
            (this._specification = c),
            Pr(this, yf(this._parameters, this._specification));
        }
        static deserialize(s) {
          return new xu(s._parameters, s._specification);
        }
        static serialize(s) {
          return {
            _parameters: s._parameters,
            _specification: s._specification,
          };
        }
      }
      function wu(l) {
        let s = null;
        if (l instanceof Da) s = wu(l.result);
        else if (l instanceof $i) {
          for (let c of l.args) if (((s = wu(c)), s)) break;
        } else
          (l instanceof Eo || l instanceof bn) &&
            l.input instanceof Tr &&
            l.input.name === "zoom" &&
            (s = l);
        return (
          s instanceof Dr ||
            l.eachChild((c) => {
              let p = wu(c);
              p instanceof Dr
                ? (s = p)
                : !s && p
                ? (s = new Dr(
                    "",
                    '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'
                  ))
                : s &&
                  p &&
                  s !== p &&
                  (s = new Dr(
                    "",
                    'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'
                  ));
            }),
          s
        );
      }
      function qd(l) {
        if (l === !0 || l === !1) return !0;
        if (!Array.isArray(l) || l.length === 0) return !1;
        switch (l[0]) {
          case "has":
            return l.length >= 2 && l[1] !== "$id" && l[1] !== "$type";
          case "in":
            return (
              l.length >= 3 && (typeof l[1] != "string" || Array.isArray(l[2]))
            );
          case "!in":
          case "!has":
          case "none":
            return !1;
          case "==":
          case "!=":
          case ">":
          case ">=":
          case "<":
          case "<=":
            return l.length !== 3 || Array.isArray(l[1]) || Array.isArray(l[2]);
          case "any":
          case "all":
            for (let s of l.slice(1))
              if (!qd(s) && typeof s != "boolean") return !1;
            return !0;
          default:
            return !0;
        }
      }
      let _f = {
        type: "boolean",
        default: !1,
        transition: !1,
        "property-type": "data-driven",
        expression: { interpolated: !1, parameters: ["zoom", "feature"] },
      };
      function ku(l) {
        if (l == null) return { filter: () => !0, needGeometry: !1 };
        qd(l) || (l = Il(l));
        let s = xr(l, _f);
        if (s.result === "error")
          throw new Error(
            s.value.map((c) => `${c.key}: ${c.message}`).join(", ")
          );
        return {
          filter: (c, p, y) => s.value.evaluate(c, p, {}, y),
          needGeometry: $d(l),
        };
      }
      function xf(l, s) {
        return l < s ? -1 : l > s ? 1 : 0;
      }
      function $d(l) {
        if (!Array.isArray(l)) return !1;
        if (l[0] === "within") return !0;
        for (let s = 1; s < l.length; s++) if ($d(l[s])) return !0;
        return !1;
      }
      function Il(l) {
        if (!l) return !0;
        let s = l[0];
        return l.length <= 1
          ? s !== "any"
          : s === "=="
          ? Qd(l[1], l[2], "==")
          : s === "!="
          ? Su(Qd(l[1], l[2], "=="))
          : s === "<" || s === ">" || s === "<=" || s === ">="
          ? Qd(l[1], l[2], s)
          : s === "any"
          ? ((c = l.slice(1)), ["any"].concat(c.map(Il)))
          : s === "all"
          ? ["all"].concat(l.slice(1).map(Il))
          : s === "none"
          ? ["all"].concat(l.slice(1).map(Il).map(Su))
          : s === "in"
          ? wf(l[1], l.slice(2))
          : s === "!in"
          ? Su(wf(l[1], l.slice(2)))
          : s === "has"
          ? kf(l[1])
          : s === "!has"
          ? Su(kf(l[1]))
          : s !== "within" || l;
        var c;
      }
      function Qd(l, s, c) {
        switch (l) {
          case "$type":
            return [`filter-type-${c}`, s];
          case "$id":
            return [`filter-id-${c}`, s];
          default:
            return [`filter-${c}`, l, s];
        }
      }
      function wf(l, s) {
        if (s.length === 0) return !1;
        switch (l) {
          case "$type":
            return ["filter-type-in", ["literal", s]];
          case "$id":
            return ["filter-id-in", ["literal", s]];
          default:
            return s.length > 200 && !s.some((c) => typeof c != typeof s[0])
              ? ["filter-in-large", l, ["literal", s.sort(xf)]]
              : ["filter-in-small", l, ["literal", s]];
        }
      }
      function kf(l) {
        switch (l) {
          case "$type":
            return !0;
          case "$id":
            return ["filter-has-id"];
          default:
            return ["filter-has", l];
        }
      }
      function Su(l) {
        return ["!", l];
      }
      function Gd(l) {
        let s = typeof l;
        if (s === "number" || s === "boolean" || s === "string" || l == null)
          return JSON.stringify(l);
        if (Array.isArray(l)) {
          let y = "[";
          for (let w of l) y += `${Gd(w)},`;
          return `${y}]`;
        }
        let c = Object.keys(l).sort(),
          p = "{";
        for (let y = 0; y < c.length; y++)
          p += `${JSON.stringify(c[y])}:${Gd(l[c[y]])},`;
        return `${p}}`;
      }
      function p1(l) {
        let s = "";
        for (let c of Si) s += `/${Gd(l[c])}`;
        return s;
      }
      function Sf(l) {
        let s = l.value;
        return s
          ? [new at(l.key, s, "constants have been deprecated as of v8")]
          : [];
      }
      function Jr(l) {
        return l instanceof Number ||
          l instanceof String ||
          l instanceof Boolean
          ? l.valueOf()
          : l;
      }
      function pa(l) {
        if (Array.isArray(l)) return l.map(pa);
        if (
          l instanceof Object &&
          !(l instanceof Number || l instanceof String || l instanceof Boolean)
        ) {
          let s = {};
          for (let c in l) s[c] = pa(l[c]);
          return s;
        }
        return Jr(l);
      }
      function $o(l) {
        let s = l.key,
          c = l.value,
          p = l.valueSpec || {},
          y = l.objectElementValidators || {},
          w = l.style,
          k = l.styleSpec,
          C = l.validateSpec,
          A = [],
          P = ir(c);
        if (P !== "object")
          return [new at(s, c, `object expected, ${P} found`)];
        for (let N in c) {
          let O = N.split(".")[0],
            j = p[O] || p["*"],
            W;
          if (y[O]) W = y[O];
          else if (p[O]) W = C;
          else if (y["*"]) W = y["*"];
          else {
            if (!p["*"]) {
              A.push(new at(s, c[N], `unknown property "${N}"`));
              continue;
            }
            W = C;
          }
          A = A.concat(
            W(
              {
                key: (s && `${s}.`) + N,
                value: c[N],
                valueSpec: j,
                style: w,
                styleSpec: k,
                object: c,
                objectKey: N,
                validateSpec: C,
              },
              c
            )
          );
        }
        for (let N in p)
          y[N] ||
            (p[N].required &&
              p[N].default === void 0 &&
              c[N] === void 0 &&
              A.push(new at(s, c, `missing required property "${N}"`)));
        return A;
      }
      function Pl(l) {
        let s = l.value,
          c = l.valueSpec,
          p = l.style,
          y = l.styleSpec,
          w = l.key,
          k = l.arrayElementValidator || l.validateSpec;
        if (ir(s) !== "array")
          return [new at(w, s, `array expected, ${ir(s)} found`)];
        if (c.length && s.length !== c.length)
          return [
            new at(
              w,
              s,
              `array length ${c.length} expected, length ${s.length} found`
            ),
          ];
        if (c["min-length"] && s.length < c["min-length"])
          return [
            new at(
              w,
              s,
              `array length at least ${c["min-length"]} expected, length ${s.length} found`
            ),
          ];
        let C = { type: c.value, values: c.values };
        y.$version < 7 && (C.function = c.function),
          ir(c.value) === "object" && (C = c.value);
        let A = [];
        for (let P = 0; P < s.length; P++)
          A = A.concat(
            k({
              array: s,
              arrayIndex: P,
              value: s[P],
              valueSpec: C,
              validateSpec: l.validateSpec,
              style: p,
              styleSpec: y,
              key: `${w}[${P}]`,
            })
          );
        return A;
      }
      function Wd(l) {
        let s = l.key,
          c = l.value,
          p = l.valueSpec,
          y = ir(c);
        return (
          y === "number" && c != c && (y = "NaN"),
          y !== "number"
            ? [new at(s, c, `number expected, ${y} found`)]
            : "minimum" in p && c < p.minimum
            ? [new at(s, c, `${c} is less than the minimum value ${p.minimum}`)]
            : "maximum" in p && c > p.maximum
            ? [
                new at(
                  s,
                  c,
                  `${c} is greater than the maximum value ${p.maximum}`
                ),
              ]
            : []
        );
      }
      function Zd(l) {
        let s = l.valueSpec,
          c = Jr(l.value.type),
          p,
          y,
          w,
          k = {},
          C = c !== "categorical" && l.value.property === void 0,
          A = !C,
          P =
            ir(l.value.stops) === "array" &&
            ir(l.value.stops[0]) === "array" &&
            ir(l.value.stops[0][0]) === "object",
          N = $o({
            key: l.key,
            value: l.value,
            valueSpec: l.styleSpec.function,
            validateSpec: l.validateSpec,
            style: l.style,
            styleSpec: l.styleSpec,
            objectElementValidators: {
              stops: function (W) {
                if (c === "identity")
                  return [
                    new at(
                      W.key,
                      W.value,
                      'identity function may not have a "stops" property'
                    ),
                  ];
                let K = [],
                  ie = W.value;
                return (
                  (K = K.concat(
                    Pl({
                      key: W.key,
                      value: ie,
                      valueSpec: W.valueSpec,
                      validateSpec: W.validateSpec,
                      style: W.style,
                      styleSpec: W.styleSpec,
                      arrayElementValidator: O,
                    })
                  )),
                  ir(ie) === "array" &&
                    ie.length === 0 &&
                    K.push(
                      new at(W.key, ie, "array must have at least one stop")
                    ),
                  K
                );
              },
              default: function (W) {
                return W.validateSpec({
                  key: W.key,
                  value: W.value,
                  valueSpec: s,
                  validateSpec: W.validateSpec,
                  style: W.style,
                  styleSpec: W.styleSpec,
                });
              },
            },
          });
        return (
          c === "identity" &&
            C &&
            N.push(
              new at(l.key, l.value, 'missing required property "property"')
            ),
          c === "identity" ||
            l.value.stops ||
            N.push(new at(l.key, l.value, 'missing required property "stops"')),
          c === "exponential" &&
            l.valueSpec.expression &&
            !Hd(l.valueSpec) &&
            N.push(
              new at(l.key, l.value, "exponential functions not supported")
            ),
          l.styleSpec.$version >= 8 &&
            (A && !Tl(l.valueSpec)
              ? N.push(
                  new at(l.key, l.value, "property functions not supported")
                )
              : C &&
                !gf(l.valueSpec) &&
                N.push(new at(l.key, l.value, "zoom functions not supported"))),
          (c !== "categorical" && !P) ||
            l.value.property !== void 0 ||
            N.push(new at(l.key, l.value, '"property" property is required')),
          N
        );
        function O(W) {
          let K = [],
            ie = W.value,
            ae = W.key;
          if (ir(ie) !== "array")
            return [new at(ae, ie, `array expected, ${ir(ie)} found`)];
          if (ie.length !== 2)
            return [
              new at(
                ae,
                ie,
                `array length 2 expected, length ${ie.length} found`
              ),
            ];
          if (P) {
            if (ir(ie[0]) !== "object")
              return [new at(ae, ie, `object expected, ${ir(ie[0])} found`)];
            if (ie[0].zoom === void 0)
              return [new at(ae, ie, "object stop key must have zoom")];
            if (ie[0].value === void 0)
              return [new at(ae, ie, "object stop key must have value")];
            if (w && w > Jr(ie[0].zoom))
              return [
                new at(
                  ae,
                  ie[0].zoom,
                  "stop zoom values must appear in ascending order"
                ),
              ];
            Jr(ie[0].zoom) !== w &&
              ((w = Jr(ie[0].zoom)), (y = void 0), (k = {})),
              (K = K.concat(
                $o({
                  key: `${ae}[0]`,
                  value: ie[0],
                  valueSpec: { zoom: {} },
                  validateSpec: W.validateSpec,
                  style: W.style,
                  styleSpec: W.styleSpec,
                  objectElementValidators: { zoom: Wd, value: j },
                })
              ));
          } else K = K.concat(j({ key: `${ae}[0]`, value: ie[0], valueSpec: {}, validateSpec: W.validateSpec, style: W.style, styleSpec: W.styleSpec }, ie));
          return Sr(pa(ie[1]))
            ? K.concat([
                new at(
                  `${ae}[1]`,
                  ie[1],
                  "expressions are not allowed in function stops."
                ),
              ])
            : K.concat(
                W.validateSpec({
                  key: `${ae}[1]`,
                  value: ie[1],
                  valueSpec: s,
                  validateSpec: W.validateSpec,
                  style: W.style,
                  styleSpec: W.styleSpec,
                })
              );
        }
        function j(W, K) {
          let ie = ir(W.value),
            ae = Jr(W.value),
            pe = W.value !== null ? W.value : K;
          if (p) {
            if (ie !== p)
              return [
                new at(
                  W.key,
                  pe,
                  `${ie} stop domain type must match previous stop domain type ${p}`
                ),
              ];
          } else p = ie;
          if (ie !== "number" && ie !== "string" && ie !== "boolean")
            return [
              new at(
                W.key,
                pe,
                "stop domain value must be a number, string, or boolean"
              ),
            ];
          if (ie !== "number" && c !== "categorical") {
            let Pe = `number expected, ${ie} found`;
            return (
              Tl(s) &&
                c === void 0 &&
                (Pe +=
                  '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),
              [new at(W.key, pe, Pe)]
            );
          }
          return c !== "categorical" ||
            ie !== "number" ||
            (isFinite(ae) && Math.floor(ae) === ae)
            ? c !== "categorical" && ie === "number" && y !== void 0 && ae < y
              ? [
                  new at(
                    W.key,
                    pe,
                    "stop domain values must appear in ascending order"
                  ),
                ]
              : ((y = ae),
                c === "categorical" && ae in k
                  ? [new at(W.key, pe, "stop domain values must be unique")]
                  : ((k[ae] = !0), []))
            : [new at(W.key, pe, `integer expected, found ${ae}`)];
        }
      }
      function Dl(l) {
        let s = (l.expressionContext === "property" ? vf : xr)(
          pa(l.value),
          l.valueSpec
        );
        if (s.result === "error")
          return s.value.map(
            (p) => new at(`${l.key}${p.key}`, l.value, p.message)
          );
        let c = s.value.expression || s.value._styleExpression.expression;
        if (
          l.expressionContext === "property" &&
          l.propertyKey === "text-font" &&
          !c.outputDefined()
        )
          return [
            new at(
              l.key,
              l.value,
              `Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`
            ),
          ];
        if (
          l.expressionContext === "property" &&
          l.propertyType === "layout" &&
          !Fr(c)
        )
          return [
            new at(
              l.key,
              l.value,
              '"feature-state" data expressions are not supported with layout properties.'
            ),
          ];
        if (l.expressionContext === "filter" && !Fr(c))
          return [
            new at(
              l.key,
              l.value,
              '"feature-state" data expressions are not supported with filters.'
            ),
          ];
        if (
          l.expressionContext &&
          l.expressionContext.indexOf("cluster") === 0
        ) {
          if (!qn(c, ["zoom", "feature-state"]))
            return [
              new at(
                l.key,
                l.value,
                '"zoom" and "feature-state" expressions are not supported with cluster properties.'
              ),
            ];
          if (l.expressionContext === "cluster-initial" && !Ki(c))
            return [
              new at(
                l.key,
                l.value,
                "Feature data expressions are not supported with initial expression part of cluster properties."
              ),
            ];
        }
        return [];
      }
      function Fa(l) {
        let s = l.key,
          c = l.value,
          p = l.valueSpec,
          y = [];
        return (
          Array.isArray(p.values)
            ? p.values.indexOf(Jr(c)) === -1 &&
              y.push(
                new at(
                  s,
                  c,
                  `expected one of [${p.values.join(", ")}], ${JSON.stringify(
                    c
                  )} found`
                )
              )
            : Object.keys(p.values).indexOf(Jr(c)) === -1 &&
              y.push(
                new at(
                  s,
                  c,
                  `expected one of [${Object.keys(p.values).join(
                    ", "
                  )}], ${JSON.stringify(c)} found`
                )
              ),
          y
        );
      }
      function Ll(l) {
        return qd(pa(l.value))
          ? Dl(
              Pr({}, l, {
                expressionContext: "filter",
                valueSpec: { value: "boolean" },
              })
            )
          : fc(l);
      }
      function fc(l) {
        let s = l.value,
          c = l.key;
        if (ir(s) !== "array")
          return [new at(c, s, `array expected, ${ir(s)} found`)];
        let p = l.styleSpec,
          y,
          w = [];
        if (s.length < 1)
          return [new at(c, s, "filter array must have at least 1 element")];
        switch (
          ((w = w.concat(
            Fa({
              key: `${c}[0]`,
              value: s[0],
              valueSpec: p.filter_operator,
              style: l.style,
              styleSpec: l.styleSpec,
            })
          )),
          Jr(s[0]))
        ) {
          case "<":
          case "<=":
          case ">":
          case ">=":
            s.length >= 2 &&
              Jr(s[1]) === "$type" &&
              w.push(
                new at(c, s, `"$type" cannot be use with operator "${s[0]}"`)
              );
          case "==":
          case "!=":
            s.length !== 3 &&
              w.push(
                new at(
                  c,
                  s,
                  `filter array for operator "${s[0]}" must have 3 elements`
                )
              );
          case "in":
          case "!in":
            s.length >= 2 &&
              ((y = ir(s[1])),
              y !== "string" &&
                w.push(new at(`${c}[1]`, s[1], `string expected, ${y} found`)));
            for (let k = 2; k < s.length; k++)
              (y = ir(s[k])),
                Jr(s[1]) === "$type"
                  ? (w = w.concat(
                      Fa({
                        key: `${c}[${k}]`,
                        value: s[k],
                        valueSpec: p.geometry_type,
                        style: l.style,
                        styleSpec: l.styleSpec,
                      })
                    ))
                  : y !== "string" &&
                    y !== "number" &&
                    y !== "boolean" &&
                    w.push(
                      new at(
                        `${c}[${k}]`,
                        s[k],
                        `string, number, or boolean expected, ${y} found`
                      )
                    );
            break;
          case "any":
          case "all":
          case "none":
            for (let k = 1; k < s.length; k++)
              w = w.concat(
                fc({
                  key: `${c}[${k}]`,
                  value: s[k],
                  style: l.style,
                  styleSpec: l.styleSpec,
                })
              );
            break;
          case "has":
          case "!has":
            (y = ir(s[1])),
              s.length !== 2
                ? w.push(
                    new at(
                      c,
                      s,
                      `filter array for "${s[0]}" operator must have 2 elements`
                    )
                  )
                : y !== "string" &&
                  w.push(
                    new at(`${c}[1]`, s[1], `string expected, ${y} found`)
                  );
            break;
          case "within":
            (y = ir(s[1])),
              s.length !== 2
                ? w.push(
                    new at(
                      c,
                      s,
                      `filter array for "${s[0]}" operator must have 2 elements`
                    )
                  )
                : y !== "object" &&
                  w.push(
                    new at(`${c}[1]`, s[1], `object expected, ${y} found`)
                  );
        }
        return w;
      }
      function Kd(l, s) {
        let c = l.key,
          p = l.validateSpec,
          y = l.style,
          w = l.styleSpec,
          k = l.value,
          C = l.objectKey,
          A = w[`${s}_${l.layerType}`];
        if (!A) return [];
        let P = C.match(/^(.*)-transition$/);
        if (s === "paint" && P && A[P[1]] && A[P[1]].transition)
          return p({
            key: c,
            value: k,
            valueSpec: w.transition,
            style: y,
            styleSpec: w,
          });
        let N = l.valueSpec || A[C];
        if (!N) return [new at(c, k, `unknown property "${C}"`)];
        let O;
        if (
          ir(k) === "string" &&
          Tl(N) &&
          !N.tokens &&
          (O = /^{([^}]+)}$/.exec(k))
        )
          return [
            new at(
              c,
              k,
              `"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(
                O[1]
              )} }\`.`
            ),
          ];
        let j = [];
        return (
          l.layerType === "symbol" &&
            (C === "text-field" &&
              y &&
              !y.glyphs &&
              j.push(
                new at(
                  c,
                  k,
                  'use of "text-field" requires a style "glyphs" property'
                )
              ),
            C === "text-font" &&
              Ml(pa(k)) &&
              Jr(k.type) === "identity" &&
              j.push(
                new at(c, k, '"text-font" does not support identity functions')
              )),
          j.concat(
            p({
              key: l.key,
              value: k,
              valueSpec: N,
              style: y,
              styleSpec: w,
              expressionContext: "property",
              propertyType: s,
              propertyKey: C,
            })
          )
        );
      }
      function Cu(l) {
        return Kd(l, "paint");
      }
      function Jd(l) {
        return Kd(l, "layout");
      }
      function Xd(l) {
        let s = [],
          c = l.value,
          p = l.key,
          y = l.style,
          w = l.styleSpec;
        c.type ||
          c.ref ||
          s.push(new at(p, c, 'either "type" or "ref" is required'));
        let k = Jr(c.type),
          C = Jr(c.ref);
        if (c.id) {
          let A = Jr(c.id);
          for (let P = 0; P < l.arrayIndex; P++) {
            let N = y.layers[P];
            Jr(N.id) === A &&
              s.push(
                new at(
                  p,
                  c.id,
                  `duplicate layer id "${c.id}", previously used at line ${N.id.__line__}`
                )
              );
          }
        }
        if ("ref" in c) {
          let A;
          ["type", "source", "source-layer", "filter", "layout"].forEach(
            (P) => {
              P in c &&
                s.push(new at(p, c[P], `"${P}" is prohibited for ref layers`));
            }
          ),
            y.layers.forEach((P) => {
              Jr(P.id) === C && (A = P);
            }),
            A
              ? A.ref
                ? s.push(
                    new at(p, c.ref, "ref cannot reference another ref layer")
                  )
                : (k = Jr(A.type))
              : s.push(new at(p, c.ref, `ref layer "${C}" not found`));
        } else if (k !== "background")
          if (c.source) {
            let A = y.sources && y.sources[c.source],
              P = A && Jr(A.type);
            A
              ? P === "vector" && k === "raster"
                ? s.push(
                    new at(
                      p,
                      c.source,
                      `layer "${c.id}" requires a raster source`
                    )
                  )
                : P !== "raster-dem" && k === "hillshade"
                ? s.push(
                    new at(
                      p,
                      c.source,
                      `layer "${c.id}" requires a raster-dem source`
                    )
                  )
                : P === "raster" && k !== "raster"
                ? s.push(
                    new at(
                      p,
                      c.source,
                      `layer "${c.id}" requires a vector source`
                    )
                  )
                : P !== "vector" || c["source-layer"]
                ? P === "raster-dem" && k !== "hillshade"
                  ? s.push(
                      new at(
                        p,
                        c.source,
                        "raster-dem source can only be used with layer type 'hillshade'."
                      )
                    )
                  : k !== "line" ||
                    !c.paint ||
                    !c.paint["line-gradient"] ||
                    (P === "geojson" && A.lineMetrics) ||
                    s.push(
                      new at(
                        p,
                        c,
                        `layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`
                      )
                    )
                : s.push(
                    new at(
                      p,
                      c,
                      `layer "${c.id}" must specify a "source-layer"`
                    )
                  )
              : s.push(new at(p, c.source, `source "${c.source}" not found`));
          } else s.push(new at(p, c, 'missing required property "source"'));
        return (
          (s = s.concat(
            $o({
              key: p,
              value: c,
              valueSpec: w.layer,
              style: l.style,
              styleSpec: l.styleSpec,
              validateSpec: l.validateSpec,
              objectElementValidators: {
                "*": () => [],
                type: () =>
                  l.validateSpec({
                    key: `${p}.type`,
                    value: c.type,
                    valueSpec: w.layer.type,
                    style: l.style,
                    styleSpec: l.styleSpec,
                    validateSpec: l.validateSpec,
                    object: c,
                    objectKey: "type",
                  }),
                filter: Ll,
                layout: (A) =>
                  $o({
                    layer: c,
                    key: A.key,
                    value: A.value,
                    style: A.style,
                    styleSpec: A.styleSpec,
                    validateSpec: A.validateSpec,
                    objectElementValidators: {
                      "*": (P) => Jd(Pr({ layerType: k }, P)),
                    },
                  }),
                paint: (A) =>
                  $o({
                    layer: c,
                    key: A.key,
                    value: A.value,
                    style: A.style,
                    styleSpec: A.styleSpec,
                    validateSpec: A.validateSpec,
                    objectElementValidators: {
                      "*": (P) => Cu(Pr({ layerType: k }, P)),
                    },
                  }),
              },
            })
          )),
          s
        );
      }
      function Ms(l) {
        let s = l.value,
          c = l.key,
          p = ir(s);
        return p !== "string"
          ? [new at(c, s, `string expected, ${p} found`)]
          : [];
      }
      let Cf = {
        promoteId: function ({ key: l, value: s }) {
          if (ir(s) === "string") return Ms({ key: l, value: s });
          {
            let c = [];
            for (let p in s) c.push(...Ms({ key: `${l}.${p}`, value: s[p] }));
            return c;
          }
        },
      };
      function Ef(l) {
        let s = l.value,
          c = l.key,
          p = l.styleSpec,
          y = l.style,
          w = l.validateSpec;
        if (!s.type) return [new at(c, s, '"type" is required')];
        let k = Jr(s.type),
          C;
        switch (k) {
          case "vector":
          case "raster":
            return (
              (C = $o({
                key: c,
                value: s,
                valueSpec: p[`source_${k.replace("-", "_")}`],
                style: l.style,
                styleSpec: p,
                objectElementValidators: Cf,
                validateSpec: w,
              })),
              C
            );
          case "raster-dem":
            return (
              (C = (function (A) {
                var P;
                let N = (P = A.sourceName) !== null && P !== void 0 ? P : "",
                  O = A.value,
                  j = A.styleSpec,
                  W = j.source_raster_dem,
                  K = A.style,
                  ie = [],
                  ae = ir(O);
                if (O === void 0) return ie;
                if (ae !== "object")
                  return (
                    ie.push(
                      new at(
                        "source_raster_dem",
                        O,
                        `object expected, ${ae} found`
                      )
                    ),
                    ie
                  );
                let pe = Jr(O.encoding) === "custom",
                  Pe = ["redFactor", "greenFactor", "blueFactor", "baseShift"],
                  ye = A.value.encoding ? `"${A.value.encoding}"` : "Default";
                for (let Se in O)
                  !pe && Pe.includes(Se)
                    ? ie.push(
                        new at(
                          Se,
                          O[Se],
                          `In "${N}": "${Se}" is only valid when "encoding" is set to "custom". ${ye} encoding found`
                        )
                      )
                    : W[Se]
                    ? (ie = ie.concat(
                        A.validateSpec({
                          key: Se,
                          value: O[Se],
                          valueSpec: W[Se],
                          validateSpec: A.validateSpec,
                          style: K,
                          styleSpec: j,
                        })
                      ))
                    : ie.push(new at(Se, O[Se], `unknown property "${Se}"`));
                return ie;
              })({
                sourceName: c,
                value: s,
                style: l.style,
                styleSpec: p,
                validateSpec: w,
              })),
              C
            );
          case "geojson":
            if (
              ((C = $o({
                key: c,
                value: s,
                valueSpec: p.source_geojson,
                style: y,
                styleSpec: p,
                validateSpec: w,
                objectElementValidators: Cf,
              })),
              s.cluster)
            )
              for (let A in s.clusterProperties) {
                let [P, N] = s.clusterProperties[A],
                  O =
                    typeof P == "string" ? [P, ["accumulated"], ["get", A]] : P;
                C.push(
                  ...Dl({
                    key: `${c}.${A}.map`,
                    value: N,
                    validateSpec: w,
                    expressionContext: "cluster-map",
                  })
                ),
                  C.push(
                    ...Dl({
                      key: `${c}.${A}.reduce`,
                      value: O,
                      validateSpec: w,
                      expressionContext: "cluster-reduce",
                    })
                  );
              }
            return C;
          case "video":
            return $o({
              key: c,
              value: s,
              valueSpec: p.source_video,
              style: y,
              validateSpec: w,
              styleSpec: p,
            });
          case "image":
            return $o({
              key: c,
              value: s,
              valueSpec: p.source_image,
              style: y,
              validateSpec: w,
              styleSpec: p,
            });
          case "canvas":
            return [
              new at(
                c,
                null,
                "Please use runtime APIs to add canvas sources, rather than including them in stylesheets.",
                "source.canvas"
              ),
            ];
          default:
            return Fa({
              key: `${c}.type`,
              value: s.type,
              valueSpec: {
                values: [
                  "vector",
                  "raster",
                  "raster-dem",
                  "geojson",
                  "video",
                  "image",
                ],
              },
              style: y,
              validateSpec: w,
              styleSpec: p,
            });
        }
      }
      function Tf(l) {
        let s = l.value,
          c = l.styleSpec,
          p = c.light,
          y = l.style,
          w = [],
          k = ir(s);
        if (s === void 0) return w;
        if (k !== "object")
          return (
            (w = w.concat([new at("light", s, `object expected, ${k} found`)])),
            w
          );
        for (let C in s) {
          let A = C.match(/^(.*)-transition$/);
          w = w.concat(
            A && p[A[1]] && p[A[1]].transition
              ? l.validateSpec({
                  key: C,
                  value: s[C],
                  valueSpec: c.transition,
                  validateSpec: l.validateSpec,
                  style: y,
                  styleSpec: c,
                })
              : p[C]
              ? l.validateSpec({
                  key: C,
                  value: s[C],
                  valueSpec: p[C],
                  validateSpec: l.validateSpec,
                  style: y,
                  styleSpec: c,
                })
              : [new at(C, s[C], `unknown property "${C}"`)]
          );
        }
        return w;
      }
      function Mf(l) {
        let s = l.value,
          c = l.styleSpec,
          p = c.sky,
          y = l.style,
          w = ir(s);
        if (s === void 0) return [];
        if (w !== "object")
          return [new at("sky", s, `object expected, ${w} found`)];
        let k = [];
        for (let C in s)
          k = k.concat(
            p[C]
              ? Dn({
                  key: C,
                  value: s[C],
                  valueSpec: p[C],
                  style: y,
                  styleSpec: c,
                })
              : [new at(C, s[C], `unknown property "${C}"`)]
          );
        return k;
      }
      function Af(l) {
        let s = l.value,
          c = l.styleSpec,
          p = c.terrain,
          y = l.style,
          w = [],
          k = ir(s);
        if (s === void 0) return w;
        if (k !== "object")
          return (
            (w = w.concat([
              new at("terrain", s, `object expected, ${k} found`),
            ])),
            w
          );
        for (let C in s)
          w = w.concat(
            p[C]
              ? l.validateSpec({
                  key: C,
                  value: s[C],
                  valueSpec: p[C],
                  validateSpec: l.validateSpec,
                  style: y,
                  styleSpec: c,
                })
              : [new at(C, s[C], `unknown property "${C}"`)]
          );
        return w;
      }
      function mc(l) {
        let s = [],
          c = l.value,
          p = l.key;
        if (Array.isArray(c)) {
          let y = [],
            w = [];
          for (let k in c)
            c[k].id &&
              y.includes(c[k].id) &&
              s.push(
                new at(
                  p,
                  c,
                  `all the sprites' ids must be unique, but ${c[k].id} is duplicated`
                )
              ),
              y.push(c[k].id),
              c[k].url &&
                w.includes(c[k].url) &&
                s.push(
                  new at(
                    p,
                    c,
                    `all the sprites' URLs must be unique, but ${c[k].url} is duplicated`
                  )
                ),
              w.push(c[k].url),
              (s = s.concat(
                $o({
                  key: `${p}[${k}]`,
                  value: c[k],
                  valueSpec: {
                    id: { type: "string", required: !0 },
                    url: { type: "string", required: !0 },
                  },
                  validateSpec: l.validateSpec,
                })
              ));
          return s;
        }
        return Ms({ key: p, value: c });
      }
      let gc = {
        "*": () => [],
        array: Pl,
        boolean: function (l) {
          let s = l.value,
            c = l.key,
            p = ir(s);
          return p !== "boolean"
            ? [new at(c, s, `boolean expected, ${p} found`)]
            : [];
        },
        number: Wd,
        color: function (l) {
          let s = l.key,
            c = l.value,
            p = ir(c);
          return p !== "string"
            ? [new at(s, c, `color expected, ${p} found`)]
            : tr.parse(String(c))
            ? []
            : [new at(s, c, `color expected, "${c}" found`)];
        },
        constants: Sf,
        enum: Fa,
        filter: Ll,
        function: Zd,
        layer: Xd,
        object: $o,
        source: Ef,
        light: Tf,
        sky: Mf,
        terrain: Af,
        string: Ms,
        formatted: function (l) {
          return Ms(l).length === 0 ? [] : Dl(l);
        },
        resolvedImage: function (l) {
          return Ms(l).length === 0 ? [] : Dl(l);
        },
        padding: function (l) {
          let s = l.key,
            c = l.value;
          if (ir(c) === "array") {
            if (c.length < 1 || c.length > 4)
              return [
                new at(
                  s,
                  c,
                  `padding requires 1 to 4 values; ${c.length} values found`
                ),
              ];
            let p = { type: "number" },
              y = [];
            for (let w = 0; w < c.length; w++)
              y = y.concat(
                l.validateSpec({
                  key: `${s}[${w}]`,
                  value: c[w],
                  validateSpec: l.validateSpec,
                  valueSpec: p,
                })
              );
            return y;
          }
          return Wd({ key: s, value: c, valueSpec: {} });
        },
        variableAnchorOffsetCollection: function (l) {
          let s = l.key,
            c = l.value,
            p = ir(c),
            y = l.styleSpec;
          if (p !== "array" || c.length < 1 || c.length % 2 != 0)
            return [
              new at(
                s,
                c,
                "variableAnchorOffsetCollection requires a non-empty array of even length"
              ),
            ];
          let w = [];
          for (let k = 0; k < c.length; k += 2)
            (w = w.concat(
              Fa({
                key: `${s}[${k}]`,
                value: c[k],
                valueSpec: y.layout_symbol["text-anchor"],
              })
            )),
              (w = w.concat(
                Pl({
                  key: `${s}[${k + 1}]`,
                  value: c[k + 1],
                  valueSpec: { length: 2, value: "number" },
                  validateSpec: l.validateSpec,
                  style: l.style,
                  styleSpec: y,
                })
              ));
          return w;
        },
        sprite: mc,
      };
      function Dn(l) {
        let s = l.value,
          c = l.valueSpec,
          p = l.styleSpec;
        return (
          (l.validateSpec = Dn),
          c.expression && Ml(Jr(s))
            ? Zd(l)
            : c.expression && Sr(pa(s))
            ? Dl(l)
            : c.type && gc[c.type]
            ? gc[c.type](l)
            : $o(Pr({}, l, { valueSpec: c.type ? p[c.type] : c }))
        );
      }
      function Fl(l) {
        let s = l.value,
          c = l.key,
          p = Ms(l);
        return (
          p.length ||
            (s.indexOf("{fontstack}") === -1 &&
              p.push(
                new at(c, s, '"glyphs" url must include a "{fontstack}" token')
              ),
            s.indexOf("{range}") === -1 &&
              p.push(
                new at(c, s, '"glyphs" url must include a "{range}" token')
              )),
          p
        );
      }
      function us(l, s = je) {
        let c = [];
        return (
          (c = c.concat(
            Dn({
              key: "",
              value: l,
              valueSpec: s.$root,
              styleSpec: s,
              style: l,
              validateSpec: Dn,
              objectElementValidators: { glyphs: Fl, "*": () => [] },
            })
          )),
          l.constants &&
            (c = c.concat(
              Sf({
                key: "constants",
                value: l.constants,
                style: l,
                styleSpec: s,
                validateSpec: Dn,
              })
            )),
          If(c)
        );
      }
      function As(l) {
        return function (s) {
          return l({ ...s, validateSpec: Dn });
        };
      }
      function If(l) {
        return [].concat(l).sort((s, c) => s.line - c.line);
      }
      function To(l) {
        return function (...s) {
          return If(l.apply(this, s));
        };
      }
      (us.source = To(As(Ef))),
        (us.sprite = To(As(mc))),
        (us.glyphs = To(As(Fl))),
        (us.light = To(As(Tf))),
        (us.sky = To(As(Mf))),
        (us.terrain = To(As(Af))),
        (us.layer = To(As(Xd))),
        (us.filter = To(As(Ll))),
        (us.paintProperty = To(As(Cu))),
        (us.layoutProperty = To(As(Jd)));
      let zl = us,
        Yd = zl.light,
        f1 = zl.paintProperty,
        eh = zl.layoutProperty;
      function Pf(l, s) {
        let c = !1;
        if (s && s.length)
          for (let p of s) l.fire(new pt(new Error(p.message))), (c = !0);
        return c;
      }
      class Zs {
        constructor(s, c, p) {
          let y = (this.cells = []);
          if (s instanceof ArrayBuffer) {
            this.arrayBuffer = s;
            let k = new Int32Array(this.arrayBuffer);
            (s = k[0]), (this.d = (c = k[1]) + 2 * (p = k[2]));
            for (let A = 0; A < this.d * this.d; A++) {
              let P = k[3 + A],
                N = k[3 + A + 1];
              y.push(P === N ? null : k.subarray(P, N));
            }
            let C = k[3 + y.length + 1];
            (this.keys = k.subarray(k[3 + y.length], C)),
              (this.bboxes = k.subarray(C)),
              (this.insert = this._insertReadonly);
          } else {
            this.d = c + 2 * p;
            for (let k = 0; k < this.d * this.d; k++) y.push([]);
            (this.keys = []), (this.bboxes = []);
          }
          (this.n = c),
            (this.extent = s),
            (this.padding = p),
            (this.scale = c / s),
            (this.uid = 0);
          let w = (p / c) * s;
          (this.min = -w), (this.max = s + w);
        }
        insert(s, c, p, y, w) {
          this._forEachCell(
            c,
            p,
            y,
            w,
            this._insertCell,
            this.uid++,
            void 0,
            void 0
          ),
            this.keys.push(s),
            this.bboxes.push(c),
            this.bboxes.push(p),
            this.bboxes.push(y),
            this.bboxes.push(w);
        }
        _insertReadonly() {
          throw new Error(
            "Cannot insert into a GridIndex created from an ArrayBuffer."
          );
        }
        _insertCell(s, c, p, y, w, k) {
          this.cells[w].push(k);
        }
        query(s, c, p, y, w) {
          let k = this.min,
            C = this.max;
          if (s <= k && c <= k && C <= p && C <= y && !w)
            return Array.prototype.slice.call(this.keys);
          {
            let A = [];
            return this._forEachCell(s, c, p, y, this._queryCell, A, {}, w), A;
          }
        }
        _queryCell(s, c, p, y, w, k, C, A) {
          let P = this.cells[w];
          if (P !== null) {
            let N = this.keys,
              O = this.bboxes;
            for (let j = 0; j < P.length; j++) {
              let W = P[j];
              if (C[W] === void 0) {
                let K = 4 * W;
                (
                  A
                    ? A(O[K + 0], O[K + 1], O[K + 2], O[K + 3])
                    : s <= O[K + 2] &&
                      c <= O[K + 3] &&
                      p >= O[K + 0] &&
                      y >= O[K + 1]
                )
                  ? ((C[W] = !0), k.push(N[W]))
                  : (C[W] = !1);
              }
            }
          }
        }
        _forEachCell(s, c, p, y, w, k, C, A) {
          let P = this._convertToCellCoord(s),
            N = this._convertToCellCoord(c),
            O = this._convertToCellCoord(p),
            j = this._convertToCellCoord(y);
          for (let W = P; W <= O; W++)
            for (let K = N; K <= j; K++) {
              let ie = this.d * K + W;
              if (
                (!A ||
                  A(
                    this._convertFromCellCoord(W),
                    this._convertFromCellCoord(K),
                    this._convertFromCellCoord(W + 1),
                    this._convertFromCellCoord(K + 1)
                  )) &&
                w.call(this, s, c, p, y, ie, k, C, A)
              )
                return;
            }
        }
        _convertFromCellCoord(s) {
          return (s - this.padding) / this.scale;
        }
        _convertToCellCoord(s) {
          return Math.max(
            0,
            Math.min(this.d - 1, Math.floor(s * this.scale) + this.padding)
          );
        }
        toArrayBuffer() {
          if (this.arrayBuffer) return this.arrayBuffer;
          let s = this.cells,
            c = 3 + this.cells.length + 1 + 1,
            p = 0;
          for (let k = 0; k < this.cells.length; k++) p += this.cells[k].length;
          let y = new Int32Array(c + p + this.keys.length + this.bboxes.length);
          (y[0] = this.extent), (y[1] = this.n), (y[2] = this.padding);
          let w = c;
          for (let k = 0; k < s.length; k++) {
            let C = s[k];
            (y[3 + k] = w), y.set(C, w), (w += C.length);
          }
          return (
            (y[3 + s.length] = w),
            y.set(this.keys, w),
            (w += this.keys.length),
            (y[3 + s.length + 1] = w),
            y.set(this.bboxes, w),
            (w += this.bboxes.length),
            y.buffer
          );
        }
        static serialize(s, c) {
          let p = s.toArrayBuffer();
          return c && c.push(p), { buffer: p };
        }
        static deserialize(s) {
          return new Zs(s.buffer);
        }
      }
      let fa = {};
      function Nt(l, s, c = {}) {
        if (fa[l]) throw new Error(`${l} is already registered.`);
        Object.defineProperty(s, "_classRegistryKey", {
          value: l,
          writeable: !1,
        }),
          (fa[l] = { klass: s, omit: c.omit || [], shallow: c.shallow || [] });
      }
      Nt("Object", Object),
        Nt("TransferableGridIndex", Zs),
        Nt("Color", tr),
        Nt("Error", Error),
        Nt("AJAXError", ei),
        Nt("ResolvedImage", Jn),
        Nt("StylePropertyFunction", xu),
        Nt("StyleExpression", pc, { omit: ["_evaluator"] }),
        Nt("ZoomDependentExpression", _u),
        Nt("ZoomConstantExpression", Al),
        Nt("CompoundExpression", Tr, { omit: ["_evaluate"] });
      for (let l in Cl) Cl[l]._classRegistryKey || Nt(`Expression_${l}`, Cl[l]);
      function th(l) {
        return (
          l &&
          typeof ArrayBuffer < "u" &&
          (l instanceof ArrayBuffer ||
            (l.constructor && l.constructor.name === "ArrayBuffer"))
        );
      }
      function za(l, s) {
        if (
          l == null ||
          typeof l == "boolean" ||
          typeof l == "number" ||
          typeof l == "string" ||
          l instanceof Boolean ||
          l instanceof Number ||
          l instanceof String ||
          l instanceof Date ||
          l instanceof RegExp ||
          l instanceof Blob ||
          l instanceof Error
        )
          return l;
        if (th(l) || ct(l)) return s && s.push(l), l;
        if (ArrayBuffer.isView(l)) {
          let c = l;
          return s && s.push(c.buffer), c;
        }
        if (l instanceof ImageData) return s && s.push(l.data.buffer), l;
        if (Array.isArray(l)) {
          let c = [];
          for (let p of l) c.push(za(p, s));
          return c;
        }
        if (typeof l == "object") {
          let c = l.constructor,
            p = c._classRegistryKey;
          if (!p)
            throw new Error(
              `can't serialize object of unregistered class ${c.name}`
            );
          if (!fa[p]) throw new Error(`${p} is not registered.`);
          let y = c.serialize ? c.serialize(l, s) : {};
          if (c.serialize) {
            if (s && y === s[s.length - 1])
              throw new Error(
                "statically serialized object won't survive transfer of $name property"
              );
          } else {
            for (let w in l) {
              if (!l.hasOwnProperty(w) || fa[p].omit.indexOf(w) >= 0) continue;
              let k = l[w];
              y[w] = fa[p].shallow.indexOf(w) >= 0 ? k : za(k, s);
            }
            l instanceof Error && (y.message = l.message);
          }
          if (y.$name)
            throw new Error(
              "$name property is reserved for worker serialization logic."
            );
          return p !== "Object" && (y.$name = p), y;
        }
        throw new Error("can't serialize object of type " + typeof l);
      }
      function Nl(l) {
        if (
          l == null ||
          typeof l == "boolean" ||
          typeof l == "number" ||
          typeof l == "string" ||
          l instanceof Boolean ||
          l instanceof Number ||
          l instanceof String ||
          l instanceof Date ||
          l instanceof RegExp ||
          l instanceof Blob ||
          l instanceof Error ||
          th(l) ||
          ct(l) ||
          ArrayBuffer.isView(l) ||
          l instanceof ImageData
        )
          return l;
        if (Array.isArray(l)) return l.map(Nl);
        if (typeof l == "object") {
          let s = l.$name || "Object";
          if (!fa[s])
            throw new Error(`can't deserialize unregistered class ${s}`);
          let { klass: c } = fa[s];
          if (!c) throw new Error(`can't deserialize unregistered class ${s}`);
          if (c.deserialize) return c.deserialize(l);
          let p = Object.create(c.prototype);
          for (let y of Object.keys(l)) {
            if (y === "$name") continue;
            let w = l[y];
            p[y] = fa[s].shallow.indexOf(y) >= 0 ? w : Nl(w);
          }
          return p;
        }
        throw new Error("can't deserialize object of type " + typeof l);
      }
      class ih {
        constructor() {
          this.first = !0;
        }
        update(s, c) {
          let p = Math.floor(s);
          return this.first
            ? ((this.first = !1),
              (this.lastIntegerZoom = p),
              (this.lastIntegerZoomTime = 0),
              (this.lastZoom = s),
              (this.lastFloorZoom = p),
              !0)
            : (this.lastFloorZoom > p
                ? ((this.lastIntegerZoom = p + 1),
                  (this.lastIntegerZoomTime = c))
                : this.lastFloorZoom < p &&
                  ((this.lastIntegerZoom = p), (this.lastIntegerZoomTime = c)),
              s !== this.lastZoom &&
                ((this.lastZoom = s), (this.lastFloorZoom = p), !0));
        }
      }
      let Lt = {
        "Latin-1 Supplement": (l) => l >= 128 && l <= 255,
        Arabic: (l) => l >= 1536 && l <= 1791,
        "Arabic Supplement": (l) => l >= 1872 && l <= 1919,
        "Arabic Extended-A": (l) => l >= 2208 && l <= 2303,
        "Hangul Jamo": (l) => l >= 4352 && l <= 4607,
        "Unified Canadian Aboriginal Syllabics": (l) => l >= 5120 && l <= 5759,
        Khmer: (l) => l >= 6016 && l <= 6143,
        "Unified Canadian Aboriginal Syllabics Extended": (l) =>
          l >= 6320 && l <= 6399,
        "General Punctuation": (l) => l >= 8192 && l <= 8303,
        "Letterlike Symbols": (l) => l >= 8448 && l <= 8527,
        "Number Forms": (l) => l >= 8528 && l <= 8591,
        "Miscellaneous Technical": (l) => l >= 8960 && l <= 9215,
        "Control Pictures": (l) => l >= 9216 && l <= 9279,
        "Optical Character Recognition": (l) => l >= 9280 && l <= 9311,
        "Enclosed Alphanumerics": (l) => l >= 9312 && l <= 9471,
        "Geometric Shapes": (l) => l >= 9632 && l <= 9727,
        "Miscellaneous Symbols": (l) => l >= 9728 && l <= 9983,
        "Miscellaneous Symbols and Arrows": (l) => l >= 11008 && l <= 11263,
        "CJK Radicals Supplement": (l) => l >= 11904 && l <= 12031,
        "Kangxi Radicals": (l) => l >= 12032 && l <= 12255,
        "Ideographic Description Characters": (l) => l >= 12272 && l <= 12287,
        "CJK Symbols and Punctuation": (l) => l >= 12288 && l <= 12351,
        Hiragana: (l) => l >= 12352 && l <= 12447,
        Katakana: (l) => l >= 12448 && l <= 12543,
        Bopomofo: (l) => l >= 12544 && l <= 12591,
        "Hangul Compatibility Jamo": (l) => l >= 12592 && l <= 12687,
        Kanbun: (l) => l >= 12688 && l <= 12703,
        "Bopomofo Extended": (l) => l >= 12704 && l <= 12735,
        "CJK Strokes": (l) => l >= 12736 && l <= 12783,
        "Katakana Phonetic Extensions": (l) => l >= 12784 && l <= 12799,
        "Enclosed CJK Letters and Months": (l) => l >= 12800 && l <= 13055,
        "CJK Compatibility": (l) => l >= 13056 && l <= 13311,
        "CJK Unified Ideographs Extension A": (l) => l >= 13312 && l <= 19903,
        "Yijing Hexagram Symbols": (l) => l >= 19904 && l <= 19967,
        "CJK Unified Ideographs": (l) => l >= 19968 && l <= 40959,
        "Yi Syllables": (l) => l >= 40960 && l <= 42127,
        "Yi Radicals": (l) => l >= 42128 && l <= 42191,
        "Hangul Jamo Extended-A": (l) => l >= 43360 && l <= 43391,
        "Hangul Syllables": (l) => l >= 44032 && l <= 55215,
        "Hangul Jamo Extended-B": (l) => l >= 55216 && l <= 55295,
        "Private Use Area": (l) => l >= 57344 && l <= 63743,
        "CJK Compatibility Ideographs": (l) => l >= 63744 && l <= 64255,
        "Arabic Presentation Forms-A": (l) => l >= 64336 && l <= 65023,
        "Vertical Forms": (l) => l >= 65040 && l <= 65055,
        "CJK Compatibility Forms": (l) => l >= 65072 && l <= 65103,
        "Small Form Variants": (l) => l >= 65104 && l <= 65135,
        "Arabic Presentation Forms-B": (l) => l >= 65136 && l <= 65279,
        "Halfwidth and Fullwidth Forms": (l) => l >= 65280 && l <= 65519,
      };
      function yc(l) {
        for (let s of l) if (Tu(s.charCodeAt(0))) return !0;
        return !1;
      }
      function Eu(l) {
        for (let s of l) if (!Df(s.charCodeAt(0))) return !1;
        return !0;
      }
      function Df(l) {
        return !(
          Lt.Arabic(l) ||
          Lt["Arabic Supplement"](l) ||
          Lt["Arabic Extended-A"](l) ||
          Lt["Arabic Presentation Forms-A"](l) ||
          Lt["Arabic Presentation Forms-B"](l)
        );
      }
      function Tu(l) {
        return !(
          l !== 746 &&
          l !== 747 &&
          (l < 4352 ||
            !(
              Lt["Bopomofo Extended"](l) ||
              Lt.Bopomofo(l) ||
              (Lt["CJK Compatibility Forms"](l) &&
                !(l >= 65097 && l <= 65103)) ||
              Lt["CJK Compatibility Ideographs"](l) ||
              Lt["CJK Compatibility"](l) ||
              Lt["CJK Radicals Supplement"](l) ||
              Lt["CJK Strokes"](l) ||
              !(
                !Lt["CJK Symbols and Punctuation"](l) ||
                (l >= 12296 && l <= 12305) ||
                (l >= 12308 && l <= 12319) ||
                l === 12336
              ) ||
              Lt["CJK Unified Ideographs Extension A"](l) ||
              Lt["CJK Unified Ideographs"](l) ||
              Lt["Enclosed CJK Letters and Months"](l) ||
              Lt["Hangul Compatibility Jamo"](l) ||
              Lt["Hangul Jamo Extended-A"](l) ||
              Lt["Hangul Jamo Extended-B"](l) ||
              Lt["Hangul Jamo"](l) ||
              Lt["Hangul Syllables"](l) ||
              Lt.Hiragana(l) ||
              Lt["Ideographic Description Characters"](l) ||
              Lt.Kanbun(l) ||
              Lt["Kangxi Radicals"](l) ||
              Lt["Katakana Phonetic Extensions"](l) ||
              (Lt.Katakana(l) && l !== 12540) ||
              !(
                !Lt["Halfwidth and Fullwidth Forms"](l) ||
                l === 65288 ||
                l === 65289 ||
                l === 65293 ||
                (l >= 65306 && l <= 65310) ||
                l === 65339 ||
                l === 65341 ||
                l === 65343 ||
                (l >= 65371 && l <= 65503) ||
                l === 65507 ||
                (l >= 65512 && l <= 65519)
              ) ||
              !(
                !Lt["Small Form Variants"](l) ||
                (l >= 65112 && l <= 65118) ||
                (l >= 65123 && l <= 65126)
              ) ||
              Lt["Unified Canadian Aboriginal Syllabics"](l) ||
              Lt["Unified Canadian Aboriginal Syllabics Extended"](l) ||
              Lt["Vertical Forms"](l) ||
              Lt["Yijing Hexagram Symbols"](l) ||
              Lt["Yi Syllables"](l) ||
              Lt["Yi Radicals"](l)
            ))
        );
      }
      function rh(l) {
        return !(
          Tu(l) ||
          (function (s) {
            return !!(
              (Lt["Latin-1 Supplement"](s) &&
                (s === 167 ||
                  s === 169 ||
                  s === 174 ||
                  s === 177 ||
                  s === 188 ||
                  s === 189 ||
                  s === 190 ||
                  s === 215 ||
                  s === 247)) ||
              (Lt["General Punctuation"](s) &&
                (s === 8214 ||
                  s === 8224 ||
                  s === 8225 ||
                  s === 8240 ||
                  s === 8241 ||
                  s === 8251 ||
                  s === 8252 ||
                  s === 8258 ||
                  s === 8263 ||
                  s === 8264 ||
                  s === 8265 ||
                  s === 8273)) ||
              Lt["Letterlike Symbols"](s) ||
              Lt["Number Forms"](s) ||
              (Lt["Miscellaneous Technical"](s) &&
                ((s >= 8960 && s <= 8967) ||
                  (s >= 8972 && s <= 8991) ||
                  (s >= 8996 && s <= 9e3) ||
                  s === 9003 ||
                  (s >= 9085 && s <= 9114) ||
                  (s >= 9150 && s <= 9165) ||
                  s === 9167 ||
                  (s >= 9169 && s <= 9179) ||
                  (s >= 9186 && s <= 9215))) ||
              (Lt["Control Pictures"](s) && s !== 9251) ||
              Lt["Optical Character Recognition"](s) ||
              Lt["Enclosed Alphanumerics"](s) ||
              Lt["Geometric Shapes"](s) ||
              (Lt["Miscellaneous Symbols"](s) && !(s >= 9754 && s <= 9759)) ||
              (Lt["Miscellaneous Symbols and Arrows"](s) &&
                ((s >= 11026 && s <= 11055) ||
                  (s >= 11088 && s <= 11097) ||
                  (s >= 11192 && s <= 11243))) ||
              Lt["CJK Symbols and Punctuation"](s) ||
              Lt.Katakana(s) ||
              Lt["Private Use Area"](s) ||
              Lt["CJK Compatibility Forms"](s) ||
              Lt["Small Form Variants"](s) ||
              Lt["Halfwidth and Fullwidth Forms"](s) ||
              s === 8734 ||
              s === 8756 ||
              s === 8757 ||
              (s >= 9984 && s <= 10087) ||
              (s >= 10102 && s <= 10131) ||
              s === 65532 ||
              s === 65533
            );
          })(l)
        );
      }
      function nh(l) {
        return (
          (l >= 1424 && l <= 2303) ||
          Lt["Arabic Presentation Forms-A"](l) ||
          Lt["Arabic Presentation Forms-B"](l)
        );
      }
      function oh(l, s) {
        return !(
          (!s && nh(l)) ||
          (l >= 2304 && l <= 3583) ||
          (l >= 3840 && l <= 4255) ||
          Lt.Khmer(l)
        );
      }
      function Lf(l) {
        for (let s of l) if (nh(s.charCodeAt(0))) return !0;
        return !1;
      }
      let Na = new (class {
        constructor() {
          (this.applyArabicShaping = null),
            (this.processBidirectionalText = null),
            (this.processStyledBidirectionalText = null),
            (this.pluginStatus = "unavailable"),
            (this.pluginURL = null);
        }
        setState(l) {
          (this.pluginStatus = l.pluginStatus), (this.pluginURL = l.pluginURL);
        }
        getState() {
          return { pluginStatus: this.pluginStatus, pluginURL: this.pluginURL };
        }
        setMethods(l) {
          (this.applyArabicShaping = l.applyArabicShaping),
            (this.processBidirectionalText = l.processBidirectionalText),
            (this.processStyledBidirectionalText =
              l.processStyledBidirectionalText);
        }
        isParsed() {
          return (
            this.applyArabicShaping != null &&
            this.processBidirectionalText != null &&
            this.processStyledBidirectionalText != null
          );
        }
        getPluginURL() {
          return this.pluginURL;
        }
        getRTLTextPluginStatus() {
          return this.pluginStatus;
        }
      })();
      class Mr {
        constructor(s, c) {
          (this.zoom = s),
            c
              ? ((this.now = c.now),
                (this.fadeDuration = c.fadeDuration),
                (this.zoomHistory = c.zoomHistory),
                (this.transition = c.transition))
              : ((this.now = 0),
                (this.fadeDuration = 0),
                (this.zoomHistory = new ih()),
                (this.transition = {}));
        }
        isSupportedScript(s) {
          return (function (c, p) {
            for (let y of c) if (!oh(y.charCodeAt(0), p)) return !1;
            return !0;
          })(s, Na.getRTLTextPluginStatus() === "loaded");
        }
        crossFadingFactor() {
          return this.fadeDuration === 0
            ? 1
            : Math.min(
                (this.now - this.zoomHistory.lastIntegerZoomTime) /
                  this.fadeDuration,
                1
              );
        }
        getCrossfadeParameters() {
          let s = this.zoom,
            c = s - Math.floor(s),
            p = this.crossFadingFactor();
          return s > this.zoomHistory.lastIntegerZoom
            ? { fromScale: 2, toScale: 1, t: c + (1 - c) * p }
            : { fromScale: 0.5, toScale: 1, t: 1 - (1 - p) * c };
        }
      }
      class Mu {
        constructor(s, c) {
          (this.property = s),
            (this.value = c),
            (this.expression = (function (p, y) {
              if (Ml(p)) return new xu(p, y);
              if (Sr(p)) {
                let w = vf(p, y);
                if (w.result === "error")
                  throw new Error(
                    w.value.map((k) => `${k.key}: ${k.message}`).join(", ")
                  );
                return w.value;
              }
              {
                let w = p;
                return (
                  y.type === "color" && typeof p == "string"
                    ? (w = tr.parse(p))
                    : y.type !== "padding" ||
                      (typeof p != "number" && !Array.isArray(p))
                    ? y.type === "variableAnchorOffsetCollection" &&
                      Array.isArray(p) &&
                      (w = dn.parse(p))
                    : (w = Pn.parse(p)),
                  { kind: "constant", evaluate: () => w }
                );
              }
            })(c === void 0 ? s.specification.default : c, s.specification));
        }
        isDataDriven() {
          return (
            this.expression.kind === "source" ||
            this.expression.kind === "composite"
          );
        }
        possiblyEvaluate(s, c, p) {
          return this.property.possiblyEvaluate(this, s, c, p);
        }
      }
      class Au {
        constructor(s) {
          (this.property = s), (this.value = new Mu(s, void 0));
        }
        transitioned(s, c) {
          return new ah(
            this.property,
            this.value,
            c,
            Ie({}, s.transition, this.transition),
            s.now
          );
        }
        untransitioned() {
          return new ah(this.property, this.value, null, {}, 0);
        }
      }
      class sh {
        constructor(s) {
          (this._properties = s),
            (this._values = Object.create(
              s.defaultTransitionablePropertyValues
            ));
        }
        getValue(s) {
          return De(this._values[s].value.value);
        }
        setValue(s, c) {
          Object.prototype.hasOwnProperty.call(this._values, s) ||
            (this._values[s] = new Au(this._values[s].property)),
            (this._values[s].value = new Mu(
              this._values[s].property,
              c === null ? void 0 : De(c)
            ));
        }
        getTransition(s) {
          return De(this._values[s].transition);
        }
        setTransition(s, c) {
          Object.prototype.hasOwnProperty.call(this._values, s) ||
            (this._values[s] = new Au(this._values[s].property)),
            (this._values[s].transition = De(c) || void 0);
        }
        serialize() {
          let s = {};
          for (let c of Object.keys(this._values)) {
            let p = this.getValue(c);
            p !== void 0 && (s[c] = p);
            let y = this.getTransition(c);
            y !== void 0 && (s[`${c}-transition`] = y);
          }
          return s;
        }
        transitioned(s, c) {
          let p = new Ff(this._properties);
          for (let y of Object.keys(this._values))
            p._values[y] = this._values[y].transitioned(s, c._values[y]);
          return p;
        }
        untransitioned() {
          let s = new Ff(this._properties);
          for (let c of Object.keys(this._values))
            s._values[c] = this._values[c].untransitioned();
          return s;
        }
      }
      class ah {
        constructor(s, c, p, y, w) {
          (this.property = s),
            (this.value = c),
            (this.begin = w + y.delay || 0),
            (this.end = this.begin + y.duration || 0),
            s.specification.transition &&
              (y.delay || y.duration) &&
              (this.prior = p);
        }
        possiblyEvaluate(s, c, p) {
          let y = s.now || 0,
            w = this.value.possiblyEvaluate(s, c, p),
            k = this.prior;
          if (k) {
            if (y > this.end) return (this.prior = null), w;
            if (this.value.isDataDriven()) return (this.prior = null), w;
            if (y < this.begin) return k.possiblyEvaluate(s, c, p);
            {
              let C = (y - this.begin) / (this.end - this.begin);
              return this.property.interpolate(
                k.possiblyEvaluate(s, c, p),
                w,
                (function (A) {
                  if (A <= 0) return 0;
                  if (A >= 1) return 1;
                  let P = A * A,
                    N = P * A;
                  return 4 * (A < 0.5 ? N : 3 * (A - P) + N - 0.75);
                })(C)
              );
            }
          }
          return w;
        }
      }
      class Ff {
        constructor(s) {
          (this._properties = s),
            (this._values = Object.create(
              s.defaultTransitioningPropertyValues
            ));
        }
        possiblyEvaluate(s, c, p) {
          let y = new bc(this._properties);
          for (let w of Object.keys(this._values))
            y._values[w] = this._values[w].possiblyEvaluate(s, c, p);
          return y;
        }
        hasTransition() {
          for (let s of Object.keys(this._values))
            if (this._values[s].prior) return !0;
          return !1;
        }
      }
      class m1 {
        constructor(s) {
          (this._properties = s),
            (this._values = Object.create(s.defaultPropertyValues));
        }
        hasValue(s) {
          return this._values[s].value !== void 0;
        }
        getValue(s) {
          return De(this._values[s].value);
        }
        setValue(s, c) {
          this._values[s] = new Mu(
            this._values[s].property,
            c === null ? void 0 : De(c)
          );
        }
        serialize() {
          let s = {};
          for (let c of Object.keys(this._values)) {
            let p = this.getValue(c);
            p !== void 0 && (s[c] = p);
          }
          return s;
        }
        possiblyEvaluate(s, c, p) {
          let y = new bc(this._properties);
          for (let w of Object.keys(this._values))
            y._values[w] = this._values[w].possiblyEvaluate(s, c, p);
          return y;
        }
      }
      class fs {
        constructor(s, c, p) {
          (this.property = s), (this.value = c), (this.parameters = p);
        }
        isConstant() {
          return this.value.kind === "constant";
        }
        constantOr(s) {
          return this.value.kind === "constant" ? this.value.value : s;
        }
        evaluate(s, c, p, y) {
          return this.property.evaluate(
            this.value,
            this.parameters,
            s,
            c,
            p,
            y
          );
        }
      }
      class bc {
        constructor(s) {
          (this._properties = s),
            (this._values = Object.create(s.defaultPossiblyEvaluatedValues));
        }
        get(s) {
          return this._values[s];
        }
      }
      class Kt {
        constructor(s) {
          this.specification = s;
        }
        possiblyEvaluate(s, c) {
          if (s.isDataDriven())
            throw new Error("Value should not be data driven");
          return s.expression.evaluate(c);
        }
        interpolate(s, c, p) {
          let y = $n[this.specification.type];
          return y ? y(s, c, p) : s;
        }
      }
      class si {
        constructor(s, c) {
          (this.specification = s), (this.overrides = c);
        }
        possiblyEvaluate(s, c, p, y) {
          return new fs(
            this,
            s.expression.kind === "constant" || s.expression.kind === "camera"
              ? {
                  kind: "constant",
                  value: s.expression.evaluate(c, null, {}, p, y),
                }
              : s.expression,
            c
          );
        }
        interpolate(s, c, p) {
          if (s.value.kind !== "constant" || c.value.kind !== "constant")
            return s;
          if (s.value.value === void 0 || c.value.value === void 0)
            return new fs(
              this,
              { kind: "constant", value: void 0 },
              s.parameters
            );
          let y = $n[this.specification.type];
          if (y) {
            let w = y(s.value.value, c.value.value, p);
            return new fs(this, { kind: "constant", value: w }, s.parameters);
          }
          return s;
        }
        evaluate(s, c, p, y, w, k) {
          return s.kind === "constant" ? s.value : s.evaluate(c, p, y, w, k);
        }
      }
      class Oa extends si {
        possiblyEvaluate(s, c, p, y) {
          if (s.value === void 0)
            return new fs(this, { kind: "constant", value: void 0 }, c);
          if (s.expression.kind === "constant") {
            let w = s.expression.evaluate(c, null, {}, p, y),
              k =
                s.property.specification.type === "resolvedImage" &&
                typeof w != "string"
                  ? w.name
                  : w,
              C = this._calculate(k, k, k, c);
            return new fs(this, { kind: "constant", value: C }, c);
          }
          if (s.expression.kind === "camera") {
            let w = this._calculate(
              s.expression.evaluate({ zoom: c.zoom - 1 }),
              s.expression.evaluate({ zoom: c.zoom }),
              s.expression.evaluate({ zoom: c.zoom + 1 }),
              c
            );
            return new fs(this, { kind: "constant", value: w }, c);
          }
          return new fs(this, s.expression, c);
        }
        evaluate(s, c, p, y, w, k) {
          if (s.kind === "source") {
            let C = s.evaluate(c, p, y, w, k);
            return this._calculate(C, C, C, c);
          }
          return s.kind === "composite"
            ? this._calculate(
                s.evaluate({ zoom: Math.floor(c.zoom) - 1 }, p, y),
                s.evaluate({ zoom: Math.floor(c.zoom) }, p, y),
                s.evaluate({ zoom: Math.floor(c.zoom) + 1 }, p, y),
                c
              )
            : s.value;
        }
        _calculate(s, c, p, y) {
          return y.zoom > y.zoomHistory.lastIntegerZoom
            ? { from: s, to: c }
            : { from: p, to: c };
        }
        interpolate(s) {
          return s;
        }
      }
      class lh {
        constructor(s) {
          this.specification = s;
        }
        possiblyEvaluate(s, c, p, y) {
          if (s.value !== void 0) {
            if (s.expression.kind === "constant") {
              let w = s.expression.evaluate(c, null, {}, p, y);
              return this._calculate(w, w, w, c);
            }
            return this._calculate(
              s.expression.evaluate(new Mr(Math.floor(c.zoom - 1), c)),
              s.expression.evaluate(new Mr(Math.floor(c.zoom), c)),
              s.expression.evaluate(new Mr(Math.floor(c.zoom + 1), c)),
              c
            );
          }
        }
        _calculate(s, c, p, y) {
          return y.zoom > y.zoomHistory.lastIntegerZoom
            ? { from: s, to: c }
            : { from: p, to: c };
        }
        interpolate(s) {
          return s;
        }
      }
      class vc {
        constructor(s) {
          this.specification = s;
        }
        possiblyEvaluate(s, c, p, y) {
          return !!s.expression.evaluate(c, null, {}, p, y);
        }
        interpolate() {
          return !1;
        }
      }
      class Mo {
        constructor(s) {
          (this.properties = s),
            (this.defaultPropertyValues = {}),
            (this.defaultTransitionablePropertyValues = {}),
            (this.defaultTransitioningPropertyValues = {}),
            (this.defaultPossiblyEvaluatedValues = {}),
            (this.overridableProperties = []);
          for (let c in s) {
            let p = s[c];
            p.specification.overridable && this.overridableProperties.push(c);
            let y = (this.defaultPropertyValues[c] = new Mu(p, void 0)),
              w = (this.defaultTransitionablePropertyValues[c] = new Au(p));
            (this.defaultTransitioningPropertyValues[c] = w.untransitioned()),
              (this.defaultPossiblyEvaluatedValues[c] = y.possiblyEvaluate({}));
          }
        }
      }
      Nt("DataDrivenProperty", si),
        Nt("DataConstantProperty", Kt),
        Nt("CrossFadedDataDrivenProperty", Oa),
        Nt("CrossFadedProperty", lh),
        Nt("ColorRampProperty", vc);
      let zf = "-transition";
      class ms extends Ai {
        constructor(s, c) {
          if (
            (super(),
            (this.id = s.id),
            (this.type = s.type),
            (this._featureFilter = { filter: () => !0, needGeometry: !1 }),
            s.type !== "custom" &&
              ((this.metadata = s.metadata),
              (this.minzoom = s.minzoom),
              (this.maxzoom = s.maxzoom),
              s.type !== "background" &&
                ((this.source = s.source),
                (this.sourceLayer = s["source-layer"]),
                (this.filter = s.filter)),
              c.layout && (this._unevaluatedLayout = new m1(c.layout)),
              c.paint))
          ) {
            this._transitionablePaint = new sh(c.paint);
            for (let p in s.paint)
              this.setPaintProperty(p, s.paint[p], { validate: !1 });
            for (let p in s.layout)
              this.setLayoutProperty(p, s.layout[p], { validate: !1 });
            (this._transitioningPaint =
              this._transitionablePaint.untransitioned()),
              (this.paint = new bc(c.paint));
          }
        }
        getCrossfadeParameters() {
          return this._crossfadeParameters;
        }
        getLayoutProperty(s) {
          return s === "visibility"
            ? this.visibility
            : this._unevaluatedLayout.getValue(s);
        }
        setLayoutProperty(s, c, p = {}) {
          (c != null &&
            this._validate(eh, `layers.${this.id}.layout.${s}`, s, c, p)) ||
            (s !== "visibility"
              ? this._unevaluatedLayout.setValue(s, c)
              : (this.visibility = c));
        }
        getPaintProperty(s) {
          return s.endsWith(zf)
            ? this._transitionablePaint.getTransition(s.slice(0, -11))
            : this._transitionablePaint.getValue(s);
        }
        setPaintProperty(s, c, p = {}) {
          if (
            c != null &&
            this._validate(f1, `layers.${this.id}.paint.${s}`, s, c, p)
          )
            return !1;
          if (s.endsWith(zf))
            return (
              this._transitionablePaint.setTransition(
                s.slice(0, -11),
                c || void 0
              ),
              !1
            );
          {
            let y = this._transitionablePaint._values[s],
              w =
                y.property.specification["property-type"] ===
                "cross-faded-data-driven",
              k = y.value.isDataDriven(),
              C = y.value;
            this._transitionablePaint.setValue(s, c),
              this._handleSpecialPaintPropertyUpdate(s);
            let A = this._transitionablePaint._values[s].value;
            return (
              A.isDataDriven() ||
              k ||
              w ||
              this._handleOverridablePaintPropertyUpdate(s, C, A)
            );
          }
        }
        _handleSpecialPaintPropertyUpdate(s) {}
        _handleOverridablePaintPropertyUpdate(s, c, p) {
          return !1;
        }
        isHidden(s) {
          return (
            !!(this.minzoom && s < this.minzoom) ||
            !!(this.maxzoom && s >= this.maxzoom) ||
            this.visibility === "none"
          );
        }
        updateTransitions(s) {
          this._transitioningPaint = this._transitionablePaint.transitioned(
            s,
            this._transitioningPaint
          );
        }
        hasTransition() {
          return this._transitioningPaint.hasTransition();
        }
        recalculate(s, c) {
          s.getCrossfadeParameters &&
            (this._crossfadeParameters = s.getCrossfadeParameters()),
            this._unevaluatedLayout &&
              (this.layout = this._unevaluatedLayout.possiblyEvaluate(
                s,
                void 0,
                c
              )),
            (this.paint = this._transitioningPaint.possiblyEvaluate(
              s,
              void 0,
              c
            ));
        }
        serialize() {
          let s = {
            id: this.id,
            type: this.type,
            source: this.source,
            "source-layer": this.sourceLayer,
            metadata: this.metadata,
            minzoom: this.minzoom,
            maxzoom: this.maxzoom,
            filter: this.filter,
            layout:
              this._unevaluatedLayout && this._unevaluatedLayout.serialize(),
            paint:
              this._transitionablePaint &&
              this._transitionablePaint.serialize(),
          };
          return (
            this.visibility &&
              ((s.layout = s.layout || {}),
              (s.layout.visibility = this.visibility)),
            Le(
              s,
              (c, p) =>
                !(
                  c === void 0 ||
                  (p === "layout" && !Object.keys(c).length) ||
                  (p === "paint" && !Object.keys(c).length)
                )
            )
          );
        }
        _validate(s, c, p, y, w = {}) {
          return (
            (!w || w.validate !== !1) &&
            Pf(
              this,
              s.call(zl, {
                key: c,
                layerType: this.type,
                objectKey: p,
                value: y,
                styleSpec: je,
                style: { glyphs: !0, sprite: !0 },
              })
            )
          );
        }
        is3D() {
          return !1;
        }
        isTileClipped() {
          return !1;
        }
        hasOffscreenPass() {
          return !1;
        }
        resize() {}
        isStateDependent() {
          for (let s in this.paint._values) {
            let c = this.paint.get(s);
            if (
              c instanceof fs &&
              Tl(c.property.specification) &&
              (c.value.kind === "source" || c.value.kind === "composite") &&
              c.value.isStateDependent
            )
              return !0;
          }
          return !1;
        }
      }
      let Nf = {
        Int8: Int8Array,
        Uint8: Uint8Array,
        Int16: Int16Array,
        Uint16: Uint16Array,
        Int32: Int32Array,
        Uint32: Uint32Array,
        Float32: Float32Array,
      };
      class Ol {
        constructor(s, c) {
          (this._structArray = s),
            (this._pos1 = c * this.size),
            (this._pos2 = this._pos1 / 2),
            (this._pos4 = this._pos1 / 4),
            (this._pos8 = this._pos1 / 8);
        }
      }
      class qr {
        constructor() {
          (this.isTransferred = !1), (this.capacity = -1), this.resize(0);
        }
        static serialize(s, c) {
          return (
            s._trim(),
            c && ((s.isTransferred = !0), c.push(s.arrayBuffer)),
            { length: s.length, arrayBuffer: s.arrayBuffer }
          );
        }
        static deserialize(s) {
          let c = Object.create(this.prototype);
          return (
            (c.arrayBuffer = s.arrayBuffer),
            (c.length = s.length),
            (c.capacity = s.arrayBuffer.byteLength / c.bytesPerElement),
            c._refreshViews(),
            c
          );
        }
        _trim() {
          this.length !== this.capacity &&
            ((this.capacity = this.length),
            (this.arrayBuffer = this.arrayBuffer.slice(
              0,
              this.length * this.bytesPerElement
            )),
            this._refreshViews());
        }
        clear() {
          this.length = 0;
        }
        resize(s) {
          this.reserve(s), (this.length = s);
        }
        reserve(s) {
          if (s > this.capacity) {
            (this.capacity = Math.max(s, Math.floor(5 * this.capacity), 128)),
              (this.arrayBuffer = new ArrayBuffer(
                this.capacity * this.bytesPerElement
              ));
            let c = this.uint8;
            this._refreshViews(), c && this.uint8.set(c);
          }
        }
        _refreshViews() {
          throw new Error(
            "_refreshViews() must be implemented by each concrete StructArray layout"
          );
        }
      }
      function an(l, s = 1) {
        let c = 0,
          p = 0;
        return {
          members: l.map((y) => {
            let w = Nf[y.type].BYTES_PER_ELEMENT,
              k = (c = Of(c, Math.max(s, w))),
              C = y.components || 1;
            return (
              (p = Math.max(p, w)),
              (c += w * C),
              { name: y.name, type: y.type, components: C, offset: k }
            );
          }),
          size: Of(c, Math.max(p, s)),
          alignment: s,
        };
      }
      function Of(l, s) {
        return Math.ceil(l / s) * s;
      }
      class _c extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c) {
          let p = this.length;
          return this.resize(p + 1), this.emplace(p, s, c);
        }
        emplace(s, c, p) {
          let y = 2 * s;
          return (this.int16[y + 0] = c), (this.int16[y + 1] = p), s;
        }
      }
      (_c.prototype.bytesPerElement = 4), Nt("StructArrayLayout2i4", _c);
      class Iu extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p) {
          let y = this.length;
          return this.resize(y + 1), this.emplace(y, s, c, p);
        }
        emplace(s, c, p, y) {
          let w = 3 * s;
          return (
            (this.int16[w + 0] = c),
            (this.int16[w + 1] = p),
            (this.int16[w + 2] = y),
            s
          );
        }
      }
      (Iu.prototype.bytesPerElement = 6), Nt("StructArrayLayout3i6", Iu);
      class ma extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y) {
          let w = this.length;
          return this.resize(w + 1), this.emplace(w, s, c, p, y);
        }
        emplace(s, c, p, y, w) {
          let k = 4 * s;
          return (
            (this.int16[k + 0] = c),
            (this.int16[k + 1] = p),
            (this.int16[k + 2] = y),
            (this.int16[k + 3] = w),
            s
          );
        }
      }
      (ma.prototype.bytesPerElement = 8), Nt("StructArrayLayout4i8", ma);
      class ch extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k) {
          let C = this.length;
          return this.resize(C + 1), this.emplace(C, s, c, p, y, w, k);
        }
        emplace(s, c, p, y, w, k, C) {
          let A = 6 * s;
          return (
            (this.int16[A + 0] = c),
            (this.int16[A + 1] = p),
            (this.int16[A + 2] = y),
            (this.int16[A + 3] = w),
            (this.int16[A + 4] = k),
            (this.int16[A + 5] = C),
            s
          );
        }
      }
      (ch.prototype.bytesPerElement = 12), Nt("StructArrayLayout2i4i12", ch);
      class uh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k) {
          let C = this.length;
          return this.resize(C + 1), this.emplace(C, s, c, p, y, w, k);
        }
        emplace(s, c, p, y, w, k, C) {
          let A = 4 * s,
            P = 8 * s;
          return (
            (this.int16[A + 0] = c),
            (this.int16[A + 1] = p),
            (this.uint8[P + 4] = y),
            (this.uint8[P + 5] = w),
            (this.uint8[P + 6] = k),
            (this.uint8[P + 7] = C),
            s
          );
        }
      }
      (uh.prototype.bytesPerElement = 8), Nt("StructArrayLayout2i4ub8", uh);
      class xc extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s, c) {
          let p = this.length;
          return this.resize(p + 1), this.emplace(p, s, c);
        }
        emplace(s, c, p) {
          let y = 2 * s;
          return (this.float32[y + 0] = c), (this.float32[y + 1] = p), s;
        }
      }
      (xc.prototype.bytesPerElement = 8), Nt("StructArrayLayout2f8", xc);
      class dh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k, C, A, P, N) {
          let O = this.length;
          return (
            this.resize(O + 1), this.emplace(O, s, c, p, y, w, k, C, A, P, N)
          );
        }
        emplace(s, c, p, y, w, k, C, A, P, N, O) {
          let j = 10 * s;
          return (
            (this.uint16[j + 0] = c),
            (this.uint16[j + 1] = p),
            (this.uint16[j + 2] = y),
            (this.uint16[j + 3] = w),
            (this.uint16[j + 4] = k),
            (this.uint16[j + 5] = C),
            (this.uint16[j + 6] = A),
            (this.uint16[j + 7] = P),
            (this.uint16[j + 8] = N),
            (this.uint16[j + 9] = O),
            s
          );
        }
      }
      (dh.prototype.bytesPerElement = 20), Nt("StructArrayLayout10ui20", dh);
      class Pu extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k, C, A, P, N, O, j) {
          let W = this.length;
          return (
            this.resize(W + 1),
            this.emplace(W, s, c, p, y, w, k, C, A, P, N, O, j)
          );
        }
        emplace(s, c, p, y, w, k, C, A, P, N, O, j, W) {
          let K = 12 * s;
          return (
            (this.int16[K + 0] = c),
            (this.int16[K + 1] = p),
            (this.int16[K + 2] = y),
            (this.int16[K + 3] = w),
            (this.uint16[K + 4] = k),
            (this.uint16[K + 5] = C),
            (this.uint16[K + 6] = A),
            (this.uint16[K + 7] = P),
            (this.int16[K + 8] = N),
            (this.int16[K + 9] = O),
            (this.int16[K + 10] = j),
            (this.int16[K + 11] = W),
            s
          );
        }
      }
      (Pu.prototype.bytesPerElement = 24), Nt("StructArrayLayout4i4ui4i24", Pu);
      class hh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p) {
          let y = this.length;
          return this.resize(y + 1), this.emplace(y, s, c, p);
        }
        emplace(s, c, p, y) {
          let w = 3 * s;
          return (
            (this.float32[w + 0] = c),
            (this.float32[w + 1] = p),
            (this.float32[w + 2] = y),
            s
          );
        }
      }
      (hh.prototype.bytesPerElement = 12), Nt("StructArrayLayout3f12", hh);
      class ph extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint32 = new Uint32Array(this.arrayBuffer));
        }
        emplaceBack(s) {
          let c = this.length;
          return this.resize(c + 1), this.emplace(c, s);
        }
        emplace(s, c) {
          return (this.uint32[1 * s + 0] = c), s;
        }
      }
      (ph.prototype.bytesPerElement = 4), Nt("StructArrayLayout1ul4", ph);
      class Ks extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer)),
            (this.uint32 = new Uint32Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k, C, A, P) {
          let N = this.length;
          return this.resize(N + 1), this.emplace(N, s, c, p, y, w, k, C, A, P);
        }
        emplace(s, c, p, y, w, k, C, A, P, N) {
          let O = 10 * s,
            j = 5 * s;
          return (
            (this.int16[O + 0] = c),
            (this.int16[O + 1] = p),
            (this.int16[O + 2] = y),
            (this.int16[O + 3] = w),
            (this.int16[O + 4] = k),
            (this.int16[O + 5] = C),
            (this.uint32[j + 3] = A),
            (this.uint16[O + 8] = P),
            (this.uint16[O + 9] = N),
            s
          );
        }
      }
      (Ks.prototype.bytesPerElement = 20),
        Nt("StructArrayLayout6i1ul2ui20", Ks);
      class Du extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k) {
          let C = this.length;
          return this.resize(C + 1), this.emplace(C, s, c, p, y, w, k);
        }
        emplace(s, c, p, y, w, k, C) {
          let A = 6 * s;
          return (
            (this.int16[A + 0] = c),
            (this.int16[A + 1] = p),
            (this.int16[A + 2] = y),
            (this.int16[A + 3] = w),
            (this.int16[A + 4] = k),
            (this.int16[A + 5] = C),
            s
          );
        }
      }
      (Du.prototype.bytesPerElement = 12), Nt("StructArrayLayout2i2i2i12", Du);
      class wc extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w) {
          let k = this.length;
          return this.resize(k + 1), this.emplace(k, s, c, p, y, w);
        }
        emplace(s, c, p, y, w, k) {
          let C = 4 * s,
            A = 8 * s;
          return (
            (this.float32[C + 0] = c),
            (this.float32[C + 1] = p),
            (this.float32[C + 2] = y),
            (this.int16[A + 6] = w),
            (this.int16[A + 7] = k),
            s
          );
        }
      }
      (wc.prototype.bytesPerElement = 16), Nt("StructArrayLayout2f1f2i16", wc);
      class Lu extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y) {
          let w = this.length;
          return this.resize(w + 1), this.emplace(w, s, c, p, y);
        }
        emplace(s, c, p, y, w) {
          let k = 12 * s,
            C = 3 * s;
          return (
            (this.uint8[k + 0] = c),
            (this.uint8[k + 1] = p),
            (this.float32[C + 1] = y),
            (this.float32[C + 2] = w),
            s
          );
        }
      }
      (Lu.prototype.bytesPerElement = 12), Nt("StructArrayLayout2ub2f12", Lu);
      class Bl extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p) {
          let y = this.length;
          return this.resize(y + 1), this.emplace(y, s, c, p);
        }
        emplace(s, c, p, y) {
          let w = 3 * s;
          return (
            (this.uint16[w + 0] = c),
            (this.uint16[w + 1] = p),
            (this.uint16[w + 2] = y),
            s
          );
        }
      }
      (Bl.prototype.bytesPerElement = 6), Nt("StructArrayLayout3ui6", Bl);
      class fh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer)),
            (this.uint32 = new Uint32Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y, w, k, C, A, P, N, O, j, W, K, ie, ae, pe) {
          let Pe = this.length;
          return (
            this.resize(Pe + 1),
            this.emplace(
              Pe,
              s,
              c,
              p,
              y,
              w,
              k,
              C,
              A,
              P,
              N,
              O,
              j,
              W,
              K,
              ie,
              ae,
              pe
            )
          );
        }
        emplace(s, c, p, y, w, k, C, A, P, N, O, j, W, K, ie, ae, pe, Pe) {
          let ye = 24 * s,
            Se = 12 * s,
            We = 48 * s;
          return (
            (this.int16[ye + 0] = c),
            (this.int16[ye + 1] = p),
            (this.uint16[ye + 2] = y),
            (this.uint16[ye + 3] = w),
            (this.uint32[Se + 2] = k),
            (this.uint32[Se + 3] = C),
            (this.uint32[Se + 4] = A),
            (this.uint16[ye + 10] = P),
            (this.uint16[ye + 11] = N),
            (this.uint16[ye + 12] = O),
            (this.float32[Se + 7] = j),
            (this.float32[Se + 8] = W),
            (this.uint8[We + 36] = K),
            (this.uint8[We + 37] = ie),
            (this.uint8[We + 38] = ae),
            (this.uint32[Se + 10] = pe),
            (this.int16[ye + 22] = Pe),
            s
          );
        }
      }
      (fh.prototype.bytesPerElement = 48),
        Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48", fh);
      class Rl extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.int16 = new Int16Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer)),
            (this.uint32 = new Uint32Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(
          s,
          c,
          p,
          y,
          w,
          k,
          C,
          A,
          P,
          N,
          O,
          j,
          W,
          K,
          ie,
          ae,
          pe,
          Pe,
          ye,
          Se,
          We,
          tt,
          Dt,
          Qt,
          It,
          Et,
          xt,
          Ut
        ) {
          let St = this.length;
          return (
            this.resize(St + 1),
            this.emplace(
              St,
              s,
              c,
              p,
              y,
              w,
              k,
              C,
              A,
              P,
              N,
              O,
              j,
              W,
              K,
              ie,
              ae,
              pe,
              Pe,
              ye,
              Se,
              We,
              tt,
              Dt,
              Qt,
              It,
              Et,
              xt,
              Ut
            )
          );
        }
        emplace(
          s,
          c,
          p,
          y,
          w,
          k,
          C,
          A,
          P,
          N,
          O,
          j,
          W,
          K,
          ie,
          ae,
          pe,
          Pe,
          ye,
          Se,
          We,
          tt,
          Dt,
          Qt,
          It,
          Et,
          xt,
          Ut,
          St
        ) {
          let mt = 32 * s,
            ni = 16 * s;
          return (
            (this.int16[mt + 0] = c),
            (this.int16[mt + 1] = p),
            (this.int16[mt + 2] = y),
            (this.int16[mt + 3] = w),
            (this.int16[mt + 4] = k),
            (this.int16[mt + 5] = C),
            (this.int16[mt + 6] = A),
            (this.int16[mt + 7] = P),
            (this.uint16[mt + 8] = N),
            (this.uint16[mt + 9] = O),
            (this.uint16[mt + 10] = j),
            (this.uint16[mt + 11] = W),
            (this.uint16[mt + 12] = K),
            (this.uint16[mt + 13] = ie),
            (this.uint16[mt + 14] = ae),
            (this.uint16[mt + 15] = pe),
            (this.uint16[mt + 16] = Pe),
            (this.uint16[mt + 17] = ye),
            (this.uint16[mt + 18] = Se),
            (this.uint16[mt + 19] = We),
            (this.uint16[mt + 20] = tt),
            (this.uint16[mt + 21] = Dt),
            (this.uint16[mt + 22] = Qt),
            (this.uint32[ni + 12] = It),
            (this.float32[ni + 13] = Et),
            (this.float32[ni + 14] = xt),
            (this.uint16[mt + 30] = Ut),
            (this.uint16[mt + 31] = St),
            s
          );
        }
      }
      (Rl.prototype.bytesPerElement = 64),
        Nt("StructArrayLayout8i15ui1ul2f2ui64", Rl);
      class ga extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s) {
          let c = this.length;
          return this.resize(c + 1), this.emplace(c, s);
        }
        emplace(s, c) {
          return (this.float32[1 * s + 0] = c), s;
        }
      }
      (ga.prototype.bytesPerElement = 4), Nt("StructArrayLayout1f4", ga);
      class mh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p) {
          let y = this.length;
          return this.resize(y + 1), this.emplace(y, s, c, p);
        }
        emplace(s, c, p, y) {
          let w = 3 * s;
          return (
            (this.uint16[6 * s + 0] = c),
            (this.float32[w + 1] = p),
            (this.float32[w + 2] = y),
            s
          );
        }
      }
      (mh.prototype.bytesPerElement = 12), Nt("StructArrayLayout1ui2f12", mh);
      class Fu extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint32 = new Uint32Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p) {
          let y = this.length;
          return this.resize(y + 1), this.emplace(y, s, c, p);
        }
        emplace(s, c, p, y) {
          let w = 4 * s;
          return (
            (this.uint32[2 * s + 0] = c),
            (this.uint16[w + 2] = p),
            (this.uint16[w + 3] = y),
            s
          );
        }
      }
      (Fu.prototype.bytesPerElement = 8), Nt("StructArrayLayout1ul2ui8", Fu);
      class Ba extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s, c) {
          let p = this.length;
          return this.resize(p + 1), this.emplace(p, s, c);
        }
        emplace(s, c, p) {
          let y = 2 * s;
          return (this.uint16[y + 0] = c), (this.uint16[y + 1] = p), s;
        }
      }
      (Ba.prototype.bytesPerElement = 4), Nt("StructArrayLayout2ui4", Ba);
      class gh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.uint16 = new Uint16Array(this.arrayBuffer));
        }
        emplaceBack(s) {
          let c = this.length;
          return this.resize(c + 1), this.emplace(c, s);
        }
        emplace(s, c) {
          return (this.uint16[1 * s + 0] = c), s;
        }
      }
      (gh.prototype.bytesPerElement = 2), Nt("StructArrayLayout1ui2", gh);
      class yh extends qr {
        _refreshViews() {
          (this.uint8 = new Uint8Array(this.arrayBuffer)),
            (this.float32 = new Float32Array(this.arrayBuffer));
        }
        emplaceBack(s, c, p, y) {
          let w = this.length;
          return this.resize(w + 1), this.emplace(w, s, c, p, y);
        }
        emplace(s, c, p, y, w) {
          let k = 4 * s;
          return (
            (this.float32[k + 0] = c),
            (this.float32[k + 1] = p),
            (this.float32[k + 2] = y),
            (this.float32[k + 3] = w),
            s
          );
        }
      }
      (yh.prototype.bytesPerElement = 16), Nt("StructArrayLayout4f16", yh);
      class bh extends Ol {
        get anchorPointX() {
          return this._structArray.int16[this._pos2 + 0];
        }
        get anchorPointY() {
          return this._structArray.int16[this._pos2 + 1];
        }
        get x1() {
          return this._structArray.int16[this._pos2 + 2];
        }
        get y1() {
          return this._structArray.int16[this._pos2 + 3];
        }
        get x2() {
          return this._structArray.int16[this._pos2 + 4];
        }
        get y2() {
          return this._structArray.int16[this._pos2 + 5];
        }
        get featureIndex() {
          return this._structArray.uint32[this._pos4 + 3];
        }
        get sourceLayerIndex() {
          return this._structArray.uint16[this._pos2 + 8];
        }
        get bucketIndex() {
          return this._structArray.uint16[this._pos2 + 9];
        }
        get anchorPoint() {
          return new b(this.anchorPointX, this.anchorPointY);
        }
      }
      bh.prototype.size = 20;
      class Bf extends Ks {
        get(s) {
          return new bh(this, s);
        }
      }
      Nt("CollisionBoxArray", Bf);
      class v extends Ol {
        get anchorX() {
          return this._structArray.int16[this._pos2 + 0];
        }
        get anchorY() {
          return this._structArray.int16[this._pos2 + 1];
        }
        get glyphStartIndex() {
          return this._structArray.uint16[this._pos2 + 2];
        }
        get numGlyphs() {
          return this._structArray.uint16[this._pos2 + 3];
        }
        get vertexStartIndex() {
          return this._structArray.uint32[this._pos4 + 2];
        }
        get lineStartIndex() {
          return this._structArray.uint32[this._pos4 + 3];
        }
        get lineLength() {
          return this._structArray.uint32[this._pos4 + 4];
        }
        get segment() {
          return this._structArray.uint16[this._pos2 + 10];
        }
        get lowerSize() {
          return this._structArray.uint16[this._pos2 + 11];
        }
        get upperSize() {
          return this._structArray.uint16[this._pos2 + 12];
        }
        get lineOffsetX() {
          return this._structArray.float32[this._pos4 + 7];
        }
        get lineOffsetY() {
          return this._structArray.float32[this._pos4 + 8];
        }
        get writingMode() {
          return this._structArray.uint8[this._pos1 + 36];
        }
        get placedOrientation() {
          return this._structArray.uint8[this._pos1 + 37];
        }
        set placedOrientation(s) {
          this._structArray.uint8[this._pos1 + 37] = s;
        }
        get hidden() {
          return this._structArray.uint8[this._pos1 + 38];
        }
        set hidden(s) {
          this._structArray.uint8[this._pos1 + 38] = s;
        }
        get crossTileID() {
          return this._structArray.uint32[this._pos4 + 10];
        }
        set crossTileID(s) {
          this._structArray.uint32[this._pos4 + 10] = s;
        }
        get associatedIconIndex() {
          return this._structArray.int16[this._pos2 + 22];
        }
      }
      v.prototype.size = 48;
      class a extends fh {
        get(s) {
          return new v(this, s);
        }
      }
      Nt("PlacedSymbolArray", a);
      class d extends Ol {
        get anchorX() {
          return this._structArray.int16[this._pos2 + 0];
        }
        get anchorY() {
          return this._structArray.int16[this._pos2 + 1];
        }
        get rightJustifiedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 2];
        }
        get centerJustifiedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 3];
        }
        get leftJustifiedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 4];
        }
        get verticalPlacedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 5];
        }
        get placedIconSymbolIndex() {
          return this._structArray.int16[this._pos2 + 6];
        }
        get verticalPlacedIconSymbolIndex() {
          return this._structArray.int16[this._pos2 + 7];
        }
        get key() {
          return this._structArray.uint16[this._pos2 + 8];
        }
        get textBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 9];
        }
        get textBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 10];
        }
        get verticalTextBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 11];
        }
        get verticalTextBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 12];
        }
        get iconBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 13];
        }
        get iconBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 14];
        }
        get verticalIconBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 15];
        }
        get verticalIconBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 16];
        }
        get featureIndex() {
          return this._structArray.uint16[this._pos2 + 17];
        }
        get numHorizontalGlyphVertices() {
          return this._structArray.uint16[this._pos2 + 18];
        }
        get numVerticalGlyphVertices() {
          return this._structArray.uint16[this._pos2 + 19];
        }
        get numIconVertices() {
          return this._structArray.uint16[this._pos2 + 20];
        }
        get numVerticalIconVertices() {
          return this._structArray.uint16[this._pos2 + 21];
        }
        get useRuntimeCollisionCircles() {
          return this._structArray.uint16[this._pos2 + 22];
        }
        get crossTileID() {
          return this._structArray.uint32[this._pos4 + 12];
        }
        set crossTileID(s) {
          this._structArray.uint32[this._pos4 + 12] = s;
        }
        get textBoxScale() {
          return this._structArray.float32[this._pos4 + 13];
        }
        get collisionCircleDiameter() {
          return this._structArray.float32[this._pos4 + 14];
        }
        get textAnchorOffsetStartIndex() {
          return this._structArray.uint16[this._pos2 + 30];
        }
        get textAnchorOffsetEndIndex() {
          return this._structArray.uint16[this._pos2 + 31];
        }
      }
      d.prototype.size = 64;
      class f extends Rl {
        get(s) {
          return new d(this, s);
        }
      }
      Nt("SymbolInstanceArray", f);
      class g extends ga {
        getoffsetX(s) {
          return this.float32[1 * s + 0];
        }
      }
      Nt("GlyphOffsetArray", g);
      class x extends Iu {
        getx(s) {
          return this.int16[3 * s + 0];
        }
        gety(s) {
          return this.int16[3 * s + 1];
        }
        gettileUnitDistanceFromAnchor(s) {
          return this.int16[3 * s + 2];
        }
      }
      Nt("SymbolLineVertexArray", x);
      class E extends Ol {
        get textAnchor() {
          return this._structArray.uint16[this._pos2 + 0];
        }
        get textOffset0() {
          return this._structArray.float32[this._pos4 + 1];
        }
        get textOffset1() {
          return this._structArray.float32[this._pos4 + 2];
        }
      }
      E.prototype.size = 12;
      class M extends mh {
        get(s) {
          return new E(this, s);
        }
      }
      Nt("TextAnchorOffsetArray", M);
      class I extends Ol {
        get featureIndex() {
          return this._structArray.uint32[this._pos4 + 0];
        }
        get sourceLayerIndex() {
          return this._structArray.uint16[this._pos2 + 2];
        }
        get bucketIndex() {
          return this._structArray.uint16[this._pos2 + 3];
        }
      }
      I.prototype.size = 8;
      class z extends Fu {
        get(s) {
          return new I(this, s);
        }
      }
      Nt("FeatureIndexArray", z);
      class B extends _c {}
      class U extends _c {}
      class Z extends _c {}
      class se extends ch {}
      class oe extends uh {}
      class le extends xc {}
      class ee extends dh {}
      class _e extends Pu {}
      class Be extends hh {}
      class he extends ph {}
      class Ee extends Du {}
      class Ue extends Lu {}
      class Ve extends Bl {}
      class Ge extends Ba {}
      let ot = an([{ name: "a_pos", components: 2, type: "Int16" }], 4),
        { members: rt } = ot;
      class nt {
        constructor(s = []) {
          this.segments = s;
        }
        prepareSegment(s, c, p, y) {
          let w = this.segments[this.segments.length - 1];
          return (
            s > nt.MAX_VERTEX_ARRAY_LENGTH &&
              qe(
                `Max vertices per segment is ${nt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`
              ),
            (!w ||
              w.vertexLength + s > nt.MAX_VERTEX_ARRAY_LENGTH ||
              w.sortKey !== y) &&
              ((w = {
                vertexOffset: c.length,
                primitiveOffset: p.length,
                vertexLength: 0,
                primitiveLength: 0,
              }),
              y !== void 0 && (w.sortKey = y),
              this.segments.push(w)),
            w
          );
        }
        get() {
          return this.segments;
        }
        destroy() {
          for (let s of this.segments)
            for (let c in s.vaos) s.vaos[c].destroy();
        }
        static simpleSegment(s, c, p, y) {
          return new nt([
            {
              vertexOffset: s,
              primitiveOffset: c,
              vertexLength: p,
              primitiveLength: y,
              vaos: {},
              sortKey: 0,
            },
          ]);
        }
      }
      function Ft(l, s) {
        return (
          256 * (l = be(Math.floor(l), 0, 255)) + be(Math.floor(s), 0, 255)
        );
      }
      (nt.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1),
        Nt("SegmentVector", nt);
      let ki = an([
        { name: "a_pattern_from", components: 4, type: "Uint16" },
        { name: "a_pattern_to", components: 4, type: "Uint16" },
        { name: "a_pixel_ratio_from", components: 1, type: "Uint16" },
        { name: "a_pixel_ratio_to", components: 1, type: "Uint16" },
      ]);
      var kt = { exports: {} },
        li = { exports: {} };
      li.exports = function (l, s) {
        var c, p, y, w, k, C, A, P;
        for (
          p = l.length - (c = 3 & l.length),
            y = s,
            k = 3432918353,
            C = 461845907,
            P = 0;
          P < p;

        )
          (A =
            (255 & l.charCodeAt(P)) |
            ((255 & l.charCodeAt(++P)) << 8) |
            ((255 & l.charCodeAt(++P)) << 16) |
            ((255 & l.charCodeAt(++P)) << 24)),
            ++P,
            (y =
              27492 +
              (65535 &
                (w =
                  (5 *
                    (65535 &
                      (y =
                        ((y ^= A =
                          ((65535 &
                            (A =
                              ((A =
                                ((65535 & A) * k +
                                  ((((A >>> 16) * k) & 65535) << 16)) &
                                4294967295) <<
                                15) |
                              (A >>> 17))) *
                            C +
                            ((((A >>> 16) * C) & 65535) << 16)) &
                          4294967295) <<
                          13) |
                        (y >>> 19))) +
                    (((5 * (y >>> 16)) & 65535) << 16)) &
                  4294967295)) +
              (((58964 + (w >>> 16)) & 65535) << 16));
        switch (((A = 0), c)) {
          case 3:
            A ^= (255 & l.charCodeAt(P + 2)) << 16;
          case 2:
            A ^= (255 & l.charCodeAt(P + 1)) << 8;
          case 1:
            y ^= A =
              ((65535 &
                (A =
                  ((A =
                    ((65535 & (A ^= 255 & l.charCodeAt(P))) * k +
                      ((((A >>> 16) * k) & 65535) << 16)) &
                    4294967295) <<
                    15) |
                  (A >>> 17))) *
                C +
                ((((A >>> 16) * C) & 65535) << 16)) &
              4294967295;
        }
        return (
          (y ^= l.length),
          (y =
            (2246822507 * (65535 & (y ^= y >>> 16)) +
              (((2246822507 * (y >>> 16)) & 65535) << 16)) &
            4294967295),
          (y =
            (3266489909 * (65535 & (y ^= y >>> 13)) +
              (((3266489909 * (y >>> 16)) & 65535) << 16)) &
            4294967295),
          (y ^= y >>> 16) >>> 0
        );
      };
      var Ci = li.exports,
        ji = { exports: {} };
      ji.exports = function (l, s) {
        for (var c, p = l.length, y = s ^ p, w = 0; p >= 4; )
          (c =
            1540483477 *
              (65535 &
                (c =
                  (255 & l.charCodeAt(w)) |
                  ((255 & l.charCodeAt(++w)) << 8) |
                  ((255 & l.charCodeAt(++w)) << 16) |
                  ((255 & l.charCodeAt(++w)) << 24))) +
            (((1540483477 * (c >>> 16)) & 65535) << 16)),
            (y =
              (1540483477 * (65535 & y) +
                (((1540483477 * (y >>> 16)) & 65535) << 16)) ^
              (c =
                1540483477 * (65535 & (c ^= c >>> 24)) +
                (((1540483477 * (c >>> 16)) & 65535) << 16))),
            (p -= 4),
            ++w;
        switch (p) {
          case 3:
            y ^= (255 & l.charCodeAt(w + 2)) << 16;
          case 2:
            y ^= (255 & l.charCodeAt(w + 1)) << 8;
          case 1:
            y =
              1540483477 * (65535 & (y ^= 255 & l.charCodeAt(w))) +
              (((1540483477 * (y >>> 16)) & 65535) << 16);
        }
        return (
          (y =
            1540483477 * (65535 & (y ^= y >>> 13)) +
            (((1540483477 * (y >>> 16)) & 65535) << 16)),
          (y ^= y >>> 15) >>> 0
        );
      };
      var pi = Ci,
        Ei = ji.exports;
      (kt.exports = pi), (kt.exports.murmur3 = pi), (kt.exports.murmur2 = Ei);
      var Ti = u(kt.exports);
      class Br {
        constructor() {
          (this.ids = []), (this.positions = []), (this.indexed = !1);
        }
        add(s, c, p, y) {
          this.ids.push(wr(s)), this.positions.push(c, p, y);
        }
        getPositions(s) {
          if (!this.indexed)
            throw new Error(
              "Trying to get index, but feature positions are not indexed"
            );
          let c = wr(s),
            p = 0,
            y = this.ids.length - 1;
          for (; p < y; ) {
            let k = (p + y) >> 1;
            this.ids[k] >= c ? (y = k) : (p = k + 1);
          }
          let w = [];
          for (; this.ids[p] === c; )
            w.push({
              index: this.positions[3 * p],
              start: this.positions[3 * p + 1],
              end: this.positions[3 * p + 2],
            }),
              p++;
          return w;
        }
        static serialize(s, c) {
          let p = new Float64Array(s.ids),
            y = new Uint32Array(s.positions);
          return (
            Ao(p, y, 0, p.length - 1),
            c && c.push(p.buffer, y.buffer),
            { ids: p, positions: y }
          );
        }
        static deserialize(s) {
          let c = new Br();
          return (
            (c.ids = s.ids), (c.positions = s.positions), (c.indexed = !0), c
          );
        }
      }
      function wr(l) {
        let s = +l;
        return !isNaN(s) && s <= Number.MAX_SAFE_INTEGER ? s : Ti(String(l));
      }
      function Ao(l, s, c, p) {
        for (; c < p; ) {
          let y = l[(c + p) >> 1],
            w = c - 1,
            k = p + 1;
          for (;;) {
            do w++;
            while (l[w] < y);
            do k--;
            while (l[k] > y);
            if (w >= k) break;
            hn(l, w, k),
              hn(s, 3 * w, 3 * k),
              hn(s, 3 * w + 1, 3 * k + 1),
              hn(s, 3 * w + 2, 3 * k + 2);
          }
          k - c < p - k
            ? (Ao(l, s, c, k), (c = k + 1))
            : (Ao(l, s, k + 1, p), (p = k));
        }
      }
      function hn(l, s, c) {
        let p = l[s];
        (l[s] = l[c]), (l[c] = p);
      }
      Nt("FeaturePositionMap", Br);
      class Cr {
        constructor(s, c) {
          (this.gl = s.gl), (this.location = c);
        }
      }
      class Yn extends Cr {
        constructor(s, c) {
          super(s, c), (this.current = 0);
        }
        set(s) {
          this.current !== s &&
            ((this.current = s), this.gl.uniform1f(this.location, s));
        }
      }
      class gs extends Cr {
        constructor(s, c) {
          super(s, c), (this.current = [0, 0, 0, 0]);
        }
        set(s) {
          (s[0] === this.current[0] &&
            s[1] === this.current[1] &&
            s[2] === this.current[2] &&
            s[3] === this.current[3]) ||
            ((this.current = s),
            this.gl.uniform4f(this.location, s[0], s[1], s[2], s[3]));
        }
      }
      class Is extends Cr {
        constructor(s, c) {
          super(s, c), (this.current = tr.transparent);
        }
        set(s) {
          (s.r === this.current.r &&
            s.g === this.current.g &&
            s.b === this.current.b &&
            s.a === this.current.a) ||
            ((this.current = s),
            this.gl.uniform4f(this.location, s.r, s.g, s.b, s.a));
        }
      }
      let Ra = new Float32Array(16);
      function Ua(l) {
        return [Ft(255 * l.r, 255 * l.g), Ft(255 * l.b, 255 * l.a)];
      }
      class Ps {
        constructor(s, c, p) {
          (this.value = s),
            (this.uniformNames = c.map((y) => `u_${y}`)),
            (this.type = p);
        }
        setUniform(s, c, p) {
          s.set(p.constantOr(this.value));
        }
        getBinding(s, c, p) {
          return this.type === "color" ? new Is(s, c) : new Yn(s, c);
        }
      }
      class ys {
        constructor(s, c) {
          (this.uniformNames = c.map((p) => `u_${p}`)),
            (this.patternFrom = null),
            (this.patternTo = null),
            (this.pixelRatioFrom = 1),
            (this.pixelRatioTo = 1);
        }
        setConstantPatternPositions(s, c) {
          (this.pixelRatioFrom = c.pixelRatio),
            (this.pixelRatioTo = s.pixelRatio),
            (this.patternFrom = c.tlbr),
            (this.patternTo = s.tlbr);
        }
        setUniform(s, c, p, y) {
          let w =
            y === "u_pattern_to"
              ? this.patternTo
              : y === "u_pattern_from"
              ? this.patternFrom
              : y === "u_pixel_ratio_to"
              ? this.pixelRatioTo
              : y === "u_pixel_ratio_from"
              ? this.pixelRatioFrom
              : null;
          w && s.set(w);
        }
        getBinding(s, c, p) {
          return p.substr(0, 9) === "u_pattern" ? new gs(s, c) : new Yn(s, c);
        }
      }
      class $r {
        constructor(s, c, p, y) {
          (this.expression = s),
            (this.type = p),
            (this.maxValue = 0),
            (this.paintVertexAttributes = c.map((w) => ({
              name: `a_${w}`,
              type: "Float32",
              components: p === "color" ? 2 : 1,
              offset: 0,
            }))),
            (this.paintVertexArray = new y());
        }
        populatePaintArray(s, c, p, y, w) {
          let k = this.paintVertexArray.length,
            C = this.expression.evaluate(new Mr(0), c, {}, y, [], w);
          this.paintVertexArray.resize(s), this._setPaintValue(k, s, C);
        }
        updatePaintArray(s, c, p, y) {
          let w = this.expression.evaluate({ zoom: 0 }, p, y);
          this._setPaintValue(s, c, w);
        }
        _setPaintValue(s, c, p) {
          if (this.type === "color") {
            let y = Ua(p);
            for (let w = s; w < c; w++)
              this.paintVertexArray.emplace(w, y[0], y[1]);
          } else {
            for (let y = s; y < c; y++) this.paintVertexArray.emplace(y, p);
            this.maxValue = Math.max(this.maxValue, Math.abs(p));
          }
        }
        upload(s) {
          this.paintVertexArray &&
            this.paintVertexArray.arrayBuffer &&
            (this.paintVertexBuffer && this.paintVertexBuffer.buffer
              ? this.paintVertexBuffer.updateData(this.paintVertexArray)
              : (this.paintVertexBuffer = s.createVertexBuffer(
                  this.paintVertexArray,
                  this.paintVertexAttributes,
                  this.expression.isStateDependent
                )));
        }
        destroy() {
          this.paintVertexBuffer && this.paintVertexBuffer.destroy();
        }
      }
      class Ar {
        constructor(s, c, p, y, w, k) {
          (this.expression = s),
            (this.uniformNames = c.map((C) => `u_${C}_t`)),
            (this.type = p),
            (this.useIntegerZoom = y),
            (this.zoom = w),
            (this.maxValue = 0),
            (this.paintVertexAttributes = c.map((C) => ({
              name: `a_${C}`,
              type: "Float32",
              components: p === "color" ? 4 : 2,
              offset: 0,
            }))),
            (this.paintVertexArray = new k());
        }
        populatePaintArray(s, c, p, y, w) {
          let k = this.expression.evaluate(new Mr(this.zoom), c, {}, y, [], w),
            C = this.expression.evaluate(
              new Mr(this.zoom + 1),
              c,
              {},
              y,
              [],
              w
            ),
            A = this.paintVertexArray.length;
          this.paintVertexArray.resize(s), this._setPaintValue(A, s, k, C);
        }
        updatePaintArray(s, c, p, y) {
          let w = this.expression.evaluate({ zoom: this.zoom }, p, y),
            k = this.expression.evaluate({ zoom: this.zoom + 1 }, p, y);
          this._setPaintValue(s, c, w, k);
        }
        _setPaintValue(s, c, p, y) {
          if (this.type === "color") {
            let w = Ua(p),
              k = Ua(y);
            for (let C = s; C < c; C++)
              this.paintVertexArray.emplace(C, w[0], w[1], k[0], k[1]);
          } else {
            for (let w = s; w < c; w++) this.paintVertexArray.emplace(w, p, y);
            this.maxValue = Math.max(this.maxValue, Math.abs(p), Math.abs(y));
          }
        }
        upload(s) {
          this.paintVertexArray &&
            this.paintVertexArray.arrayBuffer &&
            (this.paintVertexBuffer && this.paintVertexBuffer.buffer
              ? this.paintVertexBuffer.updateData(this.paintVertexArray)
              : (this.paintVertexBuffer = s.createVertexBuffer(
                  this.paintVertexArray,
                  this.paintVertexAttributes,
                  this.expression.isStateDependent
                )));
        }
        destroy() {
          this.paintVertexBuffer && this.paintVertexBuffer.destroy();
        }
        setUniform(s, c) {
          let p = this.useIntegerZoom ? Math.floor(c.zoom) : c.zoom,
            y = be(
              this.expression.interpolationFactor(p, this.zoom, this.zoom + 1),
              0,
              1
            );
          s.set(y);
        }
        getBinding(s, c, p) {
          return new Yn(s, c);
        }
      }
      class Xr {
        constructor(s, c, p, y, w, k) {
          (this.expression = s),
            (this.type = c),
            (this.useIntegerZoom = p),
            (this.zoom = y),
            (this.layerId = k),
            (this.zoomInPaintVertexArray = new w()),
            (this.zoomOutPaintVertexArray = new w());
        }
        populatePaintArray(s, c, p) {
          let y = this.zoomInPaintVertexArray.length;
          this.zoomInPaintVertexArray.resize(s),
            this.zoomOutPaintVertexArray.resize(s),
            this._setPaintValues(
              y,
              s,
              c.patterns && c.patterns[this.layerId],
              p
            );
        }
        updatePaintArray(s, c, p, y, w) {
          this._setPaintValues(s, c, p.patterns && p.patterns[this.layerId], w);
        }
        _setPaintValues(s, c, p, y) {
          if (!y || !p) return;
          let { min: w, mid: k, max: C } = p,
            A = y[w],
            P = y[k],
            N = y[C];
          if (A && P && N)
            for (let O = s; O < c; O++)
              this.zoomInPaintVertexArray.emplace(
                O,
                P.tl[0],
                P.tl[1],
                P.br[0],
                P.br[1],
                A.tl[0],
                A.tl[1],
                A.br[0],
                A.br[1],
                P.pixelRatio,
                A.pixelRatio
              ),
                this.zoomOutPaintVertexArray.emplace(
                  O,
                  P.tl[0],
                  P.tl[1],
                  P.br[0],
                  P.br[1],
                  N.tl[0],
                  N.tl[1],
                  N.br[0],
                  N.br[1],
                  P.pixelRatio,
                  N.pixelRatio
                );
        }
        upload(s) {
          this.zoomInPaintVertexArray &&
            this.zoomInPaintVertexArray.arrayBuffer &&
            this.zoomOutPaintVertexArray &&
            this.zoomOutPaintVertexArray.arrayBuffer &&
            ((this.zoomInPaintVertexBuffer = s.createVertexBuffer(
              this.zoomInPaintVertexArray,
              ki.members,
              this.expression.isStateDependent
            )),
            (this.zoomOutPaintVertexBuffer = s.createVertexBuffer(
              this.zoomOutPaintVertexArray,
              ki.members,
              this.expression.isStateDependent
            )));
        }
        destroy() {
          this.zoomOutPaintVertexBuffer &&
            this.zoomOutPaintVertexBuffer.destroy(),
            this.zoomInPaintVertexBuffer &&
              this.zoomInPaintVertexBuffer.destroy();
        }
      }
      class Ul {
        constructor(s, c, p) {
          (this.binders = {}), (this._buffers = []);
          let y = [];
          for (let w in s.paint._values) {
            if (!p(w)) continue;
            let k = s.paint.get(w);
            if (!(k instanceof fs && Tl(k.property.specification))) continue;
            let C = Ln(w, s.type),
              A = k.value,
              P = k.property.specification.type,
              N = k.property.useIntegerZoom,
              O = k.property.specification["property-type"],
              j = O === "cross-faded" || O === "cross-faded-data-driven";
            if (A.kind === "constant")
              (this.binders[w] = j
                ? new ys(A.value, C)
                : new Ps(A.value, C, P)),
                y.push(`/u_${w}`);
            else if (A.kind === "source" || j) {
              let W = Qo(w, P, "source");
              (this.binders[w] = j
                ? new Xr(A, P, N, c, W, s.id)
                : new $r(A, C, P, W)),
                y.push(`/a_${w}`);
            } else {
              let W = Qo(w, P, "composite");
              (this.binders[w] = new Ar(A, C, P, N, c, W)), y.push(`/z_${w}`);
            }
          }
          this.cacheKey = y.sort().join("");
        }
        getMaxValue(s) {
          let c = this.binders[s];
          return c instanceof $r || c instanceof Ar ? c.maxValue : 0;
        }
        populatePaintArrays(s, c, p, y, w) {
          for (let k in this.binders) {
            let C = this.binders[k];
            (C instanceof $r || C instanceof Ar || C instanceof Xr) &&
              C.populatePaintArray(s, c, p, y, w);
          }
        }
        setConstantPatternPositions(s, c) {
          for (let p in this.binders) {
            let y = this.binders[p];
            y instanceof ys && y.setConstantPatternPositions(s, c);
          }
        }
        updatePaintArrays(s, c, p, y, w) {
          let k = !1;
          for (let C in s) {
            let A = c.getPositions(C);
            for (let P of A) {
              let N = p.feature(P.index);
              for (let O in this.binders) {
                let j = this.binders[O];
                if (
                  (j instanceof $r || j instanceof Ar || j instanceof Xr) &&
                  j.expression.isStateDependent === !0
                ) {
                  let W = y.paint.get(O);
                  (j.expression = W.value),
                    j.updatePaintArray(P.start, P.end, N, s[C], w),
                    (k = !0);
                }
              }
            }
          }
          return k;
        }
        defines() {
          let s = [];
          for (let c in this.binders) {
            let p = this.binders[c];
            (p instanceof Ps || p instanceof ys) &&
              s.push(...p.uniformNames.map((y) => `#define HAS_UNIFORM_${y}`));
          }
          return s;
        }
        getBinderAttributes() {
          let s = [];
          for (let c in this.binders) {
            let p = this.binders[c];
            if (p instanceof $r || p instanceof Ar)
              for (let y = 0; y < p.paintVertexAttributes.length; y++)
                s.push(p.paintVertexAttributes[y].name);
            else if (p instanceof Xr)
              for (let y = 0; y < ki.members.length; y++)
                s.push(ki.members[y].name);
          }
          return s;
        }
        getBinderUniforms() {
          let s = [];
          for (let c in this.binders) {
            let p = this.binders[c];
            if (p instanceof Ps || p instanceof ys || p instanceof Ar)
              for (let y of p.uniformNames) s.push(y);
          }
          return s;
        }
        getPaintVertexBuffers() {
          return this._buffers;
        }
        getUniforms(s, c) {
          let p = [];
          for (let y in this.binders) {
            let w = this.binders[y];
            if (w instanceof Ps || w instanceof ys || w instanceof Ar) {
              for (let k of w.uniformNames)
                if (c[k]) {
                  let C = w.getBinding(s, c[k], k);
                  p.push({ name: k, property: y, binding: C });
                }
            }
          }
          return p;
        }
        setUniforms(s, c, p, y) {
          for (let { name: w, property: k, binding: C } of c)
            this.binders[k].setUniform(C, y, p.get(k), w);
        }
        updatePaintBuffers(s) {
          this._buffers = [];
          for (let c in this.binders) {
            let p = this.binders[c];
            if (s && p instanceof Xr) {
              let y =
                s.fromScale === 2
                  ? p.zoomInPaintVertexBuffer
                  : p.zoomOutPaintVertexBuffer;
              y && this._buffers.push(y);
            } else
              (p instanceof $r || p instanceof Ar) &&
                p.paintVertexBuffer &&
                this._buffers.push(p.paintVertexBuffer);
          }
        }
        upload(s) {
          for (let c in this.binders) {
            let p = this.binders[c];
            (p instanceof $r || p instanceof Ar || p instanceof Xr) &&
              p.upload(s);
          }
          this.updatePaintBuffers();
        }
        destroy() {
          for (let s in this.binders) {
            let c = this.binders[s];
            (c instanceof $r || c instanceof Ar || c instanceof Xr) &&
              c.destroy();
          }
        }
      }
      class zr {
        constructor(s, c, p = () => !0) {
          this.programConfigurations = {};
          for (let y of s) this.programConfigurations[y.id] = new Ul(y, c, p);
          (this.needsUpload = !1),
            (this._featureMap = new Br()),
            (this._bufferOffset = 0);
        }
        populatePaintArrays(s, c, p, y, w, k) {
          for (let C in this.programConfigurations)
            this.programConfigurations[C].populatePaintArrays(s, c, y, w, k);
          c.id !== void 0 &&
            this._featureMap.add(c.id, p, this._bufferOffset, s),
            (this._bufferOffset = s),
            (this.needsUpload = !0);
        }
        updatePaintArrays(s, c, p, y) {
          for (let w of p)
            this.needsUpload =
              this.programConfigurations[w.id].updatePaintArrays(
                s,
                this._featureMap,
                c,
                w,
                y
              ) || this.needsUpload;
        }
        get(s) {
          return this.programConfigurations[s];
        }
        upload(s) {
          if (this.needsUpload) {
            for (let c in this.programConfigurations)
              this.programConfigurations[c].upload(s);
            this.needsUpload = !1;
          }
        }
        destroy() {
          for (let s in this.programConfigurations)
            this.programConfigurations[s].destroy();
        }
      }
      function Ln(l, s) {
        return (
          {
            "text-opacity": ["opacity"],
            "icon-opacity": ["opacity"],
            "text-color": ["fill_color"],
            "icon-color": ["fill_color"],
            "text-halo-color": ["halo_color"],
            "icon-halo-color": ["halo_color"],
            "text-halo-blur": ["halo_blur"],
            "icon-halo-blur": ["halo_blur"],
            "text-halo-width": ["halo_width"],
            "icon-halo-width": ["halo_width"],
            "line-gap-width": ["gapwidth"],
            "line-pattern": [
              "pattern_to",
              "pattern_from",
              "pixel_ratio_to",
              "pixel_ratio_from",
            ],
            "fill-pattern": [
              "pattern_to",
              "pattern_from",
              "pixel_ratio_to",
              "pixel_ratio_from",
            ],
            "fill-extrusion-pattern": [
              "pattern_to",
              "pattern_from",
              "pixel_ratio_to",
              "pixel_ratio_from",
            ],
          }[l] || [l.replace(`${s}-`, "").replace(/-/g, "_")]
        );
      }
      function Qo(l, s, c) {
        let p = {
            color: { source: xc, composite: yh },
            number: { source: ga, composite: xc },
          },
          y = (function (w) {
            return {
              "line-pattern": { source: ee, composite: ee },
              "fill-pattern": { source: ee, composite: ee },
              "fill-extrusion-pattern": { source: ee, composite: ee },
            }[w];
          })(l);
        return (y && y[c]) || p[s][c];
      }
      Nt("ConstantBinder", Ps),
        Nt("CrossFadedConstantBinder", ys),
        Nt("SourceExpressionBinder", $r),
        Nt("CrossFadedCompositeBinder", Xr),
        Nt("CompositeExpressionBinder", Ar),
        Nt("ProgramConfiguration", Ul, { omit: ["_buffers"] }),
        Nt("ProgramConfigurationSet", zr);
      let Ui = 8192,
        vh = Math.pow(2, 14) - 1,
        Rf = -vh - 1;
      function Va(l) {
        let s = Ui / l.extent,
          c = l.loadGeometry();
        for (let p = 0; p < c.length; p++) {
          let y = c[p];
          for (let w = 0; w < y.length; w++) {
            let k = y[w],
              C = Math.round(k.x * s),
              A = Math.round(k.y * s);
            (k.x = be(C, Rf, vh)),
              (k.y = be(A, Rf, vh)),
              (C < k.x || C > k.x + 1 || A < k.y || A > k.y + 1) &&
                qe(
                  "Geometry exceeds allowed extent, reduce your vector tile buffer size"
                );
          }
        }
        return c;
      }
      function ja(l, s) {
        return {
          type: l.type,
          id: l.id,
          properties: l.properties,
          geometry: s ? Va(l) : [],
        };
      }
      function zu(l, s, c, p, y) {
        l.emplaceBack(2 * s + (p + 1) / 2, 2 * c + (y + 1) / 2);
      }
      class _h {
        constructor(s) {
          (this.zoom = s.zoom),
            (this.overscaling = s.overscaling),
            (this.layers = s.layers),
            (this.layerIds = this.layers.map((c) => c.id)),
            (this.index = s.index),
            (this.hasPattern = !1),
            (this.layoutVertexArray = new U()),
            (this.indexArray = new Ve()),
            (this.segments = new nt()),
            (this.programConfigurations = new zr(s.layers, s.zoom)),
            (this.stateDependentLayerIds = this.layers
              .filter((c) => c.isStateDependent())
              .map((c) => c.id));
        }
        populate(s, c, p) {
          let y = this.layers[0],
            w = [],
            k = null,
            C = !1;
          y.type === "circle" &&
            ((k = y.layout.get("circle-sort-key")), (C = !k.isConstant()));
          for (let { feature: A, id: P, index: N, sourceLayerIndex: O } of s) {
            let j = this.layers[0]._featureFilter.needGeometry,
              W = ja(A, j);
            if (!this.layers[0]._featureFilter.filter(new Mr(this.zoom), W, p))
              continue;
            let K = C ? k.evaluate(W, {}, p) : void 0,
              ie = {
                id: P,
                properties: A.properties,
                type: A.type,
                sourceLayerIndex: O,
                index: N,
                geometry: j ? W.geometry : Va(A),
                patterns: {},
                sortKey: K,
              };
            w.push(ie);
          }
          C && w.sort((A, P) => A.sortKey - P.sortKey);
          for (let A of w) {
            let { geometry: P, index: N, sourceLayerIndex: O } = A,
              j = s[N].feature;
            this.addFeature(A, P, N, p),
              c.featureIndex.insert(j, P, N, O, this.index);
          }
        }
        update(s, c, p) {
          this.stateDependentLayers.length &&
            this.programConfigurations.updatePaintArrays(
              s,
              c,
              this.stateDependentLayers,
              p
            );
        }
        isEmpty() {
          return this.layoutVertexArray.length === 0;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(s) {
          this.uploaded ||
            ((this.layoutVertexBuffer = s.createVertexBuffer(
              this.layoutVertexArray,
              rt
            )),
            (this.indexBuffer = s.createIndexBuffer(this.indexArray))),
            this.programConfigurations.upload(s),
            (this.uploaded = !0);
        }
        destroy() {
          this.layoutVertexBuffer &&
            (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy());
        }
        addFeature(s, c, p, y) {
          for (let w of c)
            for (let k of w) {
              let C = k.x,
                A = k.y;
              if (C < 0 || C >= Ui || A < 0 || A >= Ui) continue;
              let P = this.segments.prepareSegment(
                  4,
                  this.layoutVertexArray,
                  this.indexArray,
                  s.sortKey
                ),
                N = P.vertexLength;
              zu(this.layoutVertexArray, C, A, -1, -1),
                zu(this.layoutVertexArray, C, A, 1, -1),
                zu(this.layoutVertexArray, C, A, 1, 1),
                zu(this.layoutVertexArray, C, A, -1, 1),
                this.indexArray.emplaceBack(N, N + 1, N + 2),
                this.indexArray.emplaceBack(N, N + 3, N + 2),
                (P.vertexLength += 4),
                (P.primitiveLength += 2);
            }
          this.programConfigurations.populatePaintArrays(
            this.layoutVertexArray.length,
            s,
            p,
            {},
            y
          );
        }
      }
      function Ha(l, s) {
        for (let c = 0; c < l.length; c++) if (Nu(s, l[c])) return !0;
        for (let c = 0; c < s.length; c++) if (Nu(l, s[c])) return !0;
        return !!kc(l, s);
      }
      function Uf(l, s, c) {
        return !!Nu(l, s) || !!Sc(s, l, c);
      }
      function xh(l, s) {
        if (l.length === 1) return m_(s, l[0]);
        for (let c = 0; c < s.length; c++) {
          let p = s[c];
          for (let y = 0; y < p.length; y++) if (Nu(l, p[y])) return !0;
        }
        for (let c = 0; c < l.length; c++) if (m_(s, l[c])) return !0;
        for (let c = 0; c < s.length; c++) if (kc(l, s[c])) return !0;
        return !1;
      }
      function Vf(l, s, c) {
        if (l.length > 1) {
          if (kc(l, s)) return !0;
          for (let p = 0; p < s.length; p++) if (Sc(s[p], l, c)) return !0;
        }
        for (let p = 0; p < l.length; p++) if (Sc(l[p], s, c)) return !0;
        return !1;
      }
      function kc(l, s) {
        if (l.length === 0 || s.length === 0) return !1;
        for (let c = 0; c < l.length - 1; c++) {
          let p = l[c],
            y = l[c + 1];
          for (let w = 0; w < s.length - 1; w++)
            if (jf(p, y, s[w], s[w + 1])) return !0;
        }
        return !1;
      }
      function jf(l, s, c, p) {
        return zt(l, c, p) !== zt(s, c, p) && zt(l, s, c) !== zt(l, s, p);
      }
      function Sc(l, s, c) {
        let p = c * c;
        if (s.length === 1) return l.distSqr(s[0]) < p;
        for (let y = 1; y < s.length; y++)
          if (f_(l, s[y - 1], s[y]) < p) return !0;
        return !1;
      }
      function f_(l, s, c) {
        let p = s.distSqr(c);
        if (p === 0) return l.distSqr(s);
        let y = ((l.x - s.x) * (c.x - s.x) + (l.y - s.y) * (c.y - s.y)) / p;
        return l.distSqr(y < 0 ? s : y > 1 ? c : c.sub(s)._mult(y)._add(s));
      }
      function m_(l, s) {
        let c,
          p,
          y,
          w = !1;
        for (let k = 0; k < l.length; k++) {
          c = l[k];
          for (let C = 0, A = c.length - 1; C < c.length; A = C++)
            (p = c[C]),
              (y = c[A]),
              p.y > s.y != y.y > s.y &&
                s.x < ((y.x - p.x) * (s.y - p.y)) / (y.y - p.y) + p.x &&
                (w = !w);
        }
        return w;
      }
      function Nu(l, s) {
        let c = !1;
        for (let p = 0, y = l.length - 1; p < l.length; y = p++) {
          let w = l[p],
            k = l[y];
          w.y > s.y != k.y > s.y &&
            s.x < ((k.x - w.x) * (s.y - w.y)) / (k.y - w.y) + w.x &&
            (c = !c);
        }
        return c;
      }
      function z7(l, s, c) {
        let p = c[0],
          y = c[2];
        if (
          (l.x < p.x && s.x < p.x) ||
          (l.x > y.x && s.x > y.x) ||
          (l.y < p.y && s.y < p.y) ||
          (l.y > y.y && s.y > y.y)
        )
          return !1;
        let w = zt(l, s, c[0]);
        return (
          w !== zt(l, s, c[1]) || w !== zt(l, s, c[2]) || w !== zt(l, s, c[3])
        );
      }
      function wh(l, s, c) {
        let p = s.paint.get(l).value;
        return p.kind === "constant"
          ? p.value
          : c.programConfigurations.get(s.id).getMaxValue(l);
      }
      function Hf(l) {
        return Math.sqrt(l[0] * l[0] + l[1] * l[1]);
      }
      function qf(l, s, c, p, y) {
        if (!s[0] && !s[1]) return l;
        let w = b.convert(s)._mult(y);
        c === "viewport" && w._rotate(-p);
        let k = [];
        for (let C = 0; C < l.length; C++) k.push(l[C].sub(w));
        return k;
      }
      let g_, y_;
      Nt("CircleBucket", _h, { omit: ["layers"] });
      var N7 = {
          get paint() {
            return (y_ =
              y_ ||
              new Mo({
                "circle-radius": new si(je.paint_circle["circle-radius"]),
                "circle-color": new si(je.paint_circle["circle-color"]),
                "circle-blur": new si(je.paint_circle["circle-blur"]),
                "circle-opacity": new si(je.paint_circle["circle-opacity"]),
                "circle-translate": new Kt(je.paint_circle["circle-translate"]),
                "circle-translate-anchor": new Kt(
                  je.paint_circle["circle-translate-anchor"]
                ),
                "circle-pitch-scale": new Kt(
                  je.paint_circle["circle-pitch-scale"]
                ),
                "circle-pitch-alignment": new Kt(
                  je.paint_circle["circle-pitch-alignment"]
                ),
                "circle-stroke-width": new si(
                  je.paint_circle["circle-stroke-width"]
                ),
                "circle-stroke-color": new si(
                  je.paint_circle["circle-stroke-color"]
                ),
                "circle-stroke-opacity": new si(
                  je.paint_circle["circle-stroke-opacity"]
                ),
              }));
          },
          get layout() {
            return (g_ =
              g_ ||
              new Mo({
                "circle-sort-key": new si(je.layout_circle["circle-sort-key"]),
              }));
          },
        },
        Io = 1e-6,
        Ou = typeof Float32Array < "u" ? Float32Array : Array;
      function g1(l) {
        return (
          (l[0] = 1),
          (l[1] = 0),
          (l[2] = 0),
          (l[3] = 0),
          (l[4] = 0),
          (l[5] = 1),
          (l[6] = 0),
          (l[7] = 0),
          (l[8] = 0),
          (l[9] = 0),
          (l[10] = 1),
          (l[11] = 0),
          (l[12] = 0),
          (l[13] = 0),
          (l[14] = 0),
          (l[15] = 1),
          l
        );
      }
      function b_(l, s, c) {
        var p = s[0],
          y = s[1],
          w = s[2],
          k = s[3],
          C = s[4],
          A = s[5],
          P = s[6],
          N = s[7],
          O = s[8],
          j = s[9],
          W = s[10],
          K = s[11],
          ie = s[12],
          ae = s[13],
          pe = s[14],
          Pe = s[15],
          ye = c[0],
          Se = c[1],
          We = c[2],
          tt = c[3];
        return (
          (l[0] = ye * p + Se * C + We * O + tt * ie),
          (l[1] = ye * y + Se * A + We * j + tt * ae),
          (l[2] = ye * w + Se * P + We * W + tt * pe),
          (l[3] = ye * k + Se * N + We * K + tt * Pe),
          (l[4] =
            (ye = c[4]) * p +
            (Se = c[5]) * C +
            (We = c[6]) * O +
            (tt = c[7]) * ie),
          (l[5] = ye * y + Se * A + We * j + tt * ae),
          (l[6] = ye * w + Se * P + We * W + tt * pe),
          (l[7] = ye * k + Se * N + We * K + tt * Pe),
          (l[8] =
            (ye = c[8]) * p +
            (Se = c[9]) * C +
            (We = c[10]) * O +
            (tt = c[11]) * ie),
          (l[9] = ye * y + Se * A + We * j + tt * ae),
          (l[10] = ye * w + Se * P + We * W + tt * pe),
          (l[11] = ye * k + Se * N + We * K + tt * Pe),
          (l[12] =
            (ye = c[12]) * p +
            (Se = c[13]) * C +
            (We = c[14]) * O +
            (tt = c[15]) * ie),
          (l[13] = ye * y + Se * A + We * j + tt * ae),
          (l[14] = ye * w + Se * P + We * W + tt * pe),
          (l[15] = ye * k + Se * N + We * K + tt * Pe),
          l
        );
      }
      Math.hypot ||
        (Math.hypot = function () {
          for (var l = 0, s = arguments.length; s--; )
            l += arguments[s] * arguments[s];
          return Math.sqrt(l);
        });
      var kh,
        O7 = b_;
      function $f(l, s, c) {
        var p = s[0],
          y = s[1],
          w = s[2],
          k = s[3];
        return (
          (l[0] = c[0] * p + c[4] * y + c[8] * w + c[12] * k),
          (l[1] = c[1] * p + c[5] * y + c[9] * w + c[13] * k),
          (l[2] = c[2] * p + c[6] * y + c[10] * w + c[14] * k),
          (l[3] = c[3] * p + c[7] * y + c[11] * w + c[15] * k),
          l
        );
      }
      (kh = new Ou(4)),
        Ou != Float32Array &&
          ((kh[0] = 0), (kh[1] = 0), (kh[2] = 0), (kh[3] = 0));
      class B7 extends ms {
        constructor(s) {
          super(s, N7);
        }
        createBucket(s) {
          return new _h(s);
        }
        queryRadius(s) {
          let c = s;
          return (
            wh("circle-radius", this, c) +
            wh("circle-stroke-width", this, c) +
            Hf(this.paint.get("circle-translate"))
          );
        }
        queryIntersectsFeature(s, c, p, y, w, k, C, A) {
          let P = qf(
              s,
              this.paint.get("circle-translate"),
              this.paint.get("circle-translate-anchor"),
              k.angle,
              C
            ),
            N =
              this.paint.get("circle-radius").evaluate(c, p) +
              this.paint.get("circle-stroke-width").evaluate(c, p),
            O = this.paint.get("circle-pitch-alignment") === "map",
            j = O
              ? P
              : (function (K, ie) {
                  return K.map((ae) => v_(ae, ie));
                })(P, A),
            W = O ? N * C : N;
          for (let K of y)
            for (let ie of K) {
              let ae = O ? ie : v_(ie, A),
                pe = W,
                Pe = $f([], [ie.x, ie.y, 0, 1], A);
              if (
                (this.paint.get("circle-pitch-scale") === "viewport" &&
                this.paint.get("circle-pitch-alignment") === "map"
                  ? (pe *= Pe[3] / k.cameraToCenterDistance)
                  : this.paint.get("circle-pitch-scale") === "map" &&
                    this.paint.get("circle-pitch-alignment") === "viewport" &&
                    (pe *= k.cameraToCenterDistance / Pe[3]),
                Uf(j, ae, pe))
              )
                return !0;
            }
          return !1;
        }
      }
      function v_(l, s) {
        let c = $f([], [l.x, l.y, 0, 1], s);
        return new b(c[0] / c[3], c[1] / c[3]);
      }
      class __ extends _h {}
      let x_;
      Nt("HeatmapBucket", __, { omit: ["layers"] });
      var R7 = {
        get paint() {
          return (x_ =
            x_ ||
            new Mo({
              "heatmap-radius": new si(je.paint_heatmap["heatmap-radius"]),
              "heatmap-weight": new si(je.paint_heatmap["heatmap-weight"]),
              "heatmap-intensity": new Kt(
                je.paint_heatmap["heatmap-intensity"]
              ),
              "heatmap-color": new vc(je.paint_heatmap["heatmap-color"]),
              "heatmap-opacity": new Kt(je.paint_heatmap["heatmap-opacity"]),
            }));
        },
      };
      function y1(l, { width: s, height: c }, p, y) {
        if (y) {
          if (y instanceof Uint8ClampedArray) y = new Uint8Array(y.buffer);
          else if (y.length !== s * c * p)
            throw new RangeError(
              `mismatched image size. expected: ${y.length} but got: ${
                s * c * p
              }`
            );
        } else y = new Uint8Array(s * c * p);
        return (l.width = s), (l.height = c), (l.data = y), l;
      }
      function w_(l, { width: s, height: c }, p) {
        if (s === l.width && c === l.height) return;
        let y = y1({}, { width: s, height: c }, p);
        b1(
          l,
          y,
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { width: Math.min(l.width, s), height: Math.min(l.height, c) },
          p
        ),
          (l.width = s),
          (l.height = c),
          (l.data = y.data);
      }
      function b1(l, s, c, p, y, w) {
        if (y.width === 0 || y.height === 0) return s;
        if (
          y.width > l.width ||
          y.height > l.height ||
          c.x > l.width - y.width ||
          c.y > l.height - y.height
        )
          throw new RangeError(
            "out of range source coordinates for image copy"
          );
        if (
          y.width > s.width ||
          y.height > s.height ||
          p.x > s.width - y.width ||
          p.y > s.height - y.height
        )
          throw new RangeError(
            "out of range destination coordinates for image copy"
          );
        let k = l.data,
          C = s.data;
        if (k === C)
          throw new Error("srcData equals dstData, so image is already copied");
        for (let A = 0; A < y.height; A++) {
          let P = ((c.y + A) * l.width + c.x) * w,
            N = ((p.y + A) * s.width + p.x) * w;
          for (let O = 0; O < y.width * w; O++) C[N + O] = k[P + O];
        }
        return s;
      }
      class Sh {
        constructor(s, c) {
          y1(this, s, 1, c);
        }
        resize(s) {
          w_(this, s, 1);
        }
        clone() {
          return new Sh(
            { width: this.width, height: this.height },
            new Uint8Array(this.data)
          );
        }
        static copy(s, c, p, y, w) {
          b1(s, c, p, y, w, 1);
        }
      }
      class bs {
        constructor(s, c) {
          y1(this, s, 4, c);
        }
        resize(s) {
          w_(this, s, 4);
        }
        replace(s, c) {
          c
            ? this.data.set(s)
            : (this.data =
                s instanceof Uint8ClampedArray ? new Uint8Array(s.buffer) : s);
        }
        clone() {
          return new bs(
            { width: this.width, height: this.height },
            new Uint8Array(this.data)
          );
        }
        static copy(s, c, p, y, w) {
          b1(s, c, p, y, w, 4);
        }
      }
      function k_(l) {
        let s = {},
          c = l.resolution || 256,
          p = l.clips ? l.clips.length : 1,
          y = l.image || new bs({ width: c, height: p });
        if ((Math.log(c) / Math.LN2) % 1 != 0)
          throw new Error(`width is not a power of 2 - ${c}`);
        let w = (k, C, A) => {
          s[l.evaluationKey] = A;
          let P = l.expression.evaluate(s);
          (y.data[k + C + 0] = Math.floor((255 * P.r) / P.a)),
            (y.data[k + C + 1] = Math.floor((255 * P.g) / P.a)),
            (y.data[k + C + 2] = Math.floor((255 * P.b) / P.a)),
            (y.data[k + C + 3] = Math.floor(255 * P.a));
        };
        if (l.clips)
          for (let k = 0, C = 0; k < p; ++k, C += 4 * c)
            for (let A = 0, P = 0; A < c; A++, P += 4) {
              let N = A / (c - 1),
                { start: O, end: j } = l.clips[k];
              w(C, P, O * (1 - N) + j * N);
            }
        else for (let k = 0, C = 0; k < c; k++, C += 4) w(0, C, k / (c - 1));
        return y;
      }
      Nt("AlphaImage", Sh), Nt("RGBAImage", bs);
      class U7 extends ms {
        createBucket(s) {
          return new __(s);
        }
        constructor(s) {
          super(s, R7), this._updateColorRamp();
        }
        _handleSpecialPaintPropertyUpdate(s) {
          s === "heatmap-color" && this._updateColorRamp();
        }
        _updateColorRamp() {
          (this.colorRamp = k_({
            expression:
              this._transitionablePaint._values["heatmap-color"].value
                .expression,
            evaluationKey: "heatmapDensity",
            image: this.colorRamp,
          })),
            (this.colorRampTexture = null);
        }
        resize() {
          this.heatmapFbo &&
            (this.heatmapFbo.destroy(), (this.heatmapFbo = null));
        }
        queryRadius() {
          return 0;
        }
        queryIntersectsFeature() {
          return !1;
        }
        hasOffscreenPass() {
          return (
            this.paint.get("heatmap-opacity") !== 0 &&
            this.visibility !== "none"
          );
        }
      }
      let S_;
      var V7 = {
        get paint() {
          return (S_ =
            S_ ||
            new Mo({
              "hillshade-illumination-direction": new Kt(
                je.paint_hillshade["hillshade-illumination-direction"]
              ),
              "hillshade-illumination-anchor": new Kt(
                je.paint_hillshade["hillshade-illumination-anchor"]
              ),
              "hillshade-exaggeration": new Kt(
                je.paint_hillshade["hillshade-exaggeration"]
              ),
              "hillshade-shadow-color": new Kt(
                je.paint_hillshade["hillshade-shadow-color"]
              ),
              "hillshade-highlight-color": new Kt(
                je.paint_hillshade["hillshade-highlight-color"]
              ),
              "hillshade-accent-color": new Kt(
                je.paint_hillshade["hillshade-accent-color"]
              ),
            }));
        },
      };
      class j7 extends ms {
        constructor(s) {
          super(s, V7);
        }
        hasOffscreenPass() {
          return (
            this.paint.get("hillshade-exaggeration") !== 0 &&
            this.visibility !== "none"
          );
        }
      }
      let H7 = an([{ name: "a_pos", components: 2, type: "Int16" }], 4),
        { members: q7 } = H7;
      var v1 = { exports: {} };
      function Qf(l, s, c) {
        c = c || 2;
        var p,
          y,
          w,
          k,
          C,
          A,
          P,
          N = s && s.length,
          O = N ? s[0] * c : l.length,
          j = C_(l, 0, O, c, !0),
          W = [];
        if (!j || j.next === j.prev) return W;
        if (
          (N &&
            (j = (function (ie, ae, pe, Pe) {
              var ye,
                Se,
                We,
                tt = [];
              for (ye = 0, Se = ae.length; ye < Se; ye++)
                (We = C_(
                  ie,
                  ae[ye] * Pe,
                  ye < Se - 1 ? ae[ye + 1] * Pe : ie.length,
                  Pe,
                  !1
                )) === We.next && (We.steiner = !0),
                  tt.push(X7(We));
              for (tt.sort(Z7), ye = 0; ye < tt.length; ye++)
                pe = K7(tt[ye], pe);
              return pe;
            })(l, s, j, c)),
          l.length > 80 * c)
        ) {
          (p = w = l[0]), (y = k = l[1]);
          for (var K = c; K < O; K += c)
            (C = l[K]) < p && (p = C),
              (A = l[K + 1]) < y && (y = A),
              C > w && (w = C),
              A > k && (k = A);
          P = (P = Math.max(w - p, k - y)) !== 0 ? 32767 / P : 0;
        }
        return Ch(j, W, c, p, y, P, 0), W;
      }
      function C_(l, s, c, p, y) {
        var w, k;
        if (y === w1(l, s, c, p) > 0)
          for (w = s; w < c; w += p) k = M_(w, l[w], l[w + 1], k);
        else for (w = c - p; w >= s; w -= p) k = M_(w, l[w], l[w + 1], k);
        return k && Gf(k, k.next) && (Th(k), (k = k.next)), k;
      }
      function Cc(l, s) {
        if (!l) return l;
        s || (s = l);
        var c,
          p = l;
        do
          if (
            ((c = !1),
            p.steiner || (!Gf(p, p.next) && ln(p.prev, p, p.next) !== 0))
          )
            p = p.next;
          else {
            if ((Th(p), (p = s = p.prev) === p.next)) break;
            c = !0;
          }
        while (c || p !== s);
        return s;
      }
      function Ch(l, s, c, p, y, w, k) {
        if (l) {
          !k &&
            w &&
            (function (N, O, j, W) {
              var K = N;
              do
                K.z === 0 && (K.z = _1(K.x, K.y, O, j, W)),
                  (K.prevZ = K.prev),
                  (K.nextZ = K.next),
                  (K = K.next);
              while (K !== N);
              (K.prevZ.nextZ = null),
                (K.prevZ = null),
                (function (ie) {
                  var ae,
                    pe,
                    Pe,
                    ye,
                    Se,
                    We,
                    tt,
                    Dt,
                    Qt = 1;
                  do {
                    for (pe = ie, ie = null, Se = null, We = 0; pe; ) {
                      for (
                        We++, Pe = pe, tt = 0, ae = 0;
                        ae < Qt && (tt++, (Pe = Pe.nextZ));
                        ae++
                      );
                      for (Dt = Qt; tt > 0 || (Dt > 0 && Pe); )
                        tt !== 0 && (Dt === 0 || !Pe || pe.z <= Pe.z)
                          ? ((ye = pe), (pe = pe.nextZ), tt--)
                          : ((ye = Pe), (Pe = Pe.nextZ), Dt--),
                          Se ? (Se.nextZ = ye) : (ie = ye),
                          (ye.prevZ = Se),
                          (Se = ye);
                      pe = Pe;
                    }
                    (Se.nextZ = null), (Qt *= 2);
                  } while (We > 1);
                })(K);
            })(l, p, y, w);
          for (var C, A, P = l; l.prev !== l.next; )
            if (((C = l.prev), (A = l.next), w ? Q7(l, p, y, w) : $7(l)))
              s.push((C.i / c) | 0),
                s.push((l.i / c) | 0),
                s.push((A.i / c) | 0),
                Th(l),
                (l = A.next),
                (P = A.next);
            else if ((l = A) === P) {
              k
                ? k === 1
                  ? Ch((l = G7(Cc(l), s, c)), s, c, p, y, w, 2)
                  : k === 2 && W7(l, s, c, p, y, w)
                : Ch(Cc(l), s, c, p, y, w, 1);
              break;
            }
        }
      }
      function $7(l) {
        var s = l.prev,
          c = l,
          p = l.next;
        if (ln(s, c, p) >= 0) return !1;
        for (
          var y = s.x,
            w = c.x,
            k = p.x,
            C = s.y,
            A = c.y,
            P = p.y,
            N = y < w ? (y < k ? y : k) : w < k ? w : k,
            O = C < A ? (C < P ? C : P) : A < P ? A : P,
            j = y > w ? (y > k ? y : k) : w > k ? w : k,
            W = C > A ? (C > P ? C : P) : A > P ? A : P,
            K = p.next;
          K !== s;

        ) {
          if (
            K.x >= N &&
            K.x <= j &&
            K.y >= O &&
            K.y <= W &&
            Bu(y, C, w, A, k, P, K.x, K.y) &&
            ln(K.prev, K, K.next) >= 0
          )
            return !1;
          K = K.next;
        }
        return !0;
      }
      function Q7(l, s, c, p) {
        var y = l.prev,
          w = l,
          k = l.next;
        if (ln(y, w, k) >= 0) return !1;
        for (
          var C = y.x,
            A = w.x,
            P = k.x,
            N = y.y,
            O = w.y,
            j = k.y,
            W = C < A ? (C < P ? C : P) : A < P ? A : P,
            K = N < O ? (N < j ? N : j) : O < j ? O : j,
            ie = C > A ? (C > P ? C : P) : A > P ? A : P,
            ae = N > O ? (N > j ? N : j) : O > j ? O : j,
            pe = _1(W, K, s, c, p),
            Pe = _1(ie, ae, s, c, p),
            ye = l.prevZ,
            Se = l.nextZ;
          ye && ye.z >= pe && Se && Se.z <= Pe;

        ) {
          if (
            (ye.x >= W &&
              ye.x <= ie &&
              ye.y >= K &&
              ye.y <= ae &&
              ye !== y &&
              ye !== k &&
              Bu(C, N, A, O, P, j, ye.x, ye.y) &&
              ln(ye.prev, ye, ye.next) >= 0) ||
            ((ye = ye.prevZ),
            Se.x >= W &&
              Se.x <= ie &&
              Se.y >= K &&
              Se.y <= ae &&
              Se !== y &&
              Se !== k &&
              Bu(C, N, A, O, P, j, Se.x, Se.y) &&
              ln(Se.prev, Se, Se.next) >= 0)
          )
            return !1;
          Se = Se.nextZ;
        }
        for (; ye && ye.z >= pe; ) {
          if (
            ye.x >= W &&
            ye.x <= ie &&
            ye.y >= K &&
            ye.y <= ae &&
            ye !== y &&
            ye !== k &&
            Bu(C, N, A, O, P, j, ye.x, ye.y) &&
            ln(ye.prev, ye, ye.next) >= 0
          )
            return !1;
          ye = ye.prevZ;
        }
        for (; Se && Se.z <= Pe; ) {
          if (
            Se.x >= W &&
            Se.x <= ie &&
            Se.y >= K &&
            Se.y <= ae &&
            Se !== y &&
            Se !== k &&
            Bu(C, N, A, O, P, j, Se.x, Se.y) &&
            ln(Se.prev, Se, Se.next) >= 0
          )
            return !1;
          Se = Se.nextZ;
        }
        return !0;
      }
      function G7(l, s, c) {
        var p = l;
        do {
          var y = p.prev,
            w = p.next.next;
          !Gf(y, w) &&
            E_(y, p, p.next, w) &&
            Eh(y, w) &&
            Eh(w, y) &&
            (s.push((y.i / c) | 0),
            s.push((p.i / c) | 0),
            s.push((w.i / c) | 0),
            Th(p),
            Th(p.next),
            (p = l = w)),
            (p = p.next);
        } while (p !== l);
        return Cc(p);
      }
      function W7(l, s, c, p, y, w) {
        var k = l;
        do {
          for (var C = k.next.next; C !== k.prev; ) {
            if (k.i !== C.i && Y7(k, C)) {
              var A = T_(k, C);
              return (
                (k = Cc(k, k.next)),
                (A = Cc(A, A.next)),
                Ch(k, s, c, p, y, w, 0),
                void Ch(A, s, c, p, y, w, 0)
              );
            }
            C = C.next;
          }
          k = k.next;
        } while (k !== l);
      }
      function Z7(l, s) {
        return l.x - s.x;
      }
      function K7(l, s) {
        var c = (function (y, w) {
          var k,
            C = w,
            A = y.x,
            P = y.y,
            N = -1 / 0;
          do {
            if (P <= C.y && P >= C.next.y && C.next.y !== C.y) {
              var O = C.x + ((P - C.y) * (C.next.x - C.x)) / (C.next.y - C.y);
              if (
                O <= A &&
                O > N &&
                ((N = O), (k = C.x < C.next.x ? C : C.next), O === A)
              )
                return k;
            }
            C = C.next;
          } while (C !== w);
          if (!k) return null;
          var j,
            W = k,
            K = k.x,
            ie = k.y,
            ae = 1 / 0;
          C = k;
          do
            A >= C.x &&
              C.x >= K &&
              A !== C.x &&
              Bu(P < ie ? A : N, P, K, ie, P < ie ? N : A, P, C.x, C.y) &&
              ((j = Math.abs(P - C.y) / (A - C.x)),
              Eh(C, y) &&
                (j < ae ||
                  (j === ae && (C.x > k.x || (C.x === k.x && J7(k, C))))) &&
                ((k = C), (ae = j))),
              (C = C.next);
          while (C !== W);
          return k;
        })(l, s);
        if (!c) return s;
        var p = T_(c, l);
        return Cc(p, p.next), Cc(c, c.next);
      }
      function J7(l, s) {
        return ln(l.prev, l, s.prev) < 0 && ln(s.next, l, l.next) < 0;
      }
      function _1(l, s, c, p, y) {
        return (
          (l =
            1431655765 &
            ((l =
              858993459 &
              ((l =
                252645135 &
                ((l = 16711935 & ((l = ((l - c) * y) | 0) | (l << 8))) |
                  (l << 4))) |
                (l << 2))) |
              (l << 1))) |
          ((s =
            1431655765 &
            ((s =
              858993459 &
              ((s =
                252645135 &
                ((s = 16711935 & ((s = ((s - p) * y) | 0) | (s << 8))) |
                  (s << 4))) |
                (s << 2))) |
              (s << 1))) <<
            1)
        );
      }
      function X7(l) {
        var s = l,
          c = l;
        do (s.x < c.x || (s.x === c.x && s.y < c.y)) && (c = s), (s = s.next);
        while (s !== l);
        return c;
      }
      function Bu(l, s, c, p, y, w, k, C) {
        return (
          (y - k) * (s - C) >= (l - k) * (w - C) &&
          (l - k) * (p - C) >= (c - k) * (s - C) &&
          (c - k) * (w - C) >= (y - k) * (p - C)
        );
      }
      function Y7(l, s) {
        return (
          l.next.i !== s.i &&
          l.prev.i !== s.i &&
          !(function (c, p) {
            var y = c;
            do {
              if (
                y.i !== c.i &&
                y.next.i !== c.i &&
                y.i !== p.i &&
                y.next.i !== p.i &&
                E_(y, y.next, c, p)
              )
                return !0;
              y = y.next;
            } while (y !== c);
            return !1;
          })(l, s) &&
          ((Eh(l, s) &&
            Eh(s, l) &&
            (function (c, p) {
              var y = c,
                w = !1,
                k = (c.x + p.x) / 2,
                C = (c.y + p.y) / 2;
              do
                y.y > C != y.next.y > C &&
                  y.next.y !== y.y &&
                  k < ((y.next.x - y.x) * (C - y.y)) / (y.next.y - y.y) + y.x &&
                  (w = !w),
                  (y = y.next);
              while (y !== c);
              return w;
            })(l, s) &&
            (ln(l.prev, l, s.prev) || ln(l, s.prev, s))) ||
            (Gf(l, s) &&
              ln(l.prev, l, l.next) > 0 &&
              ln(s.prev, s, s.next) > 0))
        );
      }
      function ln(l, s, c) {
        return (s.y - l.y) * (c.x - s.x) - (s.x - l.x) * (c.y - s.y);
      }
      function Gf(l, s) {
        return l.x === s.x && l.y === s.y;
      }
      function E_(l, s, c, p) {
        var y = Zf(ln(l, s, c)),
          w = Zf(ln(l, s, p)),
          k = Zf(ln(c, p, l)),
          C = Zf(ln(c, p, s));
        return (
          (y !== w && k !== C) ||
          !(y !== 0 || !Wf(l, c, s)) ||
          !(w !== 0 || !Wf(l, p, s)) ||
          !(k !== 0 || !Wf(c, l, p)) ||
          !(C !== 0 || !Wf(c, s, p))
        );
      }
      function Wf(l, s, c) {
        return (
          s.x <= Math.max(l.x, c.x) &&
          s.x >= Math.min(l.x, c.x) &&
          s.y <= Math.max(l.y, c.y) &&
          s.y >= Math.min(l.y, c.y)
        );
      }
      function Zf(l) {
        return l > 0 ? 1 : l < 0 ? -1 : 0;
      }
      function Eh(l, s) {
        return ln(l.prev, l, l.next) < 0
          ? ln(l, s, l.next) >= 0 && ln(l, l.prev, s) >= 0
          : ln(l, s, l.prev) < 0 || ln(l, l.next, s) < 0;
      }
      function T_(l, s) {
        var c = new x1(l.i, l.x, l.y),
          p = new x1(s.i, s.x, s.y),
          y = l.next,
          w = s.prev;
        return (
          (l.next = s),
          (s.prev = l),
          (c.next = y),
          (y.prev = c),
          (p.next = c),
          (c.prev = p),
          (w.next = p),
          (p.prev = w),
          p
        );
      }
      function M_(l, s, c, p) {
        var y = new x1(l, s, c);
        return (
          p
            ? ((y.next = p.next), (y.prev = p), (p.next.prev = y), (p.next = y))
            : ((y.prev = y), (y.next = y)),
          y
        );
      }
      function Th(l) {
        (l.next.prev = l.prev),
          (l.prev.next = l.next),
          l.prevZ && (l.prevZ.nextZ = l.nextZ),
          l.nextZ && (l.nextZ.prevZ = l.prevZ);
      }
      function x1(l, s, c) {
        (this.i = l),
          (this.x = s),
          (this.y = c),
          (this.prev = null),
          (this.next = null),
          (this.z = 0),
          (this.prevZ = null),
          (this.nextZ = null),
          (this.steiner = !1);
      }
      function w1(l, s, c, p) {
        for (var y = 0, w = s, k = c - p; w < c; w += p)
          (y += (l[k] - l[w]) * (l[w + 1] + l[k + 1])), (k = w);
        return y;
      }
      (v1.exports = Qf),
        (v1.exports.default = Qf),
        (Qf.deviation = function (l, s, c, p) {
          var y = s && s.length,
            w = Math.abs(w1(l, 0, y ? s[0] * c : l.length, c));
          if (y)
            for (var k = 0, C = s.length; k < C; k++)
              w -= Math.abs(
                w1(l, s[k] * c, k < C - 1 ? s[k + 1] * c : l.length, c)
              );
          var A = 0;
          for (k = 0; k < p.length; k += 3) {
            var P = p[k] * c,
              N = p[k + 1] * c,
              O = p[k + 2] * c;
            A += Math.abs(
              (l[P] - l[O]) * (l[N + 1] - l[P + 1]) -
                (l[P] - l[N]) * (l[O + 1] - l[P + 1])
            );
          }
          return w === 0 && A === 0 ? 0 : Math.abs((A - w) / w);
        }),
        (Qf.flatten = function (l) {
          for (
            var s = l[0][0].length,
              c = { vertices: [], holes: [], dimensions: s },
              p = 0,
              y = 0;
            y < l.length;
            y++
          ) {
            for (var w = 0; w < l[y].length; w++)
              for (var k = 0; k < s; k++) c.vertices.push(l[y][w][k]);
            y > 0 && c.holes.push((p += l[y - 1].length));
          }
          return c;
        });
      var A_ = u(v1.exports);
      function ek(l, s, c, p, y) {
        I_(l, s, c || 0, p || l.length - 1, y || tk);
      }
      function I_(l, s, c, p, y) {
        for (; p > c; ) {
          if (p - c > 600) {
            var w = p - c + 1,
              k = s - c + 1,
              C = Math.log(w),
              A = 0.5 * Math.exp((2 * C) / 3),
              P =
                0.5 *
                Math.sqrt((C * A * (w - A)) / w) *
                (k - w / 2 < 0 ? -1 : 1);
            I_(
              l,
              s,
              Math.max(c, Math.floor(s - (k * A) / w + P)),
              Math.min(p, Math.floor(s + ((w - k) * A) / w + P)),
              y
            );
          }
          var N = l[s],
            O = c,
            j = p;
          for (Mh(l, c, s), y(l[p], N) > 0 && Mh(l, c, p); O < j; ) {
            for (Mh(l, O, j), O++, j--; y(l[O], N) < 0; ) O++;
            for (; y(l[j], N) > 0; ) j--;
          }
          y(l[c], N) === 0 ? Mh(l, c, j) : Mh(l, ++j, p),
            j <= s && (c = j + 1),
            s <= j && (p = j - 1);
        }
      }
      function Mh(l, s, c) {
        var p = l[s];
        (l[s] = l[c]), (l[c] = p);
      }
      function tk(l, s) {
        return l < s ? -1 : l > s ? 1 : 0;
      }
      function k1(l, s) {
        let c = l.length;
        if (c <= 1) return [l];
        let p = [],
          y,
          w;
        for (let k = 0; k < c; k++) {
          let C = Rt(l[k]);
          C !== 0 &&
            ((l[k].area = Math.abs(C)),
            w === void 0 && (w = C < 0),
            w === C < 0 ? (y && p.push(y), (y = [l[k]])) : y.push(l[k]));
        }
        if ((y && p.push(y), s > 1))
          for (let k = 0; k < p.length; k++)
            p[k].length <= s ||
              (ek(p[k], s, 1, p[k].length - 1, ik), (p[k] = p[k].slice(0, s)));
        return p;
      }
      function ik(l, s) {
        return s.area - l.area;
      }
      function S1(l, s, c) {
        let p = c.patternDependencies,
          y = !1;
        for (let w of s) {
          let k = w.paint.get(`${l}-pattern`);
          k.isConstant() || (y = !0);
          let C = k.constantOr(null);
          C && ((y = !0), (p[C.to] = !0), (p[C.from] = !0));
        }
        return y;
      }
      function C1(l, s, c, p, y) {
        let w = y.patternDependencies;
        for (let k of s) {
          let C = k.paint.get(`${l}-pattern`).value;
          if (C.kind !== "constant") {
            let A = C.evaluate({ zoom: p - 1 }, c, {}, y.availableImages),
              P = C.evaluate({ zoom: p }, c, {}, y.availableImages),
              N = C.evaluate({ zoom: p + 1 }, c, {}, y.availableImages);
            (A = A && A.name ? A.name : A),
              (P = P && P.name ? P.name : P),
              (N = N && N.name ? N.name : N),
              (w[A] = !0),
              (w[P] = !0),
              (w[N] = !0),
              (c.patterns[k.id] = { min: A, mid: P, max: N });
          }
        }
        return c;
      }
      class E1 {
        constructor(s) {
          (this.zoom = s.zoom),
            (this.overscaling = s.overscaling),
            (this.layers = s.layers),
            (this.layerIds = this.layers.map((c) => c.id)),
            (this.index = s.index),
            (this.hasPattern = !1),
            (this.patternFeatures = []),
            (this.layoutVertexArray = new Z()),
            (this.indexArray = new Ve()),
            (this.indexArray2 = new Ge()),
            (this.programConfigurations = new zr(s.layers, s.zoom)),
            (this.segments = new nt()),
            (this.segments2 = new nt()),
            (this.stateDependentLayerIds = this.layers
              .filter((c) => c.isStateDependent())
              .map((c) => c.id));
        }
        populate(s, c, p) {
          this.hasPattern = S1("fill", this.layers, c);
          let y = this.layers[0].layout.get("fill-sort-key"),
            w = !y.isConstant(),
            k = [];
          for (let { feature: C, id: A, index: P, sourceLayerIndex: N } of s) {
            let O = this.layers[0]._featureFilter.needGeometry,
              j = ja(C, O);
            if (!this.layers[0]._featureFilter.filter(new Mr(this.zoom), j, p))
              continue;
            let W = w ? y.evaluate(j, {}, p, c.availableImages) : void 0,
              K = {
                id: A,
                properties: C.properties,
                type: C.type,
                sourceLayerIndex: N,
                index: P,
                geometry: O ? j.geometry : Va(C),
                patterns: {},
                sortKey: W,
              };
            k.push(K);
          }
          w && k.sort((C, A) => C.sortKey - A.sortKey);
          for (let C of k) {
            let { geometry: A, index: P, sourceLayerIndex: N } = C;
            if (this.hasPattern) {
              let O = C1("fill", this.layers, C, this.zoom, c);
              this.patternFeatures.push(O);
            } else this.addFeature(C, A, P, p, {});
            c.featureIndex.insert(s[P].feature, A, P, N, this.index);
          }
        }
        update(s, c, p) {
          this.stateDependentLayers.length &&
            this.programConfigurations.updatePaintArrays(
              s,
              c,
              this.stateDependentLayers,
              p
            );
        }
        addFeatures(s, c, p) {
          for (let y of this.patternFeatures)
            this.addFeature(y, y.geometry, y.index, c, p);
        }
        isEmpty() {
          return this.layoutVertexArray.length === 0;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(s) {
          this.uploaded ||
            ((this.layoutVertexBuffer = s.createVertexBuffer(
              this.layoutVertexArray,
              q7
            )),
            (this.indexBuffer = s.createIndexBuffer(this.indexArray)),
            (this.indexBuffer2 = s.createIndexBuffer(this.indexArray2))),
            this.programConfigurations.upload(s),
            (this.uploaded = !0);
        }
        destroy() {
          this.layoutVertexBuffer &&
            (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.indexBuffer2.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy(),
            this.segments2.destroy());
        }
        addFeature(s, c, p, y, w) {
          for (let k of k1(c, 500)) {
            let C = 0;
            for (let W of k) C += W.length;
            let A = this.segments.prepareSegment(
                C,
                this.layoutVertexArray,
                this.indexArray
              ),
              P = A.vertexLength,
              N = [],
              O = [];
            for (let W of k) {
              if (W.length === 0) continue;
              W !== k[0] && O.push(N.length / 2);
              let K = this.segments2.prepareSegment(
                  W.length,
                  this.layoutVertexArray,
                  this.indexArray2
                ),
                ie = K.vertexLength;
              this.layoutVertexArray.emplaceBack(W[0].x, W[0].y),
                this.indexArray2.emplaceBack(ie + W.length - 1, ie),
                N.push(W[0].x),
                N.push(W[0].y);
              for (let ae = 1; ae < W.length; ae++)
                this.layoutVertexArray.emplaceBack(W[ae].x, W[ae].y),
                  this.indexArray2.emplaceBack(ie + ae - 1, ie + ae),
                  N.push(W[ae].x),
                  N.push(W[ae].y);
              (K.vertexLength += W.length), (K.primitiveLength += W.length);
            }
            let j = A_(N, O);
            for (let W = 0; W < j.length; W += 3)
              this.indexArray.emplaceBack(P + j[W], P + j[W + 1], P + j[W + 2]);
            (A.vertexLength += C), (A.primitiveLength += j.length / 3);
          }
          this.programConfigurations.populatePaintArrays(
            this.layoutVertexArray.length,
            s,
            p,
            w,
            y
          );
        }
      }
      let P_, D_;
      Nt("FillBucket", E1, { omit: ["layers", "patternFeatures"] });
      var rk = {
        get paint() {
          return (D_ =
            D_ ||
            new Mo({
              "fill-antialias": new Kt(je.paint_fill["fill-antialias"]),
              "fill-opacity": new si(je.paint_fill["fill-opacity"]),
              "fill-color": new si(je.paint_fill["fill-color"]),
              "fill-outline-color": new si(je.paint_fill["fill-outline-color"]),
              "fill-translate": new Kt(je.paint_fill["fill-translate"]),
              "fill-translate-anchor": new Kt(
                je.paint_fill["fill-translate-anchor"]
              ),
              "fill-pattern": new Oa(je.paint_fill["fill-pattern"]),
            }));
        },
        get layout() {
          return (P_ =
            P_ ||
            new Mo({
              "fill-sort-key": new si(je.layout_fill["fill-sort-key"]),
            }));
        },
      };
      class nk extends ms {
        constructor(s) {
          super(s, rk);
        }
        recalculate(s, c) {
          super.recalculate(s, c);
          let p = this.paint._values["fill-outline-color"];
          p.value.kind === "constant" &&
            p.value.value === void 0 &&
            (this.paint._values["fill-outline-color"] =
              this.paint._values["fill-color"]);
        }
        createBucket(s) {
          return new E1(s);
        }
        queryRadius() {
          return Hf(this.paint.get("fill-translate"));
        }
        queryIntersectsFeature(s, c, p, y, w, k, C) {
          return xh(
            qf(
              s,
              this.paint.get("fill-translate"),
              this.paint.get("fill-translate-anchor"),
              k.angle,
              C
            ),
            y
          );
        }
        isTileClipped() {
          return !0;
        }
      }
      let ok = an(
          [
            { name: "a_pos", components: 2, type: "Int16" },
            { name: "a_normal_ed", components: 4, type: "Int16" },
          ],
          4
        ),
        sk = an([{ name: "a_centroid", components: 2, type: "Int16" }], 4),
        { members: ak } = ok;
      var Vl = {},
        lk = h,
        L_ = Ru;
      function Ru(l, s, c, p, y) {
        (this.properties = {}),
          (this.extent = c),
          (this.type = 0),
          (this._pbf = l),
          (this._geometry = -1),
          (this._keys = p),
          (this._values = y),
          l.readFields(ck, this, s);
      }
      function ck(l, s, c) {
        l == 1
          ? (s.id = c.readVarint())
          : l == 2
          ? (function (p, y) {
              for (var w = p.readVarint() + p.pos; p.pos < w; ) {
                var k = y._keys[p.readVarint()],
                  C = y._values[p.readVarint()];
                y.properties[k] = C;
              }
            })(c, s)
          : l == 3
          ? (s.type = c.readVarint())
          : l == 4 && (s._geometry = c.pos);
      }
      function uk(l) {
        for (var s, c, p = 0, y = 0, w = l.length, k = w - 1; y < w; k = y++)
          p += ((c = l[k]).x - (s = l[y]).x) * (s.y + c.y);
        return p;
      }
      (Ru.types = ["Unknown", "Point", "LineString", "Polygon"]),
        (Ru.prototype.loadGeometry = function () {
          var l = this._pbf;
          l.pos = this._geometry;
          for (
            var s,
              c = l.readVarint() + l.pos,
              p = 1,
              y = 0,
              w = 0,
              k = 0,
              C = [];
            l.pos < c;

          ) {
            if (y <= 0) {
              var A = l.readVarint();
              (p = 7 & A), (y = A >> 3);
            }
            if ((y--, p === 1 || p === 2))
              (w += l.readSVarint()),
                (k += l.readSVarint()),
                p === 1 && (s && C.push(s), (s = [])),
                s.push(new lk(w, k));
            else {
              if (p !== 7) throw new Error("unknown command " + p);
              s && s.push(s[0].clone());
            }
          }
          return s && C.push(s), C;
        }),
        (Ru.prototype.bbox = function () {
          var l = this._pbf;
          l.pos = this._geometry;
          for (
            var s = l.readVarint() + l.pos,
              c = 1,
              p = 0,
              y = 0,
              w = 0,
              k = 1 / 0,
              C = -1 / 0,
              A = 1 / 0,
              P = -1 / 0;
            l.pos < s;

          ) {
            if (p <= 0) {
              var N = l.readVarint();
              (c = 7 & N), (p = N >> 3);
            }
            if ((p--, c === 1 || c === 2))
              (y += l.readSVarint()) < k && (k = y),
                y > C && (C = y),
                (w += l.readSVarint()) < A && (A = w),
                w > P && (P = w);
            else if (c !== 7) throw new Error("unknown command " + c);
          }
          return [k, A, C, P];
        }),
        (Ru.prototype.toGeoJSON = function (l, s, c) {
          var p,
            y,
            w = this.extent * Math.pow(2, c),
            k = this.extent * l,
            C = this.extent * s,
            A = this.loadGeometry(),
            P = Ru.types[this.type];
          function N(W) {
            for (var K = 0; K < W.length; K++) {
              var ie = W[K];
              W[K] = [
                (360 * (ie.x + k)) / w - 180,
                (360 / Math.PI) *
                  Math.atan(
                    Math.exp(((180 - (360 * (ie.y + C)) / w) * Math.PI) / 180)
                  ) -
                  90,
              ];
            }
          }
          switch (this.type) {
            case 1:
              var O = [];
              for (p = 0; p < A.length; p++) O[p] = A[p][0];
              N((A = O));
              break;
            case 2:
              for (p = 0; p < A.length; p++) N(A[p]);
              break;
            case 3:
              for (
                A = (function (W) {
                  var K = W.length;
                  if (K <= 1) return [W];
                  for (var ie, ae, pe = [], Pe = 0; Pe < K; Pe++) {
                    var ye = uk(W[Pe]);
                    ye !== 0 &&
                      (ae === void 0 && (ae = ye < 0),
                      ae === ye < 0
                        ? (ie && pe.push(ie), (ie = [W[Pe]]))
                        : ie.push(W[Pe]));
                  }
                  return ie && pe.push(ie), pe;
                })(A),
                  p = 0;
                p < A.length;
                p++
              )
                for (y = 0; y < A[p].length; y++) N(A[p][y]);
          }
          A.length === 1 ? (A = A[0]) : (P = "Multi" + P);
          var j = {
            type: "Feature",
            geometry: { type: P, coordinates: A },
            properties: this.properties,
          };
          return "id" in this && (j.id = this.id), j;
        });
      var dk = L_,
        F_ = z_;
      function z_(l, s) {
        (this.version = 1),
          (this.name = null),
          (this.extent = 4096),
          (this.length = 0),
          (this._pbf = l),
          (this._keys = []),
          (this._values = []),
          (this._features = []),
          l.readFields(hk, this, s),
          (this.length = this._features.length);
      }
      function hk(l, s, c) {
        l === 15
          ? (s.version = c.readVarint())
          : l === 1
          ? (s.name = c.readString())
          : l === 5
          ? (s.extent = c.readVarint())
          : l === 2
          ? s._features.push(c.pos)
          : l === 3
          ? s._keys.push(c.readString())
          : l === 4 &&
            s._values.push(
              (function (p) {
                for (var y = null, w = p.readVarint() + p.pos; p.pos < w; ) {
                  var k = p.readVarint() >> 3;
                  y =
                    k === 1
                      ? p.readString()
                      : k === 2
                      ? p.readFloat()
                      : k === 3
                      ? p.readDouble()
                      : k === 4
                      ? p.readVarint64()
                      : k === 5
                      ? p.readVarint()
                      : k === 6
                      ? p.readSVarint()
                      : k === 7
                      ? p.readBoolean()
                      : null;
                }
                return y;
              })(c)
            );
      }
      z_.prototype.feature = function (l) {
        if (l < 0 || l >= this._features.length)
          throw new Error("feature index out of bounds");
        this._pbf.pos = this._features[l];
        var s = this._pbf.readVarint() + this._pbf.pos;
        return new dk(this._pbf, s, this.extent, this._keys, this._values);
      };
      var pk = F_;
      function fk(l, s, c) {
        if (l === 3) {
          var p = new pk(c, c.readVarint() + c.pos);
          p.length && (s[p.name] = p);
        }
      }
      (Vl.VectorTile = function (l, s) {
        this.layers = l.readFields(fk, {}, s);
      }),
        (Vl.VectorTileFeature = L_),
        (Vl.VectorTileLayer = F_);
      let mk = Vl.VectorTileFeature.types,
        T1 = Math.pow(2, 13);
      function Ah(l, s, c, p, y, w, k, C) {
        l.emplaceBack(
          s,
          c,
          2 * Math.floor(p * T1) + k,
          y * T1 * 2,
          w * T1 * 2,
          Math.round(C)
        );
      }
      class M1 {
        constructor(s) {
          (this.zoom = s.zoom),
            (this.overscaling = s.overscaling),
            (this.layers = s.layers),
            (this.layerIds = this.layers.map((c) => c.id)),
            (this.index = s.index),
            (this.hasPattern = !1),
            (this.layoutVertexArray = new se()),
            (this.centroidVertexArray = new B()),
            (this.indexArray = new Ve()),
            (this.programConfigurations = new zr(s.layers, s.zoom)),
            (this.segments = new nt()),
            (this.stateDependentLayerIds = this.layers
              .filter((c) => c.isStateDependent())
              .map((c) => c.id));
        }
        populate(s, c, p) {
          (this.features = []),
            (this.hasPattern = S1("fill-extrusion", this.layers, c));
          for (let { feature: y, id: w, index: k, sourceLayerIndex: C } of s) {
            let A = this.layers[0]._featureFilter.needGeometry,
              P = ja(y, A);
            if (!this.layers[0]._featureFilter.filter(new Mr(this.zoom), P, p))
              continue;
            let N = {
              id: w,
              sourceLayerIndex: C,
              index: k,
              geometry: A ? P.geometry : Va(y),
              properties: y.properties,
              type: y.type,
              patterns: {},
            };
            this.hasPattern
              ? this.features.push(
                  C1("fill-extrusion", this.layers, N, this.zoom, c)
                )
              : this.addFeature(N, N.geometry, k, p, {}),
              c.featureIndex.insert(y, N.geometry, k, C, this.index, !0);
          }
        }
        addFeatures(s, c, p) {
          for (let y of this.features) {
            let { geometry: w } = y;
            this.addFeature(y, w, y.index, c, p);
          }
        }
        update(s, c, p) {
          this.stateDependentLayers.length &&
            this.programConfigurations.updatePaintArrays(
              s,
              c,
              this.stateDependentLayers,
              p
            );
        }
        isEmpty() {
          return (
            this.layoutVertexArray.length === 0 &&
            this.centroidVertexArray.length === 0
          );
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(s) {
          this.uploaded ||
            ((this.layoutVertexBuffer = s.createVertexBuffer(
              this.layoutVertexArray,
              ak
            )),
            (this.centroidVertexBuffer = s.createVertexBuffer(
              this.centroidVertexArray,
              sk.members,
              !0
            )),
            (this.indexBuffer = s.createIndexBuffer(this.indexArray))),
            this.programConfigurations.upload(s),
            (this.uploaded = !0);
        }
        destroy() {
          this.layoutVertexBuffer &&
            (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy(),
            this.centroidVertexBuffer.destroy());
        }
        addFeature(s, c, p, y, w) {
          let k = { x: 0, y: 0, vertexCount: 0 };
          for (let C of k1(c, 500)) {
            let A = 0;
            for (let K of C) A += K.length;
            let P = this.segments.prepareSegment(
              4,
              this.layoutVertexArray,
              this.indexArray
            );
            for (let K of C) {
              if (K.length === 0 || yk(K)) continue;
              let ie = 0;
              for (let ae = 0; ae < K.length; ae++) {
                let pe = K[ae];
                if (ae >= 1) {
                  let Pe = K[ae - 1];
                  if (!gk(pe, Pe)) {
                    P.vertexLength + 4 > nt.MAX_VERTEX_ARRAY_LENGTH &&
                      (P = this.segments.prepareSegment(
                        4,
                        this.layoutVertexArray,
                        this.indexArray
                      ));
                    let ye = pe.sub(Pe)._perp()._unit(),
                      Se = Pe.dist(pe);
                    ie + Se > 32768 && (ie = 0),
                      Ah(
                        this.layoutVertexArray,
                        pe.x,
                        pe.y,
                        ye.x,
                        ye.y,
                        0,
                        0,
                        ie
                      ),
                      Ah(
                        this.layoutVertexArray,
                        pe.x,
                        pe.y,
                        ye.x,
                        ye.y,
                        0,
                        1,
                        ie
                      ),
                      (k.x += 2 * pe.x),
                      (k.y += 2 * pe.y),
                      (k.vertexCount += 2),
                      (ie += Se),
                      Ah(
                        this.layoutVertexArray,
                        Pe.x,
                        Pe.y,
                        ye.x,
                        ye.y,
                        0,
                        0,
                        ie
                      ),
                      Ah(
                        this.layoutVertexArray,
                        Pe.x,
                        Pe.y,
                        ye.x,
                        ye.y,
                        0,
                        1,
                        ie
                      ),
                      (k.x += 2 * Pe.x),
                      (k.y += 2 * Pe.y),
                      (k.vertexCount += 2);
                    let We = P.vertexLength;
                    this.indexArray.emplaceBack(We, We + 2, We + 1),
                      this.indexArray.emplaceBack(We + 1, We + 2, We + 3),
                      (P.vertexLength += 4),
                      (P.primitiveLength += 2);
                  }
                }
              }
            }
            if (
              (P.vertexLength + A > nt.MAX_VERTEX_ARRAY_LENGTH &&
                (P = this.segments.prepareSegment(
                  A,
                  this.layoutVertexArray,
                  this.indexArray
                )),
              mk[s.type] !== "Polygon")
            )
              continue;
            let N = [],
              O = [],
              j = P.vertexLength;
            for (let K of C)
              if (K.length !== 0) {
                K !== C[0] && O.push(N.length / 2);
                for (let ie = 0; ie < K.length; ie++) {
                  let ae = K[ie];
                  Ah(this.layoutVertexArray, ae.x, ae.y, 0, 0, 1, 1, 0),
                    (k.x += ae.x),
                    (k.y += ae.y),
                    (k.vertexCount += 1),
                    N.push(ae.x),
                    N.push(ae.y);
                }
              }
            let W = A_(N, O);
            for (let K = 0; K < W.length; K += 3)
              this.indexArray.emplaceBack(j + W[K], j + W[K + 2], j + W[K + 1]);
            (P.primitiveLength += W.length / 3), (P.vertexLength += A);
          }
          for (let C = 0; C < k.vertexCount; C++)
            this.centroidVertexArray.emplaceBack(
              Math.floor(k.x / k.vertexCount),
              Math.floor(k.y / k.vertexCount)
            );
          this.programConfigurations.populatePaintArrays(
            this.layoutVertexArray.length,
            s,
            p,
            w,
            y
          );
        }
      }
      function gk(l, s) {
        return (
          (l.x === s.x && (l.x < 0 || l.x > Ui)) ||
          (l.y === s.y && (l.y < 0 || l.y > Ui))
        );
      }
      function yk(l) {
        return (
          l.every((s) => s.x < 0) ||
          l.every((s) => s.x > Ui) ||
          l.every((s) => s.y < 0) ||
          l.every((s) => s.y > Ui)
        );
      }
      let N_;
      Nt("FillExtrusionBucket", M1, { omit: ["layers", "features"] });
      var bk = {
        get paint() {
          return (N_ =
            N_ ||
            new Mo({
              "fill-extrusion-opacity": new Kt(
                je["paint_fill-extrusion"]["fill-extrusion-opacity"]
              ),
              "fill-extrusion-color": new si(
                je["paint_fill-extrusion"]["fill-extrusion-color"]
              ),
              "fill-extrusion-translate": new Kt(
                je["paint_fill-extrusion"]["fill-extrusion-translate"]
              ),
              "fill-extrusion-translate-anchor": new Kt(
                je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]
              ),
              "fill-extrusion-pattern": new Oa(
                je["paint_fill-extrusion"]["fill-extrusion-pattern"]
              ),
              "fill-extrusion-height": new si(
                je["paint_fill-extrusion"]["fill-extrusion-height"]
              ),
              "fill-extrusion-base": new si(
                je["paint_fill-extrusion"]["fill-extrusion-base"]
              ),
              "fill-extrusion-vertical-gradient": new Kt(
                je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]
              ),
            }));
        },
      };
      class vk extends ms {
        constructor(s) {
          super(s, bk);
        }
        createBucket(s) {
          return new M1(s);
        }
        queryRadius() {
          return Hf(this.paint.get("fill-extrusion-translate"));
        }
        is3D() {
          return !0;
        }
        queryIntersectsFeature(s, c, p, y, w, k, C, A) {
          let P = qf(
              s,
              this.paint.get("fill-extrusion-translate"),
              this.paint.get("fill-extrusion-translate-anchor"),
              k.angle,
              C
            ),
            N = this.paint.get("fill-extrusion-height").evaluate(c, p),
            O = this.paint.get("fill-extrusion-base").evaluate(c, p),
            j = (function (K, ie, ae, pe) {
              let Pe = [];
              for (let ye of K) {
                let Se = [ye.x, ye.y, 0, 1];
                $f(Se, Se, ie), Pe.push(new b(Se[0] / Se[3], Se[1] / Se[3]));
              }
              return Pe;
            })(P, A),
            W = (function (K, ie, ae, pe) {
              let Pe = [],
                ye = [],
                Se = pe[8] * ie,
                We = pe[9] * ie,
                tt = pe[10] * ie,
                Dt = pe[11] * ie,
                Qt = pe[8] * ae,
                It = pe[9] * ae,
                Et = pe[10] * ae,
                xt = pe[11] * ae;
              for (let Ut of K) {
                let St = [],
                  mt = [];
                for (let ni of Ut) {
                  let Wt = ni.x,
                    Oi = ni.y,
                    Ir = pe[0] * Wt + pe[4] * Oi + pe[12],
                    Nr = pe[1] * Wt + pe[5] * Oi + pe[13],
                    _n = pe[2] * Wt + pe[6] * Oi + pe[14],
                    ds = pe[3] * Wt + pe[7] * Oi + pe[15],
                    Po = _n + tt,
                    pn = ds + Dt,
                    Qn = Ir + Qt,
                    to = Nr + It,
                    Do = _n + Et,
                    Lo = ds + xt,
                    xn = new b((Ir + Se) / pn, (Nr + We) / pn);
                  (xn.z = Po / pn), St.push(xn);
                  let wn = new b(Qn / Lo, to / Lo);
                  (wn.z = Do / Lo), mt.push(wn);
                }
                Pe.push(St), ye.push(mt);
              }
              return [Pe, ye];
            })(y, O, N, A);
          return (function (K, ie, ae) {
            let pe = 1 / 0;
            xh(ae, ie) && (pe = O_(ae, ie[0]));
            for (let Pe = 0; Pe < ie.length; Pe++) {
              let ye = ie[Pe],
                Se = K[Pe];
              for (let We = 0; We < ye.length - 1; We++) {
                let tt = ye[We],
                  Dt = [tt, ye[We + 1], Se[We + 1], Se[We], tt];
                Ha(ae, Dt) && (pe = Math.min(pe, O_(ae, Dt)));
              }
            }
            return pe !== 1 / 0 && pe;
          })(W[0], W[1], j);
        }
      }
      function Ih(l, s) {
        return l.x * s.x + l.y * s.y;
      }
      function O_(l, s) {
        if (l.length === 1) {
          let c = 0,
            p = s[c++],
            y;
          for (; !y || p.equals(y); ) if (((y = s[c++]), !y)) return 1 / 0;
          for (; c < s.length; c++) {
            let w = s[c],
              k = l[0],
              C = y.sub(p),
              A = w.sub(p),
              P = k.sub(p),
              N = Ih(C, C),
              O = Ih(C, A),
              j = Ih(A, A),
              W = Ih(P, C),
              K = Ih(P, A),
              ie = N * j - O * O,
              ae = (j * W - O * K) / ie,
              pe = (N * K - O * W) / ie,
              Pe = p.z * (1 - ae - pe) + y.z * ae + w.z * pe;
            if (isFinite(Pe)) return Pe;
          }
          return 1 / 0;
        }
        {
          let c = 1 / 0;
          for (let p of s) c = Math.min(c, p.z);
          return c;
        }
      }
      let _k = an(
          [
            { name: "a_pos_normal", components: 2, type: "Int16" },
            { name: "a_data", components: 4, type: "Uint8" },
          ],
          4
        ),
        { members: xk } = _k,
        wk = an([
          { name: "a_uv_x", components: 1, type: "Float32" },
          { name: "a_split_index", components: 1, type: "Float32" },
        ]),
        { members: kk } = wk,
        Sk = Vl.VectorTileFeature.types,
        Ck = Math.cos((Math.PI / 180) * 37.5),
        B_ = Math.pow(2, 14) / 0.5;
      class A1 {
        constructor(s) {
          (this.zoom = s.zoom),
            (this.overscaling = s.overscaling),
            (this.layers = s.layers),
            (this.layerIds = this.layers.map((c) => c.id)),
            (this.index = s.index),
            (this.hasPattern = !1),
            (this.patternFeatures = []),
            (this.lineClipsArray = []),
            (this.gradients = {}),
            this.layers.forEach((c) => {
              this.gradients[c.id] = {};
            }),
            (this.layoutVertexArray = new oe()),
            (this.layoutVertexArray2 = new le()),
            (this.indexArray = new Ve()),
            (this.programConfigurations = new zr(s.layers, s.zoom)),
            (this.segments = new nt()),
            (this.maxLineLength = 0),
            (this.stateDependentLayerIds = this.layers
              .filter((c) => c.isStateDependent())
              .map((c) => c.id));
        }
        populate(s, c, p) {
          this.hasPattern = S1("line", this.layers, c);
          let y = this.layers[0].layout.get("line-sort-key"),
            w = !y.isConstant(),
            k = [];
          for (let { feature: C, id: A, index: P, sourceLayerIndex: N } of s) {
            let O = this.layers[0]._featureFilter.needGeometry,
              j = ja(C, O);
            if (!this.layers[0]._featureFilter.filter(new Mr(this.zoom), j, p))
              continue;
            let W = w ? y.evaluate(j, {}, p) : void 0,
              K = {
                id: A,
                properties: C.properties,
                type: C.type,
                sourceLayerIndex: N,
                index: P,
                geometry: O ? j.geometry : Va(C),
                patterns: {},
                sortKey: W,
              };
            k.push(K);
          }
          w && k.sort((C, A) => C.sortKey - A.sortKey);
          for (let C of k) {
            let { geometry: A, index: P, sourceLayerIndex: N } = C;
            if (this.hasPattern) {
              let O = C1("line", this.layers, C, this.zoom, c);
              this.patternFeatures.push(O);
            } else this.addFeature(C, A, P, p, {});
            c.featureIndex.insert(s[P].feature, A, P, N, this.index);
          }
        }
        update(s, c, p) {
          this.stateDependentLayers.length &&
            this.programConfigurations.updatePaintArrays(
              s,
              c,
              this.stateDependentLayers,
              p
            );
        }
        addFeatures(s, c, p) {
          for (let y of this.patternFeatures)
            this.addFeature(y, y.geometry, y.index, c, p);
        }
        isEmpty() {
          return this.layoutVertexArray.length === 0;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(s) {
          this.uploaded ||
            (this.layoutVertexArray2.length !== 0 &&
              (this.layoutVertexBuffer2 = s.createVertexBuffer(
                this.layoutVertexArray2,
                kk
              )),
            (this.layoutVertexBuffer = s.createVertexBuffer(
              this.layoutVertexArray,
              xk
            )),
            (this.indexBuffer = s.createIndexBuffer(this.indexArray))),
            this.programConfigurations.upload(s),
            (this.uploaded = !0);
        }
        destroy() {
          this.layoutVertexBuffer &&
            (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy());
        }
        lineFeatureClips(s) {
          if (
            s.properties &&
            Object.prototype.hasOwnProperty.call(
              s.properties,
              "mapbox_clip_start"
            ) &&
            Object.prototype.hasOwnProperty.call(
              s.properties,
              "mapbox_clip_end"
            )
          )
            return {
              start: +s.properties.mapbox_clip_start,
              end: +s.properties.mapbox_clip_end,
            };
        }
        addFeature(s, c, p, y, w) {
          let k = this.layers[0].layout,
            C = k.get("line-join").evaluate(s, {}),
            A = k.get("line-cap"),
            P = k.get("line-miter-limit"),
            N = k.get("line-round-limit");
          this.lineClips = this.lineFeatureClips(s);
          for (let O of c) this.addLine(O, s, C, A, P, N);
          this.programConfigurations.populatePaintArrays(
            this.layoutVertexArray.length,
            s,
            p,
            w,
            y
          );
        }
        addLine(s, c, p, y, w, k) {
          if (
            ((this.distance = 0),
            (this.scaledDistance = 0),
            (this.totalDistance = 0),
            this.lineClips)
          ) {
            this.lineClipsArray.push(this.lineClips);
            for (let pe = 0; pe < s.length - 1; pe++)
              this.totalDistance += s[pe].dist(s[pe + 1]);
            this.updateScaledDistance(),
              (this.maxLineLength = Math.max(
                this.maxLineLength,
                this.totalDistance
              ));
          }
          let C = Sk[c.type] === "Polygon",
            A = s.length;
          for (; A >= 2 && s[A - 1].equals(s[A - 2]); ) A--;
          let P = 0;
          for (; P < A - 1 && s[P].equals(s[P + 1]); ) P++;
          if (A < (C ? 3 : 2)) return;
          p === "bevel" && (w = 1.05);
          let N =
              this.overscaling <= 16 ? (15 * Ui) / (512 * this.overscaling) : 0,
            O = this.segments.prepareSegment(
              10 * A,
              this.layoutVertexArray,
              this.indexArray
            ),
            j,
            W,
            K,
            ie,
            ae;
          (this.e1 = this.e2 = -1),
            C && ((j = s[A - 2]), (ae = s[P].sub(j)._unit()._perp()));
          for (let pe = P; pe < A; pe++) {
            if (
              ((K = pe === A - 1 ? (C ? s[P + 1] : void 0) : s[pe + 1]),
              K && s[pe].equals(K))
            )
              continue;
            ae && (ie = ae),
              j && (W = j),
              (j = s[pe]),
              (ae = K ? K.sub(j)._unit()._perp() : ie),
              (ie = ie || ae);
            let Pe = ie.add(ae);
            (Pe.x === 0 && Pe.y === 0) || Pe._unit();
            let ye = ie.x * ae.x + ie.y * ae.y,
              Se = Pe.x * ae.x + Pe.y * ae.y,
              We = Se !== 0 ? 1 / Se : 1 / 0,
              tt = 2 * Math.sqrt(2 - 2 * Se),
              Dt = Se < Ck && W && K,
              Qt = ie.x * ae.y - ie.y * ae.x > 0;
            if (Dt && pe > P) {
              let xt = j.dist(W);
              if (xt > 2 * N) {
                let Ut = j.sub(
                  j
                    .sub(W)
                    ._mult(N / xt)
                    ._round()
                );
                this.updateDistance(W, Ut),
                  this.addCurrentVertex(Ut, ie, 0, 0, O),
                  (W = Ut);
              }
            }
            let It = W && K,
              Et = It ? p : C ? "butt" : y;
            if (
              (It &&
                Et === "round" &&
                (We < k ? (Et = "miter") : We <= 2 && (Et = "fakeround")),
              Et === "miter" && We > w && (Et = "bevel"),
              Et === "bevel" &&
                (We > 2 && (Et = "flipbevel"), We < w && (Et = "miter")),
              W && this.updateDistance(W, j),
              Et === "miter")
            )
              Pe._mult(We), this.addCurrentVertex(j, Pe, 0, 0, O);
            else if (Et === "flipbevel") {
              if (We > 100) Pe = ae.mult(-1);
              else {
                let xt = (We * ie.add(ae).mag()) / ie.sub(ae).mag();
                Pe._perp()._mult(xt * (Qt ? -1 : 1));
              }
              this.addCurrentVertex(j, Pe, 0, 0, O),
                this.addCurrentVertex(j, Pe.mult(-1), 0, 0, O);
            } else if (Et === "bevel" || Et === "fakeround") {
              let xt = -Math.sqrt(We * We - 1),
                Ut = Qt ? xt : 0,
                St = Qt ? 0 : xt;
              if (
                (W && this.addCurrentVertex(j, ie, Ut, St, O),
                Et === "fakeround")
              ) {
                let mt = Math.round((180 * tt) / Math.PI / 20);
                for (let ni = 1; ni < mt; ni++) {
                  let Wt = ni / mt;
                  if (Wt !== 0.5) {
                    let Ir = Wt - 0.5;
                    Wt +=
                      Wt *
                      Ir *
                      (Wt - 1) *
                      ((1.0904 +
                        ye * (ye * (3.55645 - 1.43519 * ye) - 3.2452)) *
                        Ir *
                        Ir +
                        (0.848013 + ye * (0.215638 * ye - 1.06021)));
                  }
                  let Oi = ae
                    .sub(ie)
                    ._mult(Wt)
                    ._add(ie)
                    ._unit()
                    ._mult(Qt ? -1 : 1);
                  this.addHalfVertex(j, Oi.x, Oi.y, !1, Qt, 0, O);
                }
              }
              K && this.addCurrentVertex(j, ae, -Ut, -St, O);
            } else if (Et === "butt") this.addCurrentVertex(j, Pe, 0, 0, O);
            else if (Et === "square") {
              let xt = W ? 1 : -1;
              this.addCurrentVertex(j, Pe, xt, xt, O);
            } else
              Et === "round" &&
                (W &&
                  (this.addCurrentVertex(j, ie, 0, 0, O),
                  this.addCurrentVertex(j, ie, 1, 1, O, !0)),
                K &&
                  (this.addCurrentVertex(j, ae, -1, -1, O, !0),
                  this.addCurrentVertex(j, ae, 0, 0, O)));
            if (Dt && pe < A - 1) {
              let xt = j.dist(K);
              if (xt > 2 * N) {
                let Ut = j.add(
                  K.sub(j)
                    ._mult(N / xt)
                    ._round()
                );
                this.updateDistance(j, Ut),
                  this.addCurrentVertex(Ut, ae, 0, 0, O),
                  (j = Ut);
              }
            }
          }
        }
        addCurrentVertex(s, c, p, y, w, k = !1) {
          let C = c.y * y - c.x,
            A = -c.y - c.x * y;
          this.addHalfVertex(s, c.x + c.y * p, c.y - c.x * p, k, !1, p, w),
            this.addHalfVertex(s, C, A, k, !0, -y, w),
            this.distance > B_ / 2 &&
              this.totalDistance === 0 &&
              ((this.distance = 0),
              this.updateScaledDistance(),
              this.addCurrentVertex(s, c, p, y, w, k));
        }
        addHalfVertex({ x: s, y: c }, p, y, w, k, C, A) {
          let P =
            0.5 *
            (this.lineClips
              ? this.scaledDistance * (B_ - 1)
              : this.scaledDistance);
          this.layoutVertexArray.emplaceBack(
            (s << 1) + (w ? 1 : 0),
            (c << 1) + (k ? 1 : 0),
            Math.round(63 * p) + 128,
            Math.round(63 * y) + 128,
            (1 + (C === 0 ? 0 : C < 0 ? -1 : 1)) | ((63 & P) << 2),
            P >> 6
          ),
            this.lineClips &&
              this.layoutVertexArray2.emplaceBack(
                (this.scaledDistance - this.lineClips.start) /
                  (this.lineClips.end - this.lineClips.start),
                this.lineClipsArray.length
              );
          let N = A.vertexLength++;
          this.e1 >= 0 &&
            this.e2 >= 0 &&
            (this.indexArray.emplaceBack(this.e1, this.e2, N),
            A.primitiveLength++),
            k ? (this.e2 = N) : (this.e1 = N);
        }
        updateScaledDistance() {
          this.scaledDistance = this.lineClips
            ? this.lineClips.start +
              ((this.lineClips.end - this.lineClips.start) * this.distance) /
                this.totalDistance
            : this.distance;
        }
        updateDistance(s, c) {
          (this.distance += s.dist(c)), this.updateScaledDistance();
        }
      }
      let R_, U_;
      Nt("LineBucket", A1, { omit: ["layers", "patternFeatures"] });
      var V_ = {
        get paint() {
          return (U_ =
            U_ ||
            new Mo({
              "line-opacity": new si(je.paint_line["line-opacity"]),
              "line-color": new si(je.paint_line["line-color"]),
              "line-translate": new Kt(je.paint_line["line-translate"]),
              "line-translate-anchor": new Kt(
                je.paint_line["line-translate-anchor"]
              ),
              "line-width": new si(je.paint_line["line-width"]),
              "line-gap-width": new si(je.paint_line["line-gap-width"]),
              "line-offset": new si(je.paint_line["line-offset"]),
              "line-blur": new si(je.paint_line["line-blur"]),
              "line-dasharray": new lh(je.paint_line["line-dasharray"]),
              "line-pattern": new Oa(je.paint_line["line-pattern"]),
              "line-gradient": new vc(je.paint_line["line-gradient"]),
            }));
        },
        get layout() {
          return (R_ =
            R_ ||
            new Mo({
              "line-cap": new Kt(je.layout_line["line-cap"]),
              "line-join": new si(je.layout_line["line-join"]),
              "line-miter-limit": new Kt(je.layout_line["line-miter-limit"]),
              "line-round-limit": new Kt(je.layout_line["line-round-limit"]),
              "line-sort-key": new si(je.layout_line["line-sort-key"]),
            }));
        },
      };
      class Ek extends si {
        possiblyEvaluate(s, c) {
          return (
            (c = new Mr(Math.floor(c.zoom), {
              now: c.now,
              fadeDuration: c.fadeDuration,
              zoomHistory: c.zoomHistory,
              transition: c.transition,
            })),
            super.possiblyEvaluate(s, c)
          );
        }
        evaluate(s, c, p, y) {
          return (
            (c = Ie({}, c, { zoom: Math.floor(c.zoom) })),
            super.evaluate(s, c, p, y)
          );
        }
      }
      let Kf;
      class Tk extends ms {
        constructor(s) {
          super(s, V_),
            (this.gradientVersion = 0),
            Kf ||
              ((Kf = new Ek(V_.paint.properties["line-width"].specification)),
              (Kf.useIntegerZoom = !0));
        }
        _handleSpecialPaintPropertyUpdate(s) {
          if (s === "line-gradient") {
            let c = this.gradientExpression();
            (this.stepInterpolant =
              !!(function (p) {
                return p._styleExpression !== void 0;
              })(c) && c._styleExpression.expression instanceof Eo),
              (this.gradientVersion =
                (this.gradientVersion + 1) % Number.MAX_SAFE_INTEGER);
          }
        }
        gradientExpression() {
          return this
            ._transitionablePaint._values["line-gradient"].value.expression;
        }
        recalculate(s, c) {
          super.recalculate(s, c),
            (this.paint._values["line-floorwidth"] = Kf.possiblyEvaluate(
              this._transitioningPaint._values["line-width"].value,
              s
            ));
        }
        createBucket(s) {
          return new A1(s);
        }
        queryRadius(s) {
          let c = s,
            p = j_(wh("line-width", this, c), wh("line-gap-width", this, c)),
            y = wh("line-offset", this, c);
          return p / 2 + Math.abs(y) + Hf(this.paint.get("line-translate"));
        }
        queryIntersectsFeature(s, c, p, y, w, k, C) {
          let A = qf(
              s,
              this.paint.get("line-translate"),
              this.paint.get("line-translate-anchor"),
              k.angle,
              C
            ),
            P =
              (C / 2) *
              j_(
                this.paint.get("line-width").evaluate(c, p),
                this.paint.get("line-gap-width").evaluate(c, p)
              ),
            N = this.paint.get("line-offset").evaluate(c, p);
          return (
            N &&
              (y = (function (O, j) {
                let W = [];
                for (let K = 0; K < O.length; K++) {
                  let ie = O[K],
                    ae = [];
                  for (let pe = 0; pe < ie.length; pe++) {
                    let Pe = ie[pe - 1],
                      ye = ie[pe],
                      Se = ie[pe + 1],
                      We = pe === 0 ? new b(0, 0) : ye.sub(Pe)._unit()._perp(),
                      tt =
                        pe === ie.length - 1
                          ? new b(0, 0)
                          : Se.sub(ye)._unit()._perp(),
                      Dt = We._add(tt)._unit(),
                      Qt = Dt.x * tt.x + Dt.y * tt.y;
                    Qt !== 0 && Dt._mult(1 / Qt), ae.push(Dt._mult(j)._add(ye));
                  }
                  W.push(ae);
                }
                return W;
              })(y, N * C)),
            (function (O, j, W) {
              for (let K = 0; K < j.length; K++) {
                let ie = j[K];
                if (O.length >= 3) {
                  for (let ae = 0; ae < ie.length; ae++)
                    if (Nu(O, ie[ae])) return !0;
                }
                if (Vf(O, ie, W)) return !0;
              }
              return !1;
            })(A, y, P)
          );
        }
        isTileClipped() {
          return !0;
        }
      }
      function j_(l, s) {
        return s > 0 ? s + 2 * l : l;
      }
      let Mk = an(
          [
            { name: "a_pos_offset", components: 4, type: "Int16" },
            { name: "a_data", components: 4, type: "Uint16" },
            { name: "a_pixeloffset", components: 4, type: "Int16" },
          ],
          4
        ),
        Ak = an(
          [{ name: "a_projected_pos", components: 3, type: "Float32" }],
          4
        );
      an([{ name: "a_fade_opacity", components: 1, type: "Uint32" }], 4);
      let Ik = an([
        { name: "a_placed", components: 2, type: "Uint8" },
        { name: "a_shift", components: 2, type: "Float32" },
      ]);
      an([
        { type: "Int16", name: "anchorPointX" },
        { type: "Int16", name: "anchorPointY" },
        { type: "Int16", name: "x1" },
        { type: "Int16", name: "y1" },
        { type: "Int16", name: "x2" },
        { type: "Int16", name: "y2" },
        { type: "Uint32", name: "featureIndex" },
        { type: "Uint16", name: "sourceLayerIndex" },
        { type: "Uint16", name: "bucketIndex" },
      ]);
      let H_ = an(
          [
            { name: "a_pos", components: 2, type: "Int16" },
            { name: "a_anchor_pos", components: 2, type: "Int16" },
            { name: "a_extrude", components: 2, type: "Int16" },
          ],
          4
        ),
        Pk = an(
          [
            { name: "a_pos", components: 2, type: "Float32" },
            { name: "a_radius", components: 1, type: "Float32" },
            { name: "a_flags", components: 2, type: "Int16" },
          ],
          4
        );
      function Dk(l, s, c) {
        return (
          l.sections.forEach((p) => {
            p.text = (function (y, w, k) {
              let C = w.layout.get("text-transform").evaluate(k, {});
              return (
                C === "uppercase"
                  ? (y = y.toLocaleUpperCase())
                  : C === "lowercase" && (y = y.toLocaleLowerCase()),
                Na.applyArabicShaping && (y = Na.applyArabicShaping(y)),
                y
              );
            })(p.text, s, c);
          }),
          l
        );
      }
      an([{ name: "triangle", components: 3, type: "Uint16" }]),
        an([
          { type: "Int16", name: "anchorX" },
          { type: "Int16", name: "anchorY" },
          { type: "Uint16", name: "glyphStartIndex" },
          { type: "Uint16", name: "numGlyphs" },
          { type: "Uint32", name: "vertexStartIndex" },
          { type: "Uint32", name: "lineStartIndex" },
          { type: "Uint32", name: "lineLength" },
          { type: "Uint16", name: "segment" },
          { type: "Uint16", name: "lowerSize" },
          { type: "Uint16", name: "upperSize" },
          { type: "Float32", name: "lineOffsetX" },
          { type: "Float32", name: "lineOffsetY" },
          { type: "Uint8", name: "writingMode" },
          { type: "Uint8", name: "placedOrientation" },
          { type: "Uint8", name: "hidden" },
          { type: "Uint32", name: "crossTileID" },
          { type: "Int16", name: "associatedIconIndex" },
        ]),
        an([
          { type: "Int16", name: "anchorX" },
          { type: "Int16", name: "anchorY" },
          { type: "Int16", name: "rightJustifiedTextSymbolIndex" },
          { type: "Int16", name: "centerJustifiedTextSymbolIndex" },
          { type: "Int16", name: "leftJustifiedTextSymbolIndex" },
          { type: "Int16", name: "verticalPlacedTextSymbolIndex" },
          { type: "Int16", name: "placedIconSymbolIndex" },
          { type: "Int16", name: "verticalPlacedIconSymbolIndex" },
          { type: "Uint16", name: "key" },
          { type: "Uint16", name: "textBoxStartIndex" },
          { type: "Uint16", name: "textBoxEndIndex" },
          { type: "Uint16", name: "verticalTextBoxStartIndex" },
          { type: "Uint16", name: "verticalTextBoxEndIndex" },
          { type: "Uint16", name: "iconBoxStartIndex" },
          { type: "Uint16", name: "iconBoxEndIndex" },
          { type: "Uint16", name: "verticalIconBoxStartIndex" },
          { type: "Uint16", name: "verticalIconBoxEndIndex" },
          { type: "Uint16", name: "featureIndex" },
          { type: "Uint16", name: "numHorizontalGlyphVertices" },
          { type: "Uint16", name: "numVerticalGlyphVertices" },
          { type: "Uint16", name: "numIconVertices" },
          { type: "Uint16", name: "numVerticalIconVertices" },
          { type: "Uint16", name: "useRuntimeCollisionCircles" },
          { type: "Uint32", name: "crossTileID" },
          { type: "Float32", name: "textBoxScale" },
          { type: "Float32", name: "collisionCircleDiameter" },
          { type: "Uint16", name: "textAnchorOffsetStartIndex" },
          { type: "Uint16", name: "textAnchorOffsetEndIndex" },
        ]),
        an([{ type: "Float32", name: "offsetX" }]),
        an([
          { type: "Int16", name: "x" },
          { type: "Int16", name: "y" },
          { type: "Int16", name: "tileUnitDistanceFromAnchor" },
        ]),
        an([
          { type: "Uint16", name: "textAnchor" },
          { type: "Float32", components: 2, name: "textOffset" },
        ]);
      let Ph = {
        "!": "\uFE15",
        "#": "\uFF03",
        $: "\uFF04",
        "%": "\uFF05",
        "&": "\uFF06",
        "(": "\uFE35",
        ")": "\uFE36",
        "*": "\uFF0A",
        "+": "\uFF0B",
        ",": "\uFE10",
        "-": "\uFE32",
        ".": "\u30FB",
        "/": "\uFF0F",
        ":": "\uFE13",
        ";": "\uFE14",
        "<": "\uFE3F",
        "=": "\uFF1D",
        ">": "\uFE40",
        "?": "\uFE16",
        "@": "\uFF20",
        "[": "\uFE47",
        "\\": "\uFF3C",
        "]": "\uFE48",
        "^": "\uFF3E",
        _: "\uFE33",
        "`": "\uFF40",
        "{": "\uFE37",
        "|": "\u2015",
        "}": "\uFE38",
        "~": "\uFF5E",
        "\xA2": "\uFFE0",
        "\xA3": "\uFFE1",
        "\xA5": "\uFFE5",
        "\xA6": "\uFFE4",
        "\xAC": "\uFFE2",
        "\xAF": "\uFFE3",
        "\u2013": "\uFE32",
        "\u2014": "\uFE31",
        "\u2018": "\uFE43",
        "\u2019": "\uFE44",
        "\u201C": "\uFE41",
        "\u201D": "\uFE42",
        "\u2026": "\uFE19",
        "\u2027": "\u30FB",
        "\u20A9": "\uFFE6",
        "\u3001": "\uFE11",
        "\u3002": "\uFE12",
        "\u3008": "\uFE3F",
        "\u3009": "\uFE40",
        "\u300A": "\uFE3D",
        "\u300B": "\uFE3E",
        "\u300C": "\uFE41",
        "\u300D": "\uFE42",
        "\u300E": "\uFE43",
        "\u300F": "\uFE44",
        "\u3010": "\uFE3B",
        "\u3011": "\uFE3C",
        "\u3014": "\uFE39",
        "\u3015": "\uFE3A",
        "\u3016": "\uFE17",
        "\u3017": "\uFE18",
        "\uFF01": "\uFE15",
        "\uFF08": "\uFE35",
        "\uFF09": "\uFE36",
        "\uFF0C": "\uFE10",
        "\uFF0D": "\uFE32",
        "\uFF0E": "\u30FB",
        "\uFF1A": "\uFE13",
        "\uFF1B": "\uFE14",
        "\uFF1C": "\uFE3F",
        "\uFF1E": "\uFE40",
        "\uFF1F": "\uFE16",
        "\uFF3B": "\uFE47",
        "\uFF3D": "\uFE48",
        "\uFF3F": "\uFE33",
        "\uFF5B": "\uFE37",
        "\uFF5C": "\u2015",
        "\uFF5D": "\uFE38",
        "\uFF5F": "\uFE35",
        "\uFF60": "\uFE36",
        "\uFF61": "\uFE12",
        "\uFF62": "\uFE41",
        "\uFF63": "\uFE42",
      };
      var vn = 24,
        q_ = mr,
        $_ = function (l, s, c, p, y) {
          var w,
            k,
            C = 8 * y - p - 1,
            A = (1 << C) - 1,
            P = A >> 1,
            N = -7,
            O = c ? y - 1 : 0,
            j = c ? -1 : 1,
            W = l[s + O];
          for (
            O += j, w = W & ((1 << -N) - 1), W >>= -N, N += C;
            N > 0;
            w = 256 * w + l[s + O], O += j, N -= 8
          );
          for (
            k = w & ((1 << -N) - 1), w >>= -N, N += p;
            N > 0;
            k = 256 * k + l[s + O], O += j, N -= 8
          );
          if (w === 0) w = 1 - P;
          else {
            if (w === A) return k ? NaN : (1 / 0) * (W ? -1 : 1);
            (k += Math.pow(2, p)), (w -= P);
          }
          return (W ? -1 : 1) * k * Math.pow(2, w - p);
        },
        Q_ = function (l, s, c, p, y, w) {
          var k,
            C,
            A,
            P = 8 * w - y - 1,
            N = (1 << P) - 1,
            O = N >> 1,
            j = y === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
            W = p ? 0 : w - 1,
            K = p ? 1 : -1,
            ie = s < 0 || (s === 0 && 1 / s < 0) ? 1 : 0;
          for (
            s = Math.abs(s),
              isNaN(s) || s === 1 / 0
                ? ((C = isNaN(s) ? 1 : 0), (k = N))
                : ((k = Math.floor(Math.log(s) / Math.LN2)),
                  s * (A = Math.pow(2, -k)) < 1 && (k--, (A *= 2)),
                  (s += k + O >= 1 ? j / A : j * Math.pow(2, 1 - O)) * A >= 2 &&
                    (k++, (A /= 2)),
                  k + O >= N
                    ? ((C = 0), (k = N))
                    : k + O >= 1
                    ? ((C = (s * A - 1) * Math.pow(2, y)), (k += O))
                    : ((C = s * Math.pow(2, O - 1) * Math.pow(2, y)), (k = 0)));
            y >= 8;
            l[c + W] = 255 & C, W += K, C /= 256, y -= 8
          );
          for (
            k = (k << y) | C, P += y;
            P > 0;
            l[c + W] = 255 & k, W += K, k /= 256, P -= 8
          );
          l[c + W - K] |= 128 * ie;
        };
      function mr(l) {
        (this.buf =
          ArrayBuffer.isView && ArrayBuffer.isView(l)
            ? l
            : new Uint8Array(l || 0)),
          (this.pos = 0),
          (this.type = 0),
          (this.length = this.buf.length);
      }
      (mr.Varint = 0), (mr.Fixed64 = 1), (mr.Bytes = 2), (mr.Fixed32 = 5);
      var I1 = 4294967296,
        G_ = 1 / I1,
        W_ = typeof TextDecoder > "u" ? null : new TextDecoder("utf8");
      function qa(l) {
        return l.type === mr.Bytes ? l.readVarint() + l.pos : l.pos + 1;
      }
      function Uu(l, s, c) {
        return c
          ? 4294967296 * s + (l >>> 0)
          : 4294967296 * (s >>> 0) + (l >>> 0);
      }
      function Z_(l, s, c) {
        var p =
          s <= 16383
            ? 1
            : s <= 2097151
            ? 2
            : s <= 268435455
            ? 3
            : Math.floor(Math.log(s) / (7 * Math.LN2));
        c.realloc(p);
        for (var y = c.pos - 1; y >= l; y--) c.buf[y + p] = c.buf[y];
      }
      function Lk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeVarint(l[c]);
      }
      function Fk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeSVarint(l[c]);
      }
      function zk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeFloat(l[c]);
      }
      function Nk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeDouble(l[c]);
      }
      function Ok(l, s) {
        for (var c = 0; c < l.length; c++) s.writeBoolean(l[c]);
      }
      function Bk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeFixed32(l[c]);
      }
      function Rk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeSFixed32(l[c]);
      }
      function Uk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeFixed64(l[c]);
      }
      function Vk(l, s) {
        for (var c = 0; c < l.length; c++) s.writeSFixed64(l[c]);
      }
      function Jf(l, s) {
        return (
          (l[s] | (l[s + 1] << 8) | (l[s + 2] << 16)) + 16777216 * l[s + 3]
        );
      }
      function Vu(l, s, c) {
        (l[c] = s),
          (l[c + 1] = s >>> 8),
          (l[c + 2] = s >>> 16),
          (l[c + 3] = s >>> 24);
      }
      function K_(l, s) {
        return (l[s] | (l[s + 1] << 8) | (l[s + 2] << 16)) + (l[s + 3] << 24);
      }
      mr.prototype = {
        destroy: function () {
          this.buf = null;
        },
        readFields: function (l, s, c) {
          for (c = c || this.length; this.pos < c; ) {
            var p = this.readVarint(),
              y = p >> 3,
              w = this.pos;
            (this.type = 7 & p), l(y, s, this), this.pos === w && this.skip(p);
          }
          return s;
        },
        readMessage: function (l, s) {
          return this.readFields(l, s, this.readVarint() + this.pos);
        },
        readFixed32: function () {
          var l = Jf(this.buf, this.pos);
          return (this.pos += 4), l;
        },
        readSFixed32: function () {
          var l = K_(this.buf, this.pos);
          return (this.pos += 4), l;
        },
        readFixed64: function () {
          var l = Jf(this.buf, this.pos) + Jf(this.buf, this.pos + 4) * I1;
          return (this.pos += 8), l;
        },
        readSFixed64: function () {
          var l = Jf(this.buf, this.pos) + K_(this.buf, this.pos + 4) * I1;
          return (this.pos += 8), l;
        },
        readFloat: function () {
          var l = $_(this.buf, this.pos, !0, 23, 4);
          return (this.pos += 4), l;
        },
        readDouble: function () {
          var l = $_(this.buf, this.pos, !0, 52, 8);
          return (this.pos += 8), l;
        },
        readVarint: function (l) {
          var s,
            c,
            p = this.buf;
          return (
            (s = 127 & (c = p[this.pos++])),
            c < 128
              ? s
              : ((s |= (127 & (c = p[this.pos++])) << 7),
                c < 128
                  ? s
                  : ((s |= (127 & (c = p[this.pos++])) << 14),
                    c < 128
                      ? s
                      : ((s |= (127 & (c = p[this.pos++])) << 21),
                        c < 128
                          ? s
                          : (function (y, w, k) {
                              var C,
                                A,
                                P = k.buf;
                              if (
                                ((C = (112 & (A = P[k.pos++])) >> 4),
                                A < 128 ||
                                  ((C |= (127 & (A = P[k.pos++])) << 3),
                                  A < 128) ||
                                  ((C |= (127 & (A = P[k.pos++])) << 10),
                                  A < 128) ||
                                  ((C |= (127 & (A = P[k.pos++])) << 17),
                                  A < 128) ||
                                  ((C |= (127 & (A = P[k.pos++])) << 24),
                                  A < 128) ||
                                  ((C |= (1 & (A = P[k.pos++])) << 31),
                                  A < 128))
                              )
                                return Uu(y, C, w);
                              throw new Error(
                                "Expected varint not more than 10 bytes"
                              );
                            })(
                              (s |= (15 & (c = p[this.pos])) << 28),
                              l,
                              this
                            ))))
          );
        },
        readVarint64: function () {
          return this.readVarint(!0);
        },
        readSVarint: function () {
          var l = this.readVarint();
          return l % 2 == 1 ? (l + 1) / -2 : l / 2;
        },
        readBoolean: function () {
          return !!this.readVarint();
        },
        readString: function () {
          var l = this.readVarint() + this.pos,
            s = this.pos;
          return (
            (this.pos = l),
            l - s >= 12 && W_
              ? (function (c, p, y) {
                  return W_.decode(c.subarray(p, y));
                })(this.buf, s, l)
              : (function (c, p, y) {
                  for (var w = "", k = p; k < y; ) {
                    var C,
                      A,
                      P,
                      N = c[k],
                      O = null,
                      j = N > 239 ? 4 : N > 223 ? 3 : N > 191 ? 2 : 1;
                    if (k + j > y) break;
                    j === 1
                      ? N < 128 && (O = N)
                      : j === 2
                      ? (192 & (C = c[k + 1])) == 128 &&
                        (O = ((31 & N) << 6) | (63 & C)) <= 127 &&
                        (O = null)
                      : j === 3
                      ? ((A = c[k + 2]),
                        (192 & (C = c[k + 1])) == 128 &&
                          (192 & A) == 128 &&
                          ((O =
                            ((15 & N) << 12) | ((63 & C) << 6) | (63 & A)) <=
                            2047 ||
                            (O >= 55296 && O <= 57343)) &&
                          (O = null))
                      : j === 4 &&
                        ((A = c[k + 2]),
                        (P = c[k + 3]),
                        (192 & (C = c[k + 1])) == 128 &&
                          (192 & A) == 128 &&
                          (192 & P) == 128 &&
                          ((O =
                            ((15 & N) << 18) |
                            ((63 & C) << 12) |
                            ((63 & A) << 6) |
                            (63 & P)) <= 65535 ||
                            O >= 1114112) &&
                          (O = null)),
                      O === null
                        ? ((O = 65533), (j = 1))
                        : O > 65535 &&
                          ((O -= 65536),
                          (w += String.fromCharCode(
                            ((O >>> 10) & 1023) | 55296
                          )),
                          (O = 56320 | (1023 & O))),
                      (w += String.fromCharCode(O)),
                      (k += j);
                  }
                  return w;
                })(this.buf, s, l)
          );
        },
        readBytes: function () {
          var l = this.readVarint() + this.pos,
            s = this.buf.subarray(this.pos, l);
          return (this.pos = l), s;
        },
        readPackedVarint: function (l, s) {
          if (this.type !== mr.Bytes) return l.push(this.readVarint(s));
          var c = qa(this);
          for (l = l || []; this.pos < c; ) l.push(this.readVarint(s));
          return l;
        },
        readPackedSVarint: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readSVarint());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readSVarint());
          return l;
        },
        readPackedBoolean: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readBoolean());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readBoolean());
          return l;
        },
        readPackedFloat: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readFloat());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readFloat());
          return l;
        },
        readPackedDouble: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readDouble());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readDouble());
          return l;
        },
        readPackedFixed32: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readFixed32());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readFixed32());
          return l;
        },
        readPackedSFixed32: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readSFixed32());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readSFixed32());
          return l;
        },
        readPackedFixed64: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readFixed64());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readFixed64());
          return l;
        },
        readPackedSFixed64: function (l) {
          if (this.type !== mr.Bytes) return l.push(this.readSFixed64());
          var s = qa(this);
          for (l = l || []; this.pos < s; ) l.push(this.readSFixed64());
          return l;
        },
        skip: function (l) {
          var s = 7 & l;
          if (s === mr.Varint) for (; this.buf[this.pos++] > 127; );
          else if (s === mr.Bytes) this.pos = this.readVarint() + this.pos;
          else if (s === mr.Fixed32) this.pos += 4;
          else {
            if (s !== mr.Fixed64) throw new Error("Unimplemented type: " + s);
            this.pos += 8;
          }
        },
        writeTag: function (l, s) {
          this.writeVarint((l << 3) | s);
        },
        realloc: function (l) {
          for (var s = this.length || 16; s < this.pos + l; ) s *= 2;
          if (s !== this.length) {
            var c = new Uint8Array(s);
            c.set(this.buf), (this.buf = c), (this.length = s);
          }
        },
        finish: function () {
          return (
            (this.length = this.pos),
            (this.pos = 0),
            this.buf.subarray(0, this.length)
          );
        },
        writeFixed32: function (l) {
          this.realloc(4), Vu(this.buf, l, this.pos), (this.pos += 4);
        },
        writeSFixed32: function (l) {
          this.realloc(4), Vu(this.buf, l, this.pos), (this.pos += 4);
        },
        writeFixed64: function (l) {
          this.realloc(8),
            Vu(this.buf, -1 & l, this.pos),
            Vu(this.buf, Math.floor(l * G_), this.pos + 4),
            (this.pos += 8);
        },
        writeSFixed64: function (l) {
          this.realloc(8),
            Vu(this.buf, -1 & l, this.pos),
            Vu(this.buf, Math.floor(l * G_), this.pos + 4),
            (this.pos += 8);
        },
        writeVarint: function (l) {
          (l = +l || 0) > 268435455 || l < 0
            ? (function (s, c) {
                var p, y;
                if (
                  (s >= 0
                    ? ((p = s % 4294967296 | 0), (y = (s / 4294967296) | 0))
                    : ((y = ~(-s / 4294967296)),
                      4294967295 ^ (p = ~(-s % 4294967296))
                        ? (p = (p + 1) | 0)
                        : ((p = 0), (y = (y + 1) | 0))),
                  s >= 18446744073709552e3 || s < -18446744073709552e3)
                )
                  throw new Error("Given varint doesn't fit into 10 bytes");
                c.realloc(10),
                  (function (w, k, C) {
                    (C.buf[C.pos++] = (127 & w) | 128),
                      (w >>>= 7),
                      (C.buf[C.pos++] = (127 & w) | 128),
                      (w >>>= 7),
                      (C.buf[C.pos++] = (127 & w) | 128),
                      (w >>>= 7),
                      (C.buf[C.pos++] = (127 & w) | 128),
                      (C.buf[C.pos] = 127 & (w >>>= 7));
                  })(p, 0, c),
                  (function (w, k) {
                    var C = (7 & w) << 4;
                    (k.buf[k.pos++] |= C | ((w >>>= 3) ? 128 : 0)),
                      w &&
                        ((k.buf[k.pos++] = (127 & w) | ((w >>>= 7) ? 128 : 0)),
                        w &&
                          ((k.buf[k.pos++] =
                            (127 & w) | ((w >>>= 7) ? 128 : 0)),
                          w &&
                            ((k.buf[k.pos++] =
                              (127 & w) | ((w >>>= 7) ? 128 : 0)),
                            w &&
                              ((k.buf[k.pos++] =
                                (127 & w) | ((w >>>= 7) ? 128 : 0)),
                              w && (k.buf[k.pos++] = 127 & w)))));
                  })(y, c);
              })(l, this)
            : (this.realloc(4),
              (this.buf[this.pos++] = (127 & l) | (l > 127 ? 128 : 0)),
              l <= 127 ||
                ((this.buf[this.pos++] =
                  (127 & (l >>>= 7)) | (l > 127 ? 128 : 0)),
                l <= 127 ||
                  ((this.buf[this.pos++] =
                    (127 & (l >>>= 7)) | (l > 127 ? 128 : 0)),
                  l <= 127 || (this.buf[this.pos++] = (l >>> 7) & 127))));
        },
        writeSVarint: function (l) {
          this.writeVarint(l < 0 ? 2 * -l - 1 : 2 * l);
        },
        writeBoolean: function (l) {
          this.writeVarint(!!l);
        },
        writeString: function (l) {
          (l = String(l)), this.realloc(4 * l.length), this.pos++;
          var s = this.pos;
          this.pos = (function (p, y, w) {
            for (var k, C, A = 0; A < y.length; A++) {
              if ((k = y.charCodeAt(A)) > 55295 && k < 57344) {
                if (!C) {
                  k > 56319 || A + 1 === y.length
                    ? ((p[w++] = 239), (p[w++] = 191), (p[w++] = 189))
                    : (C = k);
                  continue;
                }
                if (k < 56320) {
                  (p[w++] = 239), (p[w++] = 191), (p[w++] = 189), (C = k);
                  continue;
                }
                (k = ((C - 55296) << 10) | (k - 56320) | 65536), (C = null);
              } else
                C &&
                  ((p[w++] = 239), (p[w++] = 191), (p[w++] = 189), (C = null));
              k < 128
                ? (p[w++] = k)
                : (k < 2048
                    ? (p[w++] = (k >> 6) | 192)
                    : (k < 65536
                        ? (p[w++] = (k >> 12) | 224)
                        : ((p[w++] = (k >> 18) | 240),
                          (p[w++] = ((k >> 12) & 63) | 128)),
                      (p[w++] = ((k >> 6) & 63) | 128)),
                  (p[w++] = (63 & k) | 128));
            }
            return w;
          })(this.buf, l, this.pos);
          var c = this.pos - s;
          c >= 128 && Z_(s, c, this),
            (this.pos = s - 1),
            this.writeVarint(c),
            (this.pos += c);
        },
        writeFloat: function (l) {
          this.realloc(4),
            Q_(this.buf, l, this.pos, !0, 23, 4),
            (this.pos += 4);
        },
        writeDouble: function (l) {
          this.realloc(8),
            Q_(this.buf, l, this.pos, !0, 52, 8),
            (this.pos += 8);
        },
        writeBytes: function (l) {
          var s = l.length;
          this.writeVarint(s), this.realloc(s);
          for (var c = 0; c < s; c++) this.buf[this.pos++] = l[c];
        },
        writeRawMessage: function (l, s) {
          this.pos++;
          var c = this.pos;
          l(s, this);
          var p = this.pos - c;
          p >= 128 && Z_(c, p, this),
            (this.pos = c - 1),
            this.writeVarint(p),
            (this.pos += p);
        },
        writeMessage: function (l, s, c) {
          this.writeTag(l, mr.Bytes), this.writeRawMessage(s, c);
        },
        writePackedVarint: function (l, s) {
          s.length && this.writeMessage(l, Lk, s);
        },
        writePackedSVarint: function (l, s) {
          s.length && this.writeMessage(l, Fk, s);
        },
        writePackedBoolean: function (l, s) {
          s.length && this.writeMessage(l, Ok, s);
        },
        writePackedFloat: function (l, s) {
          s.length && this.writeMessage(l, zk, s);
        },
        writePackedDouble: function (l, s) {
          s.length && this.writeMessage(l, Nk, s);
        },
        writePackedFixed32: function (l, s) {
          s.length && this.writeMessage(l, Bk, s);
        },
        writePackedSFixed32: function (l, s) {
          s.length && this.writeMessage(l, Rk, s);
        },
        writePackedFixed64: function (l, s) {
          s.length && this.writeMessage(l, Uk, s);
        },
        writePackedSFixed64: function (l, s) {
          s.length && this.writeMessage(l, Vk, s);
        },
        writeBytesField: function (l, s) {
          this.writeTag(l, mr.Bytes), this.writeBytes(s);
        },
        writeFixed32Field: function (l, s) {
          this.writeTag(l, mr.Fixed32), this.writeFixed32(s);
        },
        writeSFixed32Field: function (l, s) {
          this.writeTag(l, mr.Fixed32), this.writeSFixed32(s);
        },
        writeFixed64Field: function (l, s) {
          this.writeTag(l, mr.Fixed64), this.writeFixed64(s);
        },
        writeSFixed64Field: function (l, s) {
          this.writeTag(l, mr.Fixed64), this.writeSFixed64(s);
        },
        writeVarintField: function (l, s) {
          this.writeTag(l, mr.Varint), this.writeVarint(s);
        },
        writeSVarintField: function (l, s) {
          this.writeTag(l, mr.Varint), this.writeSVarint(s);
        },
        writeStringField: function (l, s) {
          this.writeTag(l, mr.Bytes), this.writeString(s);
        },
        writeFloatField: function (l, s) {
          this.writeTag(l, mr.Fixed32), this.writeFloat(s);
        },
        writeDoubleField: function (l, s) {
          this.writeTag(l, mr.Fixed64), this.writeDouble(s);
        },
        writeBooleanField: function (l, s) {
          this.writeVarintField(l, !!s);
        },
      };
      var P1 = u(q_);
      let D1 = 3;
      function jk(l, s, c) {
        l === 1 && c.readMessage(Hk, s);
      }
      function Hk(l, s, c) {
        if (l === 3) {
          let {
            id: p,
            bitmap: y,
            width: w,
            height: k,
            left: C,
            top: A,
            advance: P,
          } = c.readMessage(qk, {});
          s.push({
            id: p,
            bitmap: new Sh({ width: w + 2 * D1, height: k + 2 * D1 }, y),
            metrics: { width: w, height: k, left: C, top: A, advance: P },
          });
        }
      }
      function qk(l, s, c) {
        l === 1
          ? (s.id = c.readVarint())
          : l === 2
          ? (s.bitmap = c.readBytes())
          : l === 3
          ? (s.width = c.readVarint())
          : l === 4
          ? (s.height = c.readVarint())
          : l === 5
          ? (s.left = c.readSVarint())
          : l === 6
          ? (s.top = c.readSVarint())
          : l === 7 && (s.advance = c.readVarint());
      }
      let J_ = D1;
      function X_(l) {
        let s = 0,
          c = 0;
        for (let k of l) (s += k.w * k.h), (c = Math.max(c, k.w));
        l.sort((k, C) => C.h - k.h);
        let p = [
            {
              x: 0,
              y: 0,
              w: Math.max(Math.ceil(Math.sqrt(s / 0.95)), c),
              h: 1 / 0,
            },
          ],
          y = 0,
          w = 0;
        for (let k of l)
          for (let C = p.length - 1; C >= 0; C--) {
            let A = p[C];
            if (!(k.w > A.w || k.h > A.h)) {
              if (
                ((k.x = A.x),
                (k.y = A.y),
                (w = Math.max(w, k.y + k.h)),
                (y = Math.max(y, k.x + k.w)),
                k.w === A.w && k.h === A.h)
              ) {
                let P = p.pop();
                C < p.length && (p[C] = P);
              } else
                k.h === A.h
                  ? ((A.x += k.w), (A.w -= k.w))
                  : k.w === A.w
                  ? ((A.y += k.h), (A.h -= k.h))
                  : (p.push({ x: A.x + k.w, y: A.y, w: A.w - k.w, h: k.h }),
                    (A.y += k.h),
                    (A.h -= k.h));
              break;
            }
          }
        return { w: y, h: w, fill: s / (y * w) || 0 };
      }
      let Go = 1;
      class L1 {
        constructor(
          s,
          { pixelRatio: c, version: p, stretchX: y, stretchY: w, content: k }
        ) {
          (this.paddedRect = s),
            (this.pixelRatio = c),
            (this.stretchX = y),
            (this.stretchY = w),
            (this.content = k),
            (this.version = p);
        }
        get tl() {
          return [this.paddedRect.x + Go, this.paddedRect.y + Go];
        }
        get br() {
          return [
            this.paddedRect.x + this.paddedRect.w - Go,
            this.paddedRect.y + this.paddedRect.h - Go,
          ];
        }
        get tlbr() {
          return this.tl.concat(this.br);
        }
        get displaySize() {
          return [
            (this.paddedRect.w - 2 * Go) / this.pixelRatio,
            (this.paddedRect.h - 2 * Go) / this.pixelRatio,
          ];
        }
      }
      class Y_ {
        constructor(s, c) {
          let p = {},
            y = {};
          this.haveRenderCallbacks = [];
          let w = [];
          this.addImages(s, p, w), this.addImages(c, y, w);
          let { w: k, h: C } = X_(w),
            A = new bs({ width: k || 1, height: C || 1 });
          for (let P in s) {
            let N = s[P],
              O = p[P].paddedRect;
            bs.copy(
              N.data,
              A,
              { x: 0, y: 0 },
              { x: O.x + Go, y: O.y + Go },
              N.data
            );
          }
          for (let P in c) {
            let N = c[P],
              O = y[P].paddedRect,
              j = O.x + Go,
              W = O.y + Go,
              K = N.data.width,
              ie = N.data.height;
            bs.copy(N.data, A, { x: 0, y: 0 }, { x: j, y: W }, N.data),
              bs.copy(
                N.data,
                A,
                { x: 0, y: ie - 1 },
                { x: j, y: W - 1 },
                { width: K, height: 1 }
              ),
              bs.copy(
                N.data,
                A,
                { x: 0, y: 0 },
                { x: j, y: W + ie },
                { width: K, height: 1 }
              ),
              bs.copy(
                N.data,
                A,
                { x: K - 1, y: 0 },
                { x: j - 1, y: W },
                { width: 1, height: ie }
              ),
              bs.copy(
                N.data,
                A,
                { x: 0, y: 0 },
                { x: j + K, y: W },
                { width: 1, height: ie }
              );
          }
          (this.image = A),
            (this.iconPositions = p),
            (this.patternPositions = y);
        }
        addImages(s, c, p) {
          for (let y in s) {
            let w = s[y],
              k = {
                x: 0,
                y: 0,
                w: w.data.width + 2 * Go,
                h: w.data.height + 2 * Go,
              };
            p.push(k),
              (c[y] = new L1(k, w)),
              w.hasRenderCallback && this.haveRenderCallbacks.push(y);
          }
        }
        patchUpdatedImages(s, c) {
          s.dispatchRenderCallbacks(this.haveRenderCallbacks);
          for (let p in s.updatedImages)
            this.patchUpdatedImage(this.iconPositions[p], s.getImage(p), c),
              this.patchUpdatedImage(
                this.patternPositions[p],
                s.getImage(p),
                c
              );
        }
        patchUpdatedImage(s, c, p) {
          if (!s || !c || s.version === c.version) return;
          s.version = c.version;
          let [y, w] = s.tl;
          p.update(c.data, void 0, { x: y, y: w });
        }
      }
      var jl;
      Nt("ImagePosition", L1),
        Nt("ImageAtlas", Y_),
        (o.ah = void 0),
        ((jl = o.ah || (o.ah = {}))[(jl.none = 0)] = "none"),
        (jl[(jl.horizontal = 1)] = "horizontal"),
        (jl[(jl.vertical = 2)] = "vertical"),
        (jl[(jl.horizontalOnly = 3)] = "horizontalOnly");
      let Dh = -17;
      class Lh {
        constructor() {
          (this.scale = 1), (this.fontStack = ""), (this.imageName = null);
        }
        static forText(s, c) {
          let p = new Lh();
          return (p.scale = s || 1), (p.fontStack = c), p;
        }
        static forImage(s) {
          let c = new Lh();
          return (c.imageName = s), c;
        }
      }
      class ju {
        constructor() {
          (this.text = ""),
            (this.sectionIndex = []),
            (this.sections = []),
            (this.imageSectionID = null);
        }
        static fromFeature(s, c) {
          let p = new ju();
          for (let y = 0; y < s.sections.length; y++) {
            let w = s.sections[y];
            w.image ? p.addImageSection(w) : p.addTextSection(w, c);
          }
          return p;
        }
        length() {
          return this.text.length;
        }
        getSection(s) {
          return this.sections[this.sectionIndex[s]];
        }
        getSectionIndex(s) {
          return this.sectionIndex[s];
        }
        getCharCode(s) {
          return this.text.charCodeAt(s);
        }
        verticalizePunctuation() {
          this.text = (function (s) {
            let c = "";
            for (let p = 0; p < s.length; p++) {
              let y = s.charCodeAt(p + 1) || null,
                w = s.charCodeAt(p - 1) || null;
              c +=
                (y && rh(y) && !Ph[s[p + 1]]) ||
                (w && rh(w) && !Ph[s[p - 1]]) ||
                !Ph[s[p]]
                  ? s[p]
                  : Ph[s[p]];
            }
            return c;
          })(this.text);
        }
        trim() {
          let s = 0;
          for (
            let p = 0;
            p < this.text.length && Yf[this.text.charCodeAt(p)];
            p++
          )
            s++;
          let c = this.text.length;
          for (
            let p = this.text.length - 1;
            p >= 0 && p >= s && Yf[this.text.charCodeAt(p)];
            p--
          )
            c--;
          (this.text = this.text.substring(s, c)),
            (this.sectionIndex = this.sectionIndex.slice(s, c));
        }
        substring(s, c) {
          let p = new ju();
          return (
            (p.text = this.text.substring(s, c)),
            (p.sectionIndex = this.sectionIndex.slice(s, c)),
            (p.sections = this.sections),
            p
          );
        }
        toString() {
          return this.text;
        }
        getMaxScale() {
          return this.sectionIndex.reduce(
            (s, c) => Math.max(s, this.sections[c].scale),
            0
          );
        }
        addTextSection(s, c) {
          (this.text += s.text),
            this.sections.push(Lh.forText(s.scale, s.fontStack || c));
          let p = this.sections.length - 1;
          for (let y = 0; y < s.text.length; ++y) this.sectionIndex.push(p);
        }
        addImageSection(s) {
          let c = s.image ? s.image.name : "";
          if (c.length === 0)
            return void qe("Can't add FormattedSection with an empty image.");
          let p = this.getNextImageSectionCharCode();
          p
            ? ((this.text += String.fromCharCode(p)),
              this.sections.push(Lh.forImage(c)),
              this.sectionIndex.push(this.sections.length - 1))
            : qe("Reached maximum number of images 6401");
        }
        getNextImageSectionCharCode() {
          return this.imageSectionID
            ? this.imageSectionID >= 63743
              ? null
              : ++this.imageSectionID
            : ((this.imageSectionID = 57344), this.imageSectionID);
        }
      }
      function Xf(l, s, c, p, y, w, k, C, A, P, N, O, j, W, K, ie) {
        let ae = ju.fromFeature(l, y),
          pe;
        O === o.ah.vertical && ae.verticalizePunctuation();
        let {
          processBidirectionalText: Pe,
          processStyledBidirectionalText: ye,
        } = Na;
        if (Pe && ae.sections.length === 1) {
          pe = [];
          let tt = Pe(ae.toString(), F1(ae, P, w, s, p, W, K));
          for (let Dt of tt) {
            let Qt = new ju();
            (Qt.text = Dt), (Qt.sections = ae.sections);
            for (let It = 0; It < Dt.length; It++) Qt.sectionIndex.push(0);
            pe.push(Qt);
          }
        } else if (ye) {
          pe = [];
          let tt = ye(ae.text, ae.sectionIndex, F1(ae, P, w, s, p, W, K));
          for (let Dt of tt) {
            let Qt = new ju();
            (Qt.text = Dt[0]),
              (Qt.sectionIndex = Dt[1]),
              (Qt.sections = ae.sections),
              pe.push(Qt);
          }
        } else
          pe = (function (tt, Dt) {
            let Qt = [],
              It = tt.text,
              Et = 0;
            for (let xt of Dt) Qt.push(tt.substring(Et, xt)), (Et = xt);
            return Et < It.length && Qt.push(tt.substring(Et, It.length)), Qt;
          })(ae, F1(ae, P, w, s, p, W, K));
        let Se = [],
          We = {
            positionedLines: Se,
            text: ae.toString(),
            top: N[1],
            bottom: N[1],
            left: N[0],
            right: N[0],
            writingMode: O,
            iconsInText: !1,
            verticalizable: !1,
          };
        return (
          (function (tt, Dt, Qt, It, Et, xt, Ut, St, mt, ni, Wt, Oi) {
            let Ir = 0,
              Nr = Dh,
              _n = 0,
              ds = 0,
              Po = St === "right" ? 1 : St === "left" ? 0 : 0.5,
              pn = 0;
            for (let xn of Et) {
              xn.trim();
              let wn = xn.getMaxScale(),
                po = (wn - 1) * vn,
                Fo = { positionedGlyphs: [], lineOffset: 0 };
              tt.positionedLines[pn] = Fo;
              let fo = Fo.positionedGlyphs,
                Wo = 0;
              if (!xn.length()) {
                (Nr += xt), ++pn;
                continue;
              }
              for (let kn = 0; kn < xn.length(); kn++) {
                let Hi = xn.getSection(kn),
                  mo = xn.getSectionIndex(kn),
                  io = xn.getCharCode(kn),
                  Sn = 0,
                  Ds = null,
                  Js = null,
                  Xs = null,
                  $a = vn,
                  Ls = !(
                    mt === o.ah.horizontal ||
                    (!Wt && !Tu(io)) ||
                    (Wt &&
                      (Yf[io] ||
                        ((Qn = io),
                        Lt.Arabic(Qn) ||
                          Lt["Arabic Supplement"](Qn) ||
                          Lt["Arabic Extended-A"](Qn) ||
                          Lt["Arabic Presentation Forms-A"](Qn) ||
                          Lt["Arabic Presentation Forms-B"](Qn))))
                  );
                if (Hi.imageName) {
                  let _s = It[Hi.imageName];
                  if (!_s) continue;
                  (Xs = Hi.imageName),
                    (tt.iconsInText = tt.iconsInText || !0),
                    (Js = _s.paddedRect);
                  let Ko = _s.displaySize;
                  (Hi.scale = (Hi.scale * vn) / Oi),
                    (Ds = {
                      width: Ko[0],
                      height: Ko[1],
                      left: Go,
                      top: -J_,
                      advance: Ls ? Ko[1] : Ko[0],
                    }),
                    (Sn = po + (vn - Ko[1] * Hi.scale)),
                    ($a = Ds.advance);
                  let Qa = Ls
                    ? Ko[0] * Hi.scale - vn * wn
                    : Ko[1] * Hi.scale - vn * wn;
                  Qa > 0 && Qa > Wo && (Wo = Qa);
                } else {
                  let _s = Qt[Hi.fontStack],
                    Ko = _s && _s[io];
                  if (Ko && Ko.rect) (Js = Ko.rect), (Ds = Ko.metrics);
                  else {
                    let Qa = Dt[Hi.fontStack],
                      Bh = Qa && Qa[io];
                    if (!Bh) continue;
                    Ds = Bh.metrics;
                  }
                  Sn = (wn - Hi.scale) * vn;
                }
                Ls
                  ? ((tt.verticalizable = !0),
                    fo.push({
                      glyph: io,
                      imageName: Xs,
                      x: Ir,
                      y: Nr + Sn,
                      vertical: Ls,
                      scale: Hi.scale,
                      fontStack: Hi.fontStack,
                      sectionIndex: mo,
                      metrics: Ds,
                      rect: Js,
                    }),
                    (Ir += $a * Hi.scale + ni))
                  : (fo.push({
                      glyph: io,
                      imageName: Xs,
                      x: Ir,
                      y: Nr + Sn,
                      vertical: Ls,
                      scale: Hi.scale,
                      fontStack: Hi.fontStack,
                      sectionIndex: mo,
                      metrics: Ds,
                      rect: Js,
                    }),
                    (Ir += Ds.advance * Hi.scale + ni));
              }
              fo.length !== 0 &&
                ((_n = Math.max(Ir - ni, _n)),
                Gk(fo, 0, fo.length - 1, Po, Wo)),
                (Ir = 0);
              let Zo = xt * wn + Wo;
              (Fo.lineOffset = Math.max(Wo, po)),
                (Nr += Zo),
                (ds = Math.max(Zo, ds)),
                ++pn;
            }
            var Qn;
            let to = Nr - Dh,
              { horizontalAlign: Do, verticalAlign: Lo } = z1(Ut);
            (function (xn, wn, po, Fo, fo, Wo, Zo, kn, Hi) {
              let mo = (wn - po) * fo,
                io = 0;
              io = Wo !== Zo ? -kn * Fo - Dh : (-Fo * Hi + 0.5) * Zo;
              for (let Sn of xn)
                for (let Ds of Sn.positionedGlyphs) (Ds.x += mo), (Ds.y += io);
            })(tt.positionedLines, Po, Do, Lo, _n, ds, xt, to, Et.length),
              (tt.top += -Lo * to),
              (tt.bottom = tt.top + to),
              (tt.left += -Do * _n),
              (tt.right = tt.left + _n);
          })(We, s, c, p, pe, k, C, A, O, P, j, ie),
          !(function (tt) {
            for (let Dt of tt) if (Dt.positionedGlyphs.length !== 0) return !1;
            return !0;
          })(Se) && We
        );
      }
      let Yf = { 9: !0, 10: !0, 11: !0, 12: !0, 13: !0, 32: !0 },
        $k = {
          10: !0,
          32: !0,
          38: !0,
          40: !0,
          41: !0,
          43: !0,
          45: !0,
          47: !0,
          173: !0,
          183: !0,
          8203: !0,
          8208: !0,
          8211: !0,
          8231: !0,
        };
      function e3(l, s, c, p, y, w) {
        if (s.imageName) {
          let k = p[s.imageName];
          return k ? (k.displaySize[0] * s.scale * vn) / w + y : 0;
        }
        {
          let k = c[s.fontStack],
            C = k && k[l];
          return C ? C.metrics.advance * s.scale + y : 0;
        }
      }
      function t3(l, s, c, p) {
        let y = Math.pow(l - s, 2);
        return p ? (l < s ? y / 2 : 2 * y) : y + Math.abs(c) * c;
      }
      function Qk(l, s, c) {
        let p = 0;
        return (
          l === 10 && (p -= 1e4),
          c && (p += 150),
          (l !== 40 && l !== 65288) || (p += 50),
          (s !== 41 && s !== 65289) || (p += 50),
          p
        );
      }
      function i3(l, s, c, p, y, w) {
        let k = null,
          C = t3(s, c, y, w);
        for (let A of p) {
          let P = t3(s - A.x, c, y, w) + A.badness;
          P <= C && ((k = A), (C = P));
        }
        return { index: l, x: s, priorBreak: k, badness: C };
      }
      function r3(l) {
        return l ? r3(l.priorBreak).concat(l.index) : [];
      }
      function F1(l, s, c, p, y, w, k) {
        if (w !== "point") return [];
        if (!l) return [];
        let C = [],
          A = (function (j, W, K, ie, ae, pe) {
            let Pe = 0;
            for (let ye = 0; ye < j.length(); ye++) {
              let Se = j.getSection(ye);
              Pe += e3(j.getCharCode(ye), Se, ie, ae, W, pe);
            }
            return Pe / Math.max(1, Math.ceil(Pe / K));
          })(l, s, c, p, y, k),
          P = l.text.indexOf("\u200B") >= 0,
          N = 0;
        for (let j = 0; j < l.length(); j++) {
          let W = l.getSection(j),
            K = l.getCharCode(j);
          if ((Yf[K] || (N += e3(K, W, p, y, s, k)), j < l.length() - 1)) {
            let ie = !(
              (O = K) < 11904 ||
              !(
                Lt["Bopomofo Extended"](O) ||
                Lt.Bopomofo(O) ||
                Lt["CJK Compatibility Forms"](O) ||
                Lt["CJK Compatibility Ideographs"](O) ||
                Lt["CJK Compatibility"](O) ||
                Lt["CJK Radicals Supplement"](O) ||
                Lt["CJK Strokes"](O) ||
                Lt["CJK Symbols and Punctuation"](O) ||
                Lt["CJK Unified Ideographs Extension A"](O) ||
                Lt["CJK Unified Ideographs"](O) ||
                Lt["Enclosed CJK Letters and Months"](O) ||
                Lt["Halfwidth and Fullwidth Forms"](O) ||
                Lt.Hiragana(O) ||
                Lt["Ideographic Description Characters"](O) ||
                Lt["Kangxi Radicals"](O) ||
                Lt["Katakana Phonetic Extensions"](O) ||
                Lt.Katakana(O) ||
                Lt["Vertical Forms"](O) ||
                Lt["Yi Radicals"](O) ||
                Lt["Yi Syllables"](O)
              )
            );
            ($k[K] || ie || W.imageName) &&
              C.push(
                i3(j + 1, N, A, C, Qk(K, l.getCharCode(j + 1), ie && P), !1)
              );
          }
        }
        var O;
        return r3(i3(l.length(), N, A, C, 0, !0));
      }
      function z1(l) {
        let s = 0.5,
          c = 0.5;
        switch (l) {
          case "right":
          case "top-right":
          case "bottom-right":
            s = 1;
            break;
          case "left":
          case "top-left":
          case "bottom-left":
            s = 0;
        }
        switch (l) {
          case "bottom":
          case "bottom-right":
          case "bottom-left":
            c = 1;
            break;
          case "top":
          case "top-right":
          case "top-left":
            c = 0;
        }
        return { horizontalAlign: s, verticalAlign: c };
      }
      function Gk(l, s, c, p, y) {
        if (!p && !y) return;
        let w = l[c],
          k = (l[c].x + w.metrics.advance * w.scale) * p;
        for (let C = s; C <= c; C++) (l[C].x -= k), (l[C].y += y);
      }
      function Wk(l, s, c) {
        let { horizontalAlign: p, verticalAlign: y } = z1(c),
          w = s[0] - l.displaySize[0] * p,
          k = s[1] - l.displaySize[1] * y;
        return {
          image: l,
          top: k,
          bottom: k + l.displaySize[1],
          left: w,
          right: w + l.displaySize[0],
        };
      }
      function n3(l, s, c, p, y, w) {
        let k = l.image,
          C;
        if (k.content) {
          let ae = k.content,
            pe = k.pixelRatio || 1;
          C = [
            ae[0] / pe,
            ae[1] / pe,
            k.displaySize[0] - ae[2] / pe,
            k.displaySize[1] - ae[3] / pe,
          ];
        }
        let A = s.left * w,
          P = s.right * w,
          N,
          O,
          j,
          W;
        c === "width" || c === "both"
          ? ((W = y[0] + A - p[3]), (O = y[0] + P + p[1]))
          : ((W = y[0] + (A + P - k.displaySize[0]) / 2),
            (O = W + k.displaySize[0]));
        let K = s.top * w,
          ie = s.bottom * w;
        return (
          c === "height" || c === "both"
            ? ((N = y[1] + K - p[0]), (j = y[1] + ie + p[2]))
            : ((N = y[1] + (K + ie - k.displaySize[1]) / 2),
              (j = N + k.displaySize[1])),
          {
            image: k,
            top: N,
            right: O,
            bottom: j,
            left: W,
            collisionPadding: C,
          }
        );
      }
      let Fh = 255,
        ya = 128,
        Hl = Fh * ya;
      function o3(l, s) {
        let { expression: c } = s;
        if (c.kind === "constant")
          return { kind: "constant", layoutSize: c.evaluate(new Mr(l + 1)) };
        if (c.kind === "source") return { kind: "source" };
        {
          let { zoomStops: p, interpolationType: y } = c,
            w = 0;
          for (; w < p.length && p[w] <= l; ) w++;
          w = Math.max(0, w - 1);
          let k = w;
          for (; k < p.length && p[k] < l + 1; ) k++;
          k = Math.min(p.length - 1, k);
          let C = p[w],
            A = p[k];
          return c.kind === "composite"
            ? {
                kind: "composite",
                minZoom: C,
                maxZoom: A,
                interpolationType: y,
              }
            : {
                kind: "camera",
                minZoom: C,
                maxZoom: A,
                minSize: c.evaluate(new Mr(C)),
                maxSize: c.evaluate(new Mr(A)),
                interpolationType: y,
              };
        }
      }
      function N1(l, s, c) {
        let p = "never",
          y = l.get(s);
        return y ? (p = y) : l.get(c) && (p = "always"), p;
      }
      let Zk = Vl.VectorTileFeature.types,
        Kk = [
          { name: "a_fade_opacity", components: 1, type: "Uint8", offset: 0 },
        ];
      function e0(l, s, c, p, y, w, k, C, A, P, N, O, j) {
        let W = C ? Math.min(Hl, Math.round(C[0])) : 0,
          K = C ? Math.min(Hl, Math.round(C[1])) : 0;
        l.emplaceBack(
          s,
          c,
          Math.round(32 * p),
          Math.round(32 * y),
          w,
          k,
          (W << 1) + (A ? 1 : 0),
          K,
          16 * P,
          16 * N,
          256 * O,
          256 * j
        );
      }
      function O1(l, s, c) {
        l.emplaceBack(s.x, s.y, c),
          l.emplaceBack(s.x, s.y, c),
          l.emplaceBack(s.x, s.y, c),
          l.emplaceBack(s.x, s.y, c);
      }
      function Jk(l) {
        for (let s of l.sections) if (Lf(s.text)) return !0;
        return !1;
      }
      class B1 {
        constructor(s) {
          (this.layoutVertexArray = new _e()),
            (this.indexArray = new Ve()),
            (this.programConfigurations = s),
            (this.segments = new nt()),
            (this.dynamicLayoutVertexArray = new Be()),
            (this.opacityVertexArray = new he()),
            (this.hasVisibleVertices = !1),
            (this.placedSymbolArray = new a());
        }
        isEmpty() {
          return (
            this.layoutVertexArray.length === 0 &&
            this.indexArray.length === 0 &&
            this.dynamicLayoutVertexArray.length === 0 &&
            this.opacityVertexArray.length === 0
          );
        }
        upload(s, c, p, y) {
          this.isEmpty() ||
            (p &&
              ((this.layoutVertexBuffer = s.createVertexBuffer(
                this.layoutVertexArray,
                Mk.members
              )),
              (this.indexBuffer = s.createIndexBuffer(this.indexArray, c)),
              (this.dynamicLayoutVertexBuffer = s.createVertexBuffer(
                this.dynamicLayoutVertexArray,
                Ak.members,
                !0
              )),
              (this.opacityVertexBuffer = s.createVertexBuffer(
                this.opacityVertexArray,
                Kk,
                !0
              )),
              (this.opacityVertexBuffer.itemSize = 1)),
            (p || y) && this.programConfigurations.upload(s));
        }
        destroy() {
          this.layoutVertexBuffer &&
            (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.programConfigurations.destroy(),
            this.segments.destroy(),
            this.dynamicLayoutVertexBuffer.destroy(),
            this.opacityVertexBuffer.destroy());
        }
      }
      Nt("SymbolBuffers", B1);
      class R1 {
        constructor(s, c, p) {
          (this.layoutVertexArray = new s()),
            (this.layoutAttributes = c),
            (this.indexArray = new p()),
            (this.segments = new nt()),
            (this.collisionVertexArray = new Ue());
        }
        upload(s) {
          (this.layoutVertexBuffer = s.createVertexBuffer(
            this.layoutVertexArray,
            this.layoutAttributes
          )),
            (this.indexBuffer = s.createIndexBuffer(this.indexArray)),
            (this.collisionVertexBuffer = s.createVertexBuffer(
              this.collisionVertexArray,
              Ik.members,
              !0
            ));
        }
        destroy() {
          this.layoutVertexBuffer &&
            (this.layoutVertexBuffer.destroy(),
            this.indexBuffer.destroy(),
            this.segments.destroy(),
            this.collisionVertexBuffer.destroy());
        }
      }
      Nt("CollisionBuffers", R1);
      class Hu {
        constructor(s) {
          (this.collisionBoxArray = s.collisionBoxArray),
            (this.zoom = s.zoom),
            (this.overscaling = s.overscaling),
            (this.layers = s.layers),
            (this.layerIds = this.layers.map((k) => k.id)),
            (this.index = s.index),
            (this.pixelRatio = s.pixelRatio),
            (this.sourceLayerIndex = s.sourceLayerIndex),
            (this.hasPattern = !1),
            (this.hasRTLText = !1),
            (this.sortKeyRanges = []),
            (this.collisionCircleArray = []),
            (this.placementInvProjMatrix = g1([])),
            (this.placementViewportMatrix = g1([]));
          let c = this.layers[0]._unevaluatedLayout._values;
          (this.textSizeData = o3(this.zoom, c["text-size"])),
            (this.iconSizeData = o3(this.zoom, c["icon-size"]));
          let p = this.layers[0].layout,
            y = p.get("symbol-sort-key"),
            w = p.get("symbol-z-order");
          (this.canOverlap =
            N1(p, "text-overlap", "text-allow-overlap") !== "never" ||
            N1(p, "icon-overlap", "icon-allow-overlap") !== "never" ||
            p.get("text-ignore-placement") ||
            p.get("icon-ignore-placement")),
            (this.sortFeaturesByKey = w !== "viewport-y" && !y.isConstant()),
            (this.sortFeaturesByY =
              (w === "viewport-y" ||
                (w === "auto" && !this.sortFeaturesByKey)) &&
              this.canOverlap),
            p.get("symbol-placement") === "point" &&
              (this.writingModes = p
                .get("text-writing-mode")
                .map((k) => o.ah[k])),
            (this.stateDependentLayerIds = this.layers
              .filter((k) => k.isStateDependent())
              .map((k) => k.id)),
            (this.sourceID = s.sourceID);
        }
        createArrays() {
          (this.text = new B1(
            new zr(this.layers, this.zoom, (s) => /^text/.test(s))
          )),
            (this.icon = new B1(
              new zr(this.layers, this.zoom, (s) => /^icon/.test(s))
            )),
            (this.glyphOffsetArray = new g()),
            (this.lineVertexArray = new x()),
            (this.symbolInstances = new f()),
            (this.textAnchorOffsets = new M());
        }
        calculateGlyphDependencies(s, c, p, y, w) {
          for (let k = 0; k < s.length; k++)
            if (((c[s.charCodeAt(k)] = !0), (p || y) && w)) {
              let C = Ph[s.charAt(k)];
              C && (c[C.charCodeAt(0)] = !0);
            }
        }
        populate(s, c, p) {
          let y = this.layers[0],
            w = y.layout,
            k = w.get("text-font"),
            C = w.get("text-field"),
            A = w.get("icon-image"),
            P =
              (C.value.kind !== "constant" ||
                (C.value.value instanceof jn && !C.value.value.isEmpty()) ||
                C.value.value.toString().length > 0) &&
              (k.value.kind !== "constant" || k.value.value.length > 0),
            N =
              A.value.kind !== "constant" ||
              !!A.value.value ||
              Object.keys(A.parameters).length > 0,
            O = w.get("symbol-sort-key");
          if (((this.features = []), !P && !N)) return;
          let j = c.iconDependencies,
            W = c.glyphDependencies,
            K = c.availableImages,
            ie = new Mr(this.zoom);
          for (let {
            feature: ae,
            id: pe,
            index: Pe,
            sourceLayerIndex: ye,
          } of s) {
            let Se = y._featureFilter.needGeometry,
              We = ja(ae, Se);
            if (!y._featureFilter.filter(ie, We, p)) continue;
            let tt, Dt;
            if ((Se || (We.geometry = Va(ae)), P)) {
              let It = y.getValueAndResolveTokens("text-field", We, p, K),
                Et = jn.factory(It),
                xt = (this.hasRTLText = this.hasRTLText || Jk(Et));
              (!xt ||
                Na.getRTLTextPluginStatus() === "unavailable" ||
                (xt && Na.isParsed())) &&
                (tt = Dk(Et, y, We));
            }
            if (N) {
              let It = y.getValueAndResolveTokens("icon-image", We, p, K);
              Dt = It instanceof Jn ? It : Jn.fromString(It);
            }
            if (!tt && !Dt) continue;
            let Qt = this.sortFeaturesByKey ? O.evaluate(We, {}, p) : void 0;
            if (
              (this.features.push({
                id: pe,
                text: tt,
                icon: Dt,
                index: Pe,
                sourceLayerIndex: ye,
                geometry: We.geometry,
                properties: ae.properties,
                type: Zk[ae.type],
                sortKey: Qt,
              }),
              Dt && (j[Dt.name] = !0),
              tt)
            ) {
              let It = k.evaluate(We, {}, p).join(","),
                Et =
                  w.get("text-rotation-alignment") !== "viewport" &&
                  w.get("symbol-placement") !== "point";
              this.allowVerticalPlacement =
                this.writingModes &&
                this.writingModes.indexOf(o.ah.vertical) >= 0;
              for (let xt of tt.sections)
                if (xt.image) j[xt.image.name] = !0;
                else {
                  let Ut = yc(tt.toString()),
                    St = xt.fontStack || It,
                    mt = (W[St] = W[St] || {});
                  this.calculateGlyphDependencies(
                    xt.text,
                    mt,
                    Et,
                    this.allowVerticalPlacement,
                    Ut
                  );
                }
            }
          }
          w.get("symbol-placement") === "line" &&
            (this.features = (function (ae) {
              let pe = {},
                Pe = {},
                ye = [],
                Se = 0;
              function We(It) {
                ye.push(ae[It]), Se++;
              }
              function tt(It, Et, xt) {
                let Ut = Pe[It];
                return (
                  delete Pe[It],
                  (Pe[Et] = Ut),
                  ye[Ut].geometry[0].pop(),
                  (ye[Ut].geometry[0] = ye[Ut].geometry[0].concat(xt[0])),
                  Ut
                );
              }
              function Dt(It, Et, xt) {
                let Ut = pe[Et];
                return (
                  delete pe[Et],
                  (pe[It] = Ut),
                  ye[Ut].geometry[0].shift(),
                  (ye[Ut].geometry[0] = xt[0].concat(ye[Ut].geometry[0])),
                  Ut
                );
              }
              function Qt(It, Et, xt) {
                let Ut = xt ? Et[0][Et[0].length - 1] : Et[0][0];
                return `${It}:${Ut.x}:${Ut.y}`;
              }
              for (let It = 0; It < ae.length; It++) {
                let Et = ae[It],
                  xt = Et.geometry,
                  Ut = Et.text ? Et.text.toString() : null;
                if (!Ut) {
                  We(It);
                  continue;
                }
                let St = Qt(Ut, xt),
                  mt = Qt(Ut, xt, !0);
                if (St in Pe && mt in pe && Pe[St] !== pe[mt]) {
                  let ni = Dt(St, mt, xt),
                    Wt = tt(St, mt, ye[ni].geometry);
                  delete pe[St],
                    delete Pe[mt],
                    (Pe[Qt(Ut, ye[Wt].geometry, !0)] = Wt),
                    (ye[ni].geometry = null);
                } else
                  St in Pe
                    ? tt(St, mt, xt)
                    : mt in pe
                    ? Dt(St, mt, xt)
                    : (We(It), (pe[St] = Se - 1), (Pe[mt] = Se - 1));
              }
              return ye.filter((It) => It.geometry);
            })(this.features)),
            this.sortFeaturesByKey &&
              this.features.sort((ae, pe) => ae.sortKey - pe.sortKey);
        }
        update(s, c, p) {
          this.stateDependentLayers.length &&
            (this.text.programConfigurations.updatePaintArrays(
              s,
              c,
              this.layers,
              p
            ),
            this.icon.programConfigurations.updatePaintArrays(
              s,
              c,
              this.layers,
              p
            ));
        }
        isEmpty() {
          return this.symbolInstances.length === 0 && !this.hasRTLText;
        }
        uploadPending() {
          return (
            !this.uploaded ||
            this.text.programConfigurations.needsUpload ||
            this.icon.programConfigurations.needsUpload
          );
        }
        upload(s) {
          !this.uploaded &&
            this.hasDebugData() &&
            (this.textCollisionBox.upload(s), this.iconCollisionBox.upload(s)),
            this.text.upload(
              s,
              this.sortFeaturesByY,
              !this.uploaded,
              this.text.programConfigurations.needsUpload
            ),
            this.icon.upload(
              s,
              this.sortFeaturesByY,
              !this.uploaded,
              this.icon.programConfigurations.needsUpload
            ),
            (this.uploaded = !0);
        }
        destroyDebugData() {
          this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();
        }
        destroy() {
          this.text.destroy(),
            this.icon.destroy(),
            this.hasDebugData() && this.destroyDebugData();
        }
        addToLineVertexArray(s, c) {
          let p = this.lineVertexArray.length;
          if (s.segment !== void 0) {
            let y = s.dist(c[s.segment + 1]),
              w = s.dist(c[s.segment]),
              k = {};
            for (let C = s.segment + 1; C < c.length; C++)
              (k[C] = { x: c[C].x, y: c[C].y, tileUnitDistanceFromAnchor: y }),
                C < c.length - 1 && (y += c[C + 1].dist(c[C]));
            for (let C = s.segment || 0; C >= 0; C--)
              (k[C] = { x: c[C].x, y: c[C].y, tileUnitDistanceFromAnchor: w }),
                C > 0 && (w += c[C - 1].dist(c[C]));
            for (let C = 0; C < c.length; C++) {
              let A = k[C];
              this.lineVertexArray.emplaceBack(
                A.x,
                A.y,
                A.tileUnitDistanceFromAnchor
              );
            }
          }
          return {
            lineStartIndex: p,
            lineLength: this.lineVertexArray.length - p,
          };
        }
        addSymbols(s, c, p, y, w, k, C, A, P, N, O, j) {
          let W = s.indexArray,
            K = s.layoutVertexArray,
            ie = s.segments.prepareSegment(
              4 * c.length,
              K,
              W,
              this.canOverlap ? k.sortKey : void 0
            ),
            ae = this.glyphOffsetArray.length,
            pe = ie.vertexLength,
            Pe =
              this.allowVerticalPlacement && C === o.ah.vertical
                ? Math.PI / 2
                : 0,
            ye = k.text && k.text.sections;
          for (let Se = 0; Se < c.length; Se++) {
            let {
                tl: We,
                tr: tt,
                bl: Dt,
                br: Qt,
                tex: It,
                pixelOffsetTL: Et,
                pixelOffsetBR: xt,
                minFontScaleX: Ut,
                minFontScaleY: St,
                glyphOffset: mt,
                isSDF: ni,
                sectionIndex: Wt,
              } = c[Se],
              Oi = ie.vertexLength,
              Ir = mt[1];
            e0(
              K,
              A.x,
              A.y,
              We.x,
              Ir + We.y,
              It.x,
              It.y,
              p,
              ni,
              Et.x,
              Et.y,
              Ut,
              St
            ),
              e0(
                K,
                A.x,
                A.y,
                tt.x,
                Ir + tt.y,
                It.x + It.w,
                It.y,
                p,
                ni,
                xt.x,
                Et.y,
                Ut,
                St
              ),
              e0(
                K,
                A.x,
                A.y,
                Dt.x,
                Ir + Dt.y,
                It.x,
                It.y + It.h,
                p,
                ni,
                Et.x,
                xt.y,
                Ut,
                St
              ),
              e0(
                K,
                A.x,
                A.y,
                Qt.x,
                Ir + Qt.y,
                It.x + It.w,
                It.y + It.h,
                p,
                ni,
                xt.x,
                xt.y,
                Ut,
                St
              ),
              O1(s.dynamicLayoutVertexArray, A, Pe),
              W.emplaceBack(Oi, Oi + 1, Oi + 2),
              W.emplaceBack(Oi + 1, Oi + 2, Oi + 3),
              (ie.vertexLength += 4),
              (ie.primitiveLength += 2),
              this.glyphOffsetArray.emplaceBack(mt[0]),
              (Se !== c.length - 1 && Wt === c[Se + 1].sectionIndex) ||
                s.programConfigurations.populatePaintArrays(
                  K.length,
                  k,
                  k.index,
                  {},
                  j,
                  ye && ye[Wt]
                );
          }
          s.placedSymbolArray.emplaceBack(
            A.x,
            A.y,
            ae,
            this.glyphOffsetArray.length - ae,
            pe,
            P,
            N,
            A.segment,
            p ? p[0] : 0,
            p ? p[1] : 0,
            y[0],
            y[1],
            C,
            0,
            !1,
            0,
            O
          );
        }
        _addCollisionDebugVertex(s, c, p, y, w, k) {
          return (
            c.emplaceBack(0, 0),
            s.emplaceBack(p.x, p.y, y, w, Math.round(k.x), Math.round(k.y))
          );
        }
        addCollisionDebugVertices(s, c, p, y, w, k, C) {
          let A = w.segments.prepareSegment(
              4,
              w.layoutVertexArray,
              w.indexArray
            ),
            P = A.vertexLength,
            N = w.layoutVertexArray,
            O = w.collisionVertexArray,
            j = C.anchorX,
            W = C.anchorY;
          this._addCollisionDebugVertex(N, O, k, j, W, new b(s, c)),
            this._addCollisionDebugVertex(N, O, k, j, W, new b(p, c)),
            this._addCollisionDebugVertex(N, O, k, j, W, new b(p, y)),
            this._addCollisionDebugVertex(N, O, k, j, W, new b(s, y)),
            (A.vertexLength += 4);
          let K = w.indexArray;
          K.emplaceBack(P, P + 1),
            K.emplaceBack(P + 1, P + 2),
            K.emplaceBack(P + 2, P + 3),
            K.emplaceBack(P + 3, P),
            (A.primitiveLength += 4);
        }
        addDebugCollisionBoxes(s, c, p, y) {
          for (let w = s; w < c; w++) {
            let k = this.collisionBoxArray.get(w);
            this.addCollisionDebugVertices(
              k.x1,
              k.y1,
              k.x2,
              k.y2,
              y ? this.textCollisionBox : this.iconCollisionBox,
              k.anchorPoint,
              p
            );
          }
        }
        generateCollisionDebugBuffers() {
          this.hasDebugData() && this.destroyDebugData(),
            (this.textCollisionBox = new R1(Ee, H_.members, Ge)),
            (this.iconCollisionBox = new R1(Ee, H_.members, Ge));
          for (let s = 0; s < this.symbolInstances.length; s++) {
            let c = this.symbolInstances.get(s);
            this.addDebugCollisionBoxes(
              c.textBoxStartIndex,
              c.textBoxEndIndex,
              c,
              !0
            ),
              this.addDebugCollisionBoxes(
                c.verticalTextBoxStartIndex,
                c.verticalTextBoxEndIndex,
                c,
                !0
              ),
              this.addDebugCollisionBoxes(
                c.iconBoxStartIndex,
                c.iconBoxEndIndex,
                c,
                !1
              ),
              this.addDebugCollisionBoxes(
                c.verticalIconBoxStartIndex,
                c.verticalIconBoxEndIndex,
                c,
                !1
              );
          }
        }
        _deserializeCollisionBoxesForSymbol(s, c, p, y, w, k, C, A, P) {
          let N = {};
          for (let O = c; O < p; O++) {
            let j = s.get(O);
            (N.textBox = {
              x1: j.x1,
              y1: j.y1,
              x2: j.x2,
              y2: j.y2,
              anchorPointX: j.anchorPointX,
              anchorPointY: j.anchorPointY,
            }),
              (N.textFeatureIndex = j.featureIndex);
            break;
          }
          for (let O = y; O < w; O++) {
            let j = s.get(O);
            (N.verticalTextBox = {
              x1: j.x1,
              y1: j.y1,
              x2: j.x2,
              y2: j.y2,
              anchorPointX: j.anchorPointX,
              anchorPointY: j.anchorPointY,
            }),
              (N.verticalTextFeatureIndex = j.featureIndex);
            break;
          }
          for (let O = k; O < C; O++) {
            let j = s.get(O);
            (N.iconBox = {
              x1: j.x1,
              y1: j.y1,
              x2: j.x2,
              y2: j.y2,
              anchorPointX: j.anchorPointX,
              anchorPointY: j.anchorPointY,
            }),
              (N.iconFeatureIndex = j.featureIndex);
            break;
          }
          for (let O = A; O < P; O++) {
            let j = s.get(O);
            (N.verticalIconBox = {
              x1: j.x1,
              y1: j.y1,
              x2: j.x2,
              y2: j.y2,
              anchorPointX: j.anchorPointX,
              anchorPointY: j.anchorPointY,
            }),
              (N.verticalIconFeatureIndex = j.featureIndex);
            break;
          }
          return N;
        }
        deserializeCollisionBoxes(s) {
          this.collisionArrays = [];
          for (let c = 0; c < this.symbolInstances.length; c++) {
            let p = this.symbolInstances.get(c);
            this.collisionArrays.push(
              this._deserializeCollisionBoxesForSymbol(
                s,
                p.textBoxStartIndex,
                p.textBoxEndIndex,
                p.verticalTextBoxStartIndex,
                p.verticalTextBoxEndIndex,
                p.iconBoxStartIndex,
                p.iconBoxEndIndex,
                p.verticalIconBoxStartIndex,
                p.verticalIconBoxEndIndex
              )
            );
          }
        }
        hasTextData() {
          return this.text.segments.get().length > 0;
        }
        hasIconData() {
          return this.icon.segments.get().length > 0;
        }
        hasDebugData() {
          return this.textCollisionBox && this.iconCollisionBox;
        }
        hasTextCollisionBoxData() {
          return (
            this.hasDebugData() &&
            this.textCollisionBox.segments.get().length > 0
          );
        }
        hasIconCollisionBoxData() {
          return (
            this.hasDebugData() &&
            this.iconCollisionBox.segments.get().length > 0
          );
        }
        addIndicesForPlacedSymbol(s, c) {
          let p = s.placedSymbolArray.get(c),
            y = p.vertexStartIndex + 4 * p.numGlyphs;
          for (let w = p.vertexStartIndex; w < y; w += 4)
            s.indexArray.emplaceBack(w, w + 1, w + 2),
              s.indexArray.emplaceBack(w + 1, w + 2, w + 3);
        }
        getSortedSymbolIndexes(s) {
          if (this.sortedAngle === s && this.symbolInstanceIndexes !== void 0)
            return this.symbolInstanceIndexes;
          let c = Math.sin(s),
            p = Math.cos(s),
            y = [],
            w = [],
            k = [];
          for (let C = 0; C < this.symbolInstances.length; ++C) {
            k.push(C);
            let A = this.symbolInstances.get(C);
            y.push(0 | Math.round(c * A.anchorX + p * A.anchorY)),
              w.push(A.featureIndex);
          }
          return k.sort((C, A) => y[C] - y[A] || w[A] - w[C]), k;
        }
        addToSortKeyRanges(s, c) {
          let p = this.sortKeyRanges[this.sortKeyRanges.length - 1];
          p && p.sortKey === c
            ? (p.symbolInstanceEnd = s + 1)
            : this.sortKeyRanges.push({
                sortKey: c,
                symbolInstanceStart: s,
                symbolInstanceEnd: s + 1,
              });
        }
        sortFeatures(s) {
          if (
            this.sortFeaturesByY &&
            this.sortedAngle !== s &&
            !(
              this.text.segments.get().length > 1 ||
              this.icon.segments.get().length > 1
            )
          ) {
            (this.symbolInstanceIndexes = this.getSortedSymbolIndexes(s)),
              (this.sortedAngle = s),
              this.text.indexArray.clear(),
              this.icon.indexArray.clear(),
              (this.featureSortOrder = []);
            for (let c of this.symbolInstanceIndexes) {
              let p = this.symbolInstances.get(c);
              this.featureSortOrder.push(p.featureIndex),
                [
                  p.rightJustifiedTextSymbolIndex,
                  p.centerJustifiedTextSymbolIndex,
                  p.leftJustifiedTextSymbolIndex,
                ].forEach((y, w, k) => {
                  y >= 0 &&
                    k.indexOf(y) === w &&
                    this.addIndicesForPlacedSymbol(this.text, y);
                }),
                p.verticalPlacedTextSymbolIndex >= 0 &&
                  this.addIndicesForPlacedSymbol(
                    this.text,
                    p.verticalPlacedTextSymbolIndex
                  ),
                p.placedIconSymbolIndex >= 0 &&
                  this.addIndicesForPlacedSymbol(
                    this.icon,
                    p.placedIconSymbolIndex
                  ),
                p.verticalPlacedIconSymbolIndex >= 0 &&
                  this.addIndicesForPlacedSymbol(
                    this.icon,
                    p.verticalPlacedIconSymbolIndex
                  );
            }
            this.text.indexBuffer &&
              this.text.indexBuffer.updateData(this.text.indexArray),
              this.icon.indexBuffer &&
                this.icon.indexBuffer.updateData(this.icon.indexArray);
          }
        }
      }
      let s3, a3;
      Nt("SymbolBucket", Hu, {
        omit: ["layers", "collisionBoxArray", "features", "compareText"],
      }),
        (Hu.MAX_GLYPHS = 65535),
        (Hu.addDynamicAttributes = O1);
      var U1 = {
        get paint() {
          return (a3 =
            a3 ||
            new Mo({
              "icon-opacity": new si(je.paint_symbol["icon-opacity"]),
              "icon-color": new si(je.paint_symbol["icon-color"]),
              "icon-halo-color": new si(je.paint_symbol["icon-halo-color"]),
              "icon-halo-width": new si(je.paint_symbol["icon-halo-width"]),
              "icon-halo-blur": new si(je.paint_symbol["icon-halo-blur"]),
              "icon-translate": new Kt(je.paint_symbol["icon-translate"]),
              "icon-translate-anchor": new Kt(
                je.paint_symbol["icon-translate-anchor"]
              ),
              "text-opacity": new si(je.paint_symbol["text-opacity"]),
              "text-color": new si(je.paint_symbol["text-color"], {
                runtimeType: At,
                getOverride: (l) => l.textColor,
                hasOverride: (l) => !!l.textColor,
              }),
              "text-halo-color": new si(je.paint_symbol["text-halo-color"]),
              "text-halo-width": new si(je.paint_symbol["text-halo-width"]),
              "text-halo-blur": new si(je.paint_symbol["text-halo-blur"]),
              "text-translate": new Kt(je.paint_symbol["text-translate"]),
              "text-translate-anchor": new Kt(
                je.paint_symbol["text-translate-anchor"]
              ),
            }));
        },
        get layout() {
          return (s3 =
            s3 ||
            new Mo({
              "symbol-placement": new Kt(je.layout_symbol["symbol-placement"]),
              "symbol-spacing": new Kt(je.layout_symbol["symbol-spacing"]),
              "symbol-avoid-edges": new Kt(
                je.layout_symbol["symbol-avoid-edges"]
              ),
              "symbol-sort-key": new si(je.layout_symbol["symbol-sort-key"]),
              "symbol-z-order": new Kt(je.layout_symbol["symbol-z-order"]),
              "icon-allow-overlap": new Kt(
                je.layout_symbol["icon-allow-overlap"]
              ),
              "icon-overlap": new Kt(je.layout_symbol["icon-overlap"]),
              "icon-ignore-placement": new Kt(
                je.layout_symbol["icon-ignore-placement"]
              ),
              "icon-optional": new Kt(je.layout_symbol["icon-optional"]),
              "icon-rotation-alignment": new Kt(
                je.layout_symbol["icon-rotation-alignment"]
              ),
              "icon-size": new si(je.layout_symbol["icon-size"]),
              "icon-text-fit": new Kt(je.layout_symbol["icon-text-fit"]),
              "icon-text-fit-padding": new Kt(
                je.layout_symbol["icon-text-fit-padding"]
              ),
              "icon-image": new si(je.layout_symbol["icon-image"]),
              "icon-rotate": new si(je.layout_symbol["icon-rotate"]),
              "icon-padding": new si(je.layout_symbol["icon-padding"]),
              "icon-keep-upright": new Kt(
                je.layout_symbol["icon-keep-upright"]
              ),
              "icon-offset": new si(je.layout_symbol["icon-offset"]),
              "icon-anchor": new si(je.layout_symbol["icon-anchor"]),
              "icon-pitch-alignment": new Kt(
                je.layout_symbol["icon-pitch-alignment"]
              ),
              "text-pitch-alignment": new Kt(
                je.layout_symbol["text-pitch-alignment"]
              ),
              "text-rotation-alignment": new Kt(
                je.layout_symbol["text-rotation-alignment"]
              ),
              "text-field": new si(je.layout_symbol["text-field"]),
              "text-font": new si(je.layout_symbol["text-font"]),
              "text-size": new si(je.layout_symbol["text-size"]),
              "text-max-width": new si(je.layout_symbol["text-max-width"]),
              "text-line-height": new Kt(je.layout_symbol["text-line-height"]),
              "text-letter-spacing": new si(
                je.layout_symbol["text-letter-spacing"]
              ),
              "text-justify": new si(je.layout_symbol["text-justify"]),
              "text-radial-offset": new si(
                je.layout_symbol["text-radial-offset"]
              ),
              "text-variable-anchor": new Kt(
                je.layout_symbol["text-variable-anchor"]
              ),
              "text-variable-anchor-offset": new si(
                je.layout_symbol["text-variable-anchor-offset"]
              ),
              "text-anchor": new si(je.layout_symbol["text-anchor"]),
              "text-max-angle": new Kt(je.layout_symbol["text-max-angle"]),
              "text-writing-mode": new Kt(
                je.layout_symbol["text-writing-mode"]
              ),
              "text-rotate": new si(je.layout_symbol["text-rotate"]),
              "text-padding": new Kt(je.layout_symbol["text-padding"]),
              "text-keep-upright": new Kt(
                je.layout_symbol["text-keep-upright"]
              ),
              "text-transform": new si(je.layout_symbol["text-transform"]),
              "text-offset": new si(je.layout_symbol["text-offset"]),
              "text-allow-overlap": new Kt(
                je.layout_symbol["text-allow-overlap"]
              ),
              "text-overlap": new Kt(je.layout_symbol["text-overlap"]),
              "text-ignore-placement": new Kt(
                je.layout_symbol["text-ignore-placement"]
              ),
              "text-optional": new Kt(je.layout_symbol["text-optional"]),
            }));
        },
      };
      class l3 {
        constructor(s) {
          if (s.property.overrides === void 0)
            throw new Error(
              "overrides must be provided to instantiate FormatSectionOverride class"
            );
          (this.type = s.property.overrides
            ? s.property.overrides.runtimeType
            : ko),
            (this.defaultValue = s);
        }
        evaluate(s) {
          if (s.formattedSection) {
            let c = this.defaultValue.property.overrides;
            if (c && c.hasOverride(s.formattedSection))
              return c.getOverride(s.formattedSection);
          }
          return s.feature && s.featureState
            ? this.defaultValue.evaluate(s.feature, s.featureState)
            : this.defaultValue.property.specification.default;
        }
        eachChild(s) {
          this.defaultValue.isConstant() ||
            s(this.defaultValue.value._styleExpression.expression);
        }
        outputDefined() {
          return !1;
        }
        serialize() {
          return null;
        }
      }
      Nt("FormatSectionOverride", l3, { omit: ["defaultValue"] });
      class t0 extends ms {
        constructor(s) {
          super(s, U1);
        }
        recalculate(s, c) {
          if (
            (super.recalculate(s, c),
            this.layout.get("icon-rotation-alignment") === "auto" &&
              (this.layout._values["icon-rotation-alignment"] =
                this.layout.get("symbol-placement") !== "point"
                  ? "map"
                  : "viewport"),
            this.layout.get("text-rotation-alignment") === "auto" &&
              (this.layout._values["text-rotation-alignment"] =
                this.layout.get("symbol-placement") !== "point"
                  ? "map"
                  : "viewport"),
            this.layout.get("text-pitch-alignment") === "auto" &&
              (this.layout._values["text-pitch-alignment"] =
                this.layout.get("text-rotation-alignment") === "map"
                  ? "map"
                  : "viewport"),
            this.layout.get("icon-pitch-alignment") === "auto" &&
              (this.layout._values["icon-pitch-alignment"] = this.layout.get(
                "icon-rotation-alignment"
              )),
            this.layout.get("symbol-placement") === "point")
          ) {
            let p = this.layout.get("text-writing-mode");
            if (p) {
              let y = [];
              for (let w of p) y.indexOf(w) < 0 && y.push(w);
              this.layout._values["text-writing-mode"] = y;
            } else this.layout._values["text-writing-mode"] = ["horizontal"];
          }
          this._setPaintOverrides();
        }
        getValueAndResolveTokens(s, c, p, y) {
          let w = this.layout.get(s).evaluate(c, {}, p, y),
            k = this._unevaluatedLayout._values[s];
          return k.isDataDriven() || Sr(k.value) || !w
            ? w
            : (function (C, A) {
                return A.replace(/{([^{}]+)}/g, (P, N) =>
                  C && N in C ? String(C[N]) : ""
                );
              })(c.properties, w);
        }
        createBucket(s) {
          return new Hu(s);
        }
        queryRadius() {
          return 0;
        }
        queryIntersectsFeature() {
          throw new Error("Should take a different path in FeatureIndex");
        }
        _setPaintOverrides() {
          for (let s of U1.paint.overridableProperties) {
            if (!t0.hasPaintOverride(this.layout, s)) continue;
            let c = this.paint.get(s),
              p = new l3(c),
              y = new pc(p, c.property.specification),
              w = null;
            (w =
              c.value.kind === "constant" || c.value.kind === "source"
                ? new Al("source", y)
                : new _u("composite", y, c.value.zoomStops)),
              (this.paint._values[s] = new fs(c.property, w, c.parameters));
          }
        }
        _handleOverridablePaintPropertyUpdate(s, c, p) {
          return (
            !(!this.layout || c.isDataDriven() || p.isDataDriven()) &&
            t0.hasPaintOverride(this.layout, s)
          );
        }
        static hasPaintOverride(s, c) {
          let p = s.get("text-field"),
            y = U1.paint.properties[c],
            w = !1,
            k = (C) => {
              for (let A of C)
                if (y.overrides && y.overrides.hasOverride(A))
                  return void (w = !0);
            };
          if (p.value.kind === "constant" && p.value.value instanceof jn)
            k(p.value.value.sections);
          else if (p.value.kind === "source") {
            let C = (P) => {
                w ||
                  (P instanceof Lr && ai(P.value) === Fi
                    ? k(P.value.sections)
                    : P instanceof vu
                    ? k(P.sections)
                    : P.eachChild(C));
              },
              A = p.value;
            A._styleExpression && C(A._styleExpression.expression);
          }
          return w;
        }
      }
      let c3;
      var Xk = {
        get paint() {
          return (c3 =
            c3 ||
            new Mo({
              "background-color": new Kt(
                je.paint_background["background-color"]
              ),
              "background-pattern": new lh(
                je.paint_background["background-pattern"]
              ),
              "background-opacity": new Kt(
                je.paint_background["background-opacity"]
              ),
            }));
        },
      };
      class Yk extends ms {
        constructor(s) {
          super(s, Xk);
        }
      }
      let u3;
      var eS = {
        get paint() {
          return (u3 =
            u3 ||
            new Mo({
              "raster-opacity": new Kt(je.paint_raster["raster-opacity"]),
              "raster-hue-rotate": new Kt(je.paint_raster["raster-hue-rotate"]),
              "raster-brightness-min": new Kt(
                je.paint_raster["raster-brightness-min"]
              ),
              "raster-brightness-max": new Kt(
                je.paint_raster["raster-brightness-max"]
              ),
              "raster-saturation": new Kt(je.paint_raster["raster-saturation"]),
              "raster-contrast": new Kt(je.paint_raster["raster-contrast"]),
              "raster-resampling": new Kt(je.paint_raster["raster-resampling"]),
              "raster-fade-duration": new Kt(
                je.paint_raster["raster-fade-duration"]
              ),
            }));
        },
      };
      class tS extends ms {
        constructor(s) {
          super(s, eS);
        }
      }
      class iS extends ms {
        constructor(s) {
          super(s, {}),
            (this.onAdd = (c) => {
              this.implementation.onAdd &&
                this.implementation.onAdd(c, c.painter.context.gl);
            }),
            (this.onRemove = (c) => {
              this.implementation.onRemove &&
                this.implementation.onRemove(c, c.painter.context.gl);
            }),
            (this.implementation = s);
        }
        is3D() {
          return this.implementation.renderingMode === "3d";
        }
        hasOffscreenPass() {
          return this.implementation.prerender !== void 0;
        }
        recalculate() {}
        updateTransitions() {}
        hasTransition() {
          return !1;
        }
        serialize() {
          throw new Error("Custom layers cannot be serialized");
        }
      }
      class rS {
        constructor(s) {
          (this._methodToThrottle = s),
            (this._triggered = !1),
            typeof MessageChannel < "u" &&
              ((this._channel = new MessageChannel()),
              (this._channel.port2.onmessage = () => {
                (this._triggered = !1), this._methodToThrottle();
              }));
        }
        trigger() {
          this._triggered ||
            ((this._triggered = !0),
            this._channel
              ? this._channel.port1.postMessage(!0)
              : setTimeout(() => {
                  (this._triggered = !1), this._methodToThrottle();
                }, 0));
        }
        remove() {
          delete this._channel, (this._methodToThrottle = () => {});
        }
      }
      let V1 = 63710088e-1;
      class ql {
        constructor(s, c) {
          if (isNaN(s) || isNaN(c))
            throw new Error(`Invalid LngLat object: (${s}, ${c})`);
          if (
            ((this.lng = +s), (this.lat = +c), this.lat > 90 || this.lat < -90)
          )
            throw new Error(
              "Invalid LngLat latitude value: must be between -90 and 90"
            );
        }
        wrap() {
          return new ql(Y(this.lng, -180, 180), this.lat);
        }
        toArray() {
          return [this.lng, this.lat];
        }
        toString() {
          return `LngLat(${this.lng}, ${this.lat})`;
        }
        distanceTo(s) {
          let c = Math.PI / 180,
            p = this.lat * c,
            y = s.lat * c,
            w =
              Math.sin(p) * Math.sin(y) +
              Math.cos(p) * Math.cos(y) * Math.cos((s.lng - this.lng) * c);
          return V1 * Math.acos(Math.min(w, 1));
        }
        static convert(s) {
          if (s instanceof ql) return s;
          if (Array.isArray(s) && (s.length === 2 || s.length === 3))
            return new ql(Number(s[0]), Number(s[1]));
          if (!Array.isArray(s) && typeof s == "object" && s !== null)
            return new ql(Number("lng" in s ? s.lng : s.lon), Number(s.lat));
          throw new Error(
            "`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]"
          );
        }
      }
      let d3 = 2 * Math.PI * V1;
      function h3(l) {
        return d3 * Math.cos((l * Math.PI) / 180);
      }
      function p3(l) {
        return (180 + l) / 360;
      }
      function f3(l) {
        return (
          (180 -
            (180 / Math.PI) *
              Math.log(Math.tan(Math.PI / 4 + (l * Math.PI) / 360))) /
          360
        );
      }
      function m3(l, s) {
        return l / h3(s);
      }
      function j1(l) {
        return (
          (360 / Math.PI) *
            Math.atan(Math.exp(((180 - 360 * l) * Math.PI) / 180)) -
          90
        );
      }
      class i0 {
        constructor(s, c, p = 0) {
          (this.x = +s), (this.y = +c), (this.z = +p);
        }
        static fromLngLat(s, c = 0) {
          let p = ql.convert(s);
          return new i0(p3(p.lng), f3(p.lat), m3(c, p.lat));
        }
        toLngLat() {
          return new ql(360 * this.x - 180, j1(this.y));
        }
        toAltitude() {
          return this.z * h3(j1(this.y));
        }
        meterInMercatorCoordinateUnits() {
          return (
            (1 / d3) * ((s = j1(this.y)), 1 / Math.cos((s * Math.PI) / 180))
          );
          var s;
        }
      }
      function g3(l, s, c) {
        var p = (2 * Math.PI * 6378137) / 256 / Math.pow(2, c);
        return [
          l * p - (2 * Math.PI * 6378137) / 2,
          s * p - (2 * Math.PI * 6378137) / 2,
        ];
      }
      class H1 {
        constructor(s, c, p) {
          if (
            s < 0 ||
            s > 25 ||
            p < 0 ||
            p >= Math.pow(2, s) ||
            c < 0 ||
            c >= Math.pow(2, s)
          )
            throw new Error(
              `x=${c}, y=${p}, z=${s} outside of bounds. 0<=x<${Math.pow(
                2,
                s
              )}, 0<=y<${Math.pow(2, s)} 0<=z<=25 `
            );
          (this.z = s),
            (this.x = c),
            (this.y = p),
            (this.key = zh(0, s, s, c, p));
        }
        equals(s) {
          return this.z === s.z && this.x === s.x && this.y === s.y;
        }
        url(s, c, p) {
          let y =
            ((k = this.y),
            (C = this.z),
            (A = g3(256 * (w = this.x), 256 * (k = Math.pow(2, C) - k - 1), C)),
            (P = g3(256 * (w + 1), 256 * (k + 1), C)),
            A[0] + "," + A[1] + "," + P[0] + "," + P[1]);
          var w, k, C, A, P;
          let N = (function (O, j, W) {
            let K,
              ie = "";
            for (let ae = O; ae > 0; ae--)
              (K = 1 << (ae - 1)), (ie += (j & K ? 1 : 0) + (W & K ? 2 : 0));
            return ie;
          })(this.z, this.x, this.y);
          return s[(this.x + this.y) % s.length]
            .replace(
              /{prefix}/g,
              (this.x % 16).toString(16) + (this.y % 16).toString(16)
            )
            .replace(/{z}/g, String(this.z))
            .replace(/{x}/g, String(this.x))
            .replace(
              /{y}/g,
              String(p === "tms" ? Math.pow(2, this.z) - this.y - 1 : this.y)
            )
            .replace(/{ratio}/g, c > 1 ? "@2x" : "")
            .replace(/{quadkey}/g, N)
            .replace(/{bbox-epsg-3857}/g, y);
        }
        isChildOf(s) {
          let c = this.z - s.z;
          return c > 0 && s.x === this.x >> c && s.y === this.y >> c;
        }
        getTilePoint(s) {
          let c = Math.pow(2, this.z);
          return new b((s.x * c - this.x) * Ui, (s.y * c - this.y) * Ui);
        }
        toString() {
          return `${this.z}/${this.x}/${this.y}`;
        }
      }
      class y3 {
        constructor(s, c) {
          (this.wrap = s),
            (this.canonical = c),
            (this.key = zh(s, c.z, c.z, c.x, c.y));
        }
      }
      class vs {
        constructor(s, c, p, y, w) {
          if (s < p)
            throw new Error(
              `overscaledZ should be >= z; overscaledZ = ${s}; z = ${p}`
            );
          (this.overscaledZ = s),
            (this.wrap = c),
            (this.canonical = new H1(p, +y, +w)),
            (this.key = zh(c, s, p, y, w));
        }
        clone() {
          return new vs(
            this.overscaledZ,
            this.wrap,
            this.canonical.z,
            this.canonical.x,
            this.canonical.y
          );
        }
        equals(s) {
          return (
            this.overscaledZ === s.overscaledZ &&
            this.wrap === s.wrap &&
            this.canonical.equals(s.canonical)
          );
        }
        scaledTo(s) {
          if (s > this.overscaledZ)
            throw new Error(
              `targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`
            );
          let c = this.canonical.z - s;
          return s > this.canonical.z
            ? new vs(
                s,
                this.wrap,
                this.canonical.z,
                this.canonical.x,
                this.canonical.y
              )
            : new vs(
                s,
                this.wrap,
                s,
                this.canonical.x >> c,
                this.canonical.y >> c
              );
        }
        calculateScaledKey(s, c) {
          if (s > this.overscaledZ)
            throw new Error(
              `targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`
            );
          let p = this.canonical.z - s;
          return s > this.canonical.z
            ? zh(
                this.wrap * +c,
                s,
                this.canonical.z,
                this.canonical.x,
                this.canonical.y
              )
            : zh(
                this.wrap * +c,
                s,
                s,
                this.canonical.x >> p,
                this.canonical.y >> p
              );
        }
        isChildOf(s) {
          if (s.wrap !== this.wrap) return !1;
          let c = this.canonical.z - s.canonical.z;
          return (
            s.overscaledZ === 0 ||
            (s.overscaledZ < this.overscaledZ &&
              s.canonical.x === this.canonical.x >> c &&
              s.canonical.y === this.canonical.y >> c)
          );
        }
        children(s) {
          if (this.overscaledZ >= s)
            return [
              new vs(
                this.overscaledZ + 1,
                this.wrap,
                this.canonical.z,
                this.canonical.x,
                this.canonical.y
              ),
            ];
          let c = this.canonical.z + 1,
            p = 2 * this.canonical.x,
            y = 2 * this.canonical.y;
          return [
            new vs(c, this.wrap, c, p, y),
            new vs(c, this.wrap, c, p + 1, y),
            new vs(c, this.wrap, c, p, y + 1),
            new vs(c, this.wrap, c, p + 1, y + 1),
          ];
        }
        isLessThan(s) {
          return (
            this.wrap < s.wrap ||
            (!(this.wrap > s.wrap) &&
              (this.overscaledZ < s.overscaledZ ||
                (!(this.overscaledZ > s.overscaledZ) &&
                  (this.canonical.x < s.canonical.x ||
                    (!(this.canonical.x > s.canonical.x) &&
                      this.canonical.y < s.canonical.y)))))
          );
        }
        wrapped() {
          return new vs(
            this.overscaledZ,
            0,
            this.canonical.z,
            this.canonical.x,
            this.canonical.y
          );
        }
        unwrapTo(s) {
          return new vs(
            this.overscaledZ,
            s,
            this.canonical.z,
            this.canonical.x,
            this.canonical.y
          );
        }
        overscaleFactor() {
          return Math.pow(2, this.overscaledZ - this.canonical.z);
        }
        toUnwrapped() {
          return new y3(this.wrap, this.canonical);
        }
        toString() {
          return `${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`;
        }
        getTilePoint(s) {
          return this.canonical.getTilePoint(new i0(s.x - this.wrap, s.y));
        }
      }
      function zh(l, s, c, p, y) {
        (l *= 2) < 0 && (l = -1 * l - 1);
        let w = 1 << c;
        return (
          (w * w * l + w * y + p).toString(36) + c.toString(36) + s.toString(36)
        );
      }
      Nt("CanonicalTileID", H1),
        Nt("OverscaledTileID", vs, { omit: ["posMatrix"] });
      class b3 {
        constructor(s, c, p, y = 1, w = 1, k = 1, C = 0) {
          if (((this.uid = s), c.height !== c.width))
            throw new RangeError("DEM tiles must be square");
          if (p && !["mapbox", "terrarium", "custom"].includes(p))
            return void qe(
              `"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`
            );
          this.stride = c.height;
          let A = (this.dim = c.height - 2);
          switch (((this.data = new Uint32Array(c.data.buffer)), p)) {
            case "terrarium":
              (this.redFactor = 256),
                (this.greenFactor = 1),
                (this.blueFactor = 1 / 256),
                (this.baseShift = 32768);
              break;
            case "custom":
              (this.redFactor = y),
                (this.greenFactor = w),
                (this.blueFactor = k),
                (this.baseShift = C);
              break;
            default:
              (this.redFactor = 6553.6),
                (this.greenFactor = 25.6),
                (this.blueFactor = 0.1),
                (this.baseShift = 1e4);
          }
          for (let P = 0; P < A; P++)
            (this.data[this._idx(-1, P)] = this.data[this._idx(0, P)]),
              (this.data[this._idx(A, P)] = this.data[this._idx(A - 1, P)]),
              (this.data[this._idx(P, -1)] = this.data[this._idx(P, 0)]),
              (this.data[this._idx(P, A)] = this.data[this._idx(P, A - 1)]);
          (this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)]),
            (this.data[this._idx(A, -1)] = this.data[this._idx(A - 1, 0)]),
            (this.data[this._idx(-1, A)] = this.data[this._idx(0, A - 1)]),
            (this.data[this._idx(A, A)] = this.data[this._idx(A - 1, A - 1)]),
            (this.min = Number.MAX_SAFE_INTEGER),
            (this.max = Number.MIN_SAFE_INTEGER);
          for (let P = 0; P < A; P++)
            for (let N = 0; N < A; N++) {
              let O = this.get(P, N);
              O > this.max && (this.max = O), O < this.min && (this.min = O);
            }
        }
        get(s, c) {
          let p = new Uint8Array(this.data.buffer),
            y = 4 * this._idx(s, c);
          return this.unpack(p[y], p[y + 1], p[y + 2]);
        }
        getUnpackVector() {
          return [
            this.redFactor,
            this.greenFactor,
            this.blueFactor,
            this.baseShift,
          ];
        }
        _idx(s, c) {
          if (s < -1 || s >= this.dim + 1 || c < -1 || c >= this.dim + 1)
            throw new RangeError(
              "out of range source coordinates for DEM data"
            );
          return (c + 1) * this.stride + (s + 1);
        }
        unpack(s, c, p) {
          return (
            s * this.redFactor +
            c * this.greenFactor +
            p * this.blueFactor -
            this.baseShift
          );
        }
        getPixels() {
          return new bs(
            { width: this.stride, height: this.stride },
            new Uint8Array(this.data.buffer)
          );
        }
        backfillBorder(s, c, p) {
          if (this.dim !== s.dim) throw new Error("dem dimension mismatch");
          let y = c * this.dim,
            w = c * this.dim + this.dim,
            k = p * this.dim,
            C = p * this.dim + this.dim;
          switch (c) {
            case -1:
              y = w - 1;
              break;
            case 1:
              w = y + 1;
          }
          switch (p) {
            case -1:
              k = C - 1;
              break;
            case 1:
              C = k + 1;
          }
          let A = -c * this.dim,
            P = -p * this.dim;
          for (let N = k; N < C; N++)
            for (let O = y; O < w; O++)
              this.data[this._idx(O, N)] = s.data[this._idx(O + A, N + P)];
        }
      }
      Nt("DEMData", b3);
      class v3 {
        constructor(s) {
          (this._stringToNumber = {}), (this._numberToString = []);
          for (let c = 0; c < s.length; c++) {
            let p = s[c];
            (this._stringToNumber[p] = c), (this._numberToString[c] = p);
          }
        }
        encode(s) {
          return this._stringToNumber[s];
        }
        decode(s) {
          if (s >= this._numberToString.length)
            throw new Error(
              `Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`
            );
          return this._numberToString[s];
        }
      }
      class _3 {
        constructor(s, c, p, y, w) {
          (this.type = "Feature"),
            (this._vectorTileFeature = s),
            (s._z = c),
            (s._x = p),
            (s._y = y),
            (this.properties = s.properties),
            (this.id = w);
        }
        get geometry() {
          return (
            this._geometry === void 0 &&
              (this._geometry = this._vectorTileFeature.toGeoJSON(
                this._vectorTileFeature._x,
                this._vectorTileFeature._y,
                this._vectorTileFeature._z
              ).geometry),
            this._geometry
          );
        }
        set geometry(s) {
          this._geometry = s;
        }
        toJSON() {
          let s = { geometry: this.geometry };
          for (let c in this)
            c !== "_geometry" && c !== "_vectorTileFeature" && (s[c] = this[c]);
          return s;
        }
      }
      class x3 {
        constructor(s, c) {
          (this.tileID = s),
            (this.x = s.canonical.x),
            (this.y = s.canonical.y),
            (this.z = s.canonical.z),
            (this.grid = new Zs(Ui, 16, 0)),
            (this.grid3D = new Zs(Ui, 16, 0)),
            (this.featureIndexArray = new z()),
            (this.promoteId = c);
        }
        insert(s, c, p, y, w, k) {
          let C = this.featureIndexArray.length;
          this.featureIndexArray.emplaceBack(p, y, w);
          let A = k ? this.grid3D : this.grid;
          for (let P = 0; P < c.length; P++) {
            let N = c[P],
              O = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
            for (let j = 0; j < N.length; j++) {
              let W = N[j];
              (O[0] = Math.min(O[0], W.x)),
                (O[1] = Math.min(O[1], W.y)),
                (O[2] = Math.max(O[2], W.x)),
                (O[3] = Math.max(O[3], W.y));
            }
            O[0] < Ui &&
              O[1] < Ui &&
              O[2] >= 0 &&
              O[3] >= 0 &&
              A.insert(C, O[0], O[1], O[2], O[3]);
          }
        }
        loadVTLayers() {
          return (
            this.vtLayers ||
              ((this.vtLayers = new Vl.VectorTile(
                new P1(this.rawTileData)
              ).layers),
              (this.sourceLayerCoder = new v3(
                this.vtLayers
                  ? Object.keys(this.vtLayers).sort()
                  : ["_geojsonTileLayer"]
              ))),
            this.vtLayers
          );
        }
        query(s, c, p, y) {
          this.loadVTLayers();
          let w = s.params || {},
            k = Ui / s.tileSize / s.scale,
            C = ku(w.filter),
            A = s.queryGeometry,
            P = s.queryPadding * k,
            N = k3(A),
            O = this.grid.query(N.minX - P, N.minY - P, N.maxX + P, N.maxY + P),
            j = k3(s.cameraQueryGeometry),
            W = this.grid3D.query(
              j.minX - P,
              j.minY - P,
              j.maxX + P,
              j.maxY + P,
              (ae, pe, Pe, ye) =>
                (function (Se, We, tt, Dt, Qt) {
                  for (let Et of Se)
                    if (We <= Et.x && tt <= Et.y && Dt >= Et.x && Qt >= Et.y)
                      return !0;
                  let It = [
                    new b(We, tt),
                    new b(We, Qt),
                    new b(Dt, Qt),
                    new b(Dt, tt),
                  ];
                  if (Se.length > 2) {
                    for (let Et of It) if (Nu(Se, Et)) return !0;
                  }
                  for (let Et = 0; Et < Se.length - 1; Et++)
                    if (z7(Se[Et], Se[Et + 1], It)) return !0;
                  return !1;
                })(s.cameraQueryGeometry, ae - P, pe - P, Pe + P, ye + P)
            );
          for (let ae of W) O.push(ae);
          O.sort(nS);
          let K = {},
            ie;
          for (let ae = 0; ae < O.length; ae++) {
            let pe = O[ae];
            if (pe === ie) continue;
            ie = pe;
            let Pe = this.featureIndexArray.get(pe),
              ye = null;
            this.loadMatchingFeature(
              K,
              Pe.bucketIndex,
              Pe.sourceLayerIndex,
              Pe.featureIndex,
              C,
              w.layers,
              w.availableImages,
              c,
              p,
              y,
              (Se, We, tt) => (
                ye || (ye = Va(Se)),
                We.queryIntersectsFeature(
                  A,
                  Se,
                  tt,
                  ye,
                  this.z,
                  s.transform,
                  k,
                  s.pixelPosMatrix
                )
              )
            );
          }
          return K;
        }
        loadMatchingFeature(s, c, p, y, w, k, C, A, P, N, O) {
          let j = this.bucketLayerIDs[c];
          if (
            k &&
            !(function (ae, pe) {
              for (let Pe = 0; Pe < ae.length; Pe++)
                if (pe.indexOf(ae[Pe]) >= 0) return !0;
              return !1;
            })(k, j)
          )
            return;
          let W = this.sourceLayerCoder.decode(p),
            K = this.vtLayers[W].feature(y);
          if (w.needGeometry) {
            let ae = ja(K, !0);
            if (
              !w.filter(
                new Mr(this.tileID.overscaledZ),
                ae,
                this.tileID.canonical
              )
            )
              return;
          } else if (!w.filter(new Mr(this.tileID.overscaledZ), K)) return;
          let ie = this.getId(K, W);
          for (let ae = 0; ae < j.length; ae++) {
            let pe = j[ae];
            if (k && k.indexOf(pe) < 0) continue;
            let Pe = A[pe];
            if (!Pe) continue;
            let ye = {};
            ie &&
              N &&
              (ye = N.getState(Pe.sourceLayer || "_geojsonTileLayer", ie));
            let Se = Ie({}, P[pe]);
            (Se.paint = w3(Se.paint, Pe.paint, K, ye, C)),
              (Se.layout = w3(Se.layout, Pe.layout, K, ye, C));
            let We = !O || O(K, Pe, ye);
            if (!We) continue;
            let tt = new _3(K, this.z, this.x, this.y, ie);
            tt.layer = Se;
            let Dt = s[pe];
            Dt === void 0 && (Dt = s[pe] = []),
              Dt.push({ featureIndex: y, feature: tt, intersectionZ: We });
          }
        }
        lookupSymbolFeatures(s, c, p, y, w, k, C, A) {
          let P = {};
          this.loadVTLayers();
          let N = ku(w);
          for (let O of s) this.loadMatchingFeature(P, p, y, O, N, k, C, A, c);
          return P;
        }
        hasLayer(s) {
          for (let c of this.bucketLayerIDs)
            for (let p of c) if (s === p) return !0;
          return !1;
        }
        getId(s, c) {
          let p = s.id;
          return (
            this.promoteId &&
              ((p =
                s.properties[
                  typeof this.promoteId == "string"
                    ? this.promoteId
                    : this.promoteId[c]
                ]),
              typeof p == "boolean" && (p = Number(p))),
            p
          );
        }
      }
      function w3(l, s, c, p, y) {
        return fe(l, (w, k) => {
          let C = s instanceof bc ? s.get(k) : null;
          return C && C.evaluate ? C.evaluate(c, p, y) : C;
        });
      }
      function k3(l) {
        let s = 1 / 0,
          c = 1 / 0,
          p = -1 / 0,
          y = -1 / 0;
        for (let w of l)
          (s = Math.min(s, w.x)),
            (c = Math.min(c, w.y)),
            (p = Math.max(p, w.x)),
            (y = Math.max(y, w.y));
        return { minX: s, minY: c, maxX: p, maxY: y };
      }
      function nS(l, s) {
        return s - l;
      }
      function S3(l, s, c, p, y) {
        let w = [];
        for (let k = 0; k < l.length; k++) {
          let C = l[k],
            A;
          for (let P = 0; P < C.length - 1; P++) {
            let N = C[P],
              O = C[P + 1];
            (N.x < s && O.x < s) ||
              (N.x < s
                ? (N = new b(
                    s,
                    N.y + ((s - N.x) / (O.x - N.x)) * (O.y - N.y)
                  )._round())
                : O.x < s &&
                  (O = new b(
                    s,
                    N.y + ((s - N.x) / (O.x - N.x)) * (O.y - N.y)
                  )._round()),
              (N.y < c && O.y < c) ||
                (N.y < c
                  ? (N = new b(
                      N.x + ((c - N.y) / (O.y - N.y)) * (O.x - N.x),
                      c
                    )._round())
                  : O.y < c &&
                    (O = new b(
                      N.x + ((c - N.y) / (O.y - N.y)) * (O.x - N.x),
                      c
                    )._round()),
                (N.x >= p && O.x >= p) ||
                  (N.x >= p
                    ? (N = new b(
                        p,
                        N.y + ((p - N.x) / (O.x - N.x)) * (O.y - N.y)
                      )._round())
                    : O.x >= p &&
                      (O = new b(
                        p,
                        N.y + ((p - N.x) / (O.x - N.x)) * (O.y - N.y)
                      )._round()),
                  (N.y >= y && O.y >= y) ||
                    (N.y >= y
                      ? (N = new b(
                          N.x + ((y - N.y) / (O.y - N.y)) * (O.x - N.x),
                          y
                        )._round())
                      : O.y >= y &&
                        (O = new b(
                          N.x + ((y - N.y) / (O.y - N.y)) * (O.x - N.x),
                          y
                        )._round()),
                    (A && N.equals(A[A.length - 1])) || ((A = [N]), w.push(A)),
                    A.push(O)))));
          }
        }
        return w;
      }
      Nt("FeatureIndex", x3, { omit: ["rawTileData", "sourceLayerCoder"] });
      class $l extends b {
        constructor(s, c, p, y) {
          super(s, c), (this.angle = p), y !== void 0 && (this.segment = y);
        }
        clone() {
          return new $l(this.x, this.y, this.angle, this.segment);
        }
      }
      function C3(l, s, c, p, y) {
        if (s.segment === void 0 || c === 0) return !0;
        let w = s,
          k = s.segment + 1,
          C = 0;
        for (; C > -c / 2; ) {
          if ((k--, k < 0)) return !1;
          (C -= l[k].dist(w)), (w = l[k]);
        }
        (C += l[k].dist(l[k + 1])), k++;
        let A = [],
          P = 0;
        for (; C < c / 2; ) {
          let N = l[k],
            O = l[k + 1];
          if (!O) return !1;
          let j = l[k - 1].angleTo(N) - N.angleTo(O);
          for (
            j = Math.abs(((j + 3 * Math.PI) % (2 * Math.PI)) - Math.PI),
              A.push({ distance: C, angleDelta: j }),
              P += j;
            C - A[0].distance > p;

          )
            P -= A.shift().angleDelta;
          if (P > y) return !1;
          k++, (C += N.dist(O));
        }
        return !0;
      }
      function E3(l) {
        let s = 0;
        for (let c = 0; c < l.length - 1; c++) s += l[c].dist(l[c + 1]);
        return s;
      }
      function T3(l, s, c) {
        return l ? 0.6 * s * c : 0;
      }
      function M3(l, s) {
        return Math.max(l ? l.right - l.left : 0, s ? s.right - s.left : 0);
      }
      function oS(l, s, c, p, y, w) {
        let k = T3(c, y, w),
          C = M3(c, p) * w,
          A = 0,
          P = E3(l) / 2;
        for (let N = 0; N < l.length - 1; N++) {
          let O = l[N],
            j = l[N + 1],
            W = O.dist(j);
          if (A + W > P) {
            let K = (P - A) / W,
              ie = $n.number(O.x, j.x, K),
              ae = $n.number(O.y, j.y, K),
              pe = new $l(ie, ae, j.angleTo(O), N);
            return pe._round(), !k || C3(l, pe, C, k, s) ? pe : void 0;
          }
          A += W;
        }
      }
      function sS(l, s, c, p, y, w, k, C, A) {
        let P = T3(p, w, k),
          N = M3(p, y),
          O = N * k,
          j = l[0].x === 0 || l[0].x === A || l[0].y === 0 || l[0].y === A;
        return (
          s - O < s / 4 && (s = O + s / 4),
          A3(
            l,
            j ? ((s / 2) * C) % s : ((N / 2 + 2 * w) * k * C) % s,
            s,
            P,
            c,
            O,
            j,
            !1,
            A
          )
        );
      }
      function A3(l, s, c, p, y, w, k, C, A) {
        let P = w / 2,
          N = E3(l),
          O = 0,
          j = s - c,
          W = [];
        for (let K = 0; K < l.length - 1; K++) {
          let ie = l[K],
            ae = l[K + 1],
            pe = ie.dist(ae),
            Pe = ae.angleTo(ie);
          for (; j + c < O + pe; ) {
            j += c;
            let ye = (j - O) / pe,
              Se = $n.number(ie.x, ae.x, ye),
              We = $n.number(ie.y, ae.y, ye);
            if (
              Se >= 0 &&
              Se < A &&
              We >= 0 &&
              We < A &&
              j - P >= 0 &&
              j + P <= N
            ) {
              let tt = new $l(Se, We, Pe, K);
              tt._round(), (p && !C3(l, tt, w, p, y)) || W.push(tt);
            }
          }
          O += pe;
        }
        return (
          C || W.length || k || (W = A3(l, O / 2, c, p, y, w, k, !0, A)), W
        );
      }
      Nt("Anchor", $l);
      let qu = Go;
      function I3(l, s, c, p) {
        let y = [],
          w = l.image,
          k = w.pixelRatio,
          C = w.paddedRect.w - 2 * qu,
          A = w.paddedRect.h - 2 * qu,
          P = l.right - l.left,
          N = l.bottom - l.top,
          O = w.stretchX || [[0, C]],
          j = w.stretchY || [[0, A]],
          W = (xt, Ut) => xt + Ut[1] - Ut[0],
          K = O.reduce(W, 0),
          ie = j.reduce(W, 0),
          ae = C - K,
          pe = A - ie,
          Pe = 0,
          ye = K,
          Se = 0,
          We = ie,
          tt = 0,
          Dt = ae,
          Qt = 0,
          It = pe;
        if (w.content && p) {
          let xt = w.content;
          (Pe = r0(O, 0, xt[0])),
            (Se = r0(j, 0, xt[1])),
            (ye = r0(O, xt[0], xt[2])),
            (We = r0(j, xt[1], xt[3])),
            (tt = xt[0] - Pe),
            (Qt = xt[1] - Se),
            (Dt = xt[2] - xt[0] - ye),
            (It = xt[3] - xt[1] - We);
        }
        let Et = (xt, Ut, St, mt) => {
          let ni = n0(xt.stretch - Pe, ye, P, l.left),
            Wt = o0(xt.fixed - tt, Dt, xt.stretch, K),
            Oi = n0(Ut.stretch - Se, We, N, l.top),
            Ir = o0(Ut.fixed - Qt, It, Ut.stretch, ie),
            Nr = n0(St.stretch - Pe, ye, P, l.left),
            _n = o0(St.fixed - tt, Dt, St.stretch, K),
            ds = n0(mt.stretch - Se, We, N, l.top),
            Po = o0(mt.fixed - Qt, It, mt.stretch, ie),
            pn = new b(ni, Oi),
            Qn = new b(Nr, Oi),
            to = new b(Nr, ds),
            Do = new b(ni, ds),
            Lo = new b(Wt / k, Ir / k),
            xn = new b(_n / k, Po / k),
            wn = (s * Math.PI) / 180;
          if (wn) {
            let fo = Math.sin(wn),
              Wo = Math.cos(wn),
              Zo = [Wo, -fo, fo, Wo];
            pn._matMult(Zo), Qn._matMult(Zo), Do._matMult(Zo), to._matMult(Zo);
          }
          let po = xt.stretch + xt.fixed,
            Fo = Ut.stretch + Ut.fixed;
          return {
            tl: pn,
            tr: Qn,
            bl: Do,
            br: to,
            tex: {
              x: w.paddedRect.x + qu + po,
              y: w.paddedRect.y + qu + Fo,
              w: St.stretch + St.fixed - po,
              h: mt.stretch + mt.fixed - Fo,
            },
            writingMode: void 0,
            glyphOffset: [0, 0],
            sectionIndex: 0,
            pixelOffsetTL: Lo,
            pixelOffsetBR: xn,
            minFontScaleX: Dt / k / P,
            minFontScaleY: It / k / N,
            isSDF: c,
          };
        };
        if (p && (w.stretchX || w.stretchY)) {
          let xt = P3(O, ae, K),
            Ut = P3(j, pe, ie);
          for (let St = 0; St < xt.length - 1; St++) {
            let mt = xt[St],
              ni = xt[St + 1];
            for (let Wt = 0; Wt < Ut.length - 1; Wt++)
              y.push(Et(mt, Ut[Wt], ni, Ut[Wt + 1]));
          }
        } else y.push(Et({ fixed: 0, stretch: -1 }, { fixed: 0, stretch: -1 }, { fixed: 0, stretch: C + 1 }, { fixed: 0, stretch: A + 1 }));
        return y;
      }
      function r0(l, s, c) {
        let p = 0;
        for (let y of l)
          p += Math.max(s, Math.min(c, y[1])) - Math.max(s, Math.min(c, y[0]));
        return p;
      }
      function P3(l, s, c) {
        let p = [{ fixed: -qu, stretch: 0 }];
        for (let [y, w] of l) {
          let k = p[p.length - 1];
          p.push({ fixed: y - k.stretch, stretch: k.stretch }),
            p.push({ fixed: y - k.stretch, stretch: k.stretch + (w - y) });
        }
        return p.push({ fixed: s + qu, stretch: c }), p;
      }
      function n0(l, s, c, p) {
        return (l / s) * c + p;
      }
      function o0(l, s, c, p) {
        return l - (s * c) / p;
      }
      class s0 {
        constructor(s, c, p, y, w, k, C, A, P, N) {
          if (((this.boxStartIndex = s.length), P)) {
            let O = k.top,
              j = k.bottom,
              W = k.collisionPadding;
            W && ((O -= W[1]), (j += W[3]));
            let K = j - O;
            K > 0 && ((K = Math.max(10, K)), (this.circleDiameter = K));
          } else {
            let O = k.top * C - A[0],
              j = k.bottom * C + A[2],
              W = k.left * C - A[3],
              K = k.right * C + A[1],
              ie = k.collisionPadding;
            if (
              (ie &&
                ((W -= ie[0] * C),
                (O -= ie[1] * C),
                (K += ie[2] * C),
                (j += ie[3] * C)),
              N)
            ) {
              let ae = new b(W, O),
                pe = new b(K, O),
                Pe = new b(W, j),
                ye = new b(K, j),
                Se = (N * Math.PI) / 180;
              ae._rotate(Se),
                pe._rotate(Se),
                Pe._rotate(Se),
                ye._rotate(Se),
                (W = Math.min(ae.x, pe.x, Pe.x, ye.x)),
                (K = Math.max(ae.x, pe.x, Pe.x, ye.x)),
                (O = Math.min(ae.y, pe.y, Pe.y, ye.y)),
                (j = Math.max(ae.y, pe.y, Pe.y, ye.y));
            }
            s.emplaceBack(c.x, c.y, W, O, K, j, p, y, w);
          }
          this.boxEndIndex = s.length;
        }
      }
      class aS {
        constructor(s = [], c = lS) {
          if (
            ((this.data = s),
            (this.length = this.data.length),
            (this.compare = c),
            this.length > 0)
          )
            for (let p = (this.length >> 1) - 1; p >= 0; p--) this._down(p);
        }
        push(s) {
          this.data.push(s), this.length++, this._up(this.length - 1);
        }
        pop() {
          if (this.length === 0) return;
          let s = this.data[0],
            c = this.data.pop();
          return (
            this.length--,
            this.length > 0 && ((this.data[0] = c), this._down(0)),
            s
          );
        }
        peek() {
          return this.data[0];
        }
        _up(s) {
          let { data: c, compare: p } = this,
            y = c[s];
          for (; s > 0; ) {
            let w = (s - 1) >> 1,
              k = c[w];
            if (p(y, k) >= 0) break;
            (c[s] = k), (s = w);
          }
          c[s] = y;
        }
        _down(s) {
          let { data: c, compare: p } = this,
            y = this.length >> 1,
            w = c[s];
          for (; s < y; ) {
            let k = 1 + (s << 1),
              C = c[k],
              A = k + 1;
            if (
              (A < this.length && p(c[A], C) < 0 && ((k = A), (C = c[A])),
              p(C, w) >= 0)
            )
              break;
            (c[s] = C), (s = k);
          }
          c[s] = w;
        }
      }
      function lS(l, s) {
        return l < s ? -1 : l > s ? 1 : 0;
      }
      function cS(l, s = 1, c = !1) {
        let p = 1 / 0,
          y = 1 / 0,
          w = -1 / 0,
          k = -1 / 0,
          C = l[0];
        for (let W = 0; W < C.length; W++) {
          let K = C[W];
          (!W || K.x < p) && (p = K.x),
            (!W || K.y < y) && (y = K.y),
            (!W || K.x > w) && (w = K.x),
            (!W || K.y > k) && (k = K.y);
        }
        let A = Math.min(w - p, k - y),
          P = A / 2,
          N = new aS([], uS);
        if (A === 0) return new b(p, y);
        for (let W = p; W < w; W += A)
          for (let K = y; K < k; K += A) N.push(new $u(W + P, K + P, P, l));
        let O = (function (W) {
            let K = 0,
              ie = 0,
              ae = 0,
              pe = W[0];
            for (let Pe = 0, ye = pe.length, Se = ye - 1; Pe < ye; Se = Pe++) {
              let We = pe[Pe],
                tt = pe[Se],
                Dt = We.x * tt.y - tt.x * We.y;
              (ie += (We.x + tt.x) * Dt),
                (ae += (We.y + tt.y) * Dt),
                (K += 3 * Dt);
            }
            return new $u(ie / K, ae / K, 0, W);
          })(l),
          j = N.length;
        for (; N.length; ) {
          let W = N.pop();
          (W.d > O.d || !O.d) &&
            ((O = W),
            c &&
              console.log(
                "found best %d after %d probes",
                Math.round(1e4 * W.d) / 1e4,
                j
              )),
            W.max - O.d <= s ||
              ((P = W.h / 2),
              N.push(new $u(W.p.x - P, W.p.y - P, P, l)),
              N.push(new $u(W.p.x + P, W.p.y - P, P, l)),
              N.push(new $u(W.p.x - P, W.p.y + P, P, l)),
              N.push(new $u(W.p.x + P, W.p.y + P, P, l)),
              (j += 4));
        }
        return (
          c &&
            (console.log(`num probes: ${j}`),
            console.log(`best distance: ${O.d}`)),
          O.p
        );
      }
      function uS(l, s) {
        return s.max - l.max;
      }
      function $u(l, s, c, p) {
        (this.p = new b(l, s)),
          (this.h = c),
          (this.d = (function (y, w) {
            let k = !1,
              C = 1 / 0;
            for (let A = 0; A < w.length; A++) {
              let P = w[A];
              for (let N = 0, O = P.length, j = O - 1; N < O; j = N++) {
                let W = P[N],
                  K = P[j];
                W.y > y.y != K.y > y.y &&
                  y.x < ((K.x - W.x) * (y.y - W.y)) / (K.y - W.y) + W.x &&
                  (k = !k),
                  (C = Math.min(C, f_(y, W, K)));
              }
            }
            return (k ? 1 : -1) * Math.sqrt(C);
          })(this.p, p)),
          (this.max = this.d + this.h * Math.SQRT2);
      }
      var eo;
      (o.ap = void 0),
        ((eo = o.ap || (o.ap = {}))[(eo.center = 1)] = "center"),
        (eo[(eo.left = 2)] = "left"),
        (eo[(eo.right = 3)] = "right"),
        (eo[(eo.top = 4)] = "top"),
        (eo[(eo.bottom = 5)] = "bottom"),
        (eo[(eo["top-left"] = 6)] = "top-left"),
        (eo[(eo["top-right"] = 7)] = "top-right"),
        (eo[(eo["bottom-left"] = 8)] = "bottom-left"),
        (eo[(eo["bottom-right"] = 9)] = "bottom-right");
      let Ql = 7,
        q1 = Number.POSITIVE_INFINITY;
      function D3(l, s) {
        return s[1] !== q1
          ? (function (c, p, y) {
              let w = 0,
                k = 0;
              switch (((p = Math.abs(p)), (y = Math.abs(y)), c)) {
                case "top-right":
                case "top-left":
                case "top":
                  k = y - Ql;
                  break;
                case "bottom-right":
                case "bottom-left":
                case "bottom":
                  k = -y + Ql;
              }
              switch (c) {
                case "top-right":
                case "bottom-right":
                case "right":
                  w = -p;
                  break;
                case "top-left":
                case "bottom-left":
                case "left":
                  w = p;
              }
              return [w, k];
            })(l, s[0], s[1])
          : (function (c, p) {
              let y = 0,
                w = 0;
              p < 0 && (p = 0);
              let k = p / Math.SQRT2;
              switch (c) {
                case "top-right":
                case "top-left":
                  w = k - Ql;
                  break;
                case "bottom-right":
                case "bottom-left":
                  w = -k + Ql;
                  break;
                case "bottom":
                  w = -p + Ql;
                  break;
                case "top":
                  w = p - Ql;
              }
              switch (c) {
                case "top-right":
                case "bottom-right":
                  y = -k;
                  break;
                case "top-left":
                case "bottom-left":
                  y = k;
                  break;
                case "left":
                  y = p;
                  break;
                case "right":
                  y = -p;
              }
              return [y, w];
            })(l, s[0]);
      }
      function L3(l, s, c) {
        var p;
        let y = l.layout,
          w =
            (p = y.get("text-variable-anchor-offset")) === null || p === void 0
              ? void 0
              : p.evaluate(s, {}, c);
        if (w) {
          let C = w.values,
            A = [];
          for (let P = 0; P < C.length; P += 2) {
            let N = (A[P] = C[P]),
              O = C[P + 1].map((j) => j * vn);
            N.startsWith("top")
              ? (O[1] -= Ql)
              : N.startsWith("bottom") && (O[1] += Ql),
              (A[P + 1] = O);
          }
          return new dn(A);
        }
        let k = y.get("text-variable-anchor");
        if (k) {
          let C;
          C =
            l._unevaluatedLayout.getValue("text-radial-offset") !== void 0
              ? [y.get("text-radial-offset").evaluate(s, {}, c) * vn, q1]
              : y
                  .get("text-offset")
                  .evaluate(s, {}, c)
                  .map((P) => P * vn);
          let A = [];
          for (let P of k) A.push(P, D3(P, C));
          return new dn(A);
        }
        return null;
      }
      function $1(l) {
        switch (l) {
          case "right":
          case "top-right":
          case "bottom-right":
            return "right";
          case "left":
          case "top-left":
          case "bottom-left":
            return "left";
        }
        return "center";
      }
      function dS(l, s, c, p, y, w, k, C, A, P, N) {
        let O = w.textMaxSize.evaluate(s, {});
        O === void 0 && (O = k);
        let j = l.layers[0].layout,
          W = j.get("icon-offset").evaluate(s, {}, N),
          K = z3(c.horizontal),
          ie = k / 24,
          ae = l.tilePixelRatio * ie,
          pe = (l.tilePixelRatio * O) / 24,
          Pe = l.tilePixelRatio * C,
          ye = l.tilePixelRatio * j.get("symbol-spacing"),
          Se = j.get("text-padding") * l.tilePixelRatio,
          We = (function (mt, ni, Wt, Oi = 1) {
            let Ir = mt.get("icon-padding").evaluate(ni, {}, Wt),
              Nr = Ir && Ir.values;
            return [Nr[0] * Oi, Nr[1] * Oi, Nr[2] * Oi, Nr[3] * Oi];
          })(j, s, N, l.tilePixelRatio),
          tt = (j.get("text-max-angle") / 180) * Math.PI,
          Dt =
            j.get("text-rotation-alignment") !== "viewport" &&
            j.get("symbol-placement") !== "point",
          Qt =
            j.get("icon-rotation-alignment") === "map" &&
            j.get("symbol-placement") !== "point",
          It = j.get("symbol-placement"),
          Et = ye / 2,
          xt = j.get("icon-text-fit"),
          Ut;
        p &&
          xt !== "none" &&
          (l.allowVerticalPlacement &&
            c.vertical &&
            (Ut = n3(p, c.vertical, xt, j.get("icon-text-fit-padding"), W, ie)),
          K && (p = n3(p, K, xt, j.get("icon-text-fit-padding"), W, ie)));
        let St = (mt, ni) => {
          ni.x < 0 ||
            ni.x >= Ui ||
            ni.y < 0 ||
            ni.y >= Ui ||
            (function (
              Wt,
              Oi,
              Ir,
              Nr,
              _n,
              ds,
              Po,
              pn,
              Qn,
              to,
              Do,
              Lo,
              xn,
              wn,
              po,
              Fo,
              fo,
              Wo,
              Zo,
              kn,
              Hi,
              mo,
              io,
              Sn,
              Ds
            ) {
              let Js = Wt.addToLineVertexArray(Oi, Ir),
                Xs,
                $a,
                Ls,
                _s,
                Ko = 0,
                Qa = 0,
                Bh = 0,
                R3 = 0,
                Y1 = -1,
                eg = -1,
                Ga = {},
                U3 = Ti("");
              if (Wt.allowVerticalPlacement && Nr.vertical) {
                let go = pn.layout.get("text-rotate").evaluate(Hi, {}, Sn) + 90;
                (Ls = new s0(Qn, Oi, to, Do, Lo, Nr.vertical, xn, wn, po, go)),
                  Po && (_s = new s0(Qn, Oi, to, Do, Lo, Po, fo, Wo, po, go));
              }
              if (_n) {
                let go = pn.layout.get("icon-rotate").evaluate(Hi, {}),
                  xs = pn.layout.get("icon-text-fit") !== "none",
                  Ec = I3(_n, go, io, xs),
                  ea = Po ? I3(Po, go, io, xs) : void 0;
                ($a = new s0(Qn, Oi, to, Do, Lo, _n, fo, Wo, !1, go)),
                  (Ko = 4 * Ec.length);
                let Tc = Wt.iconSizeData,
                  ba = null;
                Tc.kind === "source"
                  ? ((ba = [ya * pn.layout.get("icon-size").evaluate(Hi, {})]),
                    ba[0] > Hl &&
                      qe(
                        `${Wt.layerIds[0]}: Value for "icon-size" is >= ${Fh}. Reduce your "icon-size".`
                      ))
                  : Tc.kind === "composite" &&
                    ((ba = [
                      ya * mo.compositeIconSizes[0].evaluate(Hi, {}, Sn),
                      ya * mo.compositeIconSizes[1].evaluate(Hi, {}, Sn),
                    ]),
                    (ba[0] > Hl || ba[1] > Hl) &&
                      qe(
                        `${Wt.layerIds[0]}: Value for "icon-size" is >= ${Fh}. Reduce your "icon-size".`
                      )),
                  Wt.addSymbols(
                    Wt.icon,
                    Ec,
                    ba,
                    kn,
                    Zo,
                    Hi,
                    o.ah.none,
                    Oi,
                    Js.lineStartIndex,
                    Js.lineLength,
                    -1,
                    Sn
                  ),
                  (Y1 = Wt.icon.placedSymbolArray.length - 1),
                  ea &&
                    ((Qa = 4 * ea.length),
                    Wt.addSymbols(
                      Wt.icon,
                      ea,
                      ba,
                      kn,
                      Zo,
                      Hi,
                      o.ah.vertical,
                      Oi,
                      Js.lineStartIndex,
                      Js.lineLength,
                      -1,
                      Sn
                    ),
                    (eg = Wt.icon.placedSymbolArray.length - 1));
              }
              let V3 = Object.keys(Nr.horizontal);
              for (let go of V3) {
                let xs = Nr.horizontal[go];
                if (!Xs) {
                  U3 = Ti(xs.text);
                  let ea = pn.layout.get("text-rotate").evaluate(Hi, {}, Sn);
                  Xs = new s0(Qn, Oi, to, Do, Lo, xs, xn, wn, po, ea);
                }
                let Ec = xs.positionedLines.length === 1;
                if (
                  ((Bh += F3(
                    Wt,
                    Oi,
                    xs,
                    ds,
                    pn,
                    po,
                    Hi,
                    Fo,
                    Js,
                    Nr.vertical ? o.ah.horizontal : o.ah.horizontalOnly,
                    Ec ? V3 : [go],
                    Ga,
                    Y1,
                    mo,
                    Sn
                  )),
                  Ec)
                )
                  break;
              }
              Nr.vertical &&
                (R3 += F3(
                  Wt,
                  Oi,
                  Nr.vertical,
                  ds,
                  pn,
                  po,
                  Hi,
                  Fo,
                  Js,
                  o.ah.vertical,
                  ["vertical"],
                  Ga,
                  eg,
                  mo,
                  Sn
                ));
              let fS = Xs ? Xs.boxStartIndex : Wt.collisionBoxArray.length,
                mS = Xs ? Xs.boxEndIndex : Wt.collisionBoxArray.length,
                gS = Ls ? Ls.boxStartIndex : Wt.collisionBoxArray.length,
                yS = Ls ? Ls.boxEndIndex : Wt.collisionBoxArray.length,
                bS = $a ? $a.boxStartIndex : Wt.collisionBoxArray.length,
                vS = $a ? $a.boxEndIndex : Wt.collisionBoxArray.length,
                _S = _s ? _s.boxStartIndex : Wt.collisionBoxArray.length,
                xS = _s ? _s.boxEndIndex : Wt.collisionBoxArray.length,
                Ys = -1,
                l0 = (go, xs) =>
                  go && go.circleDiameter
                    ? Math.max(go.circleDiameter, xs)
                    : xs;
              (Ys = l0(Xs, Ys)),
                (Ys = l0(Ls, Ys)),
                (Ys = l0($a, Ys)),
                (Ys = l0(_s, Ys));
              let j3 = Ys > -1 ? 1 : 0;
              j3 && (Ys *= Ds / vn),
                Wt.glyphOffsetArray.length >= Hu.MAX_GLYPHS &&
                  qe(
                    "Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"
                  ),
                Hi.sortKey !== void 0 &&
                  Wt.addToSortKeyRanges(Wt.symbolInstances.length, Hi.sortKey);
              let wS = L3(pn, Hi, Sn),
                [kS, SS] = (function (go, xs) {
                  let Ec = go.length,
                    ea = xs?.values;
                  if (ea?.length > 0)
                    for (let Tc = 0; Tc < ea.length; Tc += 2) {
                      let ba = ea[Tc + 1];
                      go.emplaceBack(o.ap[ea[Tc]], ba[0], ba[1]);
                    }
                  return [Ec, go.length];
                })(Wt.textAnchorOffsets, wS);
              Wt.symbolInstances.emplaceBack(
                Oi.x,
                Oi.y,
                Ga.right >= 0 ? Ga.right : -1,
                Ga.center >= 0 ? Ga.center : -1,
                Ga.left >= 0 ? Ga.left : -1,
                Ga.vertical || -1,
                Y1,
                eg,
                U3,
                fS,
                mS,
                gS,
                yS,
                bS,
                vS,
                _S,
                xS,
                to,
                Bh,
                R3,
                Ko,
                Qa,
                j3,
                0,
                xn,
                Ys,
                kS,
                SS
              );
            })(
              l,
              ni,
              mt,
              c,
              p,
              y,
              Ut,
              l.layers[0],
              l.collisionBoxArray,
              s.index,
              s.sourceLayerIndex,
              l.index,
              ae,
              [Se, Se, Se, Se],
              Dt,
              A,
              Pe,
              We,
              Qt,
              W,
              s,
              w,
              P,
              N,
              k
            );
        };
        if (It === "line")
          for (let mt of S3(s.geometry, 0, 0, Ui, Ui)) {
            let ni = sS(
              mt,
              ye,
              tt,
              c.vertical || K,
              p,
              24,
              pe,
              l.overscaling,
              Ui
            );
            for (let Wt of ni) (K && hS(l, K.text, Et, Wt)) || St(mt, Wt);
          }
        else if (It === "line-center") {
          for (let mt of s.geometry)
            if (mt.length > 1) {
              let ni = oS(mt, tt, c.vertical || K, p, 24, pe);
              ni && St(mt, ni);
            }
        } else if (s.type === "Polygon")
          for (let mt of k1(s.geometry, 0)) {
            let ni = cS(mt, 16);
            St(mt[0], new $l(ni.x, ni.y, 0));
          }
        else if (s.type === "LineString")
          for (let mt of s.geometry) St(mt, new $l(mt[0].x, mt[0].y, 0));
        else if (s.type === "Point")
          for (let mt of s.geometry)
            for (let ni of mt) St([ni], new $l(ni.x, ni.y, 0));
      }
      function F3(l, s, c, p, y, w, k, C, A, P, N, O, j, W, K) {
        let ie = (function (Pe, ye, Se, We, tt, Dt, Qt, It) {
            let Et =
                (We.layout.get("text-rotate").evaluate(Dt, {}) * Math.PI) / 180,
              xt = [];
            for (let Ut of ye.positionedLines)
              for (let St of Ut.positionedGlyphs) {
                if (!St.rect) continue;
                let mt = St.rect || {},
                  ni = J_ + 1,
                  Wt = !0,
                  Oi = 1,
                  Ir = 0,
                  Nr = (tt || It) && St.vertical,
                  _n = (St.metrics.advance * St.scale) / 2;
                if (
                  (It &&
                    ye.verticalizable &&
                    (Ir =
                      Ut.lineOffset / 2 -
                      (St.imageName
                        ? -(vn - St.metrics.width * St.scale) / 2
                        : (St.scale - 1) * vn)),
                  St.imageName)
                ) {
                  let kn = Qt[St.imageName];
                  (Wt = kn.sdf), (Oi = kn.pixelRatio), (ni = Go / Oi);
                }
                let ds = tt ? [St.x + _n, St.y] : [0, 0],
                  Po = tt ? [0, 0] : [St.x + _n + Se[0], St.y + Se[1] - Ir],
                  pn = [0, 0];
                Nr && ((pn = Po), (Po = [0, 0]));
                let Qn = St.metrics.isDoubleResolution ? 2 : 1,
                  to = (St.metrics.left - ni) * St.scale - _n + Po[0],
                  Do = (-St.metrics.top - ni) * St.scale + Po[1],
                  Lo = to + ((mt.w / Qn) * St.scale) / Oi,
                  xn = Do + ((mt.h / Qn) * St.scale) / Oi,
                  wn = new b(to, Do),
                  po = new b(Lo, Do),
                  Fo = new b(to, xn),
                  fo = new b(Lo, xn);
                if (Nr) {
                  let kn = new b(-_n, _n - Dh),
                    Hi = -Math.PI / 2,
                    mo = vn / 2 - _n,
                    io = new b(5 - Dh - mo, -(St.imageName ? mo : 0)),
                    Sn = new b(...pn);
                  wn._rotateAround(Hi, kn)._add(io)._add(Sn),
                    po._rotateAround(Hi, kn)._add(io)._add(Sn),
                    Fo._rotateAround(Hi, kn)._add(io)._add(Sn),
                    fo._rotateAround(Hi, kn)._add(io)._add(Sn);
                }
                if (Et) {
                  let kn = Math.sin(Et),
                    Hi = Math.cos(Et),
                    mo = [Hi, -kn, kn, Hi];
                  wn._matMult(mo),
                    po._matMult(mo),
                    Fo._matMult(mo),
                    fo._matMult(mo);
                }
                let Wo = new b(0, 0),
                  Zo = new b(0, 0);
                xt.push({
                  tl: wn,
                  tr: po,
                  bl: Fo,
                  br: fo,
                  tex: mt,
                  writingMode: ye.writingMode,
                  glyphOffset: ds,
                  sectionIndex: St.sectionIndex,
                  isSDF: Wt,
                  pixelOffsetTL: Wo,
                  pixelOffsetBR: Zo,
                  minFontScaleX: 0,
                  minFontScaleY: 0,
                });
              }
            return xt;
          })(0, c, C, y, w, k, p, l.allowVerticalPlacement),
          ae = l.textSizeData,
          pe = null;
        ae.kind === "source"
          ? ((pe = [ya * y.layout.get("text-size").evaluate(k, {})]),
            pe[0] > Hl &&
              qe(
                `${l.layerIds[0]}: Value for "text-size" is >= ${Fh}. Reduce your "text-size".`
              ))
          : ae.kind === "composite" &&
            ((pe = [
              ya * W.compositeTextSizes[0].evaluate(k, {}, K),
              ya * W.compositeTextSizes[1].evaluate(k, {}, K),
            ]),
            (pe[0] > Hl || pe[1] > Hl) &&
              qe(
                `${l.layerIds[0]}: Value for "text-size" is >= ${Fh}. Reduce your "text-size".`
              )),
          l.addSymbols(
            l.text,
            ie,
            pe,
            C,
            w,
            k,
            P,
            s,
            A.lineStartIndex,
            A.lineLength,
            j,
            K
          );
        for (let Pe of N) O[Pe] = l.text.placedSymbolArray.length - 1;
        return 4 * ie.length;
      }
      function z3(l) {
        for (let s in l) return l[s];
        return null;
      }
      function hS(l, s, c, p) {
        let y = l.compareText;
        if (s in y) {
          let w = y[s];
          for (let k = w.length - 1; k >= 0; k--)
            if (p.dist(w[k]) < c) return !0;
        } else y[s] = [];
        return y[s].push(p), !1;
      }
      let N3 = [
        Int8Array,
        Uint8Array,
        Uint8ClampedArray,
        Int16Array,
        Uint16Array,
        Int32Array,
        Uint32Array,
        Float32Array,
        Float64Array,
      ];
      class Q1 {
        static from(s) {
          if (!(s instanceof ArrayBuffer))
            throw new Error("Data must be an instance of ArrayBuffer.");
          let [c, p] = new Uint8Array(s, 0, 2);
          if (c !== 219)
            throw new Error("Data does not appear to be in a KDBush format.");
          let y = p >> 4;
          if (y !== 1) throw new Error(`Got v${y} data when expected v1.`);
          let w = N3[15 & p];
          if (!w) throw new Error("Unrecognized array type.");
          let [k] = new Uint16Array(s, 2, 1),
            [C] = new Uint32Array(s, 4, 1);
          return new Q1(C, k, w, s);
        }
        constructor(s, c = 64, p = Float64Array, y) {
          if (isNaN(s) || s < 0)
            throw new Error(`Unpexpected numItems value: ${s}.`);
          (this.numItems = +s),
            (this.nodeSize = Math.min(Math.max(+c, 2), 65535)),
            (this.ArrayType = p),
            (this.IndexArrayType = s < 65536 ? Uint16Array : Uint32Array);
          let w = N3.indexOf(this.ArrayType),
            k = 2 * s * this.ArrayType.BYTES_PER_ELEMENT,
            C = s * this.IndexArrayType.BYTES_PER_ELEMENT,
            A = (8 - (C % 8)) % 8;
          if (w < 0) throw new Error(`Unexpected typed array class: ${p}.`);
          y && y instanceof ArrayBuffer
            ? ((this.data = y),
              (this.ids = new this.IndexArrayType(this.data, 8, s)),
              (this.coords = new this.ArrayType(this.data, 8 + C + A, 2 * s)),
              (this._pos = 2 * s),
              (this._finished = !0))
            : ((this.data = new ArrayBuffer(8 + k + C + A)),
              (this.ids = new this.IndexArrayType(this.data, 8, s)),
              (this.coords = new this.ArrayType(this.data, 8 + C + A, 2 * s)),
              (this._pos = 0),
              (this._finished = !1),
              new Uint8Array(this.data, 0, 2).set([219, 16 + w]),
              (new Uint16Array(this.data, 2, 1)[0] = c),
              (new Uint32Array(this.data, 4, 1)[0] = s));
        }
        add(s, c) {
          let p = this._pos >> 1;
          return (
            (this.ids[p] = p),
            (this.coords[this._pos++] = s),
            (this.coords[this._pos++] = c),
            p
          );
        }
        finish() {
          let s = this._pos >> 1;
          if (s !== this.numItems)
            throw new Error(`Added ${s} items when expected ${this.numItems}.`);
          return (
            G1(this.ids, this.coords, this.nodeSize, 0, this.numItems - 1, 0),
            (this._finished = !0),
            this
          );
        }
        range(s, c, p, y) {
          if (!this._finished)
            throw new Error("Data not yet indexed - call index.finish().");
          let { ids: w, coords: k, nodeSize: C } = this,
            A = [0, w.length - 1, 0],
            P = [];
          for (; A.length; ) {
            let N = A.pop() || 0,
              O = A.pop() || 0,
              j = A.pop() || 0;
            if (O - j <= C) {
              for (let ae = j; ae <= O; ae++) {
                let pe = k[2 * ae],
                  Pe = k[2 * ae + 1];
                pe >= s && pe <= p && Pe >= c && Pe <= y && P.push(w[ae]);
              }
              continue;
            }
            let W = (j + O) >> 1,
              K = k[2 * W],
              ie = k[2 * W + 1];
            K >= s && K <= p && ie >= c && ie <= y && P.push(w[W]),
              (N === 0 ? s <= K : c <= ie) &&
                (A.push(j), A.push(W - 1), A.push(1 - N)),
              (N === 0 ? p >= K : y >= ie) &&
                (A.push(W + 1), A.push(O), A.push(1 - N));
          }
          return P;
        }
        within(s, c, p) {
          if (!this._finished)
            throw new Error("Data not yet indexed - call index.finish().");
          let { ids: y, coords: w, nodeSize: k } = this,
            C = [0, y.length - 1, 0],
            A = [],
            P = p * p;
          for (; C.length; ) {
            let N = C.pop() || 0,
              O = C.pop() || 0,
              j = C.pop() || 0;
            if (O - j <= k) {
              for (let ae = j; ae <= O; ae++)
                B3(w[2 * ae], w[2 * ae + 1], s, c) <= P && A.push(y[ae]);
              continue;
            }
            let W = (j + O) >> 1,
              K = w[2 * W],
              ie = w[2 * W + 1];
            B3(K, ie, s, c) <= P && A.push(y[W]),
              (N === 0 ? s - p <= K : c - p <= ie) &&
                (C.push(j), C.push(W - 1), C.push(1 - N)),
              (N === 0 ? s + p >= K : c + p >= ie) &&
                (C.push(W + 1), C.push(O), C.push(1 - N));
          }
          return A;
        }
      }
      function G1(l, s, c, p, y, w) {
        if (y - p <= c) return;
        let k = (p + y) >> 1;
        O3(l, s, k, p, y, w),
          G1(l, s, c, p, k - 1, 1 - w),
          G1(l, s, c, k + 1, y, 1 - w);
      }
      function O3(l, s, c, p, y, w) {
        for (; y > p; ) {
          if (y - p > 600) {
            let P = y - p + 1,
              N = c - p + 1,
              O = Math.log(P),
              j = 0.5 * Math.exp((2 * O) / 3),
              W =
                0.5 *
                Math.sqrt((O * j * (P - j)) / P) *
                (N - P / 2 < 0 ? -1 : 1);
            O3(
              l,
              s,
              c,
              Math.max(p, Math.floor(c - (N * j) / P + W)),
              Math.min(y, Math.floor(c + ((P - N) * j) / P + W)),
              w
            );
          }
          let k = s[2 * c + w],
            C = p,
            A = y;
          for (Nh(l, s, p, c), s[2 * y + w] > k && Nh(l, s, p, y); C < A; ) {
            for (Nh(l, s, C, A), C++, A--; s[2 * C + w] < k; ) C++;
            for (; s[2 * A + w] > k; ) A--;
          }
          s[2 * p + w] === k ? Nh(l, s, p, A) : (A++, Nh(l, s, A, y)),
            A <= c && (p = A + 1),
            c <= A && (y = A - 1);
        }
      }
      function Nh(l, s, c, p) {
        W1(l, c, p), W1(s, 2 * c, 2 * p), W1(s, 2 * c + 1, 2 * p + 1);
      }
      function W1(l, s, c) {
        let p = l[s];
        (l[s] = l[c]), (l[c] = p);
      }
      function B3(l, s, c, p) {
        let y = l - c,
          w = s - p;
        return y * y + w * w;
      }
      var Z1;
      (o.bd = void 0),
        ((Z1 = o.bd || (o.bd = {})).create = "create"),
        (Z1.load = "load"),
        (Z1.fullLoad = "fullLoad");
      let a0 = null,
        Oh = [],
        K1 = 1e3 / 60,
        J1 = "loadTime",
        X1 = "fullLoadTime",
        pS = {
          mark(l) {
            performance.mark(l);
          },
          frame(l) {
            let s = l;
            a0 != null && Oh.push(s - a0), (a0 = s);
          },
          clearMetrics() {
            (a0 = null),
              (Oh = []),
              performance.clearMeasures(J1),
              performance.clearMeasures(X1);
            for (let l in o.bd) performance.clearMarks(o.bd[l]);
          },
          getPerformanceMetrics() {
            performance.measure(J1, o.bd.create, o.bd.load),
              performance.measure(X1, o.bd.create, o.bd.fullLoad);
            let l = performance.getEntriesByName(J1)[0].duration,
              s = performance.getEntriesByName(X1)[0].duration,
              c = Oh.length,
              p = 1 / (Oh.reduce((w, k) => w + k, 0) / c / 1e3),
              y = Oh.filter((w) => w > K1).reduce(
                (w, k) => w + (k - K1) / K1,
                0
              );
            return {
              loadTime: l,
              fullLoadTime: s,
              fps: p,
              percentDroppedFrames: (y / (c + y)) * 100,
              totalFrames: c,
            };
          },
        };
      (o.$ = nt),
        (o.A = Ou),
        (o.B = function (l) {
          if (qt == null) {
            let s = l.navigator ? l.navigator.userAgent : null;
            qt =
              !!l.safari ||
              !(
                !s ||
                !(
                  /\b(iPad|iPhone|iPod)\b/.test(s) ||
                  (s.match("Safari") && !s.match("Chrome"))
                )
              );
          }
          return qt;
        }),
        (o.C = class {
          constructor(l, s) {
            (this.target = l),
              (this.mapId = s),
              (this.resolveRejects = {}),
              (this.tasks = {}),
              (this.taskQueue = []),
              (this.abortControllers = {}),
              (this.messageHandlers = {}),
              (this.invoker = new rS(() => this.process())),
              (this.subscription = (function (c, p, y, w) {
                return (
                  c.addEventListener(p, y, !1),
                  {
                    unsubscribe: () => {
                      c.removeEventListener(p, y, !1);
                    },
                  }
                );
              })(this.target, "message", (c) => this.receive(c))),
              (this.globalScope = Gt(self) ? l : window);
          }
          registerMessageHandler(l, s) {
            this.messageHandlers[l] = s;
          }
          sendAsync(l, s) {
            return new Promise((c, p) => {
              let y = Math.round(1e18 * Math.random())
                .toString(36)
                .substring(0, 10);
              (this.resolveRejects[y] = { resolve: c, reject: p }),
                s &&
                  s.signal.addEventListener(
                    "abort",
                    () => {
                      delete this.resolveRejects[y];
                      let C = {
                        id: y,
                        type: "<cancel>",
                        origin: location.origin,
                        targetMapId: l.targetMapId,
                        sourceMapId: this.mapId,
                      };
                      this.target.postMessage(C);
                    },
                    { once: !0 }
                  );
              let w = [],
                k = Object.assign(Object.assign({}, l), {
                  id: y,
                  sourceMapId: this.mapId,
                  origin: location.origin,
                  data: za(l.data, w),
                });
              this.target.postMessage(k, { transfer: w });
            });
          }
          receive(l) {
            let s = l.data,
              c = s.id;
            if (
              !(
                (s.origin !== "file://" &&
                  location.origin !== "file://" &&
                  s.origin !== location.origin) ||
                (s.targetMapId && this.mapId !== s.targetMapId)
              )
            ) {
              if (s.type === "<cancel>") {
                delete this.tasks[c];
                let p = this.abortControllers[c];
                return delete this.abortControllers[c], void (p && p.abort());
              }
              if (Gt(self) || s.mustQueue)
                return (
                  (this.tasks[c] = s),
                  this.taskQueue.push(c),
                  void this.invoker.trigger()
                );
              this.processTask(c, s);
            }
          }
          process() {
            if (this.taskQueue.length === 0) return;
            let l = this.taskQueue.shift(),
              s = this.tasks[l];
            delete this.tasks[l],
              this.taskQueue.length > 0 && this.invoker.trigger(),
              s && this.processTask(l, s);
          }
          processTask(l, s) {
            return n(this, void 0, void 0, function* () {
              if (s.type === "<response>") {
                let y = this.resolveRejects[l];
                return (
                  delete this.resolveRejects[l],
                  y
                    ? void (s.error
                        ? y.reject(Nl(s.error))
                        : y.resolve(Nl(s.data)))
                    : void 0
                );
              }
              if (!this.messageHandlers[s.type])
                return void this.completeTask(
                  l,
                  new Error(
                    `Could not find a registered handler for ${
                      s.type
                    }, map ID: ${this.mapId}, available handlers: ${Object.keys(
                      this.messageHandlers
                    ).join(", ")}`
                  )
                );
              let c = Nl(s.data),
                p = new AbortController();
              this.abortControllers[l] = p;
              try {
                let y = yield this.messageHandlers[s.type](s.sourceMapId, c, p);
                this.completeTask(l, null, y);
              } catch (y) {
                this.completeTask(l, y);
              }
            });
          }
          completeTask(l, s, c) {
            let p = [];
            delete this.abortControllers[l];
            let y = {
              id: l,
              type: "<response>",
              sourceMapId: this.mapId,
              origin: location.origin,
              error: s ? za(s) : null,
              data: za(c, p),
            };
            this.target.postMessage(y, { transfer: p });
          }
          remove() {
            this.invoker.remove(), this.subscription.unsubscribe();
          }
        }),
        (o.D = Kt),
        (o.E = Ai),
        (o.F = function () {
          var l = new Ou(16);
          return (
            Ou != Float32Array &&
              ((l[1] = 0),
              (l[2] = 0),
              (l[3] = 0),
              (l[4] = 0),
              (l[6] = 0),
              (l[7] = 0),
              (l[8] = 0),
              (l[9] = 0),
              (l[11] = 0),
              (l[12] = 0),
              (l[13] = 0),
              (l[14] = 0)),
            (l[0] = 1),
            (l[5] = 1),
            (l[10] = 1),
            (l[15] = 1),
            l
          );
        }),
        (o.G = Bt),
        (o.H = function (l, s, c) {
          var p,
            y,
            w,
            k,
            C,
            A,
            P,
            N,
            O,
            j,
            W,
            K,
            ie = c[0],
            ae = c[1],
            pe = c[2];
          return (
            s === l
              ? ((l[12] = s[0] * ie + s[4] * ae + s[8] * pe + s[12]),
                (l[13] = s[1] * ie + s[5] * ae + s[9] * pe + s[13]),
                (l[14] = s[2] * ie + s[6] * ae + s[10] * pe + s[14]),
                (l[15] = s[3] * ie + s[7] * ae + s[11] * pe + s[15]))
              : ((y = s[1]),
                (w = s[2]),
                (k = s[3]),
                (C = s[4]),
                (A = s[5]),
                (P = s[6]),
                (N = s[7]),
                (O = s[8]),
                (j = s[9]),
                (W = s[10]),
                (K = s[11]),
                (l[0] = p = s[0]),
                (l[1] = y),
                (l[2] = w),
                (l[3] = k),
                (l[4] = C),
                (l[5] = A),
                (l[6] = P),
                (l[7] = N),
                (l[8] = O),
                (l[9] = j),
                (l[10] = W),
                (l[11] = K),
                (l[12] = p * ie + C * ae + O * pe + s[12]),
                (l[13] = y * ie + A * ae + j * pe + s[13]),
                (l[14] = w * ie + P * ae + W * pe + s[14]),
                (l[15] = k * ie + N * ae + K * pe + s[15])),
            l
          );
        }),
        (o.I = L1),
        (o.J = function (l, s, c) {
          var p = c[0],
            y = c[1],
            w = c[2];
          return (
            (l[0] = s[0] * p),
            (l[1] = s[1] * p),
            (l[2] = s[2] * p),
            (l[3] = s[3] * p),
            (l[4] = s[4] * y),
            (l[5] = s[5] * y),
            (l[6] = s[6] * y),
            (l[7] = s[7] * y),
            (l[8] = s[8] * w),
            (l[9] = s[9] * w),
            (l[10] = s[10] * w),
            (l[11] = s[11] * w),
            (l[12] = s[12]),
            (l[13] = s[13]),
            (l[14] = s[14]),
            (l[15] = s[15]),
            l
          );
        }),
        (o.K = b_),
        (o.L = function (l, s) {
          let c = {};
          for (let p = 0; p < s.length; p++) {
            let y = s[p];
            y in l && (c[y] = l[y]);
          }
          return c;
        }),
        (o.M = ql),
        (o.N = p3),
        (o.O = f3),
        (o.P = b),
        (o.Q = vs),
        (o.R = bs),
        (o.S = q),
        (o.T = sh),
        (o.U = Q),
        (o.V = ht),
        (o.W = Ui),
        (o.X = an),
        (o.Y = i0),
        (o.Z = class extends ma {}),
        (o._ = n),
        (o.a = Re),
        (o.a$ = function (l, s, c) {
          return (
            (l[0] = s[0] * c[0]),
            (l[1] = s[1] * c[1]),
            (l[2] = s[2] * c[2]),
            (l[3] = s[3] * c[3]),
            l
          );
        }),
        (o.a0 = H1),
        (o.a1 = at),
        (o.a2 = (l) => {
          let s = window.document.createElement("video");
          return (
            (s.muted = !0),
            new Promise((c) => {
              s.onloadstart = () => {
                c(s);
              };
              for (let p of l) {
                let y = window.document.createElement("source");
                ii(p) || (s.crossOrigin = "Anonymous"),
                  (y.src = p),
                  s.appendChild(y);
              }
            })
          );
        }),
        (o.a3 = function () {
          return Te++;
        }),
        (o.a4 = Bf),
        (o.a5 = Hu),
        (o.a6 = ku),
        (o.a7 = ja),
        (o.a8 = Mr),
        (o.a9 = _3),
        (o.aA = De),
        (o.aB = function (l, s) {
          if (!l) return [{ command: "setStyle", args: [s] }];
          let c = [];
          try {
            if (!ui(l.version, s.version))
              return [{ command: "setStyle", args: [s] }];
            ui(l.center, s.center) ||
              c.push({ command: "setCenter", args: [s.center] }),
              ui(l.zoom, s.zoom) ||
                c.push({ command: "setZoom", args: [s.zoom] }),
              ui(l.bearing, s.bearing) ||
                c.push({ command: "setBearing", args: [s.bearing] }),
              ui(l.pitch, s.pitch) ||
                c.push({ command: "setPitch", args: [s.pitch] }),
              ui(l.sprite, s.sprite) ||
                c.push({ command: "setSprite", args: [s.sprite] }),
              ui(l.glyphs, s.glyphs) ||
                c.push({ command: "setGlyphs", args: [s.glyphs] }),
              ui(l.transition, s.transition) ||
                c.push({ command: "setTransition", args: [s.transition] }),
              ui(l.light, s.light) ||
                c.push({ command: "setLight", args: [s.light] }),
              ui(l.terrain, s.terrain) ||
                c.push({ command: "setTerrain", args: [s.terrain] }),
              ui(l.sky, s.sky) || c.push({ command: "setSky", args: [s.sky] });
            let p = {},
              y = [];
            (function (k, C, A, P) {
              let N;
              for (N in ((C = C || {}), (k = k || {})))
                Object.prototype.hasOwnProperty.call(k, N) &&
                  (Object.prototype.hasOwnProperty.call(C, N) || en(N, A, P));
              for (N in C)
                Object.prototype.hasOwnProperty.call(C, N) &&
                  (Object.prototype.hasOwnProperty.call(k, N)
                    ? ui(k[N], C[N]) ||
                      (k[N].type === "geojson" &&
                      C[N].type === "geojson" &&
                      yn(k, C, N)
                        ? pr(A, {
                            command: "setGeoJSONSourceData",
                            args: [N, C[N].data],
                          })
                        : tn(N, C, A, P))
                    : Er(N, C, A));
            })(l.sources, s.sources, y, p);
            let w = [];
            l.layers &&
              l.layers.forEach((k) => {
                "source" in k && p[k.source]
                  ? c.push({ command: "removeLayer", args: [k.id] })
                  : w.push(k);
              }),
              (c = c.concat(y)),
              (function (k, C, A) {
                C = C || [];
                let P = (k = k || []).map(An),
                  N = C.map(An),
                  O = k.reduce(Zr, {}),
                  j = C.reduce(Zr, {}),
                  W = P.slice(),
                  K = Object.create(null),
                  ie,
                  ae,
                  pe,
                  Pe,
                  ye;
                for (let Se = 0, We = 0; Se < P.length; Se++)
                  (ie = P[Se]),
                    Object.prototype.hasOwnProperty.call(j, ie)
                      ? We++
                      : (pr(A, { command: "removeLayer", args: [ie] }),
                        W.splice(W.indexOf(ie, We), 1));
                for (let Se = 0, We = 0; Se < N.length; Se++)
                  (ie = N[N.length - 1 - Se]),
                    W[W.length - 1 - Se] !== ie &&
                      (Object.prototype.hasOwnProperty.call(O, ie)
                        ? (pr(A, { command: "removeLayer", args: [ie] }),
                          W.splice(W.lastIndexOf(ie, W.length - We), 1))
                        : We++,
                      (Pe = W[W.length - Se]),
                      pr(A, { command: "addLayer", args: [j[ie], Pe] }),
                      W.splice(W.length - Se, 0, ie),
                      (K[ie] = !0));
                for (let Se = 0; Se < N.length; Se++)
                  if (
                    ((ie = N[Se]),
                    (ae = O[ie]),
                    (pe = j[ie]),
                    !K[ie] && !ui(ae, pe))
                  )
                    if (
                      ui(ae.source, pe.source) &&
                      ui(ae["source-layer"], pe["source-layer"]) &&
                      ui(ae.type, pe.type)
                    ) {
                      for (ye in (Vn(
                        ae.layout,
                        pe.layout,
                        A,
                        ie,
                        null,
                        "setLayoutProperty"
                      ),
                      Vn(ae.paint, pe.paint, A, ie, null, "setPaintProperty"),
                      ui(ae.filter, pe.filter) ||
                        pr(A, { command: "setFilter", args: [ie, pe.filter] }),
                      (ui(ae.minzoom, pe.minzoom) &&
                        ui(ae.maxzoom, pe.maxzoom)) ||
                        pr(A, {
                          command: "setLayerZoomRange",
                          args: [ie, pe.minzoom, pe.maxzoom],
                        }),
                      ae))
                        Object.prototype.hasOwnProperty.call(ae, ye) &&
                          ye !== "layout" &&
                          ye !== "paint" &&
                          ye !== "filter" &&
                          ye !== "metadata" &&
                          ye !== "minzoom" &&
                          ye !== "maxzoom" &&
                          (ye.indexOf("paint.") === 0
                            ? Vn(
                                ae[ye],
                                pe[ye],
                                A,
                                ie,
                                ye.slice(6),
                                "setPaintProperty"
                              )
                            : ui(ae[ye], pe[ye]) ||
                              pr(A, {
                                command: "setLayerProperty",
                                args: [ie, ye, pe[ye]],
                              }));
                      for (ye in pe)
                        Object.prototype.hasOwnProperty.call(pe, ye) &&
                          !Object.prototype.hasOwnProperty.call(ae, ye) &&
                          ye !== "layout" &&
                          ye !== "paint" &&
                          ye !== "filter" &&
                          ye !== "metadata" &&
                          ye !== "minzoom" &&
                          ye !== "maxzoom" &&
                          (ye.indexOf("paint.") === 0
                            ? Vn(
                                ae[ye],
                                pe[ye],
                                A,
                                ie,
                                ye.slice(6),
                                "setPaintProperty"
                              )
                            : ui(ae[ye], pe[ye]) ||
                              pr(A, {
                                command: "setLayerProperty",
                                args: [ie, ye, pe[ye]],
                              }));
                    } else
                      pr(A, { command: "removeLayer", args: [ie] }),
                        (Pe = W[W.lastIndexOf(ie) + 1]),
                        pr(A, { command: "addLayer", args: [pe, Pe] });
              })(w, s.layers, c);
          } catch (p) {
            console.warn("Unable to compute style diff:", p),
              (c = [{ command: "setStyle", args: [s] }]);
          }
          return c;
        }),
        (o.aC = function (l) {
          let s = [],
            c = l.id;
          return (
            c === void 0 &&
              s.push({
                message: `layers.${c}: missing required property "id"`,
              }),
            l.render === void 0 &&
              s.push({
                message: `layers.${c}: missing required method "render"`,
              }),
            l.renderingMode &&
              l.renderingMode !== "2d" &&
              l.renderingMode !== "3d" &&
              s.push({
                message: `layers.${c}: property "renderingMode" must be either "2d" or "3d"`,
              }),
            s
          );
        }),
        (o.aD = function l(s, c) {
          if (Array.isArray(s)) {
            if (!Array.isArray(c) || s.length !== c.length) return !1;
            for (let p = 0; p < s.length; p++) if (!l(s[p], c[p])) return !1;
            return !0;
          }
          if (typeof s == "object" && s !== null && c !== null) {
            if (
              typeof c != "object" ||
              Object.keys(s).length !== Object.keys(c).length
            )
              return !1;
            for (let p in s) if (!l(s[p], c[p])) return !1;
            return !0;
          }
          return s === c;
        }),
        (o.aE = fe),
        (o.aF = Le),
        (o.aG = class extends Cr {
          constructor(l, s) {
            super(l, s), (this.current = 0);
          }
          set(l) {
            this.current !== l &&
              ((this.current = l), this.gl.uniform1i(this.location, l));
          }
        }),
        (o.aH = Yn),
        (o.aI = class extends Cr {
          constructor(l, s) {
            super(l, s), (this.current = Ra);
          }
          set(l) {
            if (l[12] !== this.current[12] || l[0] !== this.current[0])
              return (
                (this.current = l),
                void this.gl.uniformMatrix4fv(this.location, !1, l)
              );
            for (let s = 1; s < 16; s++)
              if (l[s] !== this.current[s]) {
                (this.current = l),
                  this.gl.uniformMatrix4fv(this.location, !1, l);
                break;
              }
          }
        }),
        (o.aJ = gs),
        (o.aK = class extends Cr {
          constructor(l, s) {
            super(l, s), (this.current = [0, 0, 0]);
          }
          set(l) {
            (l[0] === this.current[0] &&
              l[1] === this.current[1] &&
              l[2] === this.current[2]) ||
              ((this.current = l),
              this.gl.uniform3f(this.location, l[0], l[1], l[2]));
          }
        }),
        (o.aL = class extends Cr {
          constructor(l, s) {
            super(l, s), (this.current = [0, 0]);
          }
          set(l) {
            (l[0] === this.current[0] && l[1] === this.current[1]) ||
              ((this.current = l),
              this.gl.uniform2f(this.location, l[0], l[1]));
          }
        }),
        (o.aM = Is),
        (o.aN = function (l, s, c, p, y, w, k) {
          var C = 1 / (s - c),
            A = 1 / (p - y),
            P = 1 / (w - k);
          return (
            (l[0] = -2 * C),
            (l[1] = 0),
            (l[2] = 0),
            (l[3] = 0),
            (l[4] = 0),
            (l[5] = -2 * A),
            (l[6] = 0),
            (l[7] = 0),
            (l[8] = 0),
            (l[9] = 0),
            (l[10] = 2 * P),
            (l[11] = 0),
            (l[12] = (s + c) * C),
            (l[13] = (y + p) * A),
            (l[14] = (k + w) * P),
            (l[15] = 1),
            l
          );
        }),
        (o.aO = tr),
        (o.aP = O7),
        (o.aQ = class extends wc {}),
        (o.aR = Pk),
        (o.aS = class extends Bl {}),
        (o.aT = function (l) {
          return l <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(l) / Math.LN2));
        }),
        (o.aU = k_),
        (o.aV = B),
        (o.aW = class extends gh {}),
        (o.aX = Ve),
        (o.aY = function (l, s) {
          return (
            l[0] === s[0] &&
            l[1] === s[1] &&
            l[2] === s[2] &&
            l[3] === s[3] &&
            l[4] === s[4] &&
            l[5] === s[5] &&
            l[6] === s[6] &&
            l[7] === s[7] &&
            l[8] === s[8] &&
            l[9] === s[9] &&
            l[10] === s[10] &&
            l[11] === s[11] &&
            l[12] === s[12] &&
            l[13] === s[13] &&
            l[14] === s[14] &&
            l[15] === s[15]
          );
        }),
        (o.aZ = function (l, s) {
          var c = l[0],
            p = l[1],
            y = l[2],
            w = l[3],
            k = l[4],
            C = l[5],
            A = l[6],
            P = l[7],
            N = l[8],
            O = l[9],
            j = l[10],
            W = l[11],
            K = l[12],
            ie = l[13],
            ae = l[14],
            pe = l[15],
            Pe = s[0],
            ye = s[1],
            Se = s[2],
            We = s[3],
            tt = s[4],
            Dt = s[5],
            Qt = s[6],
            It = s[7],
            Et = s[8],
            xt = s[9],
            Ut = s[10],
            St = s[11],
            mt = s[12],
            ni = s[13],
            Wt = s[14],
            Oi = s[15];
          return (
            Math.abs(c - Pe) <= Io * Math.max(1, Math.abs(c), Math.abs(Pe)) &&
            Math.abs(p - ye) <= Io * Math.max(1, Math.abs(p), Math.abs(ye)) &&
            Math.abs(y - Se) <= Io * Math.max(1, Math.abs(y), Math.abs(Se)) &&
            Math.abs(w - We) <= Io * Math.max(1, Math.abs(w), Math.abs(We)) &&
            Math.abs(k - tt) <= Io * Math.max(1, Math.abs(k), Math.abs(tt)) &&
            Math.abs(C - Dt) <= Io * Math.max(1, Math.abs(C), Math.abs(Dt)) &&
            Math.abs(A - Qt) <= Io * Math.max(1, Math.abs(A), Math.abs(Qt)) &&
            Math.abs(P - It) <= Io * Math.max(1, Math.abs(P), Math.abs(It)) &&
            Math.abs(N - Et) <= Io * Math.max(1, Math.abs(N), Math.abs(Et)) &&
            Math.abs(O - xt) <= Io * Math.max(1, Math.abs(O), Math.abs(xt)) &&
            Math.abs(j - Ut) <= Io * Math.max(1, Math.abs(j), Math.abs(Ut)) &&
            Math.abs(W - St) <= Io * Math.max(1, Math.abs(W), Math.abs(St)) &&
            Math.abs(K - mt) <= Io * Math.max(1, Math.abs(K), Math.abs(mt)) &&
            Math.abs(ie - ni) <= Io * Math.max(1, Math.abs(ie), Math.abs(ni)) &&
            Math.abs(ae - Wt) <= Io * Math.max(1, Math.abs(ae), Math.abs(Wt)) &&
            Math.abs(pe - Oi) <= Io * Math.max(1, Math.abs(pe), Math.abs(Oi))
          );
        }),
        (o.a_ = function (l, s) {
          return (
            (l[0] = s[0]),
            (l[1] = s[1]),
            (l[2] = s[2]),
            (l[3] = s[3]),
            (l[4] = s[4]),
            (l[5] = s[5]),
            (l[6] = s[6]),
            (l[7] = s[7]),
            (l[8] = s[8]),
            (l[9] = s[9]),
            (l[10] = s[10]),
            (l[11] = s[11]),
            (l[12] = s[12]),
            (l[13] = s[13]),
            (l[14] = s[14]),
            (l[15] = s[15]),
            l
          );
        }),
        (o.aa = function (l) {
          let s = {};
          if (
            (l.replace(
              /(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,
              (c, p, y, w) => {
                let k = y || w;
                return (s[p] = !k || k.toLowerCase()), "";
              }
            ),
            s["max-age"])
          ) {
            let c = parseInt(s["max-age"], 10);
            isNaN(c) ? delete s["max-age"] : (s["max-age"] = c);
          }
          return s;
        }),
        (o.ab = function (l, s) {
          let c = [];
          for (let p in l) p in s || c.push(p);
          return c;
        }),
        (o.ac = be),
        (o.ad = function (l, s, c) {
          var p = Math.sin(c),
            y = Math.cos(c),
            w = s[0],
            k = s[1],
            C = s[2],
            A = s[3],
            P = s[4],
            N = s[5],
            O = s[6],
            j = s[7];
          return (
            s !== l &&
              ((l[8] = s[8]),
              (l[9] = s[9]),
              (l[10] = s[10]),
              (l[11] = s[11]),
              (l[12] = s[12]),
              (l[13] = s[13]),
              (l[14] = s[14]),
              (l[15] = s[15])),
            (l[0] = w * y + P * p),
            (l[1] = k * y + N * p),
            (l[2] = C * y + O * p),
            (l[3] = A * y + j * p),
            (l[4] = P * y - w * p),
            (l[5] = N * y - k * p),
            (l[6] = O * y - C * p),
            (l[7] = j * y - A * p),
            l
          );
        }),
        (o.ae = function (l) {
          var s = new Ou(16);
          return (
            (s[0] = l[0]),
            (s[1] = l[1]),
            (s[2] = l[2]),
            (s[3] = l[3]),
            (s[4] = l[4]),
            (s[5] = l[5]),
            (s[6] = l[6]),
            (s[7] = l[7]),
            (s[8] = l[8]),
            (s[9] = l[9]),
            (s[10] = l[10]),
            (s[11] = l[11]),
            (s[12] = l[12]),
            (s[13] = l[13]),
            (s[14] = l[14]),
            (s[15] = l[15]),
            s
          );
        }),
        (o.af = $f),
        (o.ag = function (l, s) {
          let c = 0,
            p = 0;
          if (l.kind === "constant") p = l.layoutSize;
          else if (l.kind !== "source") {
            let { interpolationType: y, minZoom: w, maxZoom: k } = l,
              C = y ? be(bn.interpolationFactor(y, s, w, k), 0, 1) : 0;
            l.kind === "camera"
              ? (p = $n.number(l.minSize, l.maxSize, C))
              : (c = C);
          }
          return { uSizeT: c, uSize: p };
        }),
        (o.ai = function (
          l,
          { uSize: s, uSizeT: c },
          { lowerSize: p, upperSize: y }
        ) {
          return l.kind === "source"
            ? p / ya
            : l.kind === "composite"
            ? $n.number(p / ya, y / ya, c)
            : s;
        }),
        (o.aj = O1),
        (o.ak = function (l, s, c, p) {
          let y = s.y - l.y,
            w = s.x - l.x,
            k = p.y - c.y,
            C = p.x - c.x,
            A = k * w - C * y;
          if (A === 0) return null;
          let P = (C * (l.y - c.y) - k * (l.x - c.x)) / A;
          return new b(l.x + P * w, l.y + P * y);
        }),
        (o.al = S3),
        (o.am = Ha),
        (o.an = g1),
        (o.ao = vn),
        (o.aq = N1),
        (o.ar = function (l, s) {
          var c = s[0],
            p = s[1],
            y = s[2],
            w = s[3],
            k = s[4],
            C = s[5],
            A = s[6],
            P = s[7],
            N = s[8],
            O = s[9],
            j = s[10],
            W = s[11],
            K = s[12],
            ie = s[13],
            ae = s[14],
            pe = s[15],
            Pe = c * C - p * k,
            ye = c * A - y * k,
            Se = c * P - w * k,
            We = p * A - y * C,
            tt = p * P - w * C,
            Dt = y * P - w * A,
            Qt = N * ie - O * K,
            It = N * ae - j * K,
            Et = N * pe - W * K,
            xt = O * ae - j * ie,
            Ut = O * pe - W * ie,
            St = j * pe - W * ae,
            mt = Pe * St - ye * Ut + Se * xt + We * Et - tt * It + Dt * Qt;
          return mt
            ? ((l[0] = (C * St - A * Ut + P * xt) * (mt = 1 / mt)),
              (l[1] = (y * Ut - p * St - w * xt) * mt),
              (l[2] = (ie * Dt - ae * tt + pe * We) * mt),
              (l[3] = (j * tt - O * Dt - W * We) * mt),
              (l[4] = (A * Et - k * St - P * It) * mt),
              (l[5] = (c * St - y * Et + w * It) * mt),
              (l[6] = (ae * Se - K * Dt - pe * ye) * mt),
              (l[7] = (N * Dt - j * Se + W * ye) * mt),
              (l[8] = (k * Ut - C * Et + P * Qt) * mt),
              (l[9] = (p * Et - c * Ut - w * Qt) * mt),
              (l[10] = (K * tt - ie * Se + pe * Pe) * mt),
              (l[11] = (O * Se - N * tt - W * Pe) * mt),
              (l[12] = (C * It - k * xt - A * Qt) * mt),
              (l[13] = (c * xt - p * It + y * Qt) * mt),
              (l[14] = (ie * ye - K * We - ae * Pe) * mt),
              (l[15] = (N * We - O * ye + j * Pe) * mt),
              l)
            : null;
        }),
        (o.as = $1),
        (o.at = z1),
        (o.au = Q1),
        (o.av = function () {
          let l = {},
            s = je.$version;
          for (let c in je.$root) {
            let p = je.$root[c];
            if (p.required) {
              let y = null;
              (y = c === "version" ? s : p.type === "array" ? [] : {}),
                y != null && (l[c] = y);
            }
          }
          return l;
        }),
        (o.aw = ih),
        (o.ax = Li),
        (o.ay = function (l) {
          l = l.slice();
          let s = Object.create(null);
          for (let c = 0; c < l.length; c++) s[l[c].id] = l[c];
          for (let c = 0; c < l.length; c++)
            "ref" in l[c] && (l[c] = gi(l[c], s[l[c].ref]));
          return l;
        }),
        (o.az = function (l) {
          if (l.type === "custom") return new iS(l);
          switch (l.type) {
            case "background":
              return new Yk(l);
            case "circle":
              return new B7(l);
            case "fill":
              return new nk(l);
            case "fill-extrusion":
              return new vk(l);
            case "heatmap":
              return new U7(l);
            case "hillshade":
              return new j7(l);
            case "line":
              return new Tk(l);
            case "raster":
              return new tS(l);
            case "symbol":
              return new t0(l);
          }
        }),
        (o.b = ct),
        (o.b0 = function (l, s) {
          return l[0] * s[0] + l[1] * s[1] + l[2] * s[2] + l[3] * s[3];
        }),
        (o.b1 = Y),
        (o.b2 = y3),
        (o.b3 = m3),
        (o.b4 = function (l, s, c, p, y) {
          var w,
            k = 1 / Math.tan(s / 2);
          return (
            (l[0] = k / c),
            (l[1] = 0),
            (l[2] = 0),
            (l[3] = 0),
            (l[4] = 0),
            (l[5] = k),
            (l[6] = 0),
            (l[7] = 0),
            (l[8] = 0),
            (l[9] = 0),
            (l[11] = -1),
            (l[12] = 0),
            (l[13] = 0),
            (l[15] = 0),
            y != null && y !== 1 / 0
              ? ((l[10] = (y + p) * (w = 1 / (p - y))), (l[14] = 2 * y * p * w))
              : ((l[10] = -1), (l[14] = -2 * p)),
            l
          );
        }),
        (o.b5 = function (l, s, c) {
          var p = Math.sin(c),
            y = Math.cos(c),
            w = s[4],
            k = s[5],
            C = s[6],
            A = s[7],
            P = s[8],
            N = s[9],
            O = s[10],
            j = s[11];
          return (
            s !== l &&
              ((l[0] = s[0]),
              (l[1] = s[1]),
              (l[2] = s[2]),
              (l[3] = s[3]),
              (l[12] = s[12]),
              (l[13] = s[13]),
              (l[14] = s[14]),
              (l[15] = s[15])),
            (l[4] = w * y + P * p),
            (l[5] = k * y + N * p),
            (l[6] = C * y + O * p),
            (l[7] = A * y + j * p),
            (l[8] = P * y - w * p),
            (l[9] = N * y - k * p),
            (l[10] = O * y - C * p),
            (l[11] = j * y - A * p),
            l
          );
        }),
        (o.b6 = te),
        (o.b7 = ce),
        (o.b8 = function (l) {
          return (l * Math.PI) / 180;
        }),
        (o.b9 = function (l, s) {
          return (
            (l[0] = s[0]),
            (l[1] = 0),
            (l[2] = 0),
            (l[3] = 0),
            (l[4] = 0),
            (l[5] = s[1]),
            (l[6] = 0),
            (l[7] = 0),
            (l[8] = 0),
            (l[9] = 0),
            (l[10] = s[2]),
            (l[11] = 0),
            (l[12] = 0),
            (l[13] = 0),
            (l[14] = 0),
            (l[15] = 1),
            l
          );
        }),
        (o.bA = Na),
        (o.ba = class extends Iu {}),
        (o.bb = V1),
        (o.bc = pS),
        (o.be = ei),
        (o.bf = function (l, s) {
          Re.REGISTERED_PROTOCOLS[l] = s;
        }),
        (o.bg = function (l) {
          delete Re.REGISTERED_PROTOCOLS[l];
        }),
        (o.bh = function (l, s) {
          let c = {};
          for (let y = 0; y < l.length; y++) {
            let w = (s && s[l[y].id]) || p1(l[y]);
            s && (s[l[y].id] = w);
            let k = c[w];
            k || (k = c[w] = []), k.push(l[y]);
          }
          let p = [];
          for (let y in c) p.push(c[y]);
          return p;
        }),
        (o.bi = Nt),
        (o.bj = v3),
        (o.bk = x3),
        (o.bl = Y_),
        (o.bm = function (l) {
          l.bucket.createArrays(),
            (l.bucket.tilePixelRatio = Ui / (512 * l.bucket.overscaling)),
            (l.bucket.compareText = {}),
            (l.bucket.iconsNeedLinear = !1);
          let s = l.bucket.layers[0],
            c = s.layout,
            p = s._unevaluatedLayout._values,
            y = {
              layoutIconSize: p["icon-size"].possiblyEvaluate(
                new Mr(l.bucket.zoom + 1),
                l.canonical
              ),
              layoutTextSize: p["text-size"].possiblyEvaluate(
                new Mr(l.bucket.zoom + 1),
                l.canonical
              ),
              textMaxSize: p["text-size"].possiblyEvaluate(new Mr(18)),
            };
          if (l.bucket.textSizeData.kind === "composite") {
            let { minZoom: P, maxZoom: N } = l.bucket.textSizeData;
            y.compositeTextSizes = [
              p["text-size"].possiblyEvaluate(new Mr(P), l.canonical),
              p["text-size"].possiblyEvaluate(new Mr(N), l.canonical),
            ];
          }
          if (l.bucket.iconSizeData.kind === "composite") {
            let { minZoom: P, maxZoom: N } = l.bucket.iconSizeData;
            y.compositeIconSizes = [
              p["icon-size"].possiblyEvaluate(new Mr(P), l.canonical),
              p["icon-size"].possiblyEvaluate(new Mr(N), l.canonical),
            ];
          }
          let w = c.get("text-line-height") * vn,
            k =
              c.get("text-rotation-alignment") !== "viewport" &&
              c.get("symbol-placement") !== "point",
            C = c.get("text-keep-upright"),
            A = c.get("text-size");
          for (let P of l.bucket.features) {
            let N = c.get("text-font").evaluate(P, {}, l.canonical).join(","),
              O = A.evaluate(P, {}, l.canonical),
              j = y.layoutTextSize.evaluate(P, {}, l.canonical),
              W = y.layoutIconSize.evaluate(P, {}, l.canonical),
              K = { horizontal: {}, vertical: void 0 },
              ie = P.text,
              ae,
              pe = [0, 0];
            if (ie) {
              let Se = ie.toString(),
                We =
                  c.get("text-letter-spacing").evaluate(P, {}, l.canonical) *
                  vn,
                tt = Eu(Se) ? We : 0,
                Dt = c.get("text-anchor").evaluate(P, {}, l.canonical),
                Qt = L3(s, P, l.canonical);
              if (!Qt) {
                let St = c
                  .get("text-radial-offset")
                  .evaluate(P, {}, l.canonical);
                pe = St
                  ? D3(Dt, [St * vn, q1])
                  : c
                      .get("text-offset")
                      .evaluate(P, {}, l.canonical)
                      .map((mt) => mt * vn);
              }
              let It = k
                  ? "center"
                  : c.get("text-justify").evaluate(P, {}, l.canonical),
                Et = c.get("symbol-placement"),
                xt =
                  Et === "point"
                    ? c.get("text-max-width").evaluate(P, {}, l.canonical) * vn
                    : 0,
                Ut = () => {
                  l.bucket.allowVerticalPlacement &&
                    yc(Se) &&
                    (K.vertical = Xf(
                      ie,
                      l.glyphMap,
                      l.glyphPositions,
                      l.imagePositions,
                      N,
                      xt,
                      w,
                      Dt,
                      "left",
                      tt,
                      pe,
                      o.ah.vertical,
                      !0,
                      Et,
                      j,
                      O
                    ));
                };
              if (!k && Qt) {
                let St = new Set();
                if (It === "auto")
                  for (let ni = 0; ni < Qt.values.length; ni += 2)
                    St.add($1(Qt.values[ni]));
                else St.add(It);
                let mt = !1;
                for (let ni of St)
                  if (!K.horizontal[ni])
                    if (mt) K.horizontal[ni] = K.horizontal[0];
                    else {
                      let Wt = Xf(
                        ie,
                        l.glyphMap,
                        l.glyphPositions,
                        l.imagePositions,
                        N,
                        xt,
                        w,
                        "center",
                        ni,
                        tt,
                        pe,
                        o.ah.horizontal,
                        !1,
                        Et,
                        j,
                        O
                      );
                      Wt &&
                        ((K.horizontal[ni] = Wt),
                        (mt = Wt.positionedLines.length === 1));
                    }
                Ut();
              } else {
                It === "auto" && (It = $1(Dt));
                let St = Xf(
                  ie,
                  l.glyphMap,
                  l.glyphPositions,
                  l.imagePositions,
                  N,
                  xt,
                  w,
                  Dt,
                  It,
                  tt,
                  pe,
                  o.ah.horizontal,
                  !1,
                  Et,
                  j,
                  O
                );
                St && (K.horizontal[It] = St),
                  Ut(),
                  yc(Se) &&
                    k &&
                    C &&
                    (K.vertical = Xf(
                      ie,
                      l.glyphMap,
                      l.glyphPositions,
                      l.imagePositions,
                      N,
                      xt,
                      w,
                      Dt,
                      It,
                      tt,
                      pe,
                      o.ah.vertical,
                      !1,
                      Et,
                      j,
                      O
                    ));
              }
            }
            let Pe = !1;
            if (P.icon && P.icon.name) {
              let Se = l.imageMap[P.icon.name];
              Se &&
                ((ae = Wk(
                  l.imagePositions[P.icon.name],
                  c.get("icon-offset").evaluate(P, {}, l.canonical),
                  c.get("icon-anchor").evaluate(P, {}, l.canonical)
                )),
                (Pe = !!Se.sdf),
                l.bucket.sdfIcons === void 0
                  ? (l.bucket.sdfIcons = Pe)
                  : l.bucket.sdfIcons !== Pe &&
                    qe(
                      "Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"
                    ),
                (Se.pixelRatio !== l.bucket.pixelRatio ||
                  c.get("icon-rotate").constantOr(1) !== 0) &&
                  (l.bucket.iconsNeedLinear = !0));
            }
            let ye = z3(K.horizontal) || K.vertical;
            (l.bucket.iconsInText = !!ye && ye.iconsInText),
              (ye || ae) &&
                dS(
                  l.bucket,
                  P,
                  K,
                  ae,
                  l.imageMap,
                  y,
                  j,
                  W,
                  pe,
                  Pe,
                  l.canonical
                );
          }
          l.showCollisionBoxes && l.bucket.generateCollisionDebugBuffers();
        }),
        (o.bn = A1),
        (o.bo = E1),
        (o.bp = M1),
        (o.bq = Vl),
        (o.br = P1),
        (o.bs = class {
          constructor(l) {
            (this._marks = {
              start: [l.url, "start"].join("#"),
              end: [l.url, "end"].join("#"),
              measure: l.url.toString(),
            }),
              performance.mark(this._marks.start);
          }
          finish() {
            performance.mark(this._marks.end);
            let l = performance.getEntriesByName(this._marks.measure);
            return (
              l.length === 0 &&
                (performance.measure(
                  this._marks.measure,
                  this._marks.start,
                  this._marks.end
                ),
                (l = performance.getEntriesByName(this._marks.measure)),
                performance.clearMarks(this._marks.start),
                performance.clearMarks(this._marks.end),
                performance.clearMeasures(this._marks.measure)),
              l
            );
          }
        }),
        (o.bt = function (l, s, c, p, y) {
          return n(this, void 0, void 0, function* () {
            if (Q())
              try {
                return yield ht(l, s, c, p, y);
              } catch {}
            return (function (w, k, C, A, P) {
              let N = w.width,
                O = w.height;
              (Vt && hi) ||
                ((Vt = new OffscreenCanvas(N, O)),
                (hi = Vt.getContext("2d", { willReadFrequently: !0 }))),
                (Vt.width = N),
                (Vt.height = O),
                hi.drawImage(w, 0, 0, N, O);
              let j = hi.getImageData(k, C, A, P);
              return hi.clearRect(0, 0, N, O), j.data;
            })(l, s, c, p, y);
          });
        }),
        (o.bu = b3),
        (o.bv = u),
        (o.bw = h),
        (o.bx = q_),
        (o.by = xr),
        (o.bz = function (l) {
          return l.message === Pi;
        }),
        (o.c = Zt),
        (o.d = (l) =>
          n(void 0, void 0, void 0, function* () {
            if (l.byteLength === 0)
              return createImageBitmap(new ImageData(1, 1));
            let s = new Blob([new Uint8Array(l)], { type: "image/png" });
            try {
              return createImageBitmap(s);
            } catch (c) {
              throw new Error(
                `Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`
              );
            }
          })),
        (o.e = Ie),
        (o.f = (l) =>
          new Promise((s, c) => {
            let p = new Image();
            (p.onload = () => {
              s(p),
                URL.revokeObjectURL(p.src),
                (p.onload = null),
                window.requestAnimationFrame(() => {
                  p.src = vt;
                });
            }),
              (p.onerror = () =>
                c(
                  new Error(
                    "Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."
                  )
                ));
            let y = new Blob([new Uint8Array(l)], { type: "image/png" });
            p.src = l.byteLength ? URL.createObjectURL(y) : vt;
          })),
        (o.g = Ce),
        (o.h = (l, s) => it(Ie(l, { type: "json" }), s)),
        (o.i = Gt),
        (o.j = pt),
        (o.k = Wr),
        (o.l = (l, s) => it(Ie(l, { type: "arrayBuffer" }), s)),
        (o.m = it),
        (o.n = function (l) {
          return new P1(l).readFields(jk, []);
        }),
        (o.o = Sh),
        (o.p = X_),
        (o.q = Mo),
        (o.r = Yd),
        (o.s = ii),
        (o.t = Pf),
        (o.u = Lt),
        (o.v = je),
        (o.w = qe),
        (o.x = zl),
        (o.y = function ([l, s, c]) {
          return (
            (s += 90),
            (s *= Math.PI / 180),
            (c *= Math.PI / 180),
            {
              x: l * Math.cos(s) * Math.sin(c),
              y: l * Math.sin(s) * Math.sin(c),
              z: l * Math.cos(c),
            }
          );
        }),
        (o.z = $n);
    }),
      t("worker", ["./shared"], function (o) {
        "use strict";
        class n {
          constructor(V) {
            (this.keyCache = {}), V && this.replace(V);
          }
          replace(V) {
            (this._layerConfigs = {}), (this._layers = {}), this.update(V, []);
          }
          update(V, H) {
            for (let ne of V) {
              this._layerConfigs[ne.id] = ne;
              let ve = (this._layers[ne.id] = o.az(ne));
              (ve._featureFilter = o.a6(ve.filter)),
                this.keyCache[ne.id] && delete this.keyCache[ne.id];
            }
            for (let ne of H)
              delete this.keyCache[ne],
                delete this._layerConfigs[ne],
                delete this._layers[ne];
            this.familiesBySource = {};
            let $ = o.bh(Object.values(this._layerConfigs), this.keyCache);
            for (let ne of $) {
              let ve = ne.map((Qe) => this._layers[Qe.id]),
                xe = ve[0];
              if (xe.visibility === "none") continue;
              let ke = xe.source || "",
                me = this.familiesBySource[ke];
              me || (me = this.familiesBySource[ke] = {});
              let we = xe.sourceLayer || "_geojsonTileLayer",
                Ze = me[we];
              Ze || (Ze = me[we] = []), Ze.push(ve);
            }
          }
        }
        class u {
          constructor(V) {
            let H = {},
              $ = [];
            for (let ke in V) {
              let me = V[ke],
                we = (H[ke] = {});
              for (let Ze in me) {
                let Qe = me[+Ze];
                if (!Qe || Qe.bitmap.width === 0 || Qe.bitmap.height === 0)
                  continue;
                let Xe = {
                  x: 0,
                  y: 0,
                  w: Qe.bitmap.width + 2,
                  h: Qe.bitmap.height + 2,
                };
                $.push(Xe), (we[Ze] = { rect: Xe, metrics: Qe.metrics });
              }
            }
            let { w: ne, h: ve } = o.p($),
              xe = new o.o({ width: ne || 1, height: ve || 1 });
            for (let ke in V) {
              let me = V[ke];
              for (let we in me) {
                let Ze = me[+we];
                if (!Ze || Ze.bitmap.width === 0 || Ze.bitmap.height === 0)
                  continue;
                let Qe = H[ke][we].rect;
                o.o.copy(
                  Ze.bitmap,
                  xe,
                  { x: 0, y: 0 },
                  { x: Qe.x + 1, y: Qe.y + 1 },
                  Ze.bitmap
                );
              }
            }
            (this.image = xe), (this.positions = H);
          }
        }
        o.bi("GlyphAtlas", u);
        class h {
          constructor(V) {
            (this.tileID = new o.Q(
              V.tileID.overscaledZ,
              V.tileID.wrap,
              V.tileID.canonical.z,
              V.tileID.canonical.x,
              V.tileID.canonical.y
            )),
              (this.uid = V.uid),
              (this.zoom = V.zoom),
              (this.pixelRatio = V.pixelRatio),
              (this.tileSize = V.tileSize),
              (this.source = V.source),
              (this.overscaling = this.tileID.overscaleFactor()),
              (this.showCollisionBoxes = V.showCollisionBoxes),
              (this.collectResourceTiming = !!V.collectResourceTiming),
              (this.returnDependencies = !!V.returnDependencies),
              (this.promoteId = V.promoteId),
              (this.inFlightDependencies = []);
          }
          parse(V, H, $, ne) {
            return o._(this, void 0, void 0, function* () {
              (this.status = "parsing"),
                (this.data = V),
                (this.collisionBoxArray = new o.a4());
              let ve = new o.bj(Object.keys(V.layers).sort()),
                xe = new o.bk(this.tileID, this.promoteId);
              xe.bucketLayerIDs = [];
              let ke = {},
                me = {
                  featureIndex: xe,
                  iconDependencies: {},
                  patternDependencies: {},
                  glyphDependencies: {},
                  availableImages: $,
                },
                we = H.familiesBySource[this.source];
              for (let ci in we) {
                let br = V.layers[ci];
                if (!br) continue;
                br.version === 1 &&
                  o.w(
                    `Vector tile source "${this.source}" layer "${ci}" does not use vector tile spec v2 and therefore may have some rendering errors.`
                  );
                let Or = ve.encode(ci),
                  In = [];
                for (let rn = 0; rn < br.length; rn++) {
                  let un = br.feature(rn),
                    nn = xe.getId(un, ci);
                  In.push({
                    feature: un,
                    id: nn,
                    index: rn,
                    sourceLayerIndex: Or,
                  });
                }
                for (let rn of we[ci]) {
                  let un = rn[0];
                  un.source !== this.source &&
                    o.w(
                      `layer.source = ${un.source} does not equal this.source = ${this.source}`
                    ),
                    (un.minzoom && this.zoom < Math.floor(un.minzoom)) ||
                      (un.maxzoom && this.zoom >= un.maxzoom) ||
                      (un.visibility !== "none" &&
                        (m(rn, this.zoom, $),
                        (ke[un.id] = un.createBucket({
                          index: xe.bucketLayerIDs.length,
                          layers: rn,
                          zoom: this.zoom,
                          pixelRatio: this.pixelRatio,
                          overscaling: this.overscaling,
                          collisionBoxArray: this.collisionBoxArray,
                          sourceLayerIndex: Or,
                          sourceID: this.source,
                        })).populate(In, me, this.tileID.canonical),
                        xe.bucketLayerIDs.push(rn.map((nn) => nn.id))));
                }
              }
              let Ze = o.aE(me.glyphDependencies, (ci) =>
                Object.keys(ci).map(Number)
              );
              this.inFlightDependencies.forEach((ci) => ci?.abort()),
                (this.inFlightDependencies = []);
              let Qe = Promise.resolve({});
              if (Object.keys(Ze).length) {
                let ci = new AbortController();
                this.inFlightDependencies.push(ci),
                  (Qe = ne.sendAsync(
                    {
                      type: "getGlyphs",
                      data: {
                        stacks: Ze,
                        source: this.source,
                        tileID: this.tileID,
                        type: "glyphs",
                      },
                    },
                    ci
                  ));
              }
              let Xe = Object.keys(me.iconDependencies),
                jt = Promise.resolve({});
              if (Xe.length) {
                let ci = new AbortController();
                this.inFlightDependencies.push(ci),
                  (jt = ne.sendAsync(
                    {
                      type: "getImages",
                      data: {
                        icons: Xe,
                        source: this.source,
                        tileID: this.tileID,
                        type: "icons",
                      },
                    },
                    ci
                  ));
              }
              let oi = Object.keys(me.patternDependencies),
                ti = Promise.resolve({});
              if (oi.length) {
                let ci = new AbortController();
                this.inFlightDependencies.push(ci),
                  (ti = ne.sendAsync(
                    {
                      type: "getImages",
                      data: {
                        icons: oi,
                        source: this.source,
                        tileID: this.tileID,
                        type: "patterns",
                      },
                    },
                    ci
                  ));
              }
              let [zi, di, lr] = yield Promise.all([Qe, jt, ti]),
                Ni = new u(zi),
                Wi = new o.bl(di, lr);
              for (let ci in ke) {
                let br = ke[ci];
                br instanceof o.a5
                  ? (m(br.layers, this.zoom, $),
                    o.bm({
                      bucket: br,
                      glyphMap: zi,
                      glyphPositions: Ni.positions,
                      imageMap: di,
                      imagePositions: Wi.iconPositions,
                      showCollisionBoxes: this.showCollisionBoxes,
                      canonical: this.tileID.canonical,
                    }))
                  : br.hasPattern &&
                    (br instanceof o.bn ||
                      br instanceof o.bo ||
                      br instanceof o.bp) &&
                    (m(br.layers, this.zoom, $),
                    br.addFeatures(
                      me,
                      this.tileID.canonical,
                      Wi.patternPositions
                    ));
              }
              return (
                (this.status = "done"),
                {
                  buckets: Object.values(ke).filter((ci) => !ci.isEmpty()),
                  featureIndex: xe,
                  collisionBoxArray: this.collisionBoxArray,
                  glyphAtlasImage: Ni.image,
                  imageAtlas: Wi,
                  glyphMap: this.returnDependencies ? zi : null,
                  iconMap: this.returnDependencies ? di : null,
                  glyphPositions: this.returnDependencies ? Ni.positions : null,
                }
              );
            });
          }
        }
        function m(re, V, H) {
          let $ = new o.a8(V);
          for (let ne of re) ne.recalculate($, H);
        }
        class b {
          constructor(V, H, $) {
            (this.actor = V),
              (this.layerIndex = H),
              (this.availableImages = $),
              (this.fetching = {}),
              (this.loading = {}),
              (this.loaded = {});
          }
          loadVectorTile(V, H) {
            return o._(this, void 0, void 0, function* () {
              let $ = yield o.l(V.request, H);
              try {
                return {
                  vectorTile: new o.bq.VectorTile(new o.br($.data)),
                  rawData: $.data,
                  cacheControl: $.cacheControl,
                  expires: $.expires,
                };
              } catch (ne) {
                let ve = new Uint8Array($.data),
                  xe = `Unable to parse the tile at ${V.request.url}, `;
                throw (
                  ((xe +=
                    ve[0] === 31 && ve[1] === 139
                      ? "please make sure the data is not gzipped and that you have configured the relevant header in the server"
                      : `got error: ${ne.messge}`),
                  new Error(xe))
                );
              }
            });
          }
          loadTile(V) {
            return o._(this, void 0, void 0, function* () {
              let H = V.uid,
                $ =
                  !!(V && V.request && V.request.collectResourceTiming) &&
                  new o.bs(V.request),
                ne = new h(V);
              this.loading[H] = ne;
              let ve = new AbortController();
              ne.abort = ve;
              try {
                let xe = yield this.loadVectorTile(V, ve);
                if ((delete this.loading[H], !xe)) return null;
                let ke = xe.rawData,
                  me = {};
                xe.expires && (me.expires = xe.expires),
                  xe.cacheControl && (me.cacheControl = xe.cacheControl);
                let we = {};
                if ($) {
                  let Qe = $.finish();
                  Qe && (we.resourceTiming = JSON.parse(JSON.stringify(Qe)));
                }
                ne.vectorTile = xe.vectorTile;
                let Ze = ne.parse(
                  xe.vectorTile,
                  this.layerIndex,
                  this.availableImages,
                  this.actor
                );
                (this.loaded[H] = ne),
                  (this.fetching[H] = {
                    rawTileData: ke,
                    cacheControl: me,
                    resourceTiming: we,
                  });
                try {
                  let Qe = yield Ze;
                  return o.e({ rawTileData: ke.slice(0) }, Qe, me, we);
                } finally {
                  delete this.fetching[H];
                }
              } catch (xe) {
                throw (
                  (delete this.loading[H],
                  (ne.status = "done"),
                  (this.loaded[H] = ne),
                  xe)
                );
              }
            });
          }
          reloadTile(V) {
            return o._(this, void 0, void 0, function* () {
              let H = V.uid;
              if (!this.loaded || !this.loaded[H])
                throw new Error(
                  "Should not be trying to reload a tile that was never loaded or has been removed"
                );
              let $ = this.loaded[H];
              if (
                (($.showCollisionBoxes = V.showCollisionBoxes),
                $.status === "parsing")
              ) {
                let ne = yield $.parse(
                    $.vectorTile,
                    this.layerIndex,
                    this.availableImages,
                    this.actor
                  ),
                  ve;
                if (this.fetching[H]) {
                  let {
                    rawTileData: xe,
                    cacheControl: ke,
                    resourceTiming: me,
                  } = this.fetching[H];
                  delete this.fetching[H],
                    (ve = o.e({ rawTileData: xe.slice(0) }, ne, ke, me));
                } else ve = ne;
                return ve;
              }
              if ($.status === "done" && $.vectorTile)
                return $.parse(
                  $.vectorTile,
                  this.layerIndex,
                  this.availableImages,
                  this.actor
                );
            });
          }
          abortTile(V) {
            return o._(this, void 0, void 0, function* () {
              let H = this.loading,
                $ = V.uid;
              H && H[$] && H[$].abort && (H[$].abort.abort(), delete H[$]);
            });
          }
          removeTile(V) {
            return o._(this, void 0, void 0, function* () {
              this.loaded && this.loaded[V.uid] && delete this.loaded[V.uid];
            });
          }
        }
        class _ {
          constructor() {
            this.loaded = {};
          }
          loadTile(V) {
            return o._(this, void 0, void 0, function* () {
              let {
                  uid: H,
                  encoding: $,
                  rawImageData: ne,
                  redFactor: ve,
                  greenFactor: xe,
                  blueFactor: ke,
                  baseShift: me,
                } = V,
                we = ne.width + 2,
                Ze = ne.height + 2,
                Qe = o.b(ne)
                  ? new o.R(
                      { width: we, height: Ze },
                      yield o.bt(ne, -1, -1, we, Ze)
                    )
                  : ne,
                Xe = new o.bu(H, Qe, $, ve, xe, ke, me);
              return (
                (this.loaded = this.loaded || {}), (this.loaded[H] = Xe), Xe
              );
            });
          }
          removeTile(V) {
            let H = this.loaded,
              $ = V.uid;
            H && H[$] && delete H[$];
          }
        }
        function S(re, V) {
          if (re.length !== 0) {
            T(re[0], V);
            for (var H = 1; H < re.length; H++) T(re[H], !V);
          }
        }
        function T(re, V) {
          for (
            var H = 0, $ = 0, ne = 0, ve = re.length, xe = ve - 1;
            ne < ve;
            xe = ne++
          ) {
            var ke = (re[ne][0] - re[xe][0]) * (re[xe][1] + re[ne][1]),
              me = H + ke;
            ($ += Math.abs(H) >= Math.abs(ke) ? H - me + ke : ke - me + H),
              (H = me);
          }
          H + $ >= 0 != !!V && re.reverse();
        }
        var D = o.bv(function re(V, H) {
          var $,
            ne = V && V.type;
          if (ne === "FeatureCollection")
            for ($ = 0; $ < V.features.length; $++) re(V.features[$], H);
          else if (ne === "GeometryCollection")
            for ($ = 0; $ < V.geometries.length; $++) re(V.geometries[$], H);
          else if (ne === "Feature") re(V.geometry, H);
          else if (ne === "Polygon") S(V.coordinates, H);
          else if (ne === "MultiPolygon")
            for ($ = 0; $ < V.coordinates.length; $++) S(V.coordinates[$], H);
          return V;
        });
        let F = o.bq.VectorTileFeature.prototype.toGeoJSON;
        var q = { exports: {} },
          Q = o.bw,
          te = o.bq.VectorTileFeature,
          ce = be;
        function be(re, V) {
          (this.options = V || {}),
            (this.features = re),
            (this.length = re.length);
        }
        function Y(re, V) {
          (this.id = typeof re.id == "number" ? re.id : void 0),
            (this.type = re.type),
            (this.rawGeometry = re.type === 1 ? [re.geometry] : re.geometry),
            (this.properties = re.tags),
            (this.extent = V || 4096);
        }
        (be.prototype.feature = function (re) {
          return new Y(this.features[re], this.options.extent);
        }),
          (Y.prototype.loadGeometry = function () {
            var re = this.rawGeometry;
            this.geometry = [];
            for (var V = 0; V < re.length; V++) {
              for (var H = re[V], $ = [], ne = 0; ne < H.length; ne++)
                $.push(new Q(H[ne][0], H[ne][1]));
              this.geometry.push($);
            }
            return this.geometry;
          }),
          (Y.prototype.bbox = function () {
            this.geometry || this.loadGeometry();
            for (
              var re = this.geometry,
                V = 1 / 0,
                H = -1 / 0,
                $ = 1 / 0,
                ne = -1 / 0,
                ve = 0;
              ve < re.length;
              ve++
            )
              for (var xe = re[ve], ke = 0; ke < xe.length; ke++) {
                var me = xe[ke];
                (V = Math.min(V, me.x)),
                  (H = Math.max(H, me.x)),
                  ($ = Math.min($, me.y)),
                  (ne = Math.max(ne, me.y));
              }
            return [V, $, H, ne];
          }),
          (Y.prototype.toGeoJSON = te.prototype.toGeoJSON);
        var Ie = o.bx,
          Te = ce;
        function fe(re) {
          var V = new Ie();
          return (
            (function (H, $) {
              for (var ne in H.layers) $.writeMessage(3, Le, H.layers[ne]);
            })(re, V),
            V.finish()
          );
        }
        function Le(re, V) {
          var H;
          V.writeVarintField(15, re.version || 1),
            V.writeStringField(1, re.name || ""),
            V.writeVarintField(5, re.extent || 4096);
          var $ = { keys: [], values: [], keycache: {}, valuecache: {} };
          for (H = 0; H < re.length; H++)
            ($.feature = re.feature(H)), V.writeMessage(2, De, $);
          var ne = $.keys;
          for (H = 0; H < ne.length; H++) V.writeStringField(3, ne[H]);
          var ve = $.values;
          for (H = 0; H < ve.length; H++) V.writeMessage(4, Gt, ve[H]);
        }
        function De(re, V) {
          var H = re.feature;
          H.id !== void 0 && V.writeVarintField(1, H.id),
            V.writeMessage(2, st, re),
            V.writeVarintField(3, H.type),
            V.writeMessage(4, Rt, H);
        }
        function st(re, V) {
          var H = re.feature,
            $ = re.keys,
            ne = re.values,
            ve = re.keycache,
            xe = re.valuecache;
          for (var ke in H.properties) {
            var me = H.properties[ke],
              we = ve[ke];
            if (me !== null) {
              we === void 0 && ($.push(ke), (ve[ke] = we = $.length - 1)),
                V.writeVarint(we);
              var Ze = typeof me;
              Ze !== "string" &&
                Ze !== "boolean" &&
                Ze !== "number" &&
                (me = JSON.stringify(me));
              var Qe = Ze + ":" + me,
                Xe = xe[Qe];
              Xe === void 0 && (ne.push(me), (xe[Qe] = Xe = ne.length - 1)),
                V.writeVarint(Xe);
            }
          }
        }
        function qe(re, V) {
          return (V << 3) + (7 & re);
        }
        function zt(re) {
          return (re << 1) ^ (re >> 31);
        }
        function Rt(re, V) {
          for (
            var H = re.loadGeometry(),
              $ = re.type,
              ne = 0,
              ve = 0,
              xe = H.length,
              ke = 0;
            ke < xe;
            ke++
          ) {
            var me = H[ke],
              we = 1;
            $ === 1 && (we = me.length), V.writeVarint(qe(1, we));
            for (
              var Ze = $ === 3 ? me.length - 1 : me.length, Qe = 0;
              Qe < Ze;
              Qe++
            ) {
              Qe === 1 && $ !== 1 && V.writeVarint(qe(2, Ze - 1));
              var Xe = me[Qe].x - ne,
                jt = me[Qe].y - ve;
              V.writeVarint(zt(Xe)),
                V.writeVarint(zt(jt)),
                (ne += Xe),
                (ve += jt);
            }
            $ === 3 && V.writeVarint(qe(7, 1));
          }
        }
        function Gt(re, V) {
          var H = typeof re;
          H === "string"
            ? V.writeStringField(1, re)
            : H === "boolean"
            ? V.writeBooleanField(7, re)
            : H === "number" &&
              (re % 1 != 0
                ? V.writeDoubleField(3, re)
                : re < 0
                ? V.writeSVarintField(6, re)
                : V.writeVarintField(5, re));
        }
        (q.exports = fe),
          (q.exports.fromVectorTileJs = fe),
          (q.exports.fromGeojsonVt = function (re, V) {
            V = V || {};
            var H = {};
            for (var $ in re)
              (H[$] = new Te(re[$].features, V)),
                (H[$].name = $),
                (H[$].version = V.version),
                (H[$].extent = V.extent);
            return fe({ layers: H });
          }),
          (q.exports.GeoJSONWrapper = Te);
        var qt = o.bv(q.exports);
        let ct = {
            minZoom: 0,
            maxZoom: 16,
            minPoints: 2,
            radius: 40,
            extent: 512,
            nodeSize: 64,
            log: !1,
            generateId: !1,
            reduce: null,
            map: (re) => re,
          },
          vt =
            Math.fround ||
            ((ht = new Float32Array(1)), (re) => ((ht[0] = +re), ht[0]));
        var ht;
        let Vt = 3,
          hi = 5,
          Pi = 6;
        class Zt {
          constructor(V) {
            (this.options = Object.assign(Object.create(ct), V)),
              (this.trees = new Array(this.options.maxZoom + 1)),
              (this.stride = this.options.reduce ? 7 : 6),
              (this.clusterProps = []);
          }
          load(V) {
            let { log: H, minZoom: $, maxZoom: ne } = this.options;
            H && console.time("total time");
            let ve = `prepare ${V.length} points`;
            H && console.time(ve), (this.points = V);
            let xe = [];
            for (let me = 0; me < V.length; me++) {
              let we = V[me];
              if (!we.geometry) continue;
              let [Ze, Qe] = we.geometry.coordinates,
                Xe = vt(Bt(Ze)),
                jt = vt(ei(Qe));
              xe.push(Xe, jt, 1 / 0, me, -1, 1),
                this.options.reduce && xe.push(0);
            }
            let ke = (this.trees[ne + 1] = this._createTree(xe));
            H && console.timeEnd(ve);
            for (let me = ne; me >= $; me--) {
              let we = +Date.now();
              (ke = this.trees[me] = this._createTree(this._cluster(ke, me))),
                H &&
                  console.log(
                    "z%d: %d clusters in %dms",
                    me,
                    ke.numItems,
                    +Date.now() - we
                  );
            }
            return H && console.timeEnd("total time"), this;
          }
          getClusters(V, H) {
            let $ = ((((V[0] + 180) % 360) + 360) % 360) - 180,
              ne = Math.max(-90, Math.min(90, V[1])),
              ve =
                V[2] === 180 ? 180 : ((((V[2] + 180) % 360) + 360) % 360) - 180,
              xe = Math.max(-90, Math.min(90, V[3]));
            if (V[2] - V[0] >= 360) ($ = -180), (ve = 180);
            else if ($ > ve) {
              let Qe = this.getClusters([$, ne, 180, xe], H),
                Xe = this.getClusters([-180, ne, ve, xe], H);
              return Qe.concat(Xe);
            }
            let ke = this.trees[this._limitZoom(H)],
              me = ke.range(Bt($), ei(xe), Bt(ve), ei(ne)),
              we = ke.data,
              Ze = [];
            for (let Qe of me) {
              let Xe = this.stride * Qe;
              Ze.push(
                we[Xe + hi] > 1
                  ? Re(we, Xe, this.clusterProps)
                  : this.points[we[Xe + Vt]]
              );
            }
            return Ze;
          }
          getChildren(V) {
            let H = this._getOriginId(V),
              $ = this._getOriginZoom(V),
              ne = "No cluster with the specified id.",
              ve = this.trees[$];
            if (!ve) throw new Error(ne);
            let xe = ve.data;
            if (H * this.stride >= xe.length) throw new Error(ne);
            let ke =
                this.options.radius /
                (this.options.extent * Math.pow(2, $ - 1)),
              me = ve.within(xe[H * this.stride], xe[H * this.stride + 1], ke),
              we = [];
            for (let Ze of me) {
              let Qe = Ze * this.stride;
              xe[Qe + 4] === V &&
                we.push(
                  xe[Qe + hi] > 1
                    ? Re(xe, Qe, this.clusterProps)
                    : this.points[xe[Qe + Vt]]
                );
            }
            if (we.length === 0) throw new Error(ne);
            return we;
          }
          getLeaves(V, H, $) {
            let ne = [];
            return (
              this._appendLeaves(ne, V, (H = H || 10), ($ = $ || 0), 0), ne
            );
          }
          getTile(V, H, $) {
            let ne = this.trees[this._limitZoom(V)],
              ve = Math.pow(2, V),
              { extent: xe, radius: ke } = this.options,
              me = ke / xe,
              we = ($ - me) / ve,
              Ze = ($ + 1 + me) / ve,
              Qe = { features: [] };
            return (
              this._addTileFeatures(
                ne.range((H - me) / ve, we, (H + 1 + me) / ve, Ze),
                ne.data,
                H,
                $,
                ve,
                Qe
              ),
              H === 0 &&
                this._addTileFeatures(
                  ne.range(1 - me / ve, we, 1, Ze),
                  ne.data,
                  ve,
                  $,
                  ve,
                  Qe
                ),
              H === ve - 1 &&
                this._addTileFeatures(
                  ne.range(0, we, me / ve, Ze),
                  ne.data,
                  -1,
                  $,
                  ve,
                  Qe
                ),
              Qe.features.length ? Qe : null
            );
          }
          getClusterExpansionZoom(V) {
            let H = this._getOriginZoom(V) - 1;
            for (; H <= this.options.maxZoom; ) {
              let $ = this.getChildren(V);
              if ((H++, $.length !== 1)) break;
              V = $[0].properties.cluster_id;
            }
            return H;
          }
          _appendLeaves(V, H, $, ne, ve) {
            let xe = this.getChildren(H);
            for (let ke of xe) {
              let me = ke.properties;
              if (
                (me && me.cluster
                  ? ve + me.point_count <= ne
                    ? (ve += me.point_count)
                    : (ve = this._appendLeaves(V, me.cluster_id, $, ne, ve))
                  : ve < ne
                  ? ve++
                  : V.push(ke),
                V.length === $)
              )
                break;
            }
            return ve;
          }
          _createTree(V) {
            let H = new o.au(
              (V.length / this.stride) | 0,
              this.options.nodeSize,
              Float32Array
            );
            for (let $ = 0; $ < V.length; $ += this.stride)
              H.add(V[$], V[$ + 1]);
            return H.finish(), (H.data = V), H;
          }
          _addTileFeatures(V, H, $, ne, ve, xe) {
            for (let ke of V) {
              let me = ke * this.stride,
                we = H[me + hi] > 1,
                Ze,
                Qe,
                Xe;
              if (we)
                (Ze = Ce(H, me, this.clusterProps)),
                  (Qe = H[me]),
                  (Xe = H[me + 1]);
              else {
                let ti = this.points[H[me + Vt]];
                Ze = ti.properties;
                let [zi, di] = ti.geometry.coordinates;
                (Qe = Bt(zi)), (Xe = ei(di));
              }
              let jt = {
                  type: 1,
                  geometry: [
                    [
                      Math.round(this.options.extent * (Qe * ve - $)),
                      Math.round(this.options.extent * (Xe * ve - ne)),
                    ],
                  ],
                  tags: Ze,
                },
                oi;
              (oi =
                we || this.options.generateId
                  ? H[me + Vt]
                  : this.points[H[me + Vt]].id),
                oi !== void 0 && (jt.id = oi),
                xe.features.push(jt);
            }
          }
          _limitZoom(V) {
            return Math.max(
              this.options.minZoom,
              Math.min(Math.floor(+V), this.options.maxZoom + 1)
            );
          }
          _cluster(V, H) {
            let {
                radius: $,
                extent: ne,
                reduce: ve,
                minPoints: xe,
              } = this.options,
              ke = $ / (ne * Math.pow(2, H)),
              me = V.data,
              we = [],
              Ze = this.stride;
            for (let Qe = 0; Qe < me.length; Qe += Ze) {
              if (me[Qe + 2] <= H) continue;
              me[Qe + 2] = H;
              let Xe = me[Qe],
                jt = me[Qe + 1],
                oi = V.within(me[Qe], me[Qe + 1], ke),
                ti = me[Qe + hi],
                zi = ti;
              for (let di of oi) {
                let lr = di * Ze;
                me[lr + 2] > H && (zi += me[lr + hi]);
              }
              if (zi > ti && zi >= xe) {
                let di,
                  lr = Xe * ti,
                  Ni = jt * ti,
                  Wi = -1,
                  ci = (((Qe / Ze) | 0) << 5) + (H + 1) + this.points.length;
                for (let br of oi) {
                  let Or = br * Ze;
                  if (me[Or + 2] <= H) continue;
                  me[Or + 2] = H;
                  let In = me[Or + hi];
                  (lr += me[Or] * In),
                    (Ni += me[Or + 1] * In),
                    (me[Or + 4] = ci),
                    ve &&
                      (di ||
                        ((di = this._map(me, Qe, !0)),
                        (Wi = this.clusterProps.length),
                        this.clusterProps.push(di)),
                      ve(di, this._map(me, Or)));
                }
                (me[Qe + 4] = ci),
                  we.push(lr / zi, Ni / zi, 1 / 0, ci, -1, zi),
                  ve && we.push(Wi);
              } else {
                for (let di = 0; di < Ze; di++) we.push(me[Qe + di]);
                if (zi > 1)
                  for (let di of oi) {
                    let lr = di * Ze;
                    if (!(me[lr + 2] <= H)) {
                      me[lr + 2] = H;
                      for (let Ni = 0; Ni < Ze; Ni++) we.push(me[lr + Ni]);
                    }
                  }
              }
            }
            return we;
          }
          _getOriginId(V) {
            return (V - this.points.length) >> 5;
          }
          _getOriginZoom(V) {
            return (V - this.points.length) % 32;
          }
          _map(V, H, $) {
            if (V[H + hi] > 1) {
              let xe = this.clusterProps[V[H + Pi]];
              return $ ? Object.assign({}, xe) : xe;
            }
            let ne = this.points[V[H + Vt]].properties,
              ve = this.options.map(ne);
            return $ && ve === ne ? Object.assign({}, ve) : ve;
          }
        }
        function Re(re, V, H) {
          return {
            type: "Feature",
            id: re[V + Vt],
            properties: Ce(re, V, H),
            geometry: {
              type: "Point",
              coordinates: [(($ = re[V]), 360 * ($ - 0.5)), Li(re[V + 1])],
            },
          };
          var $;
        }
        function Ce(re, V, H) {
          let $ = re[V + hi],
            ne =
              $ >= 1e4
                ? `${Math.round($ / 1e3)}k`
                : $ >= 1e3
                ? Math.round($ / 100) / 10 + "k"
                : $,
            ve = re[V + Pi],
            xe = ve === -1 ? {} : Object.assign({}, H[ve]);
          return Object.assign(xe, {
            cluster: !0,
            cluster_id: re[V + Vt],
            point_count: $,
            point_count_abbreviated: ne,
          });
        }
        function Bt(re) {
          return re / 360 + 0.5;
        }
        function ei(re) {
          let V = Math.sin((re * Math.PI) / 180),
            H = 0.5 - (0.25 * Math.log((1 + V) / (1 - V))) / Math.PI;
          return H < 0 ? 0 : H > 1 ? 1 : H;
        }
        function Li(re) {
          let V = ((180 - 360 * re) * Math.PI) / 180;
          return (360 * Math.atan(Math.exp(V))) / Math.PI - 90;
        }
        function it(re, V, H, $) {
          for (
            var ne,
              ve = $,
              xe = (H - V) >> 1,
              ke = H - V,
              me = re[V],
              we = re[V + 1],
              Ze = re[H],
              Qe = re[H + 1],
              Xe = V + 3;
            Xe < H;
            Xe += 3
          ) {
            var jt = ii(re[Xe], re[Xe + 1], me, we, Ze, Qe);
            if (jt > ve) (ne = Xe), (ve = jt);
            else if (jt === ve) {
              var oi = Math.abs(Xe - xe);
              oi < ke && ((ne = Xe), (ke = oi));
            }
          }
          ve > $ &&
            (ne - V > 3 && it(re, V, ne, $),
            (re[ne + 2] = ve),
            H - ne > 3 && it(re, ne, H, $));
        }
        function ii(re, V, H, $, ne, ve) {
          var xe = ne - H,
            ke = ve - $;
          if (xe !== 0 || ke !== 0) {
            var me = ((re - H) * xe + (V - $) * ke) / (xe * xe + ke * ke);
            me > 1
              ? ((H = ne), ($ = ve))
              : me > 0 && ((H += xe * me), ($ += ke * me));
          }
          return (xe = re - H) * xe + (ke = V - $) * ke;
        }
        function wi(re, V, H, $) {
          var ne = {
            id: re === void 0 ? null : re,
            type: V,
            geometry: H,
            tags: $,
            minX: 1 / 0,
            minY: 1 / 0,
            maxX: -1 / 0,
            maxY: -1 / 0,
          };
          return (
            (function (ve) {
              var xe = ve.geometry,
                ke = ve.type;
              if (ke === "Point" || ke === "MultiPoint" || ke === "LineString")
                sr(ve, xe);
              else if (ke === "Polygon" || ke === "MultiLineString")
                for (var me = 0; me < xe.length; me++) sr(ve, xe[me]);
              else if (ke === "MultiPolygon")
                for (me = 0; me < xe.length; me++)
                  for (var we = 0; we < xe[me].length; we++) sr(ve, xe[me][we]);
            })(ne),
            ne
          );
        }
        function sr(re, V) {
          for (var H = 0; H < V.length; H += 3)
            (re.minX = Math.min(re.minX, V[H])),
              (re.minY = Math.min(re.minY, V[H + 1])),
              (re.maxX = Math.max(re.maxX, V[H])),
              (re.maxY = Math.max(re.maxY, V[H + 1]));
        }
        function Wr(re, V, H, $) {
          if (V.geometry) {
            var ne = V.geometry.coordinates,
              ve = V.geometry.type,
              xe = Math.pow(H.tolerance / ((1 << H.maxZoom) * H.extent), 2),
              ke = [],
              me = V.id;
            if (
              (H.promoteId
                ? (me = V.properties[H.promoteId])
                : H.generateId && (me = $ || 0),
              ve === "Point")
            )
              pt(ne, ke);
            else if (ve === "MultiPoint")
              for (var we = 0; we < ne.length; we++) pt(ne[we], ke);
            else if (ve === "LineString") Ai(ne, ke, xe, !1);
            else if (ve === "MultiLineString") {
              if (H.lineMetrics) {
                for (we = 0; we < ne.length; we++)
                  Ai(ne[we], (ke = []), xe, !1),
                    re.push(wi(me, "LineString", ke, V.properties));
                return;
              }
              je(ne, ke, xe, !1);
            } else if (ve === "Polygon") je(ne, ke, xe, !0);
            else {
              if (ve !== "MultiPolygon") {
                if (ve === "GeometryCollection") {
                  for (we = 0; we < V.geometry.geometries.length; we++)
                    Wr(
                      re,
                      {
                        id: me,
                        geometry: V.geometry.geometries[we],
                        properties: V.properties,
                      },
                      H,
                      $
                    );
                  return;
                }
                throw new Error("Input data is not a valid GeoJSON object.");
              }
              for (we = 0; we < ne.length; we++) {
                var Ze = [];
                je(ne[we], Ze, xe, !0), ke.push(Ze);
              }
            }
            re.push(wi(me, ve, ke, V.properties));
          }
        }
        function pt(re, V) {
          V.push(Si(re[0])), V.push(gi(re[1])), V.push(0);
        }
        function Ai(re, V, H, $) {
          for (var ne, ve, xe = 0, ke = 0; ke < re.length; ke++) {
            var me = Si(re[ke][0]),
              we = gi(re[ke][1]);
            V.push(me),
              V.push(we),
              V.push(0),
              ke > 0 &&
                (xe += $
                  ? (ne * we - me * ve) / 2
                  : Math.sqrt(Math.pow(me - ne, 2) + Math.pow(we - ve, 2))),
              (ne = me),
              (ve = we);
          }
          var Ze = V.length - 3;
          (V[2] = 1),
            it(V, 0, Ze, H),
            (V[Ze + 2] = 1),
            (V.size = Math.abs(xe)),
            (V.start = 0),
            (V.end = V.size);
        }
        function je(re, V, H, $) {
          for (var ne = 0; ne < re.length; ne++) {
            var ve = [];
            Ai(re[ne], ve, H, $), V.push(ve);
          }
        }
        function Si(re) {
          return re / 360 + 0.5;
        }
        function gi(re) {
          var V = Math.sin((re * Math.PI) / 180),
            H = 0.5 - (0.25 * Math.log((1 + V) / (1 - V))) / Math.PI;
          return H < 0 ? 0 : H > 1 ? 1 : H;
        }
        function ui(re, V, H, $, ne, ve, xe, ke) {
          if ((($ /= V), ve >= (H /= V) && xe < $)) return re;
          if (xe < H || ve >= $) return null;
          for (var me = [], we = 0; we < re.length; we++) {
            var Ze = re[we],
              Qe = Ze.geometry,
              Xe = Ze.type,
              jt = ne === 0 ? Ze.minX : Ze.minY,
              oi = ne === 0 ? Ze.maxX : Ze.maxY;
            if (jt >= H && oi < $) me.push(Ze);
            else if (!(oi < H || jt >= $)) {
              var ti = [];
              if (Xe === "Point" || Xe === "MultiPoint") pr(Qe, ti, H, $, ne);
              else if (Xe === "LineString")
                Er(Qe, ti, H, $, ne, !1, ke.lineMetrics);
              else if (Xe === "MultiLineString") tn(Qe, ti, H, $, ne, !1);
              else if (Xe === "Polygon") tn(Qe, ti, H, $, ne, !0);
              else if (Xe === "MultiPolygon")
                for (var zi = 0; zi < Qe.length; zi++) {
                  var di = [];
                  tn(Qe[zi], di, H, $, ne, !0), di.length && ti.push(di);
                }
              if (ti.length) {
                if (ke.lineMetrics && Xe === "LineString") {
                  for (zi = 0; zi < ti.length; zi++)
                    me.push(wi(Ze.id, Xe, ti[zi], Ze.tags));
                  continue;
                }
                (Xe !== "LineString" && Xe !== "MultiLineString") ||
                  (ti.length === 1
                    ? ((Xe = "LineString"), (ti = ti[0]))
                    : (Xe = "MultiLineString")),
                  (Xe !== "Point" && Xe !== "MultiPoint") ||
                    (Xe = ti.length === 3 ? "Point" : "MultiPoint"),
                  me.push(wi(Ze.id, Xe, ti, Ze.tags));
              }
            }
          }
          return me.length ? me : null;
        }
        function pr(re, V, H, $, ne) {
          for (var ve = 0; ve < re.length; ve += 3) {
            var xe = re[ve + ne];
            xe >= H &&
              xe <= $ &&
              (V.push(re[ve]), V.push(re[ve + 1]), V.push(re[ve + 2]));
          }
        }
        function Er(re, V, H, $, ne, ve, xe) {
          for (
            var ke,
              me,
              we = en(re),
              Ze = ne === 0 ? Vn : An,
              Qe = re.start,
              Xe = 0;
            Xe < re.length - 3;
            Xe += 3
          ) {
            var jt = re[Xe],
              oi = re[Xe + 1],
              ti = re[Xe + 2],
              zi = re[Xe + 3],
              di = re[Xe + 4],
              lr = ne === 0 ? jt : oi,
              Ni = ne === 0 ? zi : di,
              Wi = !1;
            xe && (ke = Math.sqrt(Math.pow(jt - zi, 2) + Math.pow(oi - di, 2))),
              lr < H
                ? Ni > H &&
                  ((me = Ze(we, jt, oi, zi, di, H)),
                  xe && (we.start = Qe + ke * me))
                : lr > $
                ? Ni < $ &&
                  ((me = Ze(we, jt, oi, zi, di, $)),
                  xe && (we.start = Qe + ke * me))
                : yn(we, jt, oi, ti),
              Ni < H &&
                lr >= H &&
                ((me = Ze(we, jt, oi, zi, di, H)), (Wi = !0)),
              Ni > $ &&
                lr <= $ &&
                ((me = Ze(we, jt, oi, zi, di, $)), (Wi = !0)),
              !ve &&
                Wi &&
                (xe && (we.end = Qe + ke * me), V.push(we), (we = en(re))),
              xe && (Qe += ke);
          }
          var ci = re.length - 3;
          (jt = re[ci]),
            (oi = re[ci + 1]),
            (ti = re[ci + 2]),
            (lr = ne === 0 ? jt : oi) >= H && lr <= $ && yn(we, jt, oi, ti),
            (ci = we.length - 3),
            ve &&
              ci >= 3 &&
              (we[ci] !== we[0] || we[ci + 1] !== we[1]) &&
              yn(we, we[0], we[1], we[2]),
            we.length && V.push(we);
        }
        function en(re) {
          var V = [];
          return (V.size = re.size), (V.start = re.start), (V.end = re.end), V;
        }
        function tn(re, V, H, $, ne, ve) {
          for (var xe = 0; xe < re.length; xe++)
            Er(re[xe], V, H, $, ne, ve, !1);
        }
        function yn(re, V, H, $) {
          re.push(V), re.push(H), re.push($);
        }
        function Vn(re, V, H, $, ne, ve) {
          var xe = (ve - V) / ($ - V);
          return re.push(ve), re.push(H + (ne - H) * xe), re.push(1), xe;
        }
        function An(re, V, H, $, ne, ve) {
          var xe = (ve - H) / (ne - H);
          return re.push(V + ($ - V) * xe), re.push(ve), re.push(1), xe;
        }
        function Zr(re, V) {
          for (var H = [], $ = 0; $ < re.length; $++) {
            var ne,
              ve = re[$],
              xe = ve.type;
            if (xe === "Point" || xe === "MultiPoint" || xe === "LineString")
              ne = at(ve.geometry, V);
            else if (xe === "MultiLineString" || xe === "Polygon") {
              ne = [];
              for (var ke = 0; ke < ve.geometry.length; ke++)
                ne.push(at(ve.geometry[ke], V));
            } else if (xe === "MultiPolygon")
              for (ne = [], ke = 0; ke < ve.geometry.length; ke++) {
                for (var me = [], we = 0; we < ve.geometry[ke].length; we++)
                  me.push(at(ve.geometry[ke][we], V));
                ne.push(me);
              }
            H.push(wi(ve.id, xe, ne, ve.tags));
          }
          return H;
        }
        function at(re, V) {
          var H = [];
          (H.size = re.size),
            re.start !== void 0 && ((H.start = re.start), (H.end = re.end));
          for (var $ = 0; $ < re.length; $ += 3)
            H.push(re[$] + V, re[$ + 1], re[$ + 2]);
          return H;
        }
        function Pr(re, V) {
          if (re.transformed) return re;
          var H,
            $,
            ne,
            ve = 1 << re.z,
            xe = re.x,
            ke = re.y;
          for (H = 0; H < re.features.length; H++) {
            var me = re.features[H],
              we = me.geometry,
              Ze = me.type;
            if (((me.geometry = []), Ze === 1))
              for ($ = 0; $ < we.length; $ += 2)
                me.geometry.push(Dr(we[$], we[$ + 1], V, ve, xe, ke));
            else
              for ($ = 0; $ < we.length; $++) {
                var Qe = [];
                for (ne = 0; ne < we[$].length; ne += 2)
                  Qe.push(Dr(we[$][ne], we[$][ne + 1], V, ve, xe, ke));
                me.geometry.push(Qe);
              }
          }
          return (re.transformed = !0), re;
        }
        function Dr(re, V, H, $, ne, ve) {
          return [Math.round(H * (re * $ - ne)), Math.round(H * (V * $ - ve))];
        }
        function Kn(re, V, H, $, ne) {
          for (
            var ve =
                V === ne.maxZoom ? 0 : ne.tolerance / ((1 << V) * ne.extent),
              xe = {
                features: [],
                numPoints: 0,
                numSimplified: 0,
                numFeatures: 0,
                source: null,
                x: H,
                y: $,
                z: V,
                transformed: !1,
                minX: 2,
                minY: 1,
                maxX: -1,
                maxY: 0,
              },
              ke = 0;
            ke < re.length;
            ke++
          ) {
            xe.numFeatures++, ko(xe, re[ke], ve, ne);
            var me = re[ke].minX,
              we = re[ke].minY,
              Ze = re[ke].maxX,
              Qe = re[ke].maxY;
            me < xe.minX && (xe.minX = me),
              we < xe.minY && (xe.minY = we),
              Ze > xe.maxX && (xe.maxX = Ze),
              Qe > xe.maxY && (xe.maxY = Qe);
          }
          return xe;
        }
        function ko(re, V, H, $) {
          var ne = V.geometry,
            ve = V.type,
            xe = [];
          if (ve === "Point" || ve === "MultiPoint")
            for (var ke = 0; ke < ne.length; ke += 3)
              xe.push(ne[ke]),
                xe.push(ne[ke + 1]),
                re.numPoints++,
                re.numSimplified++;
          else if (ve === "LineString") ft(xe, ne, re, H, !1, !1);
          else if (ve === "MultiLineString" || ve === "Polygon")
            for (ke = 0; ke < ne.length; ke++)
              ft(xe, ne[ke], re, H, ve === "Polygon", ke === 0);
          else if (ve === "MultiPolygon")
            for (var me = 0; me < ne.length; me++) {
              var we = ne[me];
              for (ke = 0; ke < we.length; ke++)
                ft(xe, we[ke], re, H, !0, ke === 0);
            }
          if (xe.length) {
            var Ze = V.tags || null;
            if (ve === "LineString" && $.lineMetrics) {
              for (var Qe in ((Ze = {}), V.tags)) Ze[Qe] = V.tags[Qe];
              (Ze.mapbox_clip_start = ne.start / ne.size),
                (Ze.mapbox_clip_end = ne.end / ne.size);
            }
            var Xe = {
              geometry: xe,
              type:
                ve === "Polygon" || ve === "MultiPolygon"
                  ? 3
                  : ve === "LineString" || ve === "MultiLineString"
                  ? 2
                  : 1,
              tags: Ze,
            };
            V.id !== null && (Xe.id = V.id), re.features.push(Xe);
          }
        }
        function ft(re, V, H, $, ne, ve) {
          var xe = $ * $;
          if ($ > 0 && V.size < (ne ? xe : $)) H.numPoints += V.length / 3;
          else {
            for (var ke = [], me = 0; me < V.length; me += 3)
              ($ === 0 || V[me + 2] > xe) &&
                (H.numSimplified++, ke.push(V[me]), ke.push(V[me + 1])),
                H.numPoints++;
            ne &&
              (function (we, Ze) {
                for (
                  var Qe = 0, Xe = 0, jt = we.length, oi = jt - 2;
                  Xe < jt;
                  oi = Xe, Xe += 2
                )
                  Qe += (we[Xe] - we[oi]) * (we[Xe + 1] + we[oi + 1]);
                if (Qe > 0 === Ze)
                  for (Xe = 0, jt = we.length; Xe < jt / 2; Xe += 2) {
                    var ti = we[Xe],
                      zi = we[Xe + 1];
                    (we[Xe] = we[jt - 2 - Xe]),
                      (we[Xe + 1] = we[jt - 1 - Xe]),
                      (we[jt - 2 - Xe] = ti),
                      (we[jt - 1 - Xe] = zi);
                  }
              })(ke, ve),
              re.push(ke);
          }
        }
        function Tt(re, V) {
          var H = (V = this.options =
            (function (ne, ve) {
              for (var xe in ve) ne[xe] = ve[xe];
              return ne;
            })(Object.create(this.options), V)).debug;
          if (
            (H && console.time("preprocess data"),
            V.maxZoom < 0 || V.maxZoom > 24)
          )
            throw new Error("maxZoom should be in the 0-24 range");
          if (V.promoteId && V.generateId)
            throw new Error(
              "promoteId and generateId cannot be used together."
            );
          var $ = (function (ne, ve) {
            var xe = [];
            if (ne.type === "FeatureCollection")
              for (var ke = 0; ke < ne.features.length; ke++)
                Wr(xe, ne.features[ke], ve, ke);
            else Wr(xe, ne.type === "Feature" ? ne : { geometry: ne }, ve);
            return xe;
          })(re, V);
          (this.tiles = {}),
            (this.tileCoords = []),
            H &&
              (console.timeEnd("preprocess data"),
              console.log(
                "index: maxZoom: %d, maxPoints: %d",
                V.indexMaxZoom,
                V.indexMaxPoints
              ),
              console.time("generate tiles"),
              (this.stats = {}),
              (this.total = 0)),
            ($ = (function (ne, ve) {
              var xe = ve.buffer / ve.extent,
                ke = ne,
                me = ui(ne, 1, -1 - xe, xe, 0, -1, 2, ve),
                we = ui(ne, 1, 1 - xe, 2 + xe, 0, -1, 2, ve);
              return (
                (me || we) &&
                  ((ke = ui(ne, 1, -xe, 1 + xe, 0, -1, 2, ve) || []),
                  me && (ke = Zr(me, 1).concat(ke)),
                  we && (ke = ke.concat(Zr(we, -1)))),
                ke
              );
            })($, V)),
            $.length && this.splitTile($, 0, 0, 0),
            H &&
              ($.length &&
                console.log(
                  "features: %d, points: %d",
                  this.tiles[0].numFeatures,
                  this.tiles[0].numPoints
                ),
              console.timeEnd("generate tiles"),
              console.log(
                "tiles generated:",
                this.total,
                JSON.stringify(this.stats)
              ));
        }
        function Fe(re, V, H) {
          return 32 * ((1 << re) * H + V) + re;
        }
        function At(re, V) {
          return V ? re.properties[V] : re.id;
        }
        function $t(re, V) {
          if (re == null) return !0;
          if (re.type === "Feature") return At(re, V) != null;
          if (re.type === "FeatureCollection") {
            let H = new Set();
            for (let $ of re.features) {
              let ne = At($, V);
              if (ne == null || H.has(ne)) return !1;
              H.add(ne);
            }
            return !0;
          }
          return !1;
        }
        function Pt(re, V) {
          let H = new Map();
          if (re != null)
            if (re.type === "Feature") H.set(At(re, V), re);
            else for (let $ of re.features) H.set(At($, V), $);
          return H;
        }
        (Tt.prototype.options = {
          maxZoom: 14,
          indexMaxZoom: 5,
          indexMaxPoints: 1e5,
          tolerance: 3,
          extent: 4096,
          buffer: 64,
          lineMetrics: !1,
          promoteId: null,
          generateId: !1,
          debug: 0,
        }),
          (Tt.prototype.splitTile = function (re, V, H, $, ne, ve, xe) {
            for (
              var ke = [re, V, H, $], me = this.options, we = me.debug;
              ke.length;

            ) {
              ($ = ke.pop()), (H = ke.pop()), (V = ke.pop()), (re = ke.pop());
              var Ze = 1 << V,
                Qe = Fe(V, H, $),
                Xe = this.tiles[Qe];
              if (
                !Xe &&
                (we > 1 && console.time("creation"),
                (Xe = this.tiles[Qe] = Kn(re, V, H, $, me)),
                this.tileCoords.push({ z: V, x: H, y: $ }),
                we)
              ) {
                we > 1 &&
                  (console.log(
                    "tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",
                    V,
                    H,
                    $,
                    Xe.numFeatures,
                    Xe.numPoints,
                    Xe.numSimplified
                  ),
                  console.timeEnd("creation"));
                var jt = "z" + V;
                (this.stats[jt] = (this.stats[jt] || 0) + 1), this.total++;
              }
              if (((Xe.source = re), ne)) {
                if (V === me.maxZoom || V === ne) continue;
                var oi = 1 << (ne - V);
                if (H !== Math.floor(ve / oi) || $ !== Math.floor(xe / oi))
                  continue;
              } else if (
                V === me.indexMaxZoom ||
                Xe.numPoints <= me.indexMaxPoints
              )
                continue;
              if (((Xe.source = null), re.length !== 0)) {
                we > 1 && console.time("clipping");
                var ti,
                  zi,
                  di,
                  lr,
                  Ni,
                  Wi,
                  ci = (0.5 * me.buffer) / me.extent,
                  br = 0.5 - ci,
                  Or = 0.5 + ci,
                  In = 1 + ci;
                (ti = zi = di = lr = null),
                  (Ni = ui(re, Ze, H - ci, H + Or, 0, Xe.minX, Xe.maxX, me)),
                  (Wi = ui(re, Ze, H + br, H + In, 0, Xe.minX, Xe.maxX, me)),
                  (re = null),
                  Ni &&
                    ((ti = ui(Ni, Ze, $ - ci, $ + Or, 1, Xe.minY, Xe.maxY, me)),
                    (zi = ui(Ni, Ze, $ + br, $ + In, 1, Xe.minY, Xe.maxY, me)),
                    (Ni = null)),
                  Wi &&
                    ((di = ui(Wi, Ze, $ - ci, $ + Or, 1, Xe.minY, Xe.maxY, me)),
                    (lr = ui(Wi, Ze, $ + br, $ + In, 1, Xe.minY, Xe.maxY, me)),
                    (Wi = null)),
                  we > 1 && console.timeEnd("clipping"),
                  ke.push(ti || [], V + 1, 2 * H, 2 * $),
                  ke.push(zi || [], V + 1, 2 * H, 2 * $ + 1),
                  ke.push(di || [], V + 1, 2 * H + 1, 2 * $),
                  ke.push(lr || [], V + 1, 2 * H + 1, 2 * $ + 1);
              }
            }
          }),
          (Tt.prototype.getTile = function (re, V, H) {
            var $ = this.options,
              ne = $.extent,
              ve = $.debug;
            if (re < 0 || re > 24) return null;
            var xe = 1 << re,
              ke = Fe(re, (V = ((V % xe) + xe) % xe), H);
            if (this.tiles[ke]) return Pr(this.tiles[ke], ne);
            ve > 1 && console.log("drilling down to z%d-%d-%d", re, V, H);
            for (var me, we = re, Ze = V, Qe = H; !me && we > 0; )
              we--,
                (Ze = Math.floor(Ze / 2)),
                (Qe = Math.floor(Qe / 2)),
                (me = this.tiles[Fe(we, Ze, Qe)]);
            return me && me.source
              ? (ve > 1 &&
                  console.log("found parent tile z%d-%d-%d", we, Ze, Qe),
                ve > 1 && console.time("drilling down"),
                this.splitTile(me.source, we, Ze, Qe, re, V, H),
                ve > 1 && console.timeEnd("drilling down"),
                this.tiles[ke] ? Pr(this.tiles[ke], ne) : null)
              : null;
          });
        class yi extends b {
          constructor() {
            super(...arguments), (this._dataUpdateable = new Map());
          }
          loadVectorTile(V, H) {
            return o._(this, void 0, void 0, function* () {
              let $ = V.tileID.canonical;
              if (!this._geoJSONIndex)
                throw new Error(
                  "Unable to parse the data into a cluster or geojson"
                );
              let ne = this._geoJSONIndex.getTile($.z, $.x, $.y);
              if (!ne) return null;
              let ve = new (class {
                  constructor(ke) {
                    (this.layers = { _geojsonTileLayer: this }),
                      (this.name = "_geojsonTileLayer"),
                      (this.extent = o.W),
                      (this.length = ke.length),
                      (this._features = ke);
                  }
                  feature(ke) {
                    return new (class {
                      constructor(me) {
                        (this._feature = me),
                          (this.extent = o.W),
                          (this.type = me.type),
                          (this.properties = me.tags),
                          "id" in me &&
                            !isNaN(me.id) &&
                            (this.id = parseInt(me.id, 10));
                      }
                      loadGeometry() {
                        if (this._feature.type === 1) {
                          let me = [];
                          for (let we of this._feature.geometry)
                            me.push([new o.P(we[0], we[1])]);
                          return me;
                        }
                        {
                          let me = [];
                          for (let we of this._feature.geometry) {
                            let Ze = [];
                            for (let Qe of we) Ze.push(new o.P(Qe[0], Qe[1]));
                            me.push(Ze);
                          }
                          return me;
                        }
                      }
                      toGeoJSON(me, we, Ze) {
                        return F.call(this, me, we, Ze);
                      }
                    })(this._features[ke]);
                  }
                })(ne.features),
                xe = qt(ve);
              return (
                (xe.byteOffset === 0 &&
                  xe.byteLength === xe.buffer.byteLength) ||
                  (xe = new Uint8Array(xe)),
                { vectorTile: ve, rawData: xe.buffer }
              );
            });
          }
          loadData(V) {
            return o._(this, void 0, void 0, function* () {
              var H;
              (H = this._pendingRequest) === null || H === void 0 || H.abort();
              let $ =
                !!(V && V.request && V.request.collectResourceTiming) &&
                new o.bs(V.request);
              this._pendingRequest = new AbortController();
              try {
                let ne = yield this.loadGeoJSON(V, this._pendingRequest);
                if ((delete this._pendingRequest, typeof ne != "object"))
                  throw new Error(
                    `Input data given to '${V.source}' is not a valid GeoJSON object.`
                  );
                if ((D(ne, !0), V.filter)) {
                  let xe = o.by(V.filter, {
                    type: "boolean",
                    "property-type": "data-driven",
                    overridable: !1,
                    transition: !1,
                  });
                  if (xe.result === "error")
                    throw new Error(
                      xe.value
                        .map((me) => `${me.key}: ${me.message}`)
                        .join(", ")
                    );
                  ne = {
                    type: "FeatureCollection",
                    features: ne.features.filter((me) =>
                      xe.value.evaluate({ zoom: 0 }, me)
                    ),
                  };
                }
                (this._geoJSONIndex = V.cluster
                  ? new Zt(
                      (function ({
                        superclusterOptions: xe,
                        clusterProperties: ke,
                      }) {
                        if (!ke || !xe) return xe;
                        let me = {},
                          we = {},
                          Ze = { accumulated: null, zoom: 0 },
                          Qe = { properties: null },
                          Xe = Object.keys(ke);
                        for (let jt of Xe) {
                          let [oi, ti] = ke[jt],
                            zi = o.by(ti),
                            di = o.by(
                              typeof oi == "string"
                                ? [oi, ["accumulated"], ["get", jt]]
                                : oi
                            );
                          (me[jt] = zi.value), (we[jt] = di.value);
                        }
                        return (
                          (xe.map = (jt) => {
                            Qe.properties = jt;
                            let oi = {};
                            for (let ti of Xe) oi[ti] = me[ti].evaluate(Ze, Qe);
                            return oi;
                          }),
                          (xe.reduce = (jt, oi) => {
                            Qe.properties = oi;
                            for (let ti of Xe)
                              (Ze.accumulated = jt[ti]),
                                (jt[ti] = we[ti].evaluate(Ze, Qe));
                          }),
                          xe
                        );
                      })(V)
                    ).load(ne.features)
                  : (function (xe, ke) {
                      return new Tt(xe, ke);
                    })(ne, V.geojsonVtOptions)),
                  (this.loaded = {});
                let ve = {};
                if ($) {
                  let xe = $.finish();
                  xe &&
                    ((ve.resourceTiming = {}),
                    (ve.resourceTiming[V.source] = JSON.parse(
                      JSON.stringify(xe)
                    )));
                }
                return ve;
              } catch (ne) {
                if ((delete this._pendingRequest, o.bz(ne)))
                  return { abandoned: !0 };
                throw ne;
              }
            });
          }
          reloadTile(V) {
            let H = this.loaded;
            return H && H[V.uid] ? super.reloadTile(V) : this.loadTile(V);
          }
          loadGeoJSON(V, H) {
            return o._(this, void 0, void 0, function* () {
              let { promoteId: $ } = V;
              if (V.request) {
                let ne = yield o.h(V.request, H);
                return (
                  (this._dataUpdateable = $t(ne.data, $)
                    ? Pt(ne.data, $)
                    : void 0),
                  ne.data
                );
              }
              if (typeof V.data == "string")
                try {
                  let ne = JSON.parse(V.data);
                  return (
                    (this._dataUpdateable = $t(ne, $) ? Pt(ne, $) : void 0), ne
                  );
                } catch {
                  throw new Error(
                    `Input data given to '${V.source}' is not a valid GeoJSON object.`
                  );
                }
              if (!V.dataDiff)
                throw new Error(
                  `Input data given to '${V.source}' is not a valid GeoJSON object.`
                );
              if (!this._dataUpdateable)
                throw new Error(
                  `Cannot update existing geojson data in ${V.source}`
                );
              return (
                (function (ne, ve, xe) {
                  var ke, me, we, Ze;
                  if ((ve.removeAll && ne.clear(), ve.remove))
                    for (let Qe of ve.remove) ne.delete(Qe);
                  if (ve.add)
                    for (let Qe of ve.add) {
                      let Xe = At(Qe, xe);
                      Xe != null && ne.set(Xe, Qe);
                    }
                  if (ve.update)
                    for (let Qe of ve.update) {
                      let Xe = ne.get(Qe.id);
                      if (Xe == null) continue;
                      let jt =
                        !Qe.removeAllProperties &&
                        (((ke = Qe.removeProperties) === null || ke === void 0
                          ? void 0
                          : ke.length) > 0 ||
                          ((me = Qe.addOrUpdateProperties) === null ||
                          me === void 0
                            ? void 0
                            : me.length) > 0);
                      if (
                        ((Qe.newGeometry || Qe.removeAllProperties || jt) &&
                          ((Xe = Object.assign({}, Xe)),
                          ne.set(Qe.id, Xe),
                          jt &&
                            (Xe.properties = Object.assign({}, Xe.properties))),
                        Qe.newGeometry && (Xe.geometry = Qe.newGeometry),
                        Qe.removeAllProperties)
                      )
                        Xe.properties = {};
                      else if (
                        ((we = Qe.removeProperties) === null || we === void 0
                          ? void 0
                          : we.length) > 0
                      )
                        for (let oi of Qe.removeProperties)
                          Object.prototype.hasOwnProperty.call(
                            Xe.properties,
                            oi
                          ) && delete Xe.properties[oi];
                      if (
                        ((Ze = Qe.addOrUpdateProperties) === null ||
                        Ze === void 0
                          ? void 0
                          : Ze.length) > 0
                      )
                        for (let {
                          key: oi,
                          value: ti,
                        } of Qe.addOrUpdateProperties)
                          Xe.properties[oi] = ti;
                    }
                })(this._dataUpdateable, V.dataDiff, $),
                {
                  type: "FeatureCollection",
                  features: Array.from(this._dataUpdateable.values()),
                }
              );
            });
          }
          removeSource(V) {
            return o._(this, void 0, void 0, function* () {
              this._pendingRequest && this._pendingRequest.abort();
            });
          }
          getClusterExpansionZoom(V) {
            return this._geoJSONIndex.getClusterExpansionZoom(V.clusterId);
          }
          getClusterChildren(V) {
            return this._geoJSONIndex.getChildren(V.clusterId);
          }
          getClusterLeaves(V) {
            return this._geoJSONIndex.getLeaves(V.clusterId, V.limit, V.offset);
          }
        }
        class Fi {
          constructor(V) {
            (this.self = V),
              (this.actor = new o.C(V)),
              (this.layerIndexes = {}),
              (this.availableImages = {}),
              (this.workerSources = {}),
              (this.demWorkerSources = {}),
              (this.externalWorkerSourceTypes = {}),
              (this.self.registerWorkerSource = (H, $) => {
                if (this.externalWorkerSourceTypes[H])
                  throw new Error(
                    `Worker source with name "${H}" already registered.`
                  );
                this.externalWorkerSourceTypes[H] = $;
              }),
              (this.self.addProtocol = o.bf),
              (this.self.removeProtocol = o.bg),
              (this.self.registerRTLTextPlugin = (H) => {
                if (o.bA.isParsed())
                  throw new Error("RTL text plugin already registered.");
                o.bA.setMethods(H);
              }),
              this.actor.registerMessageHandler("loadDEMTile", (H, $) =>
                this._getDEMWorkerSource(H, $.source).loadTile($)
              ),
              this.actor.registerMessageHandler("removeDEMTile", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  this._getDEMWorkerSource(H, $.source).removeTile($);
                })
              ),
              this.actor.registerMessageHandler(
                "getClusterExpansionZoom",
                (H, $) =>
                  o._(this, void 0, void 0, function* () {
                    return this._getWorkerSource(
                      H,
                      $.type,
                      $.source
                    ).getClusterExpansionZoom($);
                  })
              ),
              this.actor.registerMessageHandler("getClusterChildren", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  return this._getWorkerSource(
                    H,
                    $.type,
                    $.source
                  ).getClusterChildren($);
                })
              ),
              this.actor.registerMessageHandler("getClusterLeaves", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  return this._getWorkerSource(
                    H,
                    $.type,
                    $.source
                  ).getClusterLeaves($);
                })
              ),
              this.actor.registerMessageHandler("loadData", (H, $) =>
                this._getWorkerSource(H, $.type, $.source).loadData($)
              ),
              this.actor.registerMessageHandler("loadTile", (H, $) =>
                this._getWorkerSource(H, $.type, $.source).loadTile($)
              ),
              this.actor.registerMessageHandler("reloadTile", (H, $) =>
                this._getWorkerSource(H, $.type, $.source).reloadTile($)
              ),
              this.actor.registerMessageHandler("abortTile", (H, $) =>
                this._getWorkerSource(H, $.type, $.source).abortTile($)
              ),
              this.actor.registerMessageHandler("removeTile", (H, $) =>
                this._getWorkerSource(H, $.type, $.source).removeTile($)
              ),
              this.actor.registerMessageHandler("removeSource", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  if (
                    !this.workerSources[H] ||
                    !this.workerSources[H][$.type] ||
                    !this.workerSources[H][$.type][$.source]
                  )
                    return;
                  let ne = this.workerSources[H][$.type][$.source];
                  delete this.workerSources[H][$.type][$.source],
                    ne.removeSource !== void 0 && ne.removeSource($);
                })
              ),
              this.actor.registerMessageHandler("removeMap", (H) =>
                o._(this, void 0, void 0, function* () {
                  delete this.layerIndexes[H],
                    delete this.availableImages[H],
                    delete this.workerSources[H],
                    delete this.demWorkerSources[H];
                })
              ),
              this.actor.registerMessageHandler("setReferrer", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  this.referrer = $;
                })
              ),
              this.actor.registerMessageHandler("syncRTLPluginState", (H, $) =>
                this._syncRTLPluginState(H, $)
              ),
              this.actor.registerMessageHandler("importScript", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  this.self.importScripts($);
                })
              ),
              this.actor.registerMessageHandler("setImages", (H, $) =>
                this._setImages(H, $)
              ),
              this.actor.registerMessageHandler("updateLayers", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  this._getLayerIndex(H).update($.layers, $.removedIds);
                })
              ),
              this.actor.registerMessageHandler("setLayers", (H, $) =>
                o._(this, void 0, void 0, function* () {
                  this._getLayerIndex(H).replace($);
                })
              );
          }
          _setImages(V, H) {
            return o._(this, void 0, void 0, function* () {
              this.availableImages[V] = H;
              for (let $ in this.workerSources[V]) {
                let ne = this.workerSources[V][$];
                for (let ve in ne) ne[ve].availableImages = H;
              }
            });
          }
          _syncRTLPluginState(V, H) {
            return o._(this, void 0, void 0, function* () {
              if (o.bA.isParsed()) return o.bA.getState();
              if (H.pluginStatus !== "loading") return o.bA.setState(H), H;
              let $ = H.pluginURL;
              if ((this.self.importScripts($), o.bA.isParsed())) {
                let ne = { pluginStatus: "loaded", pluginURL: $ };
                return o.bA.setState(ne), ne;
              }
              throw (
                (o.bA.setState({ pluginStatus: "error", pluginURL: "" }),
                new Error(`RTL Text Plugin failed to import scripts from ${$}`))
              );
            });
          }
          _getAvailableImages(V) {
            let H = this.availableImages[V];
            return H || (H = []), H;
          }
          _getLayerIndex(V) {
            let H = this.layerIndexes[V];
            return H || (H = this.layerIndexes[V] = new n()), H;
          }
          _getWorkerSource(V, H, $) {
            if (
              (this.workerSources[V] || (this.workerSources[V] = {}),
              this.workerSources[V][H] || (this.workerSources[V][H] = {}),
              !this.workerSources[V][H][$])
            ) {
              let ne = {
                sendAsync: (ve, xe) => (
                  (ve.targetMapId = V), this.actor.sendAsync(ve, xe)
                ),
              };
              switch (H) {
                case "vector":
                  this.workerSources[V][H][$] = new b(
                    ne,
                    this._getLayerIndex(V),
                    this._getAvailableImages(V)
                  );
                  break;
                case "geojson":
                  this.workerSources[V][H][$] = new yi(
                    ne,
                    this._getLayerIndex(V),
                    this._getAvailableImages(V)
                  );
                  break;
                default:
                  this.workerSources[V][H][$] =
                    new this.externalWorkerSourceTypes[H](
                      ne,
                      this._getLayerIndex(V),
                      this._getAvailableImages(V)
                    );
              }
            }
            return this.workerSources[V][H][$];
          }
          _getDEMWorkerSource(V, H) {
            return (
              this.demWorkerSources[V] || (this.demWorkerSources[V] = {}),
              this.demWorkerSources[V][H] ||
                (this.demWorkerSources[V][H] = new _()),
              this.demWorkerSources[V][H]
            );
          }
        }
        return o.i(self) && (self.worker = new Fi(self)), Fi;
      }),
      t("index", ["exports", "./shared"], function (o, n) {
        "use strict";
        var u = "4.1.2";
        let h,
          m,
          b = {
            now:
              typeof performance < "u" && performance && performance.now
                ? performance.now.bind(performance)
                : Date.now.bind(Date),
            frameAsync: (v) =>
              new Promise((a, d) => {
                let f = requestAnimationFrame(a);
                v.signal.addEventListener("abort", () => {
                  cancelAnimationFrame(f), d(n.c());
                });
              }),
            getImageData(v, a = 0) {
              return this.getImageCanvasContext(v).getImageData(
                -a,
                -a,
                v.width + 2 * a,
                v.height + 2 * a
              );
            },
            getImageCanvasContext(v) {
              let a = window.document.createElement("canvas"),
                d = a.getContext("2d", { willReadFrequently: !0 });
              if (!d) throw new Error("failed to create canvas 2d context");
              return (
                (a.width = v.width),
                (a.height = v.height),
                d.drawImage(v, 0, 0, v.width, v.height),
                d
              );
            },
            resolveURL: (v) => (
              h || (h = document.createElement("a")), (h.href = v), h.href
            ),
            hardwareConcurrency:
              (typeof navigator < "u" && navigator.hardwareConcurrency) || 4,
            get prefersReducedMotion() {
              return (
                !!matchMedia &&
                (m == null &&
                  (m = matchMedia("(prefers-reduced-motion: reduce)")),
                m.matches)
              );
            },
          };
        class _ {
          static testProp(a) {
            if (!_.docStyle) return a[0];
            for (let d = 0; d < a.length; d++)
              if (a[d] in _.docStyle) return a[d];
            return a[0];
          }
          static create(a, d, f) {
            let g = window.document.createElement(a);
            return d !== void 0 && (g.className = d), f && f.appendChild(g), g;
          }
          static createNS(a, d) {
            return window.document.createElementNS(a, d);
          }
          static disableDrag() {
            _.docStyle &&
              _.selectProp &&
              ((_.userSelect = _.docStyle[_.selectProp]),
              (_.docStyle[_.selectProp] = "none"));
          }
          static enableDrag() {
            _.docStyle &&
              _.selectProp &&
              (_.docStyle[_.selectProp] = _.userSelect);
          }
          static setTransform(a, d) {
            a.style[_.transformProp] = d;
          }
          static addEventListener(a, d, f, g = {}) {
            a.addEventListener(d, f, "passive" in g ? g : g.capture);
          }
          static removeEventListener(a, d, f, g = {}) {
            a.removeEventListener(d, f, "passive" in g ? g : g.capture);
          }
          static suppressClickInternal(a) {
            a.preventDefault(),
              a.stopPropagation(),
              window.removeEventListener("click", _.suppressClickInternal, !0);
          }
          static suppressClick() {
            window.addEventListener("click", _.suppressClickInternal, !0),
              window.setTimeout(() => {
                window.removeEventListener(
                  "click",
                  _.suppressClickInternal,
                  !0
                );
              }, 0);
          }
          static getScale(a) {
            let d = a.getBoundingClientRect();
            return {
              x: d.width / a.offsetWidth || 1,
              y: d.height / a.offsetHeight || 1,
              boundingClientRect: d,
            };
          }
          static getPoint(a, d, f) {
            let g = d.boundingClientRect;
            return new n.P(
              (f.clientX - g.left) / d.x - a.clientLeft,
              (f.clientY - g.top) / d.y - a.clientTop
            );
          }
          static mousePos(a, d) {
            let f = _.getScale(a);
            return _.getPoint(a, f, d);
          }
          static touchPos(a, d) {
            let f = [],
              g = _.getScale(a);
            for (let x = 0; x < d.length; x++) f.push(_.getPoint(a, g, d[x]));
            return f;
          }
          static mouseButton(a) {
            return a.button;
          }
          static remove(a) {
            a.parentNode && a.parentNode.removeChild(a);
          }
        }
        (_.docStyle =
          typeof window < "u" &&
          window.document &&
          window.document.documentElement.style),
          (_.selectProp = _.testProp([
            "userSelect",
            "MozUserSelect",
            "WebkitUserSelect",
            "msUserSelect",
          ])),
          (_.transformProp = _.testProp(["transform", "WebkitTransform"]));
        let S = {
            supported: !1,
            testSupport: function (v) {
              !F && D && (q ? Q(v) : (T = v));
            },
          },
          T,
          D,
          F = !1,
          q = !1;
        function Q(v) {
          let a = v.createTexture();
          v.bindTexture(v.TEXTURE_2D, a);
          try {
            if (
              (v.texImage2D(
                v.TEXTURE_2D,
                0,
                v.RGBA,
                v.RGBA,
                v.UNSIGNED_BYTE,
                D
              ),
              v.isContextLost())
            )
              return;
            S.supported = !0;
          } catch {}
          v.deleteTexture(a), (F = !0);
        }
        var te, ce;
        typeof document < "u" &&
          ((D = document.createElement("img")),
          (D.onload = function () {
            T && Q(T), (T = null), (q = !0);
          }),
          (D.onerror = function () {
            (F = !0), (T = null);
          }),
          (D.src =
            "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=")),
          (function (v) {
            let a, d, f, g;
            (v.resetRequestQueue = () => {
              (a = []), (d = 0), (f = 0), (g = {});
            }),
              (v.addThrottleControl = (I) => {
                let z = f++;
                return (g[z] = I), z;
              }),
              (v.removeThrottleControl = (I) => {
                delete g[I], E();
              }),
              (v.getImage = (I, z, B = !0) =>
                new Promise((U, Z) => {
                  S.supported &&
                    (I.headers || (I.headers = {}),
                    (I.headers.accept = "image/webp,*/*")),
                    n.e(I, { type: "image" }),
                    a.push({
                      abortController: z,
                      requestParameters: I,
                      supportImageRefresh: B,
                      state: "queued",
                      onError: (se) => {
                        Z(se);
                      },
                      onSuccess: (se) => {
                        U(se);
                      },
                    }),
                    E();
                }));
            let x = (I) =>
                n._(this, void 0, void 0, function* () {
                  I.state = "running";
                  let {
                      requestParameters: z,
                      supportImageRefresh: B,
                      onError: U,
                      onSuccess: Z,
                      abortController: se,
                    } = I,
                    oe =
                      B === !1 &&
                      !n.i(self) &&
                      !n.g(z.url) &&
                      (!z.headers ||
                        Object.keys(z.headers).reduce(
                          (_e, Be) => _e && Be === "accept",
                          !0
                        ));
                  d++;
                  let le = oe ? M(z, se) : n.m(z, se);
                  try {
                    let _e = yield le;
                    delete I.abortController,
                      (I.state = "completed"),
                      _e.data instanceof HTMLImageElement || n.b(_e.data)
                        ? Z(_e)
                        : _e.data &&
                          Z({
                            data: yield ((ee = _e.data),
                            typeof createImageBitmap == "function"
                              ? n.d(ee)
                              : n.f(ee)),
                            cacheControl: _e.cacheControl,
                            expires: _e.expires,
                          });
                  } catch (_e) {
                    delete I.abortController, U(_e);
                  } finally {
                    d--, E();
                  }
                  var ee;
                }),
              E = () => {
                let I = (() => {
                  for (let z of Object.keys(g)) if (g[z]()) return !0;
                  return !1;
                })()
                  ? n.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME
                  : n.a.MAX_PARALLEL_IMAGE_REQUESTS;
                for (let z = d; z < I && a.length > 0; z++) {
                  let B = a.shift();
                  B.abortController.signal.aborted ? z-- : x(B);
                }
              },
              M = (I, z) =>
                new Promise((B, U) => {
                  let Z = new Image(),
                    se = I.url,
                    oe = I.credentials;
                  oe && oe === "include"
                    ? (Z.crossOrigin = "use-credentials")
                    : ((oe && oe === "same-origin") || !n.s(se)) &&
                      (Z.crossOrigin = "anonymous"),
                    z.signal.addEventListener("abort", () => {
                      (Z.src = ""), U(n.c());
                    }),
                    (Z.fetchPriority = "high"),
                    (Z.onload = () => {
                      (Z.onerror = Z.onload = null), B({ data: Z });
                    }),
                    (Z.onerror = () => {
                      (Z.onerror = Z.onload = null),
                        z.signal.aborted ||
                          U(
                            new Error(
                              "Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."
                            )
                          );
                    }),
                    (Z.src = se);
                });
          })(te || (te = {})),
          te.resetRequestQueue(),
          (function (v) {
            (v.Glyphs = "Glyphs"),
              (v.Image = "Image"),
              (v.Source = "Source"),
              (v.SpriteImage = "SpriteImage"),
              (v.SpriteJSON = "SpriteJSON"),
              (v.Style = "Style"),
              (v.Tile = "Tile"),
              (v.Unknown = "Unknown");
          })(ce || (ce = {}));
        class be {
          constructor(a) {
            this._transformRequestFn = a;
          }
          transformRequest(a, d) {
            return (
              (this._transformRequestFn && this._transformRequestFn(a, d)) || {
                url: a,
              }
            );
          }
          normalizeSpriteURL(a, d, f) {
            let g = (function (x) {
              let E = x.match(Y);
              if (!E) throw new Error(`Unable to parse URL "${x}"`);
              return {
                protocol: E[1],
                authority: E[2],
                path: E[3] || "/",
                params: E[4] ? E[4].split("&") : [],
              };
            })(a);
            return (
              (g.path += `${d}${f}`),
              (function (x) {
                let E = x.params.length ? `?${x.params.join("&")}` : "";
                return `${x.protocol}://${x.authority}${x.path}${E}`;
              })(g)
            );
          }
          setTransformRequest(a) {
            this._transformRequestFn = a;
          }
        }
        let Y = /^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;
        function Ie(v) {
          var a = new n.A(3);
          return (a[0] = v[0]), (a[1] = v[1]), (a[2] = v[2]), a;
        }
        var Te,
          fe = function (v, a, d) {
            return (
              (v[0] = a[0] - d[0]),
              (v[1] = a[1] - d[1]),
              (v[2] = a[2] - d[2]),
              v
            );
          };
        (Te = new n.A(3)),
          n.A != Float32Array && ((Te[0] = 0), (Te[1] = 0), (Te[2] = 0));
        var Le = function (v) {
          var a = v[0],
            d = v[1];
          return a * a + d * d;
        };
        function De(v) {
          let a = [];
          if (typeof v == "string") a.push({ id: "default", url: v });
          else if (v && v.length > 0) {
            let d = [];
            for (let { id: f, url: g } of v) {
              let x = `${f}${g}`;
              d.indexOf(x) === -1 && (d.push(x), a.push({ id: f, url: g }));
            }
          }
          return a;
        }
        (function () {
          var v = new n.A(2);
          n.A != Float32Array && ((v[0] = 0), (v[1] = 0));
        })();
        class st {
          constructor(a, d, f, g) {
            (this.context = a),
              (this.format = f),
              (this.texture = a.gl.createTexture()),
              this.update(d, g);
          }
          update(a, d, f) {
            let { width: g, height: x } = a,
              E = !(
                (this.size && this.size[0] === g && this.size[1] === x) ||
                f
              ),
              { context: M } = this,
              { gl: I } = M;
            if (
              ((this.useMipmap = !!(d && d.useMipmap)),
              I.bindTexture(I.TEXTURE_2D, this.texture),
              M.pixelStoreUnpackFlipY.set(!1),
              M.pixelStoreUnpack.set(1),
              M.pixelStoreUnpackPremultiplyAlpha.set(
                this.format === I.RGBA && (!d || d.premultiply !== !1)
              ),
              E)
            )
              (this.size = [g, x]),
                a instanceof HTMLImageElement ||
                a instanceof HTMLCanvasElement ||
                a instanceof HTMLVideoElement ||
                a instanceof ImageData ||
                n.b(a)
                  ? I.texImage2D(
                      I.TEXTURE_2D,
                      0,
                      this.format,
                      this.format,
                      I.UNSIGNED_BYTE,
                      a
                    )
                  : I.texImage2D(
                      I.TEXTURE_2D,
                      0,
                      this.format,
                      g,
                      x,
                      0,
                      this.format,
                      I.UNSIGNED_BYTE,
                      a.data
                    );
            else {
              let { x: z, y: B } = f || { x: 0, y: 0 };
              a instanceof HTMLImageElement ||
              a instanceof HTMLCanvasElement ||
              a instanceof HTMLVideoElement ||
              a instanceof ImageData ||
              n.b(a)
                ? I.texSubImage2D(
                    I.TEXTURE_2D,
                    0,
                    z,
                    B,
                    I.RGBA,
                    I.UNSIGNED_BYTE,
                    a
                  )
                : I.texSubImage2D(
                    I.TEXTURE_2D,
                    0,
                    z,
                    B,
                    g,
                    x,
                    I.RGBA,
                    I.UNSIGNED_BYTE,
                    a.data
                  );
            }
            this.useMipmap &&
              this.isSizePowerOfTwo() &&
              I.generateMipmap(I.TEXTURE_2D);
          }
          bind(a, d, f) {
            let { context: g } = this,
              { gl: x } = g;
            x.bindTexture(x.TEXTURE_2D, this.texture),
              f !== x.LINEAR_MIPMAP_NEAREST ||
                this.isSizePowerOfTwo() ||
                (f = x.LINEAR),
              a !== this.filter &&
                (x.texParameteri(x.TEXTURE_2D, x.TEXTURE_MAG_FILTER, a),
                x.texParameteri(x.TEXTURE_2D, x.TEXTURE_MIN_FILTER, f || a),
                (this.filter = a)),
              d !== this.wrap &&
                (x.texParameteri(x.TEXTURE_2D, x.TEXTURE_WRAP_S, d),
                x.texParameteri(x.TEXTURE_2D, x.TEXTURE_WRAP_T, d),
                (this.wrap = d));
          }
          isSizePowerOfTwo() {
            return (
              this.size[0] === this.size[1] &&
              (Math.log(this.size[0]) / Math.LN2) % 1 == 0
            );
          }
          destroy() {
            let { gl: a } = this.context;
            a.deleteTexture(this.texture), (this.texture = null);
          }
        }
        function qe(v) {
          let { userImage: a } = v;
          return (
            !!(a && a.render && a.render()) &&
            (v.data.replace(new Uint8Array(a.data.buffer)), !0)
          );
        }
        class zt extends n.E {
          constructor() {
            super(),
              (this.images = {}),
              (this.updatedImages = {}),
              (this.callbackDispatchedThisFrame = {}),
              (this.loaded = !1),
              (this.requestors = []),
              (this.patterns = {}),
              (this.atlasImage = new n.R({ width: 1, height: 1 })),
              (this.dirty = !0);
          }
          isLoaded() {
            return this.loaded;
          }
          setLoaded(a) {
            if (this.loaded !== a && ((this.loaded = a), a)) {
              for (let { ids: d, promiseResolve: f } of this.requestors)
                f(this._getImagesForIds(d));
              this.requestors = [];
            }
          }
          getImage(a) {
            let d = this.images[a];
            if (d && !d.data && d.spriteData) {
              let f = d.spriteData;
              (d.data = new n.R(
                { width: f.width, height: f.height },
                f.context.getImageData(f.x, f.y, f.width, f.height).data
              )),
                (d.spriteData = null);
            }
            return d;
          }
          addImage(a, d) {
            if (this.images[a])
              throw new Error(
                `Image id ${a} already exist, use updateImage instead`
              );
            this._validate(a, d) && (this.images[a] = d);
          }
          _validate(a, d) {
            let f = !0,
              g = d.data || d.spriteData;
            return (
              this._validateStretch(d.stretchX, g && g.width) ||
                (this.fire(
                  new n.j(
                    new Error(`Image "${a}" has invalid "stretchX" value`)
                  )
                ),
                (f = !1)),
              this._validateStretch(d.stretchY, g && g.height) ||
                (this.fire(
                  new n.j(
                    new Error(`Image "${a}" has invalid "stretchY" value`)
                  )
                ),
                (f = !1)),
              this._validateContent(d.content, d) ||
                (this.fire(
                  new n.j(new Error(`Image "${a}" has invalid "content" value`))
                ),
                (f = !1)),
              f
            );
          }
          _validateStretch(a, d) {
            if (!a) return !0;
            let f = 0;
            for (let g of a) {
              if (g[0] < f || g[1] < g[0] || d < g[1]) return !1;
              f = g[1];
            }
            return !0;
          }
          _validateContent(a, d) {
            if (!a) return !0;
            if (a.length !== 4) return !1;
            let f = d.spriteData,
              g = (f && f.width) || d.data.width,
              x = (f && f.height) || d.data.height;
            return !(
              a[0] < 0 ||
              g < a[0] ||
              a[1] < 0 ||
              x < a[1] ||
              a[2] < 0 ||
              g < a[2] ||
              a[3] < 0 ||
              x < a[3] ||
              a[2] < a[0] ||
              a[3] < a[1]
            );
          }
          updateImage(a, d, f = !0) {
            let g = this.getImage(a);
            if (
              f &&
              (g.data.width !== d.data.width || g.data.height !== d.data.height)
            )
              throw new Error(
                `size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`
              );
            (d.version = g.version + 1),
              (this.images[a] = d),
              (this.updatedImages[a] = !0);
          }
          removeImage(a) {
            let d = this.images[a];
            delete this.images[a],
              delete this.patterns[a],
              d.userImage && d.userImage.onRemove && d.userImage.onRemove();
          }
          listImages() {
            return Object.keys(this.images);
          }
          getImages(a) {
            return new Promise((d, f) => {
              let g = !0;
              if (!this.isLoaded()) for (let x of a) this.images[x] || (g = !1);
              this.isLoaded() || g
                ? d(this._getImagesForIds(a))
                : this.requestors.push({ ids: a, promiseResolve: d });
            });
          }
          _getImagesForIds(a) {
            let d = {};
            for (let f of a) {
              let g = this.getImage(f);
              g ||
                (this.fire(new n.k("styleimagemissing", { id: f })),
                (g = this.getImage(f))),
                g
                  ? (d[f] = {
                      data: g.data.clone(),
                      pixelRatio: g.pixelRatio,
                      sdf: g.sdf,
                      version: g.version,
                      stretchX: g.stretchX,
                      stretchY: g.stretchY,
                      content: g.content,
                      hasRenderCallback: !!(g.userImage && g.userImage.render),
                    })
                  : n.w(
                      `Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`
                    );
            }
            return d;
          }
          getPixelSize() {
            let { width: a, height: d } = this.atlasImage;
            return { width: a, height: d };
          }
          getPattern(a) {
            let d = this.patterns[a],
              f = this.getImage(a);
            if (!f) return null;
            if (d && d.position.version === f.version) return d.position;
            if (d) d.position.version = f.version;
            else {
              let g = { w: f.data.width + 2, h: f.data.height + 2, x: 0, y: 0 },
                x = new n.I(g, f);
              this.patterns[a] = { bin: g, position: x };
            }
            return this._updatePatternAtlas(), this.patterns[a].position;
          }
          bind(a) {
            let d = a.gl;
            this.atlasTexture
              ? this.dirty &&
                (this.atlasTexture.update(this.atlasImage), (this.dirty = !1))
              : (this.atlasTexture = new st(a, this.atlasImage, d.RGBA)),
              this.atlasTexture.bind(d.LINEAR, d.CLAMP_TO_EDGE);
          }
          _updatePatternAtlas() {
            let a = [];
            for (let x in this.patterns) a.push(this.patterns[x].bin);
            let { w: d, h: f } = n.p(a),
              g = this.atlasImage;
            g.resize({ width: d || 1, height: f || 1 });
            for (let x in this.patterns) {
              let { bin: E } = this.patterns[x],
                M = E.x + 1,
                I = E.y + 1,
                z = this.getImage(x).data,
                B = z.width,
                U = z.height;
              n.R.copy(
                z,
                g,
                { x: 0, y: 0 },
                { x: M, y: I },
                { width: B, height: U }
              ),
                n.R.copy(
                  z,
                  g,
                  { x: 0, y: U - 1 },
                  { x: M, y: I - 1 },
                  { width: B, height: 1 }
                ),
                n.R.copy(
                  z,
                  g,
                  { x: 0, y: 0 },
                  { x: M, y: I + U },
                  { width: B, height: 1 }
                ),
                n.R.copy(
                  z,
                  g,
                  { x: B - 1, y: 0 },
                  { x: M - 1, y: I },
                  { width: 1, height: U }
                ),
                n.R.copy(
                  z,
                  g,
                  { x: 0, y: 0 },
                  { x: M + B, y: I },
                  { width: 1, height: U }
                );
            }
            this.dirty = !0;
          }
          beginFrame() {
            this.callbackDispatchedThisFrame = {};
          }
          dispatchRenderCallbacks(a) {
            for (let d of a) {
              if (this.callbackDispatchedThisFrame[d]) continue;
              this.callbackDispatchedThisFrame[d] = !0;
              let f = this.getImage(d);
              f || n.w(`Image with ID: "${d}" was not found`),
                qe(f) && this.updateImage(d, f);
            }
          }
        }
        let Rt = 1e20;
        function Gt(v, a, d, f, g, x, E, M, I) {
          for (let z = a; z < a + f; z++) qt(v, d * x + z, x, g, E, M, I);
          for (let z = d; z < d + g; z++) qt(v, z * x + a, 1, f, E, M, I);
        }
        function qt(v, a, d, f, g, x, E) {
          (x[0] = 0), (E[0] = -Rt), (E[1] = Rt), (g[0] = v[a]);
          for (let M = 1, I = 0, z = 0; M < f; M++) {
            g[M] = v[a + M * d];
            let B = M * M;
            do {
              let U = x[I];
              z = (g[M] - g[U] + B - U * U) / (M - U) / 2;
            } while (z <= E[I] && --I > -1);
            I++, (x[I] = M), (E[I] = z), (E[I + 1] = Rt);
          }
          for (let M = 0, I = 0; M < f; M++) {
            for (; E[I + 1] < M; ) I++;
            let z = x[I],
              B = M - z;
            v[a + M * d] = g[z] + B * B;
          }
        }
        class ct {
          constructor(a, d) {
            (this.requestManager = a),
              (this.localIdeographFontFamily = d),
              (this.entries = {});
          }
          setURL(a) {
            this.url = a;
          }
          getGlyphs(a) {
            return n._(this, void 0, void 0, function* () {
              let d = [];
              for (let x in a)
                for (let E of a[x])
                  d.push(this._getAndCacheGlyphsPromise(x, E));
              let f = yield Promise.all(d),
                g = {};
              for (let { stack: x, id: E, glyph: M } of f)
                g[x] || (g[x] = {}),
                  (g[x][E] = M && {
                    id: M.id,
                    bitmap: M.bitmap.clone(),
                    metrics: M.metrics,
                  });
              return g;
            });
          }
          _getAndCacheGlyphsPromise(a, d) {
            return n._(this, void 0, void 0, function* () {
              let f = this.entries[a];
              f ||
                (f = this.entries[a] =
                  { glyphs: {}, requests: {}, ranges: {} });
              let g = f.glyphs[d];
              if (g !== void 0) return { stack: a, id: d, glyph: g };
              if (((g = this._tinySDF(f, a, d)), g))
                return (f.glyphs[d] = g), { stack: a, id: d, glyph: g };
              let x = Math.floor(d / 256);
              if (256 * x > 65535)
                throw new Error("glyphs > 65535 not supported");
              if (f.ranges[x]) return { stack: a, id: d, glyph: g };
              if (!this.url) throw new Error("glyphsUrl is not set");
              if (!f.requests[x]) {
                let M = ct.loadGlyphRange(a, x, this.url, this.requestManager);
                f.requests[x] = M;
              }
              let E = yield f.requests[x];
              for (let M in E)
                this._doesCharSupportLocalGlyph(+M) || (f.glyphs[+M] = E[+M]);
              return (
                (f.ranges[x] = !0), { stack: a, id: d, glyph: E[d] || null }
              );
            });
          }
          _doesCharSupportLocalGlyph(a) {
            return (
              !!this.localIdeographFontFamily &&
              (n.u["CJK Unified Ideographs"](a) ||
                n.u["Hangul Syllables"](a) ||
                n.u.Hiragana(a) ||
                n.u.Katakana(a))
            );
          }
          _tinySDF(a, d, f) {
            let g = this.localIdeographFontFamily;
            if (!g || !this._doesCharSupportLocalGlyph(f)) return;
            let x = a.tinySDF;
            if (!x) {
              let M = "400";
              /bold/i.test(d)
                ? (M = "900")
                : /medium/i.test(d)
                ? (M = "500")
                : /light/i.test(d) && (M = "200"),
                (x = a.tinySDF =
                  new ct.TinySDF({
                    fontSize: 48,
                    buffer: 6,
                    radius: 16,
                    cutoff: 0.25,
                    fontFamily: g,
                    fontWeight: M,
                  }));
            }
            let E = x.draw(String.fromCharCode(f));
            return {
              id: f,
              bitmap: new n.o(
                { width: E.width || 60, height: E.height || 60 },
                E.data
              ),
              metrics: {
                width: E.glyphWidth / 2 || 24,
                height: E.glyphHeight / 2 || 24,
                left: E.glyphLeft / 2 + 0.5 || 0,
                top: E.glyphTop / 2 - 27.5 || -8,
                advance: E.glyphAdvance / 2 || 24,
                isDoubleResolution: !0,
              },
            };
          }
        }
        (ct.loadGlyphRange = function (v, a, d, f) {
          return n._(this, void 0, void 0, function* () {
            let g = 256 * a,
              x = g + 255,
              E = f.transformRequest(
                d.replace("{fontstack}", v).replace("{range}", `${g}-${x}`),
                ce.Glyphs
              ),
              M = yield n.l(E, new AbortController());
            if (!M || !M.data)
              throw new Error(
                `Could not load glyph range. range: ${a}, ${g}-${x}`
              );
            let I = {};
            for (let z of n.n(M.data)) I[z.id] = z;
            return I;
          });
        }),
          (ct.TinySDF = class {
            constructor({
              fontSize: v = 24,
              buffer: a = 3,
              radius: d = 8,
              cutoff: f = 0.25,
              fontFamily: g = "sans-serif",
              fontWeight: x = "normal",
              fontStyle: E = "normal",
            } = {}) {
              (this.buffer = a), (this.cutoff = f), (this.radius = d);
              let M = (this.size = v + 4 * a),
                I = this._createCanvas(M),
                z = (this.ctx = I.getContext("2d", { willReadFrequently: !0 }));
              (z.font = `${E} ${x} ${v}px ${g}`),
                (z.textBaseline = "alphabetic"),
                (z.textAlign = "left"),
                (z.fillStyle = "black"),
                (this.gridOuter = new Float64Array(M * M)),
                (this.gridInner = new Float64Array(M * M)),
                (this.f = new Float64Array(M)),
                (this.z = new Float64Array(M + 1)),
                (this.v = new Uint16Array(M));
            }
            _createCanvas(v) {
              let a = document.createElement("canvas");
              return (a.width = a.height = v), a;
            }
            draw(v) {
              let {
                  width: a,
                  actualBoundingBoxAscent: d,
                  actualBoundingBoxDescent: f,
                  actualBoundingBoxLeft: g,
                  actualBoundingBoxRight: x,
                } = this.ctx.measureText(v),
                E = Math.ceil(d),
                M = Math.max(
                  0,
                  Math.min(this.size - this.buffer, Math.ceil(x - g))
                ),
                I = Math.min(this.size - this.buffer, E + Math.ceil(f)),
                z = M + 2 * this.buffer,
                B = I + 2 * this.buffer,
                U = Math.max(z * B, 0),
                Z = new Uint8ClampedArray(U),
                se = {
                  data: Z,
                  width: z,
                  height: B,
                  glyphWidth: M,
                  glyphHeight: I,
                  glyphTop: E,
                  glyphLeft: 0,
                  glyphAdvance: a,
                };
              if (M === 0 || I === 0) return se;
              let { ctx: oe, buffer: le, gridInner: ee, gridOuter: _e } = this;
              oe.clearRect(le, le, M, I), oe.fillText(v, le, le + E);
              let Be = oe.getImageData(le, le, M, I);
              _e.fill(Rt, 0, U), ee.fill(0, 0, U);
              for (let he = 0; he < I; he++)
                for (let Ee = 0; Ee < M; Ee++) {
                  let Ue = Be.data[4 * (he * M + Ee) + 3] / 255;
                  if (Ue === 0) continue;
                  let Ve = (he + le) * z + Ee + le;
                  if (Ue === 1) (_e[Ve] = 0), (ee[Ve] = Rt);
                  else {
                    let Ge = 0.5 - Ue;
                    (_e[Ve] = Ge > 0 ? Ge * Ge : 0),
                      (ee[Ve] = Ge < 0 ? Ge * Ge : 0);
                  }
                }
              Gt(_e, 0, 0, z, B, z, this.f, this.v, this.z),
                Gt(ee, le, le, M, I, z, this.f, this.v, this.z);
              for (let he = 0; he < U; he++) {
                let Ee = Math.sqrt(_e[he]) - Math.sqrt(ee[he]);
                Z[he] = Math.round(
                  255 - 255 * (Ee / this.radius + this.cutoff)
                );
              }
              return se;
            }
          });
        class vt {
          constructor() {
            this.specification = n.v.light.position;
          }
          possiblyEvaluate(a, d) {
            return n.y(a.expression.evaluate(d));
          }
          interpolate(a, d, f) {
            return {
              x: n.z.number(a.x, d.x, f),
              y: n.z.number(a.y, d.y, f),
              z: n.z.number(a.z, d.z, f),
            };
          }
        }
        let ht;
        class Vt extends n.E {
          constructor(a) {
            super(),
              (ht =
                ht ||
                new n.q({
                  anchor: new n.D(n.v.light.anchor),
                  position: new vt(),
                  color: new n.D(n.v.light.color),
                  intensity: new n.D(n.v.light.intensity),
                })),
              (this._transitionable = new n.T(ht)),
              this.setLight(a),
              (this._transitioning = this._transitionable.untransitioned());
          }
          getLight() {
            return this._transitionable.serialize();
          }
          setLight(a, d = {}) {
            if (!this._validate(n.r, a, d))
              for (let f in a) {
                let g = a[f];
                f.endsWith("-transition")
                  ? this._transitionable.setTransition(f.slice(0, -11), g)
                  : this._transitionable.setValue(f, g);
              }
          }
          updateTransitions(a) {
            this._transitioning = this._transitionable.transitioned(
              a,
              this._transitioning
            );
          }
          hasTransition() {
            return this._transitioning.hasTransition();
          }
          recalculate(a) {
            this.properties = this._transitioning.possiblyEvaluate(a);
          }
          _validate(a, d, f) {
            return (
              (!f || f.validate !== !1) &&
              n.t(
                this,
                a.call(n.x, {
                  value: d,
                  style: { glyphs: !0, sprite: !0 },
                  styleSpec: n.v,
                })
              )
            );
          }
        }
        class hi {
          constructor(a, d) {
            (this.width = a),
              (this.height = d),
              (this.nextRow = 0),
              (this.data = new Uint8Array(this.width * this.height)),
              (this.dashEntry = {});
          }
          getDash(a, d) {
            let f = a.join(",") + String(d);
            return (
              this.dashEntry[f] || (this.dashEntry[f] = this.addDash(a, d)),
              this.dashEntry[f]
            );
          }
          getDashRanges(a, d, f) {
            let g = [],
              x = a.length % 2 == 1 ? -a[a.length - 1] * f : 0,
              E = a[0] * f,
              M = !0;
            g.push({ left: x, right: E, isDash: M, zeroLength: a[0] === 0 });
            let I = a[0];
            for (let z = 1; z < a.length; z++) {
              M = !M;
              let B = a[z];
              (x = I * f),
                (I += B),
                (E = I * f),
                g.push({ left: x, right: E, isDash: M, zeroLength: B === 0 });
            }
            return g;
          }
          addRoundDash(a, d, f) {
            let g = d / 2;
            for (let x = -f; x <= f; x++) {
              let E = this.width * (this.nextRow + f + x),
                M = 0,
                I = a[M];
              for (let z = 0; z < this.width; z++) {
                z / I.right > 1 && (I = a[++M]);
                let B = Math.abs(z - I.left),
                  U = Math.abs(z - I.right),
                  Z = Math.min(B, U),
                  se,
                  oe = (x / f) * (g + 1);
                if (I.isDash) {
                  let le = g - Math.abs(oe);
                  se = Math.sqrt(Z * Z + le * le);
                } else se = g - Math.sqrt(Z * Z + oe * oe);
                this.data[E + z] = Math.max(0, Math.min(255, se + 128));
              }
            }
          }
          addRegularDash(a) {
            for (let M = a.length - 1; M >= 0; --M) {
              let I = a[M],
                z = a[M + 1];
              I.zeroLength
                ? a.splice(M, 1)
                : z &&
                  z.isDash === I.isDash &&
                  ((z.left = I.left), a.splice(M, 1));
            }
            let d = a[0],
              f = a[a.length - 1];
            d.isDash === f.isDash &&
              ((d.left = f.left - this.width),
              (f.right = d.right + this.width));
            let g = this.width * this.nextRow,
              x = 0,
              E = a[x];
            for (let M = 0; M < this.width; M++) {
              M / E.right > 1 && (E = a[++x]);
              let I = Math.abs(M - E.left),
                z = Math.abs(M - E.right),
                B = Math.min(I, z);
              this.data[g + M] = Math.max(
                0,
                Math.min(255, (E.isDash ? B : -B) + 128)
              );
            }
          }
          addDash(a, d) {
            let f = d ? 7 : 0,
              g = 2 * f + 1;
            if (this.nextRow + g > this.height)
              return n.w("LineAtlas out of space"), null;
            let x = 0;
            for (let M = 0; M < a.length; M++) x += a[M];
            if (x !== 0) {
              let M = this.width / x,
                I = this.getDashRanges(a, this.width, M);
              d ? this.addRoundDash(I, M, f) : this.addRegularDash(I);
            }
            let E = {
              y: (this.nextRow + f + 0.5) / this.height,
              height: (2 * f) / this.height,
              width: x,
            };
            return (this.nextRow += g), (this.dirty = !0), E;
          }
          bind(a) {
            let d = a.gl;
            this.texture
              ? (d.bindTexture(d.TEXTURE_2D, this.texture),
                this.dirty &&
                  ((this.dirty = !1),
                  d.texSubImage2D(
                    d.TEXTURE_2D,
                    0,
                    0,
                    0,
                    this.width,
                    this.height,
                    d.ALPHA,
                    d.UNSIGNED_BYTE,
                    this.data
                  )))
              : ((this.texture = d.createTexture()),
                d.bindTexture(d.TEXTURE_2D, this.texture),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_S, d.REPEAT),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_T, d.REPEAT),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR),
                d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR),
                d.texImage2D(
                  d.TEXTURE_2D,
                  0,
                  d.ALPHA,
                  this.width,
                  this.height,
                  0,
                  d.ALPHA,
                  d.UNSIGNED_BYTE,
                  this.data
                ));
          }
        }
        let Pi = "maplibre_preloaded_worker_pool";
        class Zt {
          constructor() {
            this.active = {};
          }
          acquire(a) {
            if (!this.workers)
              for (this.workers = []; this.workers.length < Zt.workerCount; )
                this.workers.push(new Worker(n.a.WORKER_URL));
            return (this.active[a] = !0), this.workers.slice();
          }
          release(a) {
            delete this.active[a],
              this.numActive() === 0 &&
                (this.workers.forEach((d) => {
                  d.terminate();
                }),
                (this.workers = null));
          }
          isPreloaded() {
            return !!this.active[Pi];
          }
          numActive() {
            return Object.keys(this.active).length;
          }
        }
        let Re = Math.floor(b.hardwareConcurrency / 2),
          Ce,
          Bt;
        function ei() {
          return Ce || (Ce = new Zt()), Ce;
        }
        Zt.workerCount = n.B(globalThis) ? Math.max(Math.min(Re, 3), 1) : 1;
        class Li {
          constructor(a, d) {
            (this.workerPool = a),
              (this.actors = []),
              (this.currentActor = 0),
              (this.id = d);
            let f = this.workerPool.acquire(d);
            for (let g = 0; g < f.length; g++) {
              let x = new n.C(f[g], d);
              (x.name = `Worker ${g}`), this.actors.push(x);
            }
            if (!this.actors.length) throw new Error("No actors found");
          }
          broadcast(a, d) {
            let f = [];
            for (let g of this.actors)
              f.push(g.sendAsync({ type: a, data: d }));
            return Promise.all(f);
          }
          getActor() {
            return (
              (this.currentActor =
                (this.currentActor + 1) % this.actors.length),
              this.actors[this.currentActor]
            );
          }
          remove(a = !0) {
            this.actors.forEach((d) => {
              d.remove();
            }),
              (this.actors = []),
              a && this.workerPool.release(this.id);
          }
          registerMessageHandler(a, d) {
            for (let f of this.actors) f.registerMessageHandler(a, d);
          }
        }
        function it() {
          return (
            Bt ||
              ((Bt = new Li(ei(), n.G)),
              Bt.registerMessageHandler("getResource", (v, a, d) => n.m(a, d))),
            Bt
          );
        }
        function ii(v, a) {
          let d = n.F();
          return (
            n.H(d, d, [1, 1, 0]),
            n.J(d, d, [0.5 * v.width, 0.5 * v.height, 1]),
            n.K(d, d, v.calculatePosMatrix(a.toUnwrapped()))
          );
        }
        function wi(v, a, d, f, g, x) {
          let E = (function (U, Z, se) {
              if (U)
                for (let oe of U) {
                  let le = Z[oe];
                  if (le && le.source === se && le.type === "fill-extrusion")
                    return !0;
                }
              else
                for (let oe in Z) {
                  let le = Z[oe];
                  if (le.source === se && le.type === "fill-extrusion")
                    return !0;
                }
              return !1;
            })(g && g.layers, a, v.id),
            M = x.maxPitchScaleFactor(),
            I = v.tilesIn(f, M, E);
          I.sort(sr);
          let z = [];
          for (let U of I)
            z.push({
              wrappedTileID: U.tileID.wrapped().key,
              queryResults: U.tile.queryRenderedFeatures(
                a,
                d,
                v._state,
                U.queryGeometry,
                U.cameraQueryGeometry,
                U.scale,
                g,
                x,
                M,
                ii(v.transform, U.tileID)
              ),
            });
          let B = (function (U) {
            let Z = {},
              se = {};
            for (let oe of U) {
              let le = oe.queryResults,
                ee = oe.wrappedTileID,
                _e = (se[ee] = se[ee] || {});
              for (let Be in le) {
                let he = le[Be],
                  Ee = (_e[Be] = _e[Be] || {}),
                  Ue = (Z[Be] = Z[Be] || []);
                for (let Ve of he)
                  Ee[Ve.featureIndex] ||
                    ((Ee[Ve.featureIndex] = !0), Ue.push(Ve));
              }
            }
            return Z;
          })(z);
          for (let U in B)
            B[U].forEach((Z) => {
              let se = Z.feature,
                oe = v.getFeatureState(se.layer["source-layer"], se.id);
              (se.source = se.layer.source),
                se.layer["source-layer"] &&
                  (se.sourceLayer = se.layer["source-layer"]),
                (se.state = oe);
            });
          return B;
        }
        function sr(v, a) {
          let d = v.tileID,
            f = a.tileID;
          return (
            d.overscaledZ - f.overscaledZ ||
            d.canonical.y - f.canonical.y ||
            d.wrap - f.wrap ||
            d.canonical.x - f.canonical.x
          );
        }
        function Wr(v, a, d) {
          return n._(this, void 0, void 0, function* () {
            let f = v;
            if (
              (v.url
                ? (f = (yield n.h(a.transformRequest(v.url, ce.Source), d))
                    .data)
                : yield b.frameAsync(d),
              !f)
            )
              return null;
            let g = n.L(n.e(f, v), [
              "tiles",
              "minzoom",
              "maxzoom",
              "attribution",
              "bounds",
              "scheme",
              "tileSize",
              "encoding",
            ]);
            return (
              "vector_layers" in f &&
                f.vector_layers &&
                (g.vectorLayerIds = f.vector_layers.map((x) => x.id)),
              g
            );
          });
        }
        class pt {
          constructor(a, d) {
            a &&
              (d
                ? this.setSouthWest(a).setNorthEast(d)
                : Array.isArray(a) &&
                  (a.length === 4
                    ? this.setSouthWest([a[0], a[1]]).setNorthEast([a[2], a[3]])
                    : this.setSouthWest(a[0]).setNorthEast(a[1])));
          }
          setNorthEast(a) {
            return (
              (this._ne =
                a instanceof n.M ? new n.M(a.lng, a.lat) : n.M.convert(a)),
              this
            );
          }
          setSouthWest(a) {
            return (
              (this._sw =
                a instanceof n.M ? new n.M(a.lng, a.lat) : n.M.convert(a)),
              this
            );
          }
          extend(a) {
            let d = this._sw,
              f = this._ne,
              g,
              x;
            if (a instanceof n.M) (g = a), (x = a);
            else {
              if (!(a instanceof pt))
                return Array.isArray(a)
                  ? a.length === 4 || a.every(Array.isArray)
                    ? this.extend(pt.convert(a))
                    : this.extend(n.M.convert(a))
                  : a && ("lng" in a || "lon" in a) && "lat" in a
                  ? this.extend(n.M.convert(a))
                  : this;
              if (((g = a._sw), (x = a._ne), !g || !x)) return this;
            }
            return (
              d || f
                ? ((d.lng = Math.min(g.lng, d.lng)),
                  (d.lat = Math.min(g.lat, d.lat)),
                  (f.lng = Math.max(x.lng, f.lng)),
                  (f.lat = Math.max(x.lat, f.lat)))
                : ((this._sw = new n.M(g.lng, g.lat)),
                  (this._ne = new n.M(x.lng, x.lat))),
              this
            );
          }
          getCenter() {
            return new n.M(
              (this._sw.lng + this._ne.lng) / 2,
              (this._sw.lat + this._ne.lat) / 2
            );
          }
          getSouthWest() {
            return this._sw;
          }
          getNorthEast() {
            return this._ne;
          }
          getNorthWest() {
            return new n.M(this.getWest(), this.getNorth());
          }
          getSouthEast() {
            return new n.M(this.getEast(), this.getSouth());
          }
          getWest() {
            return this._sw.lng;
          }
          getSouth() {
            return this._sw.lat;
          }
          getEast() {
            return this._ne.lng;
          }
          getNorth() {
            return this._ne.lat;
          }
          toArray() {
            return [this._sw.toArray(), this._ne.toArray()];
          }
          toString() {
            return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`;
          }
          isEmpty() {
            return !(this._sw && this._ne);
          }
          contains(a) {
            let { lng: d, lat: f } = n.M.convert(a),
              g = this._sw.lng <= d && d <= this._ne.lng;
            return (
              this._sw.lng > this._ne.lng &&
                (g = this._sw.lng >= d && d >= this._ne.lng),
              this._sw.lat <= f && f <= this._ne.lat && g
            );
          }
          static convert(a) {
            return a instanceof pt ? a : a && new pt(a);
          }
          static fromLngLat(a, d = 0) {
            let f = (360 * d) / 40075017,
              g = f / Math.cos((Math.PI / 180) * a.lat);
            return new pt(
              new n.M(a.lng - g, a.lat - f),
              new n.M(a.lng + g, a.lat + f)
            );
          }
        }
        class Ai {
          constructor(a, d, f) {
            (this.bounds = pt.convert(this.validateBounds(a))),
              (this.minzoom = d || 0),
              (this.maxzoom = f || 24);
          }
          validateBounds(a) {
            return Array.isArray(a) && a.length === 4
              ? [
                  Math.max(-180, a[0]),
                  Math.max(-90, a[1]),
                  Math.min(180, a[2]),
                  Math.min(90, a[3]),
                ]
              : [-180, -90, 180, 90];
          }
          contains(a) {
            let d = Math.pow(2, a.z),
              f = Math.floor(n.N(this.bounds.getWest()) * d),
              g = Math.floor(n.O(this.bounds.getNorth()) * d),
              x = Math.ceil(n.N(this.bounds.getEast()) * d),
              E = Math.ceil(n.O(this.bounds.getSouth()) * d);
            return a.x >= f && a.x < x && a.y >= g && a.y < E;
          }
        }
        class je extends n.E {
          constructor(a, d, f, g) {
            if (
              (super(),
              (this.id = a),
              (this.dispatcher = f),
              (this.type = "vector"),
              (this.minzoom = 0),
              (this.maxzoom = 22),
              (this.scheme = "xyz"),
              (this.tileSize = 512),
              (this.reparseOverscaled = !0),
              (this.isTileClipped = !0),
              (this._loaded = !1),
              n.e(this, n.L(d, ["url", "scheme", "tileSize", "promoteId"])),
              (this._options = n.e({ type: "vector" }, d)),
              (this._collectResourceTiming = d.collectResourceTiming),
              this.tileSize !== 512)
            )
              throw new Error(
                "vector tile sources must have a tileSize of 512"
              );
            this.setEventedParent(g);
          }
          load() {
            return n._(this, void 0, void 0, function* () {
              (this._loaded = !1),
                this.fire(new n.k("dataloading", { dataType: "source" })),
                (this._tileJSONRequest = new AbortController());
              try {
                let a = yield Wr(
                  this._options,
                  this.map._requestManager,
                  this._tileJSONRequest
                );
                (this._tileJSONRequest = null),
                  (this._loaded = !0),
                  this.map.style.sourceCaches[this.id].clearTiles(),
                  a &&
                    (n.e(this, a),
                    a.bounds &&
                      (this.tileBounds = new Ai(
                        a.bounds,
                        this.minzoom,
                        this.maxzoom
                      )),
                    this.fire(
                      new n.k("data", {
                        dataType: "source",
                        sourceDataType: "metadata",
                      })
                    ),
                    this.fire(
                      new n.k("data", {
                        dataType: "source",
                        sourceDataType: "content",
                      })
                    ));
              } catch (a) {
                (this._tileJSONRequest = null), this.fire(new n.j(a));
              }
            });
          }
          loaded() {
            return this._loaded;
          }
          hasTile(a) {
            return !this.tileBounds || this.tileBounds.contains(a.canonical);
          }
          onAdd(a) {
            (this.map = a), this.load();
          }
          setSourceProperty(a) {
            this._tileJSONRequest && this._tileJSONRequest.abort(),
              a(),
              this.load();
          }
          setTiles(a) {
            return (
              this.setSourceProperty(() => {
                this._options.tiles = a;
              }),
              this
            );
          }
          setUrl(a) {
            return (
              this.setSourceProperty(() => {
                (this.url = a), (this._options.url = a);
              }),
              this
            );
          }
          onRemove() {
            this._tileJSONRequest &&
              (this._tileJSONRequest.abort(), (this._tileJSONRequest = null));
          }
          serialize() {
            return n.e({}, this._options);
          }
          loadTile(a) {
            return n._(this, void 0, void 0, function* () {
              let d = a.tileID.canonical.url(
                  this.tiles,
                  this.map.getPixelRatio(),
                  this.scheme
                ),
                f = {
                  request: this.map._requestManager.transformRequest(
                    d,
                    ce.Tile
                  ),
                  uid: a.uid,
                  tileID: a.tileID,
                  zoom: a.tileID.overscaledZ,
                  tileSize: this.tileSize * a.tileID.overscaleFactor(),
                  type: this.type,
                  source: this.id,
                  pixelRatio: this.map.getPixelRatio(),
                  showCollisionBoxes: this.map.showCollisionBoxes,
                  promoteId: this.promoteId,
                };
              f.request.collectResourceTiming = this._collectResourceTiming;
              let g = "reloadTile";
              if (a.actor && a.state !== "expired") {
                if (a.state === "loading")
                  return new Promise((x, E) => {
                    a.reloadPromise = { resolve: x, reject: E };
                  });
              } else (a.actor = this.dispatcher.getActor()), (g = "loadTile");
              a.abortController = new AbortController();
              try {
                let x = yield a.actor.sendAsync(
                  { type: g, data: f },
                  a.abortController
                );
                if ((delete a.abortController, a.aborted)) return;
                this._afterTileLoadWorkerResponse(a, x);
              } catch (x) {
                if ((delete a.abortController, a.aborted)) return;
                if (x && x.status !== 404) throw x;
                this._afterTileLoadWorkerResponse(a, null);
              }
            });
          }
          _afterTileLoadWorkerResponse(a, d) {
            if (
              (d && d.resourceTiming && (a.resourceTiming = d.resourceTiming),
              d && this.map._refreshExpiredTiles && a.setExpiryData(d),
              a.loadVectorData(d, this.map.painter),
              a.reloadPromise)
            ) {
              let f = a.reloadPromise;
              (a.reloadPromise = null),
                this.loadTile(a).then(f.resolve).catch(f.reject);
            }
          }
          abortTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.abortController &&
                (a.abortController.abort(), delete a.abortController),
                a.actor &&
                  (yield a.actor.sendAsync({
                    type: "abortTile",
                    data: { uid: a.uid, type: this.type, source: this.id },
                  }));
            });
          }
          unloadTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.unloadVectorData(),
                a.actor &&
                  (yield a.actor.sendAsync({
                    type: "removeTile",
                    data: { uid: a.uid, type: this.type, source: this.id },
                  }));
            });
          }
          hasTransition() {
            return !1;
          }
        }
        class Si extends n.E {
          constructor(a, d, f, g) {
            super(),
              (this.id = a),
              (this.dispatcher = f),
              this.setEventedParent(g),
              (this.type = "raster"),
              (this.minzoom = 0),
              (this.maxzoom = 22),
              (this.roundZoom = !0),
              (this.scheme = "xyz"),
              (this.tileSize = 512),
              (this._loaded = !1),
              (this._options = n.e({ type: "raster" }, d)),
              n.e(this, n.L(d, ["url", "scheme", "tileSize"]));
          }
          load() {
            return n._(this, void 0, void 0, function* () {
              (this._loaded = !1),
                this.fire(new n.k("dataloading", { dataType: "source" })),
                (this._tileJSONRequest = new AbortController());
              try {
                let a = yield Wr(
                  this._options,
                  this.map._requestManager,
                  this._tileJSONRequest
                );
                (this._tileJSONRequest = null),
                  (this._loaded = !0),
                  a &&
                    (n.e(this, a),
                    a.bounds &&
                      (this.tileBounds = new Ai(
                        a.bounds,
                        this.minzoom,
                        this.maxzoom
                      )),
                    this.fire(
                      new n.k("data", {
                        dataType: "source",
                        sourceDataType: "metadata",
                      })
                    ),
                    this.fire(
                      new n.k("data", {
                        dataType: "source",
                        sourceDataType: "content",
                      })
                    ));
              } catch (a) {
                (this._tileJSONRequest = null), this.fire(new n.j(a));
              }
            });
          }
          loaded() {
            return this._loaded;
          }
          onAdd(a) {
            (this.map = a), this.load();
          }
          onRemove() {
            this._tileJSONRequest &&
              (this._tileJSONRequest.abort(), (this._tileJSONRequest = null));
          }
          setSourceProperty(a) {
            this._tileJSONRequest &&
              (this._tileJSONRequest.abort(), (this._tileJSONRequest = null)),
              a(),
              this.load();
          }
          setTiles(a) {
            return (
              this.setSourceProperty(() => {
                this._options.tiles = a;
              }),
              this
            );
          }
          setUrl(a) {
            return (
              this.setSourceProperty(() => {
                (this.url = a), (this._options.url = a);
              }),
              this
            );
          }
          serialize() {
            return n.e({}, this._options);
          }
          hasTile(a) {
            return !this.tileBounds || this.tileBounds.contains(a.canonical);
          }
          loadTile(a) {
            return n._(this, void 0, void 0, function* () {
              let d = a.tileID.canonical.url(
                this.tiles,
                this.map.getPixelRatio(),
                this.scheme
              );
              a.abortController = new AbortController();
              try {
                let f = yield te.getImage(
                  this.map._requestManager.transformRequest(d, ce.Tile),
                  a.abortController,
                  this.map._refreshExpiredTiles
                );
                if ((delete a.abortController, a.aborted))
                  return void (a.state = "unloaded");
                if (f && f.data) {
                  this.map._refreshExpiredTiles &&
                    f.cacheControl &&
                    f.expires &&
                    a.setExpiryData({
                      cacheControl: f.cacheControl,
                      expires: f.expires,
                    });
                  let g = this.map.painter.context,
                    x = g.gl,
                    E = f.data;
                  (a.texture = this.map.painter.getTileTexture(E.width)),
                    a.texture
                      ? a.texture.update(E, { useMipmap: !0 })
                      : ((a.texture = new st(g, E, x.RGBA, { useMipmap: !0 })),
                        a.texture.bind(
                          x.LINEAR,
                          x.CLAMP_TO_EDGE,
                          x.LINEAR_MIPMAP_NEAREST
                        ),
                        g.extTextureFilterAnisotropic &&
                          x.texParameterf(
                            x.TEXTURE_2D,
                            g.extTextureFilterAnisotropic
                              .TEXTURE_MAX_ANISOTROPY_EXT,
                            g.extTextureFilterAnisotropicMax
                          )),
                    (a.state = "loaded");
                }
              } catch (f) {
                if ((delete a.abortController, a.aborted)) a.state = "unloaded";
                else if (f) throw ((a.state = "errored"), f);
              }
            });
          }
          abortTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.abortController &&
                (a.abortController.abort(), delete a.abortController);
            });
          }
          unloadTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.texture && this.map.painter.saveTileTexture(a.texture);
            });
          }
          hasTransition() {
            return !1;
          }
        }
        class gi extends Si {
          constructor(a, d, f, g) {
            super(a, d, f, g),
              (this.type = "raster-dem"),
              (this.maxzoom = 22),
              (this._options = n.e({ type: "raster-dem" }, d)),
              (this.encoding = d.encoding || "mapbox"),
              (this.redFactor = d.redFactor),
              (this.greenFactor = d.greenFactor),
              (this.blueFactor = d.blueFactor),
              (this.baseShift = d.baseShift);
          }
          loadTile(a) {
            return n._(this, void 0, void 0, function* () {
              let d = a.tileID.canonical.url(
                  this.tiles,
                  this.map.getPixelRatio(),
                  this.scheme
                ),
                f = this.map._requestManager.transformRequest(d, ce.Tile);
              (a.neighboringTiles = this._getNeighboringTiles(a.tileID)),
                (a.abortController = new AbortController());
              try {
                let g = yield te.getImage(
                  f,
                  a.abortController,
                  this.map._refreshExpiredTiles
                );
                if ((delete a.abortController, a.aborted))
                  return void (a.state = "unloaded");
                if (g && g.data) {
                  let x = g.data;
                  this.map._refreshExpiredTiles &&
                    g.cacheControl &&
                    g.expires &&
                    a.setExpiryData({
                      cacheControl: g.cacheControl,
                      expires: g.expires,
                    });
                  let E = n.b(x) && n.S() ? x : yield this.readImageNow(x),
                    M = {
                      type: this.type,
                      uid: a.uid,
                      source: this.id,
                      rawImageData: E,
                      encoding: this.encoding,
                      redFactor: this.redFactor,
                      greenFactor: this.greenFactor,
                      blueFactor: this.blueFactor,
                      baseShift: this.baseShift,
                    };
                  if (!a.actor || a.state === "expired") {
                    a.actor = this.dispatcher.getActor();
                    let I = yield a.actor.sendAsync({
                      type: "loadDEMTile",
                      data: M,
                    });
                    (a.dem = I),
                      (a.needsHillshadePrepare = !0),
                      (a.needsTerrainPrepare = !0),
                      (a.state = "loaded");
                  }
                }
              } catch (g) {
                if ((delete a.abortController, a.aborted)) a.state = "unloaded";
                else if (g) throw ((a.state = "errored"), g);
              }
            });
          }
          readImageNow(a) {
            return n._(this, void 0, void 0, function* () {
              if (typeof VideoFrame < "u" && n.U()) {
                let d = a.width + 2,
                  f = a.height + 2;
                try {
                  return new n.R(
                    { width: d, height: f },
                    yield n.V(a, -1, -1, d, f)
                  );
                } catch {}
              }
              return b.getImageData(a, 1);
            });
          }
          _getNeighboringTiles(a) {
            let d = a.canonical,
              f = Math.pow(2, d.z),
              g = (d.x - 1 + f) % f,
              x = d.x === 0 ? a.wrap - 1 : a.wrap,
              E = (d.x + 1 + f) % f,
              M = d.x + 1 === f ? a.wrap + 1 : a.wrap,
              I = {};
            return (
              (I[new n.Q(a.overscaledZ, x, d.z, g, d.y).key] = {
                backfilled: !1,
              }),
              (I[new n.Q(a.overscaledZ, M, d.z, E, d.y).key] = {
                backfilled: !1,
              }),
              d.y > 0 &&
                ((I[new n.Q(a.overscaledZ, x, d.z, g, d.y - 1).key] = {
                  backfilled: !1,
                }),
                (I[new n.Q(a.overscaledZ, a.wrap, d.z, d.x, d.y - 1).key] = {
                  backfilled: !1,
                }),
                (I[new n.Q(a.overscaledZ, M, d.z, E, d.y - 1).key] = {
                  backfilled: !1,
                })),
              d.y + 1 < f &&
                ((I[new n.Q(a.overscaledZ, x, d.z, g, d.y + 1).key] = {
                  backfilled: !1,
                }),
                (I[new n.Q(a.overscaledZ, a.wrap, d.z, d.x, d.y + 1).key] = {
                  backfilled: !1,
                }),
                (I[new n.Q(a.overscaledZ, M, d.z, E, d.y + 1).key] = {
                  backfilled: !1,
                })),
              I
            );
          }
          unloadTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.demTexture && this.map.painter.saveTileTexture(a.demTexture),
                a.fbo && (a.fbo.destroy(), delete a.fbo),
                a.dem && delete a.dem,
                delete a.neighboringTiles,
                (a.state = "unloaded"),
                a.actor &&
                  (yield a.actor.sendAsync({
                    type: "removeDEMTile",
                    data: { type: this.type, uid: a.uid, source: this.id },
                  }));
            });
          }
        }
        class ui extends n.E {
          constructor(a, d, f, g) {
            super(),
              (this.id = a),
              (this.type = "geojson"),
              (this.minzoom = 0),
              (this.maxzoom = 18),
              (this.tileSize = 512),
              (this.isTileClipped = !0),
              (this.reparseOverscaled = !0),
              (this._removed = !1),
              (this._pendingLoads = 0),
              (this.actor = f.getActor()),
              this.setEventedParent(g),
              (this._data = d.data),
              (this._options = n.e({}, d)),
              (this._collectResourceTiming = d.collectResourceTiming),
              d.maxzoom !== void 0 && (this.maxzoom = d.maxzoom),
              d.type && (this.type = d.type),
              d.attribution && (this.attribution = d.attribution),
              (this.promoteId = d.promoteId);
            let x = n.W / this.tileSize;
            (this.workerOptions = n.e(
              {
                source: this.id,
                cluster: d.cluster || !1,
                geojsonVtOptions: {
                  buffer: (d.buffer !== void 0 ? d.buffer : 128) * x,
                  tolerance: (d.tolerance !== void 0 ? d.tolerance : 0.375) * x,
                  extent: n.W,
                  maxZoom: this.maxzoom,
                  lineMetrics: d.lineMetrics || !1,
                  generateId: d.generateId || !1,
                },
                superclusterOptions: {
                  maxZoom:
                    d.clusterMaxZoom !== void 0
                      ? d.clusterMaxZoom
                      : this.maxzoom - 1,
                  minPoints: Math.max(2, d.clusterMinPoints || 2),
                  extent: n.W,
                  radius: (d.clusterRadius || 50) * x,
                  log: !1,
                  generateId: d.generateId || !1,
                },
                clusterProperties: d.clusterProperties,
                filter: d.filter,
              },
              d.workerOptions
            )),
              typeof this.promoteId == "string" &&
                (this.workerOptions.promoteId = this.promoteId);
          }
          load() {
            return n._(this, void 0, void 0, function* () {
              yield this._updateWorkerData();
            });
          }
          onAdd(a) {
            (this.map = a), this.load();
          }
          setData(a) {
            return (this._data = a), this._updateWorkerData(), this;
          }
          updateData(a) {
            return this._updateWorkerData(a), this;
          }
          setClusterOptions(a) {
            return (
              (this.workerOptions.cluster = a.cluster),
              a &&
                (a.clusterRadius !== void 0 &&
                  (this.workerOptions.superclusterOptions.radius =
                    a.clusterRadius),
                a.clusterMaxZoom !== void 0 &&
                  (this.workerOptions.superclusterOptions.maxZoom =
                    a.clusterMaxZoom)),
              this._updateWorkerData(),
              this
            );
          }
          getClusterExpansionZoom(a) {
            return this.actor.sendAsync({
              type: "getClusterExpansionZoom",
              data: { type: this.type, clusterId: a, source: this.id },
            });
          }
          getClusterChildren(a) {
            return this.actor.sendAsync({
              type: "getClusterChildren",
              data: { type: this.type, clusterId: a, source: this.id },
            });
          }
          getClusterLeaves(a, d, f) {
            return this.actor.sendAsync({
              type: "getClusterLeaves",
              data: {
                type: this.type,
                source: this.id,
                clusterId: a,
                limit: d,
                offset: f,
              },
            });
          }
          _updateWorkerData(a) {
            return n._(this, void 0, void 0, function* () {
              let d = n.e({ type: this.type }, this.workerOptions);
              a
                ? (d.dataDiff = a)
                : typeof this._data == "string"
                ? ((d.request = this.map._requestManager.transformRequest(
                    b.resolveURL(this._data),
                    ce.Source
                  )),
                  (d.request.collectResourceTiming =
                    this._collectResourceTiming))
                : (d.data = JSON.stringify(this._data)),
                this._pendingLoads++,
                this.fire(new n.k("dataloading", { dataType: "source" }));
              try {
                let f = yield this.actor.sendAsync({
                  type: "loadData",
                  data: d,
                });
                if ((this._pendingLoads--, this._removed || f.abandoned))
                  return void this.fire(
                    new n.k("dataabort", { dataType: "source" })
                  );
                let g = null;
                f.resourceTiming &&
                  f.resourceTiming[this.id] &&
                  (g = f.resourceTiming[this.id].slice(0));
                let x = { dataType: "source" };
                this._collectResourceTiming &&
                  g &&
                  g.length > 0 &&
                  n.e(x, { resourceTiming: g }),
                  this.fire(
                    new n.k(
                      "data",
                      Object.assign(Object.assign({}, x), {
                        sourceDataType: "metadata",
                      })
                    )
                  ),
                  this.fire(
                    new n.k(
                      "data",
                      Object.assign(Object.assign({}, x), {
                        sourceDataType: "content",
                      })
                    )
                  );
              } catch (f) {
                if ((this._pendingLoads--, this._removed))
                  return void this.fire(
                    new n.k("dataabort", { dataType: "source" })
                  );
                this.fire(new n.j(f));
              }
            });
          }
          loaded() {
            return this._pendingLoads === 0;
          }
          loadTile(a) {
            return n._(this, void 0, void 0, function* () {
              let d = a.actor ? "reloadTile" : "loadTile";
              a.actor = this.actor;
              let f = {
                type: this.type,
                uid: a.uid,
                tileID: a.tileID,
                zoom: a.tileID.overscaledZ,
                maxZoom: this.maxzoom,
                tileSize: this.tileSize,
                source: this.id,
                pixelRatio: this.map.getPixelRatio(),
                showCollisionBoxes: this.map.showCollisionBoxes,
                promoteId: this.promoteId,
              };
              a.abortController = new AbortController();
              let g = yield this.actor.sendAsync(
                { type: d, data: f },
                a.abortController
              );
              delete a.abortController,
                a.unloadVectorData(),
                a.aborted ||
                  a.loadVectorData(g, this.map.painter, d === "reloadTile");
            });
          }
          abortTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.abortController &&
                (a.abortController.abort(), delete a.abortController),
                (a.aborted = !0);
            });
          }
          unloadTile(a) {
            return n._(this, void 0, void 0, function* () {
              a.unloadVectorData(),
                yield this.actor.sendAsync({
                  type: "removeTile",
                  data: { uid: a.uid, type: this.type, source: this.id },
                });
            });
          }
          onRemove() {
            (this._removed = !0),
              this.actor.sendAsync({
                type: "removeSource",
                data: { type: this.type, source: this.id },
              });
          }
          serialize() {
            return n.e({}, this._options, {
              type: this.type,
              data: this._data,
            });
          }
          hasTransition() {
            return !1;
          }
        }
        var pr = n.X([
          { name: "a_pos", type: "Int16", components: 2 },
          { name: "a_texture_pos", type: "Int16", components: 2 },
        ]);
        class Er extends n.E {
          constructor(a, d, f, g) {
            super(),
              (this.id = a),
              (this.dispatcher = f),
              (this.coordinates = d.coordinates),
              (this.type = "image"),
              (this.minzoom = 0),
              (this.maxzoom = 22),
              (this.tileSize = 512),
              (this.tiles = {}),
              (this._loaded = !1),
              this.setEventedParent(g),
              (this.options = d);
          }
          load(a) {
            return n._(this, void 0, void 0, function* () {
              (this._loaded = !1),
                this.fire(new n.k("dataloading", { dataType: "source" })),
                (this.url = this.options.url),
                (this._request = new AbortController());
              try {
                let d = yield te.getImage(
                  this.map._requestManager.transformRequest(this.url, ce.Image),
                  this._request
                );
                (this._request = null),
                  (this._loaded = !0),
                  d &&
                    d.data &&
                    ((this.image = d.data),
                    a && (this.coordinates = a),
                    this._finishLoading());
              } catch (d) {
                (this._request = null), this.fire(new n.j(d));
              }
            });
          }
          loaded() {
            return this._loaded;
          }
          updateImage(a) {
            return a.url
              ? (this._request &&
                  (this._request.abort(), (this._request = null)),
                (this.options.url = a.url),
                this.load(a.coordinates).finally(() => {
                  this.texture = null;
                }),
                this)
              : this;
          }
          _finishLoading() {
            this.map &&
              (this.setCoordinates(this.coordinates),
              this.fire(
                new n.k("data", {
                  dataType: "source",
                  sourceDataType: "metadata",
                })
              ));
          }
          onAdd(a) {
            (this.map = a), this.load();
          }
          onRemove() {
            this._request && (this._request.abort(), (this._request = null));
          }
          setCoordinates(a) {
            this.coordinates = a;
            let d = a.map(n.Y.fromLngLat);
            (this.tileID = (function (g) {
              let x = 1 / 0,
                E = 1 / 0,
                M = -1 / 0,
                I = -1 / 0;
              for (let Z of g)
                (x = Math.min(x, Z.x)),
                  (E = Math.min(E, Z.y)),
                  (M = Math.max(M, Z.x)),
                  (I = Math.max(I, Z.y));
              let z = Math.max(M - x, I - E),
                B = Math.max(0, Math.floor(-Math.log(z) / Math.LN2)),
                U = Math.pow(2, B);
              return new n.a0(
                B,
                Math.floor(((x + M) / 2) * U),
                Math.floor(((E + I) / 2) * U)
              );
            })(d)),
              (this.minzoom = this.maxzoom = this.tileID.z);
            let f = d.map((g) => this.tileID.getTilePoint(g)._round());
            return (
              (this._boundsArray = new n.Z()),
              this._boundsArray.emplaceBack(f[0].x, f[0].y, 0, 0),
              this._boundsArray.emplaceBack(f[1].x, f[1].y, n.W, 0),
              this._boundsArray.emplaceBack(f[3].x, f[3].y, 0, n.W),
              this._boundsArray.emplaceBack(f[2].x, f[2].y, n.W, n.W),
              this.boundsBuffer &&
                (this.boundsBuffer.destroy(), delete this.boundsBuffer),
              this.fire(
                new n.k("data", {
                  dataType: "source",
                  sourceDataType: "content",
                })
              ),
              this
            );
          }
          prepare() {
            if (Object.keys(this.tiles).length === 0 || !this.image) return;
            let a = this.map.painter.context,
              d = a.gl;
            this.boundsBuffer ||
              (this.boundsBuffer = a.createVertexBuffer(
                this._boundsArray,
                pr.members
              )),
              this.boundsSegments ||
                (this.boundsSegments = n.$.simpleSegment(0, 0, 4, 2)),
              this.texture ||
                ((this.texture = new st(a, this.image, d.RGBA)),
                this.texture.bind(d.LINEAR, d.CLAMP_TO_EDGE));
            let f = !1;
            for (let g in this.tiles) {
              let x = this.tiles[g];
              x.state !== "loaded" &&
                ((x.state = "loaded"), (x.texture = this.texture), (f = !0));
            }
            f &&
              this.fire(
                new n.k("data", {
                  dataType: "source",
                  sourceDataType: "idle",
                  sourceId: this.id,
                })
              );
          }
          loadTile(a) {
            return n._(this, void 0, void 0, function* () {
              this.tileID && this.tileID.equals(a.tileID.canonical)
                ? ((this.tiles[String(a.tileID.wrap)] = a), (a.buckets = {}))
                : (a.state = "errored");
            });
          }
          serialize() {
            return {
              type: "image",
              url: this.options.url,
              coordinates: this.coordinates,
            };
          }
          hasTransition() {
            return !1;
          }
        }
        class en extends Er {
          constructor(a, d, f, g) {
            super(a, d, f, g),
              (this.roundZoom = !0),
              (this.type = "video"),
              (this.options = d);
          }
          load() {
            return n._(this, void 0, void 0, function* () {
              this._loaded = !1;
              let a = this.options;
              this.urls = [];
              for (let d of a.urls)
                this.urls.push(
                  this.map._requestManager.transformRequest(d, ce.Source).url
                );
              try {
                let d = yield n.a2(this.urls);
                if (((this._loaded = !0), !d)) return;
                (this.video = d),
                  (this.video.loop = !0),
                  this.video.addEventListener("playing", () => {
                    this.map.triggerRepaint();
                  }),
                  this.map && this.video.play(),
                  this._finishLoading();
              } catch (d) {
                this.fire(new n.j(d));
              }
            });
          }
          pause() {
            this.video && this.video.pause();
          }
          play() {
            this.video && this.video.play();
          }
          seek(a) {
            if (this.video) {
              let d = this.video.seekable;
              a < d.start(0) || a > d.end(0)
                ? this.fire(
                    new n.j(
                      new n.a1(
                        `sources.${this.id}`,
                        null,
                        `Playback for this video can be set only between the ${d.start(
                          0
                        )} and ${d.end(0)}-second mark.`
                      )
                    )
                  )
                : (this.video.currentTime = a);
            }
          }
          getVideo() {
            return this.video;
          }
          onAdd(a) {
            this.map ||
              ((this.map = a),
              this.load(),
              this.video &&
                (this.video.play(), this.setCoordinates(this.coordinates)));
          }
          prepare() {
            if (
              Object.keys(this.tiles).length === 0 ||
              this.video.readyState < 2
            )
              return;
            let a = this.map.painter.context,
              d = a.gl;
            this.boundsBuffer ||
              (this.boundsBuffer = a.createVertexBuffer(
                this._boundsArray,
                pr.members
              )),
              this.boundsSegments ||
                (this.boundsSegments = n.$.simpleSegment(0, 0, 4, 2)),
              this.texture
                ? this.video.paused ||
                  (this.texture.bind(d.LINEAR, d.CLAMP_TO_EDGE),
                  d.texSubImage2D(
                    d.TEXTURE_2D,
                    0,
                    0,
                    0,
                    d.RGBA,
                    d.UNSIGNED_BYTE,
                    this.video
                  ))
                : ((this.texture = new st(a, this.video, d.RGBA)),
                  this.texture.bind(d.LINEAR, d.CLAMP_TO_EDGE));
            let f = !1;
            for (let g in this.tiles) {
              let x = this.tiles[g];
              x.state !== "loaded" &&
                ((x.state = "loaded"), (x.texture = this.texture), (f = !0));
            }
            f &&
              this.fire(
                new n.k("data", {
                  dataType: "source",
                  sourceDataType: "idle",
                  sourceId: this.id,
                })
              );
          }
          serialize() {
            return {
              type: "video",
              urls: this.urls,
              coordinates: this.coordinates,
            };
          }
          hasTransition() {
            return this.video && !this.video.paused;
          }
        }
        class tn extends Er {
          constructor(a, d, f, g) {
            super(a, d, f, g),
              d.coordinates
                ? (Array.isArray(d.coordinates) &&
                    d.coordinates.length === 4 &&
                    !d.coordinates.some(
                      (x) =>
                        !Array.isArray(x) ||
                        x.length !== 2 ||
                        x.some((E) => typeof E != "number")
                    )) ||
                  this.fire(
                    new n.j(
                      new n.a1(
                        `sources.${a}`,
                        null,
                        '"coordinates" property must be an array of 4 longitude/latitude array pairs'
                      )
                    )
                  )
                : this.fire(
                    new n.j(
                      new n.a1(
                        `sources.${a}`,
                        null,
                        'missing required property "coordinates"'
                      )
                    )
                  ),
              d.animate &&
                typeof d.animate != "boolean" &&
                this.fire(
                  new n.j(
                    new n.a1(
                      `sources.${a}`,
                      null,
                      'optional "animate" property must be a boolean value'
                    )
                  )
                ),
              d.canvas
                ? typeof d.canvas == "string" ||
                  d.canvas instanceof HTMLCanvasElement ||
                  this.fire(
                    new n.j(
                      new n.a1(
                        `sources.${a}`,
                        null,
                        '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'
                      )
                    )
                  )
                : this.fire(
                    new n.j(
                      new n.a1(
                        `sources.${a}`,
                        null,
                        'missing required property "canvas"'
                      )
                    )
                  ),
              (this.options = d),
              (this.animate = d.animate === void 0 || d.animate);
          }
          load() {
            return n._(this, void 0, void 0, function* () {
              (this._loaded = !0),
                this.canvas ||
                  (this.canvas =
                    this.options.canvas instanceof HTMLCanvasElement
                      ? this.options.canvas
                      : document.getElementById(this.options.canvas)),
                (this.width = this.canvas.width),
                (this.height = this.canvas.height),
                this._hasInvalidDimensions()
                  ? this.fire(
                      new n.j(
                        new Error(
                          "Canvas dimensions cannot be less than or equal to zero."
                        )
                      )
                    )
                  : ((this.play = function () {
                      (this._playing = !0), this.map.triggerRepaint();
                    }),
                    (this.pause = function () {
                      this._playing && (this.prepare(), (this._playing = !1));
                    }),
                    this._finishLoading());
            });
          }
          getCanvas() {
            return this.canvas;
          }
          onAdd(a) {
            (this.map = a),
              this.load(),
              this.canvas && this.animate && this.play();
          }
          onRemove() {
            this.pause();
          }
          prepare() {
            let a = !1;
            if (
              (this.canvas.width !== this.width &&
                ((this.width = this.canvas.width), (a = !0)),
              this.canvas.height !== this.height &&
                ((this.height = this.canvas.height), (a = !0)),
              this._hasInvalidDimensions() ||
                Object.keys(this.tiles).length === 0)
            )
              return;
            let d = this.map.painter.context,
              f = d.gl;
            this.boundsBuffer ||
              (this.boundsBuffer = d.createVertexBuffer(
                this._boundsArray,
                pr.members
              )),
              this.boundsSegments ||
                (this.boundsSegments = n.$.simpleSegment(0, 0, 4, 2)),
              this.texture
                ? (a || this._playing) &&
                  this.texture.update(this.canvas, { premultiply: !0 })
                : (this.texture = new st(d, this.canvas, f.RGBA, {
                    premultiply: !0,
                  }));
            let g = !1;
            for (let x in this.tiles) {
              let E = this.tiles[x];
              E.state !== "loaded" &&
                ((E.state = "loaded"), (E.texture = this.texture), (g = !0));
            }
            g &&
              this.fire(
                new n.k("data", {
                  dataType: "source",
                  sourceDataType: "idle",
                  sourceId: this.id,
                })
              );
          }
          serialize() {
            return { type: "canvas", coordinates: this.coordinates };
          }
          hasTransition() {
            return this._playing;
          }
          _hasInvalidDimensions() {
            for (let a of [this.canvas.width, this.canvas.height])
              if (isNaN(a) || a <= 0) return !0;
            return !1;
          }
        }
        let yn = {},
          Vn = (v) => {
            switch (v) {
              case "geojson":
                return ui;
              case "image":
                return Er;
              case "raster":
                return Si;
              case "raster-dem":
                return gi;
              case "vector":
                return je;
              case "video":
                return en;
              case "canvas":
                return tn;
            }
            return yn[v];
          },
          An = "RTLPluginLoaded";
        class Zr extends n.E {
          constructor() {
            super(...arguments),
              (this.status = "unavailable"),
              (this.url = null),
              (this.dispatcher = it());
          }
          _syncState(a) {
            return (
              (this.status = a),
              this.dispatcher
                .broadcast("syncRTLPluginState", {
                  pluginStatus: a,
                  pluginURL: this.url,
                })
                .catch((d) => {
                  throw ((this.status = "error"), d);
                })
            );
          }
          getRTLTextPluginStatus() {
            return this.status;
          }
          clearRTLTextPlugin() {
            (this.status = "unavailable"), (this.url = null);
          }
          setRTLTextPlugin(a) {
            return n._(this, arguments, void 0, function* (d, f = !1) {
              if (this.url)
                throw new Error(
                  "setRTLTextPlugin cannot be called multiple times."
                );
              if (((this.url = b.resolveURL(d)), !this.url))
                throw new Error(`requested url ${d} is invalid`);
              if (this.status === "unavailable") {
                if (!f) return this._requestImport();
                (this.status = "deferred"), this._syncState(this.status);
              } else if (this.status === "requested") return this._requestImport();
            });
          }
          _requestImport() {
            return n._(this, void 0, void 0, function* () {
              yield this._syncState("loading"),
                (this.status = "loaded"),
                this.fire(new n.k(An));
            });
          }
          lazyLoad() {
            this.status === "unavailable"
              ? (this.status = "requested")
              : this.status === "deferred" && this._requestImport();
          }
        }
        let at = null;
        function Pr() {
          return at || (at = new Zr()), at;
        }
        class Dr {
          constructor(a, d) {
            (this.timeAdded = 0),
              (this.fadeEndTime = 0),
              (this.tileID = a),
              (this.uid = n.a3()),
              (this.uses = 0),
              (this.tileSize = d),
              (this.buckets = {}),
              (this.expirationTime = null),
              (this.queryPadding = 0),
              (this.hasSymbolBuckets = !1),
              (this.hasRTLText = !1),
              (this.dependencies = {}),
              (this.rtt = []),
              (this.rttCoords = {}),
              (this.expiredRequestCount = 0),
              (this.state = "loading");
          }
          registerFadeDuration(a) {
            let d = a + this.timeAdded;
            d < this.fadeEndTime || (this.fadeEndTime = d);
          }
          wasRequested() {
            return (
              this.state === "errored" ||
              this.state === "loaded" ||
              this.state === "reloading"
            );
          }
          clearTextures(a) {
            this.demTexture && a.saveTileTexture(this.demTexture),
              (this.demTexture = null);
          }
          loadVectorData(a, d, f) {
            if (
              (this.hasData() && this.unloadVectorData(),
              (this.state = "loaded"),
              a)
            ) {
              a.featureIndex &&
                ((this.latestFeatureIndex = a.featureIndex),
                a.rawTileData
                  ? ((this.latestRawTileData = a.rawTileData),
                    (this.latestFeatureIndex.rawTileData = a.rawTileData))
                  : this.latestRawTileData &&
                    (this.latestFeatureIndex.rawTileData =
                      this.latestRawTileData)),
                (this.collisionBoxArray = a.collisionBoxArray),
                (this.buckets = (function (g, x) {
                  let E = {};
                  if (!x) return E;
                  for (let M of g) {
                    let I = M.layerIds
                      .map((z) => x.getLayer(z))
                      .filter(Boolean);
                    if (I.length !== 0) {
                      (M.layers = I),
                        M.stateDependentLayerIds &&
                          (M.stateDependentLayers =
                            M.stateDependentLayerIds.map(
                              (z) => I.filter((B) => B.id === z)[0]
                            ));
                      for (let z of I) E[z.id] = M;
                    }
                  }
                  return E;
                })(a.buckets, d.style)),
                (this.hasSymbolBuckets = !1);
              for (let g in this.buckets) {
                let x = this.buckets[g];
                if (x instanceof n.a5) {
                  if (((this.hasSymbolBuckets = !0), !f)) break;
                  x.justReloaded = !0;
                }
              }
              if (((this.hasRTLText = !1), this.hasSymbolBuckets))
                for (let g in this.buckets) {
                  let x = this.buckets[g];
                  if (x instanceof n.a5 && x.hasRTLText) {
                    (this.hasRTLText = !0), Pr().lazyLoad();
                    break;
                  }
                }
              this.queryPadding = 0;
              for (let g in this.buckets) {
                let x = this.buckets[g];
                this.queryPadding = Math.max(
                  this.queryPadding,
                  d.style.getLayer(g).queryRadius(x)
                );
              }
              a.imageAtlas && (this.imageAtlas = a.imageAtlas),
                a.glyphAtlasImage && (this.glyphAtlasImage = a.glyphAtlasImage);
            } else this.collisionBoxArray = new n.a4();
          }
          unloadVectorData() {
            for (let a in this.buckets) this.buckets[a].destroy();
            (this.buckets = {}),
              this.imageAtlasTexture && this.imageAtlasTexture.destroy(),
              this.imageAtlas && (this.imageAtlas = null),
              this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(),
              (this.latestFeatureIndex = null),
              (this.state = "unloaded");
          }
          getBucket(a) {
            return this.buckets[a.id];
          }
          upload(a) {
            for (let f in this.buckets) {
              let g = this.buckets[f];
              g.uploadPending() && g.upload(a);
            }
            let d = a.gl;
            this.imageAtlas &&
              !this.imageAtlas.uploaded &&
              ((this.imageAtlasTexture = new st(
                a,
                this.imageAtlas.image,
                d.RGBA
              )),
              (this.imageAtlas.uploaded = !0)),
              this.glyphAtlasImage &&
                ((this.glyphAtlasTexture = new st(
                  a,
                  this.glyphAtlasImage,
                  d.ALPHA
                )),
                (this.glyphAtlasImage = null));
          }
          prepare(a) {
            this.imageAtlas &&
              this.imageAtlas.patchUpdatedImages(a, this.imageAtlasTexture);
          }
          queryRenderedFeatures(a, d, f, g, x, E, M, I, z, B) {
            return this.latestFeatureIndex &&
              this.latestFeatureIndex.rawTileData
              ? this.latestFeatureIndex.query(
                  {
                    queryGeometry: g,
                    cameraQueryGeometry: x,
                    scale: E,
                    tileSize: this.tileSize,
                    pixelPosMatrix: B,
                    transform: I,
                    params: M,
                    queryPadding: this.queryPadding * z,
                  },
                  a,
                  d,
                  f
                )
              : {};
          }
          querySourceFeatures(a, d) {
            let f = this.latestFeatureIndex;
            if (!f || !f.rawTileData) return;
            let g = f.loadVTLayers(),
              x = d && d.sourceLayer ? d.sourceLayer : "",
              E = g._geojsonTileLayer || g[x];
            if (!E) return;
            let M = n.a6(d && d.filter),
              { z: I, x: z, y: B } = this.tileID.canonical,
              U = { z: I, x: z, y: B };
            for (let Z = 0; Z < E.length; Z++) {
              let se = E.feature(Z);
              if (M.needGeometry) {
                let ee = n.a7(se, !0);
                if (
                  !M.filter(
                    new n.a8(this.tileID.overscaledZ),
                    ee,
                    this.tileID.canonical
                  )
                )
                  continue;
              } else if (!M.filter(new n.a8(this.tileID.overscaledZ), se))
                continue;
              let oe = f.getId(se, x),
                le = new n.a9(se, I, z, B, oe);
              (le.tile = U), a.push(le);
            }
          }
          hasData() {
            return (
              this.state === "loaded" ||
              this.state === "reloading" ||
              this.state === "expired"
            );
          }
          patternsLoaded() {
            return (
              this.imageAtlas &&
              !!Object.keys(this.imageAtlas.patternPositions).length
            );
          }
          setExpiryData(a) {
            let d = this.expirationTime;
            if (a.cacheControl) {
              let f = n.aa(a.cacheControl);
              f["max-age"] &&
                (this.expirationTime = Date.now() + 1e3 * f["max-age"]);
            } else a.expires && (this.expirationTime = new Date(a.expires).getTime());
            if (this.expirationTime) {
              let f = Date.now(),
                g = !1;
              if (this.expirationTime > f) g = !1;
              else if (d)
                if (this.expirationTime < d) g = !0;
                else {
                  let x = this.expirationTime - d;
                  x ? (this.expirationTime = f + Math.max(x, 3e4)) : (g = !0);
                }
              else g = !0;
              g
                ? (this.expiredRequestCount++, (this.state = "expired"))
                : (this.expiredRequestCount = 0);
            }
          }
          getExpiryTimeout() {
            if (this.expirationTime)
              return this.expiredRequestCount
                ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31))
                : Math.min(
                    this.expirationTime - new Date().getTime(),
                    Math.pow(2, 31) - 1
                  );
          }
          setFeatureState(a, d) {
            if (
              !this.latestFeatureIndex ||
              !this.latestFeatureIndex.rawTileData ||
              Object.keys(a).length === 0
            )
              return;
            let f = this.latestFeatureIndex.loadVTLayers();
            for (let g in this.buckets) {
              if (!d.style.hasLayer(g)) continue;
              let x = this.buckets[g],
                E = x.layers[0].sourceLayer || "_geojsonTileLayer",
                M = f[E],
                I = a[E];
              if (!M || !I || Object.keys(I).length === 0) continue;
              x.update(
                I,
                M,
                (this.imageAtlas && this.imageAtlas.patternPositions) || {}
              );
              let z = d && d.style && d.style.getLayer(g);
              z &&
                (this.queryPadding = Math.max(
                  this.queryPadding,
                  z.queryRadius(x)
                ));
            }
          }
          holdingForFade() {
            return this.symbolFadeHoldUntil !== void 0;
          }
          symbolFadeFinished() {
            return (
              !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < b.now()
            );
          }
          clearFadeHold() {
            this.symbolFadeHoldUntil = void 0;
          }
          setHoldDuration(a) {
            this.symbolFadeHoldUntil = b.now() + a;
          }
          setDependencies(a, d) {
            let f = {};
            for (let g of d) f[g] = !0;
            this.dependencies[a] = f;
          }
          hasDependency(a, d) {
            for (let f of a) {
              let g = this.dependencies[f];
              if (g) {
                for (let x of d) if (g[x]) return !0;
              }
            }
            return !1;
          }
        }
        class Kn {
          constructor(a, d) {
            (this.max = a), (this.onRemove = d), this.reset();
          }
          reset() {
            for (let a in this.data)
              for (let d of this.data[a])
                d.timeout && clearTimeout(d.timeout), this.onRemove(d.value);
            return (this.data = {}), (this.order = []), this;
          }
          add(a, d, f) {
            let g = a.wrapped().key;
            this.data[g] === void 0 && (this.data[g] = []);
            let x = { value: d, timeout: void 0 };
            if (
              (f !== void 0 &&
                (x.timeout = setTimeout(() => {
                  this.remove(a, x);
                }, f)),
              this.data[g].push(x),
              this.order.push(g),
              this.order.length > this.max)
            ) {
              let E = this._getAndRemoveByKey(this.order[0]);
              E && this.onRemove(E);
            }
            return this;
          }
          has(a) {
            return a.wrapped().key in this.data;
          }
          getAndRemove(a) {
            return this.has(a)
              ? this._getAndRemoveByKey(a.wrapped().key)
              : null;
          }
          _getAndRemoveByKey(a) {
            let d = this.data[a].shift();
            return (
              d.timeout && clearTimeout(d.timeout),
              this.data[a].length === 0 && delete this.data[a],
              this.order.splice(this.order.indexOf(a), 1),
              d.value
            );
          }
          getByKey(a) {
            let d = this.data[a];
            return d ? d[0].value : null;
          }
          get(a) {
            return this.has(a) ? this.data[a.wrapped().key][0].value : null;
          }
          remove(a, d) {
            if (!this.has(a)) return this;
            let f = a.wrapped().key,
              g = d === void 0 ? 0 : this.data[f].indexOf(d),
              x = this.data[f][g];
            return (
              this.data[f].splice(g, 1),
              x.timeout && clearTimeout(x.timeout),
              this.data[f].length === 0 && delete this.data[f],
              this.onRemove(x.value),
              this.order.splice(this.order.indexOf(f), 1),
              this
            );
          }
          setMaxSize(a) {
            for (this.max = a; this.order.length > this.max; ) {
              let d = this._getAndRemoveByKey(this.order[0]);
              d && this.onRemove(d);
            }
            return this;
          }
          filter(a) {
            let d = [];
            for (let f in this.data)
              for (let g of this.data[f]) a(g.value) || d.push(g);
            for (let f of d) this.remove(f.value.tileID, f);
          }
        }
        class ko {
          constructor() {
            (this.state = {}),
              (this.stateChanges = {}),
              (this.deletedStates = {});
          }
          updateState(a, d, f) {
            let g = String(d);
            if (
              ((this.stateChanges[a] = this.stateChanges[a] || {}),
              (this.stateChanges[a][g] = this.stateChanges[a][g] || {}),
              n.e(this.stateChanges[a][g], f),
              this.deletedStates[a] === null)
            ) {
              this.deletedStates[a] = {};
              for (let x in this.state[a])
                x !== g && (this.deletedStates[a][x] = null);
            } else if (
              this.deletedStates[a] &&
              this.deletedStates[a][g] === null
            ) {
              this.deletedStates[a][g] = {};
              for (let x in this.state[a][g])
                f[x] || (this.deletedStates[a][g][x] = null);
            } else
              for (let x in f)
                this.deletedStates[a] &&
                  this.deletedStates[a][g] &&
                  this.deletedStates[a][g][x] === null &&
                  delete this.deletedStates[a][g][x];
          }
          removeFeatureState(a, d, f) {
            if (this.deletedStates[a] === null) return;
            let g = String(d);
            if (
              ((this.deletedStates[a] = this.deletedStates[a] || {}),
              f && d !== void 0)
            )
              this.deletedStates[a][g] !== null &&
                ((this.deletedStates[a][g] = this.deletedStates[a][g] || {}),
                (this.deletedStates[a][g][f] = null));
            else if (d !== void 0)
              if (this.stateChanges[a] && this.stateChanges[a][g])
                for (f in ((this.deletedStates[a][g] = {}),
                this.stateChanges[a][g]))
                  this.deletedStates[a][g][f] = null;
              else this.deletedStates[a][g] = null;
            else this.deletedStates[a] = null;
          }
          getState(a, d) {
            let f = String(d),
              g = n.e(
                {},
                (this.state[a] || {})[f],
                (this.stateChanges[a] || {})[f]
              );
            if (this.deletedStates[a] === null) return {};
            if (this.deletedStates[a]) {
              let x = this.deletedStates[a][d];
              if (x === null) return {};
              for (let E in x) delete g[E];
            }
            return g;
          }
          initializeTileState(a, d) {
            a.setFeatureState(this.state, d);
          }
          coalesceChanges(a, d) {
            let f = {};
            for (let g in this.stateChanges) {
              this.state[g] = this.state[g] || {};
              let x = {};
              for (let E in this.stateChanges[g])
                this.state[g][E] || (this.state[g][E] = {}),
                  n.e(this.state[g][E], this.stateChanges[g][E]),
                  (x[E] = this.state[g][E]);
              f[g] = x;
            }
            for (let g in this.deletedStates) {
              this.state[g] = this.state[g] || {};
              let x = {};
              if (this.deletedStates[g] === null)
                for (let E in this.state[g])
                  (x[E] = {}), (this.state[g][E] = {});
              else
                for (let E in this.deletedStates[g]) {
                  if (this.deletedStates[g][E] === null) this.state[g][E] = {};
                  else
                    for (let M of Object.keys(this.deletedStates[g][E]))
                      delete this.state[g][E][M];
                  x[E] = this.state[g][E];
                }
              (f[g] = f[g] || {}), n.e(f[g], x);
            }
            if (
              ((this.stateChanges = {}),
              (this.deletedStates = {}),
              Object.keys(f).length !== 0)
            )
              for (let g in a) a[g].setFeatureState(f, d);
          }
        }
        class ft extends n.E {
          constructor(a, d, f) {
            super(),
              (this.id = a),
              (this.dispatcher = f),
              this.on("data", (g) => {
                g.dataType === "source" &&
                  g.sourceDataType === "metadata" &&
                  (this._sourceLoaded = !0),
                  this._sourceLoaded &&
                    !this._paused &&
                    g.dataType === "source" &&
                    g.sourceDataType === "content" &&
                    (this.reload(),
                    this.transform && this.update(this.transform, this.terrain),
                    (this._didEmitContent = !0));
              }),
              this.on("dataloading", () => {
                this._sourceErrored = !1;
              }),
              this.on("error", () => {
                this._sourceErrored = this._source.loaded();
              }),
              (this._source = ((g, x, E, M) => {
                let I = new (Vn(x.type))(g, x, E, M);
                if (I.id !== g)
                  throw new Error(
                    `Expected Source id to be ${g} instead of ${I.id}`
                  );
                return I;
              })(a, d, f, this)),
              (this._tiles = {}),
              (this._cache = new Kn(0, (g) => this._unloadTile(g))),
              (this._timers = {}),
              (this._cacheTimers = {}),
              (this._maxTileCacheSize = null),
              (this._maxTileCacheZoomLevels = null),
              (this._loadedParentTiles = {}),
              (this._coveredTiles = {}),
              (this._state = new ko()),
              (this._didEmitContent = !1),
              (this._updated = !1);
          }
          onAdd(a) {
            (this.map = a),
              (this._maxTileCacheSize = a ? a._maxTileCacheSize : null),
              (this._maxTileCacheZoomLevels = a
                ? a._maxTileCacheZoomLevels
                : null),
              this._source && this._source.onAdd && this._source.onAdd(a);
          }
          onRemove(a) {
            this.clearTiles(),
              this._source && this._source.onRemove && this._source.onRemove(a);
          }
          loaded() {
            if (this._sourceErrored) return !0;
            if (!this._sourceLoaded || !this._source.loaded()) return !1;
            if (
              !(
                (this.used === void 0 && this.usedForTerrain === void 0) ||
                this.used ||
                this.usedForTerrain
              )
            )
              return !0;
            if (!this._updated) return !1;
            for (let a in this._tiles) {
              let d = this._tiles[a];
              if (d.state !== "loaded" && d.state !== "errored") return !1;
            }
            return !0;
          }
          getSource() {
            return this._source;
          }
          pause() {
            this._paused = !0;
          }
          resume() {
            if (!this._paused) return;
            let a = this._shouldReloadOnResume;
            (this._paused = !1),
              (this._shouldReloadOnResume = !1),
              a && this.reload(),
              this.transform && this.update(this.transform, this.terrain);
          }
          _loadTile(a, d, f) {
            return n._(this, void 0, void 0, function* () {
              try {
                yield this._source.loadTile(a), this._tileLoaded(a, d, f);
              } catch (g) {
                (a.state = "errored"),
                  g.status !== 404
                    ? this._source.fire(new n.j(g, { tile: a }))
                    : this.update(this.transform, this.terrain);
              }
            });
          }
          _unloadTile(a) {
            this._source.unloadTile && this._source.unloadTile(a);
          }
          _abortTile(a) {
            this._source.abortTile && this._source.abortTile(a),
              this._source.fire(
                new n.k("dataabort", {
                  tile: a,
                  coord: a.tileID,
                  dataType: "source",
                })
              );
          }
          serialize() {
            return this._source.serialize();
          }
          prepare(a) {
            this._source.prepare && this._source.prepare(),
              this._state.coalesceChanges(
                this._tiles,
                this.map ? this.map.painter : null
              );
            for (let d in this._tiles) {
              let f = this._tiles[d];
              f.upload(a), f.prepare(this.map.style.imageManager);
            }
          }
          getIds() {
            return Object.values(this._tiles)
              .map((a) => a.tileID)
              .sort(Tt)
              .map((a) => a.key);
          }
          getRenderableIds(a) {
            let d = [];
            for (let f in this._tiles)
              this._isIdRenderable(f, a) && d.push(this._tiles[f]);
            return a
              ? d
                  .sort((f, g) => {
                    let x = f.tileID,
                      E = g.tileID,
                      M = new n.P(x.canonical.x, x.canonical.y)._rotate(
                        this.transform.angle
                      ),
                      I = new n.P(E.canonical.x, E.canonical.y)._rotate(
                        this.transform.angle
                      );
                    return (
                      x.overscaledZ - E.overscaledZ || I.y - M.y || I.x - M.x
                    );
                  })
                  .map((f) => f.tileID.key)
              : d
                  .map((f) => f.tileID)
                  .sort(Tt)
                  .map((f) => f.key);
          }
          hasRenderableParent(a) {
            let d = this.findLoadedParent(a, 0);
            return !!d && this._isIdRenderable(d.tileID.key);
          }
          _isIdRenderable(a, d) {
            return (
              this._tiles[a] &&
              this._tiles[a].hasData() &&
              !this._coveredTiles[a] &&
              (d || !this._tiles[a].holdingForFade())
            );
          }
          reload() {
            if (this._paused) this._shouldReloadOnResume = !0;
            else {
              this._cache.reset();
              for (let a in this._tiles)
                this._tiles[a].state !== "errored" &&
                  this._reloadTile(a, "reloading");
            }
          }
          _reloadTile(a, d) {
            return n._(this, void 0, void 0, function* () {
              let f = this._tiles[a];
              f &&
                (f.state !== "loading" && (f.state = d),
                yield this._loadTile(f, a, d));
            });
          }
          _tileLoaded(a, d, f) {
            (a.timeAdded = b.now()),
              f === "expired" && (a.refreshedUponExpiration = !0),
              this._setTileReloadTimer(d, a),
              this.getSource().type === "raster-dem" &&
                a.dem &&
                this._backfillDEM(a),
              this._state.initializeTileState(
                a,
                this.map ? this.map.painter : null
              ),
              a.aborted ||
                this._source.fire(
                  new n.k("data", {
                    dataType: "source",
                    tile: a,
                    coord: a.tileID,
                  })
                );
          }
          _backfillDEM(a) {
            let d = this.getRenderableIds();
            for (let g = 0; g < d.length; g++) {
              let x = d[g];
              if (a.neighboringTiles && a.neighboringTiles[x]) {
                let E = this.getTileByID(x);
                f(a, E), f(E, a);
              }
            }
            function f(g, x) {
              (g.needsHillshadePrepare = !0), (g.needsTerrainPrepare = !0);
              let E = x.tileID.canonical.x - g.tileID.canonical.x,
                M = x.tileID.canonical.y - g.tileID.canonical.y,
                I = Math.pow(2, g.tileID.canonical.z),
                z = x.tileID.key;
              (E === 0 && M === 0) ||
                Math.abs(M) > 1 ||
                (Math.abs(E) > 1 &&
                  (Math.abs(E + I) === 1
                    ? (E += I)
                    : Math.abs(E - I) === 1 && (E -= I)),
                x.dem &&
                  g.dem &&
                  (g.dem.backfillBorder(x.dem, E, M),
                  g.neighboringTiles &&
                    g.neighboringTiles[z] &&
                    (g.neighboringTiles[z].backfilled = !0)));
            }
          }
          getTile(a) {
            return this.getTileByID(a.key);
          }
          getTileByID(a) {
            return this._tiles[a];
          }
          _retainLoadedChildren(a, d, f, g) {
            for (let x in this._tiles) {
              let E = this._tiles[x];
              if (
                g[x] ||
                !E.hasData() ||
                E.tileID.overscaledZ <= d ||
                E.tileID.overscaledZ > f
              )
                continue;
              let M = E.tileID;
              for (; E && E.tileID.overscaledZ > d + 1; ) {
                let z = E.tileID.scaledTo(E.tileID.overscaledZ - 1);
                (E = this._tiles[z.key]), E && E.hasData() && (M = z);
              }
              let I = M;
              for (; I.overscaledZ > d; )
                if (((I = I.scaledTo(I.overscaledZ - 1)), a[I.key])) {
                  g[M.key] = M;
                  break;
                }
            }
          }
          findLoadedParent(a, d) {
            if (a.key in this._loadedParentTiles) {
              let f = this._loadedParentTiles[a.key];
              return f && f.tileID.overscaledZ >= d ? f : null;
            }
            for (let f = a.overscaledZ - 1; f >= d; f--) {
              let g = a.scaledTo(f),
                x = this._getLoadedTile(g);
              if (x) return x;
            }
          }
          _getLoadedTile(a) {
            let d = this._tiles[a.key];
            return d && d.hasData() ? d : this._cache.getByKey(a.wrapped().key);
          }
          updateCacheSize(a) {
            let d = Math.ceil(a.width / this._source.tileSize) + 1,
              f = Math.ceil(a.height / this._source.tileSize) + 1,
              g = Math.floor(
                d *
                  f *
                  (this._maxTileCacheZoomLevels === null
                    ? n.a.MAX_TILE_CACHE_ZOOM_LEVELS
                    : this._maxTileCacheZoomLevels)
              ),
              x =
                typeof this._maxTileCacheSize == "number"
                  ? Math.min(this._maxTileCacheSize, g)
                  : g;
            this._cache.setMaxSize(x);
          }
          handleWrapJump(a) {
            let d = Math.round(
              (a - (this._prevLng === void 0 ? a : this._prevLng)) / 360
            );
            if (((this._prevLng = a), d)) {
              let f = {};
              for (let g in this._tiles) {
                let x = this._tiles[g];
                (x.tileID = x.tileID.unwrapTo(x.tileID.wrap + d)),
                  (f[x.tileID.key] = x);
              }
              this._tiles = f;
              for (let g in this._timers)
                clearTimeout(this._timers[g]), delete this._timers[g];
              for (let g in this._tiles)
                this._setTileReloadTimer(g, this._tiles[g]);
            }
          }
          update(a, d) {
            if (
              ((this.transform = a),
              (this.terrain = d),
              !this._sourceLoaded || this._paused)
            )
              return;
            let f;
            this.updateCacheSize(a),
              this.handleWrapJump(this.transform.center.lng),
              (this._coveredTiles = {}),
              this.used || this.usedForTerrain
                ? this._source.tileID
                  ? (f = a
                      .getVisibleUnwrappedCoordinates(this._source.tileID)
                      .map(
                        (B) =>
                          new n.Q(
                            B.canonical.z,
                            B.wrap,
                            B.canonical.z,
                            B.canonical.x,
                            B.canonical.y
                          )
                      ))
                  : ((f = a.coveringTiles({
                      tileSize: this.usedForTerrain
                        ? this.tileSize
                        : this._source.tileSize,
                      minzoom: this._source.minzoom,
                      maxzoom: this._source.maxzoom,
                      roundZoom: !this.usedForTerrain && this._source.roundZoom,
                      reparseOverscaled: this._source.reparseOverscaled,
                      terrain: d,
                    })),
                    this._source.hasTile &&
                      (f = f.filter((B) => this._source.hasTile(B))))
                : (f = []);
            let g = a.coveringZoomLevel(this._source),
              x = Math.max(g - ft.maxOverzooming, this._source.minzoom),
              E = Math.max(g + ft.maxUnderzooming, this._source.minzoom);
            if (this.usedForTerrain) {
              let B = {};
              for (let U of f)
                if (U.canonical.z > this._source.minzoom) {
                  let Z = U.scaledTo(U.canonical.z - 1);
                  B[Z.key] = Z;
                  let se = U.scaledTo(
                    Math.max(this._source.minzoom, Math.min(U.canonical.z, 5))
                  );
                  B[se.key] = se;
                }
              f = f.concat(Object.values(B));
            }
            let M = f.length === 0 && !this._updated && this._didEmitContent;
            (this._updated = !0),
              M &&
                this.fire(
                  new n.k("data", {
                    sourceDataType: "idle",
                    dataType: "source",
                    sourceId: this.id,
                  })
                );
            let I = this._updateRetainedTiles(f, g);
            if (Fe(this._source.type)) {
              let B = {},
                U = {},
                Z = Object.keys(I),
                se = b.now();
              for (let oe of Z) {
                let le = I[oe],
                  ee = this._tiles[oe];
                if (!ee || (ee.fadeEndTime !== 0 && ee.fadeEndTime <= se))
                  continue;
                let _e = this.findLoadedParent(le, x);
                _e &&
                  (this._addTile(_e.tileID), (B[_e.tileID.key] = _e.tileID)),
                  (U[oe] = le);
              }
              this._retainLoadedChildren(U, g, E, I);
              for (let oe in B)
                I[oe] || ((this._coveredTiles[oe] = !0), (I[oe] = B[oe]));
              if (d) {
                let oe = {},
                  le = {};
                for (let ee of f)
                  this._tiles[ee.key].hasData()
                    ? (oe[ee.key] = ee)
                    : (le[ee.key] = ee);
                for (let ee in le) {
                  let _e = le[ee].children(this._source.maxzoom);
                  this._tiles[_e[0].key] &&
                    this._tiles[_e[1].key] &&
                    this._tiles[_e[2].key] &&
                    this._tiles[_e[3].key] &&
                    ((oe[_e[0].key] = I[_e[0].key] = _e[0]),
                    (oe[_e[1].key] = I[_e[1].key] = _e[1]),
                    (oe[_e[2].key] = I[_e[2].key] = _e[2]),
                    (oe[_e[3].key] = I[_e[3].key] = _e[3]),
                    delete le[ee]);
                }
                for (let ee in le) {
                  let _e = this.findLoadedParent(le[ee], this._source.minzoom);
                  if (_e) {
                    oe[_e.tileID.key] = I[_e.tileID.key] = _e.tileID;
                    for (let Be in oe)
                      oe[Be].isChildOf(_e.tileID) && delete oe[Be];
                  }
                }
                for (let ee in this._tiles)
                  oe[ee] || (this._coveredTiles[ee] = !0);
              }
            }
            for (let B in I) this._tiles[B].clearFadeHold();
            let z = n.ab(this._tiles, I);
            for (let B of z) {
              let U = this._tiles[B];
              U.hasSymbolBuckets && !U.holdingForFade()
                ? U.setHoldDuration(this.map._fadeDuration)
                : (U.hasSymbolBuckets && !U.symbolFadeFinished()) ||
                  this._removeTile(B);
            }
            this._updateLoadedParentTileCache();
          }
          releaseSymbolFadeTiles() {
            for (let a in this._tiles)
              this._tiles[a].holdingForFade() && this._removeTile(a);
          }
          _updateRetainedTiles(a, d) {
            let f = {},
              g = {},
              x = Math.max(d - ft.maxOverzooming, this._source.minzoom),
              E = Math.max(d + ft.maxUnderzooming, this._source.minzoom),
              M = {};
            for (let I of a) {
              let z = this._addTile(I);
              (f[I.key] = I),
                z.hasData() || (d < this._source.maxzoom && (M[I.key] = I));
            }
            this._retainLoadedChildren(M, d, E, f);
            for (let I of a) {
              let z = this._tiles[I.key];
              if (z.hasData()) continue;
              if (d + 1 > this._source.maxzoom) {
                let U = I.children(this._source.maxzoom)[0],
                  Z = this.getTile(U);
                if (Z && Z.hasData()) {
                  f[U.key] = U;
                  continue;
                }
              } else {
                let U = I.children(this._source.maxzoom);
                if (f[U[0].key] && f[U[1].key] && f[U[2].key] && f[U[3].key])
                  continue;
              }
              let B = z.wasRequested();
              for (let U = I.overscaledZ - 1; U >= x; --U) {
                let Z = I.scaledTo(U);
                if (g[Z.key]) break;
                if (
                  ((g[Z.key] = !0),
                  (z = this.getTile(Z)),
                  !z && B && (z = this._addTile(Z)),
                  z)
                ) {
                  let se = z.hasData();
                  if (((B || se) && (f[Z.key] = Z), (B = z.wasRequested()), se))
                    break;
                }
              }
            }
            return f;
          }
          _updateLoadedParentTileCache() {
            this._loadedParentTiles = {};
            for (let a in this._tiles) {
              let d = [],
                f,
                g = this._tiles[a].tileID;
              for (; g.overscaledZ > 0; ) {
                if (g.key in this._loadedParentTiles) {
                  f = this._loadedParentTiles[g.key];
                  break;
                }
                d.push(g.key);
                let x = g.scaledTo(g.overscaledZ - 1);
                if (((f = this._getLoadedTile(x)), f)) break;
                g = x;
              }
              for (let x of d) this._loadedParentTiles[x] = f;
            }
          }
          _addTile(a) {
            let d = this._tiles[a.key];
            if (d) return d;
            (d = this._cache.getAndRemove(a)),
              d &&
                (this._setTileReloadTimer(a.key, d),
                (d.tileID = a),
                this._state.initializeTileState(
                  d,
                  this.map ? this.map.painter : null
                ),
                this._cacheTimers[a.key] &&
                  (clearTimeout(this._cacheTimers[a.key]),
                  delete this._cacheTimers[a.key],
                  this._setTileReloadTimer(a.key, d)));
            let f = d;
            return (
              d ||
                ((d = new Dr(a, this._source.tileSize * a.overscaleFactor())),
                this._loadTile(d, a.key, d.state)),
              d.uses++,
              (this._tiles[a.key] = d),
              f ||
                this._source.fire(
                  new n.k("dataloading", {
                    tile: d,
                    coord: d.tileID,
                    dataType: "source",
                  })
                ),
              d
            );
          }
          _setTileReloadTimer(a, d) {
            a in this._timers &&
              (clearTimeout(this._timers[a]), delete this._timers[a]);
            let f = d.getExpiryTimeout();
            f &&
              (this._timers[a] = setTimeout(() => {
                this._reloadTile(a, "expired"), delete this._timers[a];
              }, f));
          }
          _removeTile(a) {
            let d = this._tiles[a];
            d &&
              (d.uses--,
              delete this._tiles[a],
              this._timers[a] &&
                (clearTimeout(this._timers[a]), delete this._timers[a]),
              d.uses > 0 ||
                (d.hasData() && d.state !== "reloading"
                  ? this._cache.add(d.tileID, d, d.getExpiryTimeout())
                  : ((d.aborted = !0),
                    this._abortTile(d),
                    this._unloadTile(d))));
          }
          clearTiles() {
            (this._shouldReloadOnResume = !1), (this._paused = !1);
            for (let a in this._tiles) this._removeTile(a);
            this._cache.reset();
          }
          tilesIn(a, d, f) {
            let g = [],
              x = this.transform;
            if (!x) return g;
            let E = f ? x.getCameraQueryGeometry(a) : a,
              M = a.map((oe) => x.pointCoordinate(oe, this.terrain)),
              I = E.map((oe) => x.pointCoordinate(oe, this.terrain)),
              z = this.getIds(),
              B = 1 / 0,
              U = 1 / 0,
              Z = -1 / 0,
              se = -1 / 0;
            for (let oe of I)
              (B = Math.min(B, oe.x)),
                (U = Math.min(U, oe.y)),
                (Z = Math.max(Z, oe.x)),
                (se = Math.max(se, oe.y));
            for (let oe = 0; oe < z.length; oe++) {
              let le = this._tiles[z[oe]];
              if (le.holdingForFade()) continue;
              let ee = le.tileID,
                _e = Math.pow(2, x.zoom - le.tileID.overscaledZ),
                Be = (d * le.queryPadding * n.W) / le.tileSize / _e,
                he = [
                  ee.getTilePoint(new n.Y(B, U)),
                  ee.getTilePoint(new n.Y(Z, se)),
                ];
              if (
                he[0].x - Be < n.W &&
                he[0].y - Be < n.W &&
                he[1].x + Be >= 0 &&
                he[1].y + Be >= 0
              ) {
                let Ee = M.map((Ve) => ee.getTilePoint(Ve)),
                  Ue = I.map((Ve) => ee.getTilePoint(Ve));
                g.push({
                  tile: le,
                  tileID: ee,
                  queryGeometry: Ee,
                  cameraQueryGeometry: Ue,
                  scale: _e,
                });
              }
            }
            return g;
          }
          getVisibleCoordinates(a) {
            let d = this.getRenderableIds(a).map((f) => this._tiles[f].tileID);
            for (let f of d)
              f.posMatrix = this.transform.calculatePosMatrix(f.toUnwrapped());
            return d;
          }
          hasTransition() {
            if (this._source.hasTransition()) return !0;
            if (Fe(this._source.type)) {
              let a = b.now();
              for (let d in this._tiles)
                if (this._tiles[d].fadeEndTime >= a) return !0;
            }
            return !1;
          }
          setFeatureState(a, d, f) {
            this._state.updateState((a = a || "_geojsonTileLayer"), d, f);
          }
          removeFeatureState(a, d, f) {
            this._state.removeFeatureState(
              (a = a || "_geojsonTileLayer"),
              d,
              f
            );
          }
          getFeatureState(a, d) {
            return this._state.getState((a = a || "_geojsonTileLayer"), d);
          }
          setDependencies(a, d, f) {
            let g = this._tiles[a];
            g && g.setDependencies(d, f);
          }
          reloadTilesForDependencies(a, d) {
            for (let f in this._tiles)
              this._tiles[f].hasDependency(a, d) &&
                this._reloadTile(f, "reloading");
            this._cache.filter((f) => !f.hasDependency(a, d));
          }
        }
        function Tt(v, a) {
          let d = Math.abs(2 * v.wrap) - +(v.wrap < 0),
            f = Math.abs(2 * a.wrap) - +(a.wrap < 0);
          return (
            v.overscaledZ - a.overscaledZ ||
            f - d ||
            a.canonical.y - v.canonical.y ||
            a.canonical.x - v.canonical.x
          );
        }
        function Fe(v) {
          return v === "raster" || v === "image" || v === "video";
        }
        (ft.maxOverzooming = 10), (ft.maxUnderzooming = 3);
        class At {
          constructor(a, d) {
            this.reset(a, d);
          }
          reset(a, d) {
            (this.points = a || []), (this._distances = [0]);
            for (let f = 1; f < this.points.length; f++)
              this._distances[f] =
                this._distances[f - 1] +
                this.points[f].dist(this.points[f - 1]);
            (this.length = this._distances[this._distances.length - 1]),
              (this.padding = Math.min(d || 0, 0.5 * this.length)),
              (this.paddedLength = this.length - 2 * this.padding);
          }
          lerp(a) {
            if (this.points.length === 1) return this.points[0];
            a = n.ac(a, 0, 1);
            let d = 1,
              f = this._distances[d],
              g = a * this.paddedLength + this.padding;
            for (; f < g && d < this._distances.length; )
              f = this._distances[++d];
            let x = d - 1,
              E = this._distances[x],
              M = f - E,
              I = M > 0 ? (g - E) / M : 0;
            return this.points[x].mult(1 - I).add(this.points[d].mult(I));
          }
        }
        function $t(v, a) {
          let d = !0;
          return (
            v === "always" || (v !== "never" && a !== "never") || (d = !1), d
          );
        }
        class Pt {
          constructor(a, d, f) {
            let g = (this.boxCells = []),
              x = (this.circleCells = []);
            (this.xCellCount = Math.ceil(a / f)),
              (this.yCellCount = Math.ceil(d / f));
            for (let E = 0; E < this.xCellCount * this.yCellCount; E++)
              g.push([]), x.push([]);
            (this.circleKeys = []),
              (this.boxKeys = []),
              (this.bboxes = []),
              (this.circles = []),
              (this.width = a),
              (this.height = d),
              (this.xScale = this.xCellCount / a),
              (this.yScale = this.yCellCount / d),
              (this.boxUid = 0),
              (this.circleUid = 0);
          }
          keysLength() {
            return this.boxKeys.length + this.circleKeys.length;
          }
          insert(a, d, f, g, x) {
            this._forEachCell(d, f, g, x, this._insertBoxCell, this.boxUid++),
              this.boxKeys.push(a),
              this.bboxes.push(d),
              this.bboxes.push(f),
              this.bboxes.push(g),
              this.bboxes.push(x);
          }
          insertCircle(a, d, f, g) {
            this._forEachCell(
              d - g,
              f - g,
              d + g,
              f + g,
              this._insertCircleCell,
              this.circleUid++
            ),
              this.circleKeys.push(a),
              this.circles.push(d),
              this.circles.push(f),
              this.circles.push(g);
          }
          _insertBoxCell(a, d, f, g, x, E) {
            this.boxCells[x].push(E);
          }
          _insertCircleCell(a, d, f, g, x, E) {
            this.circleCells[x].push(E);
          }
          _query(a, d, f, g, x, E, M) {
            if (f < 0 || a > this.width || g < 0 || d > this.height) return [];
            let I = [];
            if (a <= 0 && d <= 0 && this.width <= f && this.height <= g) {
              if (x) return [{ key: null, x1: a, y1: d, x2: f, y2: g }];
              for (let z = 0; z < this.boxKeys.length; z++)
                I.push({
                  key: this.boxKeys[z],
                  x1: this.bboxes[4 * z],
                  y1: this.bboxes[4 * z + 1],
                  x2: this.bboxes[4 * z + 2],
                  y2: this.bboxes[4 * z + 3],
                });
              for (let z = 0; z < this.circleKeys.length; z++) {
                let B = this.circles[3 * z],
                  U = this.circles[3 * z + 1],
                  Z = this.circles[3 * z + 2];
                I.push({
                  key: this.circleKeys[z],
                  x1: B - Z,
                  y1: U - Z,
                  x2: B + Z,
                  y2: U + Z,
                });
              }
            } else this._forEachCell(a, d, f, g, this._queryCell, I, { hitTest: x, overlapMode: E, seenUids: { box: {}, circle: {} } }, M);
            return I;
          }
          query(a, d, f, g) {
            return this._query(a, d, f, g, !1, null);
          }
          hitTest(a, d, f, g, x, E) {
            return this._query(a, d, f, g, !0, x, E).length > 0;
          }
          hitTestCircle(a, d, f, g, x) {
            let E = a - f,
              M = a + f,
              I = d - f,
              z = d + f;
            if (M < 0 || E > this.width || z < 0 || I > this.height) return !1;
            let B = [];
            return (
              this._forEachCell(
                E,
                I,
                M,
                z,
                this._queryCellCircle,
                B,
                {
                  hitTest: !0,
                  overlapMode: g,
                  circle: { x: a, y: d, radius: f },
                  seenUids: { box: {}, circle: {} },
                },
                x
              ),
              B.length > 0
            );
          }
          _queryCell(a, d, f, g, x, E, M, I) {
            let { seenUids: z, hitTest: B, overlapMode: U } = M,
              Z = this.boxCells[x];
            if (Z !== null) {
              let oe = this.bboxes;
              for (let le of Z)
                if (!z.box[le]) {
                  z.box[le] = !0;
                  let ee = 4 * le,
                    _e = this.boxKeys[le];
                  if (
                    a <= oe[ee + 2] &&
                    d <= oe[ee + 3] &&
                    f >= oe[ee + 0] &&
                    g >= oe[ee + 1] &&
                    (!I || I(_e)) &&
                    (!B || !$t(U, _e.overlapMode)) &&
                    (E.push({
                      key: _e,
                      x1: oe[ee],
                      y1: oe[ee + 1],
                      x2: oe[ee + 2],
                      y2: oe[ee + 3],
                    }),
                    B)
                  )
                    return !0;
                }
            }
            let se = this.circleCells[x];
            if (se !== null) {
              let oe = this.circles;
              for (let le of se)
                if (!z.circle[le]) {
                  z.circle[le] = !0;
                  let ee = 3 * le,
                    _e = this.circleKeys[le];
                  if (
                    this._circleAndRectCollide(
                      oe[ee],
                      oe[ee + 1],
                      oe[ee + 2],
                      a,
                      d,
                      f,
                      g
                    ) &&
                    (!I || I(_e)) &&
                    (!B || !$t(U, _e.overlapMode))
                  ) {
                    let Be = oe[ee],
                      he = oe[ee + 1],
                      Ee = oe[ee + 2];
                    if (
                      (E.push({
                        key: _e,
                        x1: Be - Ee,
                        y1: he - Ee,
                        x2: Be + Ee,
                        y2: he + Ee,
                      }),
                      B)
                    )
                      return !0;
                  }
                }
            }
            return !1;
          }
          _queryCellCircle(a, d, f, g, x, E, M, I) {
            let { circle: z, seenUids: B, overlapMode: U } = M,
              Z = this.boxCells[x];
            if (Z !== null) {
              let oe = this.bboxes;
              for (let le of Z)
                if (!B.box[le]) {
                  B.box[le] = !0;
                  let ee = 4 * le,
                    _e = this.boxKeys[le];
                  if (
                    this._circleAndRectCollide(
                      z.x,
                      z.y,
                      z.radius,
                      oe[ee + 0],
                      oe[ee + 1],
                      oe[ee + 2],
                      oe[ee + 3]
                    ) &&
                    (!I || I(_e)) &&
                    !$t(U, _e.overlapMode)
                  )
                    return E.push(!0), !0;
                }
            }
            let se = this.circleCells[x];
            if (se !== null) {
              let oe = this.circles;
              for (let le of se)
                if (!B.circle[le]) {
                  B.circle[le] = !0;
                  let ee = 3 * le,
                    _e = this.circleKeys[le];
                  if (
                    this._circlesCollide(
                      oe[ee],
                      oe[ee + 1],
                      oe[ee + 2],
                      z.x,
                      z.y,
                      z.radius
                    ) &&
                    (!I || I(_e)) &&
                    !$t(U, _e.overlapMode)
                  )
                    return E.push(!0), !0;
                }
            }
          }
          _forEachCell(a, d, f, g, x, E, M, I) {
            let z = this._convertToXCellCoord(a),
              B = this._convertToYCellCoord(d),
              U = this._convertToXCellCoord(f),
              Z = this._convertToYCellCoord(g);
            for (let se = z; se <= U; se++)
              for (let oe = B; oe <= Z; oe++)
                if (
                  x.call(this, a, d, f, g, this.xCellCount * oe + se, E, M, I)
                )
                  return;
          }
          _convertToXCellCoord(a) {
            return Math.max(
              0,
              Math.min(this.xCellCount - 1, Math.floor(a * this.xScale))
            );
          }
          _convertToYCellCoord(a) {
            return Math.max(
              0,
              Math.min(this.yCellCount - 1, Math.floor(a * this.yScale))
            );
          }
          _circlesCollide(a, d, f, g, x, E) {
            let M = g - a,
              I = x - d,
              z = f + E;
            return z * z > M * M + I * I;
          }
          _circleAndRectCollide(a, d, f, g, x, E, M) {
            let I = (E - g) / 2,
              z = Math.abs(a - (g + I));
            if (z > I + f) return !1;
            let B = (M - x) / 2,
              U = Math.abs(d - (x + B));
            if (U > B + f) return !1;
            if (z <= I || U <= B) return !0;
            let Z = z - I,
              se = U - B;
            return Z * Z + se * se <= f * f;
          }
        }
        function yi(v, a, d, f, g) {
          let x = n.F();
          return (
            a
              ? (n.J(x, x, [1 / g, 1 / g, 1]), d || n.ad(x, x, f.angle))
              : n.K(x, f.labelPlaneMatrix, v),
            x
          );
        }
        function Fi(v, a, d, f, g) {
          if (a) {
            let x = n.ae(v);
            return n.J(x, x, [g, g, 1]), d || n.ad(x, x, -f.angle), x;
          }
          return f.glCoordMatrix;
        }
        function re(v, a, d) {
          let f;
          d
            ? ((f = [v.x, v.y, d(v.x, v.y), 1]), n.af(f, f, a))
            : ((f = [v.x, v.y, 0, 1]), oi(f, f, a));
          let g = f[3];
          return {
            point: new n.P(f[0] / g, f[1] / g),
            signedDistanceFromCamera: g,
          };
        }
        function V(v, a) {
          return 0.5 + (v / a) * 0.5;
        }
        function H(v, a) {
          let d = v[0] / v[3],
            f = v[1] / v[3];
          return d >= -a[0] && d <= a[0] && f >= -a[1] && f <= a[1];
        }
        function $(v, a, d, f, g, x, E, M, I, z) {
          let B = f ? v.textSizeData : v.iconSizeData,
            U = n.ag(B, d.transform.zoom),
            Z = [(256 / d.width) * 2 + 1, (256 / d.height) * 2 + 1],
            se = f
              ? v.text.dynamicLayoutVertexArray
              : v.icon.dynamicLayoutVertexArray;
          se.clear();
          let oe = v.lineVertexArray,
            le = f ? v.text.placedSymbolArray : v.icon.placedSymbolArray,
            ee = d.transform.width / d.transform.height,
            _e = !1;
          for (let Be = 0; Be < le.length; Be++) {
            let he = le.get(Be);
            if (he.hidden || (he.writingMode === n.ah.vertical && !_e)) {
              jt(he.numGlyphs, se);
              continue;
            }
            let Ee;
            if (
              ((_e = !1),
              z
                ? ((Ee = [
                    he.anchorX,
                    he.anchorY,
                    z(he.anchorX, he.anchorY),
                    1,
                  ]),
                  n.af(Ee, Ee, a))
                : ((Ee = [he.anchorX, he.anchorY, 0, 1]), oi(Ee, Ee, a)),
              !H(Ee, Z))
            ) {
              jt(he.numGlyphs, se);
              continue;
            }
            let Ue = V(d.transform.cameraToCenterDistance, Ee[3]),
              Ve = n.ai(B, U, he),
              Ge = E ? Ve / Ue : Ve * Ue,
              ot = new n.P(he.anchorX, he.anchorY),
              rt = re(ot, g, z).point,
              nt = { projections: {}, offsets: {} },
              Ft = xe(
                he,
                Ge,
                !1,
                M,
                a,
                g,
                x,
                v.glyphOffsetArray,
                oe,
                se,
                rt,
                ot,
                nt,
                ee,
                I,
                z
              );
            (_e = Ft.useVertical),
              (Ft.notEnoughRoom ||
                _e ||
                (Ft.needsFlipping &&
                  xe(
                    he,
                    Ge,
                    !0,
                    M,
                    a,
                    g,
                    x,
                    v.glyphOffsetArray,
                    oe,
                    se,
                    rt,
                    ot,
                    nt,
                    ee,
                    I,
                    z
                  ).notEnoughRoom)) &&
                jt(he.numGlyphs, se);
          }
          f
            ? v.text.dynamicLayoutVertexBuffer.updateData(se)
            : v.icon.dynamicLayoutVertexBuffer.updateData(se);
        }
        function ne(v, a, d, f, g, x, E, M, I, z, B, U, Z) {
          let se = M.glyphStartIndex + M.numGlyphs,
            oe = M.lineStartIndex,
            le = M.lineStartIndex + M.lineLength,
            ee = a.getoffsetX(M.glyphStartIndex),
            _e = a.getoffsetX(se - 1),
            Be = Qe(v * ee, d, f, g, x, E, M.segment, oe, le, I, z, B, U, Z);
          if (!Be) return null;
          let he = Qe(v * _e, d, f, g, x, E, M.segment, oe, le, I, z, B, U, Z);
          return he ? { first: Be, last: he } : null;
        }
        function ve(v, a, d, f) {
          return v === n.ah.horizontal &&
            Math.abs(d.y - a.y) > Math.abs(d.x - a.x) * f
            ? { useVertical: !0 }
            : (v === n.ah.vertical ? a.y < d.y : a.x > d.x)
            ? { needsFlipping: !0 }
            : null;
        }
        function xe(v, a, d, f, g, x, E, M, I, z, B, U, Z, se, oe, le) {
          let ee = a / 24,
            _e = v.lineOffsetX * ee,
            Be = v.lineOffsetY * ee,
            he;
          if (v.numGlyphs > 1) {
            let Ee = v.glyphStartIndex + v.numGlyphs,
              Ue = v.lineStartIndex,
              Ve = v.lineStartIndex + v.lineLength,
              Ge = ne(ee, M, _e, Be, d, B, U, v, I, x, Z, oe, le);
            if (!Ge) return { notEnoughRoom: !0 };
            let ot = re(Ge.first.point, E, le).point,
              rt = re(Ge.last.point, E, le).point;
            if (f && !d) {
              let nt = ve(v.writingMode, ot, rt, se);
              if (nt) return nt;
            }
            he = [Ge.first];
            for (let nt = v.glyphStartIndex + 1; nt < Ee - 1; nt++)
              he.push(
                Qe(
                  ee * M.getoffsetX(nt),
                  _e,
                  Be,
                  d,
                  B,
                  U,
                  v.segment,
                  Ue,
                  Ve,
                  I,
                  x,
                  Z,
                  oe,
                  le
                )
              );
            he.push(Ge.last);
          } else {
            if (f && !d) {
              let Ue = re(U, g, le).point,
                Ve = v.lineStartIndex + v.segment + 1,
                Ge = new n.P(I.getx(Ve), I.gety(Ve)),
                ot = re(Ge, g, le),
                rt =
                  ot.signedDistanceFromCamera > 0
                    ? ot.point
                    : ke(U, Ge, Ue, 1, g, le),
                nt = ve(v.writingMode, Ue, rt, se);
              if (nt) return nt;
            }
            let Ee = Qe(
              ee * M.getoffsetX(v.glyphStartIndex),
              _e,
              Be,
              d,
              B,
              U,
              v.segment,
              v.lineStartIndex,
              v.lineStartIndex + v.lineLength,
              I,
              x,
              Z,
              oe,
              le
            );
            if (!Ee) return { notEnoughRoom: !0 };
            he = [Ee];
          }
          for (let Ee of he) n.aj(z, Ee.point, Ee.angle);
          return {};
        }
        function ke(v, a, d, f, g, x) {
          let E = re(v.add(v.sub(a)._unit()), g, x).point,
            M = d.sub(E);
          return d.add(M._mult(f / M.mag()));
        }
        function me(v, a) {
          let {
            projectionCache: d,
            lineVertexArray: f,
            labelPlaneMatrix: g,
            tileAnchorPoint: x,
            distanceFromAnchor: E,
            getElevation: M,
            previousVertex: I,
            direction: z,
            absOffsetX: B,
          } = a;
          if (d.projections[v]) return d.projections[v];
          let U = new n.P(f.getx(v), f.gety(v)),
            Z = re(U, g, M);
          if (Z.signedDistanceFromCamera > 0)
            return (d.projections[v] = Z.point), Z.point;
          let se = v - z;
          return ke(
            E === 0 ? x : new n.P(f.getx(se), f.gety(se)),
            U,
            I,
            B - E + 1,
            g,
            M
          );
        }
        function we(v, a, d) {
          return v
            ._unit()
            ._perp()
            ._mult(a * d);
        }
        function Ze(v, a, d, f, g, x, E, M) {
          let { projectionCache: I, direction: z } = M;
          if (I.offsets[v]) return I.offsets[v];
          let B = d.add(a);
          if (v + z < f || v + z >= g) return (I.offsets[v] = B), B;
          let U = me(v + z, M),
            Z = we(U.sub(d), E, z),
            se = d.add(Z),
            oe = U.add(Z);
          return (I.offsets[v] = n.ak(x, B, se, oe) || B), I.offsets[v];
        }
        function Qe(v, a, d, f, g, x, E, M, I, z, B, U, Z, se) {
          let oe = f ? v - a : v + a,
            le = oe > 0 ? 1 : -1,
            ee = 0;
          f && ((le *= -1), (ee = Math.PI)), le < 0 && (ee += Math.PI);
          let _e,
            Be,
            he = le > 0 ? M + E : M + E + 1,
            Ee = g,
            Ue = g,
            Ve = 0,
            Ge = 0,
            ot = Math.abs(oe),
            rt = [],
            nt;
          for (; Ve + Ge <= ot; ) {
            if (((he += le), he < M || he >= I)) return null;
            (Ve += Ge), (Ue = Ee), (Be = _e);
            let kt = {
              projectionCache: U,
              lineVertexArray: z,
              labelPlaneMatrix: B,
              tileAnchorPoint: x,
              distanceFromAnchor: Ve,
              getElevation: se,
              previousVertex: Ue,
              direction: le,
              absOffsetX: ot,
            };
            if (((Ee = me(he, kt)), d === 0)) rt.push(Ue), (nt = Ee.sub(Ue));
            else {
              let li,
                Ci = Ee.sub(Ue);
              (li =
                Ci.mag() === 0
                  ? we(me(he + le, kt).sub(Ee), d, le)
                  : we(Ci, d, le)),
                Be || (Be = Ue.add(li)),
                (_e = Ze(he, li, Ee, M, I, Be, d, kt)),
                rt.push(Be),
                (nt = _e.sub(Be));
            }
            Ge = nt.mag();
          }
          let Ft = nt._mult((ot - Ve) / Ge)._add(Be || Ue),
            ki = ee + Math.atan2(Ee.y - Ue.y, Ee.x - Ue.x);
          return rt.push(Ft), { point: Ft, angle: Z ? ki : 0, path: rt };
        }
        let Xe = new Float32Array([
          -1 / 0,
          -1 / 0,
          0,
          -1 / 0,
          -1 / 0,
          0,
          -1 / 0,
          -1 / 0,
          0,
          -1 / 0,
          -1 / 0,
          0,
        ]);
        function jt(v, a) {
          for (let d = 0; d < v; d++) {
            let f = a.length;
            a.resize(f + 4), a.float32.set(Xe, 3 * f);
          }
        }
        function oi(v, a, d) {
          let f = a[0],
            g = a[1];
          return (
            (v[0] = d[0] * f + d[4] * g + d[12]),
            (v[1] = d[1] * f + d[5] * g + d[13]),
            (v[3] = d[3] * f + d[7] * g + d[15]),
            v
          );
        }
        let ti = 100;
        class zi {
          constructor(
            a,
            d = new Pt(a.width + 200, a.height + 200, 25),
            f = new Pt(a.width + 200, a.height + 200, 25)
          ) {
            (this.transform = a),
              (this.grid = d),
              (this.ignoredGrid = f),
              (this.pitchfactor =
                Math.cos(a._pitch) * a.cameraToCenterDistance),
              (this.screenRightBoundary = a.width + ti),
              (this.screenBottomBoundary = a.height + ti),
              (this.gridRightBoundary = a.width + 200),
              (this.gridBottomBoundary = a.height + 200),
              (this.perspectiveRatioCutoff = 0.6);
          }
          placeCollisionBox(a, d, f, g, x, E) {
            let M = this.projectAndGetPerspectiveRatio(
                g,
                a.anchorPointX,
                a.anchorPointY,
                E
              ),
              I = f * M.perspectiveRatio,
              z = a.x1 * I + M.point.x,
              B = a.y1 * I + M.point.y,
              U = a.x2 * I + M.point.x,
              Z = a.y2 * I + M.point.y;
            return !this.isInsideGrid(z, B, U, Z) ||
              (d !== "always" && this.grid.hitTest(z, B, U, Z, d, x)) ||
              M.perspectiveRatio < this.perspectiveRatioCutoff
              ? { box: [], offscreen: !1 }
              : { box: [z, B, U, Z], offscreen: this.isOffscreen(z, B, U, Z) };
          }
          placeCollisionCircles(a, d, f, g, x, E, M, I, z, B, U, Z, se, oe) {
            let le = [],
              ee = new n.P(d.anchorX, d.anchorY),
              _e = re(ee, E, oe),
              Be = V(
                this.transform.cameraToCenterDistance,
                _e.signedDistanceFromCamera
              ),
              he = (B ? x / Be : x * Be) / n.ao,
              Ee = re(ee, M, oe).point,
              Ue = ne(
                he,
                g,
                d.lineOffsetX * he,
                d.lineOffsetY * he,
                !1,
                Ee,
                ee,
                d,
                f,
                M,
                { projections: {}, offsets: {} },
                !1,
                oe
              ),
              Ve = !1,
              Ge = !1,
              ot = !0;
            if (Ue) {
              let rt = 0.5 * Z * Be + se,
                nt = new n.P(-100, -100),
                Ft = new n.P(
                  this.screenRightBoundary,
                  this.screenBottomBoundary
                ),
                ki = new At(),
                kt = Ue.first,
                li = Ue.last,
                Ci = [];
              for (let Ei = kt.path.length - 1; Ei >= 1; Ei--)
                Ci.push(kt.path[Ei]);
              for (let Ei = 1; Ei < li.path.length; Ei++) Ci.push(li.path[Ei]);
              let ji = 2.5 * rt;
              if (I) {
                let Ei = Ci.map((Ti) => re(Ti, I, oe));
                Ci = Ei.some((Ti) => Ti.signedDistanceFromCamera <= 0)
                  ? []
                  : Ei.map((Ti) => Ti.point);
              }
              let pi = [];
              if (Ci.length > 0) {
                let Ei = Ci[0].clone(),
                  Ti = Ci[0].clone();
                for (let Br = 1; Br < Ci.length; Br++)
                  (Ei.x = Math.min(Ei.x, Ci[Br].x)),
                    (Ei.y = Math.min(Ei.y, Ci[Br].y)),
                    (Ti.x = Math.max(Ti.x, Ci[Br].x)),
                    (Ti.y = Math.max(Ti.y, Ci[Br].y));
                pi =
                  Ei.x >= nt.x && Ti.x <= Ft.x && Ei.y >= nt.y && Ti.y <= Ft.y
                    ? [Ci]
                    : Ti.x < nt.x || Ei.x > Ft.x || Ti.y < nt.y || Ei.y > Ft.y
                    ? []
                    : n.al([Ci], nt.x, nt.y, Ft.x, Ft.y);
              }
              for (let Ei of pi) {
                ki.reset(Ei, 0.25 * rt);
                let Ti = 0;
                Ti =
                  ki.length <= 0.5 * rt
                    ? 1
                    : Math.ceil(ki.paddedLength / ji) + 1;
                for (let Br = 0; Br < Ti; Br++) {
                  let wr = Br / Math.max(Ti - 1, 1),
                    Ao = ki.lerp(wr),
                    hn = Ao.x + ti,
                    Cr = Ao.y + ti;
                  le.push(hn, Cr, rt, 0);
                  let Yn = hn - rt,
                    gs = Cr - rt,
                    Is = hn + rt,
                    Ra = Cr + rt;
                  if (
                    ((ot = ot && this.isOffscreen(Yn, gs, Is, Ra)),
                    (Ge = Ge || this.isInsideGrid(Yn, gs, Is, Ra)),
                    a !== "always" &&
                      this.grid.hitTestCircle(hn, Cr, rt, a, U) &&
                      ((Ve = !0), !z))
                  )
                    return {
                      circles: [],
                      offscreen: !1,
                      collisionDetected: Ve,
                    };
                }
              }
            }
            return {
              circles:
                (!z && Ve) || !Ge || Be < this.perspectiveRatioCutoff ? [] : le,
              offscreen: ot,
              collisionDetected: Ve,
            };
          }
          queryRenderedSymbols(a) {
            if (
              a.length === 0 ||
              (this.grid.keysLength() === 0 &&
                this.ignoredGrid.keysLength() === 0)
            )
              return {};
            let d = [],
              f = 1 / 0,
              g = 1 / 0,
              x = -1 / 0,
              E = -1 / 0;
            for (let B of a) {
              let U = new n.P(B.x + ti, B.y + ti);
              (f = Math.min(f, U.x)),
                (g = Math.min(g, U.y)),
                (x = Math.max(x, U.x)),
                (E = Math.max(E, U.y)),
                d.push(U);
            }
            let M = this.grid
                .query(f, g, x, E)
                .concat(this.ignoredGrid.query(f, g, x, E)),
              I = {},
              z = {};
            for (let B of M) {
              let U = B.key;
              if (
                (I[U.bucketInstanceId] === void 0 &&
                  (I[U.bucketInstanceId] = {}),
                I[U.bucketInstanceId][U.featureIndex])
              )
                continue;
              let Z = [
                new n.P(B.x1, B.y1),
                new n.P(B.x2, B.y1),
                new n.P(B.x2, B.y2),
                new n.P(B.x1, B.y2),
              ];
              n.am(d, Z) &&
                ((I[U.bucketInstanceId][U.featureIndex] = !0),
                z[U.bucketInstanceId] === void 0 &&
                  (z[U.bucketInstanceId] = []),
                z[U.bucketInstanceId].push(U.featureIndex));
            }
            return z;
          }
          insertCollisionBox(a, d, f, g, x, E) {
            (f ? this.ignoredGrid : this.grid).insert(
              {
                bucketInstanceId: g,
                featureIndex: x,
                collisionGroupID: E,
                overlapMode: d,
              },
              a[0],
              a[1],
              a[2],
              a[3]
            );
          }
          insertCollisionCircles(a, d, f, g, x, E) {
            let M = f ? this.ignoredGrid : this.grid,
              I = {
                bucketInstanceId: g,
                featureIndex: x,
                collisionGroupID: E,
                overlapMode: d,
              };
            for (let z = 0; z < a.length; z += 4)
              M.insertCircle(I, a[z], a[z + 1], a[z + 2]);
          }
          projectAndGetPerspectiveRatio(a, d, f, g) {
            let x;
            return (
              g
                ? ((x = [d, f, g(d, f), 1]), n.af(x, x, a))
                : ((x = [d, f, 0, 1]), oi(x, x, a)),
              {
                point: new n.P(
                  ((x[0] / x[3] + 1) / 2) * this.transform.width + ti,
                  ((-x[1] / x[3] + 1) / 2) * this.transform.height + ti
                ),
                perspectiveRatio:
                  0.5 + (this.transform.cameraToCenterDistance / x[3]) * 0.5,
              }
            );
          }
          isOffscreen(a, d, f, g) {
            return (
              f < ti ||
              a >= this.screenRightBoundary ||
              g < ti ||
              d > this.screenBottomBoundary
            );
          }
          isInsideGrid(a, d, f, g) {
            return (
              f >= 0 &&
              a < this.gridRightBoundary &&
              g >= 0 &&
              d < this.gridBottomBoundary
            );
          }
          getViewportMatrix() {
            let a = n.an([]);
            return n.H(a, a, [-100, -100, 0]), a;
          }
        }
        function di(v, a, d) {
          return (
            a * (n.W / (v.tileSize * Math.pow(2, d - v.tileID.overscaledZ)))
          );
        }
        class lr {
          constructor(a, d, f, g) {
            (this.opacity = a
              ? Math.max(0, Math.min(1, a.opacity + (a.placed ? d : -d)))
              : g && f
              ? 1
              : 0),
              (this.placed = f);
          }
          isHidden() {
            return this.opacity === 0 && !this.placed;
          }
        }
        class Ni {
          constructor(a, d, f, g, x) {
            (this.text = new lr(a ? a.text : null, d, f, x)),
              (this.icon = new lr(a ? a.icon : null, d, g, x));
          }
          isHidden() {
            return this.text.isHidden() && this.icon.isHidden();
          }
        }
        class Wi {
          constructor(a, d, f) {
            (this.text = a), (this.icon = d), (this.skipFade = f);
          }
        }
        class ci {
          constructor() {
            (this.invProjMatrix = n.F()),
              (this.viewportMatrix = n.F()),
              (this.circles = []);
          }
        }
        class br {
          constructor(a, d, f, g, x) {
            (this.bucketInstanceId = a),
              (this.featureIndex = d),
              (this.sourceLayerIndex = f),
              (this.bucketIndex = g),
              (this.tileID = x);
          }
        }
        class Or {
          constructor(a) {
            (this.crossSourceCollisions = a),
              (this.maxGroupID = 0),
              (this.collisionGroups = {});
          }
          get(a) {
            if (this.crossSourceCollisions) return { ID: 0, predicate: null };
            if (!this.collisionGroups[a]) {
              let d = ++this.maxGroupID;
              this.collisionGroups[a] = {
                ID: d,
                predicate: (f) => f.collisionGroupID === d,
              };
            }
            return this.collisionGroups[a];
          }
        }
        function In(v, a, d, f, g) {
          let { horizontalAlign: x, verticalAlign: E } = n.at(v);
          return new n.P(-(x - 0.5) * a + f[0] * g, -(E - 0.5) * d + f[1] * g);
        }
        function rn(v, a, d, f, g, x) {
          let {
              x1: E,
              x2: M,
              y1: I,
              y2: z,
              anchorPointX: B,
              anchorPointY: U,
            } = v,
            Z = new n.P(a, d);
          return (
            f && Z._rotate(g ? x : -x),
            {
              x1: E + Z.x,
              y1: I + Z.y,
              x2: M + Z.x,
              y2: z + Z.y,
              anchorPointX: B,
              anchorPointY: U,
            }
          );
        }
        class un {
          constructor(a, d, f, g, x) {
            (this.transform = a.clone()),
              (this.terrain = d),
              (this.collisionIndex = new zi(this.transform)),
              (this.placements = {}),
              (this.opacities = {}),
              (this.variableOffsets = {}),
              (this.stale = !1),
              (this.commitTime = 0),
              (this.fadeDuration = f),
              (this.retainedQueryData = {}),
              (this.collisionGroups = new Or(g)),
              (this.collisionCircleArrays = {}),
              (this.prevPlacement = x),
              x && (x.prevPlacement = void 0),
              (this.placedOrientations = {});
          }
          getBucketParts(a, d, f, g) {
            let x = f.getBucket(d),
              E = f.latestFeatureIndex;
            if (!x || !E || d.id !== x.layerIds[0]) return;
            let M = f.collisionBoxArray,
              I = x.layers[0].layout,
              z = Math.pow(2, this.transform.zoom - f.tileID.overscaledZ),
              B = f.tileSize / n.W,
              U = this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),
              Z = I.get("text-pitch-alignment") === "map",
              se = I.get("text-rotation-alignment") === "map",
              oe = di(f, 1, this.transform.zoom),
              le = yi(U, Z, se, this.transform, oe),
              ee = null;
            if (Z) {
              let Be = Fi(U, Z, se, this.transform, oe);
              ee = n.K([], this.transform.labelPlaneMatrix, Be);
            }
            this.retainedQueryData[x.bucketInstanceId] = new br(
              x.bucketInstanceId,
              E,
              x.sourceLayerIndex,
              x.index,
              f.tileID
            );
            let _e = {
              bucket: x,
              layout: I,
              posMatrix: U,
              textLabelPlaneMatrix: le,
              labelToScreenMatrix: ee,
              scale: z,
              textPixelRatio: B,
              holdingForFade: f.holdingForFade(),
              collisionBoxArray: M,
              partiallyEvaluatedTextSize: n.ag(
                x.textSizeData,
                this.transform.zoom
              ),
              collisionGroup: this.collisionGroups.get(x.sourceID),
            };
            if (g)
              for (let Be of x.sortKeyRanges) {
                let {
                  sortKey: he,
                  symbolInstanceStart: Ee,
                  symbolInstanceEnd: Ue,
                } = Be;
                a.push({
                  sortKey: he,
                  symbolInstanceStart: Ee,
                  symbolInstanceEnd: Ue,
                  parameters: _e,
                });
              }
            else
              a.push({
                symbolInstanceStart: 0,
                symbolInstanceEnd: x.symbolInstances.length,
                parameters: _e,
              });
          }
          attemptAnchorPlacement(
            a,
            d,
            f,
            g,
            x,
            E,
            M,
            I,
            z,
            B,
            U,
            Z,
            se,
            oe,
            le,
            ee
          ) {
            let _e = n.ap[a.textAnchor],
              Be = [a.textOffset0, a.textOffset1],
              he = In(_e, f, g, Be, x),
              Ee = this.collisionIndex.placeCollisionBox(
                rn(d, he.x, he.y, E, M, this.transform.angle),
                U,
                I,
                z,
                B.predicate,
                ee
              );
            if (
              (!le ||
                this.collisionIndex.placeCollisionBox(
                  rn(le, he.x, he.y, E, M, this.transform.angle),
                  U,
                  I,
                  z,
                  B.predicate,
                  ee
                ).box.length !== 0) &&
              Ee.box.length > 0
            ) {
              let Ue;
              if (
                (this.prevPlacement &&
                  this.prevPlacement.variableOffsets[Z.crossTileID] &&
                  this.prevPlacement.placements[Z.crossTileID] &&
                  this.prevPlacement.placements[Z.crossTileID].text &&
                  (Ue =
                    this.prevPlacement.variableOffsets[Z.crossTileID].anchor),
                Z.crossTileID === 0)
              )
                throw new Error("symbolInstance.crossTileID can't be 0");
              return (
                (this.variableOffsets[Z.crossTileID] = {
                  textOffset: Be,
                  width: f,
                  height: g,
                  anchor: _e,
                  textBoxScale: x,
                  prevAnchor: Ue,
                }),
                this.markUsedJustification(se, _e, Z, oe),
                se.allowVerticalPlacement &&
                  (this.markUsedOrientation(se, oe, Z),
                  (this.placedOrientations[Z.crossTileID] = oe)),
                { shift: he, placedGlyphBoxes: Ee }
              );
            }
          }
          placeLayerBucketPart(a, d, f) {
            let {
                bucket: g,
                layout: x,
                posMatrix: E,
                textLabelPlaneMatrix: M,
                labelToScreenMatrix: I,
                textPixelRatio: z,
                holdingForFade: B,
                collisionBoxArray: U,
                partiallyEvaluatedTextSize: Z,
                collisionGroup: se,
              } = a.parameters,
              oe = x.get("text-optional"),
              le = x.get("icon-optional"),
              ee = n.aq(x, "text-overlap", "text-allow-overlap"),
              _e = ee === "always",
              Be = n.aq(x, "icon-overlap", "icon-allow-overlap"),
              he = Be === "always",
              Ee = x.get("text-rotation-alignment") === "map",
              Ue = x.get("text-pitch-alignment") === "map",
              Ve = x.get("icon-text-fit") !== "none",
              Ge = x.get("symbol-z-order") === "viewport-y",
              ot = _e && (he || !g.hasIconData() || le),
              rt = he && (_e || !g.hasTextData() || oe);
            !g.collisionArrays && U && g.deserializeCollisionBoxes(U);
            let nt = this.retainedQueryData[g.bucketInstanceId].tileID,
              Ft = this.terrain
                ? (kt, li) => this.terrain.getElevation(nt, kt, li)
                : null,
              ki = (kt, li) => {
                var Ci, ji;
                if (d[kt.crossTileID]) return;
                if (B)
                  return void (this.placements[kt.crossTileID] = new Wi(
                    !1,
                    !1,
                    !1
                  ));
                let pi = !1,
                  Ei = !1,
                  Ti = !0,
                  Br = null,
                  wr = { box: null, offscreen: null },
                  Ao = { box: null, offscreen: null },
                  hn = null,
                  Cr = null,
                  Yn = null,
                  gs = 0,
                  Is = 0,
                  Ra = 0;
                li.textFeatureIndex
                  ? (gs = li.textFeatureIndex)
                  : kt.useRuntimeCollisionCircles && (gs = kt.featureIndex),
                  li.verticalTextFeatureIndex &&
                    (Is = li.verticalTextFeatureIndex);
                let Ua = li.textBox;
                if (Ua) {
                  let $r = (zr) => {
                      let Ln = n.ah.horizontal;
                      if (
                        g.allowVerticalPlacement &&
                        !zr &&
                        this.prevPlacement
                      ) {
                        let Qo =
                          this.prevPlacement.placedOrientations[kt.crossTileID];
                        Qo &&
                          ((this.placedOrientations[kt.crossTileID] = Qo),
                          (Ln = Qo),
                          this.markUsedOrientation(g, Ln, kt));
                      }
                      return Ln;
                    },
                    Ar = (zr, Ln) => {
                      if (
                        g.allowVerticalPlacement &&
                        kt.numVerticalGlyphVertices > 0 &&
                        li.verticalTextBox
                      ) {
                        for (let Qo of g.writingModes)
                          if (
                            (Qo === n.ah.vertical
                              ? ((wr = Ln()), (Ao = wr))
                              : (wr = zr()),
                            wr && wr.box && wr.box.length)
                          )
                            break;
                      } else wr = zr();
                    },
                    Xr = kt.textAnchorOffsetStartIndex,
                    Ul = kt.textAnchorOffsetEndIndex;
                  if (Ul === Xr) {
                    let zr = (Ln, Qo) => {
                      let Ui = this.collisionIndex.placeCollisionBox(
                        Ln,
                        ee,
                        z,
                        E,
                        se.predicate,
                        Ft
                      );
                      return (
                        Ui &&
                          Ui.box &&
                          Ui.box.length &&
                          (this.markUsedOrientation(g, Qo, kt),
                          (this.placedOrientations[kt.crossTileID] = Qo)),
                        Ui
                      );
                    };
                    Ar(
                      () => zr(Ua, n.ah.horizontal),
                      () => {
                        let Ln = li.verticalTextBox;
                        return g.allowVerticalPlacement &&
                          kt.numVerticalGlyphVertices > 0 &&
                          Ln
                          ? zr(Ln, n.ah.vertical)
                          : { box: null, offscreen: null };
                      }
                    ),
                      $r(wr && wr.box && wr.box.length);
                  } else {
                    let zr =
                        n.ap[
                          (ji =
                            (Ci = this.prevPlacement) === null || Ci === void 0
                              ? void 0
                              : Ci.variableOffsets[kt.crossTileID]) === null ||
                          ji === void 0
                            ? void 0
                            : ji.anchor
                        ],
                      Ln = (Ui, vh, Rf) => {
                        let Va = Ui.x2 - Ui.x1,
                          ja = Ui.y2 - Ui.y1,
                          zu = kt.textBoxScale,
                          _h = Ve && Be === "never" ? vh : null,
                          Ha = { box: [], offscreen: !1 },
                          Uf = ee === "never" ? 1 : 2,
                          xh = "never";
                        zr && Uf++;
                        for (let Vf = 0; Vf < Uf; Vf++) {
                          for (let kc = Xr; kc < Ul; kc++) {
                            let jf = g.textAnchorOffsets.get(kc);
                            if (zr && jf.textAnchor !== zr) continue;
                            let Sc = this.attemptAnchorPlacement(
                              jf,
                              Ui,
                              Va,
                              ja,
                              zu,
                              Ee,
                              Ue,
                              z,
                              E,
                              se,
                              xh,
                              kt,
                              g,
                              Rf,
                              _h,
                              Ft
                            );
                            if (
                              Sc &&
                              ((Ha = Sc.placedGlyphBoxes),
                              Ha && Ha.box && Ha.box.length)
                            )
                              return (pi = !0), (Br = Sc.shift), Ha;
                          }
                          zr ? (zr = null) : (xh = ee);
                        }
                        return Ha;
                      };
                    Ar(
                      () => Ln(Ua, li.iconBox, n.ah.horizontal),
                      () => {
                        let Ui = li.verticalTextBox;
                        return g.allowVerticalPlacement &&
                          !(wr && wr.box && wr.box.length) &&
                          kt.numVerticalGlyphVertices > 0 &&
                          Ui
                          ? Ln(Ui, li.verticalIconBox, n.ah.vertical)
                          : { box: null, offscreen: null };
                      }
                    ),
                      wr && ((pi = wr.box), (Ti = wr.offscreen));
                    let Qo = $r(wr && wr.box);
                    if (!pi && this.prevPlacement) {
                      let Ui =
                        this.prevPlacement.variableOffsets[kt.crossTileID];
                      Ui &&
                        ((this.variableOffsets[kt.crossTileID] = Ui),
                        this.markUsedJustification(g, Ui.anchor, kt, Qo));
                    }
                  }
                }
                if (
                  ((hn = wr),
                  (pi = hn && hn.box && hn.box.length > 0),
                  (Ti = hn && hn.offscreen),
                  kt.useRuntimeCollisionCircles)
                ) {
                  let $r = g.text.placedSymbolArray.get(
                      kt.centerJustifiedTextSymbolIndex
                    ),
                    Ar = n.ai(g.textSizeData, Z, $r),
                    Xr = x.get("text-padding");
                  (Cr = this.collisionIndex.placeCollisionCircles(
                    ee,
                    $r,
                    g.lineVertexArray,
                    g.glyphOffsetArray,
                    Ar,
                    E,
                    M,
                    I,
                    f,
                    Ue,
                    se.predicate,
                    kt.collisionCircleDiameter,
                    Xr,
                    Ft
                  )),
                    Cr.circles.length &&
                      Cr.collisionDetected &&
                      !f &&
                      n.w(
                        "Collisions detected, but collision boxes are not shown"
                      ),
                    (pi =
                      _e || (Cr.circles.length > 0 && !Cr.collisionDetected)),
                    (Ti = Ti && Cr.offscreen);
                }
                if (
                  (li.iconFeatureIndex && (Ra = li.iconFeatureIndex),
                  li.iconBox)
                ) {
                  let $r = (Ar) => {
                    let Xr =
                      Ve && Br
                        ? rn(Ar, Br.x, Br.y, Ee, Ue, this.transform.angle)
                        : Ar;
                    return this.collisionIndex.placeCollisionBox(
                      Xr,
                      Be,
                      z,
                      E,
                      se.predicate,
                      Ft
                    );
                  };
                  Ao && Ao.box && Ao.box.length && li.verticalIconBox
                    ? ((Yn = $r(li.verticalIconBox)), (Ei = Yn.box.length > 0))
                    : ((Yn = $r(li.iconBox)), (Ei = Yn.box.length > 0)),
                    (Ti = Ti && Yn.offscreen);
                }
                let Ps =
                    oe ||
                    (kt.numHorizontalGlyphVertices === 0 &&
                      kt.numVerticalGlyphVertices === 0),
                  ys = le || kt.numIconVertices === 0;
                if (
                  (Ps || ys
                    ? ys
                      ? Ps || (Ei = Ei && pi)
                      : (pi = Ei && pi)
                    : (Ei = pi = Ei && pi),
                  pi &&
                    hn &&
                    hn.box &&
                    this.collisionIndex.insertCollisionBox(
                      hn.box,
                      ee,
                      x.get("text-ignore-placement"),
                      g.bucketInstanceId,
                      Ao && Ao.box && Is ? Is : gs,
                      se.ID
                    ),
                  Ei &&
                    Yn &&
                    this.collisionIndex.insertCollisionBox(
                      Yn.box,
                      Be,
                      x.get("icon-ignore-placement"),
                      g.bucketInstanceId,
                      Ra,
                      se.ID
                    ),
                  Cr &&
                    (pi &&
                      this.collisionIndex.insertCollisionCircles(
                        Cr.circles,
                        ee,
                        x.get("text-ignore-placement"),
                        g.bucketInstanceId,
                        gs,
                        se.ID
                      ),
                    f))
                ) {
                  let $r = g.bucketInstanceId,
                    Ar = this.collisionCircleArrays[$r];
                  Ar === void 0 &&
                    (Ar = this.collisionCircleArrays[$r] = new ci());
                  for (let Xr = 0; Xr < Cr.circles.length; Xr += 4)
                    Ar.circles.push(Cr.circles[Xr + 0]),
                      Ar.circles.push(Cr.circles[Xr + 1]),
                      Ar.circles.push(Cr.circles[Xr + 2]),
                      Ar.circles.push(Cr.collisionDetected ? 1 : 0);
                }
                if (kt.crossTileID === 0)
                  throw new Error("symbolInstance.crossTileID can't be 0");
                if (g.bucketInstanceId === 0)
                  throw new Error("bucket.bucketInstanceId can't be 0");
                (this.placements[kt.crossTileID] = new Wi(
                  pi || ot,
                  Ei || rt,
                  Ti || g.justReloaded
                )),
                  (d[kt.crossTileID] = !0);
              };
            if (Ge) {
              if (a.symbolInstanceStart !== 0)
                throw new Error("bucket.bucketInstanceId should be 0");
              let kt = g.getSortedSymbolIndexes(this.transform.angle);
              for (let li = kt.length - 1; li >= 0; --li) {
                let Ci = kt[li];
                ki(g.symbolInstances.get(Ci), g.collisionArrays[Ci]);
              }
            } else for (let kt = a.symbolInstanceStart; kt < a.symbolInstanceEnd; kt++) ki(g.symbolInstances.get(kt), g.collisionArrays[kt]);
            if (f && g.bucketInstanceId in this.collisionCircleArrays) {
              let kt = this.collisionCircleArrays[g.bucketInstanceId];
              n.ar(kt.invProjMatrix, E),
                (kt.viewportMatrix = this.collisionIndex.getViewportMatrix());
            }
            g.justReloaded = !1;
          }
          markUsedJustification(a, d, f, g) {
            let x;
            x =
              g === n.ah.vertical
                ? f.verticalPlacedTextSymbolIndex
                : {
                    left: f.leftJustifiedTextSymbolIndex,
                    center: f.centerJustifiedTextSymbolIndex,
                    right: f.rightJustifiedTextSymbolIndex,
                  }[n.as(d)];
            let E = [
              f.leftJustifiedTextSymbolIndex,
              f.centerJustifiedTextSymbolIndex,
              f.rightJustifiedTextSymbolIndex,
              f.verticalPlacedTextSymbolIndex,
            ];
            for (let M of E)
              M >= 0 &&
                (a.text.placedSymbolArray.get(M).crossTileID =
                  x >= 0 && M !== x ? 0 : f.crossTileID);
          }
          markUsedOrientation(a, d, f) {
            let g = d === n.ah.horizontal || d === n.ah.horizontalOnly ? d : 0,
              x = d === n.ah.vertical ? d : 0,
              E = [
                f.leftJustifiedTextSymbolIndex,
                f.centerJustifiedTextSymbolIndex,
                f.rightJustifiedTextSymbolIndex,
              ];
            for (let M of E)
              a.text.placedSymbolArray.get(M).placedOrientation = g;
            f.verticalPlacedTextSymbolIndex &&
              (a.text.placedSymbolArray.get(
                f.verticalPlacedTextSymbolIndex
              ).placedOrientation = x);
          }
          commit(a) {
            (this.commitTime = a),
              (this.zoomAtLastRecencyCheck = this.transform.zoom);
            let d = this.prevPlacement,
              f = !1;
            this.prevZoomAdjustment = d
              ? d.zoomAdjustment(this.transform.zoom)
              : 0;
            let g = d ? d.symbolFadeChange(a) : 1,
              x = d ? d.opacities : {},
              E = d ? d.variableOffsets : {},
              M = d ? d.placedOrientations : {};
            for (let I in this.placements) {
              let z = this.placements[I],
                B = x[I];
              B
                ? ((this.opacities[I] = new Ni(B, g, z.text, z.icon)),
                  (f =
                    f || z.text !== B.text.placed || z.icon !== B.icon.placed))
                : ((this.opacities[I] = new Ni(
                    null,
                    g,
                    z.text,
                    z.icon,
                    z.skipFade
                  )),
                  (f = f || z.text || z.icon));
            }
            for (let I in x) {
              let z = x[I];
              if (!this.opacities[I]) {
                let B = new Ni(z, g, !1, !1);
                B.isHidden() ||
                  ((this.opacities[I] = B),
                  (f = f || z.text.placed || z.icon.placed));
              }
            }
            for (let I in E)
              this.variableOffsets[I] ||
                !this.opacities[I] ||
                this.opacities[I].isHidden() ||
                (this.variableOffsets[I] = E[I]);
            for (let I in M)
              this.placedOrientations[I] ||
                !this.opacities[I] ||
                this.opacities[I].isHidden() ||
                (this.placedOrientations[I] = M[I]);
            if (d && d.lastPlacementChangeTime === void 0)
              throw new Error(
                "Last placement time for previous placement is not defined"
              );
            f
              ? (this.lastPlacementChangeTime = a)
              : typeof this.lastPlacementChangeTime != "number" &&
                (this.lastPlacementChangeTime = d
                  ? d.lastPlacementChangeTime
                  : a);
          }
          updateLayerOpacities(a, d) {
            let f = {};
            for (let g of d) {
              let x = g.getBucket(a);
              x &&
                g.latestFeatureIndex &&
                a.id === x.layerIds[0] &&
                this.updateBucketOpacities(x, f, g.collisionBoxArray);
            }
          }
          updateBucketOpacities(a, d, f) {
            a.hasTextData() &&
              (a.text.opacityVertexArray.clear(),
              (a.text.hasVisibleVertices = !1)),
              a.hasIconData() &&
                (a.icon.opacityVertexArray.clear(),
                (a.icon.hasVisibleVertices = !1)),
              a.hasIconCollisionBoxData() &&
                a.iconCollisionBox.collisionVertexArray.clear(),
              a.hasTextCollisionBoxData() &&
                a.textCollisionBox.collisionVertexArray.clear();
            let g = a.layers[0],
              x = g.layout,
              E = new Ni(null, 0, !1, !1, !0),
              M = x.get("text-allow-overlap"),
              I = x.get("icon-allow-overlap"),
              z =
                g._unevaluatedLayout.hasValue("text-variable-anchor") ||
                g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),
              B = x.get("text-rotation-alignment") === "map",
              U = x.get("text-pitch-alignment") === "map",
              Z = x.get("icon-text-fit") !== "none",
              se = new Ni(
                null,
                0,
                M && (I || !a.hasIconData() || x.get("icon-optional")),
                I && (M || !a.hasTextData() || x.get("text-optional")),
                !0
              );
            !a.collisionArrays &&
              f &&
              (a.hasIconCollisionBoxData() || a.hasTextCollisionBoxData()) &&
              a.deserializeCollisionBoxes(f);
            let oe = (le, ee, _e) => {
              for (let Be = 0; Be < ee / 4; Be++)
                le.opacityVertexArray.emplaceBack(_e);
              le.hasVisibleVertices = le.hasVisibleVertices || _e !== dn;
            };
            for (let le = 0; le < a.symbolInstances.length; le++) {
              let ee = a.symbolInstances.get(le),
                {
                  numHorizontalGlyphVertices: _e,
                  numVerticalGlyphVertices: Be,
                  crossTileID: he,
                } = ee,
                Ee = this.opacities[he];
              d[he] ? (Ee = E) : Ee || ((Ee = se), (this.opacities[he] = Ee)),
                (d[he] = !0);
              let Ue = ee.numIconVertices > 0,
                Ve = this.placedOrientations[ee.crossTileID],
                Ge = Ve === n.ah.vertical,
                ot = Ve === n.ah.horizontal || Ve === n.ah.horizontalOnly;
              if (_e > 0 || Be > 0) {
                let rt = _l(Ee.text);
                oe(a.text, _e, Ge ? dn : rt), oe(a.text, Be, ot ? dn : rt);
                let nt = Ee.text.isHidden();
                [
                  ee.rightJustifiedTextSymbolIndex,
                  ee.centerJustifiedTextSymbolIndex,
                  ee.leftJustifiedTextSymbolIndex,
                ].forEach((kt) => {
                  kt >= 0 &&
                    (a.text.placedSymbolArray.get(kt).hidden =
                      nt || Ge ? 1 : 0);
                }),
                  ee.verticalPlacedTextSymbolIndex >= 0 &&
                    (a.text.placedSymbolArray.get(
                      ee.verticalPlacedTextSymbolIndex
                    ).hidden = nt || ot ? 1 : 0);
                let Ft = this.variableOffsets[ee.crossTileID];
                Ft && this.markUsedJustification(a, Ft.anchor, ee, Ve);
                let ki = this.placedOrientations[ee.crossTileID];
                ki &&
                  (this.markUsedJustification(a, "left", ee, ki),
                  this.markUsedOrientation(a, ki, ee));
              }
              if (Ue) {
                let rt = _l(Ee.icon),
                  nt = !(Z && ee.verticalPlacedIconSymbolIndex && Ge);
                ee.placedIconSymbolIndex >= 0 &&
                  (oe(a.icon, ee.numIconVertices, nt ? rt : dn),
                  (a.icon.placedSymbolArray.get(
                    ee.placedIconSymbolIndex
                  ).hidden = Ee.icon.isHidden())),
                  ee.verticalPlacedIconSymbolIndex >= 0 &&
                    (oe(a.icon, ee.numVerticalIconVertices, nt ? dn : rt),
                    (a.icon.placedSymbolArray.get(
                      ee.verticalPlacedIconSymbolIndex
                    ).hidden = Ee.icon.isHidden()));
              }
              if (a.hasIconCollisionBoxData() || a.hasTextCollisionBoxData()) {
                let rt = a.collisionArrays[le];
                if (rt) {
                  let nt = new n.P(0, 0);
                  if (rt.textBox || rt.verticalTextBox) {
                    let ki = !0;
                    if (z) {
                      let kt = this.variableOffsets[he];
                      kt
                        ? ((nt = In(
                            kt.anchor,
                            kt.width,
                            kt.height,
                            kt.textOffset,
                            kt.textBoxScale
                          )),
                          B &&
                            nt._rotate(
                              U ? this.transform.angle : -this.transform.angle
                            ))
                        : (ki = !1);
                    }
                    rt.textBox &&
                      nn(
                        a.textCollisionBox.collisionVertexArray,
                        Ee.text.placed,
                        !ki || Ge,
                        nt.x,
                        nt.y
                      ),
                      rt.verticalTextBox &&
                        nn(
                          a.textCollisionBox.collisionVertexArray,
                          Ee.text.placed,
                          !ki || ot,
                          nt.x,
                          nt.y
                        );
                  }
                  let Ft = !!(!ot && rt.verticalIconBox);
                  rt.iconBox &&
                    nn(
                      a.iconCollisionBox.collisionVertexArray,
                      Ee.icon.placed,
                      Ft,
                      Z ? nt.x : 0,
                      Z ? nt.y : 0
                    ),
                    rt.verticalIconBox &&
                      nn(
                        a.iconCollisionBox.collisionVertexArray,
                        Ee.icon.placed,
                        !Ft,
                        Z ? nt.x : 0,
                        Z ? nt.y : 0
                      );
                }
              }
            }
            if (
              (a.sortFeatures(this.transform.angle),
              this.retainedQueryData[a.bucketInstanceId] &&
                (this.retainedQueryData[a.bucketInstanceId].featureSortOrder =
                  a.featureSortOrder),
              a.hasTextData() &&
                a.text.opacityVertexBuffer &&
                a.text.opacityVertexBuffer.updateData(
                  a.text.opacityVertexArray
                ),
              a.hasIconData() &&
                a.icon.opacityVertexBuffer &&
                a.icon.opacityVertexBuffer.updateData(
                  a.icon.opacityVertexArray
                ),
              a.hasIconCollisionBoxData() &&
                a.iconCollisionBox.collisionVertexBuffer &&
                a.iconCollisionBox.collisionVertexBuffer.updateData(
                  a.iconCollisionBox.collisionVertexArray
                ),
              a.hasTextCollisionBoxData() &&
                a.textCollisionBox.collisionVertexBuffer &&
                a.textCollisionBox.collisionVertexBuffer.updateData(
                  a.textCollisionBox.collisionVertexArray
                ),
              a.text.opacityVertexArray.length !==
                a.text.layoutVertexArray.length / 4)
            )
              throw new Error(
                `bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`
              );
            if (
              a.icon.opacityVertexArray.length !==
              a.icon.layoutVertexArray.length / 4
            )
              throw new Error(
                `bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`
              );
            if (a.bucketInstanceId in this.collisionCircleArrays) {
              let le = this.collisionCircleArrays[a.bucketInstanceId];
              (a.placementInvProjMatrix = le.invProjMatrix),
                (a.placementViewportMatrix = le.viewportMatrix),
                (a.collisionCircleArray = le.circles),
                delete this.collisionCircleArrays[a.bucketInstanceId];
            }
          }
          symbolFadeChange(a) {
            return this.fadeDuration === 0
              ? 1
              : (a - this.commitTime) / this.fadeDuration +
                  this.prevZoomAdjustment;
          }
          zoomAdjustment(a) {
            return Math.max(0, (this.transform.zoom - a) / 1.5);
          }
          hasTransitions(a) {
            return (
              this.stale || a - this.lastPlacementChangeTime < this.fadeDuration
            );
          }
          stillRecent(a, d) {
            let f =
              this.zoomAtLastRecencyCheck === d
                ? 1 - this.zoomAdjustment(d)
                : 1;
            return (
              (this.zoomAtLastRecencyCheck = d),
              this.commitTime + this.fadeDuration * f > a
            );
          }
          setStale() {
            this.stale = !0;
          }
        }
        function nn(v, a, d, f, g) {
          v.emplaceBack(a ? 1 : 0, d ? 1 : 0, f || 0, g || 0),
            v.emplaceBack(a ? 1 : 0, d ? 1 : 0, f || 0, g || 0),
            v.emplaceBack(a ? 1 : 0, d ? 1 : 0, f || 0, g || 0),
            v.emplaceBack(a ? 1 : 0, d ? 1 : 0, f || 0, g || 0);
        }
        let vl = Math.pow(2, 25),
          ha = Math.pow(2, 24),
          tr = Math.pow(2, 17),
          So = Math.pow(2, 16),
          Pa = Math.pow(2, 9),
          jn = Math.pow(2, 8),
          Pn = Math.pow(2, 1);
        function _l(v) {
          if (v.opacity === 0 && !v.placed) return 0;
          if (v.opacity === 1 && v.placed) return 4294967295;
          let a = v.placed ? 1 : 0,
            d = Math.floor(127 * v.opacity);
          return (
            d * vl + a * ha + d * tr + a * So + d * Pa + a * jn + d * Pn + a
          );
        }
        let dn = 0;
        class Jn {
          constructor(a) {
            (this._sortAcrossTiles =
              a.layout.get("symbol-z-order") !== "viewport-y" &&
              !a.layout.get("symbol-sort-key").isConstant()),
              (this._currentTileIndex = 0),
              (this._currentPartIndex = 0),
              (this._seenCrossTileIDs = {}),
              (this._bucketParts = []);
          }
          continuePlacement(a, d, f, g, x) {
            let E = this._bucketParts;
            for (; this._currentTileIndex < a.length; )
              if (
                (d.getBucketParts(
                  E,
                  g,
                  a[this._currentTileIndex],
                  this._sortAcrossTiles
                ),
                this._currentTileIndex++,
                x())
              )
                return !0;
            for (
              this._sortAcrossTiles &&
              ((this._sortAcrossTiles = !1),
              E.sort((M, I) => M.sortKey - I.sortKey));
              this._currentPartIndex < E.length;

            )
              if (
                (d.placeLayerBucketPart(
                  E[this._currentPartIndex],
                  this._seenCrossTileIDs,
                  f
                ),
                this._currentPartIndex++,
                x())
              )
                return !0;
            return !1;
          }
        }
        class xl {
          constructor(a, d, f, g, x, E, M, I) {
            (this.placement = new un(a, d, E, M, I)),
              (this._currentPlacementIndex = f.length - 1),
              (this._forceFullPlacement = g),
              (this._showCollisionBoxes = x),
              (this._done = !1);
          }
          isDone() {
            return this._done;
          }
          continuePlacement(a, d, f) {
            let g = b.now(),
              x = () => !this._forceFullPlacement && b.now() - g > 2;
            for (; this._currentPlacementIndex >= 0; ) {
              let E = d[a[this._currentPlacementIndex]],
                M = this.placement.collisionIndex.transform.zoom;
              if (
                E.type === "symbol" &&
                (!E.minzoom || E.minzoom <= M) &&
                (!E.maxzoom || E.maxzoom > M)
              ) {
                if (
                  (this._inProgressLayer || (this._inProgressLayer = new Jn(E)),
                  this._inProgressLayer.continuePlacement(
                    f[E.source],
                    this.placement,
                    this._showCollisionBoxes,
                    E,
                    x
                  ))
                )
                  return;
                delete this._inProgressLayer;
              }
              this._currentPlacementIndex--;
            }
            this._done = !0;
          }
          commit(a) {
            return this.placement.commit(a), this.placement;
          }
        }
        let de = 512 / n.W / 2;
        class ai {
          constructor(a, d, f) {
            (this.tileID = a),
              (this.bucketInstanceId = f),
              (this._symbolsByKey = {});
            let g = new Map();
            for (let x = 0; x < d.length; x++) {
              let E = d.get(x),
                M = E.key,
                I = g.get(M);
              I ? I.push(E) : g.set(M, [E]);
            }
            for (let [x, E] of g) {
              let M = {
                positions: E.map((I) => ({
                  x: Math.floor(I.anchorX * de),
                  y: Math.floor(I.anchorY * de),
                })),
                crossTileIDs: E.map((I) => I.crossTileID),
              };
              if (M.positions.length > 128) {
                let I = new n.au(M.positions.length, 16, Uint16Array);
                for (let { x: z, y: B } of M.positions) I.add(z, B);
                I.finish(), delete M.positions, (M.index = I);
              }
              this._symbolsByKey[x] = M;
            }
          }
          getScaledCoordinates(a, d) {
            let { x: f, y: g, z: x } = this.tileID.canonical,
              { x: E, y: M, z: I } = d.canonical,
              z = de / Math.pow(2, I - x),
              B = (M * n.W + a.anchorY) * z,
              U = g * n.W * de;
            return {
              x: Math.floor((E * n.W + a.anchorX) * z - f * n.W * de),
              y: Math.floor(B - U),
            };
          }
          findMatches(a, d, f) {
            let g =
              this.tileID.canonical.z < d.canonical.z
                ? 1
                : Math.pow(2, this.tileID.canonical.z - d.canonical.z);
            for (let x = 0; x < a.length; x++) {
              let E = a.get(x);
              if (E.crossTileID) continue;
              let M = this._symbolsByKey[E.key];
              if (!M) continue;
              let I = this.getScaledCoordinates(E, d);
              if (M.index) {
                let z = M.index
                  .range(I.x - g, I.y - g, I.x + g, I.y + g)
                  .sort();
                for (let B of z) {
                  let U = M.crossTileIDs[B];
                  if (!f[U]) {
                    (f[U] = !0), (E.crossTileID = U);
                    break;
                  }
                }
              } else if (M.positions)
                for (let z = 0; z < M.positions.length; z++) {
                  let B = M.positions[z],
                    U = M.crossTileIDs[z];
                  if (
                    Math.abs(B.x - I.x) <= g &&
                    Math.abs(B.y - I.y) <= g &&
                    !f[U]
                  ) {
                    (f[U] = !0), (E.crossTileID = U);
                    break;
                  }
                }
            }
          }
          getCrossTileIDsLists() {
            return Object.values(this._symbolsByKey).map(
              ({ crossTileIDs: a }) => a
            );
          }
        }
        class fr {
          constructor() {
            this.maxCrossTileID = 0;
          }
          generate() {
            return ++this.maxCrossTileID;
          }
        }
        class Lr {
          constructor() {
            (this.indexes = {}), (this.usedCrossTileIDs = {}), (this.lng = 0);
          }
          handleWrapJump(a) {
            let d = Math.round((a - this.lng) / 360);
            if (d !== 0)
              for (let f in this.indexes) {
                let g = this.indexes[f],
                  x = {};
                for (let E in g) {
                  let M = g[E];
                  (M.tileID = M.tileID.unwrapTo(M.tileID.wrap + d)),
                    (x[M.tileID.key] = M);
                }
                this.indexes[f] = x;
              }
            this.lng = a;
          }
          addBucket(a, d, f) {
            if (
              this.indexes[a.overscaledZ] &&
              this.indexes[a.overscaledZ][a.key]
            ) {
              if (
                this.indexes[a.overscaledZ][a.key].bucketInstanceId ===
                d.bucketInstanceId
              )
                return !1;
              this.removeBucketCrossTileIDs(
                a.overscaledZ,
                this.indexes[a.overscaledZ][a.key]
              );
            }
            for (let x = 0; x < d.symbolInstances.length; x++)
              d.symbolInstances.get(x).crossTileID = 0;
            this.usedCrossTileIDs[a.overscaledZ] ||
              (this.usedCrossTileIDs[a.overscaledZ] = {});
            let g = this.usedCrossTileIDs[a.overscaledZ];
            for (let x in this.indexes) {
              let E = this.indexes[x];
              if (Number(x) > a.overscaledZ)
                for (let M in E) {
                  let I = E[M];
                  I.tileID.isChildOf(a) &&
                    I.findMatches(d.symbolInstances, a, g);
                }
              else {
                let M = E[a.scaledTo(Number(x)).key];
                M && M.findMatches(d.symbolInstances, a, g);
              }
            }
            for (let x = 0; x < d.symbolInstances.length; x++) {
              let E = d.symbolInstances.get(x);
              E.crossTileID ||
                ((E.crossTileID = f.generate()), (g[E.crossTileID] = !0));
            }
            return (
              this.indexes[a.overscaledZ] === void 0 &&
                (this.indexes[a.overscaledZ] = {}),
              (this.indexes[a.overscaledZ][a.key] = new ai(
                a,
                d.symbolInstances,
                d.bucketInstanceId
              )),
              !0
            );
          }
          removeBucketCrossTileIDs(a, d) {
            for (let f of d.getCrossTileIDsLists())
              for (let g of f) delete this.usedCrossTileIDs[a][g];
          }
          removeStaleBuckets(a) {
            let d = !1;
            for (let f in this.indexes) {
              let g = this.indexes[f];
              for (let x in g)
                a[g[x].bucketInstanceId] ||
                  (this.removeBucketCrossTileIDs(f, g[x]),
                  delete g[x],
                  (d = !0));
            }
            return d;
          }
        }
        class cr {
          constructor() {
            (this.layerIndexes = {}),
              (this.crossTileIDs = new fr()),
              (this.maxBucketInstanceId = 0),
              (this.bucketsInCurrentPlacement = {});
          }
          addLayer(a, d, f) {
            let g = this.layerIndexes[a.id];
            g === void 0 && (g = this.layerIndexes[a.id] = new Lr());
            let x = !1,
              E = {};
            g.handleWrapJump(f);
            for (let M of d) {
              let I = M.getBucket(a);
              I &&
                a.id === I.layerIds[0] &&
                (I.bucketInstanceId ||
                  (I.bucketInstanceId = ++this.maxBucketInstanceId),
                g.addBucket(M.tileID, I, this.crossTileIDs) && (x = !0),
                (E[I.bucketInstanceId] = !0));
            }
            return g.removeStaleBuckets(E) && (x = !0), x;
          }
          pruneUnusedLayers(a) {
            let d = {};
            a.forEach((f) => {
              d[f] = !0;
            });
            for (let f in this.layerIndexes)
              d[f] || delete this.layerIndexes[f];
          }
        }
        let Ho = (v, a) =>
            n.t(v, a && a.filter((d) => d.identifier !== "source.canvas")),
          on = n.av();
        class cs extends n.E {
          constructor(a, d = {}) {
            super(),
              (this._rtlPluginLoaded = () => {
                for (let f in this.sourceCaches) {
                  let g = this.sourceCaches[f].getSource().type;
                  (g !== "vector" && g !== "geojson") ||
                    this.sourceCaches[f].reload();
                }
              }),
              (this.map = a),
              (this.dispatcher = new Li(ei(), a._getMapId())),
              this.dispatcher.registerMessageHandler("getGlyphs", (f, g) =>
                this.getGlyphs(f, g)
              ),
              this.dispatcher.registerMessageHandler("getImages", (f, g) =>
                this.getImages(f, g)
              ),
              (this.imageManager = new zt()),
              this.imageManager.setEventedParent(this),
              (this.glyphManager = new ct(
                a._requestManager,
                d.localIdeographFontFamily
              )),
              (this.lineAtlas = new hi(256, 512)),
              (this.crossTileSymbolIndex = new cr()),
              (this._spritesImagesIds = {}),
              (this._layers = {}),
              (this._order = []),
              (this.sourceCaches = {}),
              (this.zoomHistory = new n.aw()),
              (this._loaded = !1),
              (this._availableImages = []),
              this._resetUpdates(),
              this.dispatcher.broadcast("setReferrer", n.ax()),
              Pr().on(An, this._rtlPluginLoaded),
              this.on("data", (f) => {
                if (f.dataType !== "source" || f.sourceDataType !== "metadata")
                  return;
                let g = this.sourceCaches[f.sourceId];
                if (!g) return;
                let x = g.getSource();
                if (x && x.vectorLayerIds)
                  for (let E in this._layers) {
                    let M = this._layers[E];
                    M.source === x.id && this._validateLayer(M);
                  }
              });
          }
          loadURL(a, d = {}, f) {
            this.fire(new n.k("dataloading", { dataType: "style" })),
              (d.validate = typeof d.validate != "boolean" || d.validate);
            let g = this.map._requestManager.transformRequest(a, ce.Style);
            (this._loadStyleRequest = new AbortController()),
              n
                .h(g, this._loadStyleRequest)
                .then((x) => {
                  (this._loadStyleRequest = null), this._load(x.data, d, f);
                })
                .catch((x) => {
                  (this._loadStyleRequest = null), x && this.fire(new n.j(x));
                });
          }
          loadJSON(a, d = {}, f) {
            this.fire(new n.k("dataloading", { dataType: "style" })),
              (this._frameRequest = new AbortController()),
              b
                .frameAsync(this._frameRequest)
                .then(() => {
                  (this._frameRequest = null),
                    (d.validate = d.validate !== !1),
                    this._load(a, d, f);
                })
                .catch(() => {});
          }
          loadEmpty() {
            this.fire(new n.k("dataloading", { dataType: "style" })),
              this._load(on, { validate: !1 });
          }
          _load(a, d, f) {
            var g;
            let x = d.transformStyle ? d.transformStyle(f, a) : a;
            if (!d.validate || !Ho(this, n.x(x))) {
              (this._loaded = !0), (this.stylesheet = x);
              for (let E in x.sources)
                this.addSource(E, x.sources[E], { validate: !1 });
              x.sprite
                ? this._loadSprite(x.sprite)
                : this.imageManager.setLoaded(!0),
                this.glyphManager.setURL(x.glyphs),
                this._createLayers(),
                (this.light = new Vt(this.stylesheet.light)),
                this.map.setTerrain(
                  (g = this.stylesheet.terrain) !== null && g !== void 0
                    ? g
                    : null
                ),
                this.fire(new n.k("data", { dataType: "style" })),
                this.fire(new n.k("style.load"));
            }
          }
          _createLayers() {
            let a = n.ay(this.stylesheet.layers);
            this.dispatcher.broadcast("setLayers", a),
              (this._order = a.map((d) => d.id)),
              (this._layers = {}),
              (this._serializedLayers = null);
            for (let d of a) {
              let f = n.az(d);
              f.setEventedParent(this, { layer: { id: d.id } }),
                (this._layers[d.id] = f);
            }
          }
          _loadSprite(a, d = !1, f = void 0) {
            let g;
            this.imageManager.setLoaded(!1),
              (this._spriteRequest = new AbortController()),
              (function (x, E, M, I) {
                return n._(this, void 0, void 0, function* () {
                  let z = De(x),
                    B = M > 1 ? "@2x" : "",
                    U = {},
                    Z = {};
                  for (let { id: se, url: oe } of z) {
                    let le = E.transformRequest(
                      E.normalizeSpriteURL(oe, B, ".json"),
                      ce.SpriteJSON
                    );
                    U[se] = n.h(le, I);
                    let ee = E.transformRequest(
                      E.normalizeSpriteURL(oe, B, ".png"),
                      ce.SpriteImage
                    );
                    Z[se] = te.getImage(ee, I);
                  }
                  return (
                    yield Promise.all([
                      ...Object.values(U),
                      ...Object.values(Z),
                    ]),
                    (function (se, oe) {
                      return n._(this, void 0, void 0, function* () {
                        let le = {};
                        for (let ee in se) {
                          le[ee] = {};
                          let _e = b.getImageCanvasContext((yield oe[ee]).data),
                            Be = (yield se[ee]).data;
                          for (let he in Be) {
                            let {
                              width: Ee,
                              height: Ue,
                              x: Ve,
                              y: Ge,
                              sdf: ot,
                              pixelRatio: rt,
                              stretchX: nt,
                              stretchY: Ft,
                              content: ki,
                            } = Be[he];
                            le[ee][he] = {
                              data: null,
                              pixelRatio: rt,
                              sdf: ot,
                              stretchX: nt,
                              stretchY: Ft,
                              content: ki,
                              spriteData: {
                                width: Ee,
                                height: Ue,
                                x: Ve,
                                y: Ge,
                                context: _e,
                              },
                            };
                          }
                        }
                        return le;
                      });
                    })(U, Z)
                  );
                });
              })(
                a,
                this.map._requestManager,
                this.map.getPixelRatio(),
                this._spriteRequest
              )
                .then((x) => {
                  if (((this._spriteRequest = null), x))
                    for (let E in x) {
                      this._spritesImagesIds[E] = [];
                      let M = this._spritesImagesIds[E]
                        ? this._spritesImagesIds[E].filter((I) => !(I in x))
                        : [];
                      for (let I of M)
                        this.imageManager.removeImage(I),
                          (this._changedImages[I] = !0);
                      for (let I in x[E]) {
                        let z = E === "default" ? I : `${E}:${I}`;
                        this._spritesImagesIds[E].push(z),
                          z in this.imageManager.images
                            ? this.imageManager.updateImage(z, x[E][I], !1)
                            : this.imageManager.addImage(z, x[E][I]),
                          d && (this._changedImages[z] = !0);
                      }
                    }
                })
                .catch((x) => {
                  (this._spriteRequest = null), (g = x), this.fire(new n.j(g));
                })
                .finally(() => {
                  this.imageManager.setLoaded(!0),
                    (this._availableImages = this.imageManager.listImages()),
                    d && (this._changed = !0),
                    this.dispatcher.broadcast(
                      "setImages",
                      this._availableImages
                    ),
                    this.fire(new n.k("data", { dataType: "style" })),
                    f && f(g);
                });
          }
          _unloadSprite() {
            for (let a of Object.values(this._spritesImagesIds).flat())
              this.imageManager.removeImage(a), (this._changedImages[a] = !0);
            (this._spritesImagesIds = {}),
              (this._availableImages = this.imageManager.listImages()),
              (this._changed = !0),
              this.dispatcher.broadcast("setImages", this._availableImages),
              this.fire(new n.k("data", { dataType: "style" }));
          }
          _validateLayer(a) {
            let d = this.sourceCaches[a.source];
            if (!d) return;
            let f = a.sourceLayer;
            if (!f) return;
            let g = d.getSource();
            (g.type === "geojson" ||
              (g.vectorLayerIds && g.vectorLayerIds.indexOf(f) === -1)) &&
              this.fire(
                new n.j(
                  new Error(
                    `Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${a.id}".`
                  )
                )
              );
          }
          loaded() {
            if (!this._loaded || Object.keys(this._updatedSources).length)
              return !1;
            for (let a in this.sourceCaches)
              if (!this.sourceCaches[a].loaded()) return !1;
            return !!this.imageManager.isLoaded();
          }
          _serializeByIds(a) {
            let d = this._serializedAllLayers();
            if (!a || a.length === 0) return Object.values(d);
            let f = [];
            for (let g of a) d[g] && f.push(d[g]);
            return f;
          }
          _serializedAllLayers() {
            let a = this._serializedLayers;
            if (a) return a;
            a = this._serializedLayers = {};
            let d = Object.keys(this._layers);
            for (let f of d) {
              let g = this._layers[f];
              g.type !== "custom" && (a[f] = g.serialize());
            }
            return a;
          }
          hasTransitions() {
            if (this.light && this.light.hasTransition()) return !0;
            for (let a in this.sourceCaches)
              if (this.sourceCaches[a].hasTransition()) return !0;
            for (let a in this._layers)
              if (this._layers[a].hasTransition()) return !0;
            return !1;
          }
          _checkLoaded() {
            if (!this._loaded) throw new Error("Style is not done loading.");
          }
          update(a) {
            if (!this._loaded) return;
            let d = this._changed;
            if (this._changed) {
              let g = Object.keys(this._updatedLayers),
                x = Object.keys(this._removedLayers);
              (g.length || x.length) && this._updateWorkerLayers(g, x);
              for (let E in this._updatedSources) {
                let M = this._updatedSources[E];
                if (M === "reload") this._reloadSource(E);
                else {
                  if (M !== "clear") throw new Error(`Invalid action ${M}`);
                  this._clearSource(E);
                }
              }
              this._updateTilesForChangedImages(),
                this._updateTilesForChangedGlyphs();
              for (let E in this._updatedPaintProps)
                this._layers[E].updateTransitions(a);
              this.light.updateTransitions(a), this._resetUpdates();
            }
            let f = {};
            for (let g in this.sourceCaches) {
              let x = this.sourceCaches[g];
              (f[g] = x.used), (x.used = !1);
            }
            for (let g of this._order) {
              let x = this._layers[g];
              x.recalculate(a, this._availableImages),
                !x.isHidden(a.zoom) &&
                  x.source &&
                  (this.sourceCaches[x.source].used = !0);
            }
            for (let g in f) {
              let x = this.sourceCaches[g];
              f[g] !== x.used &&
                x.fire(
                  new n.k("data", {
                    sourceDataType: "visibility",
                    dataType: "source",
                    sourceId: g,
                  })
                );
            }
            this.light.recalculate(a),
              (this.z = a.zoom),
              d && this.fire(new n.k("data", { dataType: "style" }));
          }
          _updateTilesForChangedImages() {
            let a = Object.keys(this._changedImages);
            if (a.length) {
              for (let d in this.sourceCaches)
                this.sourceCaches[d].reloadTilesForDependencies(
                  ["icons", "patterns"],
                  a
                );
              this._changedImages = {};
            }
          }
          _updateTilesForChangedGlyphs() {
            if (this._glyphsDidChange) {
              for (let a in this.sourceCaches)
                this.sourceCaches[a].reloadTilesForDependencies(
                  ["glyphs"],
                  [""]
                );
              this._glyphsDidChange = !1;
            }
          }
          _updateWorkerLayers(a, d) {
            this.dispatcher.broadcast("updateLayers", {
              layers: this._serializeByIds(a),
              removedIds: d,
            });
          }
          _resetUpdates() {
            (this._changed = !1),
              (this._updatedLayers = {}),
              (this._removedLayers = {}),
              (this._updatedSources = {}),
              (this._updatedPaintProps = {}),
              (this._changedImages = {}),
              (this._glyphsDidChange = !1);
          }
          setState(a, d = {}) {
            var f;
            this._checkLoaded();
            let g = this.serialize();
            if (
              ((a = d.transformStyle ? d.transformStyle(g, a) : a),
              ((f = d.validate) === null || f === void 0 || f) &&
                Ho(this, n.x(a)))
            )
              return !1;
            (a = n.aA(a)).layers = n.ay(a.layers);
            let x = n.aB(g, a),
              E = this._getOperationsToPerform(x);
            if (E.unimplemented.length > 0)
              throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);
            if (E.operations.length === 0) return !1;
            for (let M of E.operations) M();
            return (this.stylesheet = a), (this._serializedLayers = null), !0;
          }
          _getOperationsToPerform(a) {
            let d = [],
              f = [];
            for (let g of a)
              switch (g.command) {
                case "setCenter":
                case "setZoom":
                case "setBearing":
                case "setPitch":
                  continue;
                case "addLayer":
                  d.push(() => this.addLayer.apply(this, g.args));
                  break;
                case "removeLayer":
                  d.push(() => this.removeLayer.apply(this, g.args));
                  break;
                case "setPaintProperty":
                  d.push(() => this.setPaintProperty.apply(this, g.args));
                  break;
                case "setLayoutProperty":
                  d.push(() => this.setLayoutProperty.apply(this, g.args));
                  break;
                case "setFilter":
                  d.push(() => this.setFilter.apply(this, g.args));
                  break;
                case "addSource":
                  d.push(() => this.addSource.apply(this, g.args));
                  break;
                case "removeSource":
                  d.push(() => this.removeSource.apply(this, g.args));
                  break;
                case "setLayerZoomRange":
                  d.push(() => this.setLayerZoomRange.apply(this, g.args));
                  break;
                case "setLight":
                  d.push(() => this.setLight.apply(this, g.args));
                  break;
                case "setGeoJSONSourceData":
                  d.push(() => this.setGeoJSONSourceData.apply(this, g.args));
                  break;
                case "setGlyphs":
                  d.push(() => this.setGlyphs.apply(this, g.args));
                  break;
                case "setSprite":
                  d.push(() => this.setSprite.apply(this, g.args));
                  break;
                case "setTerrain":
                  d.push(() => this.map.setTerrain.apply(this, g.args));
                  break;
                case "setTransition":
                  d.push(() => {});
                  break;
                default:
                  f.push(g.command);
              }
            return { operations: d, unimplemented: f };
          }
          addImage(a, d) {
            if (this.getImage(a))
              return this.fire(
                new n.j(new Error(`An image named "${a}" already exists.`))
              );
            this.imageManager.addImage(a, d), this._afterImageUpdated(a);
          }
          updateImage(a, d) {
            this.imageManager.updateImage(a, d);
          }
          getImage(a) {
            return this.imageManager.getImage(a);
          }
          removeImage(a) {
            if (!this.getImage(a))
              return this.fire(
                new n.j(new Error(`An image named "${a}" does not exist.`))
              );
            this.imageManager.removeImage(a), this._afterImageUpdated(a);
          }
          _afterImageUpdated(a) {
            (this._availableImages = this.imageManager.listImages()),
              (this._changedImages[a] = !0),
              (this._changed = !0),
              this.dispatcher.broadcast("setImages", this._availableImages),
              this.fire(new n.k("data", { dataType: "style" }));
          }
          listImages() {
            return this._checkLoaded(), this.imageManager.listImages();
          }
          addSource(a, d, f = {}) {
            if ((this._checkLoaded(), this.sourceCaches[a] !== void 0))
              throw new Error(`Source "${a}" already exists.`);
            if (!d.type)
              throw new Error(
                `The type property must be defined, but only the following properties were given: ${Object.keys(
                  d
                ).join(", ")}.`
              );
            if (
              ["vector", "raster", "geojson", "video", "image"].indexOf(
                d.type
              ) >= 0 &&
              this._validate(n.x.source, `sources.${a}`, d, null, f)
            )
              return;
            this.map &&
              this.map._collectResourceTiming &&
              (d.collectResourceTiming = !0);
            let g = (this.sourceCaches[a] = new ft(a, d, this.dispatcher));
            (g.style = this),
              g.setEventedParent(this, () => ({
                isSourceLoaded: g.loaded(),
                source: g.serialize(),
                sourceId: a,
              })),
              g.onAdd(this.map),
              (this._changed = !0);
          }
          removeSource(a) {
            if ((this._checkLoaded(), this.sourceCaches[a] === void 0))
              throw new Error("There is no source with this ID");
            for (let f in this._layers)
              if (this._layers[f].source === a)
                return this.fire(
                  new n.j(
                    new Error(
                      `Source "${a}" cannot be removed while layer "${f}" is using it.`
                    )
                  )
                );
            let d = this.sourceCaches[a];
            delete this.sourceCaches[a],
              delete this._updatedSources[a],
              d.fire(
                new n.k("data", {
                  sourceDataType: "metadata",
                  dataType: "source",
                  sourceId: a,
                })
              ),
              d.setEventedParent(null),
              d.onRemove(this.map),
              (this._changed = !0);
          }
          setGeoJSONSourceData(a, d) {
            if ((this._checkLoaded(), this.sourceCaches[a] === void 0))
              throw new Error(`There is no source with this ID=${a}`);
            let f = this.sourceCaches[a].getSource();
            if (f.type !== "geojson")
              throw new Error(
                `geojsonSource.type is ${f.type}, which is !== 'geojson`
              );
            f.setData(d), (this._changed = !0);
          }
          getSource(a) {
            return this.sourceCaches[a] && this.sourceCaches[a].getSource();
          }
          addLayer(a, d, f = {}) {
            this._checkLoaded();
            let g = a.id;
            if (this.getLayer(g))
              return void this.fire(
                new n.j(new Error(`Layer "${g}" already exists on this map.`))
              );
            let x;
            if (a.type === "custom") {
              if (Ho(this, n.aC(a))) return;
              x = n.az(a);
            } else {
              if (
                ("source" in a &&
                  typeof a.source == "object" &&
                  (this.addSource(g, a.source),
                  (a = n.aA(a)),
                  (a = n.e(a, { source: g }))),
                this._validate(
                  n.x.layer,
                  `layers.${g}`,
                  a,
                  { arrayIndex: -1 },
                  f
                ))
              )
                return;
              (x = n.az(a)),
                this._validateLayer(x),
                x.setEventedParent(this, { layer: { id: g } });
            }
            let E = d ? this._order.indexOf(d) : this._order.length;
            if (d && E === -1)
              this.fire(
                new n.j(
                  new Error(
                    `Cannot add layer "${g}" before non-existing layer "${d}".`
                  )
                )
              );
            else {
              if (
                (this._order.splice(E, 0, g),
                (this._layerOrderChanged = !0),
                (this._layers[g] = x),
                this._removedLayers[g] && x.source && x.type !== "custom")
              ) {
                let M = this._removedLayers[g];
                delete this._removedLayers[g],
                  M.type !== x.type
                    ? (this._updatedSources[x.source] = "clear")
                    : ((this._updatedSources[x.source] = "reload"),
                      this.sourceCaches[x.source].pause());
              }
              this._updateLayer(x), x.onAdd && x.onAdd(this.map);
            }
          }
          moveLayer(a, d) {
            if ((this._checkLoaded(), (this._changed = !0), !this._layers[a]))
              return void this.fire(
                new n.j(
                  new Error(
                    `The layer '${a}' does not exist in the map's style and cannot be moved.`
                  )
                )
              );
            if (a === d) return;
            let f = this._order.indexOf(a);
            this._order.splice(f, 1);
            let g = d ? this._order.indexOf(d) : this._order.length;
            d && g === -1
              ? this.fire(
                  new n.j(
                    new Error(
                      `Cannot move layer "${a}" before non-existing layer "${d}".`
                    )
                  )
                )
              : (this._order.splice(g, 0, a), (this._layerOrderChanged = !0));
          }
          removeLayer(a) {
            this._checkLoaded();
            let d = this._layers[a];
            if (!d)
              return void this.fire(
                new n.j(new Error(`Cannot remove non-existing layer "${a}".`))
              );
            d.setEventedParent(null);
            let f = this._order.indexOf(a);
            this._order.splice(f, 1),
              (this._layerOrderChanged = !0),
              (this._changed = !0),
              (this._removedLayers[a] = d),
              delete this._layers[a],
              this._serializedLayers && delete this._serializedLayers[a],
              delete this._updatedLayers[a],
              delete this._updatedPaintProps[a],
              d.onRemove && d.onRemove(this.map);
          }
          getLayer(a) {
            return this._layers[a];
          }
          getLayersOrder() {
            return [...this._order];
          }
          hasLayer(a) {
            return a in this._layers;
          }
          setLayerZoomRange(a, d, f) {
            this._checkLoaded();
            let g = this.getLayer(a);
            g
              ? (g.minzoom === d && g.maxzoom === f) ||
                (d != null && (g.minzoom = d),
                f != null && (g.maxzoom = f),
                this._updateLayer(g))
              : this.fire(
                  new n.j(
                    new Error(
                      `Cannot set the zoom range of non-existing layer "${a}".`
                    )
                  )
                );
          }
          setFilter(a, d, f = {}) {
            this._checkLoaded();
            let g = this.getLayer(a);
            if (g) {
              if (!n.aD(g.filter, d))
                return d == null
                  ? ((g.filter = void 0), void this._updateLayer(g))
                  : void (
                      this._validate(
                        n.x.filter,
                        `layers.${g.id}.filter`,
                        d,
                        null,
                        f
                      ) || ((g.filter = n.aA(d)), this._updateLayer(g))
                    );
            } else this.fire(new n.j(new Error(`Cannot filter non-existing layer "${a}".`)));
          }
          getFilter(a) {
            return n.aA(this.getLayer(a).filter);
          }
          setLayoutProperty(a, d, f, g = {}) {
            this._checkLoaded();
            let x = this.getLayer(a);
            x
              ? n.aD(x.getLayoutProperty(d), f) ||
                (x.setLayoutProperty(d, f, g), this._updateLayer(x))
              : this.fire(
                  new n.j(new Error(`Cannot style non-existing layer "${a}".`))
                );
          }
          getLayoutProperty(a, d) {
            let f = this.getLayer(a);
            if (f) return f.getLayoutProperty(d);
            this.fire(
              new n.j(
                new Error(`Cannot get style of non-existing layer "${a}".`)
              )
            );
          }
          setPaintProperty(a, d, f, g = {}) {
            this._checkLoaded();
            let x = this.getLayer(a);
            x
              ? n.aD(x.getPaintProperty(d), f) ||
                (x.setPaintProperty(d, f, g) && this._updateLayer(x),
                (this._changed = !0),
                (this._updatedPaintProps[a] = !0))
              : this.fire(
                  new n.j(new Error(`Cannot style non-existing layer "${a}".`))
                );
          }
          getPaintProperty(a, d) {
            return this.getLayer(a).getPaintProperty(d);
          }
          setFeatureState(a, d) {
            this._checkLoaded();
            let f = a.source,
              g = a.sourceLayer,
              x = this.sourceCaches[f];
            if (x === void 0)
              return void this.fire(
                new n.j(
                  new Error(
                    `The source '${f}' does not exist in the map's style.`
                  )
                )
              );
            let E = x.getSource().type;
            E === "geojson" && g
              ? this.fire(
                  new n.j(
                    new Error(
                      "GeoJSON sources cannot have a sourceLayer parameter."
                    )
                  )
                )
              : E !== "vector" || g
              ? (a.id === void 0 &&
                  this.fire(
                    new n.j(
                      new Error("The feature id parameter must be provided.")
                    )
                  ),
                x.setFeatureState(g, a.id, d))
              : this.fire(
                  new n.j(
                    new Error(
                      "The sourceLayer parameter must be provided for vector source types."
                    )
                  )
                );
          }
          removeFeatureState(a, d) {
            this._checkLoaded();
            let f = a.source,
              g = this.sourceCaches[f];
            if (g === void 0)
              return void this.fire(
                new n.j(
                  new Error(
                    `The source '${f}' does not exist in the map's style.`
                  )
                )
              );
            let x = g.getSource().type,
              E = x === "vector" ? a.sourceLayer : void 0;
            x !== "vector" || E
              ? d && typeof a.id != "string" && typeof a.id != "number"
                ? this.fire(
                    new n.j(
                      new Error(
                        "A feature id is required to remove its specific state property."
                      )
                    )
                  )
                : g.removeFeatureState(E, a.id, d)
              : this.fire(
                  new n.j(
                    new Error(
                      "The sourceLayer parameter must be provided for vector source types."
                    )
                  )
                );
          }
          getFeatureState(a) {
            this._checkLoaded();
            let d = a.source,
              f = a.sourceLayer,
              g = this.sourceCaches[d];
            if (g !== void 0)
              return g.getSource().type !== "vector" || f
                ? (a.id === void 0 &&
                    this.fire(
                      new n.j(
                        new Error("The feature id parameter must be provided.")
                      )
                    ),
                  g.getFeatureState(f, a.id))
                : void this.fire(
                    new n.j(
                      new Error(
                        "The sourceLayer parameter must be provided for vector source types."
                      )
                    )
                  );
            this.fire(
              new n.j(
                new Error(
                  `The source '${d}' does not exist in the map's style.`
                )
              )
            );
          }
          getTransition() {
            return n.e(
              { duration: 300, delay: 0 },
              this.stylesheet && this.stylesheet.transition
            );
          }
          serialize() {
            if (!this._loaded) return;
            let a = n.aE(this.sourceCaches, (x) => x.serialize()),
              d = this._serializeByIds(this._order),
              f = this.map.getTerrain() || void 0,
              g = this.stylesheet;
            return n.aF(
              {
                version: g.version,
                name: g.name,
                metadata: g.metadata,
                light: g.light,
                center: g.center,
                zoom: g.zoom,
                bearing: g.bearing,
                pitch: g.pitch,
                sprite: g.sprite,
                glyphs: g.glyphs,
                transition: g.transition,
                sources: a,
                layers: d,
                terrain: f,
              },
              (x) => x !== void 0
            );
          }
          _updateLayer(a) {
            (this._updatedLayers[a.id] = !0),
              a.source &&
                !this._updatedSources[a.source] &&
                this.sourceCaches[a.source].getSource().type !== "raster" &&
                ((this._updatedSources[a.source] = "reload"),
                this.sourceCaches[a.source].pause()),
              (this._serializedLayers = null),
              (this._changed = !0);
          }
          _flattenAndSortRenderedFeatures(a) {
            let d = (E) => this._layers[E].type === "fill-extrusion",
              f = {},
              g = [];
            for (let E = this._order.length - 1; E >= 0; E--) {
              let M = this._order[E];
              if (d(M)) {
                f[M] = E;
                for (let I of a) {
                  let z = I[M];
                  if (z) for (let B of z) g.push(B);
                }
              }
            }
            g.sort((E, M) => M.intersectionZ - E.intersectionZ);
            let x = [];
            for (let E = this._order.length - 1; E >= 0; E--) {
              let M = this._order[E];
              if (d(M))
                for (let I = g.length - 1; I >= 0; I--) {
                  let z = g[I].feature;
                  if (f[z.layer.id] < E) break;
                  x.push(z), g.pop();
                }
              else
                for (let I of a) {
                  let z = I[M];
                  if (z) for (let B of z) x.push(B.feature);
                }
            }
            return x;
          }
          queryRenderedFeatures(a, d, f) {
            d &&
              d.filter &&
              this._validate(
                n.x.filter,
                "queryRenderedFeatures.filter",
                d.filter,
                null,
                d
              );
            let g = {};
            if (d && d.layers) {
              if (!Array.isArray(d.layers))
                return (
                  this.fire(
                    new n.j(new Error("parameters.layers must be an Array."))
                  ),
                  []
                );
              for (let M of d.layers) {
                let I = this._layers[M];
                if (!I)
                  return (
                    this.fire(
                      new n.j(
                        new Error(
                          `The layer '${M}' does not exist in the map's style and cannot be queried for features.`
                        )
                      )
                    ),
                    []
                  );
                g[I.source] = !0;
              }
            }
            let x = [];
            d.availableImages = this._availableImages;
            let E = this._serializedAllLayers();
            for (let M in this.sourceCaches)
              (d.layers && !g[M]) ||
                x.push(wi(this.sourceCaches[M], this._layers, E, a, d, f));
            return (
              this.placement &&
                x.push(
                  (function (M, I, z, B, U, Z, se) {
                    let oe = {},
                      le = Z.queryRenderedSymbols(B),
                      ee = [];
                    for (let _e of Object.keys(le).map(Number)) ee.push(se[_e]);
                    ee.sort(sr);
                    for (let _e of ee) {
                      let Be = _e.featureIndex.lookupSymbolFeatures(
                        le[_e.bucketInstanceId],
                        I,
                        _e.bucketIndex,
                        _e.sourceLayerIndex,
                        U.filter,
                        U.layers,
                        U.availableImages,
                        M
                      );
                      for (let he in Be) {
                        let Ee = (oe[he] = oe[he] || []),
                          Ue = Be[he];
                        Ue.sort((Ve, Ge) => {
                          let ot = _e.featureSortOrder;
                          if (ot) {
                            let rt = ot.indexOf(Ve.featureIndex);
                            return ot.indexOf(Ge.featureIndex) - rt;
                          }
                          return Ge.featureIndex - Ve.featureIndex;
                        });
                        for (let Ve of Ue) Ee.push(Ve);
                      }
                    }
                    for (let _e in oe)
                      oe[_e].forEach((Be) => {
                        let he = Be.feature,
                          Ee = z[M[_e].source].getFeatureState(
                            he.layer["source-layer"],
                            he.id
                          );
                        (he.source = he.layer.source),
                          he.layer["source-layer"] &&
                            (he.sourceLayer = he.layer["source-layer"]),
                          (he.state = Ee);
                      });
                    return oe;
                  })(
                    this._layers,
                    E,
                    this.sourceCaches,
                    a,
                    d,
                    this.placement.collisionIndex,
                    this.placement.retainedQueryData
                  )
                ),
              this._flattenAndSortRenderedFeatures(x)
            );
          }
          querySourceFeatures(a, d) {
            d &&
              d.filter &&
              this._validate(
                n.x.filter,
                "querySourceFeatures.filter",
                d.filter,
                null,
                d
              );
            let f = this.sourceCaches[a];
            return f
              ? (function (g, x) {
                  let E = g.getRenderableIds().map((z) => g.getTileByID(z)),
                    M = [],
                    I = {};
                  for (let z = 0; z < E.length; z++) {
                    let B = E[z],
                      U = B.tileID.canonical.key;
                    I[U] || ((I[U] = !0), B.querySourceFeatures(M, x));
                  }
                  return M;
                })(f, d)
              : [];
          }
          getLight() {
            return this.light.getLight();
          }
          setLight(a, d = {}) {
            this._checkLoaded();
            let f = this.light.getLight(),
              g = !1;
            for (let E in a)
              if (!n.aD(a[E], f[E])) {
                g = !0;
                break;
              }
            if (!g) return;
            let x = {
              now: b.now(),
              transition: n.e(
                { duration: 300, delay: 0 },
                this.stylesheet.transition
              ),
            };
            this.light.setLight(a, d), this.light.updateTransitions(x);
          }
          _validate(a, d, f, g, x = {}) {
            return (
              (!x || x.validate !== !1) &&
              Ho(
                this,
                a.call(
                  n.x,
                  n.e(
                    {
                      key: d,
                      style: this.serialize(),
                      value: f,
                      styleSpec: n.v,
                    },
                    g
                  )
                )
              )
            );
          }
          _remove(a = !0) {
            this._frameRequest &&
              (this._frameRequest.abort(), (this._frameRequest = null)),
              this._loadStyleRequest &&
                (this._loadStyleRequest.abort(),
                (this._loadStyleRequest = null)),
              this._spriteRequest &&
                (this._spriteRequest.abort(), (this._spriteRequest = null)),
              Pr().off(An, this._rtlPluginLoaded);
            for (let d in this._layers) this._layers[d].setEventedParent(null);
            for (let d in this.sourceCaches) {
              let f = this.sourceCaches[d];
              f.setEventedParent(null), f.onRemove(this.map);
            }
            this.imageManager.setEventedParent(null),
              this.setEventedParent(null),
              a && this.dispatcher.broadcast("removeMap", void 0),
              this.dispatcher.remove(a);
          }
          _clearSource(a) {
            this.sourceCaches[a].clearTiles();
          }
          _reloadSource(a) {
            this.sourceCaches[a].resume(), this.sourceCaches[a].reload();
          }
          _updateSources(a) {
            for (let d in this.sourceCaches)
              this.sourceCaches[d].update(a, this.map.terrain);
          }
          _generateCollisionBoxes() {
            for (let a in this.sourceCaches) this._reloadSource(a);
          }
          _updatePlacement(a, d, f, g, x = !1) {
            let E = !1,
              M = !1,
              I = {};
            for (let z of this._order) {
              let B = this._layers[z];
              if (B.type !== "symbol") continue;
              if (!I[B.source]) {
                let Z = this.sourceCaches[B.source];
                I[B.source] = Z.getRenderableIds(!0)
                  .map((se) => Z.getTileByID(se))
                  .sort(
                    (se, oe) =>
                      oe.tileID.overscaledZ - se.tileID.overscaledZ ||
                      (se.tileID.isLessThan(oe.tileID) ? -1 : 1)
                  );
              }
              let U = this.crossTileSymbolIndex.addLayer(
                B,
                I[B.source],
                a.center.lng
              );
              E = E || U;
            }
            if (
              (this.crossTileSymbolIndex.pruneUnusedLayers(this._order),
              ((x = x || this._layerOrderChanged || f === 0) ||
                !this.pauseablePlacement ||
                (this.pauseablePlacement.isDone() &&
                  !this.placement.stillRecent(b.now(), a.zoom))) &&
                ((this.pauseablePlacement = new xl(
                  a,
                  this.map.terrain,
                  this._order,
                  x,
                  d,
                  f,
                  g,
                  this.placement
                )),
                (this._layerOrderChanged = !1)),
              this.pauseablePlacement.isDone()
                ? this.placement.setStale()
                : (this.pauseablePlacement.continuePlacement(
                    this._order,
                    this._layers,
                    I
                  ),
                  this.pauseablePlacement.isDone() &&
                    ((this.placement = this.pauseablePlacement.commit(b.now())),
                    (M = !0)),
                  E && this.pauseablePlacement.placement.setStale()),
              M || E)
            )
              for (let z of this._order) {
                let B = this._layers[z];
                B.type === "symbol" &&
                  this.placement.updateLayerOpacities(B, I[B.source]);
              }
            return (
              !this.pauseablePlacement.isDone() ||
              this.placement.hasTransitions(b.now())
            );
          }
          _releaseSymbolFadeTiles() {
            for (let a in this.sourceCaches)
              this.sourceCaches[a].releaseSymbolFadeTiles();
          }
          getImages(a, d) {
            return n._(this, void 0, void 0, function* () {
              let f = yield this.imageManager.getImages(d.icons);
              this._updateTilesForChangedImages();
              let g = this.sourceCaches[d.source];
              return g && g.setDependencies(d.tileID.key, d.type, d.icons), f;
            });
          }
          getGlyphs(a, d) {
            return n._(this, void 0, void 0, function* () {
              let f = yield this.glyphManager.getGlyphs(d.stacks),
                g = this.sourceCaches[d.source];
              return g && g.setDependencies(d.tileID.key, d.type, [""]), f;
            });
          }
          getGlyphsUrl() {
            return this.stylesheet.glyphs || null;
          }
          setGlyphs(a, d = {}) {
            this._checkLoaded(),
              (a && this._validate(n.x.glyphs, "glyphs", a, null, d)) ||
                ((this._glyphsDidChange = !0),
                (this.stylesheet.glyphs = a),
                (this.glyphManager.entries = {}),
                this.glyphManager.setURL(a));
          }
          addSprite(a, d, f = {}, g) {
            this._checkLoaded();
            let x = [{ id: a, url: d }],
              E = [...De(this.stylesheet.sprite), ...x];
            this._validate(n.x.sprite, "sprite", E, null, f) ||
              ((this.stylesheet.sprite = E), this._loadSprite(x, !0, g));
          }
          removeSprite(a) {
            this._checkLoaded();
            let d = De(this.stylesheet.sprite);
            if (d.find((f) => f.id === a)) {
              if (this._spritesImagesIds[a])
                for (let f of this._spritesImagesIds[a])
                  this.imageManager.removeImage(f),
                    (this._changedImages[f] = !0);
              d.splice(
                d.findIndex((f) => f.id === a),
                1
              ),
                (this.stylesheet.sprite = d.length > 0 ? d : void 0),
                delete this._spritesImagesIds[a],
                (this._availableImages = this.imageManager.listImages()),
                (this._changed = !0),
                this.dispatcher.broadcast("setImages", this._availableImages),
                this.fire(new n.k("data", { dataType: "style" }));
            } else this.fire(new n.j(new Error(`Sprite "${a}" doesn't exists on this map.`)));
          }
          getSprite() {
            return De(this.stylesheet.sprite);
          }
          setSprite(a, d = {}, f) {
            this._checkLoaded(),
              (a && this._validate(n.x.sprite, "sprite", a, null, d)) ||
                ((this.stylesheet.sprite = a),
                a
                  ? this._loadSprite(a, !0, f)
                  : (this._unloadSprite(), f && f(null)));
          }
        }
        var Hn = n.X([{ name: "a_pos", type: "Int16", components: 2 }]),
          Es =
            "attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";
        let ue = {
          prelude: R(
            `#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,
            `#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`
          ),
          background: R(
            `uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"
          ),
          backgroundPattern: R(
            `uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"
          ),
          circle: R(
            `varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`
          ),
          clippingMask: R(
            "void main() {gl_FragColor=vec4(1.0);}",
            "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"
          ),
          heatmap: R(
            `uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`
          ),
          heatmapTexture: R(
            `uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"
          ),
          collisionBox: R(
            "varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",
            "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"
          ),
          collisionCircle: R(
            "varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",
            "attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"
          ),
          debug: R(
            "uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",
            "attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"
          ),
          fill: R(
            `#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`
          ),
          fillOutline: R(
            `varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`
          ),
          fillOutlinePattern: R(
            `uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`
          ),
          fillPattern: R(
            `#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`
          ),
          fillExtrusion: R(
            `varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`
          ),
          fillExtrusionPattern: R(
            `uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`
          ),
          hillshadePrepare: R(
            `#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"
          ),
          hillshade: R(
            `uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"
          ),
          line: R(
            `uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`
          ),
          lineGradient: R(
            `uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`
          ),
          linePattern: R(
            `#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`
          ),
          lineSDF: R(
            `uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`
          ),
          raster: R(
            `uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            "uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"
          ),
          symbolIcon: R(
            `uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`
          ),
          symbolSDF: R(
            `#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`
          ),
          symbolTextAndIcon: R(
            `#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,
            `const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`
          ),
          terrain: R(
            "uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",
            Es
          ),
          terrainDepth: R(
            "varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",
            Es
          ),
          terrainCoords: R(
            "precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",
            Es
          ),
        };
        function R(v, a) {
          let d = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
            f = a.match(/attribute ([\w]+) ([\w]+)/g),
            g = v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),
            x = a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),
            E = x ? x.concat(g) : g,
            M = {};
          return {
            fragmentSource: (v = v.replace(
              d,
              (I, z, B, U, Z) => (
                (M[Z] = !0),
                z === "define"
                  ? `
#ifndef HAS_UNIFORM_u_${Z}
varying ${B} ${U} ${Z};
#else
uniform ${B} ${U} u_${Z};
#endif
`
                  : `
#ifdef HAS_UNIFORM_u_${Z}
    ${B} ${U} ${Z} = u_${Z};
#endif
`
              )
            )),
            vertexSource: (a = a.replace(d, (I, z, B, U, Z) => {
              let se = U === "float" ? "vec2" : "vec4",
                oe = Z.match(/color/) ? "color" : se;
              return M[Z]
                ? z === "define"
                  ? `
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${B} ${se} a_${Z};
varying ${B} ${U} ${Z};
#else
uniform ${B} ${U} u_${Z};
#endif
`
                  : oe === "vec4"
                  ? `
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`
                  : `
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${oe}(a_${Z}, u_${Z}_t);
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`
                : z === "define"
                ? `
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${B} ${se} a_${Z};
#else
uniform ${B} ${U} u_${Z};
#endif
`
                : oe === "vec4"
                ? `
#ifndef HAS_UNIFORM_u_${Z}
    ${B} ${U} ${Z} = a_${Z};
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`
                : `
#ifndef HAS_UNIFORM_u_${Z}
    ${B} ${U} ${Z} = unpack_mix_${oe}(a_${Z}, u_${Z}_t);
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`;
            })),
            staticAttributes: f,
            staticUniforms: E,
          };
        }
        class X {
          constructor() {
            (this.boundProgram = null),
              (this.boundLayoutVertexBuffer = null),
              (this.boundPaintVertexBuffers = []),
              (this.boundIndexBuffer = null),
              (this.boundVertexOffset = null),
              (this.boundDynamicVertexBuffer = null),
              (this.vao = null);
          }
          bind(a, d, f, g, x, E, M, I, z) {
            this.context = a;
            let B = this.boundPaintVertexBuffers.length !== g.length;
            for (let U = 0; !B && U < g.length; U++)
              this.boundPaintVertexBuffers[U] !== g[U] && (B = !0);
            !this.vao ||
            this.boundProgram !== d ||
            this.boundLayoutVertexBuffer !== f ||
            B ||
            this.boundIndexBuffer !== x ||
            this.boundVertexOffset !== E ||
            this.boundDynamicVertexBuffer !== M ||
            this.boundDynamicVertexBuffer2 !== I ||
            this.boundDynamicVertexBuffer3 !== z
              ? this.freshBind(d, f, g, x, E, M, I, z)
              : (a.bindVertexArray.set(this.vao),
                M && M.bind(),
                x && x.dynamicDraw && x.bind(),
                I && I.bind(),
                z && z.bind());
          }
          freshBind(a, d, f, g, x, E, M, I) {
            let z = a.numAttributes,
              B = this.context,
              U = B.gl;
            this.vao && this.destroy(),
              (this.vao = B.createVertexArray()),
              B.bindVertexArray.set(this.vao),
              (this.boundProgram = a),
              (this.boundLayoutVertexBuffer = d),
              (this.boundPaintVertexBuffers = f),
              (this.boundIndexBuffer = g),
              (this.boundVertexOffset = x),
              (this.boundDynamicVertexBuffer = E),
              (this.boundDynamicVertexBuffer2 = M),
              (this.boundDynamicVertexBuffer3 = I),
              d.enableAttributes(U, a);
            for (let Z of f) Z.enableAttributes(U, a);
            E && E.enableAttributes(U, a),
              M && M.enableAttributes(U, a),
              I && I.enableAttributes(U, a),
              d.bind(),
              d.setVertexAttribPointers(U, a, x);
            for (let Z of f) Z.bind(), Z.setVertexAttribPointers(U, a, x);
            E && (E.bind(), E.setVertexAttribPointers(U, a, x)),
              g && g.bind(),
              M && (M.bind(), M.setVertexAttribPointers(U, a, x)),
              I && (I.bind(), I.setVertexAttribPointers(U, a, x)),
              (B.currentNumAttributes = z);
          }
          destroy() {
            this.vao &&
              (this.context.deleteVertexArray(this.vao), (this.vao = null));
          }
        }
        function G(v) {
          let a = [];
          for (let d = 0; d < v.length; d++) {
            if (v[d] === null) continue;
            let f = v[d].split(" ");
            a.push(f.pop());
          }
          return a;
        }
        class Me {
          constructor(a, d, f, g, x, E) {
            let M = a.gl;
            this.program = M.createProgram();
            let I = G(d.staticAttributes),
              z = f ? f.getBinderAttributes() : [],
              B = I.concat(z),
              U = ue.prelude.staticUniforms ? G(ue.prelude.staticUniforms) : [],
              Z = d.staticUniforms ? G(d.staticUniforms) : [],
              se = f ? f.getBinderUniforms() : [],
              oe = U.concat(Z).concat(se),
              le = [];
            for (let Ve of oe) le.indexOf(Ve) < 0 && le.push(Ve);
            let ee = f ? f.defines() : [];
            x && ee.push("#define OVERDRAW_INSPECTOR;"),
              E && ee.push("#define TERRAIN3D;");
            let _e = ee.concat(ue.prelude.fragmentSource, d.fragmentSource)
                .join(`
`),
              Be = ee.concat(ue.prelude.vertexSource, d.vertexSource).join(`
`),
              he = M.createShader(M.FRAGMENT_SHADER);
            if (M.isContextLost()) return void (this.failedToCreate = !0);
            if (
              (M.shaderSource(he, _e),
              M.compileShader(he),
              !M.getShaderParameter(he, M.COMPILE_STATUS))
            )
              throw new Error(
                `Could not compile fragment shader: ${M.getShaderInfoLog(he)}`
              );
            M.attachShader(this.program, he);
            let Ee = M.createShader(M.VERTEX_SHADER);
            if (M.isContextLost()) return void (this.failedToCreate = !0);
            if (
              (M.shaderSource(Ee, Be),
              M.compileShader(Ee),
              !M.getShaderParameter(Ee, M.COMPILE_STATUS))
            )
              throw new Error(
                `Could not compile vertex shader: ${M.getShaderInfoLog(Ee)}`
              );
            M.attachShader(this.program, Ee), (this.attributes = {});
            let Ue = {};
            this.numAttributes = B.length;
            for (let Ve = 0; Ve < this.numAttributes; Ve++)
              B[Ve] &&
                (M.bindAttribLocation(this.program, Ve, B[Ve]),
                (this.attributes[B[Ve]] = Ve));
            if (
              (M.linkProgram(this.program),
              !M.getProgramParameter(this.program, M.LINK_STATUS))
            )
              throw new Error(
                `Program failed to link: ${M.getProgramInfoLog(this.program)}`
              );
            M.deleteShader(Ee), M.deleteShader(he);
            for (let Ve = 0; Ve < le.length; Ve++) {
              let Ge = le[Ve];
              if (Ge && !Ue[Ge]) {
                let ot = M.getUniformLocation(this.program, Ge);
                ot && (Ue[Ge] = ot);
              }
            }
            (this.fixedUniforms = g(a, Ue)),
              (this.terrainUniforms = ((Ve, Ge) => ({
                u_depth: new n.aG(Ve, Ge.u_depth),
                u_terrain: new n.aG(Ve, Ge.u_terrain),
                u_terrain_dim: new n.aH(Ve, Ge.u_terrain_dim),
                u_terrain_matrix: new n.aI(Ve, Ge.u_terrain_matrix),
                u_terrain_unpack: new n.aJ(Ve, Ge.u_terrain_unpack),
                u_terrain_exaggeration: new n.aH(Ve, Ge.u_terrain_exaggeration),
              }))(a, Ue)),
              (this.binderUniforms = f ? f.getUniforms(a, Ue) : []);
          }
          draw(a, d, f, g, x, E, M, I, z, B, U, Z, se, oe, le, ee, _e, Be) {
            let he = a.gl;
            if (this.failedToCreate) return;
            if (
              (a.program.set(this.program),
              a.setDepthMode(f),
              a.setStencilMode(g),
              a.setColorMode(x),
              a.setCullFace(E),
              I)
            ) {
              a.activeTexture.set(he.TEXTURE2),
                he.bindTexture(he.TEXTURE_2D, I.depthTexture),
                a.activeTexture.set(he.TEXTURE3),
                he.bindTexture(he.TEXTURE_2D, I.texture);
              for (let Ue in this.terrainUniforms)
                this.terrainUniforms[Ue].set(I[Ue]);
            }
            for (let Ue in this.fixedUniforms)
              this.fixedUniforms[Ue].set(M[Ue]);
            le && le.setUniforms(a, this.binderUniforms, se, { zoom: oe });
            let Ee = 0;
            switch (d) {
              case he.LINES:
                Ee = 2;
                break;
              case he.TRIANGLES:
                Ee = 3;
                break;
              case he.LINE_STRIP:
                Ee = 1;
            }
            for (let Ue of Z.get()) {
              let Ve = Ue.vaos || (Ue.vaos = {});
              (Ve[z] || (Ve[z] = new X())).bind(
                a,
                this,
                B,
                le ? le.getPaintVertexBuffers() : [],
                U,
                Ue.vertexOffset,
                ee,
                _e,
                Be
              ),
                he.drawElements(
                  d,
                  Ue.primitiveLength * Ee,
                  he.UNSIGNED_SHORT,
                  Ue.primitiveOffset * Ee * 2
                );
            }
          }
        }
        function ge(v, a, d) {
          let f = 1 / di(d, 1, a.transform.tileZoom),
            g = Math.pow(2, d.tileID.overscaledZ),
            x = (d.tileSize * Math.pow(2, a.transform.tileZoom)) / g,
            E = x * (d.tileID.canonical.x + d.tileID.wrap * g),
            M = x * d.tileID.canonical.y;
          return {
            u_image: 0,
            u_texsize: d.imageAtlasTexture.size,
            u_scale: [f, v.fromScale, v.toScale],
            u_fade: v.t,
            u_pixel_coord_upper: [E >> 16, M >> 16],
            u_pixel_coord_lower: [65535 & E, 65535 & M],
          };
        }
        let Ae = (v, a, d, f) => {
            let g = a.style.light,
              x = g.properties.get("position"),
              E = [x.x, x.y, x.z],
              M = (function () {
                var z = new n.A(9);
                return (
                  n.A != Float32Array &&
                    ((z[1] = 0),
                    (z[2] = 0),
                    (z[3] = 0),
                    (z[5] = 0),
                    (z[6] = 0),
                    (z[7] = 0)),
                  (z[0] = 1),
                  (z[4] = 1),
                  (z[8] = 1),
                  z
                );
              })();
            g.properties.get("anchor") === "viewport" &&
              (function (z, B) {
                var U = Math.sin(B),
                  Z = Math.cos(B);
                (z[0] = Z),
                  (z[1] = U),
                  (z[2] = 0),
                  (z[3] = -U),
                  (z[4] = Z),
                  (z[5] = 0),
                  (z[6] = 0),
                  (z[7] = 0),
                  (z[8] = 1);
              })(M, -a.transform.angle),
              (function (z, B, U) {
                var Z = B[0],
                  se = B[1],
                  oe = B[2];
                (z[0] = Z * U[0] + se * U[3] + oe * U[6]),
                  (z[1] = Z * U[1] + se * U[4] + oe * U[7]),
                  (z[2] = Z * U[2] + se * U[5] + oe * U[8]);
              })(E, E, M);
            let I = g.properties.get("color");
            return {
              u_matrix: v,
              u_lightpos: E,
              u_lightintensity: g.properties.get("intensity"),
              u_lightcolor: [I.r, I.g, I.b],
              u_vertical_gradient: +d,
              u_opacity: f,
            };
          },
          Ke = (v, a, d, f, g, x, E) =>
            n.e(Ae(v, a, d, f), ge(x, a, E), {
              u_height_factor: -Math.pow(2, g.overscaledZ) / E.tileSize / 8,
            }),
          _t = (v) => ({ u_matrix: v }),
          lt = (v, a, d, f) => n.e(_t(v), ge(d, a, f)),
          Ye = (v, a) => ({ u_matrix: v, u_world: a }),
          et = (v, a, d, f, g) => n.e(lt(v, a, d, f), { u_world: g }),
          bt = (v, a, d, f) => {
            let g = v.transform,
              x,
              E;
            if (f.paint.get("circle-pitch-alignment") === "map") {
              let M = di(d, 1, g.zoom);
              (x = !0), (E = [M, M]);
            } else (x = !1), (E = g.pixelsToGLUnits);
            return {
              u_camera_to_center_distance: g.cameraToCenterDistance,
              u_scale_with_map: +(f.paint.get("circle-pitch-scale") === "map"),
              u_matrix: v.translatePosMatrix(
                a.posMatrix,
                d,
                f.paint.get("circle-translate"),
                f.paint.get("circle-translate-anchor")
              ),
              u_pitch_with_map: +x,
              u_device_pixel_ratio: v.pixelRatio,
              u_extrude_scale: E,
            };
          },
          Zi = (v, a, d) => {
            let f = di(d, 1, a.zoom),
              g = Math.pow(2, a.zoom - d.tileID.overscaledZ),
              x = d.tileID.overscaleFactor();
            return {
              u_matrix: v,
              u_camera_to_center_distance: a.cameraToCenterDistance,
              u_pixels_to_tile_units: f,
              u_extrude_scale: [
                a.pixelsToGLUnits[0] / (f * g),
                a.pixelsToGLUnits[1] / (f * g),
              ],
              u_overscale_factor: x,
            };
          },
          Ri = (v, a, d = 1) => ({
            u_matrix: v,
            u_color: a,
            u_overlay: 0,
            u_overlay_scale: d,
          }),
          vr = (v) => ({ u_matrix: v }),
          nr = (v, a, d, f) => ({
            u_matrix: v,
            u_extrude_scale: di(a, 1, d),
            u_intensity: f,
          });
        function Kr(v, a) {
          let d = Math.pow(2, a.canonical.z),
            f = a.canonical.y;
          return [
            new n.Y(0, f / d).toLngLat().lat,
            new n.Y(0, (f + 1) / d).toLngLat().lat,
          ];
        }
        let Hr = (v, a, d, f) => {
            let g = v.transform;
            return {
              u_matrix: Ki(v, a, d, f),
              u_ratio: 1 / di(a, 1, g.zoom),
              u_device_pixel_ratio: v.pixelRatio,
              u_units_to_pixels: [
                1 / g.pixelsToGLUnits[0],
                1 / g.pixelsToGLUnits[1],
              ],
            };
          },
          _r = (v, a, d, f, g) =>
            n.e(Hr(v, a, d, g), { u_image: 0, u_image_height: f }),
          Co = (v, a, d, f, g) => {
            let x = v.transform,
              E = wt(a, x);
            return {
              u_matrix: Ki(v, a, d, g),
              u_texsize: a.imageAtlasTexture.size,
              u_ratio: 1 / di(a, 1, x.zoom),
              u_device_pixel_ratio: v.pixelRatio,
              u_image: 0,
              u_scale: [E, f.fromScale, f.toScale],
              u_fade: f.t,
              u_units_to_pixels: [
                1 / x.pixelsToGLUnits[0],
                1 / x.pixelsToGLUnits[1],
              ],
            };
          },
          Tr = (v, a, d, f, g, x) => {
            let E = v.lineAtlas,
              M = wt(a, v.transform),
              I = d.layout.get("line-cap") === "round",
              z = E.getDash(f.from, I),
              B = E.getDash(f.to, I),
              U = z.width * g.fromScale,
              Z = B.width * g.toScale;
            return n.e(Hr(v, a, d, x), {
              u_patternscale_a: [M / U, -z.height / 2],
              u_patternscale_b: [M / Z, -B.height / 2],
              u_sdfgamma: E.width / (256 * Math.min(U, Z) * v.pixelRatio) / 2,
              u_image: 0,
              u_tex_y_a: z.y,
              u_tex_y_b: B.y,
              u_mix: g.t,
            });
          };
        function wt(v, a) {
          return 1 / di(v, 1, a.tileZoom);
        }
        function Ki(v, a, d, f) {
          return v.translatePosMatrix(
            f ? f.posMatrix : a.tileID.posMatrix,
            a,
            d.paint.get("line-translate"),
            d.paint.get("line-translate-anchor")
          );
        }
        let Fr = (v, a, d, f, g) => {
          return {
            u_matrix: v,
            u_tl_parent: a,
            u_scale_parent: d,
            u_buffer_scale: 1,
            u_fade_t: f.mix,
            u_opacity: f.opacity * g.paint.get("raster-opacity"),
            u_image0: 0,
            u_image1: 1,
            u_brightness_low: g.paint.get("raster-brightness-min"),
            u_brightness_high: g.paint.get("raster-brightness-max"),
            u_saturation_factor:
              ((E = g.paint.get("raster-saturation")),
              E > 0 ? 1 - 1 / (1.001 - E) : -E),
            u_contrast_factor:
              ((x = g.paint.get("raster-contrast")),
              x > 0 ? 1 / (1 - x) : 1 + x),
            u_spin_weights: qn(g.paint.get("raster-hue-rotate")),
          };
          var x, E;
        };
        function qn(v) {
          v *= Math.PI / 180;
          let a = Math.sin(v),
            d = Math.cos(v);
          return [
            (2 * d + 1) / 3,
            (-Math.sqrt(3) * a - d + 1) / 3,
            (Math.sqrt(3) * a - d + 1) / 3,
          ];
        }
        let uo = (v, a, d, f, g, x, E, M, I, z) => {
            let B = g.transform;
            return {
              u_is_size_zoom_constant: +(v === "constant" || v === "source"),
              u_is_size_feature_constant: +(v === "constant" || v === "camera"),
              u_size_t: a ? a.uSizeT : 0,
              u_size: a ? a.uSize : 0,
              u_camera_to_center_distance: B.cameraToCenterDistance,
              u_pitch: (B.pitch / 360) * 2 * Math.PI,
              u_rotate_symbol: +d,
              u_aspect_ratio: B.width / B.height,
              u_fade_change: g.options.fadeDuration ? g.symbolFadeChange : 1,
              u_matrix: x,
              u_label_plane_matrix: E,
              u_coord_matrix: M,
              u_is_text: +I,
              u_pitch_with_map: +f,
              u_texsize: z,
              u_texture: 0,
            };
          },
          Eo = (v, a, d, f, g, x, E, M, I, z, B) => {
            let U = g.transform;
            return n.e(uo(v, a, d, f, g, x, E, M, I, z), {
              u_gamma_scale: f
                ? Math.cos(U._pitch) * U.cameraToCenterDistance
                : 1,
              u_device_pixel_ratio: g.pixelRatio,
              u_is_halo: +B,
            });
          },
          Qs = (v, a, d, f, g, x, E, M, I, z) =>
            n.e(Eo(v, a, d, f, g, x, E, M, !0, I, !0), {
              u_texsize_icon: z,
              u_texture_icon: 1,
            }),
          Ts = (v, a, d) => ({ u_matrix: v, u_opacity: a, u_color: d }),
          qo = (v, a, d, f, g, x) =>
            n.e(
              (function (E, M, I, z) {
                let B = I.imageManager.getPattern(E.from.toString()),
                  U = I.imageManager.getPattern(E.to.toString()),
                  { width: Z, height: se } = I.imageManager.getPixelSize(),
                  oe = Math.pow(2, z.tileID.overscaledZ),
                  le = (z.tileSize * Math.pow(2, I.transform.tileZoom)) / oe,
                  ee = le * (z.tileID.canonical.x + z.tileID.wrap * oe),
                  _e = le * z.tileID.canonical.y;
                return {
                  u_image: 0,
                  u_pattern_tl_a: B.tl,
                  u_pattern_br_a: B.br,
                  u_pattern_tl_b: U.tl,
                  u_pattern_br_b: U.br,
                  u_texsize: [Z, se],
                  u_mix: M.t,
                  u_pattern_size_a: B.displaySize,
                  u_pattern_size_b: U.displaySize,
                  u_scale_a: M.fromScale,
                  u_scale_b: M.toScale,
                  u_tile_units_to_pixels: 1 / di(z, 1, I.transform.tileZoom),
                  u_pixel_coord_upper: [ee >> 16, _e >> 16],
                  u_pixel_coord_lower: [65535 & ee, 65535 & _e],
                };
              })(f, x, d, g),
              { u_matrix: v, u_opacity: a }
            ),
          Xn = {
            fillExtrusion: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_lightpos: new n.aK(v, a.u_lightpos),
              u_lightintensity: new n.aH(v, a.u_lightintensity),
              u_lightcolor: new n.aK(v, a.u_lightcolor),
              u_vertical_gradient: new n.aH(v, a.u_vertical_gradient),
              u_opacity: new n.aH(v, a.u_opacity),
            }),
            fillExtrusionPattern: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_lightpos: new n.aK(v, a.u_lightpos),
              u_lightintensity: new n.aH(v, a.u_lightintensity),
              u_lightcolor: new n.aK(v, a.u_lightcolor),
              u_vertical_gradient: new n.aH(v, a.u_vertical_gradient),
              u_height_factor: new n.aH(v, a.u_height_factor),
              u_image: new n.aG(v, a.u_image),
              u_texsize: new n.aL(v, a.u_texsize),
              u_pixel_coord_upper: new n.aL(v, a.u_pixel_coord_upper),
              u_pixel_coord_lower: new n.aL(v, a.u_pixel_coord_lower),
              u_scale: new n.aK(v, a.u_scale),
              u_fade: new n.aH(v, a.u_fade),
              u_opacity: new n.aH(v, a.u_opacity),
            }),
            fill: (v, a) => ({ u_matrix: new n.aI(v, a.u_matrix) }),
            fillPattern: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_image: new n.aG(v, a.u_image),
              u_texsize: new n.aL(v, a.u_texsize),
              u_pixel_coord_upper: new n.aL(v, a.u_pixel_coord_upper),
              u_pixel_coord_lower: new n.aL(v, a.u_pixel_coord_lower),
              u_scale: new n.aK(v, a.u_scale),
              u_fade: new n.aH(v, a.u_fade),
            }),
            fillOutline: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_world: new n.aL(v, a.u_world),
            }),
            fillOutlinePattern: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_world: new n.aL(v, a.u_world),
              u_image: new n.aG(v, a.u_image),
              u_texsize: new n.aL(v, a.u_texsize),
              u_pixel_coord_upper: new n.aL(v, a.u_pixel_coord_upper),
              u_pixel_coord_lower: new n.aL(v, a.u_pixel_coord_lower),
              u_scale: new n.aK(v, a.u_scale),
              u_fade: new n.aH(v, a.u_fade),
            }),
            circle: (v, a) => ({
              u_camera_to_center_distance: new n.aH(
                v,
                a.u_camera_to_center_distance
              ),
              u_scale_with_map: new n.aG(v, a.u_scale_with_map),
              u_pitch_with_map: new n.aG(v, a.u_pitch_with_map),
              u_extrude_scale: new n.aL(v, a.u_extrude_scale),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_matrix: new n.aI(v, a.u_matrix),
            }),
            collisionBox: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_camera_to_center_distance: new n.aH(
                v,
                a.u_camera_to_center_distance
              ),
              u_pixels_to_tile_units: new n.aH(v, a.u_pixels_to_tile_units),
              u_extrude_scale: new n.aL(v, a.u_extrude_scale),
              u_overscale_factor: new n.aH(v, a.u_overscale_factor),
            }),
            collisionCircle: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_inv_matrix: new n.aI(v, a.u_inv_matrix),
              u_camera_to_center_distance: new n.aH(
                v,
                a.u_camera_to_center_distance
              ),
              u_viewport_size: new n.aL(v, a.u_viewport_size),
            }),
            debug: (v, a) => ({
              u_color: new n.aM(v, a.u_color),
              u_matrix: new n.aI(v, a.u_matrix),
              u_overlay: new n.aG(v, a.u_overlay),
              u_overlay_scale: new n.aH(v, a.u_overlay_scale),
            }),
            clippingMask: (v, a) => ({ u_matrix: new n.aI(v, a.u_matrix) }),
            heatmap: (v, a) => ({
              u_extrude_scale: new n.aH(v, a.u_extrude_scale),
              u_intensity: new n.aH(v, a.u_intensity),
              u_matrix: new n.aI(v, a.u_matrix),
            }),
            heatmapTexture: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_world: new n.aL(v, a.u_world),
              u_image: new n.aG(v, a.u_image),
              u_color_ramp: new n.aG(v, a.u_color_ramp),
              u_opacity: new n.aH(v, a.u_opacity),
            }),
            hillshade: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_image: new n.aG(v, a.u_image),
              u_latrange: new n.aL(v, a.u_latrange),
              u_light: new n.aL(v, a.u_light),
              u_shadow: new n.aM(v, a.u_shadow),
              u_highlight: new n.aM(v, a.u_highlight),
              u_accent: new n.aM(v, a.u_accent),
            }),
            hillshadePrepare: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_image: new n.aG(v, a.u_image),
              u_dimension: new n.aL(v, a.u_dimension),
              u_zoom: new n.aH(v, a.u_zoom),
              u_unpack: new n.aJ(v, a.u_unpack),
            }),
            line: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_ratio: new n.aH(v, a.u_ratio),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_units_to_pixels: new n.aL(v, a.u_units_to_pixels),
            }),
            lineGradient: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_ratio: new n.aH(v, a.u_ratio),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_units_to_pixels: new n.aL(v, a.u_units_to_pixels),
              u_image: new n.aG(v, a.u_image),
              u_image_height: new n.aH(v, a.u_image_height),
            }),
            linePattern: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_texsize: new n.aL(v, a.u_texsize),
              u_ratio: new n.aH(v, a.u_ratio),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_image: new n.aG(v, a.u_image),
              u_units_to_pixels: new n.aL(v, a.u_units_to_pixels),
              u_scale: new n.aK(v, a.u_scale),
              u_fade: new n.aH(v, a.u_fade),
            }),
            lineSDF: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_ratio: new n.aH(v, a.u_ratio),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_units_to_pixels: new n.aL(v, a.u_units_to_pixels),
              u_patternscale_a: new n.aL(v, a.u_patternscale_a),
              u_patternscale_b: new n.aL(v, a.u_patternscale_b),
              u_sdfgamma: new n.aH(v, a.u_sdfgamma),
              u_image: new n.aG(v, a.u_image),
              u_tex_y_a: new n.aH(v, a.u_tex_y_a),
              u_tex_y_b: new n.aH(v, a.u_tex_y_b),
              u_mix: new n.aH(v, a.u_mix),
            }),
            raster: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_tl_parent: new n.aL(v, a.u_tl_parent),
              u_scale_parent: new n.aH(v, a.u_scale_parent),
              u_buffer_scale: new n.aH(v, a.u_buffer_scale),
              u_fade_t: new n.aH(v, a.u_fade_t),
              u_opacity: new n.aH(v, a.u_opacity),
              u_image0: new n.aG(v, a.u_image0),
              u_image1: new n.aG(v, a.u_image1),
              u_brightness_low: new n.aH(v, a.u_brightness_low),
              u_brightness_high: new n.aH(v, a.u_brightness_high),
              u_saturation_factor: new n.aH(v, a.u_saturation_factor),
              u_contrast_factor: new n.aH(v, a.u_contrast_factor),
              u_spin_weights: new n.aK(v, a.u_spin_weights),
            }),
            symbolIcon: (v, a) => ({
              u_is_size_zoom_constant: new n.aG(v, a.u_is_size_zoom_constant),
              u_is_size_feature_constant: new n.aG(
                v,
                a.u_is_size_feature_constant
              ),
              u_size_t: new n.aH(v, a.u_size_t),
              u_size: new n.aH(v, a.u_size),
              u_camera_to_center_distance: new n.aH(
                v,
                a.u_camera_to_center_distance
              ),
              u_pitch: new n.aH(v, a.u_pitch),
              u_rotate_symbol: new n.aG(v, a.u_rotate_symbol),
              u_aspect_ratio: new n.aH(v, a.u_aspect_ratio),
              u_fade_change: new n.aH(v, a.u_fade_change),
              u_matrix: new n.aI(v, a.u_matrix),
              u_label_plane_matrix: new n.aI(v, a.u_label_plane_matrix),
              u_coord_matrix: new n.aI(v, a.u_coord_matrix),
              u_is_text: new n.aG(v, a.u_is_text),
              u_pitch_with_map: new n.aG(v, a.u_pitch_with_map),
              u_texsize: new n.aL(v, a.u_texsize),
              u_texture: new n.aG(v, a.u_texture),
            }),
            symbolSDF: (v, a) => ({
              u_is_size_zoom_constant: new n.aG(v, a.u_is_size_zoom_constant),
              u_is_size_feature_constant: new n.aG(
                v,
                a.u_is_size_feature_constant
              ),
              u_size_t: new n.aH(v, a.u_size_t),
              u_size: new n.aH(v, a.u_size),
              u_camera_to_center_distance: new n.aH(
                v,
                a.u_camera_to_center_distance
              ),
              u_pitch: new n.aH(v, a.u_pitch),
              u_rotate_symbol: new n.aG(v, a.u_rotate_symbol),
              u_aspect_ratio: new n.aH(v, a.u_aspect_ratio),
              u_fade_change: new n.aH(v, a.u_fade_change),
              u_matrix: new n.aI(v, a.u_matrix),
              u_label_plane_matrix: new n.aI(v, a.u_label_plane_matrix),
              u_coord_matrix: new n.aI(v, a.u_coord_matrix),
              u_is_text: new n.aG(v, a.u_is_text),
              u_pitch_with_map: new n.aG(v, a.u_pitch_with_map),
              u_texsize: new n.aL(v, a.u_texsize),
              u_texture: new n.aG(v, a.u_texture),
              u_gamma_scale: new n.aH(v, a.u_gamma_scale),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_is_halo: new n.aG(v, a.u_is_halo),
            }),
            symbolTextAndIcon: (v, a) => ({
              u_is_size_zoom_constant: new n.aG(v, a.u_is_size_zoom_constant),
              u_is_size_feature_constant: new n.aG(
                v,
                a.u_is_size_feature_constant
              ),
              u_size_t: new n.aH(v, a.u_size_t),
              u_size: new n.aH(v, a.u_size),
              u_camera_to_center_distance: new n.aH(
                v,
                a.u_camera_to_center_distance
              ),
              u_pitch: new n.aH(v, a.u_pitch),
              u_rotate_symbol: new n.aG(v, a.u_rotate_symbol),
              u_aspect_ratio: new n.aH(v, a.u_aspect_ratio),
              u_fade_change: new n.aH(v, a.u_fade_change),
              u_matrix: new n.aI(v, a.u_matrix),
              u_label_plane_matrix: new n.aI(v, a.u_label_plane_matrix),
              u_coord_matrix: new n.aI(v, a.u_coord_matrix),
              u_is_text: new n.aG(v, a.u_is_text),
              u_pitch_with_map: new n.aG(v, a.u_pitch_with_map),
              u_texsize: new n.aL(v, a.u_texsize),
              u_texsize_icon: new n.aL(v, a.u_texsize_icon),
              u_texture: new n.aG(v, a.u_texture),
              u_texture_icon: new n.aG(v, a.u_texture_icon),
              u_gamma_scale: new n.aH(v, a.u_gamma_scale),
              u_device_pixel_ratio: new n.aH(v, a.u_device_pixel_ratio),
              u_is_halo: new n.aG(v, a.u_is_halo),
            }),
            background: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_opacity: new n.aH(v, a.u_opacity),
              u_color: new n.aM(v, a.u_color),
            }),
            backgroundPattern: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_opacity: new n.aH(v, a.u_opacity),
              u_image: new n.aG(v, a.u_image),
              u_pattern_tl_a: new n.aL(v, a.u_pattern_tl_a),
              u_pattern_br_a: new n.aL(v, a.u_pattern_br_a),
              u_pattern_tl_b: new n.aL(v, a.u_pattern_tl_b),
              u_pattern_br_b: new n.aL(v, a.u_pattern_br_b),
              u_texsize: new n.aL(v, a.u_texsize),
              u_mix: new n.aH(v, a.u_mix),
              u_pattern_size_a: new n.aL(v, a.u_pattern_size_a),
              u_pattern_size_b: new n.aL(v, a.u_pattern_size_b),
              u_scale_a: new n.aH(v, a.u_scale_a),
              u_scale_b: new n.aH(v, a.u_scale_b),
              u_pixel_coord_upper: new n.aL(v, a.u_pixel_coord_upper),
              u_pixel_coord_lower: new n.aL(v, a.u_pixel_coord_lower),
              u_tile_units_to_pixels: new n.aH(v, a.u_tile_units_to_pixels),
            }),
            terrain: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_texture: new n.aG(v, a.u_texture),
              u_ele_delta: new n.aH(v, a.u_ele_delta),
            }),
            terrainDepth: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_ele_delta: new n.aH(v, a.u_ele_delta),
            }),
            terrainCoords: (v, a) => ({
              u_matrix: new n.aI(v, a.u_matrix),
              u_texture: new n.aG(v, a.u_texture),
              u_terrain_coords_id: new n.aH(v, a.u_terrain_coords_id),
              u_ele_delta: new n.aH(v, a.u_ele_delta),
            }),
          };
        class ho {
          constructor(a, d, f) {
            this.context = a;
            let g = a.gl;
            (this.buffer = g.createBuffer()),
              (this.dynamicDraw = !!f),
              this.context.unbindVAO(),
              a.bindElementBuffer.set(this.buffer),
              g.bufferData(
                g.ELEMENT_ARRAY_BUFFER,
                d.arrayBuffer,
                this.dynamicDraw ? g.DYNAMIC_DRAW : g.STATIC_DRAW
              ),
              this.dynamicDraw || delete d.arrayBuffer;
          }
          bind() {
            this.context.bindElementBuffer.set(this.buffer);
          }
          updateData(a) {
            let d = this.context.gl;
            if (!this.dynamicDraw)
              throw new Error(
                "Attempted to update data while not in dynamic mode."
              );
            this.context.unbindVAO(),
              this.bind(),
              d.bufferSubData(d.ELEMENT_ARRAY_BUFFER, 0, a.arrayBuffer);
          }
          destroy() {
            this.buffer &&
              (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
          }
        }
        let Gs = {
          Int8: "BYTE",
          Uint8: "UNSIGNED_BYTE",
          Int16: "SHORT",
          Uint16: "UNSIGNED_SHORT",
          Int32: "INT",
          Uint32: "UNSIGNED_INT",
          Float32: "FLOAT",
        };
        class $n {
          constructor(a, d, f, g) {
            (this.length = d.length),
              (this.attributes = f),
              (this.itemSize = d.bytesPerElement),
              (this.dynamicDraw = g),
              (this.context = a);
            let x = a.gl;
            (this.buffer = x.createBuffer()),
              a.bindVertexBuffer.set(this.buffer),
              x.bufferData(
                x.ARRAY_BUFFER,
                d.arrayBuffer,
                this.dynamicDraw ? x.DYNAMIC_DRAW : x.STATIC_DRAW
              ),
              this.dynamicDraw || delete d.arrayBuffer;
          }
          bind() {
            this.context.bindVertexBuffer.set(this.buffer);
          }
          updateData(a) {
            if (a.length !== this.length)
              throw new Error(
                `Length of new data is ${a.length}, which doesn't match current length of ${this.length}`
              );
            let d = this.context.gl;
            this.bind(), d.bufferSubData(d.ARRAY_BUFFER, 0, a.arrayBuffer);
          }
          enableAttributes(a, d) {
            for (let f = 0; f < this.attributes.length; f++) {
              let g = d.attributes[this.attributes[f].name];
              g !== void 0 && a.enableVertexAttribArray(g);
            }
          }
          setVertexAttribPointers(a, d, f) {
            for (let g = 0; g < this.attributes.length; g++) {
              let x = this.attributes[g],
                E = d.attributes[x.name];
              E !== void 0 &&
                a.vertexAttribPointer(
                  E,
                  x.components,
                  a[Gs[x.type]],
                  !1,
                  this.itemSize,
                  x.offset + this.itemSize * (f || 0)
                );
            }
          }
          destroy() {
            this.buffer &&
              (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
          }
        }
        let bn = new WeakMap();
        function Ws(v) {
          var a;
          if (bn.has(v)) return bn.get(v);
          {
            let d =
              (a = v.getParameter(v.VERSION)) === null || a === void 0
                ? void 0
                : a.startsWith("WebGL 2.0");
            return bn.set(v, d), d;
          }
        }
        class $i {
          constructor(a) {
            (this.gl = a.gl),
              (this.default = this.getDefault()),
              (this.current = this.default),
              (this.dirty = !1);
          }
          get() {
            return this.current;
          }
          set(a) {}
          getDefault() {
            return this.default;
          }
          setDefault() {
            this.set(this.default);
          }
        }
        class Da extends $i {
          getDefault() {
            return n.aO.transparent;
          }
          set(a) {
            let d = this.current;
            (a.r !== d.r ||
              a.g !== d.g ||
              a.b !== d.b ||
              a.a !== d.a ||
              this.dirty) &&
              (this.gl.clearColor(a.r, a.g, a.b, a.a),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class wl extends $i {
          getDefault() {
            return 1;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.clearDepth(a), (this.current = a), (this.dirty = !1));
          }
        }
        class dc extends $i {
          getDefault() {
            return 0;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.clearStencil(a), (this.current = a), (this.dirty = !1));
          }
        }
        class kl extends $i {
          getDefault() {
            return [!0, !0, !0, !0];
          }
          set(a) {
            let d = this.current;
            (a[0] !== d[0] ||
              a[1] !== d[1] ||
              a[2] !== d[2] ||
              a[3] !== d[3] ||
              this.dirty) &&
              (this.gl.colorMask(a[0], a[1], a[2], a[3]),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class Od extends $i {
          getDefault() {
            return !0;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.depthMask(a), (this.current = a), (this.dirty = !1));
          }
        }
        class Bd extends $i {
          getDefault() {
            return 255;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.stencilMask(a), (this.current = a), (this.dirty = !1));
          }
        }
        class bu extends $i {
          getDefault() {
            return { func: this.gl.ALWAYS, ref: 0, mask: 255 };
          }
          set(a) {
            let d = this.current;
            (a.func !== d.func ||
              a.ref !== d.ref ||
              a.mask !== d.mask ||
              this.dirty) &&
              (this.gl.stencilFunc(a.func, a.ref, a.mask),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class df extends $i {
          getDefault() {
            let a = this.gl;
            return [a.KEEP, a.KEEP, a.KEEP];
          }
          set(a) {
            let d = this.current;
            (a[0] !== d[0] || a[1] !== d[1] || a[2] !== d[2] || this.dirty) &&
              (this.gl.stencilOp(a[0], a[1], a[2]),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class hf extends $i {
          getDefault() {
            return !1;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            a ? d.enable(d.STENCIL_TEST) : d.disable(d.STENCIL_TEST),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class Sl extends $i {
          getDefault() {
            return [0, 1];
          }
          set(a) {
            let d = this.current;
            (a[0] !== d[0] || a[1] !== d[1] || this.dirty) &&
              (this.gl.depthRange(a[0], a[1]),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class o1 extends $i {
          getDefault() {
            return !1;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            a ? d.enable(d.DEPTH_TEST) : d.disable(d.DEPTH_TEST),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class s1 extends $i {
          getDefault() {
            return this.gl.LESS;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.depthFunc(a), (this.current = a), (this.dirty = !1));
          }
        }
        class a1 extends $i {
          getDefault() {
            return !1;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            a ? d.enable(d.BLEND) : d.disable(d.BLEND),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class l1 extends $i {
          getDefault() {
            let a = this.gl;
            return [a.ONE, a.ZERO];
          }
          set(a) {
            let d = this.current;
            (a[0] !== d[0] || a[1] !== d[1] || this.dirty) &&
              (this.gl.blendFunc(a[0], a[1]),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class c1 extends $i {
          getDefault() {
            return n.aO.transparent;
          }
          set(a) {
            let d = this.current;
            (a.r !== d.r ||
              a.g !== d.g ||
              a.b !== d.b ||
              a.a !== d.a ||
              this.dirty) &&
              (this.gl.blendColor(a.r, a.g, a.b, a.a),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class u1 extends $i {
          getDefault() {
            return this.gl.FUNC_ADD;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.blendEquation(a), (this.current = a), (this.dirty = !1));
          }
        }
        class Rd extends $i {
          getDefault() {
            return !1;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            a ? d.enable(d.CULL_FACE) : d.disable(d.CULL_FACE),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class vu extends $i {
          getDefault() {
            return this.gl.BACK;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.cullFace(a), (this.current = a), (this.dirty = !1));
          }
        }
        class Ud extends $i {
          getDefault() {
            return this.gl.CCW;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.frontFace(a), (this.current = a), (this.dirty = !1));
          }
        }
        class Vd extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.useProgram(a), (this.current = a), (this.dirty = !1));
          }
        }
        class Cl extends $i {
          getDefault() {
            return this.gl.TEXTURE0;
          }
          set(a) {
            (a !== this.current || this.dirty) &&
              (this.gl.activeTexture(a), (this.current = a), (this.dirty = !1));
          }
        }
        class pf extends $i {
          getDefault() {
            let a = this.gl;
            return [0, 0, a.drawingBufferWidth, a.drawingBufferHeight];
          }
          set(a) {
            let d = this.current;
            (a[0] !== d[0] ||
              a[1] !== d[1] ||
              a[2] !== d[2] ||
              a[3] !== d[3] ||
              this.dirty) &&
              (this.gl.viewport(a[0], a[1], a[2], a[3]),
              (this.current = a),
              (this.dirty = !1));
          }
        }
        class ff extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.bindFramebuffer(d.FRAMEBUFFER, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class jd extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.bindRenderbuffer(d.RENDERBUFFER, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class La extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.bindTexture(d.TEXTURE_2D, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class mf extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.bindBuffer(d.ARRAY_BUFFER, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class El extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            let d = this.gl;
            d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class Tl extends $i {
          getDefault() {
            return null;
          }
          set(a) {
            var d;
            if (a === this.current && !this.dirty) return;
            let f = this.gl;
            Ws(f)
              ? f.bindVertexArray(a)
              : (d = f.getExtension("OES_vertex_array_object")) === null ||
                d === void 0 ||
                d.bindVertexArrayOES(a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class gf extends $i {
          getDefault() {
            return 4;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.pixelStorei(d.UNPACK_ALIGNMENT, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class Hd extends $i {
          getDefault() {
            return !1;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class ir extends $i {
          getDefault() {
            return !1;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            let d = this.gl;
            d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL, a),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class Ml extends $i {
          constructor(a, d) {
            super(a), (this.context = a), (this.parent = d);
          }
          getDefault() {
            return null;
          }
        }
        class d1 extends Ml {
          setDirty() {
            this.dirty = !0;
          }
          set(a) {
            if (a === this.current && !this.dirty) return;
            this.context.bindFramebuffer.set(this.parent);
            let d = this.gl;
            d.framebufferTexture2D(
              d.FRAMEBUFFER,
              d.COLOR_ATTACHMENT0,
              d.TEXTURE_2D,
              a,
              0
            ),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class yf extends Ml {
          set(a) {
            if (a === this.current && !this.dirty) return;
            this.context.bindFramebuffer.set(this.parent);
            let d = this.gl;
            d.framebufferRenderbuffer(
              d.FRAMEBUFFER,
              d.DEPTH_ATTACHMENT,
              d.RENDERBUFFER,
              a
            ),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class hc extends Ml {
          set(a) {
            if (a === this.current && !this.dirty) return;
            this.context.bindFramebuffer.set(this.parent);
            let d = this.gl;
            d.framebufferRenderbuffer(
              d.FRAMEBUFFER,
              d.DEPTH_STENCIL_ATTACHMENT,
              d.RENDERBUFFER,
              a
            ),
              (this.current = a),
              (this.dirty = !1);
          }
        }
        class h1 {
          constructor(a, d, f, g, x) {
            (this.context = a), (this.width = d), (this.height = f);
            let E = a.gl,
              M = (this.framebuffer = E.createFramebuffer());
            if (((this.colorAttachment = new d1(a, M)), g))
              this.depthAttachment = x ? new hc(a, M) : new yf(a, M);
            else if (x) throw new Error("Stencil cannot be set without depth");
            if (
              E.checkFramebufferStatus(E.FRAMEBUFFER) !== E.FRAMEBUFFER_COMPLETE
            )
              throw new Error("Framebuffer is not complete");
          }
          destroy() {
            let a = this.context.gl,
              d = this.colorAttachment.get();
            if ((d && a.deleteTexture(d), this.depthAttachment)) {
              let f = this.depthAttachment.get();
              f && a.deleteRenderbuffer(f);
            }
            a.deleteFramebuffer(this.framebuffer);
          }
        }
        class sn {
          constructor(a, d, f) {
            (this.blendFunction = a), (this.blendColor = d), (this.mask = f);
          }
        }
        (sn.Replace = [1, 0]),
          (sn.disabled = new sn(sn.Replace, n.aO.transparent, [
            !1,
            !1,
            !1,
            !1,
          ])),
          (sn.unblended = new sn(sn.Replace, n.aO.transparent, [
            !0,
            !0,
            !0,
            !0,
          ])),
          (sn.alphaBlended = new sn([1, 771], n.aO.transparent, [
            !0,
            !0,
            !0,
            !0,
          ]));
        class bf {
          constructor(a) {
            var d, f;
            if (
              ((this.gl = a),
              (this.clearColor = new Da(this)),
              (this.clearDepth = new wl(this)),
              (this.clearStencil = new dc(this)),
              (this.colorMask = new kl(this)),
              (this.depthMask = new Od(this)),
              (this.stencilMask = new Bd(this)),
              (this.stencilFunc = new bu(this)),
              (this.stencilOp = new df(this)),
              (this.stencilTest = new hf(this)),
              (this.depthRange = new Sl(this)),
              (this.depthTest = new o1(this)),
              (this.depthFunc = new s1(this)),
              (this.blend = new a1(this)),
              (this.blendFunc = new l1(this)),
              (this.blendColor = new c1(this)),
              (this.blendEquation = new u1(this)),
              (this.cullFace = new Rd(this)),
              (this.cullFaceSide = new vu(this)),
              (this.frontFace = new Ud(this)),
              (this.program = new Vd(this)),
              (this.activeTexture = new Cl(this)),
              (this.viewport = new pf(this)),
              (this.bindFramebuffer = new ff(this)),
              (this.bindRenderbuffer = new jd(this)),
              (this.bindTexture = new La(this)),
              (this.bindVertexBuffer = new mf(this)),
              (this.bindElementBuffer = new El(this)),
              (this.bindVertexArray = new Tl(this)),
              (this.pixelStoreUnpack = new gf(this)),
              (this.pixelStoreUnpackPremultiplyAlpha = new Hd(this)),
              (this.pixelStoreUnpackFlipY = new ir(this)),
              (this.extTextureFilterAnisotropic =
                a.getExtension("EXT_texture_filter_anisotropic") ||
                a.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                a.getExtension("WEBKIT_EXT_texture_filter_anisotropic")),
              this.extTextureFilterAnisotropic &&
                (this.extTextureFilterAnisotropicMax = a.getParameter(
                  this.extTextureFilterAnisotropic
                    .MAX_TEXTURE_MAX_ANISOTROPY_EXT
                )),
              (this.maxTextureSize = a.getParameter(a.MAX_TEXTURE_SIZE)),
              Ws(a))
            ) {
              this.HALF_FLOAT = a.HALF_FLOAT;
              let g = a.getExtension("EXT_color_buffer_half_float");
              (this.RGBA16F =
                (d = a.RGBA16F) !== null && d !== void 0 ? d : g?.RGBA16F_EXT),
                (this.RGB16F =
                  (f = a.RGB16F) !== null && f !== void 0 ? f : g?.RGB16F_EXT),
                a.getExtension("EXT_color_buffer_float");
            } else {
              a.getExtension("EXT_color_buffer_half_float"),
                a.getExtension("OES_texture_half_float_linear");
              let g = a.getExtension("OES_texture_half_float");
              this.HALF_FLOAT = g?.HALF_FLOAT_OES;
            }
          }
          setDefault() {
            this.unbindVAO(),
              this.clearColor.setDefault(),
              this.clearDepth.setDefault(),
              this.clearStencil.setDefault(),
              this.colorMask.setDefault(),
              this.depthMask.setDefault(),
              this.stencilMask.setDefault(),
              this.stencilFunc.setDefault(),
              this.stencilOp.setDefault(),
              this.stencilTest.setDefault(),
              this.depthRange.setDefault(),
              this.depthTest.setDefault(),
              this.depthFunc.setDefault(),
              this.blend.setDefault(),
              this.blendFunc.setDefault(),
              this.blendColor.setDefault(),
              this.blendEquation.setDefault(),
              this.cullFace.setDefault(),
              this.cullFaceSide.setDefault(),
              this.frontFace.setDefault(),
              this.program.setDefault(),
              this.activeTexture.setDefault(),
              this.bindFramebuffer.setDefault(),
              this.pixelStoreUnpack.setDefault(),
              this.pixelStoreUnpackPremultiplyAlpha.setDefault(),
              this.pixelStoreUnpackFlipY.setDefault();
          }
          setDirty() {
            (this.clearColor.dirty = !0),
              (this.clearDepth.dirty = !0),
              (this.clearStencil.dirty = !0),
              (this.colorMask.dirty = !0),
              (this.depthMask.dirty = !0),
              (this.stencilMask.dirty = !0),
              (this.stencilFunc.dirty = !0),
              (this.stencilOp.dirty = !0),
              (this.stencilTest.dirty = !0),
              (this.depthRange.dirty = !0),
              (this.depthTest.dirty = !0),
              (this.depthFunc.dirty = !0),
              (this.blend.dirty = !0),
              (this.blendFunc.dirty = !0),
              (this.blendColor.dirty = !0),
              (this.blendEquation.dirty = !0),
              (this.cullFace.dirty = !0),
              (this.cullFaceSide.dirty = !0),
              (this.frontFace.dirty = !0),
              (this.program.dirty = !0),
              (this.activeTexture.dirty = !0),
              (this.viewport.dirty = !0),
              (this.bindFramebuffer.dirty = !0),
              (this.bindRenderbuffer.dirty = !0),
              (this.bindTexture.dirty = !0),
              (this.bindVertexBuffer.dirty = !0),
              (this.bindElementBuffer.dirty = !0),
              (this.bindVertexArray.dirty = !0),
              (this.pixelStoreUnpack.dirty = !0),
              (this.pixelStoreUnpackPremultiplyAlpha.dirty = !0),
              (this.pixelStoreUnpackFlipY.dirty = !0);
          }
          createIndexBuffer(a, d) {
            return new ho(this, a, d);
          }
          createVertexBuffer(a, d, f) {
            return new $n(this, a, d, f);
          }
          createRenderbuffer(a, d, f) {
            let g = this.gl,
              x = g.createRenderbuffer();
            return (
              this.bindRenderbuffer.set(x),
              g.renderbufferStorage(g.RENDERBUFFER, a, d, f),
              this.bindRenderbuffer.set(null),
              x
            );
          }
          createFramebuffer(a, d, f, g) {
            return new h1(this, a, d, f, g);
          }
          clear({ color: a, depth: d, stencil: f }) {
            let g = this.gl,
              x = 0;
            a &&
              ((x |= g.COLOR_BUFFER_BIT),
              this.clearColor.set(a),
              this.colorMask.set([!0, !0, !0, !0])),
              d !== void 0 &&
                ((x |= g.DEPTH_BUFFER_BIT),
                this.depthRange.set([0, 1]),
                this.clearDepth.set(d),
                this.depthMask.set(!0)),
              f !== void 0 &&
                ((x |= g.STENCIL_BUFFER_BIT),
                this.clearStencil.set(f),
                this.stencilMask.set(255)),
              g.clear(x);
          }
          setCullFace(a) {
            a.enable === !1
              ? this.cullFace.set(!1)
              : (this.cullFace.set(!0),
                this.cullFaceSide.set(a.mode),
                this.frontFace.set(a.frontFace));
          }
          setDepthMode(a) {
            a.func !== this.gl.ALWAYS || a.mask
              ? (this.depthTest.set(!0),
                this.depthFunc.set(a.func),
                this.depthMask.set(a.mask),
                this.depthRange.set(a.range))
              : this.depthTest.set(!1);
          }
          setStencilMode(a) {
            a.test.func !== this.gl.ALWAYS || a.mask
              ? (this.stencilTest.set(!0),
                this.stencilMask.set(a.mask),
                this.stencilOp.set([a.fail, a.depthFail, a.pass]),
                this.stencilFunc.set({
                  func: a.test.func,
                  ref: a.ref,
                  mask: a.test.mask,
                }))
              : this.stencilTest.set(!1);
          }
          setColorMode(a) {
            n.aD(a.blendFunction, sn.Replace)
              ? this.blend.set(!1)
              : (this.blend.set(!0),
                this.blendFunc.set(a.blendFunction),
                this.blendColor.set(a.blendColor)),
              this.colorMask.set(a.mask);
          }
          createVertexArray() {
            var a;
            return Ws(this.gl)
              ? this.gl.createVertexArray()
              : (a = this.gl.getExtension("OES_vertex_array_object")) ===
                  null || a === void 0
              ? void 0
              : a.createVertexArrayOES();
          }
          deleteVertexArray(a) {
            var d;
            return Ws(this.gl)
              ? this.gl.deleteVertexArray(a)
              : (d = this.gl.getExtension("OES_vertex_array_object")) ===
                  null || d === void 0
              ? void 0
              : d.deleteVertexArrayOES(a);
          }
          unbindVAO() {
            this.bindVertexArray.set(null);
          }
        }
        class Gi {
          constructor(a, d, f) {
            (this.func = a), (this.mask = d), (this.range = f);
          }
        }
        (Gi.ReadOnly = !1),
          (Gi.ReadWrite = !0),
          (Gi.disabled = new Gi(519, Gi.ReadOnly, [0, 1]));
        let pc = 7680;
        class Sr {
          constructor(a, d, f, g, x, E) {
            (this.test = a),
              (this.ref = d),
              (this.mask = f),
              (this.fail = g),
              (this.depthFail = x),
              (this.pass = E);
          }
        }
        Sr.disabled = new Sr({ func: 519, mask: 0 }, 0, 0, pc, pc, pc);
        class xr {
          constructor(a, d, f) {
            (this.enable = a), (this.mode = d), (this.frontFace = f);
          }
        }
        let Al;
        function _u(v, a, d, f, g, x, E) {
          let M = v.context,
            I = M.gl,
            z = v.useProgram("collisionBox"),
            B = [],
            U = 0,
            Z = 0;
          for (let he = 0; he < f.length; he++) {
            let Ee = f[he],
              Ue = a.getTile(Ee),
              Ve = Ue.getBucket(d);
            if (!Ve) continue;
            let Ge = Ee.posMatrix;
            (g[0] === 0 && g[1] === 0) ||
              (Ge = v.translatePosMatrix(Ee.posMatrix, Ue, g, x));
            let ot = E ? Ve.textCollisionBox : Ve.iconCollisionBox,
              rt = Ve.collisionCircleArray;
            if (rt.length > 0) {
              let nt = n.F(),
                Ft = Ge;
              n.aP(nt, Ve.placementInvProjMatrix, v.transform.glCoordMatrix),
                n.aP(nt, nt, Ve.placementViewportMatrix),
                B.push({
                  circleArray: rt,
                  circleOffset: Z,
                  transform: Ft,
                  invTransform: nt,
                  coord: Ee,
                }),
                (U += rt.length / 4),
                (Z = U);
            }
            ot &&
              z.draw(
                M,
                I.LINES,
                Gi.disabled,
                Sr.disabled,
                v.colorModeForRenderPass(),
                xr.disabled,
                Zi(Ge, v.transform, Ue),
                v.style.map.terrain && v.style.map.terrain.getTerrainData(Ee),
                d.id,
                ot.layoutVertexBuffer,
                ot.indexBuffer,
                ot.segments,
                null,
                v.transform.zoom,
                null,
                null,
                ot.collisionVertexBuffer
              );
          }
          if (!E || !B.length) return;
          let se = v.useProgram("collisionCircle"),
            oe = new n.aQ();
          oe.resize(4 * U), oe._trim();
          let le = 0;
          for (let he of B)
            for (let Ee = 0; Ee < he.circleArray.length / 4; Ee++) {
              let Ue = 4 * Ee,
                Ve = he.circleArray[Ue + 0],
                Ge = he.circleArray[Ue + 1],
                ot = he.circleArray[Ue + 2],
                rt = he.circleArray[Ue + 3];
              oe.emplace(le++, Ve, Ge, ot, rt, 0),
                oe.emplace(le++, Ve, Ge, ot, rt, 1),
                oe.emplace(le++, Ve, Ge, ot, rt, 2),
                oe.emplace(le++, Ve, Ge, ot, rt, 3);
            }
          (!Al || Al.length < 2 * U) &&
            (Al = (function (he) {
              let Ee = 2 * he,
                Ue = new n.aS();
              Ue.resize(Ee), Ue._trim();
              for (let Ve = 0; Ve < Ee; Ve++) {
                let Ge = 6 * Ve;
                (Ue.uint16[Ge + 0] = 4 * Ve + 0),
                  (Ue.uint16[Ge + 1] = 4 * Ve + 1),
                  (Ue.uint16[Ge + 2] = 4 * Ve + 2),
                  (Ue.uint16[Ge + 3] = 4 * Ve + 2),
                  (Ue.uint16[Ge + 4] = 4 * Ve + 3),
                  (Ue.uint16[Ge + 5] = 4 * Ve + 0);
              }
              return Ue;
            })(U));
          let ee = M.createIndexBuffer(Al, !0),
            _e = M.createVertexBuffer(oe, n.aR.members, !0);
          for (let he of B) {
            let Ee = {
              u_matrix: he.transform,
              u_inv_matrix: he.invTransform,
              u_camera_to_center_distance: (Be = v.transform)
                .cameraToCenterDistance,
              u_viewport_size: [Be.width, Be.height],
            };
            se.draw(
              M,
              I.TRIANGLES,
              Gi.disabled,
              Sr.disabled,
              v.colorModeForRenderPass(),
              xr.disabled,
              Ee,
              v.style.map.terrain &&
                v.style.map.terrain.getTerrainData(he.coord),
              d.id,
              _e,
              ee,
              n.$.simpleSegment(
                0,
                2 * he.circleOffset,
                he.circleArray.length,
                he.circleArray.length / 2
              ),
              null,
              v.transform.zoom,
              null,
              null,
              null
            );
          }
          var Be;
          _e.destroy(), ee.destroy();
        }
        (xr.disabled = new xr(!1, 1029, 2305)),
          (xr.backCCW = new xr(!0, 1029, 2305));
        let vf = n.an(new Float32Array(16));
        function xu(v, a, d, f, g, x) {
          let { horizontalAlign: E, verticalAlign: M } = n.at(v);
          return new n.P(
            ((-(E - 0.5) * a) / g + f[0]) * x,
            ((-(M - 0.5) * d) / g + f[1]) * x
          );
        }
        function wu(v, a, d, f, g, x, E, M, I, z, B) {
          let U = v.text.placedSymbolArray,
            Z = v.text.dynamicLayoutVertexArray,
            se = v.icon.dynamicLayoutVertexArray,
            oe = {};
          Z.clear();
          for (let le = 0; le < U.length; le++) {
            let ee = U.get(le),
              _e =
                ee.hidden ||
                !ee.crossTileID ||
                (v.allowVerticalPlacement && !ee.placedOrientation)
                  ? null
                  : f[ee.crossTileID];
            if (_e) {
              let Be = new n.P(ee.anchorX, ee.anchorY),
                he = re(Be, d ? E : x, B),
                Ee = V(g.cameraToCenterDistance, he.signedDistanceFromCamera),
                Ue = (n.ai(v.textSizeData, I, ee) * Ee) / n.ao;
              d && (Ue *= v.tilePixelRatio / M);
              let {
                  width: Ve,
                  height: Ge,
                  anchor: ot,
                  textOffset: rt,
                  textBoxScale: nt,
                } = _e,
                Ft = xu(ot, Ve, Ge, rt, nt, Ue),
                ki = d
                  ? re(Be.add(Ft), x, B).point
                  : he.point.add(a ? Ft.rotate(-g.angle) : Ft),
                kt =
                  v.allowVerticalPlacement &&
                  ee.placedOrientation === n.ah.vertical
                    ? Math.PI / 2
                    : 0;
              for (let li = 0; li < ee.numGlyphs; li++) n.aj(Z, ki, kt);
              z &&
                ee.associatedIconIndex >= 0 &&
                (oe[ee.associatedIconIndex] = { shiftedAnchor: ki, angle: kt });
            } else jt(ee.numGlyphs, Z);
          }
          if (z) {
            se.clear();
            let le = v.icon.placedSymbolArray;
            for (let ee = 0; ee < le.length; ee++) {
              let _e = le.get(ee);
              if (_e.hidden) jt(_e.numGlyphs, se);
              else {
                let Be = oe[ee];
                if (Be)
                  for (let he = 0; he < _e.numGlyphs; he++)
                    n.aj(se, Be.shiftedAnchor, Be.angle);
                else jt(_e.numGlyphs, se);
              }
            }
            v.icon.dynamicLayoutVertexBuffer.updateData(se);
          }
          v.text.dynamicLayoutVertexBuffer.updateData(Z);
        }
        function qd(v, a, d) {
          return d.iconsInText && a
            ? "symbolTextAndIcon"
            : v
            ? "symbolSDF"
            : "symbolIcon";
        }
        function _f(v, a, d, f, g, x, E, M, I, z, B, U) {
          let Z = v.context,
            se = Z.gl,
            oe = v.transform,
            le = M === "map",
            ee = I === "map",
            _e =
              M !== "viewport" && d.layout.get("symbol-placement") !== "point",
            Be = le && !ee && !_e,
            he = !d.layout.get("symbol-sort-key").isConstant(),
            Ee = !1,
            Ue = v.depthModeForSublayer(0, Gi.ReadOnly),
            Ve =
              d._unevaluatedLayout.hasValue("text-variable-anchor") ||
              d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),
            Ge = [];
          for (let ot of f) {
            let rt = a.getTile(ot),
              nt = rt.getBucket(d);
            if (!nt) continue;
            let Ft = g ? nt.text : nt.icon;
            if (!Ft || !Ft.segments.get().length || !Ft.hasVisibleVertices)
              continue;
            let ki = Ft.programConfigurations.get(d.id),
              kt = g || nt.sdfIcons,
              li = g ? nt.textSizeData : nt.iconSizeData,
              Ci = ee || oe.pitch !== 0,
              ji = v.useProgram(qd(kt, g, nt), ki),
              pi = n.ag(li, oe.zoom),
              Ei =
                v.style.map.terrain && v.style.map.terrain.getTerrainData(ot),
              Ti,
              Br,
              wr,
              Ao,
              hn = [0, 0],
              Cr = null;
            if (g)
              (Br = rt.glyphAtlasTexture),
                (wr = se.LINEAR),
                (Ti = rt.glyphAtlasTexture.size),
                nt.iconsInText &&
                  ((hn = rt.imageAtlasTexture.size),
                  (Cr = rt.imageAtlasTexture),
                  (Ao =
                    Ci ||
                    v.options.rotating ||
                    v.options.zooming ||
                    li.kind === "composite" ||
                    li.kind === "camera"
                      ? se.LINEAR
                      : se.NEAREST));
            else {
              let zr =
                d.layout.get("icon-size").constantOr(0) !== 1 ||
                nt.iconsNeedLinear;
              (Br = rt.imageAtlasTexture),
                (wr =
                  kt || v.options.rotating || v.options.zooming || zr || Ci
                    ? se.LINEAR
                    : se.NEAREST),
                (Ti = rt.imageAtlasTexture.size);
            }
            let Yn = di(rt, 1, v.transform.zoom),
              gs = yi(ot.posMatrix, ee, le, v.transform, Yn),
              Is = Fi(ot.posMatrix, ee, le, v.transform, Yn),
              Ra = Ve && nt.hasTextData(),
              Ua =
                d.layout.get("icon-text-fit") !== "none" &&
                Ra &&
                nt.hasIconData();
            if (_e) {
              let zr = v.style.map.terrain
                  ? (Qo, Ui) => v.style.map.terrain.getElevation(ot, Qo, Ui)
                  : null,
                Ln = d.layout.get("text-rotation-alignment") === "map";
              $(nt, ot.posMatrix, v, g, gs, Is, ee, z, Ln, zr);
            }
            let Ps = v.translatePosMatrix(ot.posMatrix, rt, x, E),
              ys = _e || (g && Ve) || Ua ? vf : gs,
              $r = v.translatePosMatrix(Is, rt, x, E, !0),
              Ar =
                kt &&
                d.paint
                  .get(g ? "text-halo-width" : "icon-halo-width")
                  .constantOr(1) !== 0,
              Xr;
            Xr = kt
              ? nt.iconsInText
                ? Qs(li.kind, pi, Be, ee, v, Ps, ys, $r, Ti, hn)
                : Eo(li.kind, pi, Be, ee, v, Ps, ys, $r, g, Ti, !0)
              : uo(li.kind, pi, Be, ee, v, Ps, ys, $r, g, Ti);
            let Ul = {
              program: ji,
              buffers: Ft,
              uniformValues: Xr,
              atlasTexture: Br,
              atlasTextureIcon: Cr,
              atlasInterpolation: wr,
              atlasInterpolationIcon: Ao,
              isSDF: kt,
              hasHalo: Ar,
            };
            if (he && nt.canOverlap) {
              Ee = !0;
              let zr = Ft.segments.get();
              for (let Ln of zr)
                Ge.push({
                  segments: new n.$([Ln]),
                  sortKey: Ln.sortKey,
                  state: Ul,
                  terrainData: Ei,
                });
            } else
              Ge.push({
                segments: Ft.segments,
                sortKey: 0,
                state: Ul,
                terrainData: Ei,
              });
          }
          Ee && Ge.sort((ot, rt) => ot.sortKey - rt.sortKey);
          for (let ot of Ge) {
            let rt = ot.state;
            if (
              (Z.activeTexture.set(se.TEXTURE0),
              rt.atlasTexture.bind(rt.atlasInterpolation, se.CLAMP_TO_EDGE),
              rt.atlasTextureIcon &&
                (Z.activeTexture.set(se.TEXTURE1),
                rt.atlasTextureIcon &&
                  rt.atlasTextureIcon.bind(
                    rt.atlasInterpolationIcon,
                    se.CLAMP_TO_EDGE
                  )),
              rt.isSDF)
            ) {
              let nt = rt.uniformValues;
              rt.hasHalo &&
                ((nt.u_is_halo = 1),
                ku(
                  rt.buffers,
                  ot.segments,
                  d,
                  v,
                  rt.program,
                  Ue,
                  B,
                  U,
                  nt,
                  ot.terrainData
                )),
                (nt.u_is_halo = 0);
            }
            ku(
              rt.buffers,
              ot.segments,
              d,
              v,
              rt.program,
              Ue,
              B,
              U,
              rt.uniformValues,
              ot.terrainData
            );
          }
        }
        function ku(v, a, d, f, g, x, E, M, I, z) {
          let B = f.context;
          g.draw(
            B,
            B.gl.TRIANGLES,
            x,
            E,
            M,
            xr.disabled,
            I,
            z,
            d.id,
            v.layoutVertexBuffer,
            v.indexBuffer,
            a,
            d.paint,
            f.transform.zoom,
            v.programConfigurations.get(d.id),
            v.dynamicLayoutVertexBuffer,
            v.opacityVertexBuffer
          );
        }
        function xf(v, a, d, f, g) {
          if (!d || !f || !f.imageAtlas) return;
          let x = f.imageAtlas.patternPositions,
            E = x[d.to.toString()],
            M = x[d.from.toString()];
          if ((!E && M && (E = M), !M && E && (M = E), !E || !M)) {
            let I = g.getPaintProperty(a);
            (E = x[I]), (M = x[I]);
          }
          E && M && v.setConstantPatternPositions(E, M);
        }
        function $d(v, a, d, f, g, x, E) {
          let M = v.context.gl,
            I = "fill-pattern",
            z = d.paint.get(I),
            B = z && z.constantOr(1),
            U = d.getCrossfadeParameters(),
            Z,
            se,
            oe,
            le,
            ee;
          E
            ? ((se =
                B && !d.getPaintProperty("fill-outline-color")
                  ? "fillOutlinePattern"
                  : "fillOutline"),
              (Z = M.LINES))
            : ((se = B ? "fillPattern" : "fill"), (Z = M.TRIANGLES));
          let _e = z.constantOr(null);
          for (let Be of f) {
            let he = a.getTile(Be);
            if (B && !he.patternsLoaded()) continue;
            let Ee = he.getBucket(d);
            if (!Ee) continue;
            let Ue = Ee.programConfigurations.get(d.id),
              Ve = v.useProgram(se, Ue),
              Ge =
                v.style.map.terrain && v.style.map.terrain.getTerrainData(Be);
            B &&
              (v.context.activeTexture.set(M.TEXTURE0),
              he.imageAtlasTexture.bind(M.LINEAR, M.CLAMP_TO_EDGE),
              Ue.updatePaintBuffers(U)),
              xf(Ue, I, _e, he, d);
            let ot = Ge ? Be : null,
              rt = v.translatePosMatrix(
                ot ? ot.posMatrix : Be.posMatrix,
                he,
                d.paint.get("fill-translate"),
                d.paint.get("fill-translate-anchor")
              );
            if (E) {
              (le = Ee.indexBuffer2), (ee = Ee.segments2);
              let nt = [M.drawingBufferWidth, M.drawingBufferHeight];
              oe =
                se === "fillOutlinePattern" && B
                  ? et(rt, v, U, he, nt)
                  : Ye(rt, nt);
            } else
              (le = Ee.indexBuffer),
                (ee = Ee.segments),
                (oe = B ? lt(rt, v, U, he) : _t(rt));
            Ve.draw(
              v.context,
              Z,
              g,
              v.stencilModeForClipping(Be),
              x,
              xr.disabled,
              oe,
              Ge,
              d.id,
              Ee.layoutVertexBuffer,
              le,
              ee,
              d.paint,
              v.transform.zoom,
              Ue
            );
          }
        }
        function Il(v, a, d, f, g, x, E) {
          let M = v.context,
            I = M.gl,
            z = "fill-extrusion-pattern",
            B = d.paint.get(z),
            U = B.constantOr(1),
            Z = d.getCrossfadeParameters(),
            se = d.paint.get("fill-extrusion-opacity"),
            oe = B.constantOr(null);
          for (let le of f) {
            let ee = a.getTile(le),
              _e = ee.getBucket(d);
            if (!_e) continue;
            let Be =
                v.style.map.terrain && v.style.map.terrain.getTerrainData(le),
              he = _e.programConfigurations.get(d.id),
              Ee = v.useProgram(
                U ? "fillExtrusionPattern" : "fillExtrusion",
                he
              );
            U &&
              (v.context.activeTexture.set(I.TEXTURE0),
              ee.imageAtlasTexture.bind(I.LINEAR, I.CLAMP_TO_EDGE),
              he.updatePaintBuffers(Z)),
              xf(he, z, oe, ee, d);
            let Ue = v.translatePosMatrix(
                le.posMatrix,
                ee,
                d.paint.get("fill-extrusion-translate"),
                d.paint.get("fill-extrusion-translate-anchor")
              ),
              Ve = d.paint.get("fill-extrusion-vertical-gradient"),
              Ge = U ? Ke(Ue, v, Ve, se, le, Z, ee) : Ae(Ue, v, Ve, se);
            Ee.draw(
              M,
              M.gl.TRIANGLES,
              g,
              x,
              E,
              xr.backCCW,
              Ge,
              Be,
              d.id,
              _e.layoutVertexBuffer,
              _e.indexBuffer,
              _e.segments,
              d.paint,
              v.transform.zoom,
              he,
              v.style.map.terrain && _e.centroidVertexBuffer
            );
          }
        }
        function Qd(v, a, d, f, g, x, E) {
          let M = v.context,
            I = M.gl,
            z = d.fbo;
          if (!z) return;
          let B = v.useProgram("hillshade"),
            U = v.style.map.terrain && v.style.map.terrain.getTerrainData(a);
          M.activeTexture.set(I.TEXTURE0),
            I.bindTexture(I.TEXTURE_2D, z.colorAttachment.get()),
            B.draw(
              M,
              I.TRIANGLES,
              g,
              x,
              E,
              xr.disabled,
              ((Z, se, oe, le) => {
                let ee = oe.paint.get("hillshade-shadow-color"),
                  _e = oe.paint.get("hillshade-highlight-color"),
                  Be = oe.paint.get("hillshade-accent-color"),
                  he =
                    oe.paint.get("hillshade-illumination-direction") *
                    (Math.PI / 180);
                oe.paint.get("hillshade-illumination-anchor") === "viewport" &&
                  (he -= Z.transform.angle);
                let Ee = !Z.options.moving;
                return {
                  u_matrix: le
                    ? le.posMatrix
                    : Z.transform.calculatePosMatrix(
                        se.tileID.toUnwrapped(),
                        Ee
                      ),
                  u_image: 0,
                  u_latrange: Kr(0, se.tileID),
                  u_light: [oe.paint.get("hillshade-exaggeration"), he],
                  u_shadow: ee,
                  u_highlight: _e,
                  u_accent: Be,
                };
              })(v, d, f, U ? a : null),
              U,
              f.id,
              v.rasterBoundsBuffer,
              v.quadTriangleIndexBuffer,
              v.rasterBoundsSegments
            );
        }
        function wf(v, a, d, f, g, x) {
          let E = v.context,
            M = E.gl,
            I = a.dem;
          if (I && I.data) {
            let z = I.dim,
              B = I.stride,
              U = I.getPixels();
            if (
              (E.activeTexture.set(M.TEXTURE1),
              E.pixelStoreUnpackPremultiplyAlpha.set(!1),
              (a.demTexture = a.demTexture || v.getTileTexture(B)),
              a.demTexture)
            ) {
              let se = a.demTexture;
              se.update(U, { premultiply: !1 }),
                se.bind(M.NEAREST, M.CLAMP_TO_EDGE);
            } else
              (a.demTexture = new st(E, U, M.RGBA, { premultiply: !1 })),
                a.demTexture.bind(M.NEAREST, M.CLAMP_TO_EDGE);
            E.activeTexture.set(M.TEXTURE0);
            let Z = a.fbo;
            if (!Z) {
              let se = new st(E, { width: z, height: z, data: null }, M.RGBA);
              se.bind(M.LINEAR, M.CLAMP_TO_EDGE),
                (Z = a.fbo = E.createFramebuffer(z, z, !0, !1)),
                Z.colorAttachment.set(se.texture);
            }
            E.bindFramebuffer.set(Z.framebuffer),
              E.viewport.set([0, 0, z, z]),
              v.useProgram("hillshadePrepare").draw(
                E,
                M.TRIANGLES,
                f,
                g,
                x,
                xr.disabled,
                ((se, oe) => {
                  let le = oe.stride,
                    ee = n.F();
                  return (
                    n.aN(ee, 0, n.W, -n.W, 0, 0, 1),
                    n.H(ee, ee, [0, -n.W, 0]),
                    {
                      u_matrix: ee,
                      u_image: 1,
                      u_dimension: [le, le],
                      u_zoom: se.overscaledZ,
                      u_unpack: oe.getUnpackVector(),
                    }
                  );
                })(a.tileID, I),
                null,
                d.id,
                v.rasterBoundsBuffer,
                v.quadTriangleIndexBuffer,
                v.rasterBoundsSegments
              ),
              (a.needsHillshadePrepare = !1);
          }
        }
        function kf(v, a, d, f, g, x) {
          let E = f.paint.get("raster-fade-duration");
          if (!x && E > 0) {
            let M = b.now(),
              I = (M - v.timeAdded) / E,
              z = a ? (M - a.timeAdded) / E : -1,
              B = d.getSource(),
              U = g.coveringZoomLevel({
                tileSize: B.tileSize,
                roundZoom: B.roundZoom,
              }),
              Z =
                !a ||
                Math.abs(a.tileID.overscaledZ - U) >
                  Math.abs(v.tileID.overscaledZ - U),
              se =
                Z && v.refreshedUponExpiration ? 1 : n.ac(Z ? I : 1 - z, 0, 1);
            return (
              v.refreshedUponExpiration &&
                I >= 1 &&
                (v.refreshedUponExpiration = !1),
              a ? { opacity: 1, mix: 1 - se } : { opacity: se, mix: 0 }
            );
          }
          return { opacity: 1, mix: 0 };
        }
        let Su = new n.aO(1, 0, 0, 1),
          Gd = new n.aO(0, 1, 0, 1),
          p1 = new n.aO(0, 0, 1, 1),
          Sf = new n.aO(1, 0, 1, 1),
          Jr = new n.aO(0, 1, 1, 1);
        function pa(v, a, d, f) {
          Pl(v, 0, a + d / 2, v.transform.width, d, f);
        }
        function $o(v, a, d, f) {
          Pl(v, a - d / 2, 0, d, v.transform.height, f);
        }
        function Pl(v, a, d, f, g, x) {
          let E = v.context,
            M = E.gl;
          M.enable(M.SCISSOR_TEST),
            M.scissor(
              a * v.pixelRatio,
              d * v.pixelRatio,
              f * v.pixelRatio,
              g * v.pixelRatio
            ),
            E.clear({ color: x }),
            M.disable(M.SCISSOR_TEST);
        }
        function Wd(v, a, d) {
          let f = v.context,
            g = f.gl,
            x = d.posMatrix,
            E = v.useProgram("debug"),
            M = Gi.disabled,
            I = Sr.disabled,
            z = v.colorModeForRenderPass(),
            B = "$debug",
            U = v.style.map.terrain && v.style.map.terrain.getTerrainData(d);
          f.activeTexture.set(g.TEXTURE0);
          let Z = a.getTileByID(d.key).latestRawTileData,
            se = Math.floor(((Z && Z.byteLength) || 0) / 1024),
            oe = a.getTile(d).tileSize,
            le =
              (512 / Math.min(oe, 512)) *
              (d.overscaledZ / v.transform.zoom) *
              0.5,
            ee = d.canonical.toString();
          d.overscaledZ !== d.canonical.z && (ee += ` => ${d.overscaledZ}`),
            (function (_e, Be) {
              _e.initDebugOverlayCanvas();
              let he = _e.debugOverlayCanvas,
                Ee = _e.context.gl,
                Ue = _e.debugOverlayCanvas.getContext("2d");
              Ue.clearRect(0, 0, he.width, he.height),
                (Ue.shadowColor = "white"),
                (Ue.shadowBlur = 2),
                (Ue.lineWidth = 1.5),
                (Ue.strokeStyle = "white"),
                (Ue.textBaseline = "top"),
                (Ue.font = "bold 36px Open Sans, sans-serif"),
                Ue.fillText(Be, 5, 5),
                Ue.strokeText(Be, 5, 5),
                _e.debugOverlayTexture.update(he),
                _e.debugOverlayTexture.bind(Ee.LINEAR, Ee.CLAMP_TO_EDGE);
            })(v, `${ee} ${se}kB`),
            E.draw(
              f,
              g.TRIANGLES,
              M,
              I,
              sn.alphaBlended,
              xr.disabled,
              Ri(x, n.aO.transparent, le),
              null,
              B,
              v.debugBuffer,
              v.quadTriangleIndexBuffer,
              v.debugSegments
            ),
            E.draw(
              f,
              g.LINE_STRIP,
              M,
              I,
              z,
              xr.disabled,
              Ri(x, n.aO.red),
              U,
              B,
              v.debugBuffer,
              v.tileBorderIndexBuffer,
              v.debugSegments
            );
        }
        function Zd(v, a, d) {
          let f = v.context,
            g = f.gl,
            x = v.colorModeForRenderPass(),
            E = new Gi(g.LEQUAL, Gi.ReadWrite, v.depthRangeFor3D),
            M = v.useProgram("terrain"),
            I = a.getTerrainMesh();
          f.bindFramebuffer.set(null),
            f.viewport.set([0, 0, v.width, v.height]);
          for (let z of d) {
            let B = v.renderToTexture.getTexture(z),
              U = a.getTerrainData(z.tileID);
            f.activeTexture.set(g.TEXTURE0),
              g.bindTexture(g.TEXTURE_2D, B.texture);
            let Z = {
              u_matrix: v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),
              u_texture: 0,
              u_ele_delta: a.getMeshFrameDelta(v.transform.zoom),
            };
            M.draw(
              f,
              g.TRIANGLES,
              E,
              Sr.disabled,
              x,
              xr.backCCW,
              Z,
              U,
              "terrain",
              I.vertexBuffer,
              I.indexBuffer,
              I.segments
            );
          }
        }
        class Dl {
          constructor(a, d) {
            (this.context = new bf(a)),
              (this.transform = d),
              (this._tileTextures = {}),
              (this.terrainFacilitator = {
                dirty: !0,
                matrix: n.an(new Float64Array(16)),
                renderTime: 0,
              }),
              this.setup(),
              (this.numSublayers = ft.maxUnderzooming + ft.maxOverzooming + 1),
              (this.depthEpsilon = 1 / Math.pow(2, 16)),
              (this.crossTileSymbolIndex = new cr());
          }
          resize(a, d, f) {
            if (
              ((this.width = Math.floor(a * f)),
              (this.height = Math.floor(d * f)),
              (this.pixelRatio = f),
              this.context.viewport.set([0, 0, this.width, this.height]),
              this.style)
            )
              for (let g of this.style._order) this.style._layers[g].resize();
          }
          setup() {
            let a = this.context,
              d = new n.aV();
            d.emplaceBack(0, 0),
              d.emplaceBack(n.W, 0),
              d.emplaceBack(0, n.W),
              d.emplaceBack(n.W, n.W),
              (this.tileExtentBuffer = a.createVertexBuffer(d, Hn.members)),
              (this.tileExtentSegments = n.$.simpleSegment(0, 0, 4, 2));
            let f = new n.aV();
            f.emplaceBack(0, 0),
              f.emplaceBack(n.W, 0),
              f.emplaceBack(0, n.W),
              f.emplaceBack(n.W, n.W),
              (this.debugBuffer = a.createVertexBuffer(f, Hn.members)),
              (this.debugSegments = n.$.simpleSegment(0, 0, 4, 5));
            let g = new n.Z();
            g.emplaceBack(0, 0, 0, 0),
              g.emplaceBack(n.W, 0, n.W, 0),
              g.emplaceBack(0, n.W, 0, n.W),
              g.emplaceBack(n.W, n.W, n.W, n.W),
              (this.rasterBoundsBuffer = a.createVertexBuffer(g, pr.members)),
              (this.rasterBoundsSegments = n.$.simpleSegment(0, 0, 4, 2));
            let x = new n.aV();
            x.emplaceBack(0, 0),
              x.emplaceBack(1, 0),
              x.emplaceBack(0, 1),
              x.emplaceBack(1, 1),
              (this.viewportBuffer = a.createVertexBuffer(x, Hn.members)),
              (this.viewportSegments = n.$.simpleSegment(0, 0, 4, 2));
            let E = new n.aW();
            E.emplaceBack(0),
              E.emplaceBack(1),
              E.emplaceBack(3),
              E.emplaceBack(2),
              E.emplaceBack(0),
              (this.tileBorderIndexBuffer = a.createIndexBuffer(E));
            let M = new n.aX();
            M.emplaceBack(0, 1, 2),
              M.emplaceBack(2, 1, 3),
              (this.quadTriangleIndexBuffer = a.createIndexBuffer(M));
            let I = this.context.gl;
            this.stencilClearMode = new Sr(
              { func: I.ALWAYS, mask: 0 },
              0,
              255,
              I.ZERO,
              I.ZERO,
              I.ZERO
            );
          }
          clearStencil() {
            let a = this.context,
              d = a.gl;
            (this.nextStencilID = 1), (this.currentStencilSource = void 0);
            let f = n.F();
            n.aN(f, 0, this.width, this.height, 0, 0, 1),
              n.J(f, f, [d.drawingBufferWidth, d.drawingBufferHeight, 0]),
              this.useProgram("clippingMask").draw(
                a,
                d.TRIANGLES,
                Gi.disabled,
                this.stencilClearMode,
                sn.disabled,
                xr.disabled,
                vr(f),
                null,
                "$clipping",
                this.viewportBuffer,
                this.quadTriangleIndexBuffer,
                this.viewportSegments
              );
          }
          _renderTileClippingMasks(a, d) {
            if (
              this.currentStencilSource === a.source ||
              !a.isTileClipped() ||
              !d ||
              !d.length
            )
              return;
            this.currentStencilSource = a.source;
            let f = this.context,
              g = f.gl;
            this.nextStencilID + d.length > 256 && this.clearStencil(),
              f.setColorMode(sn.disabled),
              f.setDepthMode(Gi.disabled);
            let x = this.useProgram("clippingMask");
            this._tileClippingMaskIDs = {};
            for (let E of d) {
              let M = (this._tileClippingMaskIDs[E.key] = this.nextStencilID++),
                I =
                  this.style.map.terrain &&
                  this.style.map.terrain.getTerrainData(E);
              x.draw(
                f,
                g.TRIANGLES,
                Gi.disabled,
                new Sr(
                  { func: g.ALWAYS, mask: 0 },
                  M,
                  255,
                  g.KEEP,
                  g.KEEP,
                  g.REPLACE
                ),
                sn.disabled,
                xr.disabled,
                vr(E.posMatrix),
                I,
                "$clipping",
                this.tileExtentBuffer,
                this.quadTriangleIndexBuffer,
                this.tileExtentSegments
              );
            }
          }
          stencilModeFor3D() {
            (this.currentStencilSource = void 0),
              this.nextStencilID + 1 > 256 && this.clearStencil();
            let a = this.nextStencilID++,
              d = this.context.gl;
            return new Sr(
              { func: d.NOTEQUAL, mask: 255 },
              a,
              255,
              d.KEEP,
              d.KEEP,
              d.REPLACE
            );
          }
          stencilModeForClipping(a) {
            let d = this.context.gl;
            return new Sr(
              { func: d.EQUAL, mask: 255 },
              this._tileClippingMaskIDs[a.key],
              0,
              d.KEEP,
              d.KEEP,
              d.REPLACE
            );
          }
          stencilConfigForOverlap(a) {
            let d = this.context.gl,
              f = a.sort((E, M) => M.overscaledZ - E.overscaledZ),
              g = f[f.length - 1].overscaledZ,
              x = f[0].overscaledZ - g + 1;
            if (x > 1) {
              (this.currentStencilSource = void 0),
                this.nextStencilID + x > 256 && this.clearStencil();
              let E = {};
              for (let M = 0; M < x; M++)
                E[M + g] = new Sr(
                  { func: d.GEQUAL, mask: 255 },
                  M + this.nextStencilID,
                  255,
                  d.KEEP,
                  d.KEEP,
                  d.REPLACE
                );
              return (this.nextStencilID += x), [E, f];
            }
            return [{ [g]: Sr.disabled }, f];
          }
          colorModeForRenderPass() {
            let a = this.context.gl;
            return this._showOverdrawInspector
              ? new sn(
                  [a.CONSTANT_COLOR, a.ONE],
                  new n.aO(0.125, 0.125, 0.125, 0),
                  [!0, !0, !0, !0]
                )
              : this.renderPass === "opaque"
              ? sn.unblended
              : sn.alphaBlended;
          }
          depthModeForSublayer(a, d, f) {
            if (!this.opaquePassEnabledForLayer()) return Gi.disabled;
            let g =
              1 -
              ((1 + this.currentLayer) * this.numSublayers + a) *
                this.depthEpsilon;
            return new Gi(f || this.context.gl.LEQUAL, d, [g, g]);
          }
          opaquePassEnabledForLayer() {
            return this.currentLayer < this.opaquePassCutoff;
          }
          render(a, d) {
            (this.style = a),
              (this.options = d),
              (this.lineAtlas = a.lineAtlas),
              (this.imageManager = a.imageManager),
              (this.glyphManager = a.glyphManager),
              (this.symbolFadeChange = a.placement.symbolFadeChange(b.now())),
              this.imageManager.beginFrame();
            let f = this.style._order,
              g = this.style.sourceCaches,
              x = {},
              E = {},
              M = {};
            for (let I in g) {
              let z = g[I];
              z.used && z.prepare(this.context),
                (x[I] = z.getVisibleCoordinates()),
                (E[I] = x[I].slice().reverse()),
                (M[I] = z.getVisibleCoordinates(!0).reverse());
            }
            this.opaquePassCutoff = 1 / 0;
            for (let I = 0; I < f.length; I++)
              if (this.style._layers[f[I]].is3D()) {
                this.opaquePassCutoff = I;
                break;
              }
            this.maybeDrawDepthAndCoords(!1),
              this.renderToTexture &&
                (this.renderToTexture.prepareForRender(
                  this.style,
                  this.transform.zoom
                ),
                (this.opaquePassCutoff = 0)),
              (this.renderPass = "offscreen");
            for (let I of f) {
              let z = this.style._layers[I];
              if (!z.hasOffscreenPass() || z.isHidden(this.transform.zoom))
                continue;
              let B = E[z.source];
              (z.type === "custom" || B.length) &&
                this.renderLayer(this, g[z.source], z, B);
            }
            if (
              (this.context.bindFramebuffer.set(null),
              this.context.clear({
                color: d.showOverdrawInspector ? n.aO.black : n.aO.transparent,
                depth: 1,
              }),
              this.clearStencil(),
              (this._showOverdrawInspector = d.showOverdrawInspector),
              (this.depthRangeFor3D = [
                0,
                1 -
                  (a._order.length + 2) * this.numSublayers * this.depthEpsilon,
              ]),
              !this.renderToTexture)
            )
              for (
                this.renderPass = "opaque", this.currentLayer = f.length - 1;
                this.currentLayer >= 0;
                this.currentLayer--
              ) {
                let I = this.style._layers[f[this.currentLayer]],
                  z = g[I.source],
                  B = x[I.source];
                this._renderTileClippingMasks(I, B),
                  this.renderLayer(this, z, I, B);
              }
            for (
              this.renderPass = "translucent", this.currentLayer = 0;
              this.currentLayer < f.length;
              this.currentLayer++
            ) {
              let I = this.style._layers[f[this.currentLayer]],
                z = g[I.source];
              if (this.renderToTexture && this.renderToTexture.renderLayer(I))
                continue;
              let B = (I.type === "symbol" ? M : E)[I.source];
              this._renderTileClippingMasks(I, x[I.source]),
                this.renderLayer(this, z, I, B);
            }
            if (this.options.showTileBoundaries) {
              let I = (function (z, B) {
                let U = null,
                  Z = Object.values(z._layers).flatMap((ee) =>
                    ee.source && !ee.isHidden(B)
                      ? [z.sourceCaches[ee.source]]
                      : []
                  ),
                  se = Z.filter((ee) => ee.getSource().type === "vector"),
                  oe = Z.filter((ee) => ee.getSource().type !== "vector"),
                  le = (ee) => {
                    (!U || U.getSource().maxzoom < ee.getSource().maxzoom) &&
                      (U = ee);
                  };
                return (
                  se.forEach((ee) => le(ee)), U || oe.forEach((ee) => le(ee)), U
                );
              })(this.style, this.transform.zoom);
              I &&
                (function (z, B, U) {
                  for (let Z = 0; Z < U.length; Z++) Wd(z, B, U[Z]);
                })(this, I, I.getVisibleCoordinates());
            }
            this.options.showPadding &&
              (function (I) {
                let z = I.transform.padding;
                pa(I, I.transform.height - (z.top || 0), 3, Su),
                  pa(I, z.bottom || 0, 3, Gd),
                  $o(I, z.left || 0, 3, p1),
                  $o(I, I.transform.width - (z.right || 0), 3, Sf);
                let B = I.transform.centerPoint;
                (function (U, Z, se, oe) {
                  Pl(U, Z - 1, se - 10, 2, 20, oe),
                    Pl(U, Z - 10, se - 1, 20, 2, oe);
                })(I, B.x, I.transform.height - B.y, Jr);
              })(this),
              this.context.setDefault();
          }
          maybeDrawDepthAndCoords(a) {
            if (!this.style || !this.style.map || !this.style.map.terrain)
              return;
            let d = this.terrainFacilitator.matrix,
              f = this.transform.projMatrix,
              g = this.terrainFacilitator.dirty;
            g || (g = a ? !n.aY(d, f) : !n.aZ(d, f)),
              g ||
                (g =
                  this.style.map.terrain.sourceCache.tilesAfterTime(
                    this.terrainFacilitator.renderTime
                  ).length > 0),
              g &&
                (n.a_(d, f),
                (this.terrainFacilitator.renderTime = Date.now()),
                (this.terrainFacilitator.dirty = !1),
                (function (x, E) {
                  let M = x.context,
                    I = M.gl,
                    z = sn.unblended,
                    B = new Gi(I.LEQUAL, Gi.ReadWrite, [0, 1]),
                    U = E.getTerrainMesh(),
                    Z = E.sourceCache.getRenderableTiles(),
                    se = x.useProgram("terrainDepth");
                  M.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),
                    M.viewport.set([
                      0,
                      0,
                      x.width / devicePixelRatio,
                      x.height / devicePixelRatio,
                    ]),
                    M.clear({ color: n.aO.transparent, depth: 1 });
                  for (let oe of Z) {
                    let le = E.getTerrainData(oe.tileID),
                      ee = {
                        u_matrix: x.transform.calculatePosMatrix(
                          oe.tileID.toUnwrapped()
                        ),
                        u_ele_delta: E.getMeshFrameDelta(x.transform.zoom),
                      };
                    se.draw(
                      M,
                      I.TRIANGLES,
                      B,
                      Sr.disabled,
                      z,
                      xr.backCCW,
                      ee,
                      le,
                      "terrain",
                      U.vertexBuffer,
                      U.indexBuffer,
                      U.segments
                    );
                  }
                  M.bindFramebuffer.set(null),
                    M.viewport.set([0, 0, x.width, x.height]);
                })(this, this.style.map.terrain),
                (function (x, E) {
                  let M = x.context,
                    I = M.gl,
                    z = sn.unblended,
                    B = new Gi(I.LEQUAL, Gi.ReadWrite, [0, 1]),
                    U = E.getTerrainMesh(),
                    Z = E.getCoordsTexture(),
                    se = E.sourceCache.getRenderableTiles(),
                    oe = x.useProgram("terrainCoords");
                  M.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),
                    M.viewport.set([
                      0,
                      0,
                      x.width / devicePixelRatio,
                      x.height / devicePixelRatio,
                    ]),
                    M.clear({ color: n.aO.transparent, depth: 1 }),
                    (E.coordsIndex = []);
                  for (let le of se) {
                    let ee = E.getTerrainData(le.tileID);
                    M.activeTexture.set(I.TEXTURE0),
                      I.bindTexture(I.TEXTURE_2D, Z.texture);
                    let _e = {
                      u_matrix: x.transform.calculatePosMatrix(
                        le.tileID.toUnwrapped()
                      ),
                      u_terrain_coords_id: (255 - E.coordsIndex.length) / 255,
                      u_texture: 0,
                      u_ele_delta: E.getMeshFrameDelta(x.transform.zoom),
                    };
                    oe.draw(
                      M,
                      I.TRIANGLES,
                      B,
                      Sr.disabled,
                      z,
                      xr.backCCW,
                      _e,
                      ee,
                      "terrain",
                      U.vertexBuffer,
                      U.indexBuffer,
                      U.segments
                    ),
                      E.coordsIndex.push(le.tileID.key);
                  }
                  M.bindFramebuffer.set(null),
                    M.viewport.set([0, 0, x.width, x.height]);
                })(this, this.style.map.terrain));
          }
          renderLayer(a, d, f, g) {
            if (
              !f.isHidden(this.transform.zoom) &&
              (f.type === "background" ||
                f.type === "custom" ||
                (g || []).length)
            )
              switch (((this.id = f.id), f.type)) {
                case "symbol":
                  (function (x, E, M, I, z) {
                    if (x.renderPass !== "translucent") return;
                    let B = Sr.disabled,
                      U = x.colorModeForRenderPass();
                    (M._unevaluatedLayout.hasValue("text-variable-anchor") ||
                      M._unevaluatedLayout.hasValue(
                        "text-variable-anchor-offset"
                      )) &&
                      (function (Z, se, oe, le, ee, _e, Be) {
                        let he = se.transform,
                          Ee = ee === "map",
                          Ue = _e === "map";
                        for (let Ve of Z) {
                          let Ge = le.getTile(Ve),
                            ot = Ge.getBucket(oe);
                          if (!ot || !ot.text || !ot.text.segments.get().length)
                            continue;
                          let rt = n.ag(ot.textSizeData, he.zoom),
                            nt = di(Ge, 1, se.transform.zoom),
                            Ft = yi(Ve.posMatrix, Ue, Ee, se.transform, nt),
                            ki =
                              oe.layout.get("icon-text-fit") !== "none" &&
                              ot.hasIconData();
                          if (rt) {
                            let kt = Math.pow(
                              2,
                              he.zoom - Ge.tileID.overscaledZ
                            );
                            wu(
                              ot,
                              Ee,
                              Ue,
                              Be,
                              he,
                              Ft,
                              Ve.posMatrix,
                              kt,
                              rt,
                              ki,
                              se.style.map.terrain
                                ? (li, Ci) =>
                                    se.style.map.terrain.getElevation(
                                      Ve,
                                      li,
                                      Ci
                                    )
                                : null
                            );
                          }
                        }
                      })(
                        I,
                        x,
                        M,
                        E,
                        M.layout.get("text-rotation-alignment"),
                        M.layout.get("text-pitch-alignment"),
                        z
                      ),
                      M.paint.get("icon-opacity").constantOr(1) !== 0 &&
                        _f(
                          x,
                          E,
                          M,
                          I,
                          !1,
                          M.paint.get("icon-translate"),
                          M.paint.get("icon-translate-anchor"),
                          M.layout.get("icon-rotation-alignment"),
                          M.layout.get("icon-pitch-alignment"),
                          M.layout.get("icon-keep-upright"),
                          B,
                          U
                        ),
                      M.paint.get("text-opacity").constantOr(1) !== 0 &&
                        _f(
                          x,
                          E,
                          M,
                          I,
                          !0,
                          M.paint.get("text-translate"),
                          M.paint.get("text-translate-anchor"),
                          M.layout.get("text-rotation-alignment"),
                          M.layout.get("text-pitch-alignment"),
                          M.layout.get("text-keep-upright"),
                          B,
                          U
                        ),
                      E.map.showCollisionBoxes &&
                        (_u(
                          x,
                          E,
                          M,
                          I,
                          M.paint.get("text-translate"),
                          M.paint.get("text-translate-anchor"),
                          !0
                        ),
                        _u(
                          x,
                          E,
                          M,
                          I,
                          M.paint.get("icon-translate"),
                          M.paint.get("icon-translate-anchor"),
                          !1
                        ));
                  })(a, d, f, g, this.style.placement.variableOffsets);
                  break;
                case "circle":
                  (function (x, E, M, I) {
                    if (x.renderPass !== "translucent") return;
                    let z = M.paint.get("circle-opacity"),
                      B = M.paint.get("circle-stroke-width"),
                      U = M.paint.get("circle-stroke-opacity"),
                      Z = !M.layout.get("circle-sort-key").isConstant();
                    if (
                      z.constantOr(1) === 0 &&
                      (B.constantOr(1) === 0 || U.constantOr(1) === 0)
                    )
                      return;
                    let se = x.context,
                      oe = se.gl,
                      le = x.depthModeForSublayer(0, Gi.ReadOnly),
                      ee = Sr.disabled,
                      _e = x.colorModeForRenderPass(),
                      Be = [];
                    for (let he = 0; he < I.length; he++) {
                      let Ee = I[he],
                        Ue = E.getTile(Ee),
                        Ve = Ue.getBucket(M);
                      if (!Ve) continue;
                      let Ge = Ve.programConfigurations.get(M.id),
                        ot = x.useProgram("circle", Ge),
                        rt = Ve.layoutVertexBuffer,
                        nt = Ve.indexBuffer,
                        Ft =
                          x.style.map.terrain &&
                          x.style.map.terrain.getTerrainData(Ee),
                        ki = {
                          programConfiguration: Ge,
                          program: ot,
                          layoutVertexBuffer: rt,
                          indexBuffer: nt,
                          uniformValues: bt(x, Ee, Ue, M),
                          terrainData: Ft,
                        };
                      if (Z) {
                        let kt = Ve.segments.get();
                        for (let li of kt)
                          Be.push({
                            segments: new n.$([li]),
                            sortKey: li.sortKey,
                            state: ki,
                          });
                      } else
                        Be.push({
                          segments: Ve.segments,
                          sortKey: 0,
                          state: ki,
                        });
                    }
                    Z && Be.sort((he, Ee) => he.sortKey - Ee.sortKey);
                    for (let he of Be) {
                      let {
                        programConfiguration: Ee,
                        program: Ue,
                        layoutVertexBuffer: Ve,
                        indexBuffer: Ge,
                        uniformValues: ot,
                        terrainData: rt,
                      } = he.state;
                      Ue.draw(
                        se,
                        oe.TRIANGLES,
                        le,
                        ee,
                        _e,
                        xr.disabled,
                        ot,
                        rt,
                        M.id,
                        Ve,
                        Ge,
                        he.segments,
                        M.paint,
                        x.transform.zoom,
                        Ee
                      );
                    }
                  })(a, d, f, g);
                  break;
                case "heatmap":
                  (function (x, E, M, I) {
                    if (M.paint.get("heatmap-opacity") !== 0)
                      if (x.renderPass === "offscreen") {
                        let z = x.context,
                          B = z.gl,
                          U = Sr.disabled,
                          Z = new sn([B.ONE, B.ONE], n.aO.transparent, [
                            !0,
                            !0,
                            !0,
                            !0,
                          ]);
                        (function (se, oe, le) {
                          let ee = se.gl;
                          se.activeTexture.set(ee.TEXTURE1),
                            se.viewport.set([
                              0,
                              0,
                              oe.width / 4,
                              oe.height / 4,
                            ]);
                          let _e = le.heatmapFbo;
                          if (_e)
                            ee.bindTexture(
                              ee.TEXTURE_2D,
                              _e.colorAttachment.get()
                            ),
                              se.bindFramebuffer.set(_e.framebuffer);
                          else {
                            let Be = ee.createTexture();
                            ee.bindTexture(ee.TEXTURE_2D, Be),
                              ee.texParameteri(
                                ee.TEXTURE_2D,
                                ee.TEXTURE_WRAP_S,
                                ee.CLAMP_TO_EDGE
                              ),
                              ee.texParameteri(
                                ee.TEXTURE_2D,
                                ee.TEXTURE_WRAP_T,
                                ee.CLAMP_TO_EDGE
                              ),
                              ee.texParameteri(
                                ee.TEXTURE_2D,
                                ee.TEXTURE_MIN_FILTER,
                                ee.LINEAR
                              ),
                              ee.texParameteri(
                                ee.TEXTURE_2D,
                                ee.TEXTURE_MAG_FILTER,
                                ee.LINEAR
                              ),
                              (_e = le.heatmapFbo =
                                se.createFramebuffer(
                                  oe.width / 4,
                                  oe.height / 4,
                                  !1,
                                  !1
                                )),
                              (function (he, Ee, Ue, Ve) {
                                var Ge, ot;
                                let rt = he.gl,
                                  nt =
                                    (Ge = he.HALF_FLOAT) !== null &&
                                    Ge !== void 0
                                      ? Ge
                                      : rt.UNSIGNED_BYTE,
                                  Ft =
                                    (ot = he.RGBA16F) !== null && ot !== void 0
                                      ? ot
                                      : rt.RGBA;
                                rt.texImage2D(
                                  rt.TEXTURE_2D,
                                  0,
                                  Ft,
                                  Ee.width / 4,
                                  Ee.height / 4,
                                  0,
                                  rt.RGBA,
                                  nt,
                                  null
                                ),
                                  Ve.colorAttachment.set(Ue);
                              })(se, oe, Be, _e);
                          }
                        })(z, x, M),
                          z.clear({ color: n.aO.transparent });
                        for (let se = 0; se < I.length; se++) {
                          let oe = I[se];
                          if (E.hasRenderableParent(oe)) continue;
                          let le = E.getTile(oe),
                            ee = le.getBucket(M);
                          if (!ee) continue;
                          let _e = ee.programConfigurations.get(M.id),
                            Be = x.useProgram("heatmap", _e),
                            { zoom: he } = x.transform;
                          Be.draw(
                            z,
                            B.TRIANGLES,
                            Gi.disabled,
                            U,
                            Z,
                            xr.disabled,
                            nr(
                              oe.posMatrix,
                              le,
                              he,
                              M.paint.get("heatmap-intensity")
                            ),
                            null,
                            M.id,
                            ee.layoutVertexBuffer,
                            ee.indexBuffer,
                            ee.segments,
                            M.paint,
                            x.transform.zoom,
                            _e
                          );
                        }
                        z.viewport.set([0, 0, x.width, x.height]);
                      } else
                        x.renderPass === "translucent" &&
                          (x.context.setColorMode(x.colorModeForRenderPass()),
                          (function (z, B) {
                            let U = z.context,
                              Z = U.gl,
                              se = B.heatmapFbo;
                            if (!se) return;
                            U.activeTexture.set(Z.TEXTURE0),
                              Z.bindTexture(
                                Z.TEXTURE_2D,
                                se.colorAttachment.get()
                              ),
                              U.activeTexture.set(Z.TEXTURE1);
                            let oe = B.colorRampTexture;
                            oe ||
                              (oe = B.colorRampTexture =
                                new st(U, B.colorRamp, Z.RGBA)),
                              oe.bind(Z.LINEAR, Z.CLAMP_TO_EDGE),
                              z.useProgram("heatmapTexture").draw(
                                U,
                                Z.TRIANGLES,
                                Gi.disabled,
                                Sr.disabled,
                                z.colorModeForRenderPass(),
                                xr.disabled,
                                ((le, ee, _e, Be) => {
                                  let he = n.F();
                                  n.aN(he, 0, le.width, le.height, 0, 0, 1);
                                  let Ee = le.context.gl;
                                  return {
                                    u_matrix: he,
                                    u_world: [
                                      Ee.drawingBufferWidth,
                                      Ee.drawingBufferHeight,
                                    ],
                                    u_image: 0,
                                    u_color_ramp: 1,
                                    u_opacity: ee.paint.get("heatmap-opacity"),
                                  };
                                })(z, B),
                                null,
                                B.id,
                                z.viewportBuffer,
                                z.quadTriangleIndexBuffer,
                                z.viewportSegments,
                                B.paint,
                                z.transform.zoom
                              );
                          })(x, M));
                  })(a, d, f, g);
                  break;
                case "line":
                  (function (x, E, M, I) {
                    if (x.renderPass !== "translucent") return;
                    let z = M.paint.get("line-opacity"),
                      B = M.paint.get("line-width");
                    if (z.constantOr(1) === 0 || B.constantOr(1) === 0) return;
                    let U = x.depthModeForSublayer(0, Gi.ReadOnly),
                      Z = x.colorModeForRenderPass(),
                      se = M.paint.get("line-dasharray"),
                      oe = M.paint.get("line-pattern"),
                      le = oe.constantOr(1),
                      ee = M.paint.get("line-gradient"),
                      _e = M.getCrossfadeParameters(),
                      Be = le
                        ? "linePattern"
                        : se
                        ? "lineSDF"
                        : ee
                        ? "lineGradient"
                        : "line",
                      he = x.context,
                      Ee = he.gl,
                      Ue = !0;
                    for (let Ve of I) {
                      let Ge = E.getTile(Ve);
                      if (le && !Ge.patternsLoaded()) continue;
                      let ot = Ge.getBucket(M);
                      if (!ot) continue;
                      let rt = ot.programConfigurations.get(M.id),
                        nt = x.context.program.get(),
                        Ft = x.useProgram(Be, rt),
                        ki = Ue || Ft.program !== nt,
                        kt =
                          x.style.map.terrain &&
                          x.style.map.terrain.getTerrainData(Ve),
                        li = oe.constantOr(null);
                      if (li && Ge.imageAtlas) {
                        let pi = Ge.imageAtlas,
                          Ei = pi.patternPositions[li.to.toString()],
                          Ti = pi.patternPositions[li.from.toString()];
                        Ei && Ti && rt.setConstantPatternPositions(Ei, Ti);
                      }
                      let Ci = kt ? Ve : null,
                        ji = le
                          ? Co(x, Ge, M, _e, Ci)
                          : se
                          ? Tr(x, Ge, M, se, _e, Ci)
                          : ee
                          ? _r(x, Ge, M, ot.lineClipsArray.length, Ci)
                          : Hr(x, Ge, M, Ci);
                      if (le)
                        he.activeTexture.set(Ee.TEXTURE0),
                          Ge.imageAtlasTexture.bind(
                            Ee.LINEAR,
                            Ee.CLAMP_TO_EDGE
                          ),
                          rt.updatePaintBuffers(_e);
                      else if (se && (ki || x.lineAtlas.dirty))
                        he.activeTexture.set(Ee.TEXTURE0), x.lineAtlas.bind(he);
                      else if (ee) {
                        let pi = ot.gradients[M.id],
                          Ei = pi.texture;
                        if (M.gradientVersion !== pi.version) {
                          let Ti = 256;
                          if (M.stepInterpolant) {
                            let Br = E.getSource().maxzoom,
                              wr =
                                Ve.canonical.z === Br
                                  ? Math.ceil(
                                      1 <<
                                        (x.transform.maxZoom - Ve.canonical.z)
                                    )
                                  : 1;
                            Ti = n.ac(
                              n.aT((ot.maxLineLength / n.W) * 1024 * wr),
                              256,
                              he.maxTextureSize
                            );
                          }
                          (pi.gradient = n.aU({
                            expression: M.gradientExpression(),
                            evaluationKey: "lineProgress",
                            resolution: Ti,
                            image: pi.gradient || void 0,
                            clips: ot.lineClipsArray,
                          })),
                            pi.texture
                              ? pi.texture.update(pi.gradient)
                              : (pi.texture = new st(he, pi.gradient, Ee.RGBA)),
                            (pi.version = M.gradientVersion),
                            (Ei = pi.texture);
                        }
                        he.activeTexture.set(Ee.TEXTURE0),
                          Ei.bind(
                            M.stepInterpolant ? Ee.NEAREST : Ee.LINEAR,
                            Ee.CLAMP_TO_EDGE
                          );
                      }
                      Ft.draw(
                        he,
                        Ee.TRIANGLES,
                        U,
                        x.stencilModeForClipping(Ve),
                        Z,
                        xr.disabled,
                        ji,
                        kt,
                        M.id,
                        ot.layoutVertexBuffer,
                        ot.indexBuffer,
                        ot.segments,
                        M.paint,
                        x.transform.zoom,
                        rt,
                        ot.layoutVertexBuffer2
                      ),
                        (Ue = !1);
                    }
                  })(a, d, f, g);
                  break;
                case "fill":
                  (function (x, E, M, I) {
                    let z = M.paint.get("fill-color"),
                      B = M.paint.get("fill-opacity");
                    if (B.constantOr(1) === 0) return;
                    let U = x.colorModeForRenderPass(),
                      Z = M.paint.get("fill-pattern"),
                      se =
                        x.opaquePassEnabledForLayer() &&
                        !Z.constantOr(1) &&
                        z.constantOr(n.aO.transparent).a === 1 &&
                        B.constantOr(0) === 1
                          ? "opaque"
                          : "translucent";
                    if (x.renderPass === se) {
                      let oe = x.depthModeForSublayer(
                        1,
                        x.renderPass === "opaque" ? Gi.ReadWrite : Gi.ReadOnly
                      );
                      $d(x, E, M, I, oe, U, !1);
                    }
                    if (
                      x.renderPass === "translucent" &&
                      M.paint.get("fill-antialias")
                    ) {
                      let oe = x.depthModeForSublayer(
                        M.getPaintProperty("fill-outline-color") ? 2 : 0,
                        Gi.ReadOnly
                      );
                      $d(x, E, M, I, oe, U, !0);
                    }
                  })(a, d, f, g);
                  break;
                case "fill-extrusion":
                  (function (x, E, M, I) {
                    let z = M.paint.get("fill-extrusion-opacity");
                    if (z !== 0 && x.renderPass === "translucent") {
                      let B = new Gi(
                        x.context.gl.LEQUAL,
                        Gi.ReadWrite,
                        x.depthRangeFor3D
                      );
                      if (
                        z !== 1 ||
                        M.paint.get("fill-extrusion-pattern").constantOr(1)
                      )
                        Il(x, E, M, I, B, Sr.disabled, sn.disabled),
                          Il(
                            x,
                            E,
                            M,
                            I,
                            B,
                            x.stencilModeFor3D(),
                            x.colorModeForRenderPass()
                          );
                      else {
                        let U = x.colorModeForRenderPass();
                        Il(x, E, M, I, B, Sr.disabled, U);
                      }
                    }
                  })(a, d, f, g);
                  break;
                case "hillshade":
                  (function (x, E, M, I) {
                    if (
                      x.renderPass !== "offscreen" &&
                      x.renderPass !== "translucent"
                    )
                      return;
                    let z = x.context,
                      B = x.depthModeForSublayer(0, Gi.ReadOnly),
                      U = x.colorModeForRenderPass(),
                      [Z, se] =
                        x.renderPass === "translucent"
                          ? x.stencilConfigForOverlap(I)
                          : [{}, I];
                    for (let oe of se) {
                      let le = E.getTile(oe);
                      le.needsHillshadePrepare !== void 0 &&
                      le.needsHillshadePrepare &&
                      x.renderPass === "offscreen"
                        ? wf(x, le, M, B, Sr.disabled, U)
                        : x.renderPass === "translucent" &&
                          Qd(x, oe, le, M, B, Z[oe.overscaledZ], U);
                    }
                    z.viewport.set([0, 0, x.width, x.height]);
                  })(a, d, f, g);
                  break;
                case "raster":
                  (function (x, E, M, I) {
                    if (
                      x.renderPass !== "translucent" ||
                      M.paint.get("raster-opacity") === 0 ||
                      !I.length
                    )
                      return;
                    let z = x.context,
                      B = z.gl,
                      U = E.getSource(),
                      Z = x.useProgram("raster"),
                      se = x.colorModeForRenderPass(),
                      [oe, le] =
                        U instanceof Er
                          ? [{}, I]
                          : x.stencilConfigForOverlap(I),
                      ee = le[le.length - 1].overscaledZ,
                      _e = !x.options.moving;
                    for (let Be of le) {
                      let he = x.depthModeForSublayer(
                          Be.overscaledZ - ee,
                          M.paint.get("raster-opacity") === 1
                            ? Gi.ReadWrite
                            : Gi.ReadOnly,
                          B.LESS
                        ),
                        Ee = E.getTile(Be);
                      Ee.registerFadeDuration(
                        M.paint.get("raster-fade-duration")
                      );
                      let Ue = E.findLoadedParent(Be, 0),
                        Ve = kf(Ee, Ue, E, M, x.transform, x.style.map.terrain),
                        Ge,
                        ot,
                        rt =
                          M.paint.get("raster-resampling") === "nearest"
                            ? B.NEAREST
                            : B.LINEAR;
                      z.activeTexture.set(B.TEXTURE0),
                        Ee.texture.bind(
                          rt,
                          B.CLAMP_TO_EDGE,
                          B.LINEAR_MIPMAP_NEAREST
                        ),
                        z.activeTexture.set(B.TEXTURE1),
                        Ue
                          ? (Ue.texture.bind(
                              rt,
                              B.CLAMP_TO_EDGE,
                              B.LINEAR_MIPMAP_NEAREST
                            ),
                            (Ge = Math.pow(
                              2,
                              Ue.tileID.overscaledZ - Ee.tileID.overscaledZ
                            )),
                            (ot = [
                              (Ee.tileID.canonical.x * Ge) % 1,
                              (Ee.tileID.canonical.y * Ge) % 1,
                            ]))
                          : Ee.texture.bind(
                              rt,
                              B.CLAMP_TO_EDGE,
                              B.LINEAR_MIPMAP_NEAREST
                            );
                      let nt =
                          x.style.map.terrain &&
                          x.style.map.terrain.getTerrainData(Be),
                        Ft = nt ? Be : null,
                        ki = Ft
                          ? Ft.posMatrix
                          : x.transform.calculatePosMatrix(
                              Be.toUnwrapped(),
                              _e
                            ),
                        kt = Fr(ki, ot || [0, 0], Ge || 1, Ve, M);
                      U instanceof Er
                        ? Z.draw(
                            z,
                            B.TRIANGLES,
                            he,
                            Sr.disabled,
                            se,
                            xr.disabled,
                            kt,
                            nt,
                            M.id,
                            U.boundsBuffer,
                            x.quadTriangleIndexBuffer,
                            U.boundsSegments
                          )
                        : Z.draw(
                            z,
                            B.TRIANGLES,
                            he,
                            oe[Be.overscaledZ],
                            se,
                            xr.disabled,
                            kt,
                            nt,
                            M.id,
                            x.rasterBoundsBuffer,
                            x.quadTriangleIndexBuffer,
                            x.rasterBoundsSegments
                          );
                    }
                  })(a, d, f, g);
                  break;
                case "background":
                  (function (x, E, M, I) {
                    let z = M.paint.get("background-color"),
                      B = M.paint.get("background-opacity");
                    if (B === 0) return;
                    let U = x.context,
                      Z = U.gl,
                      se = x.transform,
                      oe = se.tileSize,
                      le = M.paint.get("background-pattern");
                    if (x.isPatternMissing(le)) return;
                    let ee =
                      !le &&
                      z.a === 1 &&
                      B === 1 &&
                      x.opaquePassEnabledForLayer()
                        ? "opaque"
                        : "translucent";
                    if (x.renderPass !== ee) return;
                    let _e = Sr.disabled,
                      Be = x.depthModeForSublayer(
                        0,
                        ee === "opaque" ? Gi.ReadWrite : Gi.ReadOnly
                      ),
                      he = x.colorModeForRenderPass(),
                      Ee = x.useProgram(
                        le ? "backgroundPattern" : "background"
                      ),
                      Ue =
                        I ||
                        se.coveringTiles({
                          tileSize: oe,
                          terrain: x.style.map.terrain,
                        });
                    le &&
                      (U.activeTexture.set(Z.TEXTURE0),
                      x.imageManager.bind(x.context));
                    let Ve = M.getCrossfadeParameters();
                    for (let Ge of Ue) {
                      let ot = I
                          ? Ge.posMatrix
                          : x.transform.calculatePosMatrix(Ge.toUnwrapped()),
                        rt = le
                          ? qo(ot, B, x, le, { tileID: Ge, tileSize: oe }, Ve)
                          : Ts(ot, B, z),
                        nt =
                          x.style.map.terrain &&
                          x.style.map.terrain.getTerrainData(Ge);
                      Ee.draw(
                        U,
                        Z.TRIANGLES,
                        Be,
                        _e,
                        he,
                        xr.disabled,
                        rt,
                        nt,
                        M.id,
                        x.tileExtentBuffer,
                        x.quadTriangleIndexBuffer,
                        x.tileExtentSegments
                      );
                    }
                  })(a, 0, f, g);
                  break;
                case "custom":
                  (function (x, E, M) {
                    let I = x.context,
                      z = M.implementation;
                    if (x.renderPass === "offscreen") {
                      let B = z.prerender;
                      B &&
                        (x.setCustomLayerDefaults(),
                        I.setColorMode(x.colorModeForRenderPass()),
                        B.call(z, I.gl, x.transform.customLayerMatrix()),
                        I.setDirty(),
                        x.setBaseState());
                    } else if (x.renderPass === "translucent") {
                      x.setCustomLayerDefaults(),
                        I.setColorMode(x.colorModeForRenderPass()),
                        I.setStencilMode(Sr.disabled);
                      let B =
                        z.renderingMode === "3d"
                          ? new Gi(
                              x.context.gl.LEQUAL,
                              Gi.ReadWrite,
                              x.depthRangeFor3D
                            )
                          : x.depthModeForSublayer(0, Gi.ReadOnly);
                      I.setDepthMode(B),
                        z.render(I.gl, x.transform.customLayerMatrix()),
                        I.setDirty(),
                        x.setBaseState(),
                        I.bindFramebuffer.set(null);
                    }
                  })(a, 0, f);
              }
          }
          translatePosMatrix(a, d, f, g, x) {
            if (!f[0] && !f[1]) return a;
            let E = x
              ? g === "map"
                ? this.transform.angle
                : 0
              : g === "viewport"
              ? -this.transform.angle
              : 0;
            if (E) {
              let z = Math.sin(E),
                B = Math.cos(E);
              f = [f[0] * B - f[1] * z, f[0] * z + f[1] * B];
            }
            let M = [
                x ? f[0] : di(d, f[0], this.transform.zoom),
                x ? f[1] : di(d, f[1], this.transform.zoom),
                0,
              ],
              I = new Float32Array(16);
            return n.H(I, a, M), I;
          }
          saveTileTexture(a) {
            let d = this._tileTextures[a.size[0]];
            d ? d.push(a) : (this._tileTextures[a.size[0]] = [a]);
          }
          getTileTexture(a) {
            let d = this._tileTextures[a];
            return d && d.length > 0 ? d.pop() : null;
          }
          isPatternMissing(a) {
            if (!a) return !1;
            if (!a.from || !a.to) return !0;
            let d = this.imageManager.getPattern(a.from.toString()),
              f = this.imageManager.getPattern(a.to.toString());
            return !d || !f;
          }
          useProgram(a, d) {
            this.cache = this.cache || {};
            let f =
              a +
              (d ? d.cacheKey : "") +
              (this._showOverdrawInspector ? "/overdraw" : "") +
              (this.style.map.terrain ? "/terrain" : "");
            return (
              this.cache[f] ||
                (this.cache[f] = new Me(
                  this.context,
                  ue[a],
                  d,
                  Xn[a],
                  this._showOverdrawInspector,
                  this.style.map.terrain
                )),
              this.cache[f]
            );
          }
          setCustomLayerDefaults() {
            this.context.unbindVAO(),
              this.context.cullFace.setDefault(),
              this.context.activeTexture.setDefault(),
              this.context.pixelStoreUnpack.setDefault(),
              this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),
              this.context.pixelStoreUnpackFlipY.setDefault();
          }
          setBaseState() {
            let a = this.context.gl;
            this.context.cullFace.set(!1),
              this.context.viewport.set([0, 0, this.width, this.height]),
              this.context.blendEquation.set(a.FUNC_ADD);
          }
          initDebugOverlayCanvas() {
            this.debugOverlayCanvas == null &&
              ((this.debugOverlayCanvas = document.createElement("canvas")),
              (this.debugOverlayCanvas.width = 512),
              (this.debugOverlayCanvas.height = 512),
              (this.debugOverlayTexture = new st(
                this.context,
                this.debugOverlayCanvas,
                this.context.gl.RGBA
              )));
          }
          destroy() {
            this.debugOverlayTexture && this.debugOverlayTexture.destroy();
          }
          overLimit() {
            let { drawingBufferWidth: a, drawingBufferHeight: d } =
              this.context.gl;
            return this.width !== a || this.height !== d;
          }
        }
        class Fa {
          constructor(a, d) {
            (this.points = a), (this.planes = d);
          }
          static fromInvProjectionMatrix(a, d, f) {
            let g = Math.pow(2, f),
              x = [
                [-1, 1, -1, 1],
                [1, 1, -1, 1],
                [1, -1, -1, 1],
                [-1, -1, -1, 1],
                [-1, 1, 1, 1],
                [1, 1, 1, 1],
                [1, -1, 1, 1],
                [-1, -1, 1, 1],
              ].map((M) => {
                let I = (1 / (M = n.af([], M, a))[3] / d) * g;
                return n.a$(M, M, [I, I, 1 / M[3], I]);
              }),
              E = [
                [0, 1, 2],
                [6, 5, 4],
                [0, 3, 7],
                [2, 1, 5],
                [3, 2, 6],
                [0, 4, 5],
              ].map((M) => {
                let I = (function (Z, se) {
                    var oe = se[0],
                      le = se[1],
                      ee = se[2],
                      _e = oe * oe + le * le + ee * ee;
                    return (
                      _e > 0 && (_e = 1 / Math.sqrt(_e)),
                      (Z[0] = se[0] * _e),
                      (Z[1] = se[1] * _e),
                      (Z[2] = se[2] * _e),
                      Z
                    );
                  })(
                    [],
                    (function (Z, se, oe) {
                      var le = se[0],
                        ee = se[1],
                        _e = se[2],
                        Be = oe[0],
                        he = oe[1],
                        Ee = oe[2];
                      return (
                        (Z[0] = ee * Ee - _e * he),
                        (Z[1] = _e * Be - le * Ee),
                        (Z[2] = le * he - ee * Be),
                        Z
                      );
                    })([], fe([], x[M[0]], x[M[1]]), fe([], x[M[2]], x[M[1]]))
                  ),
                  z = -(
                    (B = I)[0] * (U = x[M[1]])[0] +
                    B[1] * U[1] +
                    B[2] * U[2]
                  );
                var B, U;
                return I.concat(z);
              });
            return new Fa(x, E);
          }
        }
        class Ll {
          constructor(a, d) {
            (this.min = a),
              (this.max = d),
              (this.center = (function (f, g, x) {
                return (
                  (f[0] = 0.5 * g[0]),
                  (f[1] = 0.5 * g[1]),
                  (f[2] = 0.5 * g[2]),
                  f
                );
              })(
                [],
                (function (f, g, x) {
                  return (
                    (f[0] = g[0] + x[0]),
                    (f[1] = g[1] + x[1]),
                    (f[2] = g[2] + x[2]),
                    f
                  );
                })([], this.min, this.max)
              ));
          }
          quadrant(a) {
            let d = [a % 2 == 0, a < 2],
              f = Ie(this.min),
              g = Ie(this.max);
            for (let x = 0; x < d.length; x++)
              (f[x] = d[x] ? this.min[x] : this.center[x]),
                (g[x] = d[x] ? this.center[x] : this.max[x]);
            return (g[2] = this.max[2]), new Ll(f, g);
          }
          distanceX(a) {
            return Math.max(Math.min(this.max[0], a[0]), this.min[0]) - a[0];
          }
          distanceY(a) {
            return Math.max(Math.min(this.max[1], a[1]), this.min[1]) - a[1];
          }
          intersects(a) {
            let d = [
                [this.min[0], this.min[1], this.min[2], 1],
                [this.max[0], this.min[1], this.min[2], 1],
                [this.max[0], this.max[1], this.min[2], 1],
                [this.min[0], this.max[1], this.min[2], 1],
                [this.min[0], this.min[1], this.max[2], 1],
                [this.max[0], this.min[1], this.max[2], 1],
                [this.max[0], this.max[1], this.max[2], 1],
                [this.min[0], this.max[1], this.max[2], 1],
              ],
              f = !0;
            for (let g = 0; g < a.planes.length; g++) {
              let x = a.planes[g],
                E = 0;
              for (let M = 0; M < d.length; M++) n.b0(x, d[M]) >= 0 && E++;
              if (E === 0) return 0;
              E !== d.length && (f = !1);
            }
            if (f) return 2;
            for (let g = 0; g < 3; g++) {
              let x = Number.MAX_VALUE,
                E = -Number.MAX_VALUE;
              for (let M = 0; M < a.points.length; M++) {
                let I = a.points[M][g] - this.min[g];
                (x = Math.min(x, I)), (E = Math.max(E, I));
              }
              if (E < 0 || x > this.max[g] - this.min[g]) return 0;
            }
            return 1;
          }
        }
        class fc {
          constructor(a = 0, d = 0, f = 0, g = 0) {
            if (
              isNaN(a) ||
              a < 0 ||
              isNaN(d) ||
              d < 0 ||
              isNaN(f) ||
              f < 0 ||
              isNaN(g) ||
              g < 0
            )
              throw new Error(
                "Invalid value for edge-insets, top, bottom, left and right must all be numbers"
              );
            (this.top = a),
              (this.bottom = d),
              (this.left = f),
              (this.right = g);
          }
          interpolate(a, d, f) {
            return (
              d.top != null &&
                a.top != null &&
                (this.top = n.z.number(a.top, d.top, f)),
              d.bottom != null &&
                a.bottom != null &&
                (this.bottom = n.z.number(a.bottom, d.bottom, f)),
              d.left != null &&
                a.left != null &&
                (this.left = n.z.number(a.left, d.left, f)),
              d.right != null &&
                a.right != null &&
                (this.right = n.z.number(a.right, d.right, f)),
              this
            );
          }
          getCenter(a, d) {
            let f = n.ac((this.left + a - this.right) / 2, 0, a),
              g = n.ac((this.top + d - this.bottom) / 2, 0, d);
            return new n.P(f, g);
          }
          equals(a) {
            return (
              this.top === a.top &&
              this.bottom === a.bottom &&
              this.left === a.left &&
              this.right === a.right
            );
          }
          clone() {
            return new fc(this.top, this.bottom, this.left, this.right);
          }
          toJSON() {
            return {
              top: this.top,
              bottom: this.bottom,
              left: this.left,
              right: this.right,
            };
          }
        }
        let Kd = 85.051129;
        class Cu {
          constructor(a, d, f, g, x) {
            (this.tileSize = 512),
              (this._renderWorldCopies = x === void 0 || !!x),
              (this._minZoom = a || 0),
              (this._maxZoom = d || 22),
              (this._minPitch = f ?? 0),
              (this._maxPitch = g ?? 60),
              this.setMaxBounds(),
              (this.width = 0),
              (this.height = 0),
              (this._center = new n.M(0, 0)),
              (this._elevation = 0),
              (this.zoom = 0),
              (this.angle = 0),
              (this._fov = 0.6435011087932844),
              (this._pitch = 0),
              (this._unmodified = !0),
              (this._edgeInsets = new fc()),
              (this._posMatrixCache = {}),
              (this._alignedPosMatrixCache = {}),
              (this.minElevationForCurrentTile = 0);
          }
          clone() {
            let a = new Cu(
              this._minZoom,
              this._maxZoom,
              this._minPitch,
              this.maxPitch,
              this._renderWorldCopies
            );
            return a.apply(this), a;
          }
          apply(a) {
            (this.tileSize = a.tileSize),
              (this.latRange = a.latRange),
              (this.width = a.width),
              (this.height = a.height),
              (this._center = a._center),
              (this._elevation = a._elevation),
              (this.minElevationForCurrentTile = a.minElevationForCurrentTile),
              (this.zoom = a.zoom),
              (this.angle = a.angle),
              (this._fov = a._fov),
              (this._pitch = a._pitch),
              (this._unmodified = a._unmodified),
              (this._edgeInsets = a._edgeInsets.clone()),
              this._calcMatrices();
          }
          get minZoom() {
            return this._minZoom;
          }
          set minZoom(a) {
            this._minZoom !== a &&
              ((this._minZoom = a), (this.zoom = Math.max(this.zoom, a)));
          }
          get maxZoom() {
            return this._maxZoom;
          }
          set maxZoom(a) {
            this._maxZoom !== a &&
              ((this._maxZoom = a), (this.zoom = Math.min(this.zoom, a)));
          }
          get minPitch() {
            return this._minPitch;
          }
          set minPitch(a) {
            this._minPitch !== a &&
              ((this._minPitch = a), (this.pitch = Math.max(this.pitch, a)));
          }
          get maxPitch() {
            return this._maxPitch;
          }
          set maxPitch(a) {
            this._maxPitch !== a &&
              ((this._maxPitch = a), (this.pitch = Math.min(this.pitch, a)));
          }
          get renderWorldCopies() {
            return this._renderWorldCopies;
          }
          set renderWorldCopies(a) {
            a === void 0 ? (a = !0) : a === null && (a = !1),
              (this._renderWorldCopies = a);
          }
          get worldSize() {
            return this.tileSize * this.scale;
          }
          get centerOffset() {
            return this.centerPoint._sub(this.size._div(2));
          }
          get size() {
            return new n.P(this.width, this.height);
          }
          get bearing() {
            return (-this.angle / Math.PI) * 180;
          }
          set bearing(a) {
            let d = (-n.b1(a, -180, 180) * Math.PI) / 180;
            this.angle !== d &&
              ((this._unmodified = !1),
              (this.angle = d),
              this._calcMatrices(),
              (this.rotationMatrix = (function () {
                var f = new n.A(4);
                return (
                  n.A != Float32Array && ((f[1] = 0), (f[2] = 0)),
                  (f[0] = 1),
                  (f[3] = 1),
                  f
                );
              })()),
              (function (f, g, x) {
                var E = g[0],
                  M = g[1],
                  I = g[2],
                  z = g[3],
                  B = Math.sin(x),
                  U = Math.cos(x);
                (f[0] = E * U + I * B),
                  (f[1] = M * U + z * B),
                  (f[2] = E * -B + I * U),
                  (f[3] = M * -B + z * U);
              })(this.rotationMatrix, this.rotationMatrix, this.angle));
          }
          get pitch() {
            return (this._pitch / Math.PI) * 180;
          }
          set pitch(a) {
            let d = (n.ac(a, this.minPitch, this.maxPitch) / 180) * Math.PI;
            this._pitch !== d &&
              ((this._unmodified = !1),
              (this._pitch = d),
              this._calcMatrices());
          }
          get fov() {
            return (this._fov / Math.PI) * 180;
          }
          set fov(a) {
            (a = Math.max(0.01, Math.min(60, a))),
              this._fov !== a &&
                ((this._unmodified = !1),
                (this._fov = (a / 180) * Math.PI),
                this._calcMatrices());
          }
          get zoom() {
            return this._zoom;
          }
          set zoom(a) {
            let d = Math.min(Math.max(a, this.minZoom), this.maxZoom);
            this._zoom !== d &&
              ((this._unmodified = !1),
              (this._zoom = d),
              (this.tileZoom = Math.max(0, Math.floor(d))),
              (this.scale = this.zoomScale(d)),
              this._constrain(),
              this._calcMatrices());
          }
          get center() {
            return this._center;
          }
          set center(a) {
            (a.lat === this._center.lat && a.lng === this._center.lng) ||
              ((this._unmodified = !1),
              (this._center = a),
              this._constrain(),
              this._calcMatrices());
          }
          get elevation() {
            return this._elevation;
          }
          set elevation(a) {
            a !== this._elevation &&
              ((this._elevation = a), this._constrain(), this._calcMatrices());
          }
          get padding() {
            return this._edgeInsets.toJSON();
          }
          set padding(a) {
            this._edgeInsets.equals(a) ||
              ((this._unmodified = !1),
              this._edgeInsets.interpolate(this._edgeInsets, a, 1),
              this._calcMatrices());
          }
          get centerPoint() {
            return this._edgeInsets.getCenter(this.width, this.height);
          }
          isPaddingEqual(a) {
            return this._edgeInsets.equals(a);
          }
          interpolatePadding(a, d, f) {
            (this._unmodified = !1),
              this._edgeInsets.interpolate(a, d, f),
              this._constrain(),
              this._calcMatrices();
          }
          coveringZoomLevel(a) {
            let d = (a.roundZoom ? Math.round : Math.floor)(
              this.zoom + this.scaleZoom(this.tileSize / a.tileSize)
            );
            return Math.max(0, d);
          }
          getVisibleUnwrappedCoordinates(a) {
            let d = [new n.b2(0, a)];
            if (this._renderWorldCopies) {
              let f = this.pointCoordinate(new n.P(0, 0)),
                g = this.pointCoordinate(new n.P(this.width, 0)),
                x = this.pointCoordinate(new n.P(this.width, this.height)),
                E = this.pointCoordinate(new n.P(0, this.height)),
                M = Math.floor(Math.min(f.x, g.x, x.x, E.x)),
                I = Math.floor(Math.max(f.x, g.x, x.x, E.x)),
                z = 1;
              for (let B = M - z; B <= I + z; B++)
                B !== 0 && d.push(new n.b2(B, a));
            }
            return d;
          }
          coveringTiles(a) {
            var d, f;
            let g = this.coveringZoomLevel(a),
              x = g;
            if (a.minzoom !== void 0 && g < a.minzoom) return [];
            a.maxzoom !== void 0 && g > a.maxzoom && (g = a.maxzoom);
            let E = this.pointCoordinate(this.getCameraPoint()),
              M = n.Y.fromLngLat(this.center),
              I = Math.pow(2, g),
              z = [I * E.x, I * E.y, 0],
              B = [I * M.x, I * M.y, 0],
              U = Fa.fromInvProjectionMatrix(
                this.invProjMatrix,
                this.worldSize,
                g
              ),
              Z = a.minzoom || 0;
            !a.terrain &&
              this.pitch <= 60 &&
              this._edgeInsets.top < 0.1 &&
              (Z = g);
            let se = a.terrain
                ? (2 / Math.min(this.tileSize, a.tileSize)) * this.tileSize
                : 3,
              oe = (he) => ({
                aabb: new Ll([he * I, 0, 0], [(he + 1) * I, I, 0]),
                zoom: 0,
                x: 0,
                y: 0,
                wrap: he,
                fullyVisible: !1,
              }),
              le = [],
              ee = [],
              _e = g,
              Be = a.reparseOverscaled ? x : g;
            if (this._renderWorldCopies)
              for (let he = 1; he <= 3; he++) le.push(oe(-he)), le.push(oe(he));
            for (le.push(oe(0)); le.length > 0; ) {
              let he = le.pop(),
                Ee = he.x,
                Ue = he.y,
                Ve = he.fullyVisible;
              if (!Ve) {
                let Ft = he.aabb.intersects(U);
                if (Ft === 0) continue;
                Ve = Ft === 2;
              }
              let Ge = a.terrain ? z : B,
                ot = he.aabb.distanceX(Ge),
                rt = he.aabb.distanceY(Ge),
                nt = Math.max(Math.abs(ot), Math.abs(rt));
              if (
                he.zoom === _e ||
                (nt > se + (1 << (_e - he.zoom)) - 2 && he.zoom >= Z)
              ) {
                let Ft = _e - he.zoom,
                  ki = z[0] - 0.5 - (Ee << Ft),
                  kt = z[1] - 0.5 - (Ue << Ft);
                ee.push({
                  tileID: new n.Q(
                    he.zoom === _e ? Be : he.zoom,
                    he.wrap,
                    he.zoom,
                    Ee,
                    Ue
                  ),
                  distanceSq: Le([B[0] - 0.5 - Ee, B[1] - 0.5 - Ue]),
                  tileDistanceToCamera: Math.sqrt(ki * ki + kt * kt),
                });
              } else
                for (let Ft = 0; Ft < 4; Ft++) {
                  let ki = (Ee << 1) + (Ft % 2),
                    kt = (Ue << 1) + (Ft >> 1),
                    li = he.zoom + 1,
                    Ci = he.aabb.quadrant(Ft);
                  if (a.terrain) {
                    let ji = new n.Q(li, he.wrap, li, ki, kt),
                      pi = a.terrain.getMinMaxElevation(ji),
                      Ei =
                        (d = pi.minElevation) !== null && d !== void 0
                          ? d
                          : this.elevation,
                      Ti =
                        (f = pi.maxElevation) !== null && f !== void 0
                          ? f
                          : this.elevation;
                    Ci = new Ll(
                      [Ci.min[0], Ci.min[1], Ei],
                      [Ci.max[0], Ci.max[1], Ti]
                    );
                  }
                  le.push({
                    aabb: Ci,
                    zoom: li,
                    x: ki,
                    y: kt,
                    wrap: he.wrap,
                    fullyVisible: Ve,
                  });
                }
            }
            return ee
              .sort((he, Ee) => he.distanceSq - Ee.distanceSq)
              .map((he) => he.tileID);
          }
          resize(a, d) {
            (this.width = a),
              (this.height = d),
              (this.pixelsToGLUnits = [2 / a, -2 / d]),
              this._constrain(),
              this._calcMatrices();
          }
          get unmodified() {
            return this._unmodified;
          }
          zoomScale(a) {
            return Math.pow(2, a);
          }
          scaleZoom(a) {
            return Math.log(a) / Math.LN2;
          }
          project(a) {
            let d = n.ac(a.lat, -85.051129, Kd);
            return new n.P(
              n.N(a.lng) * this.worldSize,
              n.O(d) * this.worldSize
            );
          }
          unproject(a) {
            return new n.Y(
              a.x / this.worldSize,
              a.y / this.worldSize
            ).toLngLat();
          }
          get point() {
            return this.project(this.center);
          }
          getCameraPosition() {
            return {
              lngLat: this.pointLocation(this.getCameraPoint()),
              altitude:
                (Math.cos(this._pitch) * this.cameraToCenterDistance) /
                  this._pixelPerMeter +
                this.elevation,
            };
          }
          recalculateZoom(a) {
            let d = this.elevation,
              f =
                (Math.cos(this._pitch) * this.cameraToCenterDistance) /
                this._pixelPerMeter,
              g = this.pointLocation(this.centerPoint, a),
              x = a.getElevationForLngLatZoom(g, this.tileZoom);
            if (!(this.elevation - x)) return;
            let E = f + d - x,
              M =
                (Math.cos(this._pitch) * this.cameraToCenterDistance) /
                E /
                n.b3(1, g.lat),
              I = this.scaleZoom(M / this.tileSize);
            (this._elevation = x), (this._center = g), (this.zoom = I);
          }
          setLocationAtPoint(a, d) {
            let f = this.pointCoordinate(d),
              g = this.pointCoordinate(this.centerPoint),
              x = this.locationCoordinate(a),
              E = new n.Y(x.x - (f.x - g.x), x.y - (f.y - g.y));
            (this.center = this.coordinateLocation(E)),
              this._renderWorldCopies && (this.center = this.center.wrap());
          }
          locationPoint(a, d) {
            return d
              ? this.coordinatePoint(
                  this.locationCoordinate(a),
                  d.getElevationForLngLatZoom(a, this.tileZoom),
                  this.pixelMatrix3D
                )
              : this.coordinatePoint(this.locationCoordinate(a));
          }
          pointLocation(a, d) {
            return this.coordinateLocation(this.pointCoordinate(a, d));
          }
          locationCoordinate(a) {
            return n.Y.fromLngLat(a);
          }
          coordinateLocation(a) {
            return a && a.toLngLat();
          }
          pointCoordinate(a, d) {
            if (d) {
              let Z = d.pointCoordinate(a);
              if (Z != null) return Z;
            }
            let f = [a.x, a.y, 0, 1],
              g = [a.x, a.y, 1, 1];
            n.af(f, f, this.pixelMatrixInverse),
              n.af(g, g, this.pixelMatrixInverse);
            let x = f[3],
              E = g[3],
              M = f[1] / x,
              I = g[1] / E,
              z = f[2] / x,
              B = g[2] / E,
              U = z === B ? 0 : (0 - z) / (B - z);
            return new n.Y(
              n.z.number(f[0] / x, g[0] / E, U) / this.worldSize,
              n.z.number(M, I, U) / this.worldSize
            );
          }
          coordinatePoint(a, d = 0, f = this.pixelMatrix) {
            let g = [a.x * this.worldSize, a.y * this.worldSize, d, 1];
            return n.af(g, g, f), new n.P(g[0] / g[3], g[1] / g[3]);
          }
          getBounds() {
            let a = Math.max(0, this.height / 2 - this.getHorizon());
            return new pt()
              .extend(this.pointLocation(new n.P(0, a)))
              .extend(this.pointLocation(new n.P(this.width, a)))
              .extend(this.pointLocation(new n.P(this.width, this.height)))
              .extend(this.pointLocation(new n.P(0, this.height)));
          }
          getMaxBounds() {
            return this.latRange &&
              this.latRange.length === 2 &&
              this.lngRange &&
              this.lngRange.length === 2
              ? new pt(
                  [this.lngRange[0], this.latRange[0]],
                  [this.lngRange[1], this.latRange[1]]
                )
              : null;
          }
          getHorizon() {
            return (
              Math.tan(Math.PI / 2 - this._pitch) *
              this.cameraToCenterDistance *
              0.85
            );
          }
          setMaxBounds(a) {
            a
              ? ((this.lngRange = [a.getWest(), a.getEast()]),
                (this.latRange = [a.getSouth(), a.getNorth()]),
                this._constrain())
              : ((this.lngRange = null), (this.latRange = [-85.051129, Kd]));
          }
          calculatePosMatrix(a, d = !1) {
            let f = a.key,
              g = d ? this._alignedPosMatrixCache : this._posMatrixCache;
            if (g[f]) return g[f];
            let x = a.canonical,
              E = this.worldSize / this.zoomScale(x.z),
              M = x.x + Math.pow(2, x.z) * a.wrap,
              I = n.an(new Float64Array(16));
            return (
              n.H(I, I, [M * E, x.y * E, 0]),
              n.J(I, I, [E / n.W, E / n.W, 1]),
              n.K(I, d ? this.alignedProjMatrix : this.projMatrix, I),
              (g[f] = new Float32Array(I)),
              g[f]
            );
          }
          customLayerMatrix() {
            return this.mercatorMatrix.slice();
          }
          getConstrained(a, d) {
            d = n.ac(+d, this.minZoom, this.maxZoom);
            let f = { center: new n.M(a.lng, a.lat), zoom: d },
              g = this.lngRange;
            if (!this._renderWorldCopies && g === null) {
              let he = 179.9999999999;
              g = [-he, he];
            }
            let x = this.tileSize * this.zoomScale(f.zoom),
              E = 0,
              M = x,
              I = 0,
              z = x,
              B = 0,
              U = 0,
              { x: Z, y: se } = this.size;
            if (this.latRange) {
              let he = this.latRange;
              (E = n.O(he[1]) * x),
                (M = n.O(he[0]) * x),
                M - E < se && (B = se / (M - E));
            }
            g &&
              ((I = n.b1(n.N(g[0]) * x, 0, x)),
              (z = n.b1(n.N(g[1]) * x, 0, x)),
              z < I && (z += x),
              z - I < Z && (U = Z / (z - I)));
            let { x: oe, y: le } = this.project.call({ worldSize: x }, a),
              ee,
              _e,
              Be = Math.max(U || 0, B || 0);
            if (Be) {
              let he = new n.P(U ? (z + I) / 2 : oe, B ? (M + E) / 2 : le);
              return (
                (f.center = this.unproject.call({ worldSize: x }, he).wrap()),
                (f.zoom += this.scaleZoom(Be)),
                f
              );
            }
            if (this.latRange) {
              let he = se / 2;
              le - he < E && (_e = E + he), le + he > M && (_e = M - he);
            }
            if (g) {
              let he = (I + z) / 2,
                Ee = oe;
              this._renderWorldCopies &&
                (Ee = n.b1(oe, he - x / 2, he + x / 2));
              let Ue = Z / 2;
              Ee - Ue < I && (ee = I + Ue), Ee + Ue > z && (ee = z - Ue);
            }
            if (ee !== void 0 || _e !== void 0) {
              let he = new n.P(ee ?? oe, _e ?? le);
              f.center = this.unproject.call({ worldSize: x }, he).wrap();
            }
            return f;
          }
          _constrain() {
            if (
              !this.center ||
              !this.width ||
              !this.height ||
              this._constraining
            )
              return;
            this._constraining = !0;
            let a = this._unmodified,
              { center: d, zoom: f } = this.getConstrained(
                this.center,
                this.zoom
              );
            (this.center = d),
              (this.zoom = f),
              (this._unmodified = a),
              (this._constraining = !1);
          }
          _calcMatrices() {
            if (!this.height) return;
            let a = this.centerOffset,
              d = this.point.x,
              f = this.point.y;
            (this.cameraToCenterDistance =
              (0.5 / Math.tan(this._fov / 2)) * this.height),
              (this._pixelPerMeter = n.b3(1, this.center.lat) * this.worldSize);
            let g = n.an(new Float64Array(16));
            n.J(g, g, [this.width / 2, -this.height / 2, 1]),
              n.H(g, g, [1, -1, 0]),
              (this.labelPlaneMatrix = g),
              (g = n.an(new Float64Array(16))),
              n.J(g, g, [1, -1, 1]),
              n.H(g, g, [-1, -1, 0]),
              n.J(g, g, [2 / this.width, 2 / this.height, 1]),
              (this.glCoordMatrix = g);
            let x =
                this.cameraToCenterDistance +
                (this._elevation * this._pixelPerMeter) / Math.cos(this._pitch),
              E = Math.min(this.elevation, this.minElevationForCurrentTile),
              M = x - (E * this._pixelPerMeter) / Math.cos(this._pitch),
              I = E < 0 ? M : x,
              z = Math.PI / 2 + this._pitch,
              B = this._fov * (0.5 + a.y / this.height),
              U =
                (Math.sin(B) * I) /
                Math.sin(n.ac(Math.PI - z - B, 0.01, Math.PI - 0.01)),
              Z = this.getHorizon(),
              se =
                2 *
                Math.atan(Z / this.cameraToCenterDistance) *
                (0.5 + a.y / (2 * Z)),
              oe =
                (Math.sin(se) * I) /
                Math.sin(n.ac(Math.PI - z - se, 0.01, Math.PI - 0.01)),
              le = Math.min(U, oe),
              ee = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * le + I),
              _e = this.height / 50;
            (g = new Float64Array(16)),
              n.b4(g, this._fov, this.width / this.height, _e, ee),
              (g[8] = (2 * -a.x) / this.width),
              (g[9] = (2 * a.y) / this.height),
              n.J(g, g, [1, -1, 1]),
              n.H(g, g, [0, 0, -this.cameraToCenterDistance]),
              n.b5(g, g, this._pitch),
              n.ad(g, g, this.angle),
              n.H(g, g, [-d, -f, 0]),
              (this.mercatorMatrix = n.J([], g, [
                this.worldSize,
                this.worldSize,
                this.worldSize,
              ])),
              n.J(g, g, [1, 1, this._pixelPerMeter]),
              (this.pixelMatrix = n.K(
                new Float64Array(16),
                this.labelPlaneMatrix,
                g
              )),
              n.H(g, g, [0, 0, -this.elevation]),
              (this.projMatrix = g),
              (this.invProjMatrix = n.ar([], g)),
              (this.pixelMatrix3D = n.K(
                new Float64Array(16),
                this.labelPlaneMatrix,
                g
              ));
            let Be = (this.width % 2) / 2,
              he = (this.height % 2) / 2,
              Ee = Math.cos(this.angle),
              Ue = Math.sin(this.angle),
              Ve = d - Math.round(d) + Ee * Be + Ue * he,
              Ge = f - Math.round(f) + Ee * he + Ue * Be,
              ot = new Float64Array(g);
            if (
              (n.H(ot, ot, [Ve > 0.5 ? Ve - 1 : Ve, Ge > 0.5 ? Ge - 1 : Ge, 0]),
              (this.alignedProjMatrix = ot),
              (g = n.ar(new Float64Array(16), this.pixelMatrix)),
              !g)
            )
              throw new Error("failed to invert matrix");
            (this.pixelMatrixInverse = g),
              (this._posMatrixCache = {}),
              (this._alignedPosMatrixCache = {});
          }
          maxPitchScaleFactor() {
            if (!this.pixelMatrixInverse) return 1;
            let a = this.pointCoordinate(new n.P(0, 0)),
              d = [a.x * this.worldSize, a.y * this.worldSize, 0, 1];
            return (
              n.af(d, d, this.pixelMatrix)[3] / this.cameraToCenterDistance
            );
          }
          getCameraPoint() {
            let a = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);
            return this.centerPoint.add(new n.P(0, a));
          }
          getCameraQueryGeometry(a) {
            let d = this.getCameraPoint();
            if (a.length === 1) return [a[0], d];
            {
              let f = d.x,
                g = d.y,
                x = d.x,
                E = d.y;
              for (let M of a)
                (f = Math.min(f, M.x)),
                  (g = Math.min(g, M.y)),
                  (x = Math.max(x, M.x)),
                  (E = Math.max(E, M.y));
              return [
                new n.P(f, g),
                new n.P(x, g),
                new n.P(x, E),
                new n.P(f, E),
                new n.P(f, g),
              ];
            }
          }
          lngLatToCameraDepth(a, d) {
            let f = this.locationCoordinate(a),
              g = [f.x * this.worldSize, f.y * this.worldSize, d, 1];
            return n.af(g, g, this.projMatrix), g[2] / g[3];
          }
        }
        function Jd(v, a) {
          let d,
            f = !1,
            g = null,
            x = null,
            E = () => {
              (g = null),
                f && (v.apply(x, d), (g = setTimeout(E, a)), (f = !1));
            };
          return (...M) => ((f = !0), (x = this), (d = M), g || E(), g);
        }
        class Xd {
          constructor(a) {
            (this._getCurrentHash = () => {
              let d = window.location.hash.replace("#", "");
              if (this._hashName) {
                let f;
                return (
                  d
                    .split("&")
                    .map((g) => g.split("="))
                    .forEach((g) => {
                      g[0] === this._hashName && (f = g);
                    }),
                  ((f && f[1]) || "").split("/")
                );
              }
              return d.split("/");
            }),
              (this._onHashChange = () => {
                let d = this._getCurrentHash();
                if (d.length >= 3 && !d.some((f) => isNaN(f))) {
                  let f =
                    this._map.dragRotate.isEnabled() &&
                    this._map.touchZoomRotate.isEnabled()
                      ? +(d[3] || 0)
                      : this._map.getBearing();
                  return (
                    this._map.jumpTo({
                      center: [+d[2], +d[1]],
                      zoom: +d[0],
                      bearing: f,
                      pitch: +(d[4] || 0),
                    }),
                    !0
                  );
                }
                return !1;
              }),
              (this._updateHashUnthrottled = () => {
                let d = window.location.href.replace(
                  /(#.+)?$/,
                  this.getHashString()
                );
                try {
                  window.history.replaceState(window.history.state, null, d);
                } catch {}
              }),
              (this._updateHash = Jd(this._updateHashUnthrottled, 300)),
              (this._hashName = a && encodeURIComponent(a));
          }
          addTo(a) {
            return (
              (this._map = a),
              addEventListener("hashchange", this._onHashChange, !1),
              this._map.on("moveend", this._updateHash),
              this
            );
          }
          remove() {
            return (
              removeEventListener("hashchange", this._onHashChange, !1),
              this._map.off("moveend", this._updateHash),
              clearTimeout(this._updateHash()),
              delete this._map,
              this
            );
          }
          getHashString(a) {
            let d = this._map.getCenter(),
              f = Math.round(100 * this._map.getZoom()) / 100,
              g = Math.ceil(
                (f * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10
              ),
              x = Math.pow(10, g),
              E = Math.round(d.lng * x) / x,
              M = Math.round(d.lat * x) / x,
              I = this._map.getBearing(),
              z = this._map.getPitch(),
              B = "";
            if (
              ((B += a ? `/${E}/${M}/${f}` : `${f}/${M}/${E}`),
              (I || z) && (B += "/" + Math.round(10 * I) / 10),
              z && (B += `/${Math.round(z)}`),
              this._hashName)
            ) {
              let U = this._hashName,
                Z = !1,
                se = window.location.hash
                  .slice(1)
                  .split("&")
                  .map((oe) => {
                    let le = oe.split("=")[0];
                    return le === U ? ((Z = !0), `${le}=${B}`) : oe;
                  })
                  .filter((oe) => oe);
              return Z || se.push(`${U}=${B}`), `#${se.join("&")}`;
            }
            return `#${B}`;
          }
        }
        let Ms = { linearity: 0.3, easing: n.b6(0, 0, 0.3, 1) },
          Cf = n.e({ deceleration: 2500, maxSpeed: 1400 }, Ms),
          Ef = n.e({ deceleration: 20, maxSpeed: 1400 }, Ms),
          Tf = n.e({ deceleration: 1e3, maxSpeed: 360 }, Ms),
          Mf = n.e({ deceleration: 1e3, maxSpeed: 90 }, Ms);
        class Af {
          constructor(a) {
            (this._map = a), this.clear();
          }
          clear() {
            this._inertiaBuffer = [];
          }
          record(a) {
            this._drainInertiaBuffer(),
              this._inertiaBuffer.push({ time: b.now(), settings: a });
          }
          _drainInertiaBuffer() {
            let a = this._inertiaBuffer,
              d = b.now();
            for (; a.length > 0 && d - a[0].time > 160; ) a.shift();
          }
          _onMoveEnd(a) {
            if ((this._drainInertiaBuffer(), this._inertiaBuffer.length < 2))
              return;
            let d = {
              zoom: 0,
              bearing: 0,
              pitch: 0,
              pan: new n.P(0, 0),
              pinchAround: void 0,
              around: void 0,
            };
            for (let { settings: x } of this._inertiaBuffer)
              (d.zoom += x.zoomDelta || 0),
                (d.bearing += x.bearingDelta || 0),
                (d.pitch += x.pitchDelta || 0),
                x.panDelta && d.pan._add(x.panDelta),
                x.around && (d.around = x.around),
                x.pinchAround && (d.pinchAround = x.pinchAround);
            let f =
                this._inertiaBuffer[this._inertiaBuffer.length - 1].time -
                this._inertiaBuffer[0].time,
              g = {};
            if (d.pan.mag()) {
              let x = gc(d.pan.mag(), f, n.e({}, Cf, a || {}));
              (g.offset = d.pan.mult(x.amount / d.pan.mag())),
                (g.center = this._map.transform.center),
                mc(g, x);
            }
            if (d.zoom) {
              let x = gc(d.zoom, f, Ef);
              (g.zoom = this._map.transform.zoom + x.amount), mc(g, x);
            }
            if (d.bearing) {
              let x = gc(d.bearing, f, Tf);
              (g.bearing =
                this._map.transform.bearing + n.ac(x.amount, -179, 179)),
                mc(g, x);
            }
            if (d.pitch) {
              let x = gc(d.pitch, f, Mf);
              (g.pitch = this._map.transform.pitch + x.amount), mc(g, x);
            }
            if (g.zoom || g.bearing) {
              let x = d.pinchAround === void 0 ? d.around : d.pinchAround;
              g.around = x ? this._map.unproject(x) : this._map.getCenter();
            }
            return this.clear(), n.e(g, { noMoveStart: !0 });
          }
        }
        function mc(v, a) {
          (!v.duration || v.duration < a.duration) &&
            ((v.duration = a.duration), (v.easing = a.easing));
        }
        function gc(v, a, d) {
          let { maxSpeed: f, linearity: g, deceleration: x } = d,
            E = n.ac((v * g) / (a / 1e3), -f, f),
            M = Math.abs(E) / (x * g);
          return { easing: d.easing, duration: 1e3 * M, amount: E * (M / 2) };
        }
        class Dn extends n.k {
          preventDefault() {
            this._defaultPrevented = !0;
          }
          get defaultPrevented() {
            return this._defaultPrevented;
          }
          constructor(a, d, f, g = {}) {
            let x = _.mousePos(d.getCanvas(), f),
              E = d.unproject(x);
            super(a, n.e({ point: x, lngLat: E, originalEvent: f }, g)),
              (this._defaultPrevented = !1),
              (this.target = d);
          }
        }
        class Fl extends n.k {
          preventDefault() {
            this._defaultPrevented = !0;
          }
          get defaultPrevented() {
            return this._defaultPrevented;
          }
          constructor(a, d, f) {
            let g = a === "touchend" ? f.changedTouches : f.touches,
              x = _.touchPos(d.getCanvasContainer(), g),
              E = x.map((I) => d.unproject(I)),
              M = x.reduce(
                (I, z, B, U) => I.add(z.div(U.length)),
                new n.P(0, 0)
              );
            super(a, {
              points: x,
              point: M,
              lngLats: E,
              lngLat: d.unproject(M),
              originalEvent: f,
            }),
              (this._defaultPrevented = !1);
          }
        }
        class us extends n.k {
          preventDefault() {
            this._defaultPrevented = !0;
          }
          get defaultPrevented() {
            return this._defaultPrevented;
          }
          constructor(a, d, f) {
            super(a, { originalEvent: f }), (this._defaultPrevented = !1);
          }
        }
        class As {
          constructor(a, d) {
            (this._map = a), (this._clickTolerance = d.clickTolerance);
          }
          reset() {
            delete this._mousedownPos;
          }
          wheel(a) {
            return this._firePreventable(new us(a.type, this._map, a));
          }
          mousedown(a, d) {
            return (
              (this._mousedownPos = d),
              this._firePreventable(new Dn(a.type, this._map, a))
            );
          }
          mouseup(a) {
            this._map.fire(new Dn(a.type, this._map, a));
          }
          click(a, d) {
            (this._mousedownPos &&
              this._mousedownPos.dist(d) >= this._clickTolerance) ||
              this._map.fire(new Dn(a.type, this._map, a));
          }
          dblclick(a) {
            return this._firePreventable(new Dn(a.type, this._map, a));
          }
          mouseover(a) {
            this._map.fire(new Dn(a.type, this._map, a));
          }
          mouseout(a) {
            this._map.fire(new Dn(a.type, this._map, a));
          }
          touchstart(a) {
            return this._firePreventable(new Fl(a.type, this._map, a));
          }
          touchmove(a) {
            this._map.fire(new Fl(a.type, this._map, a));
          }
          touchend(a) {
            this._map.fire(new Fl(a.type, this._map, a));
          }
          touchcancel(a) {
            this._map.fire(new Fl(a.type, this._map, a));
          }
          _firePreventable(a) {
            if ((this._map.fire(a), a.defaultPrevented)) return {};
          }
          isEnabled() {
            return !0;
          }
          isActive() {
            return !1;
          }
          enable() {}
          disable() {}
        }
        class If {
          constructor(a) {
            this._map = a;
          }
          reset() {
            (this._delayContextMenu = !1),
              (this._ignoreContextMenu = !0),
              delete this._contextMenuEvent;
          }
          mousemove(a) {
            this._map.fire(new Dn(a.type, this._map, a));
          }
          mousedown() {
            (this._delayContextMenu = !0), (this._ignoreContextMenu = !1);
          }
          mouseup() {
            (this._delayContextMenu = !1),
              this._contextMenuEvent &&
                (this._map.fire(
                  new Dn("contextmenu", this._map, this._contextMenuEvent)
                ),
                delete this._contextMenuEvent);
          }
          contextmenu(a) {
            this._delayContextMenu
              ? (this._contextMenuEvent = a)
              : this._ignoreContextMenu ||
                this._map.fire(new Dn(a.type, this._map, a)),
              this._map.listens("contextmenu") && a.preventDefault();
          }
          isEnabled() {
            return !0;
          }
          isActive() {
            return !1;
          }
          enable() {}
          disable() {}
        }
        class To {
          constructor(a) {
            this._map = a;
          }
          get transform() {
            return this._map._requestedCameraState || this._map.transform;
          }
          get center() {
            return {
              lng: this.transform.center.lng,
              lat: this.transform.center.lat,
            };
          }
          get zoom() {
            return this.transform.zoom;
          }
          get pitch() {
            return this.transform.pitch;
          }
          get bearing() {
            return this.transform.bearing;
          }
          unproject(a) {
            return this.transform.pointLocation(
              n.P.convert(a),
              this._map.terrain
            );
          }
        }
        class zl {
          constructor(a, d) {
            (this._map = a),
              (this._tr = new To(a)),
              (this._el = a.getCanvasContainer()),
              (this._container = a.getContainer()),
              (this._clickTolerance = d.clickTolerance || 1);
          }
          isEnabled() {
            return !!this._enabled;
          }
          isActive() {
            return !!this._active;
          }
          enable() {
            this.isEnabled() || (this._enabled = !0);
          }
          disable() {
            this.isEnabled() && (this._enabled = !1);
          }
          mousedown(a, d) {
            this.isEnabled() &&
              a.shiftKey &&
              a.button === 0 &&
              (_.disableDrag(),
              (this._startPos = this._lastPos = d),
              (this._active = !0));
          }
          mousemoveWindow(a, d) {
            if (!this._active) return;
            let f = d;
            if (
              this._lastPos.equals(f) ||
              (!this._box && f.dist(this._startPos) < this._clickTolerance)
            )
              return;
            let g = this._startPos;
            (this._lastPos = f),
              this._box ||
                ((this._box = _.create(
                  "div",
                  "maplibregl-boxzoom",
                  this._container
                )),
                this._container.classList.add("maplibregl-crosshair"),
                this._fireEvent("boxzoomstart", a));
            let x = Math.min(g.x, f.x),
              E = Math.max(g.x, f.x),
              M = Math.min(g.y, f.y),
              I = Math.max(g.y, f.y);
            _.setTransform(this._box, `translate(${x}px,${M}px)`),
              (this._box.style.width = E - x + "px"),
              (this._box.style.height = I - M + "px");
          }
          mouseupWindow(a, d) {
            if (!this._active || a.button !== 0) return;
            let f = this._startPos,
              g = d;
            if ((this.reset(), _.suppressClick(), f.x !== g.x || f.y !== g.y))
              return (
                this._map.fire(new n.k("boxzoomend", { originalEvent: a })),
                {
                  cameraAnimation: (x) =>
                    x.fitScreenCoordinates(f, g, this._tr.bearing, {
                      linear: !0,
                    }),
                }
              );
            this._fireEvent("boxzoomcancel", a);
          }
          keydown(a) {
            this._active &&
              a.keyCode === 27 &&
              (this.reset(), this._fireEvent("boxzoomcancel", a));
          }
          reset() {
            (this._active = !1),
              this._container.classList.remove("maplibregl-crosshair"),
              this._box && (_.remove(this._box), (this._box = null)),
              _.enableDrag(),
              delete this._startPos,
              delete this._lastPos;
          }
          _fireEvent(a, d) {
            return this._map.fire(new n.k(a, { originalEvent: d }));
          }
        }
        function Yd(v, a) {
          if (v.length !== a.length)
            throw new Error(
              `The number of touches and points are not equal - touches ${v.length}, points ${a.length}`
            );
          let d = {};
          for (let f = 0; f < v.length; f++) d[v[f].identifier] = a[f];
          return d;
        }
        class f1 {
          constructor(a) {
            this.reset(), (this.numTouches = a.numTouches);
          }
          reset() {
            delete this.centroid,
              delete this.startTime,
              delete this.touches,
              (this.aborted = !1);
          }
          touchstart(a, d, f) {
            (this.centroid || f.length > this.numTouches) &&
              (this.aborted = !0),
              this.aborted ||
                (this.startTime === void 0 && (this.startTime = a.timeStamp),
                f.length === this.numTouches &&
                  ((this.centroid = (function (g) {
                    let x = new n.P(0, 0);
                    for (let E of g) x._add(E);
                    return x.div(g.length);
                  })(d)),
                  (this.touches = Yd(f, d))));
          }
          touchmove(a, d, f) {
            if (this.aborted || !this.centroid) return;
            let g = Yd(f, d);
            for (let x in this.touches) {
              let E = g[x];
              (!E || E.dist(this.touches[x]) > 30) && (this.aborted = !0);
            }
          }
          touchend(a, d, f) {
            if (
              ((!this.centroid || a.timeStamp - this.startTime > 500) &&
                (this.aborted = !0),
              f.length === 0)
            ) {
              let g = !this.aborted && this.centroid;
              if ((this.reset(), g)) return g;
            }
          }
        }
        class eh {
          constructor(a) {
            (this.singleTap = new f1(a)),
              (this.numTaps = a.numTaps),
              this.reset();
          }
          reset() {
            (this.lastTime = 1 / 0),
              delete this.lastTap,
              (this.count = 0),
              this.singleTap.reset();
          }
          touchstart(a, d, f) {
            this.singleTap.touchstart(a, d, f);
          }
          touchmove(a, d, f) {
            this.singleTap.touchmove(a, d, f);
          }
          touchend(a, d, f) {
            let g = this.singleTap.touchend(a, d, f);
            if (g) {
              let x = a.timeStamp - this.lastTime < 500,
                E = !this.lastTap || this.lastTap.dist(g) < 30;
              if (
                ((x && E) || this.reset(),
                this.count++,
                (this.lastTime = a.timeStamp),
                (this.lastTap = g),
                this.count === this.numTaps)
              )
                return this.reset(), g;
            }
          }
        }
        class Pf {
          constructor(a) {
            (this._tr = new To(a)),
              (this._zoomIn = new eh({ numTouches: 1, numTaps: 2 })),
              (this._zoomOut = new eh({ numTouches: 2, numTaps: 1 })),
              this.reset();
          }
          reset() {
            (this._active = !1), this._zoomIn.reset(), this._zoomOut.reset();
          }
          touchstart(a, d, f) {
            this._zoomIn.touchstart(a, d, f), this._zoomOut.touchstart(a, d, f);
          }
          touchmove(a, d, f) {
            this._zoomIn.touchmove(a, d, f), this._zoomOut.touchmove(a, d, f);
          }
          touchend(a, d, f) {
            let g = this._zoomIn.touchend(a, d, f),
              x = this._zoomOut.touchend(a, d, f),
              E = this._tr;
            return g
              ? ((this._active = !0),
                a.preventDefault(),
                setTimeout(() => this.reset(), 0),
                {
                  cameraAnimation: (M) =>
                    M.easeTo(
                      {
                        duration: 300,
                        zoom: E.zoom + 1,
                        around: E.unproject(g),
                      },
                      { originalEvent: a }
                    ),
                })
              : x
              ? ((this._active = !0),
                a.preventDefault(),
                setTimeout(() => this.reset(), 0),
                {
                  cameraAnimation: (M) =>
                    M.easeTo(
                      {
                        duration: 300,
                        zoom: E.zoom - 1,
                        around: E.unproject(x),
                      },
                      { originalEvent: a }
                    ),
                })
              : void 0;
          }
          touchcancel() {
            this.reset();
          }
          enable() {
            this._enabled = !0;
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return this._enabled;
          }
          isActive() {
            return this._active;
          }
        }
        class Zs {
          constructor(a) {
            (this._enabled = !!a.enable),
              (this._moveStateManager = a.moveStateManager),
              (this._clickTolerance = a.clickTolerance || 1),
              (this._moveFunction = a.move),
              (this._activateOnStart = !!a.activateOnStart),
              a.assignEvents(this),
              this.reset();
          }
          reset(a) {
            (this._active = !1),
              (this._moved = !1),
              delete this._lastPoint,
              this._moveStateManager.endMove(a);
          }
          _move(...a) {
            let d = this._moveFunction(...a);
            if (d.bearingDelta || d.pitchDelta || d.around || d.panDelta)
              return (this._active = !0), d;
          }
          dragStart(a, d) {
            this.isEnabled() &&
              !this._lastPoint &&
              this._moveStateManager.isValidStartEvent(a) &&
              (this._moveStateManager.startMove(a),
              (this._lastPoint = d.length ? d[0] : d),
              this._activateOnStart && this._lastPoint && (this._active = !0));
          }
          dragMove(a, d) {
            if (!this.isEnabled()) return;
            let f = this._lastPoint;
            if (!f) return;
            if (
              (a.preventDefault(), !this._moveStateManager.isValidMoveEvent(a))
            )
              return void this.reset(a);
            let g = d.length ? d[0] : d;
            return !this._moved && g.dist(f) < this._clickTolerance
              ? void 0
              : ((this._moved = !0), (this._lastPoint = g), this._move(f, g));
          }
          dragEnd(a) {
            this.isEnabled() &&
              this._lastPoint &&
              this._moveStateManager.isValidEndEvent(a) &&
              (this._moved && _.suppressClick(), this.reset(a));
          }
          enable() {
            this._enabled = !0;
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return this._enabled;
          }
          isActive() {
            return this._active;
          }
          getClickTolerance() {
            return this._clickTolerance;
          }
        }
        let fa = { 0: 1, 2: 2 };
        class Nt {
          constructor(a) {
            this._correctEvent = a.checkCorrectEvent;
          }
          startMove(a) {
            let d = _.mouseButton(a);
            this._eventButton = d;
          }
          endMove(a) {
            delete this._eventButton;
          }
          isValidStartEvent(a) {
            return this._correctEvent(a);
          }
          isValidMoveEvent(a) {
            return !(function (d, f) {
              let g = fa[f];
              return d.buttons === void 0 || (d.buttons & g) !== g;
            })(a, this._eventButton);
          }
          isValidEndEvent(a) {
            return _.mouseButton(a) === this._eventButton;
          }
        }
        class th {
          constructor() {
            this._firstTouch = void 0;
          }
          _isOneFingerTouch(a) {
            return a.targetTouches.length === 1;
          }
          _isSameTouchEvent(a) {
            return a.targetTouches[0].identifier === this._firstTouch;
          }
          startMove(a) {
            this._firstTouch = a.targetTouches[0].identifier;
          }
          endMove(a) {
            delete this._firstTouch;
          }
          isValidStartEvent(a) {
            return this._isOneFingerTouch(a);
          }
          isValidMoveEvent(a) {
            return this._isOneFingerTouch(a) && this._isSameTouchEvent(a);
          }
          isValidEndEvent(a) {
            return this._isOneFingerTouch(a) && this._isSameTouchEvent(a);
          }
        }
        let za = (v) => {
            (v.mousedown = v.dragStart),
              (v.mousemoveWindow = v.dragMove),
              (v.mouseup = v.dragEnd),
              (v.contextmenu = function (a) {
                a.preventDefault();
              });
          },
          Nl = ({
            enable: v,
            clickTolerance: a,
            bearingDegreesPerPixelMoved: d = 0.8,
          }) => {
            let f = new Nt({
              checkCorrectEvent: (g) =>
                (_.mouseButton(g) === 0 && g.ctrlKey) || _.mouseButton(g) === 2,
            });
            return new Zs({
              clickTolerance: a,
              move: (g, x) => ({ bearingDelta: (x.x - g.x) * d }),
              moveStateManager: f,
              enable: v,
              assignEvents: za,
            });
          },
          ih = ({
            enable: v,
            clickTolerance: a,
            pitchDegreesPerPixelMoved: d = -0.5,
          }) => {
            let f = new Nt({
              checkCorrectEvent: (g) =>
                (_.mouseButton(g) === 0 && g.ctrlKey) || _.mouseButton(g) === 2,
            });
            return new Zs({
              clickTolerance: a,
              move: (g, x) => ({ pitchDelta: (x.y - g.y) * d }),
              moveStateManager: f,
              enable: v,
              assignEvents: za,
            });
          };
        class Lt {
          constructor(a, d) {
            (this._clickTolerance = a.clickTolerance || 1),
              (this._map = d),
              this.reset();
          }
          reset() {
            (this._active = !1),
              (this._touches = {}),
              (this._sum = new n.P(0, 0));
          }
          minTouchs() {
            return this._map.cooperativeGestures.isEnabled() ? 2 : 1;
          }
          touchstart(a, d, f) {
            return this._calculateTransform(a, d, f);
          }
          touchmove(a, d, f) {
            if (this._active && !(f.length < this.minTouchs()))
              return a.preventDefault(), this._calculateTransform(a, d, f);
          }
          touchend(a, d, f) {
            this._calculateTransform(a, d, f),
              this._active && f.length < this.minTouchs() && this.reset();
          }
          touchcancel() {
            this.reset();
          }
          _calculateTransform(a, d, f) {
            f.length > 0 && (this._active = !0);
            let g = Yd(f, d),
              x = new n.P(0, 0),
              E = new n.P(0, 0),
              M = 0;
            for (let z in g) {
              let B = g[z],
                U = this._touches[z];
              U && (x._add(B), E._add(B.sub(U)), M++, (g[z] = B));
            }
            if (((this._touches = g), M < this.minTouchs() || !E.mag())) return;
            let I = E.div(M);
            return (
              this._sum._add(I),
              this._sum.mag() < this._clickTolerance
                ? void 0
                : { around: x.div(M), panDelta: I }
            );
          }
          enable() {
            this._enabled = !0;
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return this._enabled;
          }
          isActive() {
            return this._active;
          }
        }
        class yc {
          constructor() {
            this.reset();
          }
          reset() {
            (this._active = !1), delete this._firstTwoTouches;
          }
          touchstart(a, d, f) {
            this._firstTwoTouches ||
              f.length < 2 ||
              ((this._firstTwoTouches = [f[0].identifier, f[1].identifier]),
              this._start([d[0], d[1]]));
          }
          touchmove(a, d, f) {
            if (!this._firstTwoTouches) return;
            a.preventDefault();
            let [g, x] = this._firstTwoTouches,
              E = Eu(f, d, g),
              M = Eu(f, d, x);
            if (!E || !M) return;
            let I = this._aroundCenter ? null : E.add(M).div(2);
            return this._move([E, M], I, a);
          }
          touchend(a, d, f) {
            if (!this._firstTwoTouches) return;
            let [g, x] = this._firstTwoTouches,
              E = Eu(f, d, g),
              M = Eu(f, d, x);
            (E && M) || (this._active && _.suppressClick(), this.reset());
          }
          touchcancel() {
            this.reset();
          }
          enable(a) {
            (this._enabled = !0),
              (this._aroundCenter = !!a && a.around === "center");
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return !!this._enabled;
          }
          isActive() {
            return !!this._active;
          }
        }
        function Eu(v, a, d) {
          for (let f = 0; f < v.length; f++)
            if (v[f].identifier === d) return a[f];
        }
        function Df(v, a) {
          return Math.log(v / a) / Math.LN2;
        }
        class Tu extends yc {
          reset() {
            super.reset(), delete this._distance, delete this._startDistance;
          }
          _start(a) {
            this._startDistance = this._distance = a[0].dist(a[1]);
          }
          _move(a, d) {
            let f = this._distance;
            if (
              ((this._distance = a[0].dist(a[1])),
              this._active ||
                !(Math.abs(Df(this._distance, this._startDistance)) < 0.1))
            )
              return (
                (this._active = !0),
                { zoomDelta: Df(this._distance, f), pinchAround: d }
              );
          }
        }
        function rh(v, a) {
          return (180 * v.angleWith(a)) / Math.PI;
        }
        class nh extends yc {
          reset() {
            super.reset(),
              delete this._minDiameter,
              delete this._startVector,
              delete this._vector;
          }
          _start(a) {
            (this._startVector = this._vector = a[0].sub(a[1])),
              (this._minDiameter = a[0].dist(a[1]));
          }
          _move(a, d, f) {
            let g = this._vector;
            if (
              ((this._vector = a[0].sub(a[1])),
              this._active || !this._isBelowThreshold(this._vector))
            )
              return (
                (this._active = !0),
                { bearingDelta: rh(this._vector, g), pinchAround: d }
              );
          }
          _isBelowThreshold(a) {
            this._minDiameter = Math.min(this._minDiameter, a.mag());
            let d = (25 / (Math.PI * this._minDiameter)) * 360,
              f = rh(a, this._startVector);
            return Math.abs(f) < d;
          }
        }
        function oh(v) {
          return Math.abs(v.y) > Math.abs(v.x);
        }
        class Lf extends yc {
          constructor(a) {
            super(), (this._currentTouchCount = 0), (this._map = a);
          }
          reset() {
            super.reset(),
              (this._valid = void 0),
              delete this._firstMove,
              delete this._lastPoints;
          }
          touchstart(a, d, f) {
            super.touchstart(a, d, f), (this._currentTouchCount = f.length);
          }
          _start(a) {
            (this._lastPoints = a), oh(a[0].sub(a[1])) && (this._valid = !1);
          }
          _move(a, d, f) {
            if (
              this._map.cooperativeGestures.isEnabled() &&
              this._currentTouchCount < 3
            )
              return;
            let g = a[0].sub(this._lastPoints[0]),
              x = a[1].sub(this._lastPoints[1]);
            return (
              (this._valid = this.gestureBeginsVertically(g, x, f.timeStamp)),
              this._valid
                ? ((this._lastPoints = a),
                  (this._active = !0),
                  { pitchDelta: ((g.y + x.y) / 2) * -0.5 })
                : void 0
            );
          }
          gestureBeginsVertically(a, d, f) {
            if (this._valid !== void 0) return this._valid;
            let g = a.mag() >= 2,
              x = d.mag() >= 2;
            if (!g && !x) return;
            if (!g || !x)
              return (
                this._firstMove === void 0 && (this._firstMove = f),
                f - this._firstMove < 100 && void 0
              );
            let E = a.y > 0 == d.y > 0;
            return oh(a) && oh(d) && E;
          }
        }
        let Na = { panStep: 100, bearingStep: 15, pitchStep: 10 };
        class Mr {
          constructor(a) {
            this._tr = new To(a);
            let d = Na;
            (this._panStep = d.panStep),
              (this._bearingStep = d.bearingStep),
              (this._pitchStep = d.pitchStep),
              (this._rotationDisabled = !1);
          }
          reset() {
            this._active = !1;
          }
          keydown(a) {
            if (a.altKey || a.ctrlKey || a.metaKey) return;
            let d = 0,
              f = 0,
              g = 0,
              x = 0,
              E = 0;
            switch (a.keyCode) {
              case 61:
              case 107:
              case 171:
              case 187:
                d = 1;
                break;
              case 189:
              case 109:
              case 173:
                d = -1;
                break;
              case 37:
                a.shiftKey ? (f = -1) : (a.preventDefault(), (x = -1));
                break;
              case 39:
                a.shiftKey ? (f = 1) : (a.preventDefault(), (x = 1));
                break;
              case 38:
                a.shiftKey ? (g = 1) : (a.preventDefault(), (E = -1));
                break;
              case 40:
                a.shiftKey ? (g = -1) : (a.preventDefault(), (E = 1));
                break;
              default:
                return;
            }
            return (
              this._rotationDisabled && ((f = 0), (g = 0)),
              {
                cameraAnimation: (M) => {
                  let I = this._tr;
                  M.easeTo(
                    {
                      duration: 300,
                      easeId: "keyboardHandler",
                      easing: Mu,
                      zoom: d
                        ? Math.round(I.zoom) + d * (a.shiftKey ? 2 : 1)
                        : I.zoom,
                      bearing: I.bearing + f * this._bearingStep,
                      pitch: I.pitch + g * this._pitchStep,
                      offset: [-x * this._panStep, -E * this._panStep],
                      center: I.center,
                    },
                    { originalEvent: a }
                  );
                },
              }
            );
          }
          enable() {
            this._enabled = !0;
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return this._enabled;
          }
          isActive() {
            return this._active;
          }
          disableRotation() {
            this._rotationDisabled = !0;
          }
          enableRotation() {
            this._rotationDisabled = !1;
          }
        }
        function Mu(v) {
          return v * (2 - v);
        }
        let Au = 4.000244140625;
        class sh {
          constructor(a, d) {
            (this._onTimeout = (f) => {
              (this._type = "wheel"),
                (this._delta -= this._lastValue),
                this._active || this._start(f);
            }),
              (this._map = a),
              (this._tr = new To(a)),
              (this._triggerRenderFrame = d),
              (this._delta = 0),
              (this._defaultZoomRate = 0.01),
              (this._wheelZoomRate = 0.0022222222222222222);
          }
          setZoomRate(a) {
            this._defaultZoomRate = a;
          }
          setWheelZoomRate(a) {
            this._wheelZoomRate = a;
          }
          isEnabled() {
            return !!this._enabled;
          }
          isActive() {
            return !!this._active || this._finishTimeout !== void 0;
          }
          isZooming() {
            return !!this._zooming;
          }
          enable(a) {
            this.isEnabled() ||
              ((this._enabled = !0),
              (this._aroundCenter = !!a && a.around === "center"));
          }
          disable() {
            this.isEnabled() && (this._enabled = !1);
          }
          wheel(a) {
            if (
              !this.isEnabled() ||
              (this._map.cooperativeGestures.isEnabled() &&
                !a[this._map.cooperativeGestures._bypassKey])
            )
              return;
            let d =
                a.deltaMode === WheelEvent.DOM_DELTA_LINE
                  ? 40 * a.deltaY
                  : a.deltaY,
              f = b.now(),
              g = f - (this._lastWheelEventTime || 0);
            (this._lastWheelEventTime = f),
              d !== 0 && d % Au == 0
                ? (this._type = "wheel")
                : d !== 0 && Math.abs(d) < 4
                ? (this._type = "trackpad")
                : g > 400
                ? ((this._type = null),
                  (this._lastValue = d),
                  (this._timeout = setTimeout(this._onTimeout, 40, a)))
                : this._type ||
                  ((this._type = Math.abs(g * d) < 200 ? "trackpad" : "wheel"),
                  this._timeout &&
                    (clearTimeout(this._timeout),
                    (this._timeout = null),
                    (d += this._lastValue))),
              a.shiftKey && d && (d /= 4),
              this._type &&
                ((this._lastWheelEvent = a),
                (this._delta -= d),
                this._active || this._start(a)),
              a.preventDefault();
          }
          _start(a) {
            if (!this._delta) return;
            this._frameId && (this._frameId = null),
              (this._active = !0),
              this.isZooming() || (this._zooming = !0),
              this._finishTimeout &&
                (clearTimeout(this._finishTimeout), delete this._finishTimeout);
            let d = _.mousePos(this._map.getCanvas(), a),
              f = this._tr;
            (this._around =
              d.y > f.transform.height / 2 - f.transform.getHorizon()
                ? n.M.convert(this._aroundCenter ? f.center : f.unproject(d))
                : n.M.convert(f.center)),
              (this._aroundPoint = f.transform.locationPoint(this._around)),
              this._frameId ||
                ((this._frameId = !0), this._triggerRenderFrame());
          }
          renderFrame() {
            if (!this._frameId || ((this._frameId = null), !this.isActive()))
              return;
            let a = this._tr.transform;
            if (this._delta !== 0) {
              let M =
                  this._type === "wheel" && Math.abs(this._delta) > Au
                    ? this._wheelZoomRate
                    : this._defaultZoomRate,
                I = 2 / (1 + Math.exp(-Math.abs(this._delta * M)));
              this._delta < 0 && I !== 0 && (I = 1 / I);
              let z =
                typeof this._targetZoom == "number"
                  ? a.zoomScale(this._targetZoom)
                  : a.scale;
              (this._targetZoom = Math.min(
                a.maxZoom,
                Math.max(a.minZoom, a.scaleZoom(z * I))
              )),
                this._type === "wheel" &&
                  ((this._startZoom = a.zoom),
                  (this._easing = this._smoothOutEasing(200))),
                (this._delta = 0);
            }
            let d =
                typeof this._targetZoom == "number" ? this._targetZoom : a.zoom,
              f = this._startZoom,
              g = this._easing,
              x,
              E = !1;
            if (this._type === "wheel" && f && g) {
              let M = Math.min((b.now() - this._lastWheelEventTime) / 200, 1),
                I = g(M);
              (x = n.z.number(f, d, I)),
                M < 1 ? this._frameId || (this._frameId = !0) : (E = !0);
            } else (x = d), (E = !0);
            return (
              (this._active = !0),
              E &&
                ((this._active = !1),
                (this._finishTimeout = setTimeout(() => {
                  (this._zooming = !1),
                    this._triggerRenderFrame(),
                    delete this._targetZoom,
                    delete this._finishTimeout;
                }, 200))),
              {
                noInertia: !0,
                needsRenderFrame: !E,
                zoomDelta: x - a.zoom,
                around: this._aroundPoint,
                originalEvent: this._lastWheelEvent,
              }
            );
          }
          _smoothOutEasing(a) {
            let d = n.b7;
            if (this._prevEase) {
              let f = this._prevEase,
                g = (b.now() - f.start) / f.duration,
                x = f.easing(g + 0.01) - f.easing(g),
                E = (0.27 / Math.sqrt(x * x + 1e-4)) * 0.01,
                M = Math.sqrt(0.0729 - E * E);
              d = n.b6(E, M, 0.25, 1);
            }
            return (
              (this._prevEase = { start: b.now(), duration: a, easing: d }), d
            );
          }
          reset() {
            (this._active = !1),
              (this._zooming = !1),
              delete this._targetZoom,
              this._finishTimeout &&
                (clearTimeout(this._finishTimeout), delete this._finishTimeout);
          }
        }
        class ah {
          constructor(a, d) {
            (this._clickZoom = a), (this._tapZoom = d);
          }
          enable() {
            this._clickZoom.enable(), this._tapZoom.enable();
          }
          disable() {
            this._clickZoom.disable(), this._tapZoom.disable();
          }
          isEnabled() {
            return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();
          }
          isActive() {
            return this._clickZoom.isActive() || this._tapZoom.isActive();
          }
        }
        class Ff {
          constructor(a) {
            (this._tr = new To(a)), this.reset();
          }
          reset() {
            this._active = !1;
          }
          dblclick(a, d) {
            return (
              a.preventDefault(),
              {
                cameraAnimation: (f) => {
                  f.easeTo(
                    {
                      duration: 300,
                      zoom: this._tr.zoom + (a.shiftKey ? -1 : 1),
                      around: this._tr.unproject(d),
                    },
                    { originalEvent: a }
                  );
                },
              }
            );
          }
          enable() {
            this._enabled = !0;
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return this._enabled;
          }
          isActive() {
            return this._active;
          }
        }
        class m1 {
          constructor() {
            (this._tap = new eh({ numTouches: 1, numTaps: 1 })), this.reset();
          }
          reset() {
            (this._active = !1),
              delete this._swipePoint,
              delete this._swipeTouch,
              delete this._tapTime,
              delete this._tapPoint,
              this._tap.reset();
          }
          touchstart(a, d, f) {
            if (!this._swipePoint)
              if (this._tapTime) {
                let g = d[0],
                  x = a.timeStamp - this._tapTime < 500,
                  E = this._tapPoint.dist(g) < 30;
                x && E
                  ? f.length > 0 &&
                    ((this._swipePoint = g),
                    (this._swipeTouch = f[0].identifier))
                  : this.reset();
              } else this._tap.touchstart(a, d, f);
          }
          touchmove(a, d, f) {
            if (this._tapTime) {
              if (this._swipePoint) {
                if (f[0].identifier !== this._swipeTouch) return;
                let g = d[0],
                  x = g.y - this._swipePoint.y;
                return (
                  (this._swipePoint = g),
                  a.preventDefault(),
                  (this._active = !0),
                  { zoomDelta: x / 128 }
                );
              }
            } else this._tap.touchmove(a, d, f);
          }
          touchend(a, d, f) {
            if (this._tapTime)
              this._swipePoint && f.length === 0 && this.reset();
            else {
              let g = this._tap.touchend(a, d, f);
              g && ((this._tapTime = a.timeStamp), (this._tapPoint = g));
            }
          }
          touchcancel() {
            this.reset();
          }
          enable() {
            this._enabled = !0;
          }
          disable() {
            (this._enabled = !1), this.reset();
          }
          isEnabled() {
            return this._enabled;
          }
          isActive() {
            return this._active;
          }
        }
        class fs {
          constructor(a, d, f) {
            (this._el = a), (this._mousePan = d), (this._touchPan = f);
          }
          enable(a) {
            (this._inertiaOptions = a || {}),
              this._mousePan.enable(),
              this._touchPan.enable(),
              this._el.classList.add("maplibregl-touch-drag-pan");
          }
          disable() {
            this._mousePan.disable(),
              this._touchPan.disable(),
              this._el.classList.remove("maplibregl-touch-drag-pan");
          }
          isEnabled() {
            return this._mousePan.isEnabled() && this._touchPan.isEnabled();
          }
          isActive() {
            return this._mousePan.isActive() || this._touchPan.isActive();
          }
        }
        class bc {
          constructor(a, d, f) {
            (this._pitchWithRotate = a.pitchWithRotate),
              (this._mouseRotate = d),
              (this._mousePitch = f);
          }
          enable() {
            this._mouseRotate.enable(),
              this._pitchWithRotate && this._mousePitch.enable();
          }
          disable() {
            this._mouseRotate.disable(), this._mousePitch.disable();
          }
          isEnabled() {
            return (
              this._mouseRotate.isEnabled() &&
              (!this._pitchWithRotate || this._mousePitch.isEnabled())
            );
          }
          isActive() {
            return this._mouseRotate.isActive() || this._mousePitch.isActive();
          }
        }
        class Kt {
          constructor(a, d, f, g) {
            (this._el = a),
              (this._touchZoom = d),
              (this._touchRotate = f),
              (this._tapDragZoom = g),
              (this._rotationDisabled = !1),
              (this._enabled = !0);
          }
          enable(a) {
            this._touchZoom.enable(a),
              this._rotationDisabled || this._touchRotate.enable(a),
              this._tapDragZoom.enable(),
              this._el.classList.add("maplibregl-touch-zoom-rotate");
          }
          disable() {
            this._touchZoom.disable(),
              this._touchRotate.disable(),
              this._tapDragZoom.disable(),
              this._el.classList.remove("maplibregl-touch-zoom-rotate");
          }
          isEnabled() {
            return (
              this._touchZoom.isEnabled() &&
              (this._rotationDisabled || this._touchRotate.isEnabled()) &&
              this._tapDragZoom.isEnabled()
            );
          }
          isActive() {
            return (
              this._touchZoom.isActive() ||
              this._touchRotate.isActive() ||
              this._tapDragZoom.isActive()
            );
          }
          disableRotation() {
            (this._rotationDisabled = !0), this._touchRotate.disable();
          }
          enableRotation() {
            (this._rotationDisabled = !1),
              this._touchZoom.isEnabled() && this._touchRotate.enable();
          }
        }
        class si {
          constructor(a, d) {
            (this._bypassKey =
              navigator.userAgent.indexOf("Mac") !== -1
                ? "metaKey"
                : "ctrlKey"),
              (this._map = a),
              (this._options = d),
              (this._enabled = !1);
          }
          isActive() {
            return !1;
          }
          reset() {}
          _setupUI() {
            if (this._container) return;
            let a = this._map.getCanvasContainer();
            a.classList.add("maplibregl-cooperative-gestures"),
              (this._container = _.create(
                "div",
                "maplibregl-cooperative-gesture-screen",
                a
              ));
            let d = this._map._getUIString(
              "CooperativeGesturesHandler.WindowsHelpText"
            );
            this._bypassKey === "metaKey" &&
              (d = this._map._getUIString(
                "CooperativeGesturesHandler.MacHelpText"
              ));
            let f = this._map._getUIString(
                "CooperativeGesturesHandler.MobileHelpText"
              ),
              g = document.createElement("div");
            (g.className = "maplibregl-desktop-message"),
              (g.textContent = d),
              this._container.appendChild(g);
            let x = document.createElement("div");
            (x.className = "maplibregl-mobile-message"),
              (x.textContent = f),
              this._container.appendChild(x),
              this._container.setAttribute("aria-hidden", "true");
          }
          _destoryUI() {
            this._container &&
              (_.remove(this._container),
              this._map
                .getCanvasContainer()
                .classList.remove("maplibregl-cooperative-gestures")),
              delete this._container;
          }
          enable() {
            this._setupUI(), (this._enabled = !0);
          }
          disable() {
            (this._enabled = !1), this._destoryUI();
          }
          isEnabled() {
            return this._enabled;
          }
          touchmove(a) {
            this._onCooperativeGesture(a.touches.length === 1);
          }
          wheel(a) {
            this._map.scrollZoom.isEnabled() &&
              this._onCooperativeGesture(!a[this._bypassKey]);
          }
          _onCooperativeGesture(a) {
            this._enabled &&
              a &&
              (this._container.classList.add("maplibregl-show"),
              setTimeout(() => {
                this._container.classList.remove("maplibregl-show");
              }, 100));
          }
        }
        let Oa = (v) => v.zoom || v.drag || v.pitch || v.rotate;
        class lh extends n.k {}
        function vc(v) {
          return (
            (v.panDelta && v.panDelta.mag()) ||
            v.zoomDelta ||
            v.bearingDelta ||
            v.pitchDelta
          );
        }
        class Mo {
          constructor(a, d) {
            (this.handleWindowEvent = (g) => {
              this.handleEvent(g, `${g.type}Window`);
            }),
              (this.handleEvent = (g, x) => {
                if (g.type === "blur") return void this.stop(!0);
                this._updatingCamera = !0;
                let E = g.type === "renderFrame" ? void 0 : g,
                  M = { needsRenderFrame: !1 },
                  I = {},
                  z = {},
                  B = g.touches,
                  U = B ? this._getMapTouches(B) : void 0,
                  Z = U
                    ? _.touchPos(this._map.getCanvas(), U)
                    : _.mousePos(this._map.getCanvas(), g);
                for (let { handlerName: le, handler: ee, allowed: _e } of this
                  ._handlers) {
                  if (!ee.isEnabled()) continue;
                  let Be;
                  this._blockedByActive(z, _e, le)
                    ? ee.reset()
                    : ee[x || g.type] &&
                      ((Be = ee[x || g.type](g, Z, U)),
                      this.mergeHandlerResult(M, I, Be, le, E),
                      Be && Be.needsRenderFrame && this._triggerRenderFrame()),
                    (Be || ee.isActive()) && (z[le] = ee);
                }
                let se = {};
                for (let le in this._previousActiveHandlers)
                  z[le] || (se[le] = E);
                (this._previousActiveHandlers = z),
                  (Object.keys(se).length || vc(M)) &&
                    (this._changes.push([M, I, se]),
                    this._triggerRenderFrame()),
                  (Object.keys(z).length || vc(M)) && this._map._stop(!0),
                  (this._updatingCamera = !1);
                let { cameraAnimation: oe } = M;
                oe &&
                  (this._inertia.clear(),
                  this._fireEvents({}, {}, !0),
                  (this._changes = []),
                  oe(this._map));
              }),
              (this._map = a),
              (this._el = this._map.getCanvasContainer()),
              (this._handlers = []),
              (this._handlersById = {}),
              (this._changes = []),
              (this._inertia = new Af(a)),
              (this._bearingSnap = d.bearingSnap),
              (this._previousActiveHandlers = {}),
              (this._eventsInProgress = {}),
              this._addDefaultHandlers(d);
            let f = this._el;
            this._listeners = [
              [f, "touchstart", { passive: !0 }],
              [f, "touchmove", { passive: !1 }],
              [f, "touchend", void 0],
              [f, "touchcancel", void 0],
              [f, "mousedown", void 0],
              [f, "mousemove", void 0],
              [f, "mouseup", void 0],
              [document, "mousemove", { capture: !0 }],
              [document, "mouseup", void 0],
              [f, "mouseover", void 0],
              [f, "mouseout", void 0],
              [f, "dblclick", void 0],
              [f, "click", void 0],
              [f, "keydown", { capture: !1 }],
              [f, "keyup", void 0],
              [f, "wheel", { passive: !1 }],
              [f, "contextmenu", void 0],
              [window, "blur", void 0],
            ];
            for (let [g, x, E] of this._listeners)
              _.addEventListener(
                g,
                x,
                g === document ? this.handleWindowEvent : this.handleEvent,
                E
              );
          }
          destroy() {
            for (let [a, d, f] of this._listeners)
              _.removeEventListener(
                a,
                d,
                a === document ? this.handleWindowEvent : this.handleEvent,
                f
              );
          }
          _addDefaultHandlers(a) {
            let d = this._map,
              f = d.getCanvasContainer();
            this._add("mapEvent", new As(d, a));
            let g = (d.boxZoom = new zl(d, a));
            this._add("boxZoom", g), a.interactive && a.boxZoom && g.enable();
            let x = (d.cooperativeGestures = new si(d, a.cooperativeGestures));
            this._add("cooperativeGestures", x),
              a.cooperativeGestures && x.enable();
            let E = new Pf(d),
              M = new Ff(d);
            (d.doubleClickZoom = new ah(M, E)),
              this._add("tapZoom", E),
              this._add("clickZoom", M),
              a.interactive && a.doubleClickZoom && d.doubleClickZoom.enable();
            let I = new m1();
            this._add("tapDragZoom", I);
            let z = (d.touchPitch = new Lf(d));
            this._add("touchPitch", z),
              a.interactive &&
                a.touchPitch &&
                d.touchPitch.enable(a.touchPitch);
            let B = Nl(a),
              U = ih(a);
            (d.dragRotate = new bc(a, B, U)),
              this._add("mouseRotate", B, ["mousePitch"]),
              this._add("mousePitch", U, ["mouseRotate"]),
              a.interactive && a.dragRotate && d.dragRotate.enable();
            let Z = (({ enable: Be, clickTolerance: he }) => {
                let Ee = new Nt({
                  checkCorrectEvent: (Ue) =>
                    _.mouseButton(Ue) === 0 && !Ue.ctrlKey,
                });
                return new Zs({
                  clickTolerance: he,
                  move: (Ue, Ve) => ({ around: Ve, panDelta: Ve.sub(Ue) }),
                  activateOnStart: !0,
                  moveStateManager: Ee,
                  enable: Be,
                  assignEvents: za,
                });
              })(a),
              se = new Lt(a, d);
            (d.dragPan = new fs(f, Z, se)),
              this._add("mousePan", Z),
              this._add("touchPan", se, ["touchZoom", "touchRotate"]),
              a.interactive && a.dragPan && d.dragPan.enable(a.dragPan);
            let oe = new nh(),
              le = new Tu();
            (d.touchZoomRotate = new Kt(f, le, oe, I)),
              this._add("touchRotate", oe, ["touchPan", "touchZoom"]),
              this._add("touchZoom", le, ["touchPan", "touchRotate"]),
              a.interactive &&
                a.touchZoomRotate &&
                d.touchZoomRotate.enable(a.touchZoomRotate);
            let ee = (d.scrollZoom = new sh(d, () =>
              this._triggerRenderFrame()
            ));
            this._add("scrollZoom", ee, ["mousePan"]),
              a.interactive &&
                a.scrollZoom &&
                d.scrollZoom.enable(a.scrollZoom);
            let _e = (d.keyboard = new Mr(d));
            this._add("keyboard", _e),
              a.interactive && a.keyboard && d.keyboard.enable(),
              this._add("blockableMapEvent", new If(d));
          }
          _add(a, d, f) {
            this._handlers.push({ handlerName: a, handler: d, allowed: f }),
              (this._handlersById[a] = d);
          }
          stop(a) {
            if (!this._updatingCamera) {
              for (let { handler: d } of this._handlers) d.reset();
              this._inertia.clear(),
                this._fireEvents({}, {}, a),
                (this._changes = []);
            }
          }
          isActive() {
            for (let { handler: a } of this._handlers)
              if (a.isActive()) return !0;
            return !1;
          }
          isZooming() {
            return (
              !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming()
            );
          }
          isRotating() {
            return !!this._eventsInProgress.rotate;
          }
          isMoving() {
            return !!Oa(this._eventsInProgress) || this.isZooming();
          }
          _blockedByActive(a, d, f) {
            for (let g in a) if (g !== f && (!d || d.indexOf(g) < 0)) return !0;
            return !1;
          }
          _getMapTouches(a) {
            let d = [];
            for (let f of a) this._el.contains(f.target) && d.push(f);
            return d;
          }
          mergeHandlerResult(a, d, f, g, x) {
            if (!f) return;
            n.e(a, f);
            let E = { handlerName: g, originalEvent: f.originalEvent || x };
            f.zoomDelta !== void 0 && (d.zoom = E),
              f.panDelta !== void 0 && (d.drag = E),
              f.pitchDelta !== void 0 && (d.pitch = E),
              f.bearingDelta !== void 0 && (d.rotate = E);
          }
          _applyChanges() {
            let a = {},
              d = {},
              f = {};
            for (let [g, x, E] of this._changes)
              g.panDelta &&
                (a.panDelta = (a.panDelta || new n.P(0, 0))._add(g.panDelta)),
                g.zoomDelta && (a.zoomDelta = (a.zoomDelta || 0) + g.zoomDelta),
                g.bearingDelta &&
                  (a.bearingDelta = (a.bearingDelta || 0) + g.bearingDelta),
                g.pitchDelta &&
                  (a.pitchDelta = (a.pitchDelta || 0) + g.pitchDelta),
                g.around !== void 0 && (a.around = g.around),
                g.pinchAround !== void 0 && (a.pinchAround = g.pinchAround),
                g.noInertia && (a.noInertia = g.noInertia),
                n.e(d, x),
                n.e(f, E);
            this._updateMapTransform(a, d, f), (this._changes = []);
          }
          _updateMapTransform(a, d, f) {
            let g = this._map,
              x = g._getTransformForUpdate(),
              E = g.terrain;
            if (!(vc(a) || (E && this._terrainMovement)))
              return this._fireEvents(d, f, !0);
            let {
              panDelta: M,
              zoomDelta: I,
              bearingDelta: z,
              pitchDelta: B,
              around: U,
              pinchAround: Z,
            } = a;
            Z !== void 0 && (U = Z),
              g._stop(!0),
              (U = U || g.transform.centerPoint);
            let se = x.pointLocation(M ? U.sub(M) : U);
            z && (x.bearing += z),
              B && (x.pitch += B),
              I && (x.zoom += I),
              E
                ? this._terrainMovement || (!d.drag && !d.zoom)
                  ? d.drag && this._terrainMovement
                    ? (x.center = x.pointLocation(x.centerPoint.sub(M)))
                    : x.setLocationAtPoint(se, U)
                  : ((this._terrainMovement = !0),
                    (this._map._elevationFreeze = !0),
                    x.setLocationAtPoint(se, U),
                    this._map.once("moveend", () => {
                      (this._map._elevationFreeze = !1),
                        (this._terrainMovement = !1),
                        x.recalculateZoom(g.terrain);
                    }))
                : x.setLocationAtPoint(se, U),
              g._applyUpdatedTransform(x),
              this._map._update(),
              a.noInertia || this._inertia.record(a),
              this._fireEvents(d, f, !0);
          }
          _fireEvents(a, d, f) {
            let g = Oa(this._eventsInProgress),
              x = Oa(a),
              E = {};
            for (let B in a) {
              let { originalEvent: U } = a[B];
              this._eventsInProgress[B] || (E[`${B}start`] = U),
                (this._eventsInProgress[B] = a[B]);
            }
            !g && x && this._fireEvent("movestart", x.originalEvent);
            for (let B in E) this._fireEvent(B, E[B]);
            x && this._fireEvent("move", x.originalEvent);
            for (let B in a) {
              let { originalEvent: U } = a[B];
              this._fireEvent(B, U);
            }
            let M = {},
              I;
            for (let B in this._eventsInProgress) {
              let { handlerName: U, originalEvent: Z } =
                this._eventsInProgress[B];
              this._handlersById[U].isActive() ||
                (delete this._eventsInProgress[B],
                (I = d[U] || Z),
                (M[`${B}end`] = I));
            }
            for (let B in M) this._fireEvent(B, M[B]);
            let z = Oa(this._eventsInProgress);
            if (f && (g || x) && !z) {
              this._updatingCamera = !0;
              let B = this._inertia._onMoveEnd(
                  this._map.dragPan._inertiaOptions
                ),
                U = (Z) =>
                  Z !== 0 && -this._bearingSnap < Z && Z < this._bearingSnap;
              !B || (!B.essential && b.prefersReducedMotion)
                ? (this._map.fire(new n.k("moveend", { originalEvent: I })),
                  U(this._map.getBearing()) && this._map.resetNorth())
                : (U(B.bearing || this._map.getBearing()) && (B.bearing = 0),
                  (B.freezeElevation = !0),
                  this._map.easeTo(B, { originalEvent: I })),
                (this._updatingCamera = !1);
            }
          }
          _fireEvent(a, d) {
            this._map.fire(new n.k(a, d ? { originalEvent: d } : {}));
          }
          _requestFrame() {
            return (
              this._map.triggerRepaint(),
              this._map._renderTaskQueue.add((a) => {
                delete this._frameId,
                  this.handleEvent(new lh("renderFrame", { timeStamp: a })),
                  this._applyChanges();
              })
            );
          }
          _triggerRenderFrame() {
            this._frameId === void 0 && (this._frameId = this._requestFrame());
          }
        }
        class zf extends n.E {
          constructor(a, d) {
            super(),
              (this._renderFrameCallback = () => {
                let f = Math.min(
                  (b.now() - this._easeStart) / this._easeOptions.duration,
                  1
                );
                this._onEaseFrame(this._easeOptions.easing(f)),
                  f < 1 && this._easeFrameId
                    ? (this._easeFrameId = this._requestRenderFrame(
                        this._renderFrameCallback
                      ))
                    : this.stop();
              }),
              (this._moving = !1),
              (this._zooming = !1),
              (this.transform = a),
              (this._bearingSnap = d.bearingSnap),
              this.on("moveend", () => {
                delete this._requestedCameraState;
              });
          }
          getCenter() {
            return new n.M(
              this.transform.center.lng,
              this.transform.center.lat
            );
          }
          setCenter(a, d) {
            return this.jumpTo({ center: a }, d);
          }
          panBy(a, d, f) {
            return (
              (a = n.P.convert(a).mult(-1)),
              this.panTo(this.transform.center, n.e({ offset: a }, d), f)
            );
          }
          panTo(a, d, f) {
            return this.easeTo(n.e({ center: a }, d), f);
          }
          getZoom() {
            return this.transform.zoom;
          }
          setZoom(a, d) {
            return this.jumpTo({ zoom: a }, d), this;
          }
          zoomTo(a, d, f) {
            return this.easeTo(n.e({ zoom: a }, d), f);
          }
          zoomIn(a, d) {
            return this.zoomTo(this.getZoom() + 1, a, d), this;
          }
          zoomOut(a, d) {
            return this.zoomTo(this.getZoom() - 1, a, d), this;
          }
          getBearing() {
            return this.transform.bearing;
          }
          setBearing(a, d) {
            return this.jumpTo({ bearing: a }, d), this;
          }
          getPadding() {
            return this.transform.padding;
          }
          setPadding(a, d) {
            return this.jumpTo({ padding: a }, d), this;
          }
          rotateTo(a, d, f) {
            return this.easeTo(n.e({ bearing: a }, d), f);
          }
          resetNorth(a, d) {
            return this.rotateTo(0, n.e({ duration: 1e3 }, a), d), this;
          }
          resetNorthPitch(a, d) {
            return (
              this.easeTo(n.e({ bearing: 0, pitch: 0, duration: 1e3 }, a), d),
              this
            );
          }
          snapToNorth(a, d) {
            return Math.abs(this.getBearing()) < this._bearingSnap
              ? this.resetNorth(a, d)
              : this;
          }
          getPitch() {
            return this.transform.pitch;
          }
          setPitch(a, d) {
            return this.jumpTo({ pitch: a }, d), this;
          }
          cameraForBounds(a, d) {
            a = pt.convert(a);
            let f = (d && d.bearing) || 0;
            return this._cameraForBoxAndBearing(
              a.getNorthWest(),
              a.getSouthEast(),
              f,
              d
            );
          }
          _cameraForBoxAndBearing(a, d, f, g) {
            let x = { top: 0, bottom: 0, right: 0, left: 0 };
            if (
              typeof (g = n.e(
                { padding: x, offset: [0, 0], maxZoom: this.transform.maxZoom },
                g
              )).padding == "number"
            ) {
              let Ft = g.padding;
              g.padding = { top: Ft, bottom: Ft, right: Ft, left: Ft };
            }
            g.padding = n.e(x, g.padding);
            let E = this.transform,
              M = E.padding,
              I = new pt(a, d),
              z = E.project(I.getNorthWest()),
              B = E.project(I.getNorthEast()),
              U = E.project(I.getSouthEast()),
              Z = E.project(I.getSouthWest()),
              se = n.b8(-f),
              oe = z.rotate(se),
              le = B.rotate(se),
              ee = U.rotate(se),
              _e = Z.rotate(se),
              Be = new n.P(
                Math.max(oe.x, le.x, _e.x, ee.x),
                Math.max(oe.y, le.y, _e.y, ee.y)
              ),
              he = new n.P(
                Math.min(oe.x, le.x, _e.x, ee.x),
                Math.min(oe.y, le.y, _e.y, ee.y)
              ),
              Ee = Be.sub(he),
              Ue =
                (E.width -
                  (M.left + M.right + g.padding.left + g.padding.right)) /
                Ee.x,
              Ve =
                (E.height -
                  (M.top + M.bottom + g.padding.top + g.padding.bottom)) /
                Ee.y;
            if (Ve < 0 || Ue < 0)
              return void n.w(
                "Map cannot fit within canvas with the given bounds, padding, and/or offset."
              );
            let Ge = Math.min(
                E.scaleZoom(E.scale * Math.min(Ue, Ve)),
                g.maxZoom
              ),
              ot = n.P.convert(g.offset),
              rt = new n.P(
                (g.padding.left - g.padding.right) / 2,
                (g.padding.top - g.padding.bottom) / 2
              ).rotate(n.b8(f)),
              nt = ot.add(rt).mult(E.scale / E.zoomScale(Ge));
            return {
              center: E.unproject(z.add(U).div(2).sub(nt)),
              zoom: Ge,
              bearing: f,
            };
          }
          fitBounds(a, d, f) {
            return this._fitInternal(this.cameraForBounds(a, d), d, f);
          }
          fitScreenCoordinates(a, d, f, g, x) {
            return this._fitInternal(
              this._cameraForBoxAndBearing(
                this.transform.pointLocation(n.P.convert(a)),
                this.transform.pointLocation(n.P.convert(d)),
                f,
                g
              ),
              g,
              x
            );
          }
          _fitInternal(a, d, f) {
            return a
              ? (delete (d = n.e(a, d)).padding,
                d.linear ? this.easeTo(d, f) : this.flyTo(d, f))
              : this;
          }
          jumpTo(a, d) {
            this.stop();
            let f = this._getTransformForUpdate(),
              g = !1,
              x = !1,
              E = !1;
            return (
              "zoom" in a &&
                f.zoom !== +a.zoom &&
                ((g = !0), (f.zoom = +a.zoom)),
              a.center !== void 0 && (f.center = n.M.convert(a.center)),
              "bearing" in a &&
                f.bearing !== +a.bearing &&
                ((x = !0), (f.bearing = +a.bearing)),
              "pitch" in a &&
                f.pitch !== +a.pitch &&
                ((E = !0), (f.pitch = +a.pitch)),
              a.padding == null ||
                f.isPaddingEqual(a.padding) ||
                (f.padding = a.padding),
              this._applyUpdatedTransform(f),
              this.fire(new n.k("movestart", d)).fire(new n.k("move", d)),
              g &&
                this.fire(new n.k("zoomstart", d))
                  .fire(new n.k("zoom", d))
                  .fire(new n.k("zoomend", d)),
              x &&
                this.fire(new n.k("rotatestart", d))
                  .fire(new n.k("rotate", d))
                  .fire(new n.k("rotateend", d)),
              E &&
                this.fire(new n.k("pitchstart", d))
                  .fire(new n.k("pitch", d))
                  .fire(new n.k("pitchend", d)),
              this.fire(new n.k("moveend", d))
            );
          }
          calculateCameraOptionsFromTo(a, d, f, g = 0) {
            let x = n.Y.fromLngLat(a, d),
              E = n.Y.fromLngLat(f, g),
              M = E.x - x.x,
              I = E.y - x.y,
              z = E.z - x.z,
              B = Math.hypot(M, I, z);
            if (B === 0)
              throw new Error(
                "Can't calculate camera options with same From and To"
              );
            let U = Math.hypot(M, I),
              Z = this.transform.scaleZoom(
                this.transform.cameraToCenterDistance /
                  B /
                  this.transform.tileSize
              ),
              se = (180 * Math.atan2(M, -I)) / Math.PI,
              oe = (180 * Math.acos(U / B)) / Math.PI;
            return (
              (oe = z < 0 ? 90 - oe : 90 + oe),
              { center: E.toLngLat(), zoom: Z, pitch: oe, bearing: se }
            );
          }
          easeTo(a, d) {
            var f;
            this._stop(!1, a.easeId),
              ((a = n.e({ offset: [0, 0], duration: 500, easing: n.b7 }, a))
                .animate === !1 ||
                (!a.essential && b.prefersReducedMotion)) &&
                (a.duration = 0);
            let g = this._getTransformForUpdate(),
              x = this.getZoom(),
              E = this.getBearing(),
              M = this.getPitch(),
              I = this.getPadding(),
              z = "bearing" in a ? this._normalizeBearing(a.bearing, E) : E,
              B = "pitch" in a ? +a.pitch : M,
              U = "padding" in a ? a.padding : g.padding,
              Z = n.P.convert(a.offset),
              se = g.centerPoint.add(Z),
              oe = g.pointLocation(se),
              { center: le, zoom: ee } = g.getConstrained(
                n.M.convert(a.center || oe),
                (f = a.zoom) !== null && f !== void 0 ? f : x
              );
            this._normalizeCenter(le);
            let _e = g.project(oe),
              Be = g.project(le).sub(_e),
              he = g.zoomScale(ee - x),
              Ee,
              Ue;
            a.around &&
              ((Ee = n.M.convert(a.around)), (Ue = g.locationPoint(Ee)));
            let Ve = {
              moving: this._moving,
              zooming: this._zooming,
              rotating: this._rotating,
              pitching: this._pitching,
            };
            return (
              (this._zooming = this._zooming || ee !== x),
              (this._rotating = this._rotating || E !== z),
              (this._pitching = this._pitching || B !== M),
              (this._padding = !g.isPaddingEqual(U)),
              (this._easeId = a.easeId),
              this._prepareEase(d, a.noMoveStart, Ve),
              this.terrain && this._prepareElevation(le),
              this._ease(
                (Ge) => {
                  if (
                    (this._zooming && (g.zoom = n.z.number(x, ee, Ge)),
                    this._rotating && (g.bearing = n.z.number(E, z, Ge)),
                    this._pitching && (g.pitch = n.z.number(M, B, Ge)),
                    this._padding &&
                      (g.interpolatePadding(I, U, Ge),
                      (se = g.centerPoint.add(Z))),
                    this.terrain &&
                      !a.freezeElevation &&
                      this._updateElevation(Ge),
                    Ee)
                  )
                    g.setLocationAtPoint(Ee, Ue);
                  else {
                    let ot = g.zoomScale(g.zoom - x),
                      rt = ee > x ? Math.min(2, he) : Math.max(0.5, he),
                      nt = Math.pow(rt, 1 - Ge),
                      Ft = g.unproject(_e.add(Be.mult(Ge * nt)).mult(ot));
                    g.setLocationAtPoint(
                      g.renderWorldCopies ? Ft.wrap() : Ft,
                      se
                    );
                  }
                  this._applyUpdatedTransform(g), this._fireMoveEvents(d);
                },
                (Ge) => {
                  this.terrain && this._finalizeElevation(),
                    this._afterEase(d, Ge);
                },
                a
              ),
              this
            );
          }
          _prepareEase(a, d, f = {}) {
            (this._moving = !0),
              d || f.moving || this.fire(new n.k("movestart", a)),
              this._zooming && !f.zooming && this.fire(new n.k("zoomstart", a)),
              this._rotating &&
                !f.rotating &&
                this.fire(new n.k("rotatestart", a)),
              this._pitching &&
                !f.pitching &&
                this.fire(new n.k("pitchstart", a));
          }
          _prepareElevation(a) {
            (this._elevationCenter = a),
              (this._elevationStart = this.transform.elevation),
              (this._elevationTarget = this.terrain.getElevationForLngLatZoom(
                a,
                this.transform.tileZoom
              )),
              (this._elevationFreeze = !0);
          }
          _updateElevation(a) {
            this.transform.minElevationForCurrentTile =
              this.terrain.getMinTileElevationForLngLatZoom(
                this._elevationCenter,
                this.transform.tileZoom
              );
            let d = this.terrain.getElevationForLngLatZoom(
              this._elevationCenter,
              this.transform.tileZoom
            );
            if (a < 1 && d !== this._elevationTarget) {
              let f = this._elevationTarget - this._elevationStart;
              (this._elevationStart +=
                a * (f - (d - (f * a + this._elevationStart)) / (1 - a))),
                (this._elevationTarget = d);
            }
            this.transform.elevation = n.z.number(
              this._elevationStart,
              this._elevationTarget,
              a
            );
          }
          _finalizeElevation() {
            (this._elevationFreeze = !1),
              this.transform.recalculateZoom(this.terrain);
          }
          _getTransformForUpdate() {
            return this.transformCameraUpdate
              ? (this._requestedCameraState ||
                  (this._requestedCameraState = this.transform.clone()),
                this._requestedCameraState)
              : this.transform;
          }
          _applyUpdatedTransform(a) {
            if (!this.transformCameraUpdate) return;
            let d = a.clone(),
              {
                center: f,
                zoom: g,
                pitch: x,
                bearing: E,
                elevation: M,
              } = this.transformCameraUpdate(d);
            f && (d.center = f),
              g !== void 0 && (d.zoom = g),
              x !== void 0 && (d.pitch = x),
              E !== void 0 && (d.bearing = E),
              M !== void 0 && (d.elevation = M),
              this.transform.apply(d);
          }
          _fireMoveEvents(a) {
            this.fire(new n.k("move", a)),
              this._zooming && this.fire(new n.k("zoom", a)),
              this._rotating && this.fire(new n.k("rotate", a)),
              this._pitching && this.fire(new n.k("pitch", a));
          }
          _afterEase(a, d) {
            if (this._easeId && d && this._easeId === d) return;
            delete this._easeId;
            let f = this._zooming,
              g = this._rotating,
              x = this._pitching;
            (this._moving = !1),
              (this._zooming = !1),
              (this._rotating = !1),
              (this._pitching = !1),
              (this._padding = !1),
              f && this.fire(new n.k("zoomend", a)),
              g && this.fire(new n.k("rotateend", a)),
              x && this.fire(new n.k("pitchend", a)),
              this.fire(new n.k("moveend", a));
          }
          flyTo(a, d) {
            var f;
            if (!a.essential && b.prefersReducedMotion) {
              let ji = n.L(a, ["center", "zoom", "bearing", "pitch", "around"]);
              return this.jumpTo(ji, d);
            }
            this.stop(),
              (a = n.e(
                { offset: [0, 0], speed: 1.2, curve: 1.42, easing: n.b7 },
                a
              ));
            let g = this._getTransformForUpdate(),
              x = this.getZoom(),
              E = this.getBearing(),
              M = this.getPitch(),
              I = this.getPadding(),
              z = "bearing" in a ? this._normalizeBearing(a.bearing, E) : E,
              B = "pitch" in a ? +a.pitch : M,
              U = "padding" in a ? a.padding : g.padding,
              Z = n.P.convert(a.offset),
              se = g.centerPoint.add(Z),
              oe = g.pointLocation(se),
              { center: le, zoom: ee } = g.getConstrained(
                n.M.convert(a.center || oe),
                (f = a.zoom) !== null && f !== void 0 ? f : x
              );
            this._normalizeCenter(le);
            let _e = g.zoomScale(ee - x),
              Be = g.project(oe),
              he = g.project(le).sub(Be),
              Ee = a.curve,
              Ue = Math.max(g.width, g.height),
              Ve = Ue / _e,
              Ge = he.mag();
            if ("minZoom" in a) {
              let ji = n.ac(Math.min(a.minZoom, x, ee), g.minZoom, g.maxZoom),
                pi = Ue / g.zoomScale(ji - x);
              Ee = Math.sqrt((pi / Ge) * 2);
            }
            let ot = Ee * Ee;
            function rt(ji) {
              let pi =
                (Ve * Ve - Ue * Ue + (ji ? -1 : 1) * ot * ot * Ge * Ge) /
                (2 * (ji ? Ve : Ue) * ot * Ge);
              return Math.log(Math.sqrt(pi * pi + 1) - pi);
            }
            function nt(ji) {
              return (Math.exp(ji) - Math.exp(-ji)) / 2;
            }
            function Ft(ji) {
              return (Math.exp(ji) + Math.exp(-ji)) / 2;
            }
            let ki = rt(!1),
              kt = function (ji) {
                return Ft(ki) / Ft(ki + Ee * ji);
              },
              li = function (ji) {
                return (
                  (Ue *
                    ((Ft(ki) * (nt((pi = ki + Ee * ji)) / Ft(pi)) - nt(ki)) /
                      ot)) /
                  Ge
                );
                var pi;
              },
              Ci = (rt(!0) - ki) / Ee;
            if (Math.abs(Ge) < 1e-6 || !isFinite(Ci)) {
              if (Math.abs(Ue - Ve) < 1e-6) return this.easeTo(a, d);
              let ji = Ve < Ue ? -1 : 1;
              (Ci = Math.abs(Math.log(Ve / Ue)) / Ee),
                (li = function () {
                  return 0;
                }),
                (kt = function (pi) {
                  return Math.exp(ji * Ee * pi);
                });
            }
            return (
              (a.duration =
                "duration" in a
                  ? +a.duration
                  : (1e3 * Ci) /
                    ("screenSpeed" in a ? +a.screenSpeed / Ee : +a.speed)),
              a.maxDuration && a.duration > a.maxDuration && (a.duration = 0),
              (this._zooming = !0),
              (this._rotating = E !== z),
              (this._pitching = B !== M),
              (this._padding = !g.isPaddingEqual(U)),
              this._prepareEase(d, !1),
              this.terrain && this._prepareElevation(le),
              this._ease(
                (ji) => {
                  let pi = ji * Ci,
                    Ei = 1 / kt(pi);
                  (g.zoom = ji === 1 ? ee : x + g.scaleZoom(Ei)),
                    this._rotating && (g.bearing = n.z.number(E, z, ji)),
                    this._pitching && (g.pitch = n.z.number(M, B, ji)),
                    this._padding &&
                      (g.interpolatePadding(I, U, ji),
                      (se = g.centerPoint.add(Z))),
                    this.terrain &&
                      !a.freezeElevation &&
                      this._updateElevation(ji);
                  let Ti =
                    ji === 1
                      ? le
                      : g.unproject(Be.add(he.mult(li(pi))).mult(Ei));
                  g.setLocationAtPoint(
                    g.renderWorldCopies ? Ti.wrap() : Ti,
                    se
                  ),
                    this._applyUpdatedTransform(g),
                    this._fireMoveEvents(d);
                },
                () => {
                  this.terrain && this._finalizeElevation(), this._afterEase(d);
                },
                a
              ),
              this
            );
          }
          isEasing() {
            return !!this._easeFrameId;
          }
          stop() {
            return this._stop();
          }
          _stop(a, d) {
            if (
              (this._easeFrameId &&
                (this._cancelRenderFrame(this._easeFrameId),
                delete this._easeFrameId,
                delete this._onEaseFrame),
              this._onEaseEnd)
            ) {
              let f = this._onEaseEnd;
              delete this._onEaseEnd, f.call(this, d);
            }
            if (!a) {
              let f = this.handlers;
              f && f.stop(!1);
            }
            return this;
          }
          _ease(a, d, f) {
            f.animate === !1 || f.duration === 0
              ? (a(1), d())
              : ((this._easeStart = b.now()),
                (this._easeOptions = f),
                (this._onEaseFrame = a),
                (this._onEaseEnd = d),
                (this._easeFrameId = this._requestRenderFrame(
                  this._renderFrameCallback
                )));
          }
          _normalizeBearing(a, d) {
            a = n.b1(a, -180, 180);
            let f = Math.abs(a - d);
            return (
              Math.abs(a - 360 - d) < f && (a -= 360),
              Math.abs(a + 360 - d) < f && (a += 360),
              a
            );
          }
          _normalizeCenter(a) {
            let d = this.transform;
            if (!d.renderWorldCopies || d.lngRange) return;
            let f = a.lng - d.center.lng;
            a.lng += f > 180 ? -360 : f < -180 ? 360 : 0;
          }
          queryTerrainElevation(a) {
            return this.terrain
              ? this.terrain.getElevationForLngLatZoom(
                  n.M.convert(a),
                  this.transform.tileZoom
                ) - this.transform.elevation
              : null;
          }
        }
        let ms = {
          compact: !0,
          customAttribution:
            '<a href="https://maplibre.org/" target="_blank">MapLibre</a>',
        };
        class Nf {
          constructor(a = ms) {
            (this._toggleAttribution = () => {
              this._container.classList.contains("maplibregl-compact") &&
                (this._container.classList.contains("maplibregl-compact-show")
                  ? (this._container.setAttribute("open", ""),
                    this._container.classList.remove("maplibregl-compact-show"))
                  : (this._container.classList.add("maplibregl-compact-show"),
                    this._container.removeAttribute("open")));
            }),
              (this._updateData = (d) => {
                !d ||
                  (d.sourceDataType !== "metadata" &&
                    d.sourceDataType !== "visibility" &&
                    d.dataType !== "style" &&
                    d.type !== "terrain") ||
                  this._updateAttributions();
              }),
              (this._updateCompact = () => {
                this._map.getCanvasContainer().offsetWidth <= 640 ||
                this._compact
                  ? this._compact === !1
                    ? this._container.setAttribute("open", "")
                    : this._container.classList.contains(
                        "maplibregl-compact"
                      ) ||
                      this._container.classList.contains(
                        "maplibregl-attrib-empty"
                      ) ||
                      (this._container.setAttribute("open", ""),
                      this._container.classList.add(
                        "maplibregl-compact",
                        "maplibregl-compact-show"
                      ))
                  : (this._container.setAttribute("open", ""),
                    this._container.classList.contains("maplibregl-compact") &&
                      this._container.classList.remove(
                        "maplibregl-compact",
                        "maplibregl-compact-show"
                      ));
              }),
              (this._updateCompactMinimize = () => {
                this._container.classList.contains("maplibregl-compact") &&
                  this._container.classList.contains(
                    "maplibregl-compact-show"
                  ) &&
                  this._container.classList.remove("maplibregl-compact-show");
              }),
              (this.options = a);
          }
          getDefaultPosition() {
            return "bottom-right";
          }
          onAdd(a) {
            return (
              (this._map = a),
              (this._compact = this.options.compact),
              (this._container = _.create(
                "details",
                "maplibregl-ctrl maplibregl-ctrl-attrib"
              )),
              (this._compactButton = _.create(
                "summary",
                "maplibregl-ctrl-attrib-button",
                this._container
              )),
              this._compactButton.addEventListener(
                "click",
                this._toggleAttribution
              ),
              this._setElementTitle(this._compactButton, "ToggleAttribution"),
              (this._innerContainer = _.create(
                "div",
                "maplibregl-ctrl-attrib-inner",
                this._container
              )),
              this._updateAttributions(),
              this._updateCompact(),
              this._map.on("styledata", this._updateData),
              this._map.on("sourcedata", this._updateData),
              this._map.on("terrain", this._updateData),
              this._map.on("resize", this._updateCompact),
              this._map.on("drag", this._updateCompactMinimize),
              this._container
            );
          }
          onRemove() {
            _.remove(this._container),
              this._map.off("styledata", this._updateData),
              this._map.off("sourcedata", this._updateData),
              this._map.off("terrain", this._updateData),
              this._map.off("resize", this._updateCompact),
              this._map.off("drag", this._updateCompactMinimize),
              (this._map = void 0),
              (this._compact = void 0),
              (this._attribHTML = void 0);
          }
          _setElementTitle(a, d) {
            let f = this._map._getUIString(`AttributionControl.${d}`);
            (a.title = f), a.setAttribute("aria-label", f);
          }
          _updateAttributions() {
            if (!this._map.style) return;
            let a = [];
            if (
              (this.options.customAttribution &&
                (Array.isArray(this.options.customAttribution)
                  ? (a = a.concat(
                      this.options.customAttribution.map((g) =>
                        typeof g != "string" ? "" : g
                      )
                    ))
                  : typeof this.options.customAttribution == "string" &&
                    a.push(this.options.customAttribution)),
              this._map.style.stylesheet)
            ) {
              let g = this._map.style.stylesheet;
              (this.styleOwner = g.owner), (this.styleId = g.id);
            }
            let d = this._map.style.sourceCaches;
            for (let g in d) {
              let x = d[g];
              if (x.used || x.usedForTerrain) {
                let E = x.getSource();
                E.attribution &&
                  a.indexOf(E.attribution) < 0 &&
                  a.push(E.attribution);
              }
            }
            (a = a.filter((g) => String(g).trim())),
              a.sort((g, x) => g.length - x.length),
              (a = a.filter((g, x) => {
                for (let E = x + 1; E < a.length; E++)
                  if (a[E].indexOf(g) >= 0) return !1;
                return !0;
              }));
            let f = a.join(" | ");
            f !== this._attribHTML &&
              ((this._attribHTML = f),
              a.length
                ? ((this._innerContainer.innerHTML = f),
                  this._container.classList.remove("maplibregl-attrib-empty"))
                : this._container.classList.add("maplibregl-attrib-empty"),
              this._updateCompact(),
              (this._editLink = null));
          }
        }
        class Ol {
          constructor(a = {}) {
            (this._updateCompact = () => {
              let d = this._container.children;
              if (d.length) {
                let f = d[0];
                this._map.getCanvasContainer().offsetWidth <= 640 ||
                this._compact
                  ? this._compact !== !1 &&
                    f.classList.add("maplibregl-compact")
                  : f.classList.remove("maplibregl-compact");
              }
            }),
              (this.options = a);
          }
          getDefaultPosition() {
            return "bottom-left";
          }
          onAdd(a) {
            (this._map = a),
              (this._compact = this.options && this.options.compact),
              (this._container = _.create("div", "maplibregl-ctrl"));
            let d = _.create("a", "maplibregl-ctrl-logo");
            return (
              (d.target = "_blank"),
              (d.rel = "noopener nofollow"),
              (d.href = "https://maplibre.org/"),
              d.setAttribute(
                "aria-label",
                this._map._getUIString("LogoControl.Title")
              ),
              d.setAttribute("rel", "noopener nofollow"),
              this._container.appendChild(d),
              (this._container.style.display = "block"),
              this._map.on("resize", this._updateCompact),
              this._updateCompact(),
              this._container
            );
          }
          onRemove() {
            _.remove(this._container),
              this._map.off("resize", this._updateCompact),
              (this._map = void 0),
              (this._compact = void 0);
          }
        }
        class qr {
          constructor() {
            (this._queue = []),
              (this._id = 0),
              (this._cleared = !1),
              (this._currentlyRunning = !1);
          }
          add(a) {
            let d = ++this._id;
            return this._queue.push({ callback: a, id: d, cancelled: !1 }), d;
          }
          remove(a) {
            let d = this._currentlyRunning,
              f = d ? this._queue.concat(d) : this._queue;
            for (let g of f) if (g.id === a) return void (g.cancelled = !0);
          }
          run(a = 0) {
            if (this._currentlyRunning)
              throw new Error("Attempting to run(), but is already running.");
            let d = (this._currentlyRunning = this._queue);
            this._queue = [];
            for (let f of d)
              if (!f.cancelled && (f.callback(a), this._cleared)) break;
            (this._cleared = !1), (this._currentlyRunning = !1);
          }
          clear() {
            this._currentlyRunning && (this._cleared = !0), (this._queue = []);
          }
        }
        var an = n.X([{ name: "a_pos3d", type: "Int16", components: 3 }]);
        class Of extends n.E {
          constructor(a) {
            super(),
              (this.sourceCache = a),
              (this._tiles = {}),
              (this._renderableTilesKeys = []),
              (this._sourceTileCache = {}),
              (this.minzoom = 0),
              (this.maxzoom = 22),
              (this.tileSize = 512),
              (this.deltaZoom = 1),
              (a.usedForTerrain = !0),
              (a.tileSize = this.tileSize * 2 ** this.deltaZoom);
          }
          destruct() {
            (this.sourceCache.usedForTerrain = !1),
              (this.sourceCache.tileSize = null);
          }
          update(a, d) {
            this.sourceCache.update(a, d), (this._renderableTilesKeys = []);
            let f = {};
            for (let g of a.coveringTiles({
              tileSize: this.tileSize,
              minzoom: this.minzoom,
              maxzoom: this.maxzoom,
              reparseOverscaled: !1,
              terrain: d,
            }))
              (f[g.key] = !0),
                this._renderableTilesKeys.push(g.key),
                this._tiles[g.key] ||
                  ((g.posMatrix = new Float64Array(16)),
                  n.aN(g.posMatrix, 0, n.W, 0, n.W, 0, 1),
                  (this._tiles[g.key] = new Dr(g, this.tileSize)));
            for (let g in this._tiles) f[g] || delete this._tiles[g];
          }
          freeRtt(a) {
            for (let d in this._tiles) {
              let f = this._tiles[d];
              (!a ||
                f.tileID.equals(a) ||
                f.tileID.isChildOf(a) ||
                a.isChildOf(f.tileID)) &&
                (f.rtt = []);
            }
          }
          getRenderableTiles() {
            return this._renderableTilesKeys.map((a) => this.getTileByID(a));
          }
          getTileByID(a) {
            return this._tiles[a];
          }
          getTerrainCoords(a) {
            let d = {};
            for (let f of this._renderableTilesKeys) {
              let g = this._tiles[f].tileID;
              if (g.canonical.equals(a.canonical)) {
                let x = a.clone();
                (x.posMatrix = new Float64Array(16)),
                  n.aN(x.posMatrix, 0, n.W, 0, n.W, 0, 1),
                  (d[f] = x);
              } else if (g.canonical.isChildOf(a.canonical)) {
                let x = a.clone();
                x.posMatrix = new Float64Array(16);
                let E = g.canonical.z - a.canonical.z,
                  M = g.canonical.x - ((g.canonical.x >> E) << E),
                  I = g.canonical.y - ((g.canonical.y >> E) << E),
                  z = n.W >> E;
                n.aN(x.posMatrix, 0, z, 0, z, 0, 1),
                  n.H(x.posMatrix, x.posMatrix, [-M * z, -I * z, 0]),
                  (d[f] = x);
              } else if (a.canonical.isChildOf(g.canonical)) {
                let x = a.clone();
                x.posMatrix = new Float64Array(16);
                let E = a.canonical.z - g.canonical.z,
                  M = a.canonical.x - ((a.canonical.x >> E) << E),
                  I = a.canonical.y - ((a.canonical.y >> E) << E),
                  z = n.W >> E;
                n.aN(x.posMatrix, 0, n.W, 0, n.W, 0, 1),
                  n.H(x.posMatrix, x.posMatrix, [M * z, I * z, 0]),
                  n.J(x.posMatrix, x.posMatrix, [1 / 2 ** E, 1 / 2 ** E, 0]),
                  (d[f] = x);
              }
            }
            return d;
          }
          getSourceTile(a, d) {
            let f = this.sourceCache._source,
              g = a.overscaledZ - this.deltaZoom;
            if ((g > f.maxzoom && (g = f.maxzoom), g < f.minzoom)) return null;
            this._sourceTileCache[a.key] ||
              (this._sourceTileCache[a.key] = a.scaledTo(g).key);
            let x = this.sourceCache.getTileByID(this._sourceTileCache[a.key]);
            if ((!x || !x.dem) && d)
              for (; g >= f.minzoom && (!x || !x.dem); )
                x = this.sourceCache.getTileByID(a.scaledTo(g--).key);
            return x;
          }
          tilesAfterTime(a = Date.now()) {
            return Object.values(this._tiles).filter((d) => d.timeAdded >= a);
          }
        }
        class _c {
          constructor(a, d, f) {
            (this.painter = a),
              (this.sourceCache = new Of(d)),
              (this.options = f),
              (this.exaggeration =
                typeof f.exaggeration == "number" ? f.exaggeration : 1),
              (this.qualityFactor = 2),
              (this.meshSize = 128),
              (this._demMatrixCache = {}),
              (this.coordsIndex = []),
              (this._coordsTextureSize = 1024);
          }
          getDEMElevation(a, d, f, g = n.W) {
            var x;
            if (!(d >= 0 && d < g && f >= 0 && f < g)) return 0;
            let E = this.getTerrainData(a),
              M = (x = E.tile) === null || x === void 0 ? void 0 : x.dem;
            if (!M) return 0;
            let I = (function (oe, le, ee) {
                var _e = le[0],
                  Be = le[1];
                return (
                  (oe[0] = ee[0] * _e + ee[4] * Be + ee[12]),
                  (oe[1] = ee[1] * _e + ee[5] * Be + ee[13]),
                  oe
                );
              })([], [(d / g) * n.W, (f / g) * n.W], E.u_terrain_matrix),
              z = [I[0] * M.dim, I[1] * M.dim],
              B = Math.floor(z[0]),
              U = Math.floor(z[1]),
              Z = z[0] - B,
              se = z[1] - U;
            return (
              M.get(B, U) * (1 - Z) * (1 - se) +
              M.get(B + 1, U) * Z * (1 - se) +
              M.get(B, U + 1) * (1 - Z) * se +
              M.get(B + 1, U + 1) * Z * se
            );
          }
          getElevationForLngLatZoom(a, d) {
            let {
              tileID: f,
              mercatorX: g,
              mercatorY: x,
            } = this._getOverscaledTileIDFromLngLatZoom(a, d);
            return this.getElevation(f, g % n.W, x % n.W, n.W);
          }
          getElevation(a, d, f, g = n.W) {
            return this.getDEMElevation(a, d, f, g) * this.exaggeration;
          }
          getTerrainData(a) {
            if (!this._emptyDemTexture) {
              let g = this.painter.context,
                x = new n.R({ width: 1, height: 1 }, new Uint8Array(4));
              (this._emptyDepthTexture = new st(g, x, g.gl.RGBA, {
                premultiply: !1,
              })),
                (this._emptyDemUnpack = [0, 0, 0, 0]),
                (this._emptyDemTexture = new st(
                  g,
                  new n.R({ width: 1, height: 1 }),
                  g.gl.RGBA,
                  { premultiply: !1 }
                )),
                this._emptyDemTexture.bind(g.gl.NEAREST, g.gl.CLAMP_TO_EDGE),
                (this._emptyDemMatrix = n.an([]));
            }
            let d = this.sourceCache.getSourceTile(a, !0);
            if (d && d.dem && (!d.demTexture || d.needsTerrainPrepare)) {
              let g = this.painter.context;
              (d.demTexture = this.painter.getTileTexture(d.dem.stride)),
                d.demTexture
                  ? d.demTexture.update(d.dem.getPixels(), { premultiply: !1 })
                  : (d.demTexture = new st(g, d.dem.getPixels(), g.gl.RGBA, {
                      premultiply: !1,
                    })),
                d.demTexture.bind(g.gl.NEAREST, g.gl.CLAMP_TO_EDGE),
                (d.needsTerrainPrepare = !1);
            }
            let f = d && d + d.tileID.key + a.key;
            if (f && !this._demMatrixCache[f]) {
              let g = this.sourceCache.sourceCache._source.maxzoom,
                x = a.canonical.z - d.tileID.canonical.z;
              a.overscaledZ > a.canonical.z &&
                (a.canonical.z >= g
                  ? (x = a.canonical.z - g)
                  : n.w(
                      "cannot calculate elevation if elevation maxzoom > source.maxzoom"
                    ));
              let E = a.canonical.x - ((a.canonical.x >> x) << x),
                M = a.canonical.y - ((a.canonical.y >> x) << x),
                I = n.b9(new Float64Array(16), [
                  1 / (n.W << x),
                  1 / (n.W << x),
                  0,
                ]);
              n.H(I, I, [E * n.W, M * n.W, 0]),
                (this._demMatrixCache[a.key] = { matrix: I, coord: a });
            }
            return {
              u_depth: 2,
              u_terrain: 3,
              u_terrain_dim: (d && d.dem && d.dem.dim) || 1,
              u_terrain_matrix: f
                ? this._demMatrixCache[a.key].matrix
                : this._emptyDemMatrix,
              u_terrain_unpack:
                (d && d.dem && d.dem.getUnpackVector()) || this._emptyDemUnpack,
              u_terrain_exaggeration: this.exaggeration,
              texture: ((d && d.demTexture) || this._emptyDemTexture).texture,
              depthTexture: (this._fboDepthTexture || this._emptyDepthTexture)
                .texture,
              tile: d,
            };
          }
          getFramebuffer(a) {
            let d = this.painter,
              f = d.width / devicePixelRatio,
              g = d.height / devicePixelRatio;
            return (
              !this._fbo ||
                (this._fbo.width === f && this._fbo.height === g) ||
                (this._fbo.destroy(),
                this._fboCoordsTexture.destroy(),
                this._fboDepthTexture.destroy(),
                delete this._fbo,
                delete this._fboDepthTexture,
                delete this._fboCoordsTexture),
              this._fboCoordsTexture ||
                ((this._fboCoordsTexture = new st(
                  d.context,
                  { width: f, height: g, data: null },
                  d.context.gl.RGBA,
                  { premultiply: !1 }
                )),
                this._fboCoordsTexture.bind(
                  d.context.gl.NEAREST,
                  d.context.gl.CLAMP_TO_EDGE
                )),
              this._fboDepthTexture ||
                ((this._fboDepthTexture = new st(
                  d.context,
                  { width: f, height: g, data: null },
                  d.context.gl.RGBA,
                  { premultiply: !1 }
                )),
                this._fboDepthTexture.bind(
                  d.context.gl.NEAREST,
                  d.context.gl.CLAMP_TO_EDGE
                )),
              this._fbo ||
                ((this._fbo = d.context.createFramebuffer(f, g, !0, !1)),
                this._fbo.depthAttachment.set(
                  d.context.createRenderbuffer(
                    d.context.gl.DEPTH_COMPONENT16,
                    f,
                    g
                  )
                )),
              this._fbo.colorAttachment.set(
                a === "coords"
                  ? this._fboCoordsTexture.texture
                  : this._fboDepthTexture.texture
              ),
              this._fbo
            );
          }
          getCoordsTexture() {
            let a = this.painter.context;
            if (this._coordsTexture) return this._coordsTexture;
            let d = new Uint8Array(
              this._coordsTextureSize * this._coordsTextureSize * 4
            );
            for (let x = 0, E = 0; x < this._coordsTextureSize; x++)
              for (let M = 0; M < this._coordsTextureSize; M++, E += 4)
                (d[E + 0] = 255 & M),
                  (d[E + 1] = 255 & x),
                  (d[E + 2] = ((M >> 8) << 4) | (x >> 8)),
                  (d[E + 3] = 0);
            let f = new n.R(
                {
                  width: this._coordsTextureSize,
                  height: this._coordsTextureSize,
                },
                new Uint8Array(d.buffer)
              ),
              g = new st(a, f, a.gl.RGBA, { premultiply: !1 });
            return (
              g.bind(a.gl.NEAREST, a.gl.CLAMP_TO_EDGE),
              (this._coordsTexture = g),
              g
            );
          }
          pointCoordinate(a) {
            this.painter.maybeDrawDepthAndCoords(!0);
            let d = new Uint8Array(4),
              f = this.painter.context,
              g = f.gl;
            f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),
              g.readPixels(
                a.x,
                this.painter.height / devicePixelRatio - a.y - 1,
                1,
                1,
                g.RGBA,
                g.UNSIGNED_BYTE,
                d
              ),
              f.bindFramebuffer.set(null);
            let x = d[0] + ((d[2] >> 4) << 8),
              E = d[1] + ((15 & d[2]) << 8),
              M = this.coordsIndex[255 - d[3]],
              I = M && this.sourceCache.getTileByID(M);
            if (!I) return null;
            let z = this._coordsTextureSize,
              B = (1 << I.tileID.canonical.z) * z;
            return new n.Y(
              (I.tileID.canonical.x * z + x) / B + I.tileID.wrap,
              (I.tileID.canonical.y * z + E) / B,
              this.getElevation(I.tileID, x, E, z)
            );
          }
          depthAtPoint(a) {
            let d = new Uint8Array(4),
              f = this.painter.context,
              g = f.gl;
            return (
              f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),
              g.readPixels(
                a.x,
                this.painter.height / devicePixelRatio - a.y - 1,
                1,
                1,
                g.RGBA,
                g.UNSIGNED_BYTE,
                d
              ),
              f.bindFramebuffer.set(null),
              (d[0] / 16777216 + d[1] / 65536 + d[2] / 256 + d[3]) / 256
            );
          }
          getTerrainMesh() {
            if (this._mesh) return this._mesh;
            let a = this.painter.context,
              d = new n.ba(),
              f = new n.aX(),
              g = this.meshSize,
              x = n.W / g,
              E = g * g;
            for (let U = 0; U <= g; U++)
              for (let Z = 0; Z <= g; Z++) d.emplaceBack(Z * x, U * x, 0);
            for (let U = 0; U < E; U += g + 1)
              for (let Z = 0; Z < g; Z++)
                f.emplaceBack(Z + U, g + Z + U + 1, g + Z + U + 2),
                  f.emplaceBack(Z + U, g + Z + U + 2, Z + U + 1);
            let M = d.length,
              I = M + 2 * (g + 1);
            for (let U of [0, 1])
              for (let Z = 0; Z <= g; Z++)
                for (let se of [0, 1]) d.emplaceBack(Z * x, U * n.W, se);
            for (let U = 0; U < 2 * g; U += 2)
              f.emplaceBack(I + U, I + U + 1, I + U + 3),
                f.emplaceBack(I + U, I + U + 3, I + U + 2),
                f.emplaceBack(M + U, M + U + 3, M + U + 1),
                f.emplaceBack(M + U, M + U + 2, M + U + 3);
            let z = d.length,
              B = z + 2 * (g + 1);
            for (let U of [0, 1])
              for (let Z = 0; Z <= g; Z++)
                for (let se of [0, 1]) d.emplaceBack(U * n.W, Z * x, se);
            for (let U = 0; U < 2 * g; U += 2)
              f.emplaceBack(z + U, z + U + 1, z + U + 3),
                f.emplaceBack(z + U, z + U + 3, z + U + 2),
                f.emplaceBack(B + U, B + U + 3, B + U + 1),
                f.emplaceBack(B + U, B + U + 2, B + U + 3);
            return (
              (this._mesh = {
                indexBuffer: a.createIndexBuffer(f),
                vertexBuffer: a.createVertexBuffer(d, an.members),
                segments: n.$.simpleSegment(0, 0, d.length, f.length),
              }),
              this._mesh
            );
          }
          getMeshFrameDelta(a) {
            return (2 * Math.PI * n.bb) / Math.pow(2, a) / 5;
          }
          getMinTileElevationForLngLatZoom(a, d) {
            var f;
            let { tileID: g } = this._getOverscaledTileIDFromLngLatZoom(a, d);
            return (f = this.getMinMaxElevation(g).minElevation) !== null &&
              f !== void 0
              ? f
              : 0;
          }
          getMinMaxElevation(a) {
            let d = this.getTerrainData(a).tile,
              f = { minElevation: null, maxElevation: null };
            return (
              d &&
                d.dem &&
                ((f.minElevation = d.dem.min * this.exaggeration),
                (f.maxElevation = d.dem.max * this.exaggeration)),
              f
            );
          }
          _getOverscaledTileIDFromLngLatZoom(a, d) {
            let f = n.Y.fromLngLat(a.wrap()),
              g = (1 << d) * n.W,
              x = f.x * g,
              E = f.y * g,
              M = Math.floor(x / n.W),
              I = Math.floor(E / n.W);
            return {
              tileID: new n.Q(d, 0, d, M, I),
              mercatorX: x,
              mercatorY: E,
            };
          }
        }
        class Iu {
          constructor(a, d, f) {
            (this._context = a),
              (this._size = d),
              (this._tileSize = f),
              (this._objects = []),
              (this._recentlyUsed = []),
              (this._stamp = 0);
          }
          destruct() {
            for (let a of this._objects) a.texture.destroy(), a.fbo.destroy();
          }
          _createObject(a) {
            let d = this._context.createFramebuffer(
                this._tileSize,
                this._tileSize,
                !0,
                !0
              ),
              f = new st(
                this._context,
                { width: this._tileSize, height: this._tileSize, data: null },
                this._context.gl.RGBA
              );
            return (
              f.bind(this._context.gl.LINEAR, this._context.gl.CLAMP_TO_EDGE),
              d.depthAttachment.set(
                this._context.createRenderbuffer(
                  this._context.gl.DEPTH_STENCIL,
                  this._tileSize,
                  this._tileSize
                )
              ),
              d.colorAttachment.set(f.texture),
              { id: a, fbo: d, texture: f, stamp: -1, inUse: !1 }
            );
          }
          getObjectForId(a) {
            return this._objects[a];
          }
          useObject(a) {
            (a.inUse = !0),
              (this._recentlyUsed = this._recentlyUsed.filter(
                (d) => a.id !== d
              )),
              this._recentlyUsed.push(a.id);
          }
          stampObject(a) {
            a.stamp = ++this._stamp;
          }
          getOrCreateFreeObject() {
            for (let d of this._recentlyUsed)
              if (!this._objects[d].inUse) return this._objects[d];
            if (this._objects.length >= this._size)
              throw new Error(
                "No free RenderPool available, call freeAllObjects() required!"
              );
            let a = this._createObject(this._objects.length);
            return this._objects.push(a), a;
          }
          freeObject(a) {
            a.inUse = !1;
          }
          freeAllObjects() {
            for (let a of this._objects) this.freeObject(a);
          }
          isFull() {
            return (
              !(this._objects.length < this._size) &&
              this._objects.some((a) => !a.inUse) === !1
            );
          }
        }
        let ma = {
          background: !0,
          fill: !0,
          line: !0,
          raster: !0,
          hillshade: !0,
        };
        class ch {
          constructor(a, d) {
            (this.painter = a),
              (this.terrain = d),
              (this.pool = new Iu(
                a.context,
                30,
                d.sourceCache.tileSize * d.qualityFactor
              ));
          }
          destruct() {
            this.pool.destruct();
          }
          getTexture(a) {
            return this.pool.getObjectForId(
              a.rtt[this._stacks.length - 1].id
            ).texture;
          }
          prepareForRender(a, d) {
            (this._stacks = []),
              (this._prevType = null),
              (this._rttTiles = []),
              (this._renderableTiles =
                this.terrain.sourceCache.getRenderableTiles()),
              (this._renderableLayerIds = a._order.filter(
                (f) => !a._layers[f].isHidden(d)
              )),
              (this._coordsDescendingInv = {});
            for (let f in a.sourceCaches) {
              this._coordsDescendingInv[f] = {};
              let g = a.sourceCaches[f].getVisibleCoordinates();
              for (let x of g) {
                let E = this.terrain.sourceCache.getTerrainCoords(x);
                for (let M in E)
                  this._coordsDescendingInv[f][M] ||
                    (this._coordsDescendingInv[f][M] = []),
                    this._coordsDescendingInv[f][M].push(E[M]);
              }
            }
            this._coordsDescendingInvStr = {};
            for (let f of a._order) {
              let g = a._layers[f],
                x = g.source;
              if (ma[g.type] && !this._coordsDescendingInvStr[x]) {
                this._coordsDescendingInvStr[x] = {};
                for (let E in this._coordsDescendingInv[x])
                  this._coordsDescendingInvStr[x][E] =
                    this._coordsDescendingInv[x][E].map((M) => M.key)
                      .sort()
                      .join();
              }
            }
            for (let f of this._renderableTiles)
              for (let g in this._coordsDescendingInvStr) {
                let x = this._coordsDescendingInvStr[g][f.tileID.key];
                x && x !== f.rttCoords[g] && (f.rtt = []);
              }
          }
          renderLayer(a) {
            if (a.isHidden(this.painter.transform.zoom)) return !1;
            let d = a.type,
              f = this.painter,
              g =
                this._renderableLayerIds[
                  this._renderableLayerIds.length - 1
                ] === a.id;
            if (
              ma[d] &&
              ((this._prevType && ma[this._prevType]) || this._stacks.push([]),
              (this._prevType = d),
              this._stacks[this._stacks.length - 1].push(a.id),
              !g)
            )
              return !0;
            if (ma[this._prevType] || (ma[d] && g)) {
              this._prevType = d;
              let x = this._stacks.length - 1,
                E = this._stacks[x] || [];
              for (let M of this._renderableTiles) {
                if (
                  (this.pool.isFull() &&
                    (Zd(this.painter, this.terrain, this._rttTiles),
                    (this._rttTiles = []),
                    this.pool.freeAllObjects()),
                  this._rttTiles.push(M),
                  M.rtt[x])
                ) {
                  let z = this.pool.getObjectForId(M.rtt[x].id);
                  if (z.stamp === M.rtt[x].stamp) {
                    this.pool.useObject(z);
                    continue;
                  }
                }
                let I = this.pool.getOrCreateFreeObject();
                this.pool.useObject(I),
                  this.pool.stampObject(I),
                  (M.rtt[x] = { id: I.id, stamp: I.stamp }),
                  f.context.bindFramebuffer.set(I.fbo.framebuffer),
                  f.context.clear({ color: n.aO.transparent, stencil: 0 }),
                  (f.currentStencilSource = void 0);
                for (let z = 0; z < E.length; z++) {
                  let B = f.style._layers[E[z]],
                    U = B.source
                      ? this._coordsDescendingInv[B.source][M.tileID.key]
                      : [M.tileID];
                  f.context.viewport.set([0, 0, I.fbo.width, I.fbo.height]),
                    f._renderTileClippingMasks(B, U),
                    f.renderLayer(f, f.style.sourceCaches[B.source], B, U),
                    B.source &&
                      (M.rttCoords[B.source] =
                        this._coordsDescendingInvStr[B.source][M.tileID.key]);
                }
              }
              return (
                Zd(this.painter, this.terrain, this._rttTiles),
                (this._rttTiles = []),
                this.pool.freeAllObjects(),
                ma[d]
              );
            }
            return !1;
          }
        }
        let uh = {
            "AttributionControl.ToggleAttribution": "Toggle attribution",
            "AttributionControl.MapFeedback": "Map feedback",
            "FullscreenControl.Enter": "Enter fullscreen",
            "FullscreenControl.Exit": "Exit fullscreen",
            "GeolocateControl.FindMyLocation": "Find my location",
            "GeolocateControl.LocationNotAvailable": "Location not available",
            "LogoControl.Title": "MapLibre logo",
            "NavigationControl.ResetBearing": "Reset bearing to north",
            "NavigationControl.ZoomIn": "Zoom in",
            "NavigationControl.ZoomOut": "Zoom out",
            "ScaleControl.Feet": "ft",
            "ScaleControl.Meters": "m",
            "ScaleControl.Kilometers": "km",
            "ScaleControl.Miles": "mi",
            "ScaleControl.NauticalMiles": "nm",
            "TerrainControl.Enable": "Enable terrain",
            "TerrainControl.Disable": "Disable terrain",
            "CooperativeGesturesHandler.WindowsHelpText":
              "Use Ctrl + scroll to zoom the map",
            "CooperativeGesturesHandler.MacHelpText":
              "Use \u2318 + scroll to zoom the map",
            "CooperativeGesturesHandler.MobileHelpText":
              "Use two fingers to move the map",
          },
          xc = u,
          dh = {
            center: [0, 0],
            zoom: 0,
            bearing: 0,
            pitch: 0,
            minZoom: -2,
            maxZoom: 22,
            minPitch: 0,
            maxPitch: 60,
            interactive: !0,
            scrollZoom: !0,
            boxZoom: !0,
            dragRotate: !0,
            dragPan: !0,
            keyboard: !0,
            doubleClickZoom: !0,
            touchZoomRotate: !0,
            touchPitch: !0,
            cooperativeGestures: !1,
            bearingSnap: 7,
            clickTolerance: 3,
            pitchWithRotate: !0,
            hash: !1,
            attributionControl: ms,
            maplibreLogo: !1,
            failIfMajorPerformanceCaveat: !1,
            preserveDrawingBuffer: !1,
            trackResize: !0,
            renderWorldCopies: !0,
            refreshExpiredTiles: !0,
            maxTileCacheSize: null,
            maxTileCacheZoomLevels: n.a.MAX_TILE_CACHE_ZOOM_LEVELS,
            localIdeographFontFamily: "sans-serif",
            transformRequest: null,
            transformCameraUpdate: null,
            fadeDuration: 300,
            crossSourceCollisions: !0,
            validateStyle: !0,
            maxCanvasSize: [4096, 4096],
          },
          Pu = (v) => {
            (v.touchstart = v.dragStart),
              (v.touchmoveWindow = v.dragMove),
              (v.touchend = v.dragEnd);
          },
          hh = { showCompass: !0, showZoom: !0, visualizePitch: !1 };
        class ph {
          constructor(a, d, f = !1) {
            (this.mousedown = (E) => {
              this.startMouse(
                n.e({}, E, {
                  ctrlKey: !0,
                  preventDefault: () => E.preventDefault(),
                }),
                _.mousePos(this.element, E)
              ),
                _.addEventListener(window, "mousemove", this.mousemove),
                _.addEventListener(window, "mouseup", this.mouseup);
            }),
              (this.mousemove = (E) => {
                this.moveMouse(E, _.mousePos(this.element, E));
              }),
              (this.mouseup = (E) => {
                this.mouseRotate.dragEnd(E),
                  this.mousePitch && this.mousePitch.dragEnd(E),
                  this.offTemp();
              }),
              (this.touchstart = (E) => {
                E.targetTouches.length !== 1
                  ? this.reset()
                  : ((this._startPos = this._lastPos =
                      _.touchPos(this.element, E.targetTouches)[0]),
                    this.startTouch(E, this._startPos),
                    _.addEventListener(window, "touchmove", this.touchmove, {
                      passive: !1,
                    }),
                    _.addEventListener(window, "touchend", this.touchend));
              }),
              (this.touchmove = (E) => {
                E.targetTouches.length !== 1
                  ? this.reset()
                  : ((this._lastPos = _.touchPos(
                      this.element,
                      E.targetTouches
                    )[0]),
                    this.moveTouch(E, this._lastPos));
              }),
              (this.touchend = (E) => {
                E.targetTouches.length === 0 &&
                  this._startPos &&
                  this._lastPos &&
                  this._startPos.dist(this._lastPos) < this._clickTolerance &&
                  this.element.click(),
                  delete this._startPos,
                  delete this._lastPos,
                  this.offTemp();
              }),
              (this.reset = () => {
                this.mouseRotate.reset(),
                  this.mousePitch && this.mousePitch.reset(),
                  this.touchRotate.reset(),
                  this.touchPitch && this.touchPitch.reset(),
                  delete this._startPos,
                  delete this._lastPos,
                  this.offTemp();
              }),
              (this._clickTolerance = 10);
            let g = a.dragRotate._mouseRotate.getClickTolerance(),
              x = a.dragRotate._mousePitch.getClickTolerance();
            (this.element = d),
              (this.mouseRotate = Nl({ clickTolerance: g, enable: !0 })),
              (this.touchRotate = (({
                enable: E,
                clickTolerance: M,
                bearingDegreesPerPixelMoved: I = 0.8,
              }) => {
                let z = new th();
                return new Zs({
                  clickTolerance: M,
                  move: (B, U) => ({ bearingDelta: (U.x - B.x) * I }),
                  moveStateManager: z,
                  enable: E,
                  assignEvents: Pu,
                });
              })({ clickTolerance: g, enable: !0 })),
              (this.map = a),
              f &&
                ((this.mousePitch = ih({ clickTolerance: x, enable: !0 })),
                (this.touchPitch = (({
                  enable: E,
                  clickTolerance: M,
                  pitchDegreesPerPixelMoved: I = -0.5,
                }) => {
                  let z = new th();
                  return new Zs({
                    clickTolerance: M,
                    move: (B, U) => ({ pitchDelta: (U.y - B.y) * I }),
                    moveStateManager: z,
                    enable: E,
                    assignEvents: Pu,
                  });
                })({ clickTolerance: x, enable: !0 }))),
              _.addEventListener(d, "mousedown", this.mousedown),
              _.addEventListener(d, "touchstart", this.touchstart, {
                passive: !1,
              }),
              _.addEventListener(d, "touchcancel", this.reset);
          }
          startMouse(a, d) {
            this.mouseRotate.dragStart(a, d),
              this.mousePitch && this.mousePitch.dragStart(a, d),
              _.disableDrag();
          }
          startTouch(a, d) {
            this.touchRotate.dragStart(a, d),
              this.touchPitch && this.touchPitch.dragStart(a, d),
              _.disableDrag();
          }
          moveMouse(a, d) {
            let f = this.map,
              { bearingDelta: g } = this.mouseRotate.dragMove(a, d) || {};
            if ((g && f.setBearing(f.getBearing() + g), this.mousePitch)) {
              let { pitchDelta: x } = this.mousePitch.dragMove(a, d) || {};
              x && f.setPitch(f.getPitch() + x);
            }
          }
          moveTouch(a, d) {
            let f = this.map,
              { bearingDelta: g } = this.touchRotate.dragMove(a, d) || {};
            if ((g && f.setBearing(f.getBearing() + g), this.touchPitch)) {
              let { pitchDelta: x } = this.touchPitch.dragMove(a, d) || {};
              x && f.setPitch(f.getPitch() + x);
            }
          }
          off() {
            let a = this.element;
            _.removeEventListener(a, "mousedown", this.mousedown),
              _.removeEventListener(a, "touchstart", this.touchstart, {
                passive: !1,
              }),
              _.removeEventListener(window, "touchmove", this.touchmove, {
                passive: !1,
              }),
              _.removeEventListener(window, "touchend", this.touchend),
              _.removeEventListener(a, "touchcancel", this.reset),
              this.offTemp();
          }
          offTemp() {
            _.enableDrag(),
              _.removeEventListener(window, "mousemove", this.mousemove),
              _.removeEventListener(window, "mouseup", this.mouseup),
              _.removeEventListener(window, "touchmove", this.touchmove, {
                passive: !1,
              }),
              _.removeEventListener(window, "touchend", this.touchend);
          }
        }
        let Ks;
        function Du(v, a, d) {
          let f = new n.M(v.lng, v.lat);
          if (((v = new n.M(v.lng, v.lat)), a)) {
            let g = new n.M(v.lng - 360, v.lat),
              x = new n.M(v.lng + 360, v.lat),
              E = d.locationPoint(v).distSqr(a);
            d.locationPoint(g).distSqr(a) < E
              ? (v = g)
              : d.locationPoint(x).distSqr(a) < E && (v = x);
          }
          for (; Math.abs(v.lng - d.center.lng) > 180; ) {
            let g = d.locationPoint(v);
            if (g.x >= 0 && g.y >= 0 && g.x <= d.width && g.y <= d.height)
              break;
            v.lng > d.center.lng ? (v.lng -= 360) : (v.lng += 360);
          }
          return v.lng !== f.lng &&
            d.locationPoint(v).y > d.height / 2 - d.getHorizon()
            ? v
            : f;
        }
        let wc = {
          center: "translate(-50%,-50%)",
          top: "translate(-50%,0)",
          "top-left": "translate(0,0)",
          "top-right": "translate(-100%,0)",
          bottom: "translate(-50%,-100%)",
          "bottom-left": "translate(0,-100%)",
          "bottom-right": "translate(-100%,-100%)",
          left: "translate(0,-50%)",
          right: "translate(-100%,-50%)",
        };
        function Lu(v, a, d) {
          let f = v.classList;
          for (let g in wc) f.remove(`maplibregl-${d}-anchor-${g}`);
          f.add(`maplibregl-${d}-anchor-${a}`);
        }
        class Bl extends n.E {
          constructor(a) {
            if (
              (super(),
              (this._onKeyPress = (d) => {
                let f = d.code,
                  g = d.charCode || d.keyCode;
                (f !== "Space" && f !== "Enter" && g !== 32 && g !== 13) ||
                  this.togglePopup();
              }),
              (this._onMapClick = (d) => {
                let f = d.originalEvent.target,
                  g = this._element;
                this._popup && (f === g || g.contains(f)) && this.togglePopup();
              }),
              (this._update = (d) => {
                var f;
                if (!this._map) return;
                let g = this._map.loaded() && !this._map.isMoving();
                (d?.type === "terrain" || (d?.type === "render" && !g)) &&
                  this._map.once("render", this._update),
                  (this._lngLat = this._map.transform.renderWorldCopies
                    ? Du(this._lngLat, this._flatPos, this._map.transform)
                    : (f = this._lngLat) === null || f === void 0
                    ? void 0
                    : f.wrap()),
                  (this._flatPos = this._pos =
                    this._map.project(this._lngLat)._add(this._offset)),
                  this._map.terrain &&
                    (this._flatPos = this._map.transform
                      .locationPoint(this._lngLat)
                      ._add(this._offset));
                let x = "";
                this._rotationAlignment === "viewport" ||
                this._rotationAlignment === "auto"
                  ? (x = `rotateZ(${this._rotation}deg)`)
                  : this._rotationAlignment === "map" &&
                    (x = `rotateZ(${
                      this._rotation - this._map.getBearing()
                    }deg)`);
                let E = "";
                this._pitchAlignment === "viewport" ||
                this._pitchAlignment === "auto"
                  ? (E = "rotateX(0deg)")
                  : this._pitchAlignment === "map" &&
                    (E = `rotateX(${this._map.getPitch()}deg)`),
                  (d && d.type !== "moveend") ||
                    (this._pos = this._pos.round()),
                  _.setTransform(
                    this._element,
                    `${wc[this._anchor]} translate(${this._pos.x}px, ${
                      this._pos.y
                    }px) ${E} ${x}`
                  ),
                  b
                    .frameAsync(new AbortController())
                    .then(() => {
                      this._updateOpacity(d && d.type === "moveend");
                    })
                    .catch(() => {});
              }),
              (this._onMove = (d) => {
                if (!this._isDragging) {
                  let f = this._clickTolerance || this._map._clickTolerance;
                  this._isDragging = d.point.dist(this._pointerdownPos) >= f;
                }
                this._isDragging &&
                  ((this._pos = d.point.sub(this._positionDelta)),
                  (this._lngLat = this._map.unproject(this._pos)),
                  this.setLngLat(this._lngLat),
                  (this._element.style.pointerEvents = "none"),
                  this._state === "pending" &&
                    ((this._state = "active"), this.fire(new n.k("dragstart"))),
                  this.fire(new n.k("drag")));
              }),
              (this._onUp = () => {
                (this._element.style.pointerEvents = "auto"),
                  (this._positionDelta = null),
                  (this._pointerdownPos = null),
                  (this._isDragging = !1),
                  this._map.off("mousemove", this._onMove),
                  this._map.off("touchmove", this._onMove),
                  this._state === "active" && this.fire(new n.k("dragend")),
                  (this._state = "inactive");
              }),
              (this._addDragHandler = (d) => {
                this._element.contains(d.originalEvent.target) &&
                  (d.preventDefault(),
                  (this._positionDelta = d.point
                    .sub(this._pos)
                    .add(this._offset)),
                  (this._pointerdownPos = d.point),
                  (this._state = "pending"),
                  this._map.on("mousemove", this._onMove),
                  this._map.on("touchmove", this._onMove),
                  this._map.once("mouseup", this._onUp),
                  this._map.once("touchend", this._onUp));
              }),
              (this._anchor = (a && a.anchor) || "center"),
              (this._color = (a && a.color) || "#3FB1CE"),
              (this._scale = (a && a.scale) || 1),
              (this._draggable = (a && a.draggable) || !1),
              (this._clickTolerance = (a && a.clickTolerance) || 0),
              (this._isDragging = !1),
              (this._state = "inactive"),
              (this._rotation = (a && a.rotation) || 0),
              (this._rotationAlignment = (a && a.rotationAlignment) || "auto"),
              (this._pitchAlignment =
                a && a.pitchAlignment && a.pitchAlignment !== "auto"
                  ? a.pitchAlignment
                  : this._rotationAlignment),
              this.setOpacity(),
              this.setOpacity(a?.opacity, a?.opacityWhenCovered),
              a && a.element)
            )
              (this._element = a.element),
                (this._offset = n.P.convert((a && a.offset) || [0, 0]));
            else {
              (this._defaultMarker = !0),
                (this._element = _.create("div")),
                this._element.setAttribute("aria-label", "Map marker");
              let d = _.createNS("http://www.w3.org/2000/svg", "svg"),
                f = 41,
                g = 27;
              d.setAttributeNS(null, "display", "block"),
                d.setAttributeNS(null, "height", `${f}px`),
                d.setAttributeNS(null, "width", `${g}px`),
                d.setAttributeNS(null, "viewBox", `0 0 ${g} ${f}`);
              let x = _.createNS("http://www.w3.org/2000/svg", "g");
              x.setAttributeNS(null, "stroke", "none"),
                x.setAttributeNS(null, "stroke-width", "1"),
                x.setAttributeNS(null, "fill", "none"),
                x.setAttributeNS(null, "fill-rule", "evenodd");
              let E = _.createNS("http://www.w3.org/2000/svg", "g");
              E.setAttributeNS(null, "fill-rule", "nonzero");
              let M = _.createNS("http://www.w3.org/2000/svg", "g");
              M.setAttributeNS(null, "transform", "translate(3.0, 29.0)"),
                M.setAttributeNS(null, "fill", "#000000");
              let I = [
                { rx: "10.5", ry: "5.25002273" },
                { rx: "10.5", ry: "5.25002273" },
                { rx: "9.5", ry: "4.77275007" },
                { rx: "8.5", ry: "4.29549936" },
                { rx: "7.5", ry: "3.81822308" },
                { rx: "6.5", ry: "3.34094679" },
                { rx: "5.5", ry: "2.86367051" },
                { rx: "4.5", ry: "2.38636864" },
              ];
              for (let _e of I) {
                let Be = _.createNS("http://www.w3.org/2000/svg", "ellipse");
                Be.setAttributeNS(null, "opacity", "0.04"),
                  Be.setAttributeNS(null, "cx", "10.5"),
                  Be.setAttributeNS(null, "cy", "5.80029008"),
                  Be.setAttributeNS(null, "rx", _e.rx),
                  Be.setAttributeNS(null, "ry", _e.ry),
                  M.appendChild(Be);
              }
              let z = _.createNS("http://www.w3.org/2000/svg", "g");
              z.setAttributeNS(null, "fill", this._color);
              let B = _.createNS("http://www.w3.org/2000/svg", "path");
              B.setAttributeNS(
                null,
                "d",
                "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"
              ),
                z.appendChild(B);
              let U = _.createNS("http://www.w3.org/2000/svg", "g");
              U.setAttributeNS(null, "opacity", "0.25"),
                U.setAttributeNS(null, "fill", "#000000");
              let Z = _.createNS("http://www.w3.org/2000/svg", "path");
              Z.setAttributeNS(
                null,
                "d",
                "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"
              ),
                U.appendChild(Z);
              let se = _.createNS("http://www.w3.org/2000/svg", "g");
              se.setAttributeNS(null, "transform", "translate(6.0, 7.0)"),
                se.setAttributeNS(null, "fill", "#FFFFFF");
              let oe = _.createNS("http://www.w3.org/2000/svg", "g");
              oe.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
              let le = _.createNS("http://www.w3.org/2000/svg", "circle");
              le.setAttributeNS(null, "fill", "#000000"),
                le.setAttributeNS(null, "opacity", "0.25"),
                le.setAttributeNS(null, "cx", "5.5"),
                le.setAttributeNS(null, "cy", "5.5"),
                le.setAttributeNS(null, "r", "5.4999962");
              let ee = _.createNS("http://www.w3.org/2000/svg", "circle");
              ee.setAttributeNS(null, "fill", "#FFFFFF"),
                ee.setAttributeNS(null, "cx", "5.5"),
                ee.setAttributeNS(null, "cy", "5.5"),
                ee.setAttributeNS(null, "r", "5.4999962"),
                oe.appendChild(le),
                oe.appendChild(ee),
                E.appendChild(M),
                E.appendChild(z),
                E.appendChild(U),
                E.appendChild(se),
                E.appendChild(oe),
                d.appendChild(E),
                d.setAttributeNS(null, "height", f * this._scale + "px"),
                d.setAttributeNS(null, "width", g * this._scale + "px"),
                this._element.appendChild(d),
                (this._offset = n.P.convert((a && a.offset) || [0, -14]));
            }
            if (
              (this._element.classList.add("maplibregl-marker"),
              this._element.addEventListener("dragstart", (d) => {
                d.preventDefault();
              }),
              this._element.addEventListener("mousedown", (d) => {
                d.preventDefault();
              }),
              Lu(this._element, this._anchor, "marker"),
              a && a.className)
            )
              for (let d of a.className.split(" "))
                this._element.classList.add(d);
            this._popup = null;
          }
          addTo(a) {
            return (
              this.remove(),
              (this._map = a),
              a.getCanvasContainer().appendChild(this._element),
              a.on("move", this._update),
              a.on("moveend", this._update),
              a.on("terrain", this._update),
              this.setDraggable(this._draggable),
              this._update(),
              this._map.on("click", this._onMapClick),
              this
            );
          }
          remove() {
            return (
              this._opacityTimeout &&
                (clearTimeout(this._opacityTimeout),
                delete this._opacityTimeout),
              this._map &&
                (this._map.off("click", this._onMapClick),
                this._map.off("move", this._update),
                this._map.off("moveend", this._update),
                this._map.off("mousedown", this._addDragHandler),
                this._map.off("touchstart", this._addDragHandler),
                this._map.off("mouseup", this._onUp),
                this._map.off("touchend", this._onUp),
                this._map.off("mousemove", this._onMove),
                this._map.off("touchmove", this._onMove),
                delete this._map),
              _.remove(this._element),
              this._popup && this._popup.remove(),
              this
            );
          }
          getLngLat() {
            return this._lngLat;
          }
          setLngLat(a) {
            return (
              (this._lngLat = n.M.convert(a)),
              (this._pos = null),
              this._popup && this._popup.setLngLat(this._lngLat),
              this._update(),
              this
            );
          }
          getElement() {
            return this._element;
          }
          setPopup(a) {
            if (
              (this._popup &&
                (this._popup.remove(),
                (this._popup = null),
                this._element.removeEventListener("keypress", this._onKeyPress),
                this._originalTabIndex ||
                  this._element.removeAttribute("tabindex")),
              a)
            ) {
              if (!("offset" in a.options)) {
                let g = Math.abs(13.5) / Math.SQRT2;
                a.options.offset = this._defaultMarker
                  ? {
                      top: [0, 0],
                      "top-left": [0, 0],
                      "top-right": [0, 0],
                      bottom: [0, -38.1],
                      "bottom-left": [g, -1 * (38.1 - 13.5 + g)],
                      "bottom-right": [-g, -1 * (38.1 - 13.5 + g)],
                      left: [13.5, -1 * (38.1 - 13.5)],
                      right: [-13.5, -1 * (38.1 - 13.5)],
                    }
                  : this._offset;
              }
              (this._popup = a),
                (this._originalTabIndex =
                  this._element.getAttribute("tabindex")),
                this._originalTabIndex ||
                  this._element.setAttribute("tabindex", "0"),
                this._element.addEventListener("keypress", this._onKeyPress);
            }
            return this;
          }
          getPopup() {
            return this._popup;
          }
          togglePopup() {
            let a = this._popup;
            return this._element.style.opacity === this._opacityWhenCovered
              ? this
              : a
              ? (a.isOpen()
                  ? a.remove()
                  : (a.setLngLat(this._lngLat), a.addTo(this._map)),
                this)
              : this;
          }
          _updateOpacity(a = !1) {
            var d, f;
            if (!(!((d = this._map) === null || d === void 0) && d.terrain))
              return void (
                this._element.style.opacity !== this._opacity &&
                (this._element.style.opacity = this._opacity)
              );
            if (a) this._opacityTimeout = null;
            else {
              if (this._opacityTimeout) return;
              this._opacityTimeout = setTimeout(() => {
                this._opacityTimeout = null;
              }, 100);
            }
            let g = this._map,
              x = g.terrain.depthAtPoint(this._pos),
              E = g.terrain.getElevationForLngLatZoom(
                this._lngLat,
                g.transform.tileZoom
              );
            if (g.transform.lngLatToCameraDepth(this._lngLat, E) - x < 0.006)
              return void (this._element.style.opacity = this._opacity);
            let M = -this._offset.y / g.transform._pixelPerMeter,
              I = Math.sin((g.getPitch() * Math.PI) / 180) * M,
              z = g.terrain.depthAtPoint(
                new n.P(this._pos.x, this._pos.y - this._offset.y)
              ),
              B =
                g.transform.lngLatToCameraDepth(this._lngLat, E + I) - z >
                0.006;
            !((f = this._popup) === null || f === void 0) &&
              f.isOpen() &&
              B &&
              this._popup.remove(),
              (this._element.style.opacity = B
                ? this._opacityWhenCovered
                : this._opacity);
          }
          getOffset() {
            return this._offset;
          }
          setOffset(a) {
            return (this._offset = n.P.convert(a)), this._update(), this;
          }
          addClassName(a) {
            this._element.classList.add(a);
          }
          removeClassName(a) {
            this._element.classList.remove(a);
          }
          toggleClassName(a) {
            return this._element.classList.toggle(a);
          }
          setDraggable(a) {
            return (
              (this._draggable = !!a),
              this._map &&
                (a
                  ? (this._map.on("mousedown", this._addDragHandler),
                    this._map.on("touchstart", this._addDragHandler))
                  : (this._map.off("mousedown", this._addDragHandler),
                    this._map.off("touchstart", this._addDragHandler))),
              this
            );
          }
          isDraggable() {
            return this._draggable;
          }
          setRotation(a) {
            return (this._rotation = a || 0), this._update(), this;
          }
          getRotation() {
            return this._rotation;
          }
          setRotationAlignment(a) {
            return (
              (this._rotationAlignment = a || "auto"), this._update(), this
            );
          }
          getRotationAlignment() {
            return this._rotationAlignment;
          }
          setPitchAlignment(a) {
            return (
              (this._pitchAlignment =
                a && a !== "auto" ? a : this._rotationAlignment),
              this._update(),
              this
            );
          }
          getPitchAlignment() {
            return this._pitchAlignment;
          }
          setOpacity(a, d) {
            return (
              a === void 0 &&
                d === void 0 &&
                ((this._opacity = "1"), (this._opacityWhenCovered = "0.2")),
              a !== void 0 && (this._opacity = a),
              d !== void 0 && (this._opacityWhenCovered = d),
              this._map && this._updateOpacity(!0),
              this
            );
          }
        }
        let fh = {
            positionOptions: {
              enableHighAccuracy: !1,
              maximumAge: 0,
              timeout: 6e3,
            },
            fitBoundsOptions: { maxZoom: 15 },
            trackUserLocation: !1,
            showAccuracyCircle: !0,
            showUserLocation: !0,
          },
          Rl = 0,
          ga = !1,
          mh = { maxWidth: 100, unit: "metric" };
        function Fu(v, a, d) {
          let f = (d && d.maxWidth) || 100,
            g = v._container.clientHeight / 2,
            x = v.unproject([0, g]),
            E = v.unproject([f, g]),
            M = x.distanceTo(E);
          if (d && d.unit === "imperial") {
            let I = 3.2808 * M;
            I > 5280
              ? Ba(a, f, I / 5280, v._getUIString("ScaleControl.Miles"))
              : Ba(a, f, I, v._getUIString("ScaleControl.Feet"));
          } else d && d.unit === "nautical" ? Ba(a, f, M / 1852, v._getUIString("ScaleControl.NauticalMiles")) : M >= 1e3 ? Ba(a, f, M / 1e3, v._getUIString("ScaleControl.Kilometers")) : Ba(a, f, M, v._getUIString("ScaleControl.Meters"));
        }
        function Ba(v, a, d, f) {
          let g = (function (x) {
            let E = Math.pow(10, `${Math.floor(x)}`.length - 1),
              M = x / E;
            return (
              (M =
                M >= 10
                  ? 10
                  : M >= 5
                  ? 5
                  : M >= 3
                  ? 3
                  : M >= 2
                  ? 2
                  : M >= 1
                  ? 1
                  : (function (I) {
                      let z = Math.pow(10, Math.ceil(-Math.log(I) / Math.LN10));
                      return Math.round(I * z) / z;
                    })(M)),
              E * M
            );
          })(d);
          (v.style.width = a * (g / d) + "px"),
            (v.innerHTML = `${g}&nbsp;${f}`);
        }
        let gh = {
            closeButton: !0,
            closeOnClick: !0,
            focusAfterOpen: !0,
            className: "",
            maxWidth: "240px",
            subpixelPositioning: !1,
          },
          yh = [
            "a[href]",
            "[tabindex]:not([tabindex='-1'])",
            "[contenteditable]:not([contenteditable='false'])",
            "button:not([disabled])",
            "input:not([disabled])",
            "select:not([disabled])",
            "textarea:not([disabled])",
          ].join(", ");
        function bh(v) {
          if (v) {
            if (typeof v == "number") {
              let a = Math.round(Math.abs(v) / Math.SQRT2);
              return {
                center: new n.P(0, 0),
                top: new n.P(0, v),
                "top-left": new n.P(a, a),
                "top-right": new n.P(-a, a),
                bottom: new n.P(0, -v),
                "bottom-left": new n.P(a, -a),
                "bottom-right": new n.P(-a, -a),
                left: new n.P(v, 0),
                right: new n.P(-v, 0),
              };
            }
            if (v instanceof n.P || Array.isArray(v)) {
              let a = n.P.convert(v);
              return {
                center: a,
                top: a,
                "top-left": a,
                "top-right": a,
                bottom: a,
                "bottom-left": a,
                "bottom-right": a,
                left: a,
                right: a,
              };
            }
            return {
              center: n.P.convert(v.center || [0, 0]),
              top: n.P.convert(v.top || [0, 0]),
              "top-left": n.P.convert(v["top-left"] || [0, 0]),
              "top-right": n.P.convert(v["top-right"] || [0, 0]),
              bottom: n.P.convert(v.bottom || [0, 0]),
              "bottom-left": n.P.convert(v["bottom-left"] || [0, 0]),
              "bottom-right": n.P.convert(v["bottom-right"] || [0, 0]),
              left: n.P.convert(v.left || [0, 0]),
              right: n.P.convert(v.right || [0, 0]),
            };
          }
          return bh(new n.P(0, 0));
        }
        let Bf = u;
        (o.AJAXError = n.be),
          (o.Evented = n.E),
          (o.LngLat = n.M),
          (o.MercatorCoordinate = n.Y),
          (o.Point = n.P),
          (o.addProtocol = n.bf),
          (o.config = n.a),
          (o.removeProtocol = n.bg),
          (o.AttributionControl = Nf),
          (o.BoxZoomHandler = zl),
          (o.CanvasSource = tn),
          (o.CooperativeGesturesHandler = si),
          (o.DoubleClickZoomHandler = ah),
          (o.DragPanHandler = fs),
          (o.DragRotateHandler = bc),
          (o.EdgeInsets = fc),
          (o.FullscreenControl = class extends n.E {
            constructor(v = {}) {
              super(),
                (this._onFullscreenChange = () => {
                  var a;
                  let d =
                    window.document.fullscreenElement ||
                    window.document.mozFullScreenElement ||
                    window.document.webkitFullscreenElement ||
                    window.document.msFullscreenElement;
                  for (
                    ;
                    !((a = d?.shadowRoot) === null || a === void 0) &&
                    a.fullscreenElement;

                  )
                    d = d.shadowRoot.fullscreenElement;
                  (d === this._container) !== this._fullscreen &&
                    this._handleFullscreenChange();
                }),
                (this._onClickFullscreen = () => {
                  this._isFullscreen()
                    ? this._exitFullscreen()
                    : this._requestFullscreen();
                }),
                (this._fullscreen = !1),
                v &&
                  v.container &&
                  (v.container instanceof HTMLElement
                    ? (this._container = v.container)
                    : n.w(
                        "Full screen control 'container' must be a DOM element."
                      )),
                "onfullscreenchange" in document
                  ? (this._fullscreenchange = "fullscreenchange")
                  : "onmozfullscreenchange" in document
                  ? (this._fullscreenchange = "mozfullscreenchange")
                  : "onwebkitfullscreenchange" in document
                  ? (this._fullscreenchange = "webkitfullscreenchange")
                  : "onmsfullscreenchange" in document &&
                    (this._fullscreenchange = "MSFullscreenChange");
            }
            onAdd(v) {
              return (
                (this._map = v),
                this._container || (this._container = this._map.getContainer()),
                (this._controlContainer = _.create(
                  "div",
                  "maplibregl-ctrl maplibregl-ctrl-group"
                )),
                this._setupUI(),
                this._controlContainer
              );
            }
            onRemove() {
              _.remove(this._controlContainer),
                (this._map = null),
                window.document.removeEventListener(
                  this._fullscreenchange,
                  this._onFullscreenChange
                );
            }
            _setupUI() {
              let v = (this._fullscreenButton = _.create(
                "button",
                "maplibregl-ctrl-fullscreen",
                this._controlContainer
              ));
              _.create("span", "maplibregl-ctrl-icon", v).setAttribute(
                "aria-hidden",
                "true"
              ),
                (v.type = "button"),
                this._updateTitle(),
                this._fullscreenButton.addEventListener(
                  "click",
                  this._onClickFullscreen
                ),
                window.document.addEventListener(
                  this._fullscreenchange,
                  this._onFullscreenChange
                );
            }
            _updateTitle() {
              let v = this._getTitle();
              this._fullscreenButton.setAttribute("aria-label", v),
                (this._fullscreenButton.title = v);
            }
            _getTitle() {
              return this._map._getUIString(
                this._isFullscreen()
                  ? "FullscreenControl.Exit"
                  : "FullscreenControl.Enter"
              );
            }
            _isFullscreen() {
              return this._fullscreen;
            }
            _handleFullscreenChange() {
              (this._fullscreen = !this._fullscreen),
                this._fullscreenButton.classList.toggle(
                  "maplibregl-ctrl-shrink"
                ),
                this._fullscreenButton.classList.toggle(
                  "maplibregl-ctrl-fullscreen"
                ),
                this._updateTitle(),
                this._fullscreen
                  ? (this.fire(new n.k("fullscreenstart")),
                    (this._prevCooperativeGesturesEnabled =
                      this._map.cooperativeGestures.isEnabled()),
                    this._map.cooperativeGestures.disable())
                  : (this.fire(new n.k("fullscreenend")),
                    this._prevCooperativeGesturesEnabled &&
                      this._map.cooperativeGestures.enable());
            }
            _exitFullscreen() {
              window.document.exitFullscreen
                ? window.document.exitFullscreen()
                : window.document.mozCancelFullScreen
                ? window.document.mozCancelFullScreen()
                : window.document.msExitFullscreen
                ? window.document.msExitFullscreen()
                : window.document.webkitCancelFullScreen
                ? window.document.webkitCancelFullScreen()
                : this._togglePseudoFullScreen();
            }
            _requestFullscreen() {
              this._container.requestFullscreen
                ? this._container.requestFullscreen()
                : this._container.mozRequestFullScreen
                ? this._container.mozRequestFullScreen()
                : this._container.msRequestFullscreen
                ? this._container.msRequestFullscreen()
                : this._container.webkitRequestFullscreen
                ? this._container.webkitRequestFullscreen()
                : this._togglePseudoFullScreen();
            }
            _togglePseudoFullScreen() {
              this._container.classList.toggle("maplibregl-pseudo-fullscreen"),
                this._handleFullscreenChange(),
                this._map.resize();
            }
          }),
          (o.GeoJSONSource = ui),
          (o.GeolocateControl = class extends n.E {
            constructor(v) {
              super(),
                (this._onSuccess = (a) => {
                  if (this._map) {
                    if (this._isOutOfMapMaxBounds(a))
                      return (
                        this._setErrorState(),
                        this.fire(new n.k("outofmaxbounds", a)),
                        this._updateMarker(),
                        void this._finish()
                      );
                    if (this.options.trackUserLocation)
                      switch (
                        ((this._lastKnownPosition = a), this._watchState)
                      ) {
                        case "WAITING_ACTIVE":
                        case "ACTIVE_LOCK":
                        case "ACTIVE_ERROR":
                          (this._watchState = "ACTIVE_LOCK"),
                            this._geolocateButton.classList.remove(
                              "maplibregl-ctrl-geolocate-waiting"
                            ),
                            this._geolocateButton.classList.remove(
                              "maplibregl-ctrl-geolocate-active-error"
                            ),
                            this._geolocateButton.classList.add(
                              "maplibregl-ctrl-geolocate-active"
                            );
                          break;
                        case "BACKGROUND":
                        case "BACKGROUND_ERROR":
                          (this._watchState = "BACKGROUND"),
                            this._geolocateButton.classList.remove(
                              "maplibregl-ctrl-geolocate-waiting"
                            ),
                            this._geolocateButton.classList.remove(
                              "maplibregl-ctrl-geolocate-background-error"
                            ),
                            this._geolocateButton.classList.add(
                              "maplibregl-ctrl-geolocate-background"
                            );
                          break;
                        default:
                          throw new Error(
                            `Unexpected watchState ${this._watchState}`
                          );
                      }
                    this.options.showUserLocation &&
                      this._watchState !== "OFF" &&
                      this._updateMarker(a),
                      (this.options.trackUserLocation &&
                        this._watchState !== "ACTIVE_LOCK") ||
                        this._updateCamera(a),
                      this.options.showUserLocation &&
                        this._dotElement.classList.remove(
                          "maplibregl-user-location-dot-stale"
                        ),
                      this.fire(new n.k("geolocate", a)),
                      this._finish();
                  }
                }),
                (this._updateCamera = (a) => {
                  let d = new n.M(a.coords.longitude, a.coords.latitude),
                    f = a.coords.accuracy,
                    g = this._map.getBearing(),
                    x = n.e({ bearing: g }, this.options.fitBoundsOptions),
                    E = pt.fromLngLat(d, f);
                  this._map.fitBounds(E, x, { geolocateSource: !0 });
                }),
                (this._updateMarker = (a) => {
                  if (a) {
                    let d = new n.M(a.coords.longitude, a.coords.latitude);
                    this._accuracyCircleMarker.setLngLat(d).addTo(this._map),
                      this._userLocationDotMarker.setLngLat(d).addTo(this._map),
                      (this._accuracy = a.coords.accuracy),
                      this.options.showUserLocation &&
                        this.options.showAccuracyCircle &&
                        this._updateCircleRadius();
                  } else
                    this._userLocationDotMarker.remove(),
                      this._accuracyCircleMarker.remove();
                }),
                (this._onZoom = () => {
                  this.options.showUserLocation &&
                    this.options.showAccuracyCircle &&
                    this._updateCircleRadius();
                }),
                (this._onError = (a) => {
                  if (this._map) {
                    if (this.options.trackUserLocation)
                      if (a.code === 1) {
                        (this._watchState = "OFF"),
                          this._geolocateButton.classList.remove(
                            "maplibregl-ctrl-geolocate-waiting"
                          ),
                          this._geolocateButton.classList.remove(
                            "maplibregl-ctrl-geolocate-active"
                          ),
                          this._geolocateButton.classList.remove(
                            "maplibregl-ctrl-geolocate-active-error"
                          ),
                          this._geolocateButton.classList.remove(
                            "maplibregl-ctrl-geolocate-background"
                          ),
                          this._geolocateButton.classList.remove(
                            "maplibregl-ctrl-geolocate-background-error"
                          ),
                          (this._geolocateButton.disabled = !0);
                        let d = this._map._getUIString(
                          "GeolocateControl.LocationNotAvailable"
                        );
                        (this._geolocateButton.title = d),
                          this._geolocateButton.setAttribute("aria-label", d),
                          this._geolocationWatchID !== void 0 &&
                            this._clearWatch();
                      } else {
                        if (a.code === 3 && ga) return;
                        this._setErrorState();
                      }
                    this._watchState !== "OFF" &&
                      this.options.showUserLocation &&
                      this._dotElement.classList.add(
                        "maplibregl-user-location-dot-stale"
                      ),
                      this.fire(new n.k("error", a)),
                      this._finish();
                  }
                }),
                (this._finish = () => {
                  this._timeoutId && clearTimeout(this._timeoutId),
                    (this._timeoutId = void 0);
                }),
                (this._setupUI = (a) => {
                  if (this._map) {
                    if (
                      (this._container.addEventListener("contextmenu", (d) =>
                        d.preventDefault()
                      ),
                      (this._geolocateButton = _.create(
                        "button",
                        "maplibregl-ctrl-geolocate",
                        this._container
                      )),
                      _.create(
                        "span",
                        "maplibregl-ctrl-icon",
                        this._geolocateButton
                      ).setAttribute("aria-hidden", "true"),
                      (this._geolocateButton.type = "button"),
                      a === !1)
                    ) {
                      n.w(
                        "Geolocation support is not available so the GeolocateControl will be disabled."
                      );
                      let d = this._map._getUIString(
                        "GeolocateControl.LocationNotAvailable"
                      );
                      (this._geolocateButton.disabled = !0),
                        (this._geolocateButton.title = d),
                        this._geolocateButton.setAttribute("aria-label", d);
                    } else {
                      let d = this._map._getUIString(
                        "GeolocateControl.FindMyLocation"
                      );
                      (this._geolocateButton.title = d),
                        this._geolocateButton.setAttribute("aria-label", d);
                    }
                    this.options.trackUserLocation &&
                      (this._geolocateButton.setAttribute(
                        "aria-pressed",
                        "false"
                      ),
                      (this._watchState = "OFF")),
                      this.options.showUserLocation &&
                        ((this._dotElement = _.create(
                          "div",
                          "maplibregl-user-location-dot"
                        )),
                        (this._userLocationDotMarker = new Bl({
                          element: this._dotElement,
                        })),
                        (this._circleElement = _.create(
                          "div",
                          "maplibregl-user-location-accuracy-circle"
                        )),
                        (this._accuracyCircleMarker = new Bl({
                          element: this._circleElement,
                          pitchAlignment: "map",
                        })),
                        this.options.trackUserLocation &&
                          (this._watchState = "OFF"),
                        this._map.on("zoom", this._onZoom)),
                      this._geolocateButton.addEventListener("click", () =>
                        this.trigger()
                      ),
                      (this._setup = !0),
                      this.options.trackUserLocation &&
                        this._map.on("movestart", (d) => {
                          d.geolocateSource ||
                            this._watchState !== "ACTIVE_LOCK" ||
                            (d.originalEvent &&
                              d.originalEvent.type === "resize") ||
                            ((this._watchState = "BACKGROUND"),
                            this._geolocateButton.classList.add(
                              "maplibregl-ctrl-geolocate-background"
                            ),
                            this._geolocateButton.classList.remove(
                              "maplibregl-ctrl-geolocate-active"
                            ),
                            this.fire(new n.k("trackuserlocationend")));
                        });
                  }
                }),
                (this.options = n.e({}, fh, v));
            }
            onAdd(v) {
              return (
                (this._map = v),
                (this._container = _.create(
                  "div",
                  "maplibregl-ctrl maplibregl-ctrl-group"
                )),
                (function () {
                  return n._(this, arguments, void 0, function* (a = !1) {
                    if (Ks !== void 0 && !a) return Ks;
                    if (window.navigator.permissions === void 0)
                      return (Ks = !!window.navigator.geolocation), Ks;
                    try {
                      Ks =
                        (yield window.navigator.permissions.query({
                          name: "geolocation",
                        })).state !== "denied";
                    } catch {
                      Ks = !!window.navigator.geolocation;
                    }
                    return Ks;
                  });
                })().then((a) => this._setupUI(a)),
                this._container
              );
            }
            onRemove() {
              this._geolocationWatchID !== void 0 &&
                (window.navigator.geolocation.clearWatch(
                  this._geolocationWatchID
                ),
                (this._geolocationWatchID = void 0)),
                this.options.showUserLocation &&
                  this._userLocationDotMarker &&
                  this._userLocationDotMarker.remove(),
                this.options.showAccuracyCircle &&
                  this._accuracyCircleMarker &&
                  this._accuracyCircleMarker.remove(),
                _.remove(this._container),
                this._map.off("zoom", this._onZoom),
                (this._map = void 0),
                (Rl = 0),
                (ga = !1);
            }
            _isOutOfMapMaxBounds(v) {
              let a = this._map.getMaxBounds(),
                d = v.coords;
              return (
                a &&
                (d.longitude < a.getWest() ||
                  d.longitude > a.getEast() ||
                  d.latitude < a.getSouth() ||
                  d.latitude > a.getNorth())
              );
            }
            _setErrorState() {
              switch (this._watchState) {
                case "WAITING_ACTIVE":
                  (this._watchState = "ACTIVE_ERROR"),
                    this._geolocateButton.classList.remove(
                      "maplibregl-ctrl-geolocate-active"
                    ),
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-active-error"
                    );
                  break;
                case "ACTIVE_LOCK":
                  (this._watchState = "ACTIVE_ERROR"),
                    this._geolocateButton.classList.remove(
                      "maplibregl-ctrl-geolocate-active"
                    ),
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-active-error"
                    ),
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-waiting"
                    );
                  break;
                case "BACKGROUND":
                  (this._watchState = "BACKGROUND_ERROR"),
                    this._geolocateButton.classList.remove(
                      "maplibregl-ctrl-geolocate-background"
                    ),
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-background-error"
                    ),
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-waiting"
                    );
                  break;
                case "ACTIVE_ERROR":
                  break;
                default:
                  throw new Error(`Unexpected watchState ${this._watchState}`);
              }
            }
            _updateCircleRadius() {
              let v = this._map.getBounds(),
                a = v.getSouthEast(),
                d = v.getNorthEast(),
                f = a.distanceTo(d),
                g = Math.ceil(
                  (this._accuracy / (f / this._map._container.clientHeight)) * 2
                );
              (this._circleElement.style.width = `${g}px`),
                (this._circleElement.style.height = `${g}px`);
            }
            trigger() {
              if (!this._setup)
                return (
                  n.w("Geolocate control triggered before added to a map"), !1
                );
              if (this.options.trackUserLocation) {
                switch (this._watchState) {
                  case "OFF":
                    (this._watchState = "WAITING_ACTIVE"),
                      this.fire(new n.k("trackuserlocationstart"));
                    break;
                  case "WAITING_ACTIVE":
                  case "ACTIVE_LOCK":
                  case "ACTIVE_ERROR":
                  case "BACKGROUND_ERROR":
                    Rl--,
                      (ga = !1),
                      (this._watchState = "OFF"),
                      this._geolocateButton.classList.remove(
                        "maplibregl-ctrl-geolocate-waiting"
                      ),
                      this._geolocateButton.classList.remove(
                        "maplibregl-ctrl-geolocate-active"
                      ),
                      this._geolocateButton.classList.remove(
                        "maplibregl-ctrl-geolocate-active-error"
                      ),
                      this._geolocateButton.classList.remove(
                        "maplibregl-ctrl-geolocate-background"
                      ),
                      this._geolocateButton.classList.remove(
                        "maplibregl-ctrl-geolocate-background-error"
                      ),
                      this.fire(new n.k("trackuserlocationend"));
                    break;
                  case "BACKGROUND":
                    (this._watchState = "ACTIVE_LOCK"),
                      this._geolocateButton.classList.remove(
                        "maplibregl-ctrl-geolocate-background"
                      ),
                      this._lastKnownPosition &&
                        this._updateCamera(this._lastKnownPosition),
                      this.fire(new n.k("trackuserlocationstart"));
                    break;
                  default:
                    throw new Error(
                      `Unexpected watchState ${this._watchState}`
                    );
                }
                switch (this._watchState) {
                  case "WAITING_ACTIVE":
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-waiting"
                    ),
                      this._geolocateButton.classList.add(
                        "maplibregl-ctrl-geolocate-active"
                      );
                    break;
                  case "ACTIVE_LOCK":
                    this._geolocateButton.classList.add(
                      "maplibregl-ctrl-geolocate-active"
                    );
                    break;
                  case "OFF":
                    break;
                  default:
                    throw new Error(
                      `Unexpected watchState ${this._watchState}`
                    );
                }
                if (
                  this._watchState === "OFF" &&
                  this._geolocationWatchID !== void 0
                )
                  this._clearWatch();
                else if (this._geolocationWatchID === void 0) {
                  let v;
                  this._geolocateButton.classList.add(
                    "maplibregl-ctrl-geolocate-waiting"
                  ),
                    this._geolocateButton.setAttribute("aria-pressed", "true"),
                    Rl++,
                    Rl > 1
                      ? ((v = { maximumAge: 6e5, timeout: 0 }), (ga = !0))
                      : ((v = this.options.positionOptions), (ga = !1)),
                    (this._geolocationWatchID =
                      window.navigator.geolocation.watchPosition(
                        this._onSuccess,
                        this._onError,
                        v
                      ));
                }
              } else
                window.navigator.geolocation.getCurrentPosition(
                  this._onSuccess,
                  this._onError,
                  this.options.positionOptions
                ),
                  (this._timeoutId = setTimeout(this._finish, 1e4));
              return !0;
            }
            _clearWatch() {
              window.navigator.geolocation.clearWatch(this._geolocationWatchID),
                (this._geolocationWatchID = void 0),
                this._geolocateButton.classList.remove(
                  "maplibregl-ctrl-geolocate-waiting"
                ),
                this._geolocateButton.setAttribute("aria-pressed", "false"),
                this.options.showUserLocation && this._updateMarker(null);
            }
          }),
          (o.Hash = Xd),
          (o.ImageSource = Er),
          (o.KeyboardHandler = Mr),
          (o.LngLatBounds = pt),
          (o.LogoControl = Ol),
          (o.Map = class extends zf {
            constructor(v) {
              if (
                (n.bc.mark(n.bd.create),
                (v = n.e({}, dh, v)).minZoom != null &&
                  v.maxZoom != null &&
                  v.minZoom > v.maxZoom)
              )
                throw new Error(
                  "maxZoom must be greater than or equal to minZoom"
                );
              if (
                v.minPitch != null &&
                v.maxPitch != null &&
                v.minPitch > v.maxPitch
              )
                throw new Error(
                  "maxPitch must be greater than or equal to minPitch"
                );
              if (v.minPitch != null && v.minPitch < 0)
                throw new Error("minPitch must be greater than or equal to 0");
              if (v.maxPitch != null && v.maxPitch > 85)
                throw new Error("maxPitch must be less than or equal to 85");
              if (
                (super(
                  new Cu(
                    v.minZoom,
                    v.maxZoom,
                    v.minPitch,
                    v.maxPitch,
                    v.renderWorldCopies
                  ),
                  { bearingSnap: v.bearingSnap }
                ),
                (this._contextLost = (a) => {
                  a.preventDefault(),
                    this._frameRequest &&
                      (this._frameRequest.abort(), (this._frameRequest = null)),
                    this.fire(
                      new n.k("webglcontextlost", { originalEvent: a })
                    );
                }),
                (this._contextRestored = (a) => {
                  this._setupPainter(),
                    this.resize(),
                    this._update(),
                    this.fire(
                      new n.k("webglcontextrestored", { originalEvent: a })
                    );
                }),
                (this._onMapScroll = (a) => {
                  if (a.target === this._container)
                    return (
                      (this._container.scrollTop = 0),
                      (this._container.scrollLeft = 0),
                      !1
                    );
                }),
                (this._onWindowOnline = () => {
                  this._update();
                }),
                (this._interactive = v.interactive),
                (this._maxTileCacheSize = v.maxTileCacheSize),
                (this._maxTileCacheZoomLevels = v.maxTileCacheZoomLevels),
                (this._failIfMajorPerformanceCaveat =
                  v.failIfMajorPerformanceCaveat),
                (this._preserveDrawingBuffer = v.preserveDrawingBuffer),
                (this._antialias = v.antialias),
                (this._trackResize = v.trackResize),
                (this._bearingSnap = v.bearingSnap),
                (this._refreshExpiredTiles = v.refreshExpiredTiles),
                (this._fadeDuration = v.fadeDuration),
                (this._crossSourceCollisions = v.crossSourceCollisions),
                (this._crossFadingFactor = 1),
                (this._collectResourceTiming = v.collectResourceTiming),
                (this._renderTaskQueue = new qr()),
                (this._controls = []),
                (this._mapId = n.a3()),
                (this._locale = n.e({}, uh, v.locale)),
                (this._clickTolerance = v.clickTolerance),
                (this._overridePixelRatio = v.pixelRatio),
                (this._maxCanvasSize = v.maxCanvasSize),
                (this.transformCameraUpdate = v.transformCameraUpdate),
                (this._imageQueueHandle = te.addThrottleControl(() =>
                  this.isMoving()
                )),
                (this._requestManager = new be(v.transformRequest)),
                typeof v.container == "string")
              ) {
                if (
                  ((this._container = document.getElementById(v.container)),
                  !this._container)
                )
                  throw new Error(`Container '${v.container}' not found.`);
              } else {
                if (!(v.container instanceof HTMLElement))
                  throw new Error(
                    "Invalid type: 'container' must be a String or HTMLElement."
                  );
                this._container = v.container;
              }
              if (
                (v.maxBounds && this.setMaxBounds(v.maxBounds),
                this._setupContainer(),
                this._setupPainter(),
                this.on("move", () => this._update(!1)),
                this.on("moveend", () => this._update(!1)),
                this.on("zoom", () => this._update(!0)),
                this.on("terrain", () => {
                  (this.painter.terrainFacilitator.dirty = !0),
                    this._update(!0);
                }),
                this.once("idle", () => {
                  this._idleTriggered = !0;
                }),
                typeof window < "u")
              ) {
                addEventListener("online", this._onWindowOnline, !1);
                let a = !1,
                  d = Jd((f) => {
                    this._trackResize &&
                      !this._removed &&
                      this.resize(f)._update();
                  }, 50);
                (this._resizeObserver = new ResizeObserver((f) => {
                  a ? d(f) : (a = !0);
                })),
                  this._resizeObserver.observe(this._container);
              }
              (this.handlers = new Mo(this, v)),
                (this._hash =
                  v.hash &&
                  new Xd((typeof v.hash == "string" && v.hash) || void 0).addTo(
                    this
                  )),
                (this._hash && this._hash._onHashChange()) ||
                  (this.jumpTo({
                    center: v.center,
                    zoom: v.zoom,
                    bearing: v.bearing,
                    pitch: v.pitch,
                  }),
                  v.bounds &&
                    (this.resize(),
                    this.fitBounds(
                      v.bounds,
                      n.e({}, v.fitBoundsOptions, { duration: 0 })
                    ))),
                this.resize(),
                (this._localIdeographFontFamily = v.localIdeographFontFamily),
                (this._validateStyle = v.validateStyle),
                v.style &&
                  this.setStyle(v.style, {
                    localIdeographFontFamily: v.localIdeographFontFamily,
                  }),
                v.attributionControl &&
                  this.addControl(
                    new Nf(
                      typeof v.attributionControl == "boolean"
                        ? void 0
                        : v.attributionControl
                    )
                  ),
                v.maplibreLogo && this.addControl(new Ol(), v.logoPosition),
                this.on("style.load", () => {
                  this.transform.unmodified &&
                    this.jumpTo(this.style.stylesheet);
                }),
                this.on("data", (a) => {
                  this._update(a.dataType === "style"),
                    this.fire(new n.k(`${a.dataType}data`, a));
                }),
                this.on("dataloading", (a) => {
                  this.fire(new n.k(`${a.dataType}dataloading`, a));
                }),
                this.on("dataabort", (a) => {
                  this.fire(new n.k("sourcedataabort", a));
                });
            }
            _getMapId() {
              return this._mapId;
            }
            addControl(v, a) {
              if (
                (a === void 0 &&
                  (a = v.getDefaultPosition
                    ? v.getDefaultPosition()
                    : "top-right"),
                !v || !v.onAdd)
              )
                return this.fire(
                  new n.j(
                    new Error(
                      "Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods."
                    )
                  )
                );
              let d = v.onAdd(this);
              this._controls.push(v);
              let f = this._controlPositions[a];
              return (
                a.indexOf("bottom") !== -1
                  ? f.insertBefore(d, f.firstChild)
                  : f.appendChild(d),
                this
              );
            }
            removeControl(v) {
              if (!v || !v.onRemove)
                return this.fire(
                  new n.j(
                    new Error(
                      "Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods."
                    )
                  )
                );
              let a = this._controls.indexOf(v);
              return (
                a > -1 && this._controls.splice(a, 1), v.onRemove(this), this
              );
            }
            hasControl(v) {
              return this._controls.indexOf(v) > -1;
            }
            calculateCameraOptionsFromTo(v, a, d, f) {
              return (
                f == null &&
                  this.terrain &&
                  (f = this.terrain.getElevationForLngLatZoom(
                    d,
                    this.transform.tileZoom
                  )),
                super.calculateCameraOptionsFromTo(v, a, d, f)
              );
            }
            resize(v) {
              var a;
              let d = this._containerDimensions(),
                f = d[0],
                g = d[1],
                x = this._getClampedPixelRatio(f, g);
              if (
                (this._resizeCanvas(f, g, x),
                this.painter.resize(f, g, x),
                this.painter.overLimit())
              ) {
                let M = this.painter.context.gl;
                this._maxCanvasSize = [
                  M.drawingBufferWidth,
                  M.drawingBufferHeight,
                ];
                let I = this._getClampedPixelRatio(f, g);
                this._resizeCanvas(f, g, I), this.painter.resize(f, g, I);
              }
              this.transform.resize(f, g),
                (a = this._requestedCameraState) === null ||
                  a === void 0 ||
                  a.resize(f, g);
              let E = !this._moving;
              return (
                E &&
                  (this.stop(),
                  this.fire(new n.k("movestart", v)).fire(new n.k("move", v))),
                this.fire(new n.k("resize", v)),
                E && this.fire(new n.k("moveend", v)),
                this
              );
            }
            _getClampedPixelRatio(v, a) {
              let { 0: d, 1: f } = this._maxCanvasSize,
                g = this.getPixelRatio(),
                x = v * g,
                E = a * g;
              return Math.min(x > d ? d / x : 1, E > f ? f / E : 1) * g;
            }
            getPixelRatio() {
              var v;
              return (v = this._overridePixelRatio) !== null && v !== void 0
                ? v
                : devicePixelRatio;
            }
            setPixelRatio(v) {
              (this._overridePixelRatio = v), this.resize();
            }
            getBounds() {
              return this.transform.getBounds();
            }
            getMaxBounds() {
              return this.transform.getMaxBounds();
            }
            setMaxBounds(v) {
              return this.transform.setMaxBounds(pt.convert(v)), this._update();
            }
            setMinZoom(v) {
              if ((v = v ?? -2) >= -2 && v <= this.transform.maxZoom)
                return (
                  (this.transform.minZoom = v),
                  this._update(),
                  this.getZoom() < v && this.setZoom(v),
                  this
                );
              throw new Error(
                "minZoom must be between -2 and the current maxZoom, inclusive"
              );
            }
            getMinZoom() {
              return this.transform.minZoom;
            }
            setMaxZoom(v) {
              if ((v = v ?? 22) >= this.transform.minZoom)
                return (
                  (this.transform.maxZoom = v),
                  this._update(),
                  this.getZoom() > v && this.setZoom(v),
                  this
                );
              throw new Error(
                "maxZoom must be greater than the current minZoom"
              );
            }
            getMaxZoom() {
              return this.transform.maxZoom;
            }
            setMinPitch(v) {
              if ((v = v ?? 0) < 0)
                throw new Error("minPitch must be greater than or equal to 0");
              if (v >= 0 && v <= this.transform.maxPitch)
                return (
                  (this.transform.minPitch = v),
                  this._update(),
                  this.getPitch() < v && this.setPitch(v),
                  this
                );
              throw new Error(
                "minPitch must be between 0 and the current maxPitch, inclusive"
              );
            }
            getMinPitch() {
              return this.transform.minPitch;
            }
            setMaxPitch(v) {
              if ((v = v ?? 60) > 85)
                throw new Error("maxPitch must be less than or equal to 85");
              if (v >= this.transform.minPitch)
                return (
                  (this.transform.maxPitch = v),
                  this._update(),
                  this.getPitch() > v && this.setPitch(v),
                  this
                );
              throw new Error(
                "maxPitch must be greater than the current minPitch"
              );
            }
            getMaxPitch() {
              return this.transform.maxPitch;
            }
            getRenderWorldCopies() {
              return this.transform.renderWorldCopies;
            }
            setRenderWorldCopies(v) {
              return (this.transform.renderWorldCopies = v), this._update();
            }
            project(v) {
              return this.transform.locationPoint(
                n.M.convert(v),
                this.style && this.terrain
              );
            }
            unproject(v) {
              return this.transform.pointLocation(n.P.convert(v), this.terrain);
            }
            isMoving() {
              var v;
              return (
                this._moving ||
                ((v = this.handlers) === null || v === void 0
                  ? void 0
                  : v.isMoving())
              );
            }
            isZooming() {
              var v;
              return (
                this._zooming ||
                ((v = this.handlers) === null || v === void 0
                  ? void 0
                  : v.isZooming())
              );
            }
            isRotating() {
              var v;
              return (
                this._rotating ||
                ((v = this.handlers) === null || v === void 0
                  ? void 0
                  : v.isRotating())
              );
            }
            _createDelegatedListener(v, a, d) {
              if (v === "mouseenter" || v === "mouseover") {
                let f = !1;
                return {
                  layer: a,
                  listener: d,
                  delegates: {
                    mousemove: (x) => {
                      let E = this.getLayer(a)
                        ? this.queryRenderedFeatures(x.point, { layers: [a] })
                        : [];
                      E.length
                        ? f ||
                          ((f = !0),
                          d.call(
                            this,
                            new Dn(v, this, x.originalEvent, { features: E })
                          ))
                        : (f = !1);
                    },
                    mouseout: () => {
                      f = !1;
                    },
                  },
                };
              }
              if (v === "mouseleave" || v === "mouseout") {
                let f = !1;
                return {
                  layer: a,
                  listener: d,
                  delegates: {
                    mousemove: (E) => {
                      (this.getLayer(a)
                        ? this.queryRenderedFeatures(E.point, { layers: [a] })
                        : []
                      ).length
                        ? (f = !0)
                        : f &&
                          ((f = !1),
                          d.call(this, new Dn(v, this, E.originalEvent)));
                    },
                    mouseout: (E) => {
                      f &&
                        ((f = !1),
                        d.call(this, new Dn(v, this, E.originalEvent)));
                    },
                  },
                };
              }
              {
                let f = (g) => {
                  let x = this.getLayer(a)
                    ? this.queryRenderedFeatures(g.point, { layers: [a] })
                    : [];
                  x.length &&
                    ((g.features = x), d.call(this, g), delete g.features);
                };
                return { layer: a, listener: d, delegates: { [v]: f } };
              }
            }
            on(v, a, d) {
              if (d === void 0) return super.on(v, a);
              let f = this._createDelegatedListener(v, a, d);
              (this._delegatedListeners = this._delegatedListeners || {}),
                (this._delegatedListeners[v] =
                  this._delegatedListeners[v] || []),
                this._delegatedListeners[v].push(f);
              for (let g in f.delegates) this.on(g, f.delegates[g]);
              return this;
            }
            once(v, a, d) {
              if (d === void 0) return super.once(v, a);
              let f = this._createDelegatedListener(v, a, d);
              for (let g in f.delegates) this.once(g, f.delegates[g]);
              return this;
            }
            off(v, a, d) {
              return d === void 0
                ? super.off(v, a)
                : (this._delegatedListeners &&
                    this._delegatedListeners[v] &&
                    ((f) => {
                      let g = this._delegatedListeners[v];
                      for (let x = 0; x < g.length; x++) {
                        let E = g[x];
                        if (E.layer === a && E.listener === d) {
                          for (let M in E.delegates)
                            this.off(M, E.delegates[M]);
                          return g.splice(x, 1), this;
                        }
                      }
                    })(),
                  this);
            }
            queryRenderedFeatures(v, a) {
              if (!this.style) return [];
              let d,
                f = v instanceof n.P || Array.isArray(v),
                g = f
                  ? v
                  : [
                      [0, 0],
                      [this.transform.width, this.transform.height],
                    ];
              if (
                ((a = a || (f ? {} : v) || {}),
                g instanceof n.P || typeof g[0] == "number")
              )
                d = [n.P.convert(g)];
              else {
                let x = n.P.convert(g[0]),
                  E = n.P.convert(g[1]);
                d = [x, new n.P(E.x, x.y), E, new n.P(x.x, E.y), x];
              }
              return this.style.queryRenderedFeatures(d, a, this.transform);
            }
            querySourceFeatures(v, a) {
              return this.style.querySourceFeatures(v, a);
            }
            setStyle(v, a) {
              return (a = n.e(
                {},
                {
                  localIdeographFontFamily: this._localIdeographFontFamily,
                  validate: this._validateStyle,
                },
                a
              )).diff !== !1 &&
                a.localIdeographFontFamily === this._localIdeographFontFamily &&
                this.style &&
                v
                ? (this._diffStyle(v, a), this)
                : ((this._localIdeographFontFamily =
                    a.localIdeographFontFamily),
                  this._updateStyle(v, a));
            }
            setTransformRequest(v) {
              return this._requestManager.setTransformRequest(v), this;
            }
            _getUIString(v) {
              let a = this._locale[v];
              if (a == null) throw new Error(`Missing UI string '${v}'`);
              return a;
            }
            _updateStyle(v, a) {
              if (a.transformStyle && this.style && !this.style._loaded)
                return void this.style.once("style.load", () =>
                  this._updateStyle(v, a)
                );
              let d =
                this.style && a.transformStyle
                  ? this.style.serialize()
                  : void 0;
              return (
                this.style &&
                  (this.style.setEventedParent(null), this.style._remove(!v)),
                v
                  ? ((this.style = new cs(this, a || {})),
                    this.style.setEventedParent(this, { style: this.style }),
                    typeof v == "string"
                      ? this.style.loadURL(v, a, d)
                      : this.style.loadJSON(v, a, d),
                    this)
                  : (delete this.style, this)
              );
            }
            _lazyInitEmptyStyle() {
              this.style ||
                ((this.style = new cs(this, {})),
                this.style.setEventedParent(this, { style: this.style }),
                this.style.loadEmpty());
            }
            _diffStyle(v, a) {
              if (typeof v == "string") {
                let d = this._requestManager.transformRequest(v, ce.Style);
                n.h(d, new AbortController())
                  .then((f) => {
                    this._updateDiff(f.data, a);
                  })
                  .catch((f) => {
                    f && this.fire(new n.j(f));
                  });
              } else typeof v == "object" && this._updateDiff(v, a);
            }
            _updateDiff(v, a) {
              try {
                this.style.setState(v, a) && this._update(!0);
              } catch (d) {
                n.w(
                  `Unable to perform style diff: ${
                    d.message || d.error || d
                  }.  Rebuilding the style from scratch.`
                ),
                  this._updateStyle(v, a);
              }
            }
            getStyle() {
              if (this.style) return this.style.serialize();
            }
            isStyleLoaded() {
              return this.style
                ? this.style.loaded()
                : n.w("There is no style added to the map.");
            }
            addSource(v, a) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.addSource(v, a),
                this._update(!0)
              );
            }
            isSourceLoaded(v) {
              let a = this.style && this.style.sourceCaches[v];
              if (a !== void 0) return a.loaded();
              this.fire(
                new n.j(new Error(`There is no source with ID '${v}'`))
              );
            }
            setTerrain(v) {
              if (
                (this.style._checkLoaded(),
                this._terrainDataCallback &&
                  this.style.off("data", this._terrainDataCallback),
                v)
              ) {
                let a = this.style.sourceCaches[v.source];
                if (!a)
                  throw new Error(
                    `cannot load terrain, because there exists no source with ID: ${v.source}`
                  );
                this.terrain === null && a.reload();
                for (let d in this.style._layers) {
                  let f = this.style._layers[d];
                  f.type === "hillshade" &&
                    f.source === v.source &&
                    n.w(
                      "You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."
                    );
                }
                (this.terrain = new _c(this.painter, a, v)),
                  (this.painter.renderToTexture = new ch(
                    this.painter,
                    this.terrain
                  )),
                  (this.transform.minElevationForCurrentTile =
                    this.terrain.getMinTileElevationForLngLatZoom(
                      this.transform.center,
                      this.transform.tileZoom
                    )),
                  (this.transform.elevation =
                    this.terrain.getElevationForLngLatZoom(
                      this.transform.center,
                      this.transform.tileZoom
                    )),
                  (this._terrainDataCallback = (d) => {
                    d.dataType === "style"
                      ? this.terrain.sourceCache.freeRtt()
                      : d.dataType === "source" &&
                        d.tile &&
                        (d.sourceId !== v.source ||
                          this._elevationFreeze ||
                          ((this.transform.minElevationForCurrentTile =
                            this.terrain.getMinTileElevationForLngLatZoom(
                              this.transform.center,
                              this.transform.tileZoom
                            )),
                          (this.transform.elevation =
                            this.terrain.getElevationForLngLatZoom(
                              this.transform.center,
                              this.transform.tileZoom
                            ))),
                        this.terrain.sourceCache.freeRtt(d.tile.tileID));
                  }),
                  this.style.on("data", this._terrainDataCallback);
              } else
                this.terrain && this.terrain.sourceCache.destruct(),
                  (this.terrain = null),
                  this.painter.renderToTexture &&
                    this.painter.renderToTexture.destruct(),
                  (this.painter.renderToTexture = null),
                  (this.transform.minElevationForCurrentTile = 0),
                  (this.transform.elevation = 0);
              return this.fire(new n.k("terrain", { terrain: v })), this;
            }
            getTerrain() {
              var v, a;
              return (a =
                (v = this.terrain) === null || v === void 0
                  ? void 0
                  : v.options) !== null && a !== void 0
                ? a
                : null;
            }
            areTilesLoaded() {
              let v = this.style && this.style.sourceCaches;
              for (let a in v) {
                let d = v[a]._tiles;
                for (let f in d) {
                  let g = d[f];
                  if (g.state !== "loaded" && g.state !== "errored") return !1;
                }
              }
              return !0;
            }
            removeSource(v) {
              return this.style.removeSource(v), this._update(!0);
            }
            getSource(v) {
              return this.style.getSource(v);
            }
            addImage(v, a, d = {}) {
              let {
                pixelRatio: f = 1,
                sdf: g = !1,
                stretchX: x,
                stretchY: E,
                content: M,
              } = d;
              if (
                (this._lazyInitEmptyStyle(),
                !(a instanceof HTMLImageElement || n.b(a)))
              ) {
                if (a.width === void 0 || a.height === void 0)
                  return this.fire(
                    new n.j(
                      new Error(
                        "Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"
                      )
                    )
                  );
                {
                  let { width: I, height: z, data: B } = a,
                    U = a;
                  return (
                    this.style.addImage(v, {
                      data: new n.R({ width: I, height: z }, new Uint8Array(B)),
                      pixelRatio: f,
                      stretchX: x,
                      stretchY: E,
                      content: M,
                      sdf: g,
                      version: 0,
                      userImage: U,
                    }),
                    U.onAdd && U.onAdd(this, v),
                    this
                  );
                }
              }
              {
                let { width: I, height: z, data: B } = b.getImageData(a);
                this.style.addImage(v, {
                  data: new n.R({ width: I, height: z }, B),
                  pixelRatio: f,
                  stretchX: x,
                  stretchY: E,
                  content: M,
                  sdf: g,
                  version: 0,
                });
              }
            }
            updateImage(v, a) {
              let d = this.style.getImage(v);
              if (!d)
                return this.fire(
                  new n.j(
                    new Error(
                      "The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead."
                    )
                  )
                );
              let f =
                  a instanceof HTMLImageElement || n.b(a)
                    ? b.getImageData(a)
                    : a,
                { width: g, height: x, data: E } = f;
              if (g === void 0 || x === void 0)
                return this.fire(
                  new n.j(
                    new Error(
                      "Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"
                    )
                  )
                );
              if (g !== d.data.width || x !== d.data.height)
                return this.fire(
                  new n.j(
                    new Error(
                      "The width and height of the updated image must be that same as the previous version of the image"
                    )
                  )
                );
              let M = !(a instanceof HTMLImageElement || n.b(a));
              return d.data.replace(E, M), this.style.updateImage(v, d), this;
            }
            getImage(v) {
              return this.style.getImage(v);
            }
            hasImage(v) {
              return v
                ? !!this.style.getImage(v)
                : (this.fire(new n.j(new Error("Missing required image id"))),
                  !1);
            }
            removeImage(v) {
              this.style.removeImage(v);
            }
            loadImage(v) {
              return te.getImage(
                this._requestManager.transformRequest(v, ce.Image),
                new AbortController()
              );
            }
            listImages() {
              return this.style.listImages();
            }
            addLayer(v, a) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.addLayer(v, a),
                this._update(!0)
              );
            }
            moveLayer(v, a) {
              return this.style.moveLayer(v, a), this._update(!0);
            }
            removeLayer(v) {
              return this.style.removeLayer(v), this._update(!0);
            }
            getLayer(v) {
              return this.style.getLayer(v);
            }
            getLayersOrder() {
              return this.style.getLayersOrder();
            }
            setLayerZoomRange(v, a, d) {
              return this.style.setLayerZoomRange(v, a, d), this._update(!0);
            }
            setFilter(v, a, d = {}) {
              return this.style.setFilter(v, a, d), this._update(!0);
            }
            getFilter(v) {
              return this.style.getFilter(v);
            }
            setPaintProperty(v, a, d, f = {}) {
              return this.style.setPaintProperty(v, a, d, f), this._update(!0);
            }
            getPaintProperty(v, a) {
              return this.style.getPaintProperty(v, a);
            }
            setLayoutProperty(v, a, d, f = {}) {
              return this.style.setLayoutProperty(v, a, d, f), this._update(!0);
            }
            getLayoutProperty(v, a) {
              return this.style.getLayoutProperty(v, a);
            }
            setGlyphs(v, a = {}) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.setGlyphs(v, a),
                this._update(!0)
              );
            }
            getGlyphs() {
              return this.style.getGlyphsUrl();
            }
            addSprite(v, a, d = {}) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.addSprite(v, a, d, (f) => {
                  f || this._update(!0);
                }),
                this
              );
            }
            removeSprite(v) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.removeSprite(v),
                this._update(!0)
              );
            }
            getSprite() {
              return this.style.getSprite();
            }
            setSprite(v, a = {}) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.setSprite(v, a, (d) => {
                  d || this._update(!0);
                }),
                this
              );
            }
            setLight(v, a = {}) {
              return (
                this._lazyInitEmptyStyle(),
                this.style.setLight(v, a),
                this._update(!0)
              );
            }
            getLight() {
              return this.style.getLight();
            }
            setFeatureState(v, a) {
              return this.style.setFeatureState(v, a), this._update();
            }
            removeFeatureState(v, a) {
              return this.style.removeFeatureState(v, a), this._update();
            }
            getFeatureState(v) {
              return this.style.getFeatureState(v);
            }
            getContainer() {
              return this._container;
            }
            getCanvasContainer() {
              return this._canvasContainer;
            }
            getCanvas() {
              return this._canvas;
            }
            _containerDimensions() {
              let v = 0,
                a = 0;
              return (
                this._container &&
                  ((v = this._container.clientWidth || 400),
                  (a = this._container.clientHeight || 300)),
                [v, a]
              );
            }
            _setupContainer() {
              let v = this._container;
              v.classList.add("maplibregl-map");
              let a = (this._canvasContainer = _.create(
                "div",
                "maplibregl-canvas-container",
                v
              ));
              this._interactive && a.classList.add("maplibregl-interactive"),
                (this._canvas = _.create("canvas", "maplibregl-canvas", a)),
                this._canvas.addEventListener(
                  "webglcontextlost",
                  this._contextLost,
                  !1
                ),
                this._canvas.addEventListener(
                  "webglcontextrestored",
                  this._contextRestored,
                  !1
                ),
                this._canvas.setAttribute("tabindex", "0"),
                this._canvas.setAttribute("aria-label", "Map"),
                this._canvas.setAttribute("role", "region");
              let d = this._containerDimensions(),
                f = this._getClampedPixelRatio(d[0], d[1]);
              this._resizeCanvas(d[0], d[1], f);
              let g = (this._controlContainer = _.create(
                  "div",
                  "maplibregl-control-container",
                  v
                )),
                x = (this._controlPositions = {});
              ["top-left", "top-right", "bottom-left", "bottom-right"].forEach(
                (E) => {
                  x[E] = _.create("div", `maplibregl-ctrl-${E} `, g);
                }
              ),
                this._container.addEventListener(
                  "scroll",
                  this._onMapScroll,
                  !1
                );
            }
            _resizeCanvas(v, a, d) {
              (this._canvas.width = Math.floor(d * v)),
                (this._canvas.height = Math.floor(d * a)),
                (this._canvas.style.width = `${v}px`),
                (this._canvas.style.height = `${a}px`);
            }
            _setupPainter() {
              let v = {
                  alpha: !0,
                  stencil: !0,
                  depth: !0,
                  failIfMajorPerformanceCaveat:
                    this._failIfMajorPerformanceCaveat,
                  preserveDrawingBuffer: this._preserveDrawingBuffer,
                  antialias: this._antialias || !1,
                },
                a = null;
              this._canvas.addEventListener(
                "webglcontextcreationerror",
                (f) => {
                  (a = { requestedAttributes: v }),
                    f &&
                      ((a.statusMessage = f.statusMessage), (a.type = f.type));
                },
                { once: !0 }
              );
              let d =
                this._canvas.getContext("webgl2", v) ||
                this._canvas.getContext("webgl", v);
              if (!d) {
                let f = "Failed to initialize WebGL";
                throw a
                  ? ((a.message = f), new Error(JSON.stringify(a)))
                  : new Error(f);
              }
              (this.painter = new Dl(d, this.transform)), S.testSupport(d);
            }
            loaded() {
              return (
                !this._styleDirty &&
                !this._sourcesDirty &&
                !!this.style &&
                this.style.loaded()
              );
            }
            _update(v) {
              return this.style && this.style._loaded
                ? ((this._styleDirty = this._styleDirty || v),
                  (this._sourcesDirty = !0),
                  this.triggerRepaint(),
                  this)
                : this;
            }
            _requestRenderFrame(v) {
              return this._update(), this._renderTaskQueue.add(v);
            }
            _cancelRenderFrame(v) {
              this._renderTaskQueue.remove(v);
            }
            _render(v) {
              let a = this._idleTriggered ? this._fadeDuration : 0;
              if (
                (this.painter.context.setDirty(),
                this.painter.setBaseState(),
                this._renderTaskQueue.run(v),
                this._removed)
              )
                return;
              let d = !1;
              if (this.style && this._styleDirty) {
                this._styleDirty = !1;
                let g = this.transform.zoom,
                  x = b.now();
                this.style.zoomHistory.update(g, x);
                let E = new n.a8(g, {
                    now: x,
                    fadeDuration: a,
                    zoomHistory: this.style.zoomHistory,
                    transition: this.style.getTransition(),
                  }),
                  M = E.crossFadingFactor();
                (M === 1 && M === this._crossFadingFactor) ||
                  ((d = !0), (this._crossFadingFactor = M)),
                  this.style.update(E);
              }
              this.style &&
                this._sourcesDirty &&
                ((this._sourcesDirty = !1),
                this.style._updateSources(this.transform)),
                this.terrain
                  ? (this.terrain.sourceCache.update(
                      this.transform,
                      this.terrain
                    ),
                    (this.transform.minElevationForCurrentTile =
                      this.terrain.getMinTileElevationForLngLatZoom(
                        this.transform.center,
                        this.transform.tileZoom
                      )),
                    this._elevationFreeze ||
                      (this.transform.elevation =
                        this.terrain.getElevationForLngLatZoom(
                          this.transform.center,
                          this.transform.tileZoom
                        )))
                  : ((this.transform.minElevationForCurrentTile = 0),
                    (this.transform.elevation = 0)),
                (this._placementDirty =
                  this.style &&
                  this.style._updatePlacement(
                    this.painter.transform,
                    this.showCollisionBoxes,
                    a,
                    this._crossSourceCollisions
                  )),
                this.painter.render(this.style, {
                  showTileBoundaries: this.showTileBoundaries,
                  showOverdrawInspector: this._showOverdrawInspector,
                  rotating: this.isRotating(),
                  zooming: this.isZooming(),
                  moving: this.isMoving(),
                  fadeDuration: a,
                  showPadding: this.showPadding,
                }),
                this.fire(new n.k("render")),
                this.loaded() &&
                  !this._loaded &&
                  ((this._loaded = !0),
                  n.bc.mark(n.bd.load),
                  this.fire(new n.k("load"))),
                this.style &&
                  (this.style.hasTransitions() || d) &&
                  (this._styleDirty = !0),
                this.style &&
                  !this._placementDirty &&
                  this.style._releaseSymbolFadeTiles();
              let f =
                this._sourcesDirty || this._styleDirty || this._placementDirty;
              return (
                f || this._repaint
                  ? this.triggerRepaint()
                  : !this.isMoving() &&
                    this.loaded() &&
                    this.fire(new n.k("idle")),
                !this._loaded ||
                  this._fullyLoaded ||
                  f ||
                  ((this._fullyLoaded = !0), n.bc.mark(n.bd.fullLoad)),
                this
              );
            }
            redraw() {
              return (
                this.style &&
                  (this._frameRequest &&
                    (this._frameRequest.abort(), (this._frameRequest = null)),
                  this._render(0)),
                this
              );
            }
            remove() {
              var v;
              this._hash && this._hash.remove();
              for (let d of this._controls) d.onRemove(this);
              (this._controls = []),
                this._frameRequest &&
                  (this._frameRequest.abort(), (this._frameRequest = null)),
                this._renderTaskQueue.clear(),
                this.painter.destroy(),
                this.handlers.destroy(),
                delete this.handlers,
                this.setStyle(null),
                typeof window < "u" &&
                  removeEventListener("online", this._onWindowOnline, !1),
                te.removeThrottleControl(this._imageQueueHandle),
                (v = this._resizeObserver) === null ||
                  v === void 0 ||
                  v.disconnect();
              let a =
                this.painter.context.gl.getExtension("WEBGL_lose_context");
              a && a.loseContext(),
                this._canvas.removeEventListener(
                  "webglcontextrestored",
                  this._contextRestored,
                  !1
                ),
                this._canvas.removeEventListener(
                  "webglcontextlost",
                  this._contextLost,
                  !1
                ),
                _.remove(this._canvasContainer),
                _.remove(this._controlContainer),
                this._container.classList.remove("maplibregl-map"),
                n.bc.clearMetrics(),
                (this._removed = !0),
                this.fire(new n.k("remove"));
            }
            triggerRepaint() {
              this.style &&
                !this._frameRequest &&
                ((this._frameRequest = new AbortController()),
                b
                  .frameAsync(this._frameRequest)
                  .then((v) => {
                    n.bc.frame(v), (this._frameRequest = null), this._render(v);
                  })
                  .catch(() => {}));
            }
            get showTileBoundaries() {
              return !!this._showTileBoundaries;
            }
            set showTileBoundaries(v) {
              this._showTileBoundaries !== v &&
                ((this._showTileBoundaries = v), this._update());
            }
            get showPadding() {
              return !!this._showPadding;
            }
            set showPadding(v) {
              this._showPadding !== v &&
                ((this._showPadding = v), this._update());
            }
            get showCollisionBoxes() {
              return !!this._showCollisionBoxes;
            }
            set showCollisionBoxes(v) {
              this._showCollisionBoxes !== v &&
                ((this._showCollisionBoxes = v),
                v ? this.style._generateCollisionBoxes() : this._update());
            }
            get showOverdrawInspector() {
              return !!this._showOverdrawInspector;
            }
            set showOverdrawInspector(v) {
              this._showOverdrawInspector !== v &&
                ((this._showOverdrawInspector = v), this._update());
            }
            get repaint() {
              return !!this._repaint;
            }
            set repaint(v) {
              this._repaint !== v &&
                ((this._repaint = v), this.triggerRepaint());
            }
            get vertices() {
              return !!this._vertices;
            }
            set vertices(v) {
              (this._vertices = v), this._update();
            }
            get version() {
              return xc;
            }
            getCameraTargetElevation() {
              return this.transform.elevation;
            }
          }),
          (o.MapMouseEvent = Dn),
          (o.MapTouchEvent = Fl),
          (o.MapWheelEvent = us),
          (o.Marker = Bl),
          (o.NavigationControl = class {
            constructor(v) {
              (this._updateZoomButtons = () => {
                let a = this._map.getZoom(),
                  d = a === this._map.getMaxZoom(),
                  f = a === this._map.getMinZoom();
                (this._zoomInButton.disabled = d),
                  (this._zoomOutButton.disabled = f),
                  this._zoomInButton.setAttribute(
                    "aria-disabled",
                    d.toString()
                  ),
                  this._zoomOutButton.setAttribute(
                    "aria-disabled",
                    f.toString()
                  );
              }),
                (this._rotateCompassArrow = () => {
                  let a = this.options.visualizePitch
                    ? `scale(${
                        1 /
                        Math.pow(
                          Math.cos(this._map.transform.pitch * (Math.PI / 180)),
                          0.5
                        )
                      }) rotateX(${this._map.transform.pitch}deg) rotateZ(${
                        this._map.transform.angle * (180 / Math.PI)
                      }deg)`
                    : `rotate(${
                        this._map.transform.angle * (180 / Math.PI)
                      }deg)`;
                  this._compassIcon.style.transform = a;
                }),
                (this._setButtonTitle = (a, d) => {
                  let f = this._map._getUIString(`NavigationControl.${d}`);
                  (a.title = f), a.setAttribute("aria-label", f);
                }),
                (this.options = n.e({}, hh, v)),
                (this._container = _.create(
                  "div",
                  "maplibregl-ctrl maplibregl-ctrl-group"
                )),
                this._container.addEventListener("contextmenu", (a) =>
                  a.preventDefault()
                ),
                this.options.showZoom &&
                  ((this._zoomInButton = this._createButton(
                    "maplibregl-ctrl-zoom-in",
                    (a) => this._map.zoomIn({}, { originalEvent: a })
                  )),
                  _.create(
                    "span",
                    "maplibregl-ctrl-icon",
                    this._zoomInButton
                  ).setAttribute("aria-hidden", "true"),
                  (this._zoomOutButton = this._createButton(
                    "maplibregl-ctrl-zoom-out",
                    (a) => this._map.zoomOut({}, { originalEvent: a })
                  )),
                  _.create(
                    "span",
                    "maplibregl-ctrl-icon",
                    this._zoomOutButton
                  ).setAttribute("aria-hidden", "true")),
                this.options.showCompass &&
                  ((this._compass = this._createButton(
                    "maplibregl-ctrl-compass",
                    (a) => {
                      this.options.visualizePitch
                        ? this._map.resetNorthPitch({}, { originalEvent: a })
                        : this._map.resetNorth({}, { originalEvent: a });
                    }
                  )),
                  (this._compassIcon = _.create(
                    "span",
                    "maplibregl-ctrl-icon",
                    this._compass
                  )),
                  this._compassIcon.setAttribute("aria-hidden", "true"));
            }
            onAdd(v) {
              return (
                (this._map = v),
                this.options.showZoom &&
                  (this._setButtonTitle(this._zoomInButton, "ZoomIn"),
                  this._setButtonTitle(this._zoomOutButton, "ZoomOut"),
                  this._map.on("zoom", this._updateZoomButtons),
                  this._updateZoomButtons()),
                this.options.showCompass &&
                  (this._setButtonTitle(this._compass, "ResetBearing"),
                  this.options.visualizePitch &&
                    this._map.on("pitch", this._rotateCompassArrow),
                  this._map.on("rotate", this._rotateCompassArrow),
                  this._rotateCompassArrow(),
                  (this._handler = new ph(
                    this._map,
                    this._compass,
                    this.options.visualizePitch
                  ))),
                this._container
              );
            }
            onRemove() {
              _.remove(this._container),
                this.options.showZoom &&
                  this._map.off("zoom", this._updateZoomButtons),
                this.options.showCompass &&
                  (this.options.visualizePitch &&
                    this._map.off("pitch", this._rotateCompassArrow),
                  this._map.off("rotate", this._rotateCompassArrow),
                  this._handler.off(),
                  delete this._handler),
                delete this._map;
            }
            _createButton(v, a) {
              let d = _.create("button", v, this._container);
              return (d.type = "button"), d.addEventListener("click", a), d;
            }
          }),
          (o.Popup = class extends n.E {
            constructor(v) {
              super(),
                (this.remove = () => (
                  this._content && _.remove(this._content),
                  this._container &&
                    (_.remove(this._container), delete this._container),
                  this._map &&
                    (this._map.off("move", this._update),
                    this._map.off("move", this._onClose),
                    this._map.off("click", this._onClose),
                    this._map.off("remove", this.remove),
                    this._map.off("mousemove", this._onMouseMove),
                    this._map.off("mouseup", this._onMouseUp),
                    this._map.off("drag", this._onDrag),
                    this._map._canvasContainer.classList.remove(
                      "maplibregl-track-pointer"
                    ),
                    delete this._map,
                    this.fire(new n.k("close"))),
                  this
                )),
                (this._onMouseUp = (a) => {
                  this._update(a.point);
                }),
                (this._onMouseMove = (a) => {
                  this._update(a.point);
                }),
                (this._onDrag = (a) => {
                  this._update(a.point);
                }),
                (this._update = (a) => {
                  var d;
                  if (
                    !this._map ||
                    (!this._lngLat && !this._trackPointer) ||
                    !this._content
                  )
                    return;
                  if (!this._container) {
                    if (
                      ((this._container = _.create(
                        "div",
                        "maplibregl-popup",
                        this._map.getContainer()
                      )),
                      (this._tip = _.create(
                        "div",
                        "maplibregl-popup-tip",
                        this._container
                      )),
                      this._container.appendChild(this._content),
                      this.options.className)
                    )
                      for (let M of this.options.className.split(" "))
                        this._container.classList.add(M);
                    this._trackPointer &&
                      this._container.classList.add(
                        "maplibregl-popup-track-pointer"
                      );
                  }
                  if (
                    (this.options.maxWidth &&
                      this._container.style.maxWidth !==
                        this.options.maxWidth &&
                      (this._container.style.maxWidth = this.options.maxWidth),
                    (this._lngLat =
                      this._map.transform.renderWorldCopies &&
                      !this._trackPointer
                        ? Du(this._lngLat, this._flatPos, this._map.transform)
                        : (d = this._lngLat) === null || d === void 0
                        ? void 0
                        : d.wrap()),
                    this._trackPointer && !a)
                  )
                    return;
                  let f =
                    (this._flatPos =
                    this._pos =
                      this._trackPointer && a
                        ? a
                        : this._map.project(this._lngLat));
                  this._map.terrain &&
                    (this._flatPos =
                      this._trackPointer && a
                        ? a
                        : this._map.transform.locationPoint(this._lngLat));
                  let g = this.options.anchor,
                    x = bh(this.options.offset);
                  if (!g) {
                    let M = this._container.offsetWidth,
                      I = this._container.offsetHeight,
                      z;
                    (z =
                      f.y + x.bottom.y < I
                        ? ["top"]
                        : f.y > this._map.transform.height - I
                        ? ["bottom"]
                        : []),
                      f.x < M / 2
                        ? z.push("left")
                        : f.x > this._map.transform.width - M / 2 &&
                          z.push("right"),
                      (g = z.length === 0 ? "bottom" : z.join("-"));
                  }
                  let E = f.add(x[g]);
                  this.options.subpixelPositioning || (E = E.round()),
                    _.setTransform(
                      this._container,
                      `${wc[g]} translate(${E.x}px,${E.y}px)`
                    ),
                    Lu(this._container, g, "popup");
                }),
                (this._onClose = () => {
                  this.remove();
                }),
                (this.options = n.e(Object.create(gh), v));
            }
            addTo(v) {
              return (
                this._map && this.remove(),
                (this._map = v),
                this.options.closeOnClick &&
                  this._map.on("click", this._onClose),
                this.options.closeOnMove && this._map.on("move", this._onClose),
                this._map.on("remove", this.remove),
                this._update(),
                this._focusFirstElement(),
                this._trackPointer
                  ? (this._map.on("mousemove", this._onMouseMove),
                    this._map.on("mouseup", this._onMouseUp),
                    this._container &&
                      this._container.classList.add(
                        "maplibregl-popup-track-pointer"
                      ),
                    this._map._canvasContainer.classList.add(
                      "maplibregl-track-pointer"
                    ))
                  : this._map.on("move", this._update),
                this.fire(new n.k("open")),
                this
              );
            }
            isOpen() {
              return !!this._map;
            }
            getLngLat() {
              return this._lngLat;
            }
            setLngLat(v) {
              return (
                (this._lngLat = n.M.convert(v)),
                (this._pos = null),
                (this._flatPos = null),
                (this._trackPointer = !1),
                this._update(),
                this._map &&
                  (this._map.on("move", this._update),
                  this._map.off("mousemove", this._onMouseMove),
                  this._container &&
                    this._container.classList.remove(
                      "maplibregl-popup-track-pointer"
                    ),
                  this._map._canvasContainer.classList.remove(
                    "maplibregl-track-pointer"
                  )),
                this
              );
            }
            trackPointer() {
              return (
                (this._trackPointer = !0),
                (this._pos = null),
                (this._flatPos = null),
                this._update(),
                this._map &&
                  (this._map.off("move", this._update),
                  this._map.on("mousemove", this._onMouseMove),
                  this._map.on("drag", this._onDrag),
                  this._container &&
                    this._container.classList.add(
                      "maplibregl-popup-track-pointer"
                    ),
                  this._map._canvasContainer.classList.add(
                    "maplibregl-track-pointer"
                  )),
                this
              );
            }
            getElement() {
              return this._container;
            }
            setText(v) {
              return this.setDOMContent(document.createTextNode(v));
            }
            setHTML(v) {
              let a = document.createDocumentFragment(),
                d = document.createElement("body"),
                f;
              for (d.innerHTML = v; (f = d.firstChild), f; ) a.appendChild(f);
              return this.setDOMContent(a);
            }
            getMaxWidth() {
              var v;
              return (v = this._container) === null || v === void 0
                ? void 0
                : v.style.maxWidth;
            }
            setMaxWidth(v) {
              return (this.options.maxWidth = v), this._update(), this;
            }
            setDOMContent(v) {
              if (this._content)
                for (; this._content.hasChildNodes(); )
                  this._content.firstChild &&
                    this._content.removeChild(this._content.firstChild);
              else
                this._content = _.create(
                  "div",
                  "maplibregl-popup-content",
                  this._container
                );
              return (
                this._content.appendChild(v),
                this._createCloseButton(),
                this._update(),
                this._focusFirstElement(),
                this
              );
            }
            addClassName(v) {
              this._container && this._container.classList.add(v);
            }
            removeClassName(v) {
              this._container && this._container.classList.remove(v);
            }
            setOffset(v) {
              return (this.options.offset = v), this._update(), this;
            }
            toggleClassName(v) {
              if (this._container) return this._container.classList.toggle(v);
            }
            setSubpixelPositioning(v) {
              this.options.subpixelPositioning = v;
            }
            _createCloseButton() {
              this.options.closeButton &&
                ((this._closeButton = _.create(
                  "button",
                  "maplibregl-popup-close-button",
                  this._content
                )),
                (this._closeButton.type = "button"),
                this._closeButton.setAttribute("aria-label", "Close popup"),
                (this._closeButton.innerHTML = "&#215;"),
                this._closeButton.addEventListener("click", this._onClose));
            }
            _focusFirstElement() {
              if (!this.options.focusAfterOpen || !this._container) return;
              let v = this._container.querySelector(yh);
              v && v.focus();
            }
          }),
          (o.RasterDEMTileSource = gi),
          (o.RasterTileSource = Si),
          (o.ScaleControl = class {
            constructor(v) {
              (this._onMove = () => {
                Fu(this._map, this._container, this.options);
              }),
                (this.setUnit = (a) => {
                  (this.options.unit = a),
                    Fu(this._map, this._container, this.options);
                }),
                (this.options = n.e({}, mh, v));
            }
            getDefaultPosition() {
              return "bottom-left";
            }
            onAdd(v) {
              return (
                (this._map = v),
                (this._container = _.create(
                  "div",
                  "maplibregl-ctrl maplibregl-ctrl-scale",
                  v.getContainer()
                )),
                this._map.on("move", this._onMove),
                this._onMove(),
                this._container
              );
            }
            onRemove() {
              _.remove(this._container),
                this._map.off("move", this._onMove),
                (this._map = void 0);
            }
          }),
          (o.ScrollZoomHandler = sh),
          (o.Style = cs),
          (o.TerrainControl = class {
            constructor(v) {
              (this._toggleTerrain = () => {
                this._map.getTerrain()
                  ? this._map.setTerrain(null)
                  : this._map.setTerrain(this.options),
                  this._updateTerrainIcon();
              }),
                (this._updateTerrainIcon = () => {
                  this._terrainButton.classList.remove(
                    "maplibregl-ctrl-terrain"
                  ),
                    this._terrainButton.classList.remove(
                      "maplibregl-ctrl-terrain-enabled"
                    ),
                    this._map.terrain
                      ? (this._terrainButton.classList.add(
                          "maplibregl-ctrl-terrain-enabled"
                        ),
                        (this._terrainButton.title = this._map._getUIString(
                          "TerrainControl.Disable"
                        )))
                      : (this._terrainButton.classList.add(
                          "maplibregl-ctrl-terrain"
                        ),
                        (this._terrainButton.title = this._map._getUIString(
                          "TerrainControl.Enable"
                        )));
                }),
                (this.options = v);
            }
            onAdd(v) {
              return (
                (this._map = v),
                (this._container = _.create(
                  "div",
                  "maplibregl-ctrl maplibregl-ctrl-group"
                )),
                (this._terrainButton = _.create(
                  "button",
                  "maplibregl-ctrl-terrain",
                  this._container
                )),
                _.create(
                  "span",
                  "maplibregl-ctrl-icon",
                  this._terrainButton
                ).setAttribute("aria-hidden", "true"),
                (this._terrainButton.type = "button"),
                this._terrainButton.addEventListener(
                  "click",
                  this._toggleTerrain
                ),
                this._updateTerrainIcon(),
                this._map.on("terrain", this._updateTerrainIcon),
                this._container
              );
            }
            onRemove() {
              _.remove(this._container),
                this._map.off("terrain", this._updateTerrainIcon),
                (this._map = void 0);
            }
          }),
          (o.TwoFingersTouchPitchHandler = Lf),
          (o.TwoFingersTouchRotateHandler = nh),
          (o.TwoFingersTouchZoomHandler = Tu),
          (o.TwoFingersTouchZoomRotateHandler = Kt),
          (o.VectorTileSource = je),
          (o.VideoSource = en),
          (o.addSourceType = (v, a) =>
            n._(void 0, void 0, void 0, function* () {
              if (Vn(v))
                throw new Error(`A source type called "${v}" already exists.`);
              ((d, f) => {
                yn[d] = f;
              })(v, a);
            })),
          (o.clearPrewarmedResources = function () {
            let v = Ce;
            v &&
              (v.isPreloaded() && v.numActive() === 1
                ? (v.release(Pi), (Ce = null))
                : console.warn(
                    "Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"
                  ));
          }),
          (o.getMaxParallelImageRequests = function () {
            return n.a.MAX_PARALLEL_IMAGE_REQUESTS;
          }),
          (o.getRTLTextPluginStatus = function () {
            return Pr().getRTLTextPluginStatus();
          }),
          (o.getVersion = function () {
            return Bf;
          }),
          (o.getWorkerCount = function () {
            return Zt.workerCount;
          }),
          (o.getWorkerUrl = function () {
            return n.a.WORKER_URL;
          }),
          (o.importScriptInWorkers = function (v) {
            return it().broadcast("importScript", v);
          }),
          (o.prewarm = function () {
            ei().acquire(Pi);
          }),
          (o.setMaxParallelImageRequests = function (v) {
            n.a.MAX_PARALLEL_IMAGE_REQUESTS = v;
          }),
          (o.setRTLTextPlugin = function (v, a) {
            return Pr().setRTLTextPlugin(v, a);
          }),
          (o.setWorkerCount = function (v) {
            Zt.workerCount = v;
          }),
          (o.setWorkerUrl = function (v) {
            n.a.WORKER_URL = v;
          });
      });
    var r = i;
    return r;
  });
});
var PS = (function () {
  let i = 0;
  return function () {
    return (++i).toString();
  };
})();
function DS(
  i,
  e = "blank",
  t = {
    icon: { type: "", content: "" },
    duration: "",
    closeable: !1,
    theme: { type: "light", style: { background: "", color: "", stroke: "" } },
  }
) {
  let r = PS(),
    o = LS(r, e, t),
    n = FS(e, t),
    u = zS(i);
  return (
    o.appendChild(n),
    o.appendChild(u),
    t.closeable && o.appendChild(NS(o)),
    document.querySelector("wc-toast").appendChild(o),
    { id: r, type: e, message: i, ...t }
  );
}
function LS(i, e, t) {
  let { duration: r, theme: o } = t,
    n = document.createElement("wc-toast-item"),
    h = (
      window?.matchMedia && window.matchMedia("(prefers-color-scheme: dark)")
    )?.matches
      ? "dark"
      : "light";
  if (
    (n.setAttribute("type", e),
    n.setAttribute("duration", r || ""),
    n.setAttribute("data-toast-item-id", i),
    n.setAttribute("theme", o?.type ? o.type : h),
    o?.type === "custom" && o?.style)
  ) {
    let { background: m, stroke: b, color: _ } = o.style;
    n.style.setProperty("--wc-toast-background", m),
      n.style.setProperty("--wc-toast-stroke", b),
      n.style.setProperty("--wc-toast-color", _);
  }
  return n;
}
function FS(i, e) {
  let { icon: t } = e,
    r = document.createElement("wc-toast-icon");
  return (
    r.setAttribute("type", t?.type ? t.type : i),
    r.setAttribute("icon", t?.content && t?.type === "custom" ? t.content : ""),
    t?.type === "svg" && (r.innerHTML = t?.content ? t.content : ""),
    r
  );
}
function zS(i) {
  let e = document.createElement("wc-toast-content");
  return e.setAttribute("message", i), e;
}
function NS(i) {
  let e = document.createElement("wc-toast-close-button");
  return (
    e.addEventListener("click", () => {
      i.classList.add("dismiss-with-close-button");
    }),
    e
  );
}
function c0(i) {
  return function (e, t) {
    return DS(e, i, t).id;
  };
}
function ta(i, e) {
  return c0("blank")(i, e);
}
ta.loading = c0("loading");
ta.success = c0("success");
ta.error = c0("error");
ta.dismiss = function (i) {
  let e = document.querySelectorAll("wc-toast-item");
  for (let t of e) {
    let r = t.getAttribute("data-toast-item-id");
    i === r && t.classList.add("dismiss");
  }
};
ta.promise = async function (
  i,
  e = { loading: "", success: "", error: "" },
  t
) {
  let r = ta.loading(e.loading, { ...t });
  try {
    let o = await i;
    return ta.dismiss(r), ta.success(e.success, { ...t }), o;
  } catch (o) {
    return ta.dismiss(r), ta.error(e.error, { ...t }), o;
  }
};
var Fn = ta;
var Uh = class i extends HTMLElement {
  constructor() {
    super(),
      this.attachShadow({ mode: "open" }),
      (this.template = document.createElement("template")),
      (this.template.innerHTML = i.template()),
      this.shadowRoot.append(this.template.content.cloneNode(!0));
  }
  connectedCallback() {
    this.setAttribute("role", "status"),
      this.setAttribute("aria-live", "polite"),
      (this.position = this.getAttribute("position") || "top-center"),
      this.arrangeToastPosition(this.position);
  }
  static get observedAttributes() {
    return ["position"];
  }
  attributeChangedCallback(e, t, r) {
    e === "position" &&
      ((this.position = r), this.arrangeToastPosition(this.position));
  }
  arrangeToastPosition(e) {
    let t = e.includes("top"),
      r = { top: t && 0, bottom: !t && 0 },
      o = e.includes("center")
        ? "center"
        : e.includes("right")
        ? "flex-end"
        : "flex-start",
      n = t ? 1 : -1,
      u = t ? "column-reverse" : "column",
      m = window
        .getComputedStyle(document.querySelector("html"))
        .getPropertyValue("scrollbar-gutter");
    this.style.setProperty("--wc-toast-factor", n),
      this.style.setProperty("--wc-toast-position", o),
      this.style.setProperty("--wc-toast-direction", u);
    let b = this.shadowRoot.querySelector(".wc-toast-container");
    (b.style.top = r.top),
      (b.style.bottom = r.bottom),
      (b.style.right = m.includes("stable") && "4px"),
      (b.style.justifyContent = o);
  }
  static template() {
    return `
    <style>
      :host {
        --wc-toast-factor: 1;
        --wc-toast-position: center;
        --wc-toast-direction: column-reverse;

        position: fixed;
        z-index: 9999;
        top: 16px;
        left: 16px;
        right: 16px;
        bottom: 16px;
        pointer-events: none;
      }

      .wc-toast-container {
        z-index: 9999;
        left: 0;
        right: 0;
        display: flex;
        position: absolute;
      }

      .wc-toast-wrapper {
        display: flex;
        flex-direction: var(--wc-toast-direction);
        justify-content: flex-end;
        gap: 16px;
        will-change: transform;
        transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1);
        pointer-events: none;
      }
    </style>
    <div class="wc-toast-container">
      <div class="wc-toast-wrapper" aria-live="polite">
        <slot> </slot>
      </div>
    </div>
    `;
  }
};
customElements.define("wc-toast", Uh);
var Vh = class i extends HTMLElement {
  constructor() {
    super(),
      (this.createdAt = new Date()),
      (this.EXIT_ANIMATION_DURATION = 350),
      this.attachShadow({ mode: "open" }),
      (this.template = document.createElement("template")),
      (this.template.innerHTML = i.template()),
      this.shadowRoot.append(this.template.content.cloneNode(!0));
  }
  connectedCallback() {
    (this.type = this.getAttribute("type") || "blank"),
      (this.theme = this.getAttribute("theme") || "light"),
      (this.duration =
        this.getAttribute("duration") || this.getDurationByType(this.type)),
      this.theme === "dark" &&
        (this.style.setProperty("--wc-toast-background", "#2a2a32"),
        this.style.setProperty("--wc-toast-stroke", "#f9f9fa"),
        this.style.setProperty("--wc-toast-color", "#f9f9fa"));
    let e = () => {
        setTimeout(() => {
          this.remove();
        }, this.EXIT_ANIMATION_DURATION),
          this.shadowRoot
            .querySelector(".wc-toast-bar")
            .classList.add("dismiss");
      },
      t = !1;
    this.addEventListener("mouseenter", () => {
      t = !0;
    }),
      this.addEventListener("mouseleave", () => {
        t = !1;
      });
    let r = setInterval(() => {
      if (this.duration <= 0) {
        clearInterval(r), e();
        return;
      }
      t || (this.duration -= 100);
    }, 100);
  }
  static get observedAttributes() {
    return ["class"];
  }
  attributeChangedCallback(e, t, r) {
    if (e === "class")
      switch (r) {
        case "dismiss-with-close-button":
          this.shadowRoot
            .querySelector(".wc-toast-bar")
            .classList.add("dismiss"),
            setTimeout(() => {
              this.remove();
            }, this.EXIT_ANIMATION_DURATION);
          break;
        case "dismiss":
        default:
          this.remove();
          break;
      }
  }
  getDurationByType(e) {
    switch (e) {
      case "success":
        return 2e3;
      case "loading":
        return 1e5 * 60;
      case "error":
      case "blank":
      case "custom":
      default:
        return 3500;
    }
  }
  static template() {
    return `
    <style>
      /*
       * Author: Timo Lins
       * License: MIT
       * Source: https://github.com/timolins/react-hot-toast/blob/main/src/components/toast-bar.tsx
       */

      :host {
        --wc-toast-background: #fff;
        --wc-toast-max-width: 350px;
        --wc-toast-stroke: #2a2a32;
        --wc-toast-color: #000;
        --wc-toast-font-family: 'Roboto', 'Amiri', sans-serif;
        --wc-toast-font-size: 16px;
        --wc-toast-border-radius: 8px;
        --wc-toast-content-margin: 4px 10px;

        display: flex;
        justify-content: var(--wc-toast-position);
        transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1);
      }

      :host > * {
        pointer-events: auto;
      }

      @media (prefers-color-scheme: dark) {
        :host {
          --wc-toast-background: #2a2a32;
          --wc-toast-stroke: #f9f9fa;
          --wc-toast-color: #f9f9fa;
        }

        :host([theme=light]) {
          --wc-toast-background: #fff;
          --wc-toast-stroke: #2a2a32;
          --wc-toast-color: #000;
        }
      }

      @keyframes enter-animation {
        0% {
          transform: translate3d(0, calc(var(--wc-toast-factor) * -200%), 0) scale(0.6);
          opacity: 0.5;
        }
        100% {
          transform: translate3d(0, 0, 0) scale(1);
          opacity: 1;
        }
      }

      @keyframes exit-animation {
        0% {
          transform: translate3d(0, 0, -1px) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate3d(0, calc(var(--wc-toast-factor) * -150%), -1px) scale(0.6);
          opacity: 0;
        }
      }

      @keyframes fade-in {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      .wc-toast-bar {
        display: flex;
        align-items: center;
        background: var(--wc-toast-background, #fff);
        line-height: 1.3;
        will-change: transform;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
        animation: enter-animation 0.3s cubic-bezier(0.21, 1.02, 0.73, 1) forwards;
        max-width: var(--wc-toast-max-width);
        pointer-events: auto;
        padding: 8px 10px;
        border-radius: var(--wc-toast-border-radius);
      }

      .wc-toast-bar.dismiss {
        animation: exit-animation 0.3s forwards cubic-bezier(0.06, 0.71, 0.55, 1);
      }

      @media (prefers-reduced-motion: reduce) {
        .wc-toast-bar {
          animation-name: fade-in;
        }

        .wc-toast-bar.dismiss {
          animation-name: fade-out;
        }
      }
    </style>
    <div class="wc-toast-bar">
      <slot></slot>
    </div>
    `;
  }
};
customElements.define("wc-toast-item", Vh);
var jh = class i extends HTMLElement {
  constructor() {
    super(),
      this.attachShadow({ mode: "open" }),
      (this.template = document.createElement("template")),
      (this.template.innerHTML = i.template()),
      this.shadowRoot.append(this.template.content.cloneNode(!0));
  }
  connectedCallback() {
    (this.icon = this.getAttribute("icon")),
      (this.type = this.getAttribute("type") || "blank"),
      this.setAttribute("aria-hidden", "true"),
      this.type !== "svg" &&
        ((this.icon =
          this.icon != null
            ? this.createIcon(this.type, this.icon)
            : this.createIcon(this.type)),
        this.shadowRoot.appendChild(this.icon));
  }
  createIcon(e = "blank", t = "") {
    switch (e) {
      case "success":
        let r = document.createElement("div");
        return r.classList.add("checkmark-icon"), r;
      case "error":
        let o = document.createElement("div");
        return (
          o.classList.add("error-icon"),
          (o.innerHTML =
            '<svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>'),
          o
        );
      case "loading":
        let n = document.createElement("div");
        return n.classList.add("loading-icon"), n;
      case "custom":
        let u = document.createElement("div");
        return u.classList.add("custom-icon"), (u.innerHTML = t), u;
      case "blank":
      default:
        return document.createElement("div");
    }
  }
  static template() {
    return `
    <style>
      /*
      * Author: Timo Lins
      * License: MIT
      * Source: 
      * - https://github.com/timolins/react-hot-toast/blob/main/src/components/checkmark.tsx
      * - https://github.com/timolins/react-hot-toast/blob/main/src/components/error.tsx
      * - https://github.com/timolins/react-hot-toast/blob/main/src/components/loader.tsx
      */

      :host {
        display: flex;
        align-self: flex-start;
        margin-block: 4px !important;
      }

      @keyframes circle-animation {
        from {
          transform: scale(0) rotate(45deg);
          opacity: 0;
        }
        to {
          transform: scale(1) rotate(45deg);
          opacity: 1;
        }
      }

      .checkmark-icon {
        width: 20px;
        opacity: 0;
        height: 20px;
        border-radius: 10px;
        background: #61d345;
        position: relative;
        transform: rotate(45deg);
        animation: circle-animation 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        animation-delay: 100ms;
      }

      @keyframes checkmark-animation {
        0% {
          height: 0;
          width: 0;
          opacity: 0;
        }
        40% {
          height: 0;
          width: 6px;
          opacity: 1;
        }
        100% {
          opacity: 1;
          height: 10px;
        }
      }

      .checkmark-icon::after {
        content: '';
        box-sizing: border-box;
        animation: checkmark-animation 0.2s ease-out forwards;
        opacity: 0;
        animation-delay: 200ms;
        position: absolute;
        border-right: 2px solid;
        border-bottom: 2px solid;
        border-color: #fff;
        bottom: 6px;
        left: 6px;
        height: 10px;
        width: 6px;
      }

      @keyframes slide-in {
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .error-icon {
        width: 20px;
        height: 20px;
        border-radius: 10px;
        background: #ff4b4b;
        display: flex;
        justify-content: center;
        align-items: center;
        animation: slide-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      }

      .error-icon svg{
        width: 16px;
        height: 20px;
        stroke: #fff;
        animation: slide-in .2s ease-out;
        animation-delay: 100ms;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .loading-icon {
        height: 20px;
        width: 20px;
        position: relative;
        border-radius: 10px;
        background-color: white;
      }

      .loading-icon::after {
        content: '';
        position: absolute;
        bottom: 4px;
        left: 4px;
        width: 12px;
        height: 12px;
        box-sizing: border-box;
        border: 2px solid;
        border-radius: 100%;
        border-color: #e0e0e0;
        border-right-color: #616161;
        animation: rotate 1s linear infinite;
      }

      @media (prefers-color-scheme: dark) {
        ::slotted(svg) {
          stroke: var(--wc-toast-stroke, #fff);
        }
      }
    </style>
    <slot name="svg"></slot>
    `;
  }
};
customElements.define("wc-toast-icon", jh);
var Hh = class i extends HTMLElement {
  constructor() {
    super(),
      this.attachShadow({ mode: "open" }),
      (this.template = document.createElement("template")),
      (this.template.innerHTML = i.template()),
      this.shadowRoot.append(this.template.content.cloneNode(!0));
  }
  connectedCallback() {
    (this.message = this.getAttribute("message")),
      (this.shadowRoot.querySelector('slot[name="content"]').innerHTML =
        this.message);
  }
  static template() {
    return `
    <style>
      :host {
        display: flex;
        justify-content: center;
        flex: 1 1 auto;
        margin: var(--wc-toast-content-margin) !important;
        color: var(--wc-toast-color, #000);
        font-family: var(--wc-toast-font-family);
        font-size: var(--wc-toast-font-size);
      }
    </style>
    <slot name="content"></slot>
    `;
  }
};
customElements.define("wc-toast-content", Hh);
var qh = class i extends HTMLElement {
  constructor() {
    super(),
      this.attachShadow({ mode: "open" }),
      (this.template = document.createElement("template")),
      (this.template.innerHTML = i.template()),
      this.shadowRoot.append(this.template.content.cloneNode(!0));
  }
  static template() {
    return `
    <style>
      :host {
        width: 20px;
        opacity: 1;
        height: 20px;
        border-radius: 2px;
        border: 1px solid #dadce0;
        background: var(--wc-toast-background);
        position: relative;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-left: 5px;
      }

      svg {
        stroke: var(--wc-toast-stroke, #2a2a32);
      }
    </style>
    <svg
      focusable="false"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M6 18L18 6M6 6l12 12"
      />
    </svg>
    `;
  }
};
customElements.define("wc-toast-close-button", qh);
function yt() {}
var Qu = (i) => i;
function Rr(i, e) {
  for (let t in e) i[t] = e[t];
  return i;
}
function tg(i) {
  return i();
}
function d0() {
  return Object.create(null);
}
function gr(i) {
  i.forEach(tg);
}
function zo(i) {
  return typeof i == "function";
}
function ut(i, e) {
  return i != i
    ? e == e
    : i !== e || (i && typeof i == "object") || typeof i == "function";
}
var u0;
function ig(i, e) {
  return i === e
    ? !0
    : (u0 || (u0 = document.createElement("a")), (u0.href = e), i === u0.href);
}
function q3(i) {
  return Object.keys(i).length === 0;
}
function $h(i, ...e) {
  if (i == null) {
    for (let r of e) r(void 0);
    return yt;
  }
  let t = i.subscribe(...e);
  return t.unsubscribe ? () => t.unsubscribe() : t;
}
function rg(i) {
  let e;
  return $h(i, (t) => (e = t))(), e;
}
function Di(i, e, t) {
  i.$$.on_destroy.push($h(e, t));
}
function bi(i, e, t, r) {
  if (i) {
    let o = $3(i, e, t, r);
    return i[0](o);
  }
}
function $3(i, e, t, r) {
  return i[1] && r ? Rr(t.ctx.slice(), i[1](r(e))) : t.ctx;
}
function vi(i, e, t, r) {
  if (i[2] && r) {
    let o = i[2](r(t));
    if (e.dirty === void 0) return o;
    if (typeof o == "object") {
      let n = [],
        u = Math.max(e.dirty.length, o.length);
      for (let h = 0; h < u; h += 1) n[h] = e.dirty[h] | o[h];
      return n;
    }
    return e.dirty | o;
  }
  return e.dirty;
}
function _i(i, e, t, r, o, n) {
  if (o) {
    let u = $3(e, t, r, n);
    i.p(u, o);
  }
}
function xi(i) {
  if (i.ctx.length > 32) {
    let e = [],
      t = i.ctx.length / 32;
    for (let r = 0; r < t; r++) e[r] = -1;
    return e;
  }
  return -1;
}
function zn(i) {
  let e = {};
  for (let t in i) t[0] !== "$" && (e[t] = i[t]);
  return e;
}
function Wa(i) {
  return i ?? "";
}
function Cn(i, e, t) {
  return i.set(t), e;
}
function Qh(i) {
  return i && zo(i.destroy) ? i.destroy : yt;
}
var Q3 = typeof window < "u",
  Mc = Q3 ? () => window.performance.now() : () => Date.now(),
  Gh = Q3 ? (i) => requestAnimationFrame(i) : yt;
var Gu = new Set();
function G3(i) {
  Gu.forEach((e) => {
    e.c(i) || (Gu.delete(e), e.f());
  }),
    Gu.size !== 0 && Gh(G3);
}
function Wu(i) {
  let e;
  return (
    Gu.size === 0 && Gh(G3),
    {
      promise: new Promise((t) => {
        Gu.add((e = { c: i, f: t }));
      }),
      abort() {
        Gu.delete(e);
      },
    }
  );
}
var Ac =
  typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : global;
var h0 = class i {
  _listeners = "WeakMap" in Ac ? new WeakMap() : void 0;
  _observer = void 0;
  options;
  constructor(e) {
    this.options = e;
  }
  observe(e, t) {
    return (
      this._listeners.set(e, t),
      this._getObserver().observe(e, this.options),
      () => {
        this._listeners.delete(e), this._observer.unobserve(e);
      }
    );
  }
  _getObserver() {
    return (
      this._observer ??
      (this._observer = new ResizeObserver((e) => {
        for (let t of e)
          i.entries.set(t.target, t), this._listeners.get(t.target)?.(t);
      }))
    );
  }
};
h0.entries = "WeakMap" in Ac ? new WeakMap() : void 0;
var W3 = !1;
function Z3() {
  W3 = !0;
}
function K3() {
  W3 = !1;
}
function He(i, e) {
  i.appendChild(e);
}
function ng(i) {
  if (!i) return document;
  let e = i.getRootNode ? i.getRootNode() : i.ownerDocument;
  return e && e.host ? e : i.ownerDocument;
}
function J3(i) {
  let e = Je("style");
  return (e.textContent = "/* empty */"), BS(ng(i), e), e.sheet;
}
function BS(i, e) {
  return He(i.head || i, e), e.sheet;
}
function Ne(i, e, t) {
  i.insertBefore(e, t || null);
}
function ze(i) {
  i.parentNode && i.parentNode.removeChild(i);
}
function Gl(i, e) {
  for (let t = 0; t < i.length; t += 1) i[t] && i[t].d(e);
}
function Je(i) {
  return document.createElement(i);
}
function mi(i) {
  return document.createElementNS("http://www.w3.org/2000/svg", i);
}
function Xi(i) {
  return document.createTextNode(i);
}
function Ot() {
  return Xi(" ");
}
function Ji() {
  return Xi("");
}
function Mt(i, e, t, r) {
  return i.addEventListener(e, t, r), () => i.removeEventListener(e, t, r);
}
function Zh(i) {
  return function (e) {
    return e.preventDefault(), i.call(this, e);
  };
}
function Fs(i) {
  return function (e) {
    return e.stopPropagation(), i.call(this, e);
  };
}
function X3(i) {
  return function (e) {
    e.target === this && i.call(this, e);
  };
}
function J(i, e, t) {
  t == null
    ? i.removeAttribute(e)
    : i.getAttribute(e) !== t && i.setAttribute(e, t);
}
function va(i, e) {
  for (let t in e) J(i, t, e[t]);
}
function Ic(i, e, t) {
  let r = e.toLowerCase();
  r in i
    ? (i[r] = typeof i[r] == "boolean" && t === "" ? !0 : t)
    : e in i
    ? (i[e] = typeof i[e] == "boolean" && t === "" ? !0 : t)
    : J(i, e, t);
}
function Y3(i) {
  return i === "" ? null : +i;
}
function e5(i) {
  return Array.from(i.childNodes);
}
function fn(i, e) {
  (e = "" + e), i.data !== e && (i.data = e);
}
function zs(i, e) {
  i.value = e ?? "";
}
function Nn(i, e, t, r) {
  t == null
    ? i.style.removeProperty(e)
    : i.style.setProperty(e, t, r ? "important" : "");
}
function og(i, e, t) {
  for (let r = 0; r < i.options.length; r += 1) {
    let o = i.options[r];
    if (o.__value === e) {
      o.selected = !0;
      return;
    }
  }
  (!t || e !== void 0) && (i.selectedIndex = -1);
}
function t5(i) {
  let e = i.querySelector(":checked");
  return e && e.__value;
}
function or(i, e, t) {
  i.classList.toggle(e, !!t);
}
function p0(i, e, { bubbles: t = !1, cancelable: r = !1 } = {}) {
  return new CustomEvent(i, { detail: e, bubbles: t, cancelable: r });
}
var Wh = class {
  is_svg = !1;
  e = void 0;
  n = void 0;
  t = void 0;
  a = void 0;
  constructor(e = !1) {
    (this.is_svg = e), (this.e = this.n = null);
  }
  c(e) {
    this.h(e);
  }
  m(e, t, r = null) {
    this.e ||
      (this.is_svg
        ? (this.e = mi(t.nodeName))
        : (this.e = Je(t.nodeType === 11 ? "TEMPLATE" : t.nodeName)),
      (this.t = t.tagName !== "TEMPLATE" ? t : t.content),
      this.c(e)),
      this.i(r);
  }
  h(e) {
    (this.e.innerHTML = e),
      (this.n = Array.from(
        this.e.nodeName === "TEMPLATE"
          ? this.e.content.childNodes
          : this.e.childNodes
      ));
  }
  i(e) {
    for (let t = 0; t < this.n.length; t += 1) Ne(this.t, this.n[t], e);
  }
  p(e) {
    this.d(), this.h(e), this.i(this.a);
  }
  d() {
    this.n.forEach(ze);
  }
};
function i5(i) {
  let e = {};
  return (
    i.childNodes.forEach((t) => {
      e[t.slot || "default"] = !0;
    }),
    e
  );
}
var f0 = new Map(),
  m0 = 0;
function RS(i) {
  let e = 5381,
    t = i.length;
  for (; t--; ) e = ((e << 5) - e) ^ i.charCodeAt(t);
  return e >>> 0;
}
function US(i, e) {
  let t = { stylesheet: J3(e), rules: {} };
  return f0.set(i, t), t;
}
function sg(i, e, t, r, o, n, u, h = 0) {
  let m = 16.666 / r,
    b = `{
`;
  for (let Q = 0; Q <= 1; Q += m) {
    let te = e + (t - e) * n(Q);
    b +=
      Q * 100 +
      `%{${u(te, 1 - te)}}
`;
  }
  let _ =
      b +
      `100% {${u(t, 1 - t)}}
}`,
    S = `__svelte_${RS(_)}_${h}`,
    T = ng(i),
    { stylesheet: D, rules: F } = f0.get(T) || US(T, i);
  F[S] ||
    ((F[S] = !0), D.insertRule(`@keyframes ${S} ${_}`, D.cssRules.length));
  let q = i.style.animation || "";
  return (
    (i.style.animation = `${
      q ? `${q}, ` : ""
    }${S} ${r}ms linear ${o}ms 1 both`),
    (m0 += 1),
    S
  );
}
function ag(i, e) {
  let t = (i.style.animation || "").split(", "),
    r = t.filter(
      e ? (n) => n.indexOf(e) < 0 : (n) => n.indexOf("__svelte") === -1
    ),
    o = t.length - r.length;
  o && ((i.style.animation = r.join(", ")), (m0 -= o), m0 || VS());
}
function VS() {
  Gh(() => {
    m0 ||
      (f0.forEach((i) => {
        let { ownerNode: e } = i.stylesheet;
        e && ze(e);
      }),
      f0.clear());
  });
}
function r5(i, e, t, r) {
  if (!e) return yt;
  let o = i.getBoundingClientRect();
  if (
    e.left === o.left &&
    e.right === o.right &&
    e.top === o.top &&
    e.bottom === o.bottom
  )
    return yt;
  let {
      delay: n = 0,
      duration: u = 300,
      easing: h = Qu,
      start: m = Mc() + n,
      end: b = m + u,
      tick: _ = yt,
      css: S,
    } = t(i, { from: e, to: o }, r),
    T = !0,
    D = !1,
    F;
  function q() {
    S && (F = sg(i, 0, 1, u, n, h, S)), n || (D = !0);
  }
  function Q() {
    S && ag(i, F), (T = !1);
  }
  return (
    Wu((te) => {
      if ((!D && te >= m && (D = !0), D && te >= b && (_(1, 0), Q()), !T))
        return !1;
      if (D) {
        let ce = te - m,
          be = 0 + 1 * h(ce / u);
        _(be, 1 - be);
      }
      return !0;
    }),
    q(),
    _(0, 1),
    Q
  );
}
function n5(i) {
  let e = getComputedStyle(i);
  if (e.position !== "absolute" && e.position !== "fixed") {
    let { width: t, height: r } = e,
      o = i.getBoundingClientRect();
    (i.style.position = "absolute"),
      (i.style.width = t),
      (i.style.height = r),
      jS(i, o);
  }
}
function jS(i, e) {
  let t = i.getBoundingClientRect();
  if (e.left !== t.left || e.top !== t.top) {
    let r = getComputedStyle(i),
      o = r.transform === "none" ? "" : r.transform;
    i.style.transform = `${o} translate(${e.left - t.left}px, ${
      e.top - t.top
    }px)`;
  }
}
var Wl;
function Za(i) {
  Wl = i;
}
function Zl() {
  if (!Wl) throw new Error("Function called outside component initialization");
  return Wl;
}
function lg(i) {
  Zl().$$.before_update.push(i);
}
function Ur(i) {
  Zl().$$.on_mount.push(i);
}
function Ka(i) {
  Zl().$$.after_update.push(i);
}
function dr(i) {
  Zl().$$.on_destroy.push(i);
}
function yo() {
  let i = Zl();
  return (e, t, { cancelable: r = !1 } = {}) => {
    let o = i.$$.callbacks[e];
    if (o) {
      let n = p0(e, t, { cancelable: r });
      return (
        o.slice().forEach((u) => {
          u.call(i, n);
        }),
        !n.defaultPrevented
      );
    }
    return !0;
  };
}
function g0(i, e) {
  return Zl().$$.context.set(i, e), e;
}
function y0(i) {
  return Zl().$$.context.get(i);
}
function Vi(i, e) {
  let t = i.$$.callbacks[e.type];
  t && t.slice().forEach((r) => r.call(this, e));
}
var Pc = [];
var Bi = [],
  Ku = [],
  ug = [],
  o5 = Promise.resolve(),
  dg = !1;
function hg() {
  dg || ((dg = !0), o5.then(b0));
}
function Ns() {
  return hg(), o5;
}
function _a(i) {
  Ku.push(i);
}
function Qr(i) {
  ug.push(i);
}
var cg = new Set(),
  Zu = 0;
function b0() {
  if (Zu !== 0) return;
  let i = Wl;
  do {
    try {
      for (; Zu < Pc.length; ) {
        let e = Pc[Zu];
        Zu++, Za(e), HS(e.$$);
      }
    } catch (e) {
      throw ((Pc.length = 0), (Zu = 0), e);
    }
    for (Za(null), Pc.length = 0, Zu = 0; Bi.length; ) Bi.pop()();
    for (let e = 0; e < Ku.length; e += 1) {
      let t = Ku[e];
      cg.has(t) || (cg.add(t), t());
    }
    Ku.length = 0;
  } while (Pc.length);
  for (; ug.length; ) ug.pop()();
  (dg = !1), cg.clear(), Za(i);
}
function HS(i) {
  if (i.fragment !== null) {
    i.update(), gr(i.before_update);
    let e = i.dirty;
    (i.dirty = [-1]),
      i.fragment && i.fragment.p(i.ctx, e),
      i.after_update.forEach(_a);
  }
}
function s5(i) {
  let e = [],
    t = [];
  Ku.forEach((r) => (i.indexOf(r) === -1 ? e.push(r) : t.push(r))),
    t.forEach((r) => r()),
    (Ku = e);
}
var v0 = new Set(),
  Dc;
function Yi() {
  Dc = { r: 0, c: [], p: Dc };
}
function er() {
  Dc.r || gr(Dc.c), (Dc = Dc.p);
}
function Oe(i, e) {
  i && i.i && (v0.delete(i), i.i(e));
}
function $e(i, e, t, r) {
  if (i && i.o) {
    if (v0.has(i)) return;
    v0.add(i),
      Dc.c.push(() => {
        v0.delete(i), r && (t && i.d(1), r());
      }),
      i.o(e);
  } else r && r();
}
function On(i) {
  return i?.length !== void 0 ? i : Array.from(i);
}
function a5(i, e) {
  i.d(1), e.delete(i.key);
}
function l5(i, e) {
  $e(i, 1, 1, () => {
    e.delete(i.key);
  });
}
function c5(i, e) {
  i.f(), l5(i, e);
}
function Kh(i, e, t, r, o, n, u, h, m, b, _, S) {
  let T = i.length,
    D = n.length,
    F = T,
    q = {};
  for (; F--; ) q[i[F].key] = F;
  let Q = [],
    te = new Map(),
    ce = new Map(),
    be = [];
  for (F = D; F--; ) {
    let fe = S(o, n, F),
      Le = t(fe),
      De = u.get(Le);
    De ? r && be.push(() => De.p(fe, e)) : ((De = b(Le, fe)), De.c()),
      te.set(Le, (Q[F] = De)),
      Le in q && ce.set(Le, Math.abs(F - q[Le]));
  }
  let Y = new Set(),
    Ie = new Set();
  function Te(fe) {
    Oe(fe, 1), fe.m(h, _), u.set(fe.key, fe), (_ = fe.first), D--;
  }
  for (; T && D; ) {
    let fe = Q[D - 1],
      Le = i[T - 1],
      De = fe.key,
      st = Le.key;
    fe === Le
      ? ((_ = fe.first), T--, D--)
      : te.has(st)
      ? !u.has(De) || Y.has(De)
        ? Te(fe)
        : Ie.has(st)
        ? T--
        : ce.get(De) > ce.get(st)
        ? (Ie.add(De), Te(fe))
        : (Y.add(st), T--)
      : (m(Le, u), T--);
  }
  for (; T--; ) {
    let fe = i[T];
    te.has(fe.key) || m(fe, u);
  }
  for (; D; ) Te(Q[D - 1]);
  return gr(be), Q;
}
function xa(i, e) {
  let t = {},
    r = {},
    o = { $$scope: 1 },
    n = i.length;
  for (; n--; ) {
    let u = i[n],
      h = e[n];
    if (h) {
      for (let m in u) m in h || (r[m] = 1);
      for (let m in h) o[m] || ((t[m] = h[m]), (o[m] = 1));
      i[n] = h;
    } else for (let m in u) o[m] = 1;
  }
  for (let u in r) u in t || (t[u] = void 0);
  return t;
}
var qS = [
    "allowfullscreen",
    "allowpaymentrequest",
    "async",
    "autofocus",
    "autoplay",
    "checked",
    "controls",
    "default",
    "defer",
    "disabled",
    "formnovalidate",
    "hidden",
    "inert",
    "ismap",
    "loop",
    "multiple",
    "muted",
    "nomodule",
    "novalidate",
    "open",
    "playsinline",
    "readonly",
    "required",
    "reversed",
    "selected",
  ],
  $S = new Set([...qS]);
function Gr(i, e, t) {
  let r = i.$$.props[e];
  r !== void 0 && ((i.$$.bound[r] = t), t(i.$$.ctx[r]));
}
function Yt(i) {
  i && i.c();
}
function Jt(i, e, t) {
  let { fragment: r, after_update: o } = i.$$;
  r && r.m(e, t),
    _a(() => {
      let n = i.$$.on_mount.map(tg).filter(zo);
      i.$$.on_destroy ? i.$$.on_destroy.push(...n) : gr(n),
        (i.$$.on_mount = []);
    }),
    o.forEach(_a);
}
function Xt(i, e) {
  let t = i.$$;
  t.fragment !== null &&
    (s5(t.after_update),
    gr(t.on_destroy),
    t.fragment && t.fragment.d(e),
    (t.on_destroy = t.fragment = null),
    (t.ctx = []));
}
function GS(i, e) {
  i.$$.dirty[0] === -1 && (Pc.push(i), hg(), i.$$.dirty.fill(0)),
    (i.$$.dirty[(e / 31) | 0] |= 1 << e % 31);
}
function gt(i, e, t, r, o, n, u = null, h = [-1]) {
  let m = Wl;
  Za(i);
  let b = (i.$$ = {
    fragment: null,
    ctx: [],
    props: n,
    update: yt,
    not_equal: o,
    bound: d0(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(e.context || (m ? m.$$.context : [])),
    callbacks: d0(),
    dirty: h,
    skip_bound: !1,
    root: e.target || m.$$.root,
  });
  u && u(b.root);
  let _ = !1;
  if (
    ((b.ctx = t
      ? t(i, e.props || {}, (S, T, ...D) => {
          let F = D.length ? D[0] : T;
          return (
            b.ctx &&
              o(b.ctx[S], (b.ctx[S] = F)) &&
              (!b.skip_bound && b.bound[S] && b.bound[S](F), _ && GS(i, S)),
            T
          );
        })
      : []),
    b.update(),
    (_ = !0),
    gr(b.before_update),
    (b.fragment = r ? r(b.ctx) : !1),
    e.target)
  ) {
    if (e.hydrate) {
      Z3();
      let S = e5(e.target);
      b.fragment && b.fragment.l(S), S.forEach(ze);
    } else b.fragment && b.fragment.c();
    e.intro && Oe(i.$$.fragment), Jt(i, e.target, e.anchor), K3(), b0();
  }
  Za(m);
}
var WS;
typeof HTMLElement == "function" &&
  (WS = class extends HTMLElement {
    $$ctor;
    $$s;
    $$c;
    $$cn = !1;
    $$d = {};
    $$r = !1;
    $$p_d = {};
    $$l = {};
    $$l_u = new Map();
    constructor(i, e, t) {
      super(),
        (this.$$ctor = i),
        (this.$$s = e),
        t && this.attachShadow({ mode: "open" });
    }
    addEventListener(i, e, t) {
      if (((this.$$l[i] = this.$$l[i] || []), this.$$l[i].push(e), this.$$c)) {
        let r = this.$$c.$on(i, e);
        this.$$l_u.set(e, r);
      }
      super.addEventListener(i, e, t);
    }
    removeEventListener(i, e, t) {
      if ((super.removeEventListener(i, e, t), this.$$c)) {
        let r = this.$$l_u.get(e);
        r && (r(), this.$$l_u.delete(e));
      }
    }
    async connectedCallback() {
      if (((this.$$cn = !0), !this.$$c)) {
        let i = function (o) {
          return () => {
            let n;
            return {
              c: function () {
                (n = Je("slot")), o !== "default" && J(n, "name", o);
              },
              m: function (m, b) {
                Ne(m, n, b);
              },
              d: function (m) {
                m && ze(n);
              },
            };
          };
        };
        if ((await Promise.resolve(), !this.$$cn || this.$$c)) return;
        let e = {},
          t = i5(this);
        for (let o of this.$$s) o in t && (e[o] = [i(o)]);
        for (let o of this.attributes) {
          let n = this.$$g_p(o.name);
          n in this.$$d || (this.$$d[n] = pg(n, o.value, this.$$p_d, "toProp"));
        }
        for (let o in this.$$p_d)
          !(o in this.$$d) &&
            this[o] !== void 0 &&
            ((this.$$d[o] = this[o]), delete this[o]);
        this.$$c = new this.$$ctor({
          target: this.shadowRoot || this,
          props: { ...this.$$d, $$slots: e, $$scope: { ctx: [] } },
        });
        let r = () => {
          this.$$r = !0;
          for (let o in this.$$p_d)
            if (
              ((this.$$d[o] = this.$$c.$$.ctx[this.$$c.$$.props[o]]),
              this.$$p_d[o].reflect)
            ) {
              let n = pg(o, this.$$d[o], this.$$p_d, "toAttribute");
              n == null
                ? this.removeAttribute(this.$$p_d[o].attribute || o)
                : this.setAttribute(this.$$p_d[o].attribute || o, n);
            }
          this.$$r = !1;
        };
        this.$$c.$$.after_update.push(r), r();
        for (let o in this.$$l)
          for (let n of this.$$l[o]) {
            let u = this.$$c.$on(o, n);
            this.$$l_u.set(n, u);
          }
        this.$$l = {};
      }
    }
    attributeChangedCallback(i, e, t) {
      this.$$r ||
        ((i = this.$$g_p(i)),
        (this.$$d[i] = pg(i, t, this.$$p_d, "toProp")),
        this.$$c?.$set({ [i]: this.$$d[i] }));
    }
    disconnectedCallback() {
      (this.$$cn = !1),
        Promise.resolve().then(() => {
          this.$$cn || (this.$$c.$destroy(), (this.$$c = void 0));
        });
    }
    $$g_p(i) {
      return (
        Object.keys(this.$$p_d).find(
          (e) =>
            this.$$p_d[e].attribute === i ||
            (!this.$$p_d[e].attribute && e.toLowerCase() === i)
        ) || i
      );
    }
  });
function pg(i, e, t, r) {
  let o = t[i]?.type;
  if (
    ((e = o === "Boolean" && typeof e != "boolean" ? e != null : e),
    !r || !t[i])
  )
    return e;
  if (r === "toAttribute")
    switch (o) {
      case "Object":
      case "Array":
        return e == null ? null : JSON.stringify(e);
      case "Boolean":
        return e ? "" : null;
      case "Number":
        return e ?? null;
      default:
        return e;
    }
  else
    switch (o) {
      case "Object":
      case "Array":
        return e && JSON.parse(e);
      case "Boolean":
        return e;
      case "Number":
        return e != null ? +e : e;
      default:
        return e;
    }
}
var dt = class {
  $$ = void 0;
  $$set = void 0;
  $destroy() {
    Xt(this, 1), (this.$destroy = yt);
  }
  $on(e, t) {
    if (!zo(t)) return yt;
    let r = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
    return (
      r.push(t),
      () => {
        let o = r.indexOf(t);
        o !== -1 && r.splice(o, 1);
      }
    );
  }
  $set(e) {
    this.$$set &&
      !q3(e) &&
      ((this.$$.skip_bound = !0), this.$$set(e), (this.$$.skip_bound = !1));
  }
};
var u5 = "4";
typeof window < "u" &&
  (window.__svelte || (window.__svelte = { v: new Set() })).v.add(u5);
function No(i) {
  this.content = i;
}
No.prototype = {
  constructor: No,
  find: function (i) {
    for (var e = 0; e < this.content.length; e += 2)
      if (this.content[e] === i) return e;
    return -1;
  },
  get: function (i) {
    var e = this.find(i);
    return e == -1 ? void 0 : this.content[e + 1];
  },
  update: function (i, e, t) {
    var r = t && t != i ? this.remove(t) : this,
      o = r.find(i),
      n = r.content.slice();
    return (
      o == -1 ? n.push(t || i, e) : ((n[o + 1] = e), t && (n[o] = t)), new No(n)
    );
  },
  remove: function (i) {
    var e = this.find(i);
    if (e == -1) return this;
    var t = this.content.slice();
    return t.splice(e, 2), new No(t);
  },
  addToStart: function (i, e) {
    return new No([i, e].concat(this.remove(i).content));
  },
  addToEnd: function (i, e) {
    var t = this.remove(i).content.slice();
    return t.push(i, e), new No(t);
  },
  addBefore: function (i, e, t) {
    var r = this.remove(e),
      o = r.content.slice(),
      n = r.find(i);
    return o.splice(n == -1 ? o.length : n, 0, e, t), new No(o);
  },
  forEach: function (i) {
    for (var e = 0; e < this.content.length; e += 2)
      i(this.content[e], this.content[e + 1]);
  },
  prepend: function (i) {
    return (
      (i = No.from(i)),
      i.size ? new No(i.content.concat(this.subtract(i).content)) : this
    );
  },
  append: function (i) {
    return (
      (i = No.from(i)),
      i.size ? new No(this.subtract(i).content.concat(i.content)) : this
    );
  },
  subtract: function (i) {
    var e = this;
    i = No.from(i);
    for (var t = 0; t < i.content.length; t += 2) e = e.remove(i.content[t]);
    return e;
  },
  toObject: function () {
    var i = {};
    return (
      this.forEach(function (e, t) {
        i[e] = t;
      }),
      i
    );
  },
  get size() {
    return this.content.length >> 1;
  },
};
No.from = function (i) {
  if (i instanceof No) return i;
  var e = [];
  if (i) for (var t in i) e.push(t, i[t]);
  return new No(e);
};
var fg = No;
function y5(i, e, t) {
  for (let r = 0; ; r++) {
    if (r == i.childCount || r == e.childCount)
      return i.childCount == e.childCount ? null : t;
    let o = i.child(r),
      n = e.child(r);
    if (o == n) {
      t += o.nodeSize;
      continue;
    }
    if (!o.sameMarkup(n)) return t;
    if (o.isText && o.text != n.text) {
      for (let u = 0; o.text[u] == n.text[u]; u++) t++;
      return t;
    }
    if (o.content.size || n.content.size) {
      let u = y5(o.content, n.content, t + 1);
      if (u != null) return u;
    }
    t += o.nodeSize;
  }
}
function b5(i, e, t, r) {
  for (let o = i.childCount, n = e.childCount; ; ) {
    if (o == 0 || n == 0) return o == n ? null : { a: t, b: r };
    let u = i.child(--o),
      h = e.child(--n),
      m = u.nodeSize;
    if (u == h) {
      (t -= m), (r -= m);
      continue;
    }
    if (!u.sameMarkup(h)) return { a: t, b: r };
    if (u.isText && u.text != h.text) {
      let b = 0,
        _ = Math.min(u.text.length, h.text.length);
      for (
        ;
        b < _ && u.text[u.text.length - b - 1] == h.text[h.text.length - b - 1];

      )
        b++, t--, r--;
      return { a: t, b: r };
    }
    if (u.content.size || h.content.size) {
      let b = b5(u.content, h.content, t - 1, r - 1);
      if (b) return b;
    }
    (t -= m), (r -= m);
  }
}
var Ct = class i {
  constructor(e, t) {
    if (((this.content = e), (this.size = t || 0), t == null))
      for (let r = 0; r < e.length; r++) this.size += e[r].nodeSize;
  }
  nodesBetween(e, t, r, o = 0, n) {
    for (let u = 0, h = 0; h < t; u++) {
      let m = this.content[u],
        b = h + m.nodeSize;
      if (b > e && r(m, o + h, n || null, u) !== !1 && m.content.size) {
        let _ = h + 1;
        m.nodesBetween(
          Math.max(0, e - _),
          Math.min(m.content.size, t - _),
          r,
          o + _
        );
      }
      h = b;
    }
  }
  descendants(e) {
    this.nodesBetween(0, this.size, e);
  }
  textBetween(e, t, r, o) {
    let n = "",
      u = !0;
    return (
      this.nodesBetween(
        e,
        t,
        (h, m) => {
          let b = h.isText
            ? h.text.slice(Math.max(e, m) - m, t - m)
            : h.isLeaf
            ? o
              ? typeof o == "function"
                ? o(h)
                : o
              : h.type.spec.leafText
              ? h.type.spec.leafText(h)
              : ""
            : "";
          h.isBlock &&
            ((h.isLeaf && b) || h.isTextblock) &&
            r &&
            (u ? (u = !1) : (n += r)),
            (n += b);
        },
        0
      ),
      n
    );
  }
  append(e) {
    if (!e.size) return this;
    if (!this.size) return e;
    let t = this.lastChild,
      r = e.firstChild,
      o = this.content.slice(),
      n = 0;
    for (
      t.isText &&
      t.sameMarkup(r) &&
      ((o[o.length - 1] = t.withText(t.text + r.text)), (n = 1));
      n < e.content.length;
      n++
    )
      o.push(e.content[n]);
    return new i(o, this.size + e.size);
  }
  cut(e, t = this.size) {
    if (e == 0 && t == this.size) return this;
    let r = [],
      o = 0;
    if (t > e)
      for (let n = 0, u = 0; u < t; n++) {
        let h = this.content[n],
          m = u + h.nodeSize;
        m > e &&
          ((u < e || m > t) &&
            (h.isText
              ? (h = h.cut(Math.max(0, e - u), Math.min(h.text.length, t - u)))
              : (h = h.cut(
                  Math.max(0, e - u - 1),
                  Math.min(h.content.size, t - u - 1)
                ))),
          r.push(h),
          (o += h.nodeSize)),
          (u = m);
      }
    return new i(r, o);
  }
  cutByIndex(e, t) {
    return e == t
      ? i.empty
      : e == 0 && t == this.content.length
      ? this
      : new i(this.content.slice(e, t));
  }
  replaceChild(e, t) {
    let r = this.content[e];
    if (r == t) return this;
    let o = this.content.slice(),
      n = this.size + t.nodeSize - r.nodeSize;
    return (o[e] = t), new i(o, n);
  }
  addToStart(e) {
    return new i([e].concat(this.content), this.size + e.nodeSize);
  }
  addToEnd(e) {
    return new i(this.content.concat(e), this.size + e.nodeSize);
  }
  eq(e) {
    if (this.content.length != e.content.length) return !1;
    for (let t = 0; t < this.content.length; t++)
      if (!this.content[t].eq(e.content[t])) return !1;
    return !0;
  }
  get firstChild() {
    return this.content.length ? this.content[0] : null;
  }
  get lastChild() {
    return this.content.length ? this.content[this.content.length - 1] : null;
  }
  get childCount() {
    return this.content.length;
  }
  child(e) {
    let t = this.content[e];
    if (!t) throw new RangeError("Index " + e + " out of range for " + this);
    return t;
  }
  maybeChild(e) {
    return this.content[e] || null;
  }
  forEach(e) {
    for (let t = 0, r = 0; t < this.content.length; t++) {
      let o = this.content[t];
      e(o, r, t), (r += o.nodeSize);
    }
  }
  findDiffStart(e, t = 0) {
    return y5(this, e, t);
  }
  findDiffEnd(e, t = this.size, r = e.size) {
    return b5(this, e, t, r);
  }
  findIndex(e, t = -1) {
    if (e == 0) return _0(0, e);
    if (e == this.size) return _0(this.content.length, e);
    if (e > this.size || e < 0)
      throw new RangeError(`Position ${e} outside of fragment (${this})`);
    for (let r = 0, o = 0; ; r++) {
      let n = this.child(r),
        u = o + n.nodeSize;
      if (u >= e) return u == e || t > 0 ? _0(r + 1, u) : _0(r, o);
      o = u;
    }
  }
  toString() {
    return "<" + this.toStringInner() + ">";
  }
  toStringInner() {
    return this.content.join(", ");
  }
  toJSON() {
    return this.content.length ? this.content.map((e) => e.toJSON()) : null;
  }
  static fromJSON(e, t) {
    if (!t) return i.empty;
    if (!Array.isArray(t))
      throw new RangeError("Invalid input for Fragment.fromJSON");
    return new i(t.map(e.nodeFromJSON));
  }
  static fromArray(e) {
    if (!e.length) return i.empty;
    let t,
      r = 0;
    for (let o = 0; o < e.length; o++) {
      let n = e[o];
      (r += n.nodeSize),
        o && n.isText && e[o - 1].sameMarkup(n)
          ? (t || (t = e.slice(0, o)),
            (t[t.length - 1] = n.withText(t[t.length - 1].text + n.text)))
          : t && t.push(n);
    }
    return new i(t || e, r);
  }
  static from(e) {
    if (!e) return i.empty;
    if (e instanceof i) return e;
    if (Array.isArray(e)) return this.fromArray(e);
    if (e.attrs) return new i([e], e.nodeSize);
    throw new RangeError(
      "Can not convert " +
        e +
        " to a Fragment" +
        (e.nodesBetween
          ? " (looks like multiple versions of prosemirror-model were loaded)"
          : "")
    );
  }
};
Ct.empty = new Ct([], 0);
var mg = { index: 0, offset: 0 };
function _0(i, e) {
  return (mg.index = i), (mg.offset = e), mg;
}
function x0(i, e) {
  if (i === e) return !0;
  if (!(i && typeof i == "object") || !(e && typeof e == "object")) return !1;
  let t = Array.isArray(i);
  if (Array.isArray(e) != t) return !1;
  if (t) {
    if (i.length != e.length) return !1;
    for (let r = 0; r < i.length; r++) if (!x0(i[r], e[r])) return !1;
  } else {
    for (let r in i) if (!(r in e) || !x0(i[r], e[r])) return !1;
    for (let r in e) if (!(r in i)) return !1;
  }
  return !0;
}
var ur = class i {
  constructor(e, t) {
    (this.type = e), (this.attrs = t);
  }
  addToSet(e) {
    let t,
      r = !1;
    for (let o = 0; o < e.length; o++) {
      let n = e[o];
      if (this.eq(n)) return e;
      if (this.type.excludes(n.type)) t || (t = e.slice(0, o));
      else {
        if (n.type.excludes(this.type)) return e;
        !r &&
          n.type.rank > this.type.rank &&
          (t || (t = e.slice(0, o)), t.push(this), (r = !0)),
          t && t.push(n);
      }
    }
    return t || (t = e.slice()), r || t.push(this), t;
  }
  removeFromSet(e) {
    for (let t = 0; t < e.length; t++)
      if (this.eq(e[t])) return e.slice(0, t).concat(e.slice(t + 1));
    return e;
  }
  isInSet(e) {
    for (let t = 0; t < e.length; t++) if (this.eq(e[t])) return !0;
    return !1;
  }
  eq(e) {
    return this == e || (this.type == e.type && x0(this.attrs, e.attrs));
  }
  toJSON() {
    let e = { type: this.type.name };
    for (let t in this.attrs) {
      e.attrs = this.attrs;
      break;
    }
    return e;
  }
  static fromJSON(e, t) {
    if (!t) throw new RangeError("Invalid input for Mark.fromJSON");
    let r = e.marks[t.type];
    if (!r)
      throw new RangeError(`There is no mark type ${t.type} in this schema`);
    return r.create(t.attrs);
  }
  static sameSet(e, t) {
    if (e == t) return !0;
    if (e.length != t.length) return !1;
    for (let r = 0; r < e.length; r++) if (!e[r].eq(t[r])) return !1;
    return !0;
  }
  static setFrom(e) {
    if (!e || (Array.isArray(e) && e.length == 0)) return i.none;
    if (e instanceof i) return [e];
    let t = e.slice();
    return t.sort((r, o) => r.type.rank - o.type.rank), t;
  }
};
ur.none = [];
var zc = class extends Error {},
  Ht = class i {
    constructor(e, t, r) {
      (this.content = e), (this.openStart = t), (this.openEnd = r);
    }
    get size() {
      return this.content.size - this.openStart - this.openEnd;
    }
    insertAt(e, t) {
      let r = _5(this.content, e + this.openStart, t);
      return r && new i(r, this.openStart, this.openEnd);
    }
    removeBetween(e, t) {
      return new i(
        v5(this.content, e + this.openStart, t + this.openStart),
        this.openStart,
        this.openEnd
      );
    }
    eq(e) {
      return (
        this.content.eq(e.content) &&
        this.openStart == e.openStart &&
        this.openEnd == e.openEnd
      );
    }
    toString() {
      return this.content + "(" + this.openStart + "," + this.openEnd + ")";
    }
    toJSON() {
      if (!this.content.size) return null;
      let e = { content: this.content.toJSON() };
      return (
        this.openStart > 0 && (e.openStart = this.openStart),
        this.openEnd > 0 && (e.openEnd = this.openEnd),
        e
      );
    }
    static fromJSON(e, t) {
      if (!t) return i.empty;
      let r = t.openStart || 0,
        o = t.openEnd || 0;
      if (typeof r != "number" || typeof o != "number")
        throw new RangeError("Invalid input for Slice.fromJSON");
      return new i(Ct.fromJSON(e, t.content), r, o);
    }
    static maxOpen(e, t = !0) {
      let r = 0,
        o = 0;
      for (
        let n = e.firstChild;
        n && !n.isLeaf && (t || !n.type.spec.isolating);
        n = n.firstChild
      )
        r++;
      for (
        let n = e.lastChild;
        n && !n.isLeaf && (t || !n.type.spec.isolating);
        n = n.lastChild
      )
        o++;
      return new i(e, r, o);
    }
  };
Ht.empty = new Ht(Ct.empty, 0, 0);
function v5(i, e, t) {
  let { index: r, offset: o } = i.findIndex(e),
    n = i.maybeChild(r),
    { index: u, offset: h } = i.findIndex(t);
  if (o == e || n.isText) {
    if (h != t && !i.child(u).isText)
      throw new RangeError("Removing non-flat range");
    return i.cut(0, e).append(i.cut(t));
  }
  if (r != u) throw new RangeError("Removing non-flat range");
  return i.replaceChild(r, n.copy(v5(n.content, e - o - 1, t - o - 1)));
}
function _5(i, e, t, r) {
  let { index: o, offset: n } = i.findIndex(e),
    u = i.maybeChild(o);
  if (n == e || u.isText)
    return r && !r.canReplace(o, o, t)
      ? null
      : i.cut(0, e).append(t).append(i.cut(e));
  let h = _5(u.content, e - n - 1, t);
  return h && i.replaceChild(o, u.copy(h));
}
function ZS(i, e, t) {
  if (t.openStart > i.depth)
    throw new zc("Inserted content deeper than insertion position");
  if (i.depth - t.openStart != e.depth - t.openEnd)
    throw new zc("Inconsistent open depths");
  return x5(i, e, t, 0);
}
function x5(i, e, t, r) {
  let o = i.index(r),
    n = i.node(r);
  if (o == e.index(r) && r < i.depth - t.openStart) {
    let u = x5(i, e, t, r + 1);
    return n.copy(n.content.replaceChild(o, u));
  } else if (t.content.size)
    if (!t.openStart && !t.openEnd && i.depth == r && e.depth == r) {
      let u = i.parent,
        h = u.content;
      return Fc(
        u,
        h.cut(0, i.parentOffset).append(t.content).append(h.cut(e.parentOffset))
      );
    } else {
      let { start: u, end: h } = KS(t, i);
      return Fc(n, k5(i, u, h, e, r));
    }
  else return Fc(n, w0(i, e, r));
}
function w5(i, e) {
  if (!e.type.compatibleContent(i.type))
    throw new zc("Cannot join " + e.type.name + " onto " + i.type.name);
}
function vg(i, e, t) {
  let r = i.node(t);
  return w5(r, e.node(t)), r;
}
function Lc(i, e) {
  let t = e.length - 1;
  t >= 0 && i.isText && i.sameMarkup(e[t])
    ? (e[t] = i.withText(e[t].text + i.text))
    : e.push(i);
}
function Jh(i, e, t, r) {
  let o = (e || i).node(t),
    n = 0,
    u = e ? e.index(t) : o.childCount;
  i &&
    ((n = i.index(t)),
    i.depth > t ? n++ : i.textOffset && (Lc(i.nodeAfter, r), n++));
  for (let h = n; h < u; h++) Lc(o.child(h), r);
  e && e.depth == t && e.textOffset && Lc(e.nodeBefore, r);
}
function Fc(i, e) {
  return i.type.checkContent(e), i.copy(e);
}
function k5(i, e, t, r, o) {
  let n = i.depth > o && vg(i, e, o + 1),
    u = r.depth > o && vg(t, r, o + 1),
    h = [];
  return (
    Jh(null, i, o, h),
    n && u && e.index(o) == t.index(o)
      ? (w5(n, u), Lc(Fc(n, k5(i, e, t, r, o + 1)), h))
      : (n && Lc(Fc(n, w0(i, e, o + 1)), h),
        Jh(e, t, o, h),
        u && Lc(Fc(u, w0(t, r, o + 1)), h)),
    Jh(r, null, o, h),
    new Ct(h)
  );
}
function w0(i, e, t) {
  let r = [];
  if ((Jh(null, i, t, r), i.depth > t)) {
    let o = vg(i, e, t + 1);
    Lc(Fc(o, w0(i, e, t + 1)), r);
  }
  return Jh(e, null, t, r), new Ct(r);
}
function KS(i, e) {
  let t = e.depth - i.openStart,
    o = e.node(t).copy(i.content);
  for (let n = t - 1; n >= 0; n--) o = e.node(n).copy(Ct.from(o));
  return {
    start: o.resolveNoCache(i.openStart + t),
    end: o.resolveNoCache(o.content.size - i.openEnd - t),
  };
}
var k0 = class i {
    constructor(e, t, r) {
      (this.pos = e),
        (this.path = t),
        (this.parentOffset = r),
        (this.depth = t.length / 3 - 1);
    }
    resolveDepth(e) {
      return e == null ? this.depth : e < 0 ? this.depth + e : e;
    }
    get parent() {
      return this.node(this.depth);
    }
    get doc() {
      return this.node(0);
    }
    node(e) {
      return this.path[this.resolveDepth(e) * 3];
    }
    index(e) {
      return this.path[this.resolveDepth(e) * 3 + 1];
    }
    indexAfter(e) {
      return (
        (e = this.resolveDepth(e)),
        this.index(e) + (e == this.depth && !this.textOffset ? 0 : 1)
      );
    }
    start(e) {
      return (e = this.resolveDepth(e)), e == 0 ? 0 : this.path[e * 3 - 1] + 1;
    }
    end(e) {
      return (
        (e = this.resolveDepth(e)), this.start(e) + this.node(e).content.size
      );
    }
    before(e) {
      if (((e = this.resolveDepth(e)), !e))
        throw new RangeError("There is no position before the top-level node");
      return e == this.depth + 1 ? this.pos : this.path[e * 3 - 1];
    }
    after(e) {
      if (((e = this.resolveDepth(e)), !e))
        throw new RangeError("There is no position after the top-level node");
      return e == this.depth + 1
        ? this.pos
        : this.path[e * 3 - 1] + this.path[e * 3].nodeSize;
    }
    get textOffset() {
      return this.pos - this.path[this.path.length - 1];
    }
    get nodeAfter() {
      let e = this.parent,
        t = this.index(this.depth);
      if (t == e.childCount) return null;
      let r = this.pos - this.path[this.path.length - 1],
        o = e.child(t);
      return r ? e.child(t).cut(r) : o;
    }
    get nodeBefore() {
      let e = this.index(this.depth),
        t = this.pos - this.path[this.path.length - 1];
      return t
        ? this.parent.child(e).cut(0, t)
        : e == 0
        ? null
        : this.parent.child(e - 1);
    }
    posAtIndex(e, t) {
      t = this.resolveDepth(t);
      let r = this.path[t * 3],
        o = t == 0 ? 0 : this.path[t * 3 - 1] + 1;
      for (let n = 0; n < e; n++) o += r.child(n).nodeSize;
      return o;
    }
    marks() {
      let e = this.parent,
        t = this.index();
      if (e.content.size == 0) return ur.none;
      if (this.textOffset) return e.child(t).marks;
      let r = e.maybeChild(t - 1),
        o = e.maybeChild(t);
      if (!r) {
        let h = r;
        (r = o), (o = h);
      }
      let n = r.marks;
      for (var u = 0; u < n.length; u++)
        n[u].type.spec.inclusive === !1 &&
          (!o || !n[u].isInSet(o.marks)) &&
          (n = n[u--].removeFromSet(n));
      return n;
    }
    marksAcross(e) {
      let t = this.parent.maybeChild(this.index());
      if (!t || !t.isInline) return null;
      let r = t.marks,
        o = e.parent.maybeChild(e.index());
      for (var n = 0; n < r.length; n++)
        r[n].type.spec.inclusive === !1 &&
          (!o || !r[n].isInSet(o.marks)) &&
          (r = r[n--].removeFromSet(r));
      return r;
    }
    sharedDepth(e) {
      for (let t = this.depth; t > 0; t--)
        if (this.start(t) <= e && this.end(t) >= e) return t;
      return 0;
    }
    blockRange(e = this, t) {
      if (e.pos < this.pos) return e.blockRange(this);
      for (
        let r =
          this.depth - (this.parent.inlineContent || this.pos == e.pos ? 1 : 0);
        r >= 0;
        r--
      )
        if (e.pos <= this.end(r) && (!t || t(this.node(r))))
          return new Nc(this, e, r);
      return null;
    }
    sameParent(e) {
      return this.pos - this.parentOffset == e.pos - e.parentOffset;
    }
    max(e) {
      return e.pos > this.pos ? e : this;
    }
    min(e) {
      return e.pos < this.pos ? e : this;
    }
    toString() {
      let e = "";
      for (let t = 1; t <= this.depth; t++)
        e += (e ? "/" : "") + this.node(t).type.name + "_" + this.index(t - 1);
      return e + ":" + this.parentOffset;
    }
    static resolve(e, t) {
      if (!(t >= 0 && t <= e.content.size))
        throw new RangeError("Position " + t + " out of range");
      let r = [],
        o = 0,
        n = t;
      for (let u = e; ; ) {
        let { index: h, offset: m } = u.content.findIndex(n),
          b = n - m;
        if ((r.push(u, h, o + m), !b || ((u = u.child(h)), u.isText))) break;
        (n = b - 1), (o += m + 1);
      }
      return new i(t, r, n);
    }
    static resolveCached(e, t) {
      for (let o = 0; o < gg.length; o++) {
        let n = gg[o];
        if (n.pos == t && n.doc == e) return n;
      }
      let r = (gg[yg] = i.resolve(e, t));
      return (yg = (yg + 1) % JS), r;
    }
  },
  gg = [],
  yg = 0,
  JS = 12,
  Nc = class {
    constructor(e, t, r) {
      (this.$from = e), (this.$to = t), (this.depth = r);
    }
    get start() {
      return this.$from.before(this.depth + 1);
    }
    get end() {
      return this.$to.after(this.depth + 1);
    }
    get parent() {
      return this.$from.node(this.depth);
    }
    get startIndex() {
      return this.$from.index(this.depth);
    }
    get endIndex() {
      return this.$to.indexAfter(this.depth);
    }
  },
  XS = Object.create(null),
  ia = class i {
    constructor(e, t, r, o = ur.none) {
      (this.type = e),
        (this.attrs = t),
        (this.marks = o),
        (this.content = r || Ct.empty);
    }
    get nodeSize() {
      return this.isLeaf ? 1 : 2 + this.content.size;
    }
    get childCount() {
      return this.content.childCount;
    }
    child(e) {
      return this.content.child(e);
    }
    maybeChild(e) {
      return this.content.maybeChild(e);
    }
    forEach(e) {
      this.content.forEach(e);
    }
    nodesBetween(e, t, r, o = 0) {
      this.content.nodesBetween(e, t, r, o, this);
    }
    descendants(e) {
      this.nodesBetween(0, this.content.size, e);
    }
    get textContent() {
      return this.isLeaf && this.type.spec.leafText
        ? this.type.spec.leafText(this)
        : this.textBetween(0, this.content.size, "");
    }
    textBetween(e, t, r, o) {
      return this.content.textBetween(e, t, r, o);
    }
    get firstChild() {
      return this.content.firstChild;
    }
    get lastChild() {
      return this.content.lastChild;
    }
    eq(e) {
      return this == e || (this.sameMarkup(e) && this.content.eq(e.content));
    }
    sameMarkup(e) {
      return this.hasMarkup(e.type, e.attrs, e.marks);
    }
    hasMarkup(e, t, r) {
      return (
        this.type == e &&
        x0(this.attrs, t || e.defaultAttrs || XS) &&
        ur.sameSet(this.marks, r || ur.none)
      );
    }
    copy(e = null) {
      return e == this.content
        ? this
        : new i(this.type, this.attrs, e, this.marks);
    }
    mark(e) {
      return e == this.marks
        ? this
        : new i(this.type, this.attrs, this.content, e);
    }
    cut(e, t = this.content.size) {
      return e == 0 && t == this.content.size
        ? this
        : this.copy(this.content.cut(e, t));
    }
    slice(e, t = this.content.size, r = !1) {
      if (e == t) return Ht.empty;
      let o = this.resolve(e),
        n = this.resolve(t),
        u = r ? 0 : o.sharedDepth(t),
        h = o.start(u),
        b = o.node(u).content.cut(o.pos - h, n.pos - h);
      return new Ht(b, o.depth - u, n.depth - u);
    }
    replace(e, t, r) {
      return ZS(this.resolve(e), this.resolve(t), r);
    }
    nodeAt(e) {
      for (let t = this; ; ) {
        let { index: r, offset: o } = t.content.findIndex(e);
        if (((t = t.maybeChild(r)), !t)) return null;
        if (o == e || t.isText) return t;
        e -= o + 1;
      }
    }
    childAfter(e) {
      let { index: t, offset: r } = this.content.findIndex(e);
      return { node: this.content.maybeChild(t), index: t, offset: r };
    }
    childBefore(e) {
      if (e == 0) return { node: null, index: 0, offset: 0 };
      let { index: t, offset: r } = this.content.findIndex(e);
      if (r < e) return { node: this.content.child(t), index: t, offset: r };
      let o = this.content.child(t - 1);
      return { node: o, index: t - 1, offset: r - o.nodeSize };
    }
    resolve(e) {
      return k0.resolveCached(this, e);
    }
    resolveNoCache(e) {
      return k0.resolve(this, e);
    }
    rangeHasMark(e, t, r) {
      let o = !1;
      return (
        t > e &&
          this.nodesBetween(e, t, (n) => (r.isInSet(n.marks) && (o = !0), !o)),
        o
      );
    }
    get isBlock() {
      return this.type.isBlock;
    }
    get isTextblock() {
      return this.type.isTextblock;
    }
    get inlineContent() {
      return this.type.inlineContent;
    }
    get isInline() {
      return this.type.isInline;
    }
    get isText() {
      return this.type.isText;
    }
    get isLeaf() {
      return this.type.isLeaf;
    }
    get isAtom() {
      return this.type.isAtom;
    }
    toString() {
      if (this.type.spec.toDebugString)
        return this.type.spec.toDebugString(this);
      let e = this.type.name;
      return (
        this.content.size && (e += "(" + this.content.toStringInner() + ")"),
        S5(this.marks, e)
      );
    }
    contentMatchAt(e) {
      let t = this.type.contentMatch.matchFragment(this.content, 0, e);
      if (!t)
        throw new Error("Called contentMatchAt on a node with invalid content");
      return t;
    }
    canReplace(e, t, r = Ct.empty, o = 0, n = r.childCount) {
      let u = this.contentMatchAt(e).matchFragment(r, o, n),
        h = u && u.matchFragment(this.content, t);
      if (!h || !h.validEnd) return !1;
      for (let m = o; m < n; m++)
        if (!this.type.allowsMarks(r.child(m).marks)) return !1;
      return !0;
    }
    canReplaceWith(e, t, r, o) {
      if (o && !this.type.allowsMarks(o)) return !1;
      let n = this.contentMatchAt(e).matchType(r),
        u = n && n.matchFragment(this.content, t);
      return u ? u.validEnd : !1;
    }
    canAppend(e) {
      return e.content.size
        ? this.canReplace(this.childCount, this.childCount, e.content)
        : this.type.compatibleContent(e.type);
    }
    check() {
      this.type.checkContent(this.content);
      let e = ur.none;
      for (let t = 0; t < this.marks.length; t++) e = this.marks[t].addToSet(e);
      if (!ur.sameSet(e, this.marks))
        throw new RangeError(
          `Invalid collection of marks for node ${
            this.type.name
          }: ${this.marks.map((t) => t.type.name)}`
        );
      this.content.forEach((t) => t.check());
    }
    toJSON() {
      let e = { type: this.type.name };
      for (let t in this.attrs) {
        e.attrs = this.attrs;
        break;
      }
      return (
        this.content.size && (e.content = this.content.toJSON()),
        this.marks.length && (e.marks = this.marks.map((t) => t.toJSON())),
        e
      );
    }
    static fromJSON(e, t) {
      if (!t) throw new RangeError("Invalid input for Node.fromJSON");
      let r = null;
      if (t.marks) {
        if (!Array.isArray(t.marks))
          throw new RangeError("Invalid mark data for Node.fromJSON");
        r = t.marks.map(e.markFromJSON);
      }
      if (t.type == "text") {
        if (typeof t.text != "string")
          throw new RangeError("Invalid text node in JSON");
        return e.text(t.text, r);
      }
      let o = Ct.fromJSON(e, t.content);
      return e.nodeType(t.type).create(t.attrs, o, r);
    }
  };
ia.prototype.text = void 0;
var _g = class i extends ia {
  constructor(e, t, r, o) {
    if ((super(e, t, null, o), !r))
      throw new RangeError("Empty text nodes are not allowed");
    this.text = r;
  }
  toString() {
    return this.type.spec.toDebugString
      ? this.type.spec.toDebugString(this)
      : S5(this.marks, JSON.stringify(this.text));
  }
  get textContent() {
    return this.text;
  }
  textBetween(e, t) {
    return this.text.slice(e, t);
  }
  get nodeSize() {
    return this.text.length;
  }
  mark(e) {
    return e == this.marks ? this : new i(this.type, this.attrs, this.text, e);
  }
  withText(e) {
    return e == this.text ? this : new i(this.type, this.attrs, e, this.marks);
  }
  cut(e = 0, t = this.text.length) {
    return e == 0 && t == this.text.length
      ? this
      : this.withText(this.text.slice(e, t));
  }
  eq(e) {
    return this.sameMarkup(e) && this.text == e.text;
  }
  toJSON() {
    let e = super.toJSON();
    return (e.text = this.text), e;
  }
};
function S5(i, e) {
  for (let t = i.length - 1; t >= 0; t--) e = i[t].type.name + "(" + e + ")";
  return e;
}
var Oc = class i {
  constructor(e) {
    (this.validEnd = e), (this.next = []), (this.wrapCache = []);
  }
  static parse(e, t) {
    let r = new xg(e, t);
    if (r.next == null) return i.empty;
    let o = C5(r);
    r.next && r.err("Unexpected trailing text");
    let n = oC(nC(o));
    return sC(n, r), n;
  }
  matchType(e) {
    for (let t = 0; t < this.next.length; t++)
      if (this.next[t].type == e) return this.next[t].next;
    return null;
  }
  matchFragment(e, t = 0, r = e.childCount) {
    let o = this;
    for (let n = t; o && n < r; n++) o = o.matchType(e.child(n).type);
    return o;
  }
  get inlineContent() {
    return this.next.length != 0 && this.next[0].type.isInline;
  }
  get defaultType() {
    for (let e = 0; e < this.next.length; e++) {
      let { type: t } = this.next[e];
      if (!(t.isText || t.hasRequiredAttrs())) return t;
    }
    return null;
  }
  compatible(e) {
    for (let t = 0; t < this.next.length; t++)
      for (let r = 0; r < e.next.length; r++)
        if (this.next[t].type == e.next[r].type) return !0;
    return !1;
  }
  fillBefore(e, t = !1, r = 0) {
    let o = [this];
    function n(u, h) {
      let m = u.matchFragment(e, r);
      if (m && (!t || m.validEnd))
        return Ct.from(h.map((b) => b.createAndFill()));
      for (let b = 0; b < u.next.length; b++) {
        let { type: _, next: S } = u.next[b];
        if (!(_.isText || _.hasRequiredAttrs()) && o.indexOf(S) == -1) {
          o.push(S);
          let T = n(S, h.concat(_));
          if (T) return T;
        }
      }
      return null;
    }
    return n(this, []);
  }
  findWrapping(e) {
    for (let r = 0; r < this.wrapCache.length; r += 2)
      if (this.wrapCache[r] == e) return this.wrapCache[r + 1];
    let t = this.computeWrapping(e);
    return this.wrapCache.push(e, t), t;
  }
  computeWrapping(e) {
    let t = Object.create(null),
      r = [{ match: this, type: null, via: null }];
    for (; r.length; ) {
      let o = r.shift(),
        n = o.match;
      if (n.matchType(e)) {
        let u = [];
        for (let h = o; h.type; h = h.via) u.push(h.type);
        return u.reverse();
      }
      for (let u = 0; u < n.next.length; u++) {
        let { type: h, next: m } = n.next[u];
        !h.isLeaf &&
          !h.hasRequiredAttrs() &&
          !(h.name in t) &&
          (!o.type || m.validEnd) &&
          (r.push({ match: h.contentMatch, type: h, via: o }),
          (t[h.name] = !0));
      }
    }
    return null;
  }
  get edgeCount() {
    return this.next.length;
  }
  edge(e) {
    if (e >= this.next.length)
      throw new RangeError(`There's no ${e}th edge in this content match`);
    return this.next[e];
  }
  toString() {
    let e = [];
    function t(r) {
      e.push(r);
      for (let o = 0; o < r.next.length; o++)
        e.indexOf(r.next[o].next) == -1 && t(r.next[o].next);
    }
    return (
      t(this),
      e.map((r, o) => {
        let n = o + (r.validEnd ? "*" : " ") + " ";
        for (let u = 0; u < r.next.length; u++)
          n +=
            (u ? ", " : "") +
            r.next[u].type.name +
            "->" +
            e.indexOf(r.next[u].next);
        return n;
      }).join(`
`)
    );
  }
};
Oc.empty = new Oc(!0);
var xg = class {
  constructor(e, t) {
    (this.string = e),
      (this.nodeTypes = t),
      (this.inline = null),
      (this.pos = 0),
      (this.tokens = e.split(/\s*(?=\b|\W|$)/)),
      this.tokens[this.tokens.length - 1] == "" && this.tokens.pop(),
      this.tokens[0] == "" && this.tokens.shift();
  }
  get next() {
    return this.tokens[this.pos];
  }
  eat(e) {
    return this.next == e && (this.pos++ || !0);
  }
  err(e) {
    throw new SyntaxError(e + " (in content expression '" + this.string + "')");
  }
};
function C5(i) {
  let e = [];
  do e.push(YS(i));
  while (i.eat("|"));
  return e.length == 1 ? e[0] : { type: "choice", exprs: e };
}
function YS(i) {
  let e = [];
  do e.push(eC(i));
  while (i.next && i.next != ")" && i.next != "|");
  return e.length == 1 ? e[0] : { type: "seq", exprs: e };
}
function eC(i) {
  let e = rC(i);
  for (;;)
    if (i.eat("+")) e = { type: "plus", expr: e };
    else if (i.eat("*")) e = { type: "star", expr: e };
    else if (i.eat("?")) e = { type: "opt", expr: e };
    else if (i.eat("{")) e = tC(i, e);
    else break;
  return e;
}
function d5(i) {
  /\D/.test(i.next) && i.err("Expected number, got '" + i.next + "'");
  let e = Number(i.next);
  return i.pos++, e;
}
function tC(i, e) {
  let t = d5(i),
    r = t;
  return (
    i.eat(",") && (i.next != "}" ? (r = d5(i)) : (r = -1)),
    i.eat("}") || i.err("Unclosed braced range"),
    { type: "range", min: t, max: r, expr: e }
  );
}
function iC(i, e) {
  let t = i.nodeTypes,
    r = t[e];
  if (r) return [r];
  let o = [];
  for (let n in t) {
    let u = t[n];
    u.groups.indexOf(e) > -1 && o.push(u);
  }
  return o.length == 0 && i.err("No node type or group '" + e + "' found"), o;
}
function rC(i) {
  if (i.eat("(")) {
    let e = C5(i);
    return i.eat(")") || i.err("Missing closing paren"), e;
  } else if (/\W/.test(i.next)) i.err("Unexpected token '" + i.next + "'");
  else {
    let e = iC(i, i.next).map(
      (t) => (
        i.inline == null
          ? (i.inline = t.isInline)
          : i.inline != t.isInline && i.err("Mixing inline and block content"),
        { type: "name", value: t }
      )
    );
    return i.pos++, e.length == 1 ? e[0] : { type: "choice", exprs: e };
  }
}
function nC(i) {
  let e = [[]];
  return o(n(i, 0), t()), e;
  function t() {
    return e.push([]) - 1;
  }
  function r(u, h, m) {
    let b = { term: m, to: h };
    return e[u].push(b), b;
  }
  function o(u, h) {
    u.forEach((m) => (m.to = h));
  }
  function n(u, h) {
    if (u.type == "choice")
      return u.exprs.reduce((m, b) => m.concat(n(b, h)), []);
    if (u.type == "seq")
      for (let m = 0; ; m++) {
        let b = n(u.exprs[m], h);
        if (m == u.exprs.length - 1) return b;
        o(b, (h = t()));
      }
    else if (u.type == "star") {
      let m = t();
      return r(h, m), o(n(u.expr, m), m), [r(m)];
    } else if (u.type == "plus") {
      let m = t();
      return o(n(u.expr, h), m), o(n(u.expr, m), m), [r(m)];
    } else {
      if (u.type == "opt") return [r(h)].concat(n(u.expr, h));
      if (u.type == "range") {
        let m = h;
        for (let b = 0; b < u.min; b++) {
          let _ = t();
          o(n(u.expr, m), _), (m = _);
        }
        if (u.max == -1) o(n(u.expr, m), m);
        else
          for (let b = u.min; b < u.max; b++) {
            let _ = t();
            r(m, _), o(n(u.expr, m), _), (m = _);
          }
        return [r(m)];
      } else {
        if (u.type == "name") return [r(h, void 0, u.value)];
        throw new Error("Unknown expr type");
      }
    }
  }
}
function E5(i, e) {
  return e - i;
}
function h5(i, e) {
  let t = [];
  return r(e), t.sort(E5);
  function r(o) {
    let n = i[o];
    if (n.length == 1 && !n[0].term) return r(n[0].to);
    t.push(o);
    for (let u = 0; u < n.length; u++) {
      let { term: h, to: m } = n[u];
      !h && t.indexOf(m) == -1 && r(m);
    }
  }
}
function oC(i) {
  let e = Object.create(null);
  return t(h5(i, 0));
  function t(r) {
    let o = [];
    r.forEach((u) => {
      i[u].forEach(({ term: h, to: m }) => {
        if (!h) return;
        let b;
        for (let _ = 0; _ < o.length; _++) o[_][0] == h && (b = o[_][1]);
        h5(i, m).forEach((_) => {
          b || o.push([h, (b = [])]), b.indexOf(_) == -1 && b.push(_);
        });
      });
    });
    let n = (e[r.join(",")] = new Oc(r.indexOf(i.length - 1) > -1));
    for (let u = 0; u < o.length; u++) {
      let h = o[u][1].sort(E5);
      n.next.push({ type: o[u][0], next: e[h.join(",")] || t(h) });
    }
    return n;
  }
}
function sC(i, e) {
  for (let t = 0, r = [i]; t < r.length; t++) {
    let o = r[t],
      n = !o.validEnd,
      u = [];
    for (let h = 0; h < o.next.length; h++) {
      let { type: m, next: b } = o.next[h];
      u.push(m.name),
        n && !(m.isText || m.hasRequiredAttrs()) && (n = !1),
        r.indexOf(b) == -1 && r.push(b);
    }
    n &&
      e.err(
        "Only non-generatable nodes (" +
          u.join(", ") +
          ") in a required position (see https://prosemirror.net/docs/guide/#generatable)"
      );
  }
}
function T5(i) {
  let e = Object.create(null);
  for (let t in i) {
    let r = i[t];
    if (!r.hasDefault) return null;
    e[t] = r.default;
  }
  return e;
}
function M5(i, e) {
  let t = Object.create(null);
  for (let r in i) {
    let o = e && e[r];
    if (o === void 0) {
      let n = i[r];
      if (n.hasDefault) o = n.default;
      else throw new RangeError("No value supplied for attribute " + r);
    }
    t[r] = o;
  }
  return t;
}
function A5(i) {
  let e = Object.create(null);
  if (i) for (let t in i) e[t] = new wg(i[t]);
  return e;
}
var S0 = class i {
    constructor(e, t, r) {
      (this.name = e),
        (this.schema = t),
        (this.spec = r),
        (this.markSet = null),
        (this.groups = r.group ? r.group.split(" ") : []),
        (this.attrs = A5(r.attrs)),
        (this.defaultAttrs = T5(this.attrs)),
        (this.contentMatch = null),
        (this.inlineContent = null),
        (this.isBlock = !(r.inline || e == "text")),
        (this.isText = e == "text");
    }
    get isInline() {
      return !this.isBlock;
    }
    get isTextblock() {
      return this.isBlock && this.inlineContent;
    }
    get isLeaf() {
      return this.contentMatch == Oc.empty;
    }
    get isAtom() {
      return this.isLeaf || !!this.spec.atom;
    }
    get whitespace() {
      return this.spec.whitespace || (this.spec.code ? "pre" : "normal");
    }
    hasRequiredAttrs() {
      for (let e in this.attrs) if (this.attrs[e].isRequired) return !0;
      return !1;
    }
    compatibleContent(e) {
      return this == e || this.contentMatch.compatible(e.contentMatch);
    }
    computeAttrs(e) {
      return !e && this.defaultAttrs ? this.defaultAttrs : M5(this.attrs, e);
    }
    create(e = null, t, r) {
      if (this.isText)
        throw new Error("NodeType.create can't construct text nodes");
      return new ia(this, this.computeAttrs(e), Ct.from(t), ur.setFrom(r));
    }
    createChecked(e = null, t, r) {
      return (
        (t = Ct.from(t)),
        this.checkContent(t),
        new ia(this, this.computeAttrs(e), t, ur.setFrom(r))
      );
    }
    createAndFill(e = null, t, r) {
      if (((e = this.computeAttrs(e)), (t = Ct.from(t)), t.size)) {
        let u = this.contentMatch.fillBefore(t);
        if (!u) return null;
        t = u.append(t);
      }
      let o = this.contentMatch.matchFragment(t),
        n = o && o.fillBefore(Ct.empty, !0);
      return n ? new ia(this, e, t.append(n), ur.setFrom(r)) : null;
    }
    validContent(e) {
      let t = this.contentMatch.matchFragment(e);
      if (!t || !t.validEnd) return !1;
      for (let r = 0; r < e.childCount; r++)
        if (!this.allowsMarks(e.child(r).marks)) return !1;
      return !0;
    }
    checkContent(e) {
      if (!this.validContent(e))
        throw new RangeError(
          `Invalid content for node ${this.name}: ${e.toString().slice(0, 50)}`
        );
    }
    allowsMarkType(e) {
      return this.markSet == null || this.markSet.indexOf(e) > -1;
    }
    allowsMarks(e) {
      if (this.markSet == null) return !0;
      for (let t = 0; t < e.length; t++)
        if (!this.allowsMarkType(e[t].type)) return !1;
      return !0;
    }
    allowedMarks(e) {
      if (this.markSet == null) return e;
      let t;
      for (let r = 0; r < e.length; r++)
        this.allowsMarkType(e[r].type)
          ? t && t.push(e[r])
          : t || (t = e.slice(0, r));
      return t ? (t.length ? t : ur.none) : e;
    }
    static compile(e, t) {
      let r = Object.create(null);
      e.forEach((n, u) => (r[n] = new i(n, t, u)));
      let o = t.spec.topNode || "doc";
      if (!r[o])
        throw new RangeError(
          "Schema is missing its top node type ('" + o + "')"
        );
      if (!r.text) throw new RangeError("Every schema needs a 'text' type");
      for (let n in r.text.attrs)
        throw new RangeError("The text node type should not have attributes");
      return r;
    }
  },
  wg = class {
    constructor(e) {
      (this.hasDefault = Object.prototype.hasOwnProperty.call(e, "default")),
        (this.default = e.default);
    }
    get isRequired() {
      return !this.hasDefault;
    }
  },
  Yh = class i {
    constructor(e, t, r, o) {
      (this.name = e),
        (this.rank = t),
        (this.schema = r),
        (this.spec = o),
        (this.attrs = A5(o.attrs)),
        (this.excluded = null);
      let n = T5(this.attrs);
      this.instance = n ? new ur(this, n) : null;
    }
    create(e = null) {
      return !e && this.instance
        ? this.instance
        : new ur(this, M5(this.attrs, e));
    }
    static compile(e, t) {
      let r = Object.create(null),
        o = 0;
      return e.forEach((n, u) => (r[n] = new i(n, o++, t, u))), r;
    }
    removeFromSet(e) {
      for (var t = 0; t < e.length; t++)
        e[t].type == this && ((e = e.slice(0, t).concat(e.slice(t + 1))), t--);
      return e;
    }
    isInSet(e) {
      for (let t = 0; t < e.length; t++) if (e[t].type == this) return e[t];
    }
    excludes(e) {
      return this.excluded.indexOf(e) > -1;
    }
  },
  C0 = class {
    constructor(e) {
      this.cached = Object.create(null);
      let t = (this.spec = {});
      for (let o in e) t[o] = e[o];
      (t.nodes = fg.from(e.nodes)),
        (t.marks = fg.from(e.marks || {})),
        (this.nodes = S0.compile(this.spec.nodes, this)),
        (this.marks = Yh.compile(this.spec.marks, this));
      let r = Object.create(null);
      for (let o in this.nodes) {
        if (o in this.marks)
          throw new RangeError(o + " can not be both a node and a mark");
        let n = this.nodes[o],
          u = n.spec.content || "",
          h = n.spec.marks;
        (n.contentMatch = r[u] || (r[u] = Oc.parse(u, this.nodes))),
          (n.inlineContent = n.contentMatch.inlineContent),
          (n.markSet =
            h == "_"
              ? null
              : h
              ? p5(this, h.split(" "))
              : h == "" || !n.inlineContent
              ? []
              : null);
      }
      for (let o in this.marks) {
        let n = this.marks[o],
          u = n.spec.excludes;
        n.excluded = u == null ? [n] : u == "" ? [] : p5(this, u.split(" "));
      }
      (this.nodeFromJSON = this.nodeFromJSON.bind(this)),
        (this.markFromJSON = this.markFromJSON.bind(this)),
        (this.topNodeType = this.nodes[this.spec.topNode || "doc"]),
        (this.cached.wrappings = Object.create(null));
    }
    node(e, t = null, r, o) {
      if (typeof e == "string") e = this.nodeType(e);
      else if (e instanceof S0) {
        if (e.schema != this)
          throw new RangeError(
            "Node type from different schema used (" + e.name + ")"
          );
      } else throw new RangeError("Invalid node type: " + e);
      return e.createChecked(t, r, o);
    }
    text(e, t) {
      let r = this.nodes.text;
      return new _g(r, r.defaultAttrs, e, ur.setFrom(t));
    }
    mark(e, t) {
      return typeof e == "string" && (e = this.marks[e]), e.create(t);
    }
    nodeFromJSON(e) {
      return ia.fromJSON(this, e);
    }
    markFromJSON(e) {
      return ur.fromJSON(this, e);
    }
    nodeType(e) {
      let t = this.nodes[e];
      if (!t) throw new RangeError("Unknown node type: " + e);
      return t;
    }
  };
function p5(i, e) {
  let t = [];
  for (let r = 0; r < e.length; r++) {
    let o = e[r],
      n = i.marks[o],
      u = n;
    if (n) t.push(n);
    else
      for (let h in i.marks) {
        let m = i.marks[h];
        (o == "_" ||
          (m.spec.group && m.spec.group.split(" ").indexOf(o) > -1)) &&
          t.push((u = m));
      }
    if (!u) throw new SyntaxError("Unknown mark type: '" + e[r] + "'");
  }
  return t;
}
function aC(i) {
  return i.tag != null;
}
function lC(i) {
  return i.style != null;
}
var Bc = class i {
    constructor(e, t) {
      (this.schema = e),
        (this.rules = t),
        (this.tags = []),
        (this.styles = []),
        t.forEach((r) => {
          aC(r) ? this.tags.push(r) : lC(r) && this.styles.push(r);
        }),
        (this.normalizeLists = !this.tags.some((r) => {
          if (!/^(ul|ol)\b/.test(r.tag) || !r.node) return !1;
          let o = e.nodes[r.node];
          return o.contentMatch.matchType(o);
        }));
    }
    parse(e, t = {}) {
      let r = new M0(this, t, !1);
      return r.addAll(e, t.from, t.to), r.finish();
    }
    parseSlice(e, t = {}) {
      let r = new M0(this, t, !0);
      return r.addAll(e, t.from, t.to), Ht.maxOpen(r.finish());
    }
    matchTag(e, t, r) {
      for (
        let o = r ? this.tags.indexOf(r) + 1 : 0;
        o < this.tags.length;
        o++
      ) {
        let n = this.tags[o];
        if (
          dC(e, n.tag) &&
          (n.namespace === void 0 || e.namespaceURI == n.namespace) &&
          (!n.context || t.matchesContext(n.context))
        ) {
          if (n.getAttrs) {
            let u = n.getAttrs(e);
            if (u === !1) continue;
            n.attrs = u || void 0;
          }
          return n;
        }
      }
    }
    matchStyle(e, t, r, o) {
      for (
        let n = o ? this.styles.indexOf(o) + 1 : 0;
        n < this.styles.length;
        n++
      ) {
        let u = this.styles[n],
          h = u.style;
        if (
          !(
            h.indexOf(e) != 0 ||
            (u.context && !r.matchesContext(u.context)) ||
            (h.length > e.length &&
              (h.charCodeAt(e.length) != 61 || h.slice(e.length + 1) != t))
          )
        ) {
          if (u.getAttrs) {
            let m = u.getAttrs(t);
            if (m === !1) continue;
            u.attrs = m || void 0;
          }
          return u;
        }
      }
    }
    static schemaRules(e) {
      let t = [];
      function r(o) {
        let n = o.priority == null ? 50 : o.priority,
          u = 0;
        for (; u < t.length; u++) {
          let h = t[u];
          if ((h.priority == null ? 50 : h.priority) < n) break;
        }
        t.splice(u, 0, o);
      }
      for (let o in e.marks) {
        let n = e.marks[o].spec.parseDOM;
        n &&
          n.forEach((u) => {
            r((u = m5(u))), u.mark || u.ignore || u.clearMark || (u.mark = o);
          });
      }
      for (let o in e.nodes) {
        let n = e.nodes[o].spec.parseDOM;
        n &&
          n.forEach((u) => {
            r((u = m5(u))), u.node || u.ignore || u.mark || (u.node = o);
          });
      }
      return t;
    }
    static fromSchema(e) {
      return (
        e.cached.domParser || (e.cached.domParser = new i(e, i.schemaRules(e)))
      );
    }
  },
  I5 = {
    address: !0,
    article: !0,
    aside: !0,
    blockquote: !0,
    canvas: !0,
    dd: !0,
    div: !0,
    dl: !0,
    fieldset: !0,
    figcaption: !0,
    figure: !0,
    footer: !0,
    form: !0,
    h1: !0,
    h2: !0,
    h3: !0,
    h4: !0,
    h5: !0,
    h6: !0,
    header: !0,
    hgroup: !0,
    hr: !0,
    li: !0,
    noscript: !0,
    ol: !0,
    output: !0,
    p: !0,
    pre: !0,
    section: !0,
    table: !0,
    tfoot: !0,
    ul: !0,
  },
  cC = { head: !0, noscript: !0, object: !0, script: !0, style: !0, title: !0 },
  P5 = { ol: !0, ul: !0 },
  E0 = 1,
  T0 = 2,
  Xh = 4;
function f5(i, e, t) {
  return e != null
    ? (e ? E0 : 0) | (e === "full" ? T0 : 0)
    : i && i.whitespace == "pre"
    ? E0 | T0
    : t & ~Xh;
}
var Ju = class {
    constructor(e, t, r, o, n, u, h) {
      (this.type = e),
        (this.attrs = t),
        (this.marks = r),
        (this.pendingMarks = o),
        (this.solid = n),
        (this.options = h),
        (this.content = []),
        (this.activeMarks = ur.none),
        (this.stashMarks = []),
        (this.match = u || (h & Xh ? null : e.contentMatch));
    }
    findWrapping(e) {
      if (!this.match) {
        if (!this.type) return [];
        let t = this.type.contentMatch.fillBefore(Ct.from(e));
        if (t) this.match = this.type.contentMatch.matchFragment(t);
        else {
          let r = this.type.contentMatch,
            o;
          return (o = r.findWrapping(e.type)) ? ((this.match = r), o) : null;
        }
      }
      return this.match.findWrapping(e.type);
    }
    finish(e) {
      if (!(this.options & E0)) {
        let r = this.content[this.content.length - 1],
          o;
        if (r && r.isText && (o = /[ \t\r\n\u000c]+$/.exec(r.text))) {
          let n = r;
          r.text.length == o[0].length
            ? this.content.pop()
            : (this.content[this.content.length - 1] = n.withText(
                n.text.slice(0, n.text.length - o[0].length)
              ));
        }
      }
      let t = Ct.from(this.content);
      return (
        !e && this.match && (t = t.append(this.match.fillBefore(Ct.empty, !0))),
        this.type ? this.type.create(this.attrs, t, this.marks) : t
      );
    }
    popFromStashMark(e) {
      for (let t = this.stashMarks.length - 1; t >= 0; t--)
        if (e.eq(this.stashMarks[t])) return this.stashMarks.splice(t, 1)[0];
    }
    applyPending(e) {
      for (let t = 0, r = this.pendingMarks; t < r.length; t++) {
        let o = r[t];
        (this.type ? this.type.allowsMarkType(o.type) : pC(o.type, e)) &&
          !o.isInSet(this.activeMarks) &&
          ((this.activeMarks = o.addToSet(this.activeMarks)),
          (this.pendingMarks = o.removeFromSet(this.pendingMarks)));
      }
    }
    inlineContext(e) {
      return this.type
        ? this.type.inlineContent
        : this.content.length
        ? this.content[0].isInline
        : e.parentNode &&
          !I5.hasOwnProperty(e.parentNode.nodeName.toLowerCase());
    }
  },
  M0 = class {
    constructor(e, t, r) {
      (this.parser = e), (this.options = t), (this.isOpen = r), (this.open = 0);
      let o = t.topNode,
        n,
        u = f5(null, t.preserveWhitespace, 0) | (r ? Xh : 0);
      o
        ? (n = new Ju(
            o.type,
            o.attrs,
            ur.none,
            ur.none,
            !0,
            t.topMatch || o.type.contentMatch,
            u
          ))
        : r
        ? (n = new Ju(null, null, ur.none, ur.none, !0, null, u))
        : (n = new Ju(
            e.schema.topNodeType,
            null,
            ur.none,
            ur.none,
            !0,
            null,
            u
          )),
        (this.nodes = [n]),
        (this.find = t.findPositions),
        (this.needsBlock = !1);
    }
    get top() {
      return this.nodes[this.open];
    }
    addDOM(e) {
      e.nodeType == 3
        ? this.addTextNode(e)
        : e.nodeType == 1 && this.addElement(e);
    }
    withStyleRules(e, t) {
      let r = e.getAttribute("style");
      if (!r) return t();
      let o = this.readStyles(hC(r));
      if (!o) return;
      let [n, u] = o,
        h = this.top;
      for (let m = 0; m < u.length; m++) this.removePendingMark(u[m], h);
      for (let m = 0; m < n.length; m++) this.addPendingMark(n[m]);
      t();
      for (let m = 0; m < n.length; m++) this.removePendingMark(n[m], h);
      for (let m = 0; m < u.length; m++) this.addPendingMark(u[m]);
    }
    addTextNode(e) {
      let t = e.nodeValue,
        r = this.top;
      if (r.options & T0 || r.inlineContext(e) || /[^ \t\r\n\u000c]/.test(t)) {
        if (r.options & E0)
          r.options & T0
            ? (t = t.replace(
                /\r\n?/g,
                `
`
              ))
            : (t = t.replace(/\r?\n|\r/g, " "));
        else if (
          ((t = t.replace(/[ \t\r\n\u000c]+/g, " ")),
          /^[ \t\r\n\u000c]/.test(t) && this.open == this.nodes.length - 1)
        ) {
          let o = r.content[r.content.length - 1],
            n = e.previousSibling;
          (!o ||
            (n && n.nodeName == "BR") ||
            (o.isText && /[ \t\r\n\u000c]$/.test(o.text))) &&
            (t = t.slice(1));
        }
        t && this.insertNode(this.parser.schema.text(t)), this.findInText(e);
      } else this.findInside(e);
    }
    addElement(e, t) {
      let r = e.nodeName.toLowerCase(),
        o;
      P5.hasOwnProperty(r) && this.parser.normalizeLists && uC(e);
      let n =
        (this.options.ruleFromNode && this.options.ruleFromNode(e)) ||
        (o = this.parser.matchTag(e, this, t));
      if (n ? n.ignore : cC.hasOwnProperty(r))
        this.findInside(e), this.ignoreFallback(e);
      else if (!n || n.skip || n.closeParent) {
        n && n.closeParent
          ? (this.open = Math.max(0, this.open - 1))
          : n && n.skip.nodeType && (e = n.skip);
        let u,
          h = this.top,
          m = this.needsBlock;
        if (I5.hasOwnProperty(r))
          h.content.length &&
            h.content[0].isInline &&
            this.open &&
            (this.open--, (h = this.top)),
            (u = !0),
            h.type || (this.needsBlock = !0);
        else if (!e.firstChild) {
          this.leafFallback(e);
          return;
        }
        n && n.skip
          ? this.addAll(e)
          : this.withStyleRules(e, () => this.addAll(e)),
          u && this.sync(h),
          (this.needsBlock = m);
      } else
        this.withStyleRules(e, () => {
          this.addElementByRule(e, n, n.consuming === !1 ? o : void 0);
        });
    }
    leafFallback(e) {
      e.nodeName == "BR" &&
        this.top.type &&
        this.top.type.inlineContent &&
        this.addTextNode(
          e.ownerDocument.createTextNode(`
`)
        );
    }
    ignoreFallback(e) {
      e.nodeName == "BR" &&
        (!this.top.type || !this.top.type.inlineContent) &&
        this.findPlace(this.parser.schema.text("-"));
    }
    readStyles(e) {
      let t = ur.none,
        r = ur.none;
      for (let o = 0; o < e.length; o += 2)
        for (let n = void 0; ; ) {
          let u = this.parser.matchStyle(e[o], e[o + 1], this, n);
          if (!u) break;
          if (u.ignore) return null;
          if (
            (u.clearMark
              ? this.top.pendingMarks
                  .concat(this.top.activeMarks)
                  .forEach((h) => {
                    u.clearMark(h) && (r = h.addToSet(r));
                  })
              : (t = this.parser.schema.marks[u.mark]
                  .create(u.attrs)
                  .addToSet(t)),
            u.consuming === !1)
          )
            n = u;
          else break;
        }
      return [t, r];
    }
    addElementByRule(e, t, r) {
      let o, n, u;
      t.node
        ? ((n = this.parser.schema.nodes[t.node]),
          n.isLeaf
            ? this.insertNode(n.create(t.attrs)) || this.leafFallback(e)
            : (o = this.enter(n, t.attrs || null, t.preserveWhitespace)))
        : ((u = this.parser.schema.marks[t.mark].create(t.attrs)),
          this.addPendingMark(u));
      let h = this.top;
      if (n && n.isLeaf) this.findInside(e);
      else if (r) this.addElement(e, r);
      else if (t.getContent)
        this.findInside(e),
          t
            .getContent(e, this.parser.schema)
            .forEach((m) => this.insertNode(m));
      else {
        let m = e;
        typeof t.contentElement == "string"
          ? (m = e.querySelector(t.contentElement))
          : typeof t.contentElement == "function"
          ? (m = t.contentElement(e))
          : t.contentElement && (m = t.contentElement),
          this.findAround(e, m, !0),
          this.addAll(m);
      }
      o && this.sync(h) && this.open--, u && this.removePendingMark(u, h);
    }
    addAll(e, t, r) {
      let o = t || 0;
      for (
        let n = t ? e.childNodes[t] : e.firstChild,
          u = r == null ? null : e.childNodes[r];
        n != u;
        n = n.nextSibling, ++o
      )
        this.findAtPoint(e, o), this.addDOM(n);
      this.findAtPoint(e, o);
    }
    findPlace(e) {
      let t, r;
      for (let o = this.open; o >= 0; o--) {
        let n = this.nodes[o],
          u = n.findWrapping(e);
        if (
          (u && (!t || t.length > u.length) && ((t = u), (r = n), !u.length)) ||
          n.solid
        )
          break;
      }
      if (!t) return !1;
      this.sync(r);
      for (let o = 0; o < t.length; o++) this.enterInner(t[o], null, !1);
      return !0;
    }
    insertNode(e) {
      if (e.isInline && this.needsBlock && !this.top.type) {
        let t = this.textblockFromContext();
        t && this.enterInner(t);
      }
      if (this.findPlace(e)) {
        this.closeExtra();
        let t = this.top;
        t.applyPending(e.type),
          t.match && (t.match = t.match.matchType(e.type));
        let r = t.activeMarks;
        for (let o = 0; o < e.marks.length; o++)
          (!t.type || t.type.allowsMarkType(e.marks[o].type)) &&
            (r = e.marks[o].addToSet(r));
        return t.content.push(e.mark(r)), !0;
      }
      return !1;
    }
    enter(e, t, r) {
      let o = this.findPlace(e.create(t));
      return o && this.enterInner(e, t, !0, r), o;
    }
    enterInner(e, t = null, r = !1, o) {
      this.closeExtra();
      let n = this.top;
      n.applyPending(e), (n.match = n.match && n.match.matchType(e));
      let u = f5(e, o, n.options);
      n.options & Xh && n.content.length == 0 && (u |= Xh),
        this.nodes.push(
          new Ju(e, t, n.activeMarks, n.pendingMarks, r, null, u)
        ),
        this.open++;
    }
    closeExtra(e = !1) {
      let t = this.nodes.length - 1;
      if (t > this.open) {
        for (; t > this.open; t--)
          this.nodes[t - 1].content.push(this.nodes[t].finish(e));
        this.nodes.length = this.open + 1;
      }
    }
    finish() {
      return (
        (this.open = 0),
        this.closeExtra(this.isOpen),
        this.nodes[0].finish(this.isOpen || this.options.topOpen)
      );
    }
    sync(e) {
      for (let t = this.open; t >= 0; t--)
        if (this.nodes[t] == e) return (this.open = t), !0;
      return !1;
    }
    get currentPos() {
      this.closeExtra();
      let e = 0;
      for (let t = this.open; t >= 0; t--) {
        let r = this.nodes[t].content;
        for (let o = r.length - 1; o >= 0; o--) e += r[o].nodeSize;
        t && e++;
      }
      return e;
    }
    findAtPoint(e, t) {
      if (this.find)
        for (let r = 0; r < this.find.length; r++)
          this.find[r].node == e &&
            this.find[r].offset == t &&
            (this.find[r].pos = this.currentPos);
    }
    findInside(e) {
      if (this.find)
        for (let t = 0; t < this.find.length; t++)
          this.find[t].pos == null &&
            e.nodeType == 1 &&
            e.contains(this.find[t].node) &&
            (this.find[t].pos = this.currentPos);
    }
    findAround(e, t, r) {
      if (e != t && this.find)
        for (let o = 0; o < this.find.length; o++)
          this.find[o].pos == null &&
            e.nodeType == 1 &&
            e.contains(this.find[o].node) &&
            t.compareDocumentPosition(this.find[o].node) & (r ? 2 : 4) &&
            (this.find[o].pos = this.currentPos);
    }
    findInText(e) {
      if (this.find)
        for (let t = 0; t < this.find.length; t++)
          this.find[t].node == e &&
            (this.find[t].pos =
              this.currentPos - (e.nodeValue.length - this.find[t].offset));
    }
    matchesContext(e) {
      if (e.indexOf("|") > -1)
        return e.split(/\s*\|\s*/).some(this.matchesContext, this);
      let t = e.split("/"),
        r = this.options.context,
        o = !this.isOpen && (!r || r.parent.type == this.nodes[0].type),
        n = -(r ? r.depth + 1 : 0) + (o ? 0 : 1),
        u = (h, m) => {
          for (; h >= 0; h--) {
            let b = t[h];
            if (b == "") {
              if (h == t.length - 1 || h == 0) continue;
              for (; m >= n; m--) if (u(h - 1, m)) return !0;
              return !1;
            } else {
              let _ =
                m > 0 || (m == 0 && o)
                  ? this.nodes[m].type
                  : r && m >= n
                  ? r.node(m - n).type
                  : null;
              if (!_ || (_.name != b && _.groups.indexOf(b) == -1)) return !1;
              m--;
            }
          }
          return !0;
        };
      return u(t.length - 1, this.open);
    }
    textblockFromContext() {
      let e = this.options.context;
      if (e)
        for (let t = e.depth; t >= 0; t--) {
          let r = e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;
          if (r && r.isTextblock && r.defaultAttrs) return r;
        }
      for (let t in this.parser.schema.nodes) {
        let r = this.parser.schema.nodes[t];
        if (r.isTextblock && r.defaultAttrs) return r;
      }
    }
    addPendingMark(e) {
      let t = fC(e, this.top.pendingMarks);
      t && this.top.stashMarks.push(t),
        (this.top.pendingMarks = e.addToSet(this.top.pendingMarks));
    }
    removePendingMark(e, t) {
      for (let r = this.open; r >= 0; r--) {
        let o = this.nodes[r];
        if (o.pendingMarks.lastIndexOf(e) > -1)
          o.pendingMarks = e.removeFromSet(o.pendingMarks);
        else {
          o.activeMarks = e.removeFromSet(o.activeMarks);
          let u = o.popFromStashMark(e);
          u &&
            o.type &&
            o.type.allowsMarkType(u.type) &&
            (o.activeMarks = u.addToSet(o.activeMarks));
        }
        if (o == t) break;
      }
    }
  };
function uC(i) {
  for (let e = i.firstChild, t = null; e; e = e.nextSibling) {
    let r = e.nodeType == 1 ? e.nodeName.toLowerCase() : null;
    r && P5.hasOwnProperty(r) && t
      ? (t.appendChild(e), (e = t))
      : r == "li"
      ? (t = e)
      : r && (t = null);
  }
}
function dC(i, e) {
  return (
    i.matches ||
    i.msMatchesSelector ||
    i.webkitMatchesSelector ||
    i.mozMatchesSelector
  ).call(i, e);
}
function hC(i) {
  let e = /\s*([\w-]+)\s*:\s*([^;]+)/g,
    t,
    r = [];
  for (; (t = e.exec(i)); ) r.push(t[1], t[2].trim());
  return r;
}
function m5(i) {
  let e = {};
  for (let t in i) e[t] = i[t];
  return e;
}
function pC(i, e) {
  let t = e.schema.nodes;
  for (let r in t) {
    let o = t[r];
    if (!o.allowsMarkType(i)) continue;
    let n = [],
      u = (h) => {
        n.push(h);
        for (let m = 0; m < h.edgeCount; m++) {
          let { type: b, next: _ } = h.edge(m);
          if (b == e || (n.indexOf(_) < 0 && u(_))) return !0;
        }
      };
    if (u(o.contentMatch)) return !0;
  }
}
function fC(i, e) {
  for (let t = 0; t < e.length; t++) if (i.eq(e[t])) return e[t];
}
var Ja = class i {
  constructor(e, t) {
    (this.nodes = e), (this.marks = t);
  }
  serializeFragment(e, t = {}, r) {
    r || (r = bg(t).createDocumentFragment());
    let o = r,
      n = [];
    return (
      e.forEach((u) => {
        if (n.length || u.marks.length) {
          let h = 0,
            m = 0;
          for (; h < n.length && m < u.marks.length; ) {
            let b = u.marks[m];
            if (!this.marks[b.type.name]) {
              m++;
              continue;
            }
            if (!b.eq(n[h][0]) || b.type.spec.spanning === !1) break;
            h++, m++;
          }
          for (; h < n.length; ) o = n.pop()[1];
          for (; m < u.marks.length; ) {
            let b = u.marks[m++],
              _ = this.serializeMark(b, u.isInline, t);
            _ &&
              (n.push([b, o]),
              o.appendChild(_.dom),
              (o = _.contentDOM || _.dom));
          }
        }
        o.appendChild(this.serializeNodeInner(u, t));
      }),
      r
    );
  }
  serializeNodeInner(e, t) {
    let { dom: r, contentDOM: o } = i.renderSpec(
      bg(t),
      this.nodes[e.type.name](e)
    );
    if (o) {
      if (e.isLeaf)
        throw new RangeError("Content hole not allowed in a leaf node spec");
      this.serializeFragment(e.content, t, o);
    }
    return r;
  }
  serializeNode(e, t = {}) {
    let r = this.serializeNodeInner(e, t);
    for (let o = e.marks.length - 1; o >= 0; o--) {
      let n = this.serializeMark(e.marks[o], e.isInline, t);
      n && ((n.contentDOM || n.dom).appendChild(r), (r = n.dom));
    }
    return r;
  }
  serializeMark(e, t, r = {}) {
    let o = this.marks[e.type.name];
    return o && i.renderSpec(bg(r), o(e, t));
  }
  static renderSpec(e, t, r = null) {
    if (typeof t == "string") return { dom: e.createTextNode(t) };
    if (t.nodeType != null) return { dom: t };
    if (t.dom && t.dom.nodeType != null) return t;
    let o = t[0],
      n = o.indexOf(" ");
    n > 0 && ((r = o.slice(0, n)), (o = o.slice(n + 1)));
    let u,
      h = r ? e.createElementNS(r, o) : e.createElement(o),
      m = t[1],
      b = 1;
    if (m && typeof m == "object" && m.nodeType == null && !Array.isArray(m)) {
      b = 2;
      for (let _ in m)
        if (m[_] != null) {
          let S = _.indexOf(" ");
          S > 0
            ? h.setAttributeNS(_.slice(0, S), _.slice(S + 1), m[_])
            : h.setAttribute(_, m[_]);
        }
    }
    for (let _ = b; _ < t.length; _++) {
      let S = t[_];
      if (S === 0) {
        if (_ < t.length - 1 || _ > b)
          throw new RangeError(
            "Content hole must be the only child of its parent node"
          );
        return { dom: h, contentDOM: h };
      } else {
        let { dom: T, contentDOM: D } = i.renderSpec(e, S, r);
        if ((h.appendChild(T), D)) {
          if (u) throw new RangeError("Multiple content holes");
          u = D;
        }
      }
    }
    return { dom: h, contentDOM: u };
  }
  static fromSchema(e) {
    return (
      e.cached.domSerializer ||
      (e.cached.domSerializer = new i(
        this.nodesFromSchema(e),
        this.marksFromSchema(e)
      ))
    );
  }
  static nodesFromSchema(e) {
    let t = g5(e.nodes);
    return t.text || (t.text = (r) => r.text), t;
  }
  static marksFromSchema(e) {
    return g5(e.marks);
  }
};
function g5(i) {
  let e = {};
  for (let t in i) {
    let r = i[t].spec.toDOM;
    r && (e[t] = r);
  }
  return e;
}
function bg(i) {
  return i.document || window.document;
}
var F5 = 65535,
  z5 = Math.pow(2, 16);
function mC(i, e) {
  return i + e * z5;
}
function D5(i) {
  return i & F5;
}
function gC(i) {
  return (i - (i & F5)) / z5;
}
var N5 = 1,
  O5 = 2,
  A0 = 4,
  B5 = 8,
  ip = class {
    constructor(e, t, r) {
      (this.pos = e), (this.delInfo = t), (this.recover = r);
    }
    get deleted() {
      return (this.delInfo & B5) > 0;
    }
    get deletedBefore() {
      return (this.delInfo & (N5 | A0)) > 0;
    }
    get deletedAfter() {
      return (this.delInfo & (O5 | A0)) > 0;
    }
    get deletedAcross() {
      return (this.delInfo & A0) > 0;
    }
  },
  Xa = class i {
    constructor(e, t = !1) {
      if (((this.ranges = e), (this.inverted = t), !e.length && i.empty))
        return i.empty;
    }
    recover(e) {
      let t = 0,
        r = D5(e);
      if (!this.inverted)
        for (let o = 0; o < r; o++)
          t += this.ranges[o * 3 + 2] - this.ranges[o * 3 + 1];
      return this.ranges[r * 3] + t + gC(e);
    }
    mapResult(e, t = 1) {
      return this._map(e, t, !1);
    }
    map(e, t = 1) {
      return this._map(e, t, !0);
    }
    _map(e, t, r) {
      let o = 0,
        n = this.inverted ? 2 : 1,
        u = this.inverted ? 1 : 2;
      for (let h = 0; h < this.ranges.length; h += 3) {
        let m = this.ranges[h] - (this.inverted ? o : 0);
        if (m > e) break;
        let b = this.ranges[h + n],
          _ = this.ranges[h + u],
          S = m + b;
        if (e <= S) {
          let T = b ? (e == m ? -1 : e == S ? 1 : t) : t,
            D = m + o + (T < 0 ? 0 : _);
          if (r) return D;
          let F = e == (t < 0 ? m : S) ? null : mC(h / 3, e - m),
            q = e == m ? O5 : e == S ? N5 : A0;
          return (t < 0 ? e != m : e != S) && (q |= B5), new ip(D, q, F);
        }
        o += _ - b;
      }
      return r ? e + o : new ip(e + o, 0, null);
    }
    touches(e, t) {
      let r = 0,
        o = D5(t),
        n = this.inverted ? 2 : 1,
        u = this.inverted ? 1 : 2;
      for (let h = 0; h < this.ranges.length; h += 3) {
        let m = this.ranges[h] - (this.inverted ? r : 0);
        if (m > e) break;
        let b = this.ranges[h + n],
          _ = m + b;
        if (e <= _ && h == o * 3) return !0;
        r += this.ranges[h + u] - b;
      }
      return !1;
    }
    forEach(e) {
      let t = this.inverted ? 2 : 1,
        r = this.inverted ? 1 : 2;
      for (let o = 0, n = 0; o < this.ranges.length; o += 3) {
        let u = this.ranges[o],
          h = u - (this.inverted ? n : 0),
          m = u + (this.inverted ? 0 : n),
          b = this.ranges[o + t],
          _ = this.ranges[o + r];
        e(h, h + b, m, m + _), (n += _ - b);
      }
    }
    invert() {
      return new i(this.ranges, !this.inverted);
    }
    toString() {
      return (this.inverted ? "-" : "") + JSON.stringify(this.ranges);
    }
    static offset(e) {
      return e == 0 ? i.empty : new i(e < 0 ? [0, -e, 0] : [0, 0, e]);
    }
  };
Xa.empty = new Xa([]);
var rp = class i {
    constructor(e = [], t, r = 0, o = e.length) {
      (this.maps = e), (this.mirror = t), (this.from = r), (this.to = o);
    }
    slice(e = 0, t = this.maps.length) {
      return new i(this.maps, this.mirror, e, t);
    }
    copy() {
      return new i(
        this.maps.slice(),
        this.mirror && this.mirror.slice(),
        this.from,
        this.to
      );
    }
    appendMap(e, t) {
      (this.to = this.maps.push(e)),
        t != null && this.setMirror(this.maps.length - 1, t);
    }
    appendMapping(e) {
      for (let t = 0, r = this.maps.length; t < e.maps.length; t++) {
        let o = e.getMirror(t);
        this.appendMap(e.maps[t], o != null && o < t ? r + o : void 0);
      }
    }
    getMirror(e) {
      if (this.mirror) {
        for (let t = 0; t < this.mirror.length; t++)
          if (this.mirror[t] == e) return this.mirror[t + (t % 2 ? -1 : 1)];
      }
    }
    setMirror(e, t) {
      this.mirror || (this.mirror = []), this.mirror.push(e, t);
    }
    appendMappingInverted(e) {
      for (
        let t = e.maps.length - 1, r = this.maps.length + e.maps.length;
        t >= 0;
        t--
      ) {
        let o = e.getMirror(t);
        this.appendMap(
          e.maps[t].invert(),
          o != null && o > t ? r - o - 1 : void 0
        );
      }
    }
    invert() {
      let e = new i();
      return e.appendMappingInverted(this), e;
    }
    map(e, t = 1) {
      if (this.mirror) return this._map(e, t, !0);
      for (let r = this.from; r < this.to; r++) e = this.maps[r].map(e, t);
      return e;
    }
    mapResult(e, t = 1) {
      return this._map(e, t, !1);
    }
    _map(e, t, r) {
      let o = 0;
      for (let n = this.from; n < this.to; n++) {
        let u = this.maps[n],
          h = u.mapResult(e, t);
        if (h.recover != null) {
          let m = this.getMirror(n);
          if (m != null && m > n && m < this.to) {
            (n = m), (e = this.maps[m].recover(h.recover));
            continue;
          }
        }
        (o |= h.delInfo), (e = h.pos);
      }
      return r ? e : new ip(e, o, null);
    }
  },
  kg = Object.create(null),
  ro = class {
    getMap() {
      return Xa.empty;
    }
    merge(e) {
      return null;
    }
    static fromJSON(e, t) {
      if (!t || !t.stepType)
        throw new RangeError("Invalid input for Step.fromJSON");
      let r = kg[t.stepType];
      if (!r) throw new RangeError(`No step type ${t.stepType} defined`);
      return r.fromJSON(e, t);
    }
    static jsonID(e, t) {
      if (e in kg) throw new RangeError("Duplicate use of step JSON ID " + e);
      return (kg[e] = t), (t.prototype.jsonID = e), t;
    }
  },
  bo = class i {
    constructor(e, t) {
      (this.doc = e), (this.failed = t);
    }
    static ok(e) {
      return new i(e, null);
    }
    static fail(e) {
      return new i(null, e);
    }
    static fromReplace(e, t, r, o) {
      try {
        return i.ok(e.replace(t, r, o));
      } catch (n) {
        if (n instanceof zc) return i.fail(n.message);
        throw n;
      }
    }
  };
function Mg(i, e, t) {
  let r = [];
  for (let o = 0; o < i.childCount; o++) {
    let n = i.child(o);
    n.content.size && (n = n.copy(Mg(n.content, e, n))),
      n.isInline && (n = e(n, t, o)),
      r.push(n);
  }
  return Ct.fromArray(r);
}
var np = class i extends ro {
  constructor(e, t, r) {
    super(), (this.from = e), (this.to = t), (this.mark = r);
  }
  apply(e) {
    let t = e.slice(this.from, this.to),
      r = e.resolve(this.from),
      o = r.node(r.sharedDepth(this.to)),
      n = new Ht(
        Mg(
          t.content,
          (u, h) =>
            !u.isAtom || !h.type.allowsMarkType(this.mark.type)
              ? u
              : u.mark(this.mark.addToSet(u.marks)),
          o
        ),
        t.openStart,
        t.openEnd
      );
    return bo.fromReplace(e, this.from, this.to, n);
  }
  invert() {
    return new Rc(this.from, this.to, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1);
    return (t.deleted && r.deleted) || t.pos >= r.pos
      ? null
      : new i(t.pos, r.pos, this.mark);
  }
  merge(e) {
    return e instanceof i &&
      e.mark.eq(this.mark) &&
      this.from <= e.to &&
      this.to >= e.from
      ? new i(Math.min(this.from, e.from), Math.max(this.to, e.to), this.mark)
      : null;
  }
  toJSON() {
    return {
      stepType: "addMark",
      mark: this.mark.toJSON(),
      from: this.from,
      to: this.to,
    };
  }
  static fromJSON(e, t) {
    if (typeof t.from != "number" || typeof t.to != "number")
      throw new RangeError("Invalid input for AddMarkStep.fromJSON");
    return new i(t.from, t.to, e.markFromJSON(t.mark));
  }
};
ro.jsonID("addMark", np);
var Rc = class i extends ro {
  constructor(e, t, r) {
    super(), (this.from = e), (this.to = t), (this.mark = r);
  }
  apply(e) {
    let t = e.slice(this.from, this.to),
      r = new Ht(
        Mg(t.content, (o) => o.mark(this.mark.removeFromSet(o.marks)), e),
        t.openStart,
        t.openEnd
      );
    return bo.fromReplace(e, this.from, this.to, r);
  }
  invert() {
    return new np(this.from, this.to, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1);
    return (t.deleted && r.deleted) || t.pos >= r.pos
      ? null
      : new i(t.pos, r.pos, this.mark);
  }
  merge(e) {
    return e instanceof i &&
      e.mark.eq(this.mark) &&
      this.from <= e.to &&
      this.to >= e.from
      ? new i(Math.min(this.from, e.from), Math.max(this.to, e.to), this.mark)
      : null;
  }
  toJSON() {
    return {
      stepType: "removeMark",
      mark: this.mark.toJSON(),
      from: this.from,
      to: this.to,
    };
  }
  static fromJSON(e, t) {
    if (typeof t.from != "number" || typeof t.to != "number")
      throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");
    return new i(t.from, t.to, e.markFromJSON(t.mark));
  }
};
ro.jsonID("removeMark", Rc);
var op = class i extends ro {
  constructor(e, t) {
    super(), (this.pos = e), (this.mark = t);
  }
  apply(e) {
    let t = e.nodeAt(this.pos);
    if (!t) return bo.fail("No node at mark step's position");
    let r = t.type.create(t.attrs, null, this.mark.addToSet(t.marks));
    return bo.fromReplace(
      e,
      this.pos,
      this.pos + 1,
      new Ht(Ct.from(r), 0, t.isLeaf ? 0 : 1)
    );
  }
  invert(e) {
    let t = e.nodeAt(this.pos);
    if (t) {
      let r = this.mark.addToSet(t.marks);
      if (r.length == t.marks.length) {
        for (let o = 0; o < t.marks.length; o++)
          if (!t.marks[o].isInSet(r)) return new i(this.pos, t.marks[o]);
        return new i(this.pos, this.mark);
      }
    }
    return new sp(this.pos, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.pos, 1);
    return t.deletedAfter ? null : new i(t.pos, this.mark);
  }
  toJSON() {
    return { stepType: "addNodeMark", pos: this.pos, mark: this.mark.toJSON() };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number")
      throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");
    return new i(t.pos, e.markFromJSON(t.mark));
  }
};
ro.jsonID("addNodeMark", op);
var sp = class i extends ro {
  constructor(e, t) {
    super(), (this.pos = e), (this.mark = t);
  }
  apply(e) {
    let t = e.nodeAt(this.pos);
    if (!t) return bo.fail("No node at mark step's position");
    let r = t.type.create(t.attrs, null, this.mark.removeFromSet(t.marks));
    return bo.fromReplace(
      e,
      this.pos,
      this.pos + 1,
      new Ht(Ct.from(r), 0, t.isLeaf ? 0 : 1)
    );
  }
  invert(e) {
    let t = e.nodeAt(this.pos);
    return !t || !this.mark.isInSet(t.marks)
      ? this
      : new op(this.pos, this.mark);
  }
  map(e) {
    let t = e.mapResult(this.pos, 1);
    return t.deletedAfter ? null : new i(t.pos, this.mark);
  }
  toJSON() {
    return {
      stepType: "removeNodeMark",
      pos: this.pos,
      mark: this.mark.toJSON(),
    };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number")
      throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");
    return new i(t.pos, e.markFromJSON(t.mark));
  }
};
ro.jsonID("removeNodeMark", sp);
var Oo = class i extends ro {
  constructor(e, t, r, o = !1) {
    super(),
      (this.from = e),
      (this.to = t),
      (this.slice = r),
      (this.structure = o);
  }
  apply(e) {
    return this.structure && Eg(e, this.from, this.to)
      ? bo.fail("Structure replace would overwrite content")
      : bo.fromReplace(e, this.from, this.to, this.slice);
  }
  getMap() {
    return new Xa([this.from, this.to - this.from, this.slice.size]);
  }
  invert(e) {
    return new i(
      this.from,
      this.from + this.slice.size,
      e.slice(this.from, this.to)
    );
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1);
    return t.deletedAcross && r.deletedAcross
      ? null
      : new i(t.pos, Math.max(t.pos, r.pos), this.slice);
  }
  merge(e) {
    if (!(e instanceof i) || e.structure || this.structure) return null;
    if (
      this.from + this.slice.size == e.from &&
      !this.slice.openEnd &&
      !e.slice.openStart
    ) {
      let t =
        this.slice.size + e.slice.size == 0
          ? Ht.empty
          : new Ht(
              this.slice.content.append(e.slice.content),
              this.slice.openStart,
              e.slice.openEnd
            );
      return new i(this.from, this.to + (e.to - e.from), t, this.structure);
    } else if (e.to == this.from && !this.slice.openStart && !e.slice.openEnd) {
      let t =
        this.slice.size + e.slice.size == 0
          ? Ht.empty
          : new Ht(
              e.slice.content.append(this.slice.content),
              e.slice.openStart,
              this.slice.openEnd
            );
      return new i(e.from, this.to, t, this.structure);
    } else return null;
  }
  toJSON() {
    let e = { stepType: "replace", from: this.from, to: this.to };
    return (
      this.slice.size && (e.slice = this.slice.toJSON()),
      this.structure && (e.structure = !0),
      e
    );
  }
  static fromJSON(e, t) {
    if (typeof t.from != "number" || typeof t.to != "number")
      throw new RangeError("Invalid input for ReplaceStep.fromJSON");
    return new i(t.from, t.to, Ht.fromJSON(e, t.slice), !!t.structure);
  }
};
ro.jsonID("replace", Oo);
var Bn = class i extends ro {
  constructor(e, t, r, o, n, u, h = !1) {
    super(),
      (this.from = e),
      (this.to = t),
      (this.gapFrom = r),
      (this.gapTo = o),
      (this.slice = n),
      (this.insert = u),
      (this.structure = h);
  }
  apply(e) {
    if (
      this.structure &&
      (Eg(e, this.from, this.gapFrom) || Eg(e, this.gapTo, this.to))
    )
      return bo.fail("Structure gap-replace would overwrite content");
    let t = e.slice(this.gapFrom, this.gapTo);
    if (t.openStart || t.openEnd) return bo.fail("Gap is not a flat range");
    let r = this.slice.insertAt(this.insert, t.content);
    return r
      ? bo.fromReplace(e, this.from, this.to, r)
      : bo.fail("Content does not fit in gap");
  }
  getMap() {
    return new Xa([
      this.from,
      this.gapFrom - this.from,
      this.insert,
      this.gapTo,
      this.to - this.gapTo,
      this.slice.size - this.insert,
    ]);
  }
  invert(e) {
    let t = this.gapTo - this.gapFrom;
    return new i(
      this.from,
      this.from + this.slice.size + t,
      this.from + this.insert,
      this.from + this.insert + t,
      e
        .slice(this.from, this.to)
        .removeBetween(this.gapFrom - this.from, this.gapTo - this.from),
      this.gapFrom - this.from,
      this.structure
    );
  }
  map(e) {
    let t = e.mapResult(this.from, 1),
      r = e.mapResult(this.to, -1),
      o = e.map(this.gapFrom, -1),
      n = e.map(this.gapTo, 1);
    return (t.deletedAcross && r.deletedAcross) || o < t.pos || n > r.pos
      ? null
      : new i(t.pos, r.pos, o, n, this.slice, this.insert, this.structure);
  }
  toJSON() {
    let e = {
      stepType: "replaceAround",
      from: this.from,
      to: this.to,
      gapFrom: this.gapFrom,
      gapTo: this.gapTo,
      insert: this.insert,
    };
    return (
      this.slice.size && (e.slice = this.slice.toJSON()),
      this.structure && (e.structure = !0),
      e
    );
  }
  static fromJSON(e, t) {
    if (
      typeof t.from != "number" ||
      typeof t.to != "number" ||
      typeof t.gapFrom != "number" ||
      typeof t.gapTo != "number" ||
      typeof t.insert != "number"
    )
      throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");
    return new i(
      t.from,
      t.to,
      t.gapFrom,
      t.gapTo,
      Ht.fromJSON(e, t.slice),
      t.insert,
      !!t.structure
    );
  }
};
ro.jsonID("replaceAround", Bn);
function Eg(i, e, t) {
  let r = i.resolve(e),
    o = t - e,
    n = r.depth;
  for (; o > 0 && n > 0 && r.indexAfter(n) == r.node(n).childCount; ) n--, o--;
  if (o > 0) {
    let u = r.node(n).maybeChild(r.indexAfter(n));
    for (; o > 0; ) {
      if (!u || u.isLeaf) return !0;
      (u = u.firstChild), o--;
    }
  }
  return !1;
}
function yC(i, e, t, r) {
  let o = [],
    n = [],
    u,
    h;
  i.doc.nodesBetween(e, t, (m, b, _) => {
    if (!m.isInline) return;
    let S = m.marks;
    if (!r.isInSet(S) && _.type.allowsMarkType(r.type)) {
      let T = Math.max(b, e),
        D = Math.min(b + m.nodeSize, t),
        F = r.addToSet(S);
      for (let q = 0; q < S.length; q++)
        S[q].isInSet(F) ||
          (u && u.to == T && u.mark.eq(S[q])
            ? (u.to = D)
            : o.push((u = new Rc(T, D, S[q]))));
      h && h.to == T ? (h.to = D) : n.push((h = new np(T, D, r)));
    }
  }),
    o.forEach((m) => i.step(m)),
    n.forEach((m) => i.step(m));
}
function bC(i, e, t, r) {
  let o = [],
    n = 0;
  i.doc.nodesBetween(e, t, (u, h) => {
    if (!u.isInline) return;
    n++;
    let m = null;
    if (r instanceof Yh) {
      let b = u.marks,
        _;
      for (; (_ = r.isInSet(b)); )
        (m || (m = [])).push(_), (b = _.removeFromSet(b));
    } else r ? r.isInSet(u.marks) && (m = [r]) : (m = u.marks);
    if (m && m.length) {
      let b = Math.min(h + u.nodeSize, t);
      for (let _ = 0; _ < m.length; _++) {
        let S = m[_],
          T;
        for (let D = 0; D < o.length; D++) {
          let F = o[D];
          F.step == n - 1 && S.eq(o[D].style) && (T = F);
        }
        T
          ? ((T.to = b), (T.step = n))
          : o.push({ style: S, from: Math.max(h, e), to: b, step: n });
      }
    }
  }),
    o.forEach((u) => i.step(new Rc(u.from, u.to, u.style)));
}
function vC(i, e, t, r = t.contentMatch) {
  let o = i.doc.nodeAt(e),
    n = [],
    u = e + 1;
  for (let h = 0; h < o.childCount; h++) {
    let m = o.child(h),
      b = u + m.nodeSize,
      _ = r.matchType(m.type);
    if (!_) n.push(new Oo(u, b, Ht.empty));
    else {
      r = _;
      for (let S = 0; S < m.marks.length; S++)
        t.allowsMarkType(m.marks[S].type) || i.step(new Rc(u, b, m.marks[S]));
      if (m.isText && !t.spec.code) {
        let S,
          T = /\r?\n|\r/g,
          D;
        for (; (S = T.exec(m.text)); )
          D ||
            (D = new Ht(
              Ct.from(t.schema.text(" ", t.allowedMarks(m.marks))),
              0,
              0
            )),
            n.push(new Oo(u + S.index, u + S.index + S[0].length, D));
      }
    }
    u = b;
  }
  if (!r.validEnd) {
    let h = r.fillBefore(Ct.empty, !0);
    i.replace(u, u, new Ht(h, 0, 0));
  }
  for (let h = n.length - 1; h >= 0; h--) i.step(n[h]);
}
function _C(i, e, t) {
  return (
    (e == 0 || i.canReplace(e, i.childCount)) &&
    (t == i.childCount || i.canReplace(0, t))
  );
}
function Ya(i) {
  let t = i.parent.content.cutByIndex(i.startIndex, i.endIndex);
  for (let r = i.depth; ; --r) {
    let o = i.$from.node(r),
      n = i.$from.index(r),
      u = i.$to.indexAfter(r);
    if (r < i.depth && o.canReplace(n, u, t)) return r;
    if (r == 0 || o.type.spec.isolating || !_C(o, n, u)) break;
  }
  return null;
}
function xC(i, e, t) {
  let { $from: r, $to: o, depth: n } = e,
    u = r.before(n + 1),
    h = o.after(n + 1),
    m = u,
    b = h,
    _ = Ct.empty,
    S = 0;
  for (let F = n, q = !1; F > t; F--)
    q || r.index(F) > 0
      ? ((q = !0), (_ = Ct.from(r.node(F).copy(_))), S++)
      : m--;
  let T = Ct.empty,
    D = 0;
  for (let F = n, q = !1; F > t; F--)
    q || o.after(F + 1) < o.end(F)
      ? ((q = !0), (T = Ct.from(o.node(F).copy(T))), D++)
      : b++;
  i.step(new Bn(m, b, u, h, new Ht(_.append(T), S, D), _.size - S, !0));
}
function Yu(i, e, t = null, r = i) {
  let o = wC(i, e),
    n = o && kC(r, e);
  return n ? o.map(L5).concat({ type: e, attrs: t }).concat(n.map(L5)) : null;
}
function L5(i) {
  return { type: i, attrs: null };
}
function wC(i, e) {
  let { parent: t, startIndex: r, endIndex: o } = i,
    n = t.contentMatchAt(r).findWrapping(e);
  if (!n) return null;
  let u = n.length ? n[0] : e;
  return t.canReplaceWith(r, o, u) ? n : null;
}
function kC(i, e) {
  let { parent: t, startIndex: r, endIndex: o } = i,
    n = t.child(r),
    u = e.contentMatch.findWrapping(n.type);
  if (!u) return null;
  let m = (u.length ? u[u.length - 1] : e).contentMatch;
  for (let b = r; m && b < o; b++) m = m.matchType(t.child(b).type);
  return !m || !m.validEnd ? null : u;
}
function SC(i, e, t) {
  let r = Ct.empty;
  for (let u = t.length - 1; u >= 0; u--) {
    if (r.size) {
      let h = t[u].type.contentMatch.matchFragment(r);
      if (!h || !h.validEnd)
        throw new RangeError(
          "Wrapper type given to Transform.wrap does not form valid content of its parent wrapper"
        );
    }
    r = Ct.from(t[u].type.create(t[u].attrs, r));
  }
  let o = e.start,
    n = e.end;
  i.step(new Bn(o, n, o, n, new Ht(r, 0, 0), t.length, !0));
}
function CC(i, e, t, r, o) {
  if (!r.isTextblock)
    throw new RangeError("Type given to setBlockType should be a textblock");
  let n = i.steps.length;
  i.doc.nodesBetween(e, t, (u, h) => {
    if (
      u.isTextblock &&
      !u.hasMarkup(r, o) &&
      EC(i.doc, i.mapping.slice(n).map(h), r)
    ) {
      i.clearIncompatible(i.mapping.slice(n).map(h, 1), r);
      let m = i.mapping.slice(n),
        b = m.map(h, 1),
        _ = m.map(h + u.nodeSize, 1);
      return (
        i.step(
          new Bn(
            b,
            _,
            b + 1,
            _ - 1,
            new Ht(Ct.from(r.create(o, null, u.marks)), 0, 0),
            1,
            !0
          )
        ),
        !1
      );
    }
  });
}
function EC(i, e, t) {
  let r = i.resolve(e),
    o = r.index();
  return r.parent.canReplaceWith(o, o + 1, t);
}
function TC(i, e, t, r, o) {
  let n = i.doc.nodeAt(e);
  if (!n) throw new RangeError("No node at given position");
  t || (t = n.type);
  let u = t.create(r, null, o || n.marks);
  if (n.isLeaf) return i.replaceWith(e, e + n.nodeSize, u);
  if (!t.validContent(n.content))
    throw new RangeError("Invalid content for node type " + t.name);
  i.step(
    new Bn(
      e,
      e + n.nodeSize,
      e + 1,
      e + n.nodeSize - 1,
      new Ht(Ct.from(u), 0, 0),
      1,
      !0
    )
  );
}
function Os(i, e, t = 1, r) {
  let o = i.resolve(e),
    n = o.depth - t,
    u = (r && r[r.length - 1]) || o.parent;
  if (
    n < 0 ||
    o.parent.type.spec.isolating ||
    !o.parent.canReplace(o.index(), o.parent.childCount) ||
    !u.type.validContent(
      o.parent.content.cutByIndex(o.index(), o.parent.childCount)
    )
  )
    return !1;
  for (let b = o.depth - 1, _ = t - 2; b > n; b--, _--) {
    let S = o.node(b),
      T = o.index(b);
    if (S.type.spec.isolating) return !1;
    let D = S.content.cutByIndex(T, S.childCount),
      F = r && r[_ + 1];
    F && (D = D.replaceChild(0, F.type.create(F.attrs)));
    let q = (r && r[_]) || S;
    if (!S.canReplace(T + 1, S.childCount) || !q.type.validContent(D))
      return !1;
  }
  let h = o.indexAfter(n),
    m = r && r[0];
  return o.node(n).canReplaceWith(h, h, m ? m.type : o.node(n + 1).type);
}
function MC(i, e, t = 1, r) {
  let o = i.doc.resolve(e),
    n = Ct.empty,
    u = Ct.empty;
  for (let h = o.depth, m = o.depth - t, b = t - 1; h > m; h--, b--) {
    n = Ct.from(o.node(h).copy(n));
    let _ = r && r[b];
    u = Ct.from(_ ? _.type.create(_.attrs, u) : o.node(h).copy(u));
  }
  i.step(new Oo(e, e, new Ht(n.append(u), t, t), !0));
}
function ra(i, e) {
  let t = i.resolve(e),
    r = t.index();
  return R5(t.nodeBefore, t.nodeAfter) && t.parent.canReplace(r, r + 1);
}
function R5(i, e) {
  return !!(i && e && !i.isLeaf && i.canAppend(e));
}
function ed(i, e, t = -1) {
  let r = i.resolve(e);
  for (let o = r.depth; ; o--) {
    let n,
      u,
      h = r.index(o);
    if (
      (o == r.depth
        ? ((n = r.nodeBefore), (u = r.nodeAfter))
        : t > 0
        ? ((n = r.node(o + 1)), h++, (u = r.node(o).maybeChild(h)))
        : ((n = r.node(o).maybeChild(h - 1)), (u = r.node(o + 1))),
      n && !n.isTextblock && R5(n, u) && r.node(o).canReplace(h, h + 1))
    )
      return e;
    if (o == 0) break;
    e = t < 0 ? r.before(o) : r.after(o);
  }
}
function AC(i, e, t) {
  let r = new Oo(e - t, e + t, Ht.empty, !0);
  i.step(r);
}
function IC(i, e, t) {
  let r = i.resolve(e);
  if (r.parent.canReplaceWith(r.index(), r.index(), t)) return e;
  if (r.parentOffset == 0)
    for (let o = r.depth - 1; o >= 0; o--) {
      let n = r.index(o);
      if (r.node(o).canReplaceWith(n, n, t)) return r.before(o + 1);
      if (n > 0) return null;
    }
  if (r.parentOffset == r.parent.content.size)
    for (let o = r.depth - 1; o >= 0; o--) {
      let n = r.indexAfter(o);
      if (r.node(o).canReplaceWith(n, n, t)) return r.after(o + 1);
      if (n < r.node(o).childCount) return null;
    }
  return null;
}
function D0(i, e, t) {
  let r = i.resolve(e);
  if (!t.content.size) return e;
  let o = t.content;
  for (let n = 0; n < t.openStart; n++) o = o.firstChild.content;
  for (let n = 1; n <= (t.openStart == 0 && t.size ? 2 : 1); n++)
    for (let u = r.depth; u >= 0; u--) {
      let h =
          u == r.depth
            ? 0
            : r.pos <= (r.start(u + 1) + r.end(u + 1)) / 2
            ? -1
            : 1,
        m = r.index(u) + (h > 0 ? 1 : 0),
        b = r.node(u),
        _ = !1;
      if (n == 1) _ = b.canReplace(m, m, o);
      else {
        let S = b.contentMatchAt(m).findWrapping(o.firstChild.type);
        _ = S && b.canReplaceWith(m, m, S[0]);
      }
      if (_) return h == 0 ? r.pos : h < 0 ? r.before(u + 1) : r.after(u + 1);
    }
  return null;
}
function lp(i, e, t = e, r = Ht.empty) {
  if (e == t && !r.size) return null;
  let o = i.resolve(e),
    n = i.resolve(t);
  return U5(o, n, r) ? new Oo(e, t, r) : new Tg(o, n, r).fit();
}
function U5(i, e, t) {
  return (
    !t.openStart &&
    !t.openEnd &&
    i.start() == e.start() &&
    i.parent.canReplace(i.index(), e.index(), t.content)
  );
}
var Tg = class {
  constructor(e, t, r) {
    (this.$from = e),
      (this.$to = t),
      (this.unplaced = r),
      (this.frontier = []),
      (this.placed = Ct.empty);
    for (let o = 0; o <= e.depth; o++) {
      let n = e.node(o);
      this.frontier.push({
        type: n.type,
        match: n.contentMatchAt(e.indexAfter(o)),
      });
    }
    for (let o = e.depth; o > 0; o--)
      this.placed = Ct.from(e.node(o).copy(this.placed));
  }
  get depth() {
    return this.frontier.length - 1;
  }
  fit() {
    for (; this.unplaced.size; ) {
      let b = this.findFittable();
      b ? this.placeNodes(b) : this.openMore() || this.dropNode();
    }
    let e = this.mustMoveInline(),
      t = this.placed.size - this.depth - this.$from.depth,
      r = this.$from,
      o = this.close(e < 0 ? this.$to : r.doc.resolve(e));
    if (!o) return null;
    let n = this.placed,
      u = r.depth,
      h = o.depth;
    for (; u && h && n.childCount == 1; ) (n = n.firstChild.content), u--, h--;
    let m = new Ht(n, u, h);
    return e > -1
      ? new Bn(r.pos, e, this.$to.pos, this.$to.end(), m, t)
      : m.size || r.pos != this.$to.pos
      ? new Oo(r.pos, o.pos, m)
      : null;
  }
  findFittable() {
    let e = this.unplaced.openStart;
    for (
      let t = this.unplaced.content, r = 0, o = this.unplaced.openEnd;
      r < e;
      r++
    ) {
      let n = t.firstChild;
      if ((t.childCount > 1 && (o = 0), n.type.spec.isolating && o <= r)) {
        e = r;
        break;
      }
      t = n.content;
    }
    for (let t = 1; t <= 2; t++)
      for (let r = t == 1 ? e : this.unplaced.openStart; r >= 0; r--) {
        let o,
          n = null;
        r
          ? ((n = Sg(this.unplaced.content, r - 1).firstChild), (o = n.content))
          : (o = this.unplaced.content);
        let u = o.firstChild;
        for (let h = this.depth; h >= 0; h--) {
          let { type: m, match: b } = this.frontier[h],
            _,
            S = null;
          if (
            t == 1 &&
            (u
              ? b.matchType(u.type) || (S = b.fillBefore(Ct.from(u), !1))
              : n && m.compatibleContent(n.type))
          )
            return { sliceDepth: r, frontierDepth: h, parent: n, inject: S };
          if (t == 2 && u && (_ = b.findWrapping(u.type)))
            return { sliceDepth: r, frontierDepth: h, parent: n, wrap: _ };
          if (n && b.matchType(n.type)) break;
        }
      }
  }
  openMore() {
    let { content: e, openStart: t, openEnd: r } = this.unplaced,
      o = Sg(e, t);
    return !o.childCount || o.firstChild.isLeaf
      ? !1
      : ((this.unplaced = new Ht(
          e,
          t + 1,
          Math.max(r, o.size + t >= e.size - r ? t + 1 : 0)
        )),
        !0);
  }
  dropNode() {
    let { content: e, openStart: t, openEnd: r } = this.unplaced,
      o = Sg(e, t);
    if (o.childCount <= 1 && t > 0) {
      let n = e.size - t <= t + o.size;
      this.unplaced = new Ht(ep(e, t - 1, 1), t - 1, n ? t - 1 : r);
    } else this.unplaced = new Ht(ep(e, t, 1), t, r);
  }
  placeNodes({
    sliceDepth: e,
    frontierDepth: t,
    parent: r,
    inject: o,
    wrap: n,
  }) {
    for (; this.depth > t; ) this.closeFrontierNode();
    if (n) for (let q = 0; q < n.length; q++) this.openFrontierNode(n[q]);
    let u = this.unplaced,
      h = r ? r.content : u.content,
      m = u.openStart - e,
      b = 0,
      _ = [],
      { match: S, type: T } = this.frontier[t];
    if (o) {
      for (let q = 0; q < o.childCount; q++) _.push(o.child(q));
      S = S.matchFragment(o);
    }
    let D = h.size + e - (u.content.size - u.openEnd);
    for (; b < h.childCount; ) {
      let q = h.child(b),
        Q = S.matchType(q.type);
      if (!Q) break;
      b++,
        (b > 1 || m == 0 || q.content.size) &&
          ((S = Q),
          _.push(
            V5(
              q.mark(T.allowedMarks(q.marks)),
              b == 1 ? m : 0,
              b == h.childCount ? D : -1
            )
          ));
    }
    let F = b == h.childCount;
    F || (D = -1),
      (this.placed = tp(this.placed, t, Ct.from(_))),
      (this.frontier[t].match = S),
      F &&
        D < 0 &&
        r &&
        r.type == this.frontier[this.depth].type &&
        this.frontier.length > 1 &&
        this.closeFrontierNode();
    for (let q = 0, Q = h; q < D; q++) {
      let te = Q.lastChild;
      this.frontier.push({
        type: te.type,
        match: te.contentMatchAt(te.childCount),
      }),
        (Q = te.content);
    }
    this.unplaced = F
      ? e == 0
        ? Ht.empty
        : new Ht(ep(u.content, e - 1, 1), e - 1, D < 0 ? u.openEnd : e - 1)
      : new Ht(ep(u.content, e, b), u.openStart, u.openEnd);
  }
  mustMoveInline() {
    if (!this.$to.parent.isTextblock) return -1;
    let e = this.frontier[this.depth],
      t;
    if (
      !e.type.isTextblock ||
      !Cg(this.$to, this.$to.depth, e.type, e.match, !1) ||
      (this.$to.depth == this.depth &&
        (t = this.findCloseLevel(this.$to)) &&
        t.depth == this.depth)
    )
      return -1;
    let { depth: r } = this.$to,
      o = this.$to.after(r);
    for (; r > 1 && o == this.$to.end(--r); ) ++o;
    return o;
  }
  findCloseLevel(e) {
    e: for (let t = Math.min(this.depth, e.depth); t >= 0; t--) {
      let { match: r, type: o } = this.frontier[t],
        n = t < e.depth && e.end(t + 1) == e.pos + (e.depth - (t + 1)),
        u = Cg(e, t, o, r, n);
      if (u) {
        for (let h = t - 1; h >= 0; h--) {
          let { match: m, type: b } = this.frontier[h],
            _ = Cg(e, h, b, m, !0);
          if (!_ || _.childCount) continue e;
        }
        return {
          depth: t,
          fit: u,
          move: n ? e.doc.resolve(e.after(t + 1)) : e,
        };
      }
    }
  }
  close(e) {
    let t = this.findCloseLevel(e);
    if (!t) return null;
    for (; this.depth > t.depth; ) this.closeFrontierNode();
    t.fit.childCount && (this.placed = tp(this.placed, t.depth, t.fit)),
      (e = t.move);
    for (let r = t.depth + 1; r <= e.depth; r++) {
      let o = e.node(r),
        n = o.type.contentMatch.fillBefore(o.content, !0, e.index(r));
      this.openFrontierNode(o.type, o.attrs, n);
    }
    return e;
  }
  openFrontierNode(e, t = null, r) {
    let o = this.frontier[this.depth];
    (o.match = o.match.matchType(e)),
      (this.placed = tp(this.placed, this.depth, Ct.from(e.create(t, r)))),
      this.frontier.push({ type: e, match: e.contentMatch });
  }
  closeFrontierNode() {
    let t = this.frontier.pop().match.fillBefore(Ct.empty, !0);
    t.childCount && (this.placed = tp(this.placed, this.frontier.length, t));
  }
};
function ep(i, e, t) {
  return e == 0
    ? i.cutByIndex(t, i.childCount)
    : i.replaceChild(0, i.firstChild.copy(ep(i.firstChild.content, e - 1, t)));
}
function tp(i, e, t) {
  return e == 0
    ? i.append(t)
    : i.replaceChild(
        i.childCount - 1,
        i.lastChild.copy(tp(i.lastChild.content, e - 1, t))
      );
}
function Sg(i, e) {
  for (let t = 0; t < e; t++) i = i.firstChild.content;
  return i;
}
function V5(i, e, t) {
  if (e <= 0) return i;
  let r = i.content;
  return (
    e > 1 &&
      (r = r.replaceChild(
        0,
        V5(r.firstChild, e - 1, r.childCount == 1 ? t - 1 : 0)
      )),
    e > 0 &&
      ((r = i.type.contentMatch.fillBefore(r).append(r)),
      t <= 0 &&
        (r = r.append(
          i.type.contentMatch.matchFragment(r).fillBefore(Ct.empty, !0)
        ))),
    i.copy(r)
  );
}
function Cg(i, e, t, r, o) {
  let n = i.node(e),
    u = o ? i.indexAfter(e) : i.index(e);
  if (u == n.childCount && !t.compatibleContent(n.type)) return null;
  let h = r.fillBefore(n.content, !0, u);
  return h && !PC(t, n.content, u) ? h : null;
}
function PC(i, e, t) {
  for (let r = t; r < e.childCount; r++)
    if (!i.allowsMarks(e.child(r).marks)) return !0;
  return !1;
}
function DC(i) {
  return i.spec.defining || i.spec.definingForContent;
}
function LC(i, e, t, r) {
  if (!r.size) return i.deleteRange(e, t);
  let o = i.doc.resolve(e),
    n = i.doc.resolve(t);
  if (U5(o, n, r)) return i.step(new Oo(e, t, r));
  let u = H5(o, i.doc.resolve(t));
  u[u.length - 1] == 0 && u.pop();
  let h = -(o.depth + 1);
  u.unshift(h);
  for (let T = o.depth, D = o.pos - 1; T > 0; T--, D--) {
    let F = o.node(T).type.spec;
    if (F.defining || F.definingAsContext || F.isolating) break;
    u.indexOf(T) > -1 ? (h = T) : o.before(T) == D && u.splice(1, 0, -T);
  }
  let m = u.indexOf(h),
    b = [],
    _ = r.openStart;
  for (let T = r.content, D = 0; ; D++) {
    let F = T.firstChild;
    if ((b.push(F), D == r.openStart)) break;
    T = F.content;
  }
  for (let T = _ - 1; T >= 0; T--) {
    let D = b[T],
      F = DC(D.type);
    if (F && !D.sameMarkup(o.node(Math.abs(h) - 1))) _ = T;
    else if (F || !D.type.isTextblock) break;
  }
  for (let T = r.openStart; T >= 0; T--) {
    let D = (T + _ + 1) % (r.openStart + 1),
      F = b[D];
    if (F)
      for (let q = 0; q < u.length; q++) {
        let Q = u[(q + m) % u.length],
          te = !0;
        Q < 0 && ((te = !1), (Q = -Q));
        let ce = o.node(Q - 1),
          be = o.index(Q - 1);
        if (ce.canReplaceWith(be, be, F.type, F.marks))
          return i.replace(
            o.before(Q),
            te ? n.after(Q) : t,
            new Ht(j5(r.content, 0, r.openStart, D), D, r.openEnd)
          );
      }
  }
  let S = i.steps.length;
  for (
    let T = u.length - 1;
    T >= 0 && (i.replace(e, t, r), !(i.steps.length > S));
    T--
  ) {
    let D = u[T];
    D < 0 || ((e = o.before(D)), (t = n.after(D)));
  }
}
function j5(i, e, t, r, o) {
  if (e < t) {
    let n = i.firstChild;
    i = i.replaceChild(0, n.copy(j5(n.content, e + 1, t, r, n)));
  }
  if (e > r) {
    let n = o.contentMatchAt(0),
      u = n.fillBefore(i).append(i);
    i = u.append(n.matchFragment(u).fillBefore(Ct.empty, !0));
  }
  return i;
}
function FC(i, e, t, r) {
  if (!r.isInline && e == t && i.doc.resolve(e).parent.content.size) {
    let o = IC(i.doc, e, r.type);
    o != null && (e = t = o);
  }
  i.replaceRange(e, t, new Ht(Ct.from(r), 0, 0));
}
function zC(i, e, t) {
  let r = i.doc.resolve(e),
    o = i.doc.resolve(t),
    n = H5(r, o);
  for (let u = 0; u < n.length; u++) {
    let h = n[u],
      m = u == n.length - 1;
    if ((m && h == 0) || r.node(h).type.contentMatch.validEnd)
      return i.delete(r.start(h), o.end(h));
    if (
      h > 0 &&
      (m || r.node(h - 1).canReplace(r.index(h - 1), o.indexAfter(h - 1)))
    )
      return i.delete(r.before(h), o.after(h));
  }
  for (let u = 1; u <= r.depth && u <= o.depth; u++)
    if (
      e - r.start(u) == r.depth - u &&
      t > r.end(u) &&
      o.end(u) - t != o.depth - u
    )
      return i.delete(r.before(u), t);
  i.delete(e, t);
}
function H5(i, e) {
  let t = [],
    r = Math.min(i.depth, e.depth);
  for (let o = r; o >= 0; o--) {
    let n = i.start(o);
    if (
      n < i.pos - (i.depth - o) ||
      e.end(o) > e.pos + (e.depth - o) ||
      i.node(o).type.spec.isolating ||
      e.node(o).type.spec.isolating
    )
      break;
    (n == e.start(o) ||
      (o == i.depth &&
        o == e.depth &&
        i.parent.inlineContent &&
        e.parent.inlineContent &&
        o &&
        e.start(o - 1) == n - 1)) &&
      t.push(o);
  }
  return t;
}
var I0 = class i extends ro {
  constructor(e, t, r) {
    super(), (this.pos = e), (this.attr = t), (this.value = r);
  }
  apply(e) {
    let t = e.nodeAt(this.pos);
    if (!t) return bo.fail("No node at attribute step's position");
    let r = Object.create(null);
    for (let n in t.attrs) r[n] = t.attrs[n];
    r[this.attr] = this.value;
    let o = t.type.create(r, null, t.marks);
    return bo.fromReplace(
      e,
      this.pos,
      this.pos + 1,
      new Ht(Ct.from(o), 0, t.isLeaf ? 0 : 1)
    );
  }
  getMap() {
    return Xa.empty;
  }
  invert(e) {
    return new i(this.pos, this.attr, e.nodeAt(this.pos).attrs[this.attr]);
  }
  map(e) {
    let t = e.mapResult(this.pos, 1);
    return t.deletedAfter ? null : new i(t.pos, this.attr, this.value);
  }
  toJSON() {
    return {
      stepType: "attr",
      pos: this.pos,
      attr: this.attr,
      value: this.value,
    };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number" || typeof t.attr != "string")
      throw new RangeError("Invalid input for AttrStep.fromJSON");
    return new i(t.pos, t.attr, t.value);
  }
};
ro.jsonID("attr", I0);
var P0 = class i extends ro {
  constructor(e, t) {
    super(), (this.attr = e), (this.value = t);
  }
  apply(e) {
    let t = Object.create(null);
    for (let o in e.attrs) t[o] = e.attrs[o];
    t[this.attr] = this.value;
    let r = e.type.create(t, e.content, e.marks);
    return bo.ok(r);
  }
  getMap() {
    return Xa.empty;
  }
  invert(e) {
    return new i(this.attr, e.attrs[this.attr]);
  }
  map(e) {
    return this;
  }
  toJSON() {
    return { stepType: "docAttr", attr: this.attr, value: this.value };
  }
  static fromJSON(e, t) {
    if (typeof t.attr != "string")
      throw new RangeError("Invalid input for DocAttrStep.fromJSON");
    return new i(t.attr, t.value);
  }
};
ro.jsonID("docAttr", P0);
var Xu = class extends Error {};
Xu = function i(e) {
  let t = Error.call(this, e);
  return (t.__proto__ = i.prototype), t;
};
Xu.prototype = Object.create(Error.prototype);
Xu.prototype.constructor = Xu;
Xu.prototype.name = "TransformError";
var ap = class {
  constructor(e) {
    (this.doc = e),
      (this.steps = []),
      (this.docs = []),
      (this.mapping = new rp());
  }
  get before() {
    return this.docs.length ? this.docs[0] : this.doc;
  }
  step(e) {
    let t = this.maybeStep(e);
    if (t.failed) throw new Xu(t.failed);
    return this;
  }
  maybeStep(e) {
    let t = e.apply(this.doc);
    return t.failed || this.addStep(e, t.doc), t;
  }
  get docChanged() {
    return this.steps.length > 0;
  }
  addStep(e, t) {
    this.docs.push(this.doc),
      this.steps.push(e),
      this.mapping.appendMap(e.getMap()),
      (this.doc = t);
  }
  replace(e, t = e, r = Ht.empty) {
    let o = lp(this.doc, e, t, r);
    return o && this.step(o), this;
  }
  replaceWith(e, t, r) {
    return this.replace(e, t, new Ht(Ct.from(r), 0, 0));
  }
  delete(e, t) {
    return this.replace(e, t, Ht.empty);
  }
  insert(e, t) {
    return this.replaceWith(e, e, t);
  }
  replaceRange(e, t, r) {
    return LC(this, e, t, r), this;
  }
  replaceRangeWith(e, t, r) {
    return FC(this, e, t, r), this;
  }
  deleteRange(e, t) {
    return zC(this, e, t), this;
  }
  lift(e, t) {
    return xC(this, e, t), this;
  }
  join(e, t = 1) {
    return AC(this, e, t), this;
  }
  wrap(e, t) {
    return SC(this, e, t), this;
  }
  setBlockType(e, t = e, r, o = null) {
    return CC(this, e, t, r, o), this;
  }
  setNodeMarkup(e, t, r = null, o) {
    return TC(this, e, t, r, o), this;
  }
  setNodeAttribute(e, t, r) {
    return this.step(new I0(e, t, r)), this;
  }
  setDocAttribute(e, t) {
    return this.step(new P0(e, t)), this;
  }
  addNodeMark(e, t) {
    return this.step(new op(e, t)), this;
  }
  removeNodeMark(e, t) {
    if (!(t instanceof ur)) {
      let r = this.doc.nodeAt(e);
      if (!r) throw new RangeError("No node at position " + e);
      if (((t = t.isInSet(r.marks)), !t)) return this;
    }
    return this.step(new sp(e, t)), this;
  }
  split(e, t = 1, r) {
    return MC(this, e, t, r), this;
  }
  addMark(e, t, r) {
    return yC(this, e, t, r), this;
  }
  removeMark(e, t, r) {
    return bC(this, e, t, r), this;
  }
  clearIncompatible(e, t, r) {
    return vC(this, e, t, r), this;
  }
};
var Ag = Object.create(null),
  Ii = class {
    constructor(e, t, r) {
      (this.$anchor = e),
        (this.$head = t),
        (this.ranges = r || [new Pg(e.min(t), e.max(t))]);
    }
    get anchor() {
      return this.$anchor.pos;
    }
    get head() {
      return this.$head.pos;
    }
    get from() {
      return this.$from.pos;
    }
    get to() {
      return this.$to.pos;
    }
    get $from() {
      return this.ranges[0].$from;
    }
    get $to() {
      return this.ranges[0].$to;
    }
    get empty() {
      let e = this.ranges;
      for (let t = 0; t < e.length; t++)
        if (e[t].$from.pos != e[t].$to.pos) return !1;
      return !0;
    }
    content() {
      return this.$from.doc.slice(this.from, this.to, !0);
    }
    replace(e, t = Ht.empty) {
      let r = t.content.lastChild,
        o = null;
      for (let h = 0; h < t.openEnd; h++) (o = r), (r = r.lastChild);
      let n = e.steps.length,
        u = this.ranges;
      for (let h = 0; h < u.length; h++) {
        let { $from: m, $to: b } = u[h],
          _ = e.mapping.slice(n);
        e.replaceRange(_.map(m.pos), _.map(b.pos), h ? Ht.empty : t),
          h == 0 && Q5(e, n, (r ? r.isInline : o && o.isTextblock) ? -1 : 1);
      }
    }
    replaceWith(e, t) {
      let r = e.steps.length,
        o = this.ranges;
      for (let n = 0; n < o.length; n++) {
        let { $from: u, $to: h } = o[n],
          m = e.mapping.slice(r),
          b = m.map(u.pos),
          _ = m.map(h.pos);
        n
          ? e.deleteRange(b, _)
          : (e.replaceRangeWith(b, _, t), Q5(e, r, t.isInline ? -1 : 1));
      }
    }
    static findFrom(e, t, r = !1) {
      let o = e.parent.inlineContent
        ? new Mi(e)
        : td(e.node(0), e.parent, e.pos, e.index(), t, r);
      if (o) return o;
      for (let n = e.depth - 1; n >= 0; n--) {
        let u =
          t < 0
            ? td(e.node(0), e.node(n), e.before(n + 1), e.index(n), t, r)
            : td(e.node(0), e.node(n), e.after(n + 1), e.index(n) + 1, t, r);
        if (u) return u;
      }
      return null;
    }
    static near(e, t = 1) {
      return this.findFrom(e, t) || this.findFrom(e, -t) || new ks(e.node(0));
    }
    static atStart(e) {
      return td(e, e, 0, 0, 1) || new ks(e);
    }
    static atEnd(e) {
      return td(e, e, e.content.size, e.childCount, -1) || new ks(e);
    }
    static fromJSON(e, t) {
      if (!t || !t.type)
        throw new RangeError("Invalid input for Selection.fromJSON");
      let r = Ag[t.type];
      if (!r) throw new RangeError(`No selection type ${t.type} defined`);
      return r.fromJSON(e, t);
    }
    static jsonID(e, t) {
      if (e in Ag)
        throw new RangeError("Duplicate use of selection JSON ID " + e);
      return (Ag[e] = t), (t.prototype.jsonID = e), t;
    }
    getBookmark() {
      return Mi.between(this.$anchor, this.$head).getBookmark();
    }
  };
Ii.prototype.visible = !0;
var Pg = class {
    constructor(e, t) {
      (this.$from = e), (this.$to = t);
    }
  },
  q5 = !1;
function $5(i) {
  !q5 &&
    !i.parent.inlineContent &&
    ((q5 = !0),
    console.warn(
      "TextSelection endpoint not pointing into a node with inline content (" +
        i.parent.type.name +
        ")"
    ));
}
var Mi = class i extends Ii {
  constructor(e, t = e) {
    $5(e), $5(t), super(e, t);
  }
  get $cursor() {
    return this.$anchor.pos == this.$head.pos ? this.$head : null;
  }
  map(e, t) {
    let r = e.resolve(t.map(this.head));
    if (!r.parent.inlineContent) return Ii.near(r);
    let o = e.resolve(t.map(this.anchor));
    return new i(o.parent.inlineContent ? o : r, r);
  }
  replace(e, t = Ht.empty) {
    if ((super.replace(e, t), t == Ht.empty)) {
      let r = this.$from.marksAcross(this.$to);
      r && e.ensureMarks(r);
    }
  }
  eq(e) {
    return e instanceof i && e.anchor == this.anchor && e.head == this.head;
  }
  getBookmark() {
    return new F0(this.anchor, this.head);
  }
  toJSON() {
    return { type: "text", anchor: this.anchor, head: this.head };
  }
  static fromJSON(e, t) {
    if (typeof t.anchor != "number" || typeof t.head != "number")
      throw new RangeError("Invalid input for TextSelection.fromJSON");
    return new i(e.resolve(t.anchor), e.resolve(t.head));
  }
  static create(e, t, r = t) {
    let o = e.resolve(t);
    return new this(o, r == t ? o : e.resolve(r));
  }
  static between(e, t, r) {
    let o = e.pos - t.pos;
    if (((!r || o) && (r = o >= 0 ? 1 : -1), !t.parent.inlineContent)) {
      let n = Ii.findFrom(t, r, !0) || Ii.findFrom(t, -r, !0);
      if (n) t = n.$head;
      else return Ii.near(t, r);
    }
    return (
      e.parent.inlineContent ||
        (o == 0
          ? (e = t)
          : ((e = (Ii.findFrom(e, -r, !0) || Ii.findFrom(e, r, !0)).$anchor),
            e.pos < t.pos != o < 0 && (e = t))),
      new i(e, t)
    );
  }
};
Ii.jsonID("text", Mi);
var F0 = class i {
    constructor(e, t) {
      (this.anchor = e), (this.head = t);
    }
    map(e) {
      return new i(e.map(this.anchor), e.map(this.head));
    }
    resolve(e) {
      return Mi.between(e.resolve(this.anchor), e.resolve(this.head));
    }
  },
  fi = class i extends Ii {
    constructor(e) {
      let t = e.nodeAfter,
        r = e.node(0).resolve(e.pos + t.nodeSize);
      super(e, r), (this.node = t);
    }
    map(e, t) {
      let { deleted: r, pos: o } = t.mapResult(this.anchor),
        n = e.resolve(o);
      return r ? Ii.near(n) : new i(n);
    }
    content() {
      return new Ht(Ct.from(this.node), 0, 0);
    }
    eq(e) {
      return e instanceof i && e.anchor == this.anchor;
    }
    toJSON() {
      return { type: "node", anchor: this.anchor };
    }
    getBookmark() {
      return new Dg(this.anchor);
    }
    static fromJSON(e, t) {
      if (typeof t.anchor != "number")
        throw new RangeError("Invalid input for NodeSelection.fromJSON");
      return new i(e.resolve(t.anchor));
    }
    static create(e, t) {
      return new i(e.resolve(t));
    }
    static isSelectable(e) {
      return !e.isText && e.type.spec.selectable !== !1;
    }
  };
fi.prototype.visible = !1;
Ii.jsonID("node", fi);
var Dg = class i {
    constructor(e) {
      this.anchor = e;
    }
    map(e) {
      let { deleted: t, pos: r } = e.mapResult(this.anchor);
      return t ? new F0(r, r) : new i(r);
    }
    resolve(e) {
      let t = e.resolve(this.anchor),
        r = t.nodeAfter;
      return r && fi.isSelectable(r) ? new fi(t) : Ii.near(t);
    }
  },
  ks = class i extends Ii {
    constructor(e) {
      super(e.resolve(0), e.resolve(e.content.size));
    }
    replace(e, t = Ht.empty) {
      if (t == Ht.empty) {
        e.delete(0, e.doc.content.size);
        let r = Ii.atStart(e.doc);
        r.eq(e.selection) || e.setSelection(r);
      } else super.replace(e, t);
    }
    toJSON() {
      return { type: "all" };
    }
    static fromJSON(e) {
      return new i(e);
    }
    map(e) {
      return new i(e);
    }
    eq(e) {
      return e instanceof i;
    }
    getBookmark() {
      return NC;
    }
  };
Ii.jsonID("all", ks);
var NC = {
  map() {
    return this;
  },
  resolve(i) {
    return new ks(i);
  },
};
function td(i, e, t, r, o, n = !1) {
  if (e.inlineContent) return Mi.create(i, t);
  for (let u = r - (o > 0 ? 0 : 1); o > 0 ? u < e.childCount : u >= 0; u += o) {
    let h = e.child(u);
    if (h.isAtom) {
      if (!n && fi.isSelectable(h))
        return fi.create(i, t - (o < 0 ? h.nodeSize : 0));
    } else {
      let m = td(i, h, t + o, o < 0 ? h.childCount : 0, o, n);
      if (m) return m;
    }
    t += h.nodeSize * o;
  }
  return null;
}
function Q5(i, e, t) {
  let r = i.steps.length - 1;
  if (r < e) return;
  let o = i.steps[r];
  if (!(o instanceof Oo || o instanceof Bn)) return;
  let n = i.mapping.maps[r],
    u;
  n.forEach((h, m, b, _) => {
    u == null && (u = _);
  }),
    i.setSelection(Ii.near(i.doc.resolve(u), t));
}
var G5 = 1,
  L0 = 2,
  W5 = 4,
  Lg = class extends ap {
    constructor(e) {
      super(e.doc),
        (this.curSelectionFor = 0),
        (this.updated = 0),
        (this.meta = Object.create(null)),
        (this.time = Date.now()),
        (this.curSelection = e.selection),
        (this.storedMarks = e.storedMarks);
    }
    get selection() {
      return (
        this.curSelectionFor < this.steps.length &&
          ((this.curSelection = this.curSelection.map(
            this.doc,
            this.mapping.slice(this.curSelectionFor)
          )),
          (this.curSelectionFor = this.steps.length)),
        this.curSelection
      );
    }
    setSelection(e) {
      if (e.$from.doc != this.doc)
        throw new RangeError(
          "Selection passed to setSelection must point at the current document"
        );
      return (
        (this.curSelection = e),
        (this.curSelectionFor = this.steps.length),
        (this.updated = (this.updated | G5) & ~L0),
        (this.storedMarks = null),
        this
      );
    }
    get selectionSet() {
      return (this.updated & G5) > 0;
    }
    setStoredMarks(e) {
      return (this.storedMarks = e), (this.updated |= L0), this;
    }
    ensureMarks(e) {
      return (
        ur.sameSet(this.storedMarks || this.selection.$from.marks(), e) ||
          this.setStoredMarks(e),
        this
      );
    }
    addStoredMark(e) {
      return this.ensureMarks(
        e.addToSet(this.storedMarks || this.selection.$head.marks())
      );
    }
    removeStoredMark(e) {
      return this.ensureMarks(
        e.removeFromSet(this.storedMarks || this.selection.$head.marks())
      );
    }
    get storedMarksSet() {
      return (this.updated & L0) > 0;
    }
    addStep(e, t) {
      super.addStep(e, t),
        (this.updated = this.updated & ~L0),
        (this.storedMarks = null);
    }
    setTime(e) {
      return (this.time = e), this;
    }
    replaceSelection(e) {
      return this.selection.replace(this, e), this;
    }
    replaceSelectionWith(e, t = !0) {
      let r = this.selection;
      return (
        t &&
          (e = e.mark(
            this.storedMarks ||
              (r.empty
                ? r.$from.marks()
                : r.$from.marksAcross(r.$to) || ur.none)
          )),
        r.replaceWith(this, e),
        this
      );
    }
    deleteSelection() {
      return this.selection.replace(this), this;
    }
    insertText(e, t, r) {
      let o = this.doc.type.schema;
      if (t == null)
        return e
          ? this.replaceSelectionWith(o.text(e), !0)
          : this.deleteSelection();
      {
        if ((r == null && (r = t), (r = r ?? t), !e))
          return this.deleteRange(t, r);
        let n = this.storedMarks;
        if (!n) {
          let u = this.doc.resolve(t);
          n = r == t ? u.marks() : u.marksAcross(this.doc.resolve(r));
        }
        return (
          this.replaceRangeWith(t, r, o.text(e, n)),
          this.selection.empty ||
            this.setSelection(Ii.near(this.selection.$to)),
          this
        );
      }
    }
    setMeta(e, t) {
      return (this.meta[typeof e == "string" ? e : e.key] = t), this;
    }
    getMeta(e) {
      return this.meta[typeof e == "string" ? e : e.key];
    }
    get isGeneric() {
      for (let e in this.meta) return !1;
      return !0;
    }
    scrollIntoView() {
      return (this.updated |= W5), this;
    }
    get scrolledIntoView() {
      return (this.updated & W5) > 0;
    }
  };
function Z5(i, e) {
  return !e || !i ? i : i.bind(e);
}
var Uc = class {
    constructor(e, t, r) {
      (this.name = e),
        (this.init = Z5(t.init, r)),
        (this.apply = Z5(t.apply, r));
    }
  },
  OC = [
    new Uc("doc", {
      init(i) {
        return i.doc || i.schema.topNodeType.createAndFill();
      },
      apply(i) {
        return i.doc;
      },
    }),
    new Uc("selection", {
      init(i, e) {
        return i.selection || Ii.atStart(e.doc);
      },
      apply(i) {
        return i.selection;
      },
    }),
    new Uc("storedMarks", {
      init(i) {
        return i.storedMarks || null;
      },
      apply(i, e, t, r) {
        return r.selection.$cursor ? i.storedMarks : null;
      },
    }),
    new Uc("scrollToSelection", {
      init() {
        return 0;
      },
      apply(i, e) {
        return i.scrolledIntoView ? e + 1 : e;
      },
    }),
  ],
  cp = class {
    constructor(e, t) {
      (this.schema = e),
        (this.plugins = []),
        (this.pluginsByKey = Object.create(null)),
        (this.fields = OC.slice()),
        t &&
          t.forEach((r) => {
            if (this.pluginsByKey[r.key])
              throw new RangeError(
                "Adding different instances of a keyed plugin (" + r.key + ")"
              );
            this.plugins.push(r),
              (this.pluginsByKey[r.key] = r),
              r.spec.state && this.fields.push(new Uc(r.key, r.spec.state, r));
          });
    }
  },
  z0 = class i {
    constructor(e) {
      this.config = e;
    }
    get schema() {
      return this.config.schema;
    }
    get plugins() {
      return this.config.plugins;
    }
    apply(e) {
      return this.applyTransaction(e).state;
    }
    filterTransaction(e, t = -1) {
      for (let r = 0; r < this.config.plugins.length; r++)
        if (r != t) {
          let o = this.config.plugins[r];
          if (
            o.spec.filterTransaction &&
            !o.spec.filterTransaction.call(o, e, this)
          )
            return !1;
        }
      return !0;
    }
    applyTransaction(e) {
      if (!this.filterTransaction(e)) return { state: this, transactions: [] };
      let t = [e],
        r = this.applyInner(e),
        o = null;
      for (;;) {
        let n = !1;
        for (let u = 0; u < this.config.plugins.length; u++) {
          let h = this.config.plugins[u];
          if (h.spec.appendTransaction) {
            let m = o ? o[u].n : 0,
              b = o ? o[u].state : this,
              _ =
                m < t.length &&
                h.spec.appendTransaction.call(h, m ? t.slice(m) : t, b, r);
            if (_ && r.filterTransaction(_, u)) {
              if ((_.setMeta("appendedTransaction", e), !o)) {
                o = [];
                for (let S = 0; S < this.config.plugins.length; S++)
                  o.push(
                    S < u ? { state: r, n: t.length } : { state: this, n: 0 }
                  );
              }
              t.push(_), (r = r.applyInner(_)), (n = !0);
            }
            o && (o[u] = { state: r, n: t.length });
          }
        }
        if (!n) return { state: r, transactions: t };
      }
    }
    applyInner(e) {
      if (!e.before.eq(this.doc))
        throw new RangeError("Applying a mismatched transaction");
      let t = new i(this.config),
        r = this.config.fields;
      for (let o = 0; o < r.length; o++) {
        let n = r[o];
        t[n.name] = n.apply(e, this[n.name], this, t);
      }
      return t;
    }
    get tr() {
      return new Lg(this);
    }
    static create(e) {
      let t = new cp(e.doc ? e.doc.type.schema : e.schema, e.plugins),
        r = new i(t);
      for (let o = 0; o < t.fields.length; o++)
        r[t.fields[o].name] = t.fields[o].init(e, r);
      return r;
    }
    reconfigure(e) {
      let t = new cp(this.schema, e.plugins),
        r = t.fields,
        o = new i(t);
      for (let n = 0; n < r.length; n++) {
        let u = r[n].name;
        o[u] = this.hasOwnProperty(u) ? this[u] : r[n].init(e, o);
      }
      return o;
    }
    toJSON(e) {
      let t = { doc: this.doc.toJSON(), selection: this.selection.toJSON() };
      if (
        (this.storedMarks &&
          (t.storedMarks = this.storedMarks.map((r) => r.toJSON())),
        e && typeof e == "object")
      )
        for (let r in e) {
          if (r == "doc" || r == "selection")
            throw new RangeError(
              "The JSON fields `doc` and `selection` are reserved"
            );
          let o = e[r],
            n = o.spec.state;
          n && n.toJSON && (t[r] = n.toJSON.call(o, this[o.key]));
        }
      return t;
    }
    static fromJSON(e, t, r) {
      if (!t) throw new RangeError("Invalid input for EditorState.fromJSON");
      if (!e.schema)
        throw new RangeError("Required config field 'schema' missing");
      let o = new cp(e.schema, e.plugins),
        n = new i(o);
      return (
        o.fields.forEach((u) => {
          if (u.name == "doc") n.doc = ia.fromJSON(e.schema, t.doc);
          else if (u.name == "selection")
            n.selection = Ii.fromJSON(n.doc, t.selection);
          else if (u.name == "storedMarks")
            t.storedMarks &&
              (n.storedMarks = t.storedMarks.map(e.schema.markFromJSON));
          else {
            if (r)
              for (let h in r) {
                let m = r[h],
                  b = m.spec.state;
                if (
                  m.key == u.name &&
                  b &&
                  b.fromJSON &&
                  Object.prototype.hasOwnProperty.call(t, h)
                ) {
                  n[u.name] = b.fromJSON.call(m, e, t[h], n);
                  return;
                }
              }
            n[u.name] = u.init(e, n);
          }
        }),
        n
      );
    }
  };
function K5(i, e, t) {
  for (let r in i) {
    let o = i[r];
    o instanceof Function
      ? (o = o.bind(e))
      : r == "handleDOMEvents" && (o = K5(o, e, {})),
      (t[r] = o);
  }
  return t;
}
var Vr = class {
    constructor(e) {
      (this.spec = e),
        (this.props = {}),
        e.props && K5(e.props, this, this.props),
        (this.key = e.key ? e.key.key : J5("plugin"));
    }
    getState(e) {
      return e[this.key];
    }
  },
  Ig = Object.create(null);
function J5(i) {
  return i in Ig ? i + "$" + ++Ig[i] : ((Ig[i] = 0), i + "$");
}
var Gn = class {
  constructor(e = "key") {
    this.key = J5(e);
  }
  get(e) {
    return e.config.pluginsByKey[this.key];
  }
  getState(e) {
    return e[this.key];
  }
};
var vo = function (i) {
    for (var e = 0; ; e++) if (((i = i.previousSibling), !i)) return e;
  },
  pp = function (i) {
    let e = i.assignedSlot || i.parentNode;
    return e && e.nodeType == 11 ? e.host : e;
  },
  Bg = null,
  tl = function (i, e, t) {
    let r = Bg || (Bg = document.createRange());
    return r.setEnd(i, t ?? i.nodeValue.length), r.setStart(i, e || 0), r;
  },
  BC = function () {
    Bg = null;
  },
  Gc = function (i, e, t, r) {
    return t && (X5(i, e, t, r, -1) || X5(i, e, t, r, 1));
  },
  RC = /^(img|br|input|textarea|hr)$/i;
function X5(i, e, t, r, o) {
  for (;;) {
    if (i == t && e == r) return !0;
    if (e == (o < 0 ? 0 : wa(i))) {
      let n = i.parentNode;
      if (
        !n ||
        n.nodeType != 1 ||
        yp(i) ||
        RC.test(i.nodeName) ||
        i.contentEditable == "false"
      )
        return !1;
      (e = vo(i) + (o < 0 ? 0 : 1)), (i = n);
    } else if (i.nodeType == 1) {
      if (
        ((i = i.childNodes[e + (o < 0 ? -1 : 0)]), i.contentEditable == "false")
      )
        return !1;
      e = o < 0 ? wa(i) : 0;
    } else return !1;
  }
}
function wa(i) {
  return i.nodeType == 3 ? i.nodeValue.length : i.childNodes.length;
}
function UC(i, e) {
  for (;;) {
    if (i.nodeType == 3 && e) return i;
    if (i.nodeType == 1 && e > 0) {
      if (i.contentEditable == "false") return null;
      (i = i.childNodes[e - 1]), (e = wa(i));
    } else if (i.parentNode && !yp(i)) (e = vo(i)), (i = i.parentNode);
    else return null;
  }
}
function VC(i, e) {
  for (;;) {
    if (i.nodeType == 3 && e < i.nodeValue.length) return i;
    if (i.nodeType == 1 && e < i.childNodes.length) {
      if (i.contentEditable == "false") return null;
      (i = i.childNodes[e]), (e = 0);
    } else if (i.parentNode && !yp(i)) (e = vo(i) + 1), (i = i.parentNode);
    else return null;
  }
}
function jC(i, e, t) {
  for (let r = e == 0, o = e == wa(i); r || o; ) {
    if (i == t) return !0;
    let n = vo(i);
    if (((i = i.parentNode), !i)) return !1;
    (r = r && n == 0), (o = o && n == wa(i));
  }
}
function yp(i) {
  let e;
  for (let t = i; t && !(e = t.pmViewDesc); t = t.parentNode);
  return e && e.node && e.node.isBlock && (e.dom == i || e.contentDOM == i);
}
var Q0 = function (i) {
  return (
    i.focusNode && Gc(i.focusNode, i.focusOffset, i.anchorNode, i.anchorOffset)
  );
};
function Vc(i, e) {
  let t = document.createEvent("Event");
  return (
    t.initEvent("keydown", !0, !0), (t.keyCode = i), (t.key = t.code = e), t
  );
}
function HC(i) {
  let e = i.activeElement;
  for (; e && e.shadowRoot; ) e = e.shadowRoot.activeElement;
  return e;
}
function qC(i, e, t) {
  if (i.caretPositionFromPoint)
    try {
      let r = i.caretPositionFromPoint(e, t);
      if (r) return { node: r.offsetNode, offset: r.offset };
    } catch {}
  if (i.caretRangeFromPoint) {
    let r = i.caretRangeFromPoint(e, t);
    if (r) return { node: r.startContainer, offset: r.startOffset };
  }
}
var ka = typeof navigator < "u" ? navigator : null,
  Y5 = typeof document < "u" ? document : null,
  tc = (ka && ka.userAgent) || "",
  Rg = /Edge\/(\d+)/.exec(tc),
  P4 = /MSIE \d/.exec(tc),
  Ug = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tc),
  hs = !!(P4 || Ug || Rg),
  Yl = P4 ? document.documentMode : Ug ? +Ug[1] : Rg ? +Rg[1] : 0,
  oa = !hs && /gecko\/(\d+)/i.test(tc);
oa && +(/Firefox\/(\d+)/.exec(tc) || [0, 0])[1];
var Vg = !hs && /Chrome\/(\d+)/.exec(tc),
  Jo = !!Vg,
  $C = Vg ? +Vg[1] : 0,
  Xo = !hs && !!ka && /Apple Computer/.test(ka.vendor),
  sd = Xo && (/Mobile\/\w+/.test(tc) || (!!ka && ka.maxTouchPoints > 2)),
  Bs = sd || (ka ? /Mac/.test(ka.platform) : !1),
  QC = ka ? /Win/.test(ka.platform) : !1,
  na = /Android \d/.test(tc),
  bp = !!Y5 && "webkitFontSmoothing" in Y5.documentElement.style,
  GC = bp
    ? +(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1]
    : 0;
function WC(i) {
  let e = i.defaultView && i.defaultView.visualViewport;
  return e
    ? { left: 0, right: e.width, top: 0, bottom: e.height }
    : {
        left: 0,
        right: i.documentElement.clientWidth,
        top: 0,
        bottom: i.documentElement.clientHeight,
      };
}
function el(i, e) {
  return typeof i == "number" ? i : i[e];
}
function ZC(i) {
  let e = i.getBoundingClientRect(),
    t = e.width / i.offsetWidth || 1,
    r = e.height / i.offsetHeight || 1;
  return {
    left: e.left,
    right: e.left + i.clientWidth * t,
    top: e.top,
    bottom: e.top + i.clientHeight * r,
  };
}
function e4(i, e, t) {
  let r = i.someProp("scrollThreshold") || 0,
    o = i.someProp("scrollMargin") || 5,
    n = i.dom.ownerDocument;
  for (let u = t || i.dom; u; u = pp(u)) {
    if (u.nodeType != 1) continue;
    let h = u,
      m = h == n.body,
      b = m ? WC(n) : ZC(h),
      _ = 0,
      S = 0;
    if (
      (e.top < b.top + el(r, "top")
        ? (S = -(b.top - e.top + el(o, "top")))
        : e.bottom > b.bottom - el(r, "bottom") &&
          (S =
            e.bottom - e.top > b.bottom - b.top
              ? e.top + el(o, "top") - b.top
              : e.bottom - b.bottom + el(o, "bottom")),
      e.left < b.left + el(r, "left")
        ? (_ = -(b.left - e.left + el(o, "left")))
        : e.right > b.right - el(r, "right") &&
          (_ = e.right - b.right + el(o, "right")),
      _ || S)
    )
      if (m) n.defaultView.scrollBy(_, S);
      else {
        let T = h.scrollLeft,
          D = h.scrollTop;
        S && (h.scrollTop += S), _ && (h.scrollLeft += _);
        let F = h.scrollLeft - T,
          q = h.scrollTop - D;
        e = {
          left: e.left - F,
          top: e.top - q,
          right: e.right - F,
          bottom: e.bottom - q,
        };
      }
    if (m || /^(fixed|sticky)$/.test(getComputedStyle(u).position)) break;
  }
}
function KC(i) {
  let e = i.dom.getBoundingClientRect(),
    t = Math.max(0, e.top),
    r,
    o;
  for (
    let n = (e.left + e.right) / 2, u = t + 1;
    u < Math.min(innerHeight, e.bottom);
    u += 5
  ) {
    let h = i.root.elementFromPoint(n, u);
    if (!h || h == i.dom || !i.dom.contains(h)) continue;
    let m = h.getBoundingClientRect();
    if (m.top >= t - 20) {
      (r = h), (o = m.top);
      break;
    }
  }
  return { refDOM: r, refTop: o, stack: D4(i.dom) };
}
function D4(i) {
  let e = [],
    t = i.ownerDocument;
  for (
    let r = i;
    r && (e.push({ dom: r, top: r.scrollTop, left: r.scrollLeft }), i != t);
    r = pp(r)
  );
  return e;
}
function JC({ refDOM: i, refTop: e, stack: t }) {
  let r = i ? i.getBoundingClientRect().top : 0;
  L4(t, r == 0 ? 0 : r - e);
}
function L4(i, e) {
  for (let t = 0; t < i.length; t++) {
    let { dom: r, top: o, left: n } = i[t];
    r.scrollTop != o + e && (r.scrollTop = o + e),
      r.scrollLeft != n && (r.scrollLeft = n);
  }
}
var id = null;
function XC(i) {
  if (i.setActive) return i.setActive();
  if (id) return i.focus(id);
  let e = D4(i);
  i.focus(
    id == null
      ? {
          get preventScroll() {
            return (id = { preventScroll: !0 }), !0;
          },
        }
      : void 0
  ),
    id || ((id = !1), L4(e, 0));
}
function F4(i, e) {
  let t,
    r = 2e8,
    o,
    n = 0,
    u = e.top,
    h = e.top,
    m,
    b;
  for (let _ = i.firstChild, S = 0; _; _ = _.nextSibling, S++) {
    let T;
    if (_.nodeType == 1) T = _.getClientRects();
    else if (_.nodeType == 3) T = tl(_).getClientRects();
    else continue;
    for (let D = 0; D < T.length; D++) {
      let F = T[D];
      if (F.top <= u && F.bottom >= h) {
        (u = Math.max(F.bottom, u)), (h = Math.min(F.top, h));
        let q =
          F.left > e.left
            ? F.left - e.left
            : F.right < e.left
            ? e.left - F.right
            : 0;
        if (q < r) {
          (t = _),
            (r = q),
            (o =
              q && t.nodeType == 3
                ? { left: F.right < e.left ? F.right : F.left, top: e.top }
                : e),
            _.nodeType == 1 &&
              q &&
              (n = S + (e.left >= (F.left + F.right) / 2 ? 1 : 0));
          continue;
        }
      } else
        F.top > e.top &&
          !m &&
          F.left <= e.left &&
          F.right >= e.left &&
          ((m = _),
          (b = {
            left: Math.max(F.left, Math.min(F.right, e.left)),
            top: F.top,
          }));
      !t &&
        ((e.left >= F.right && e.top >= F.top) ||
          (e.left >= F.left && e.top >= F.bottom)) &&
        (n = S + 1);
    }
  }
  return (
    !t && m && ((t = m), (o = b), (r = 0)),
    t && t.nodeType == 3
      ? YC(t, o)
      : !t || (r && t.nodeType == 1)
      ? { node: i, offset: n }
      : F4(t, o)
  );
}
function YC(i, e) {
  let t = i.nodeValue.length,
    r = document.createRange();
  for (let o = 0; o < t; o++) {
    r.setEnd(i, o + 1), r.setStart(i, o);
    let n = Kl(r, 1);
    if (n.top != n.bottom && r2(e, n))
      return {
        node: i,
        offset: o + (e.left >= (n.left + n.right) / 2 ? 1 : 0),
      };
  }
  return { node: i, offset: 0 };
}
function r2(i, e) {
  return (
    i.left >= e.left - 1 &&
    i.left <= e.right + 1 &&
    i.top >= e.top - 1 &&
    i.top <= e.bottom + 1
  );
}
function eE(i, e) {
  let t = i.parentNode;
  return t &&
    /^li$/i.test(t.nodeName) &&
    e.left < i.getBoundingClientRect().left
    ? t
    : i;
}
function tE(i, e, t) {
  let { node: r, offset: o } = F4(e, t),
    n = -1;
  if (r.nodeType == 1 && !r.firstChild) {
    let u = r.getBoundingClientRect();
    n = u.left != u.right && t.left > (u.left + u.right) / 2 ? 1 : -1;
  }
  return i.docView.posFromDOM(r, o, n);
}
function iE(i, e, t, r) {
  let o = -1;
  for (let n = e, u = !1; n != i.dom; ) {
    let h = i.docView.nearestDesc(n, !0);
    if (!h) return null;
    if (
      h.dom.nodeType == 1 &&
      ((h.node.isBlock && h.parent && !u) || !h.contentDOM)
    ) {
      let m = h.dom.getBoundingClientRect();
      if (
        (h.node.isBlock &&
          h.parent &&
          !u &&
          ((u = !0),
          m.left > r.left || m.top > r.top
            ? (o = h.posBefore)
            : (m.right < r.left || m.bottom < r.top) && (o = h.posAfter)),
        !h.contentDOM && o < 0 && !h.node.isText)
      )
        return (
          h.node.isBlock
            ? r.top < (m.top + m.bottom) / 2
            : r.left < (m.left + m.right) / 2
        )
          ? h.posBefore
          : h.posAfter;
    }
    n = h.dom.parentNode;
  }
  return o > -1 ? o : i.docView.posFromDOM(e, t, -1);
}
function z4(i, e, t) {
  let r = i.childNodes.length;
  if (r && t.top < t.bottom)
    for (
      let o = Math.max(
          0,
          Math.min(
            r - 1,
            Math.floor((r * (e.top - t.top)) / (t.bottom - t.top)) - 2
          )
        ),
        n = o;
      ;

    ) {
      let u = i.childNodes[n];
      if (u.nodeType == 1) {
        let h = u.getClientRects();
        for (let m = 0; m < h.length; m++) {
          let b = h[m];
          if (r2(e, b)) return z4(u, e, b);
        }
      }
      if ((n = (n + 1) % r) == o) break;
    }
  return i;
}
function rE(i, e) {
  let t = i.dom.ownerDocument,
    r,
    o = 0,
    n = qC(t, e.left, e.top);
  n && ({ node: r, offset: o } = n);
  let u = (i.root.elementFromPoint ? i.root : t).elementFromPoint(
      e.left,
      e.top
    ),
    h;
  if (!u || !i.dom.contains(u.nodeType != 1 ? u.parentNode : u)) {
    let b = i.dom.getBoundingClientRect();
    if (!r2(e, b) || ((u = z4(i.dom, e, b)), !u)) return null;
  }
  if (Xo) for (let b = u; r && b; b = pp(b)) b.draggable && (r = void 0);
  if (((u = eE(u, e)), r)) {
    if (
      oa &&
      r.nodeType == 1 &&
      ((o = Math.min(o, r.childNodes.length)), o < r.childNodes.length)
    ) {
      let _ = r.childNodes[o],
        S;
      _.nodeName == "IMG" &&
        (S = _.getBoundingClientRect()).right <= e.left &&
        S.bottom > e.top &&
        o++;
    }
    let b;
    bp &&
      o &&
      r.nodeType == 1 &&
      (b = r.childNodes[o - 1]).nodeType == 1 &&
      b.contentEditable == "false" &&
      b.getBoundingClientRect().top >= e.top &&
      o--,
      r == i.dom &&
      o == r.childNodes.length - 1 &&
      r.lastChild.nodeType == 1 &&
      e.top > r.lastChild.getBoundingClientRect().bottom
        ? (h = i.state.doc.content.size)
        : (o == 0 || r.nodeType != 1 || r.childNodes[o - 1].nodeName != "BR") &&
          (h = iE(i, r, o, e));
  }
  h == null && (h = tE(i, u, e));
  let m = i.docView.nearestDesc(u, !0);
  return { pos: h, inside: m ? m.posAtStart - m.border : -1 };
}
function t4(i) {
  return i.top < i.bottom || i.left < i.right;
}
function Kl(i, e) {
  let t = i.getClientRects();
  if (t.length) {
    let r = t[e < 0 ? 0 : t.length - 1];
    if (t4(r)) return r;
  }
  return Array.prototype.find.call(t, t4) || i.getBoundingClientRect();
}
var nE = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;
function N4(i, e, t) {
  let { node: r, offset: o, atom: n } = i.docView.domFromPos(e, t < 0 ? -1 : 1),
    u = bp || oa;
  if (r.nodeType == 3)
    if (u && (nE.test(r.nodeValue) || (t < 0 ? !o : o == r.nodeValue.length))) {
      let m = Kl(tl(r, o, o), t);
      if (oa && o && /\s/.test(r.nodeValue[o - 1]) && o < r.nodeValue.length) {
        let b = Kl(tl(r, o - 1, o - 1), -1);
        if (b.top == m.top) {
          let _ = Kl(tl(r, o, o + 1), -1);
          if (_.top != m.top) return up(_, _.left < b.left);
        }
      }
      return m;
    } else {
      let m = o,
        b = o,
        _ = t < 0 ? 1 : -1;
      return (
        t < 0 && !o
          ? (b++, (_ = -1))
          : t >= 0 && o == r.nodeValue.length
          ? (m--, (_ = 1))
          : t < 0
          ? m--
          : b++,
        up(Kl(tl(r, m, b), _), _ < 0)
      );
    }
  if (!i.state.doc.resolve(e - (n || 0)).parent.inlineContent) {
    if (n == null && o && (t < 0 || o == wa(r))) {
      let m = r.childNodes[o - 1];
      if (m.nodeType == 1) return Fg(m.getBoundingClientRect(), !1);
    }
    if (n == null && o < wa(r)) {
      let m = r.childNodes[o];
      if (m.nodeType == 1) return Fg(m.getBoundingClientRect(), !0);
    }
    return Fg(r.getBoundingClientRect(), t >= 0);
  }
  if (n == null && o && (t < 0 || o == wa(r))) {
    let m = r.childNodes[o - 1],
      b =
        m.nodeType == 3
          ? tl(m, wa(m) - (u ? 0 : 1))
          : m.nodeType == 1 && (m.nodeName != "BR" || !m.nextSibling)
          ? m
          : null;
    if (b) return up(Kl(b, 1), !1);
  }
  if (n == null && o < wa(r)) {
    let m = r.childNodes[o];
    for (; m.pmViewDesc && m.pmViewDesc.ignoreForCoords; ) m = m.nextSibling;
    let b = m
      ? m.nodeType == 3
        ? tl(m, 0, u ? 0 : 1)
        : m.nodeType == 1
        ? m
        : null
      : null;
    if (b) return up(Kl(b, -1), !0);
  }
  return up(Kl(r.nodeType == 3 ? tl(r) : r, -t), t >= 0);
}
function up(i, e) {
  if (i.width == 0) return i;
  let t = e ? i.left : i.right;
  return { top: i.top, bottom: i.bottom, left: t, right: t };
}
function Fg(i, e) {
  if (i.height == 0) return i;
  let t = e ? i.top : i.bottom;
  return { top: t, bottom: t, left: i.left, right: i.right };
}
function O4(i, e, t) {
  let r = i.state,
    o = i.root.activeElement;
  r != e && i.updateState(e), o != i.dom && i.focus();
  try {
    return t();
  } finally {
    r != e && i.updateState(r), o != i.dom && o && o.focus();
  }
}
function oE(i, e, t) {
  let r = e.selection,
    o = t == "up" ? r.$from : r.$to;
  return O4(i, e, () => {
    let { node: n } = i.docView.domFromPos(o.pos, t == "up" ? -1 : 1);
    for (;;) {
      let h = i.docView.nearestDesc(n, !0);
      if (!h) break;
      if (h.node.isBlock) {
        n = h.contentDOM || h.dom;
        break;
      }
      n = h.dom.parentNode;
    }
    let u = N4(i, o.pos, 1);
    for (let h = n.firstChild; h; h = h.nextSibling) {
      let m;
      if (h.nodeType == 1) m = h.getClientRects();
      else if (h.nodeType == 3)
        m = tl(h, 0, h.nodeValue.length).getClientRects();
      else continue;
      for (let b = 0; b < m.length; b++) {
        let _ = m[b];
        if (
          _.bottom > _.top + 1 &&
          (t == "up"
            ? u.top - _.top > (_.bottom - u.top) * 2
            : _.bottom - u.bottom > (u.bottom - _.top) * 2)
        )
          return !1;
      }
    }
    return !0;
  });
}
var sE = /[\u0590-\u08ac]/;
function aE(i, e, t) {
  let { $head: r } = e.selection;
  if (!r.parent.isTextblock) return !1;
  let o = r.parentOffset,
    n = !o,
    u = o == r.parent.content.size,
    h = i.domSelection();
  return !sE.test(r.parent.textContent) || !h.modify
    ? t == "left" || t == "backward"
      ? n
      : u
    : O4(i, e, () => {
        let {
            focusNode: m,
            focusOffset: b,
            anchorNode: _,
            anchorOffset: S,
          } = i.domSelectionRange(),
          T = h.caretBidiLevel;
        h.modify("move", t, "character");
        let D = r.depth ? i.docView.domAfterPos(r.before()) : i.dom,
          { focusNode: F, focusOffset: q } = i.domSelectionRange(),
          Q =
            (F && !D.contains(F.nodeType == 1 ? F : F.parentNode)) ||
            (m == F && b == q);
        try {
          h.collapse(_, S),
            m && (m != _ || b != S) && h.extend && h.extend(m, b);
        } catch {}
        return T != null && (h.caretBidiLevel = T), Q;
      });
}
var i4 = null,
  r4 = null,
  n4 = !1;
function lE(i, e, t) {
  return i4 == e && r4 == t
    ? n4
    : ((i4 = e),
      (r4 = t),
      (n4 = t == "up" || t == "down" ? oE(i, e, t) : aE(i, e, t)));
}
var Rs = 0,
  o4 = 1,
  jc = 2,
  Sa = 3,
  Wc = class {
    constructor(e, t, r, o) {
      (this.parent = e),
        (this.children = t),
        (this.dom = r),
        (this.contentDOM = o),
        (this.dirty = Rs),
        (r.pmViewDesc = this);
    }
    matchesWidget(e) {
      return !1;
    }
    matchesMark(e) {
      return !1;
    }
    matchesNode(e, t, r) {
      return !1;
    }
    matchesHack(e) {
      return !1;
    }
    parseRule() {
      return null;
    }
    stopEvent(e) {
      return !1;
    }
    get size() {
      let e = 0;
      for (let t = 0; t < this.children.length; t++) e += this.children[t].size;
      return e;
    }
    get border() {
      return 0;
    }
    destroy() {
      (this.parent = void 0),
        this.dom.pmViewDesc == this && (this.dom.pmViewDesc = void 0);
      for (let e = 0; e < this.children.length; e++) this.children[e].destroy();
    }
    posBeforeChild(e) {
      for (let t = 0, r = this.posAtStart; ; t++) {
        let o = this.children[t];
        if (o == e) return r;
        r += o.size;
      }
    }
    get posBefore() {
      return this.parent.posBeforeChild(this);
    }
    get posAtStart() {
      return this.parent ? this.parent.posBeforeChild(this) + this.border : 0;
    }
    get posAfter() {
      return this.posBefore + this.size;
    }
    get posAtEnd() {
      return this.posAtStart + this.size - 2 * this.border;
    }
    localPosFromDOM(e, t, r) {
      if (
        this.contentDOM &&
        this.contentDOM.contains(e.nodeType == 1 ? e : e.parentNode)
      )
        if (r < 0) {
          let n, u;
          if (e == this.contentDOM) n = e.childNodes[t - 1];
          else {
            for (; e.parentNode != this.contentDOM; ) e = e.parentNode;
            n = e.previousSibling;
          }
          for (; n && !((u = n.pmViewDesc) && u.parent == this); )
            n = n.previousSibling;
          return n ? this.posBeforeChild(u) + u.size : this.posAtStart;
        } else {
          let n, u;
          if (e == this.contentDOM) n = e.childNodes[t];
          else {
            for (; e.parentNode != this.contentDOM; ) e = e.parentNode;
            n = e.nextSibling;
          }
          for (; n && !((u = n.pmViewDesc) && u.parent == this); )
            n = n.nextSibling;
          return n ? this.posBeforeChild(u) : this.posAtEnd;
        }
      let o;
      if (e == this.dom && this.contentDOM) o = t > vo(this.contentDOM);
      else if (
        this.contentDOM &&
        this.contentDOM != this.dom &&
        this.dom.contains(this.contentDOM)
      )
        o = e.compareDocumentPosition(this.contentDOM) & 2;
      else if (this.dom.firstChild) {
        if (t == 0)
          for (let n = e; ; n = n.parentNode) {
            if (n == this.dom) {
              o = !1;
              break;
            }
            if (n.previousSibling) break;
          }
        if (o == null && t == e.childNodes.length)
          for (let n = e; ; n = n.parentNode) {
            if (n == this.dom) {
              o = !0;
              break;
            }
            if (n.nextSibling) break;
          }
      }
      return o ?? r > 0 ? this.posAtEnd : this.posAtStart;
    }
    nearestDesc(e, t = !1) {
      for (let r = !0, o = e; o; o = o.parentNode) {
        let n = this.getDesc(o),
          u;
        if (n && (!t || n.node))
          if (
            r &&
            (u = n.nodeDOM) &&
            !(u.nodeType == 1
              ? u.contains(e.nodeType == 1 ? e : e.parentNode)
              : u == e)
          )
            r = !1;
          else return n;
      }
    }
    getDesc(e) {
      let t = e.pmViewDesc;
      for (let r = t; r; r = r.parent) if (r == this) return t;
    }
    posFromDOM(e, t, r) {
      for (let o = e; o; o = o.parentNode) {
        let n = this.getDesc(o);
        if (n) return n.localPosFromDOM(e, t, r);
      }
      return -1;
    }
    descAt(e) {
      for (let t = 0, r = 0; t < this.children.length; t++) {
        let o = this.children[t],
          n = r + o.size;
        if (r == e && n != r) {
          for (; !o.border && o.children.length; ) o = o.children[0];
          return o;
        }
        if (e < n) return o.descAt(e - r - o.border);
        r = n;
      }
    }
    domFromPos(e, t) {
      if (!this.contentDOM) return { node: this.dom, offset: 0, atom: e + 1 };
      let r = 0,
        o = 0;
      for (let n = 0; r < this.children.length; r++) {
        let u = this.children[r],
          h = n + u.size;
        if (h > e || u instanceof B0) {
          o = e - n;
          break;
        }
        n = h;
      }
      if (o) return this.children[r].domFromPos(o - this.children[r].border, t);
      for (
        let n;
        r && !(n = this.children[r - 1]).size && n instanceof N0 && n.side >= 0;
        r--
      );
      if (t <= 0) {
        let n,
          u = !0;
        for (
          ;
          (n = r ? this.children[r - 1] : null),
            !(!n || n.dom.parentNode == this.contentDOM);
          r--, u = !1
        );
        return n && t && u && !n.border && !n.domAtom
          ? n.domFromPos(n.size, t)
          : { node: this.contentDOM, offset: n ? vo(n.dom) + 1 : 0 };
      } else {
        let n,
          u = !0;
        for (
          ;
          (n = r < this.children.length ? this.children[r] : null),
            !(!n || n.dom.parentNode == this.contentDOM);
          r++, u = !1
        );
        return n && u && !n.border && !n.domAtom
          ? n.domFromPos(0, t)
          : {
              node: this.contentDOM,
              offset: n ? vo(n.dom) : this.contentDOM.childNodes.length,
            };
      }
    }
    parseRange(e, t, r = 0) {
      if (this.children.length == 0)
        return {
          node: this.contentDOM,
          from: e,
          to: t,
          fromOffset: 0,
          toOffset: this.contentDOM.childNodes.length,
        };
      let o = -1,
        n = -1;
      for (let u = r, h = 0; ; h++) {
        let m = this.children[h],
          b = u + m.size;
        if (o == -1 && e <= b) {
          let _ = u + m.border;
          if (
            e >= _ &&
            t <= b - m.border &&
            m.node &&
            m.contentDOM &&
            this.contentDOM.contains(m.contentDOM)
          )
            return m.parseRange(e, t, _);
          e = u;
          for (let S = h; S > 0; S--) {
            let T = this.children[S - 1];
            if (
              T.size &&
              T.dom.parentNode == this.contentDOM &&
              !T.emptyChildAt(1)
            ) {
              o = vo(T.dom) + 1;
              break;
            }
            e -= T.size;
          }
          o == -1 && (o = 0);
        }
        if (o > -1 && (b > t || h == this.children.length - 1)) {
          t = b;
          for (let _ = h + 1; _ < this.children.length; _++) {
            let S = this.children[_];
            if (
              S.size &&
              S.dom.parentNode == this.contentDOM &&
              !S.emptyChildAt(-1)
            ) {
              n = vo(S.dom);
              break;
            }
            t += S.size;
          }
          n == -1 && (n = this.contentDOM.childNodes.length);
          break;
        }
        u = b;
      }
      return {
        node: this.contentDOM,
        from: e,
        to: t,
        fromOffset: o,
        toOffset: n,
      };
    }
    emptyChildAt(e) {
      if (this.border || !this.contentDOM || !this.children.length) return !1;
      let t = this.children[e < 0 ? 0 : this.children.length - 1];
      return t.size == 0 || t.emptyChildAt(e);
    }
    domAfterPos(e) {
      let { node: t, offset: r } = this.domFromPos(e, 0);
      if (t.nodeType != 1 || r == t.childNodes.length)
        throw new RangeError("No node after pos " + e);
      return t.childNodes[r];
    }
    setSelection(e, t, r, o = !1) {
      let n = Math.min(e, t),
        u = Math.max(e, t);
      for (let T = 0, D = 0; T < this.children.length; T++) {
        let F = this.children[T],
          q = D + F.size;
        if (n > D && u < q)
          return F.setSelection(e - D - F.border, t - D - F.border, r, o);
        D = q;
      }
      let h = this.domFromPos(e, e ? -1 : 1),
        m = t == e ? h : this.domFromPos(t, t ? -1 : 1),
        b = r.getSelection(),
        _ = !1;
      if ((oa || Xo) && e == t) {
        let { node: T, offset: D } = h;
        if (T.nodeType == 3) {
          if (
            ((_ = !!(
              D &&
              T.nodeValue[D - 1] ==
                `
`
            )),
            _ && D == T.nodeValue.length)
          )
            for (let F = T, q; F; F = F.parentNode) {
              if ((q = F.nextSibling)) {
                q.nodeName == "BR" &&
                  (h = m = { node: q.parentNode, offset: vo(q) + 1 });
                break;
              }
              let Q = F.pmViewDesc;
              if (Q && Q.node && Q.node.isBlock) break;
            }
        } else {
          let F = T.childNodes[D - 1];
          _ = F && (F.nodeName == "BR" || F.contentEditable == "false");
        }
      }
      if (
        oa &&
        b.focusNode &&
        b.focusNode != m.node &&
        b.focusNode.nodeType == 1
      ) {
        let T = b.focusNode.childNodes[b.focusOffset];
        T && T.contentEditable == "false" && (o = !0);
      }
      if (
        !(o || (_ && Xo)) &&
        Gc(h.node, h.offset, b.anchorNode, b.anchorOffset) &&
        Gc(m.node, m.offset, b.focusNode, b.focusOffset)
      )
        return;
      let S = !1;
      if ((b.extend || e == t) && !_) {
        b.collapse(h.node, h.offset);
        try {
          e != t && b.extend(m.node, m.offset), (S = !0);
        } catch {}
      }
      if (!S) {
        if (e > t) {
          let D = h;
          (h = m), (m = D);
        }
        let T = document.createRange();
        T.setEnd(m.node, m.offset),
          T.setStart(h.node, h.offset),
          b.removeAllRanges(),
          b.addRange(T);
      }
    }
    ignoreMutation(e) {
      return !this.contentDOM && e.type != "selection";
    }
    get contentLost() {
      return (
        this.contentDOM &&
        this.contentDOM != this.dom &&
        !this.dom.contains(this.contentDOM)
      );
    }
    markDirty(e, t) {
      for (let r = 0, o = 0; o < this.children.length; o++) {
        let n = this.children[o],
          u = r + n.size;
        if (r == u ? e <= u && t >= r : e < u && t > r) {
          let h = r + n.border,
            m = u - n.border;
          if (e >= h && t <= m) {
            (this.dirty = e == r || t == u ? jc : o4),
              e == h &&
              t == m &&
              (n.contentLost || n.dom.parentNode != this.contentDOM)
                ? (n.dirty = Sa)
                : n.markDirty(e - h, t - h);
            return;
          } else
            n.dirty =
              n.dom == n.contentDOM &&
              n.dom.parentNode == this.contentDOM &&
              !n.children.length
                ? jc
                : Sa;
        }
        r = u;
      }
      this.dirty = jc;
    }
    markParentsDirty() {
      let e = 1;
      for (let t = this.parent; t; t = t.parent, e++) {
        let r = e == 1 ? jc : o4;
        t.dirty < r && (t.dirty = r);
      }
    }
    get domAtom() {
      return !1;
    }
    get ignoreForCoords() {
      return !1;
    }
    isText(e) {
      return !1;
    }
  },
  N0 = class extends Wc {
    constructor(e, t, r, o) {
      let n,
        u = t.type.toDOM;
      if (
        (typeof u == "function" &&
          (u = u(r, () => {
            if (!n) return o;
            if (n.parent) return n.parent.posBeforeChild(n);
          })),
        !t.type.spec.raw)
      ) {
        if (u.nodeType != 1) {
          let h = document.createElement("span");
          h.appendChild(u), (u = h);
        }
        (u.contentEditable = "false"), u.classList.add("ProseMirror-widget");
      }
      super(e, [], u, null), (this.widget = t), (this.widget = t), (n = this);
    }
    matchesWidget(e) {
      return this.dirty == Rs && e.type.eq(this.widget.type);
    }
    parseRule() {
      return { ignore: !0 };
    }
    stopEvent(e) {
      let t = this.widget.spec.stopEvent;
      return t ? t(e) : !1;
    }
    ignoreMutation(e) {
      return e.type != "selection" || this.widget.spec.ignoreSelection;
    }
    destroy() {
      this.widget.type.destroy(this.dom), super.destroy();
    }
    get domAtom() {
      return !0;
    }
    get side() {
      return this.widget.type.side;
    }
  },
  jg = class extends Wc {
    constructor(e, t, r, o) {
      super(e, [], t, null), (this.textDOM = r), (this.text = o);
    }
    get size() {
      return this.text.length;
    }
    localPosFromDOM(e, t) {
      return e != this.textDOM
        ? this.posAtStart + (t ? this.size : 0)
        : this.posAtStart + t;
    }
    domFromPos(e) {
      return { node: this.textDOM, offset: e };
    }
    ignoreMutation(e) {
      return e.type === "characterData" && e.target.nodeValue == e.oldValue;
    }
  },
  ad = class i extends Wc {
    constructor(e, t, r, o) {
      super(e, [], r, o), (this.mark = t);
    }
    static create(e, t, r, o) {
      let n = o.nodeViews[t.type.name],
        u = n && n(t, o, r);
      return (
        (!u || !u.dom) &&
          (u = Ja.renderSpec(document, t.type.spec.toDOM(t, r))),
        new i(e, t, u.dom, u.contentDOM || u.dom)
      );
    }
    parseRule() {
      return this.dirty & Sa || this.mark.type.spec.reparseInView
        ? null
        : {
            mark: this.mark.type.name,
            attrs: this.mark.attrs,
            contentElement: this.contentDOM,
          };
    }
    matchesMark(e) {
      return this.dirty != Sa && this.mark.eq(e);
    }
    markDirty(e, t) {
      if ((super.markDirty(e, t), this.dirty != Rs)) {
        let r = this.parent;
        for (; !r.node; ) r = r.parent;
        r.dirty < this.dirty && (r.dirty = this.dirty), (this.dirty = Rs);
      }
    }
    slice(e, t, r) {
      let o = i.create(this.parent, this.mark, !0, r),
        n = this.children,
        u = this.size;
      t < u && (n = Gg(n, t, u, r)), e > 0 && (n = Gg(n, 0, e, r));
      for (let h = 0; h < n.length; h++) n[h].parent = o;
      return (o.children = n), o;
    }
  },
  ec = class i extends Wc {
    constructor(e, t, r, o, n, u, h, m, b) {
      super(e, [], n, u),
        (this.node = t),
        (this.outerDeco = r),
        (this.innerDeco = o),
        (this.nodeDOM = h);
    }
    static create(e, t, r, o, n, u) {
      let h = n.nodeViews[t.type.name],
        m,
        b =
          h &&
          h(
            t,
            n,
            () => {
              if (!m) return u;
              if (m.parent) return m.parent.posBeforeChild(m);
            },
            r,
            o
          ),
        _ = b && b.dom,
        S = b && b.contentDOM;
      if (t.isText) {
        if (!_) _ = document.createTextNode(t.text);
        else if (_.nodeType != 3)
          throw new RangeError("Text must be rendered as a DOM text node");
      } else
        _ ||
          ({ dom: _, contentDOM: S } = Ja.renderSpec(
            document,
            t.type.spec.toDOM(t)
          ));
      !S &&
        !t.isText &&
        _.nodeName != "BR" &&
        (_.hasAttribute("contenteditable") || (_.contentEditable = "false"),
        t.type.spec.draggable && (_.draggable = !0));
      let T = _;
      return (
        (_ = U4(_, r, t)),
        b
          ? (m = new Hg(e, t, r, o, _, S || null, T, b, n, u + 1))
          : t.isText
          ? new O0(e, t, r, o, _, T, n)
          : new i(e, t, r, o, _, S || null, T, n, u + 1)
      );
    }
    parseRule() {
      if (this.node.type.spec.reparseInView) return null;
      let e = { node: this.node.type.name, attrs: this.node.attrs };
      if (
        (this.node.type.whitespace == "pre" && (e.preserveWhitespace = "full"),
        !this.contentDOM)
      )
        e.getContent = () => this.node.content;
      else if (!this.contentLost) e.contentElement = this.contentDOM;
      else {
        for (let t = this.children.length - 1; t >= 0; t--) {
          let r = this.children[t];
          if (this.dom.contains(r.dom.parentNode)) {
            e.contentElement = r.dom.parentNode;
            break;
          }
        }
        e.contentElement || (e.getContent = () => Ct.empty);
      }
      return e;
    }
    matchesNode(e, t, r) {
      return (
        this.dirty == Rs &&
        e.eq(this.node) &&
        $g(t, this.outerDeco) &&
        r.eq(this.innerDeco)
      );
    }
    get size() {
      return this.node.nodeSize;
    }
    get border() {
      return this.node.isLeaf ? 0 : 1;
    }
    updateChildren(e, t) {
      let r = this.node.inlineContent,
        o = t,
        n = e.composing ? this.localCompositionInfo(e, t) : null,
        u = n && n.pos > -1 ? n : null,
        h = n && n.pos < 0,
        m = new Qg(this, u && u.node, e);
      hE(
        this.node,
        this.innerDeco,
        (b, _, S) => {
          b.spec.marks
            ? m.syncToMarks(b.spec.marks, r, e)
            : b.type.side >= 0 &&
              !S &&
              m.syncToMarks(
                _ == this.node.childCount ? ur.none : this.node.child(_).marks,
                r,
                e
              ),
            m.placeWidget(b, e, o);
        },
        (b, _, S, T) => {
          m.syncToMarks(b.marks, r, e);
          let D;
          m.findNodeMatch(b, _, S, T) ||
            (h &&
              e.state.selection.from > o &&
              e.state.selection.to < o + b.nodeSize &&
              (D = m.findIndexWithChild(n.node)) > -1 &&
              m.updateNodeAt(b, _, S, D, e)) ||
            m.updateNextNode(b, _, S, e, T, o) ||
            m.addNode(b, _, S, e, o),
            (o += b.nodeSize);
        }
      ),
        m.syncToMarks([], r, e),
        this.node.isTextblock && m.addTextblockHacks(),
        m.destroyRest(),
        (m.changed || this.dirty == jc) &&
          (u && this.protectLocalComposition(e, u),
          B4(this.contentDOM, this.children, e),
          sd && pE(this.dom));
    }
    localCompositionInfo(e, t) {
      let { from: r, to: o } = e.state.selection;
      if (
        !(e.state.selection instanceof Mi) ||
        r < t ||
        o > t + this.node.content.size
      )
        return null;
      let n = e.input.compositionNode;
      if (!n || !this.dom.contains(n.parentNode)) return null;
      if (this.node.inlineContent) {
        let u = n.nodeValue,
          h = fE(this.node.content, u, r - t, o - t);
        return h < 0 ? null : { node: n, pos: h, text: u };
      } else return { node: n, pos: -1, text: "" };
    }
    protectLocalComposition(e, { node: t, pos: r, text: o }) {
      if (this.getDesc(t)) return;
      let n = t;
      for (; n.parentNode != this.contentDOM; n = n.parentNode) {
        for (; n.previousSibling; ) n.parentNode.removeChild(n.previousSibling);
        for (; n.nextSibling; ) n.parentNode.removeChild(n.nextSibling);
        n.pmViewDesc && (n.pmViewDesc = void 0);
      }
      let u = new jg(this, n, t, o);
      e.input.compositionNodes.push(u),
        (this.children = Gg(this.children, r, r + o.length, e, u));
    }
    update(e, t, r, o) {
      return this.dirty == Sa || !e.sameMarkup(this.node)
        ? !1
        : (this.updateInner(e, t, r, o), !0);
    }
    updateInner(e, t, r, o) {
      this.updateOuterDeco(t),
        (this.node = e),
        (this.innerDeco = r),
        this.contentDOM && this.updateChildren(o, this.posAtStart),
        (this.dirty = Rs);
    }
    updateOuterDeco(e) {
      if ($g(e, this.outerDeco)) return;
      let t = this.nodeDOM.nodeType != 1,
        r = this.dom;
      (this.dom = R4(
        this.dom,
        this.nodeDOM,
        qg(this.outerDeco, this.node, t),
        qg(e, this.node, t)
      )),
        this.dom != r &&
          ((r.pmViewDesc = void 0), (this.dom.pmViewDesc = this)),
        (this.outerDeco = e);
    }
    selectNode() {
      this.nodeDOM.nodeType == 1 &&
        this.nodeDOM.classList.add("ProseMirror-selectednode"),
        (this.contentDOM || !this.node.type.spec.draggable) &&
          (this.dom.draggable = !0);
    }
    deselectNode() {
      this.nodeDOM.nodeType == 1 &&
        this.nodeDOM.classList.remove("ProseMirror-selectednode"),
        (this.contentDOM || !this.node.type.spec.draggable) &&
          this.dom.removeAttribute("draggable");
    }
    get domAtom() {
      return this.node.isAtom;
    }
  };
function s4(i, e, t, r, o) {
  U4(r, e, i);
  let n = new ec(void 0, i, e, t, r, r, r, o, 0);
  return n.contentDOM && n.updateChildren(o, 0), n;
}
var O0 = class i extends ec {
    constructor(e, t, r, o, n, u, h) {
      super(e, t, r, o, n, null, u, h, 0);
    }
    parseRule() {
      let e = this.nodeDOM.parentNode;
      for (; e && e != this.dom && !e.pmIsDeco; ) e = e.parentNode;
      return { skip: e || !0 };
    }
    update(e, t, r, o) {
      return this.dirty == Sa ||
        (this.dirty != Rs && !this.inParent()) ||
        !e.sameMarkup(this.node)
        ? !1
        : (this.updateOuterDeco(t),
          (this.dirty != Rs || e.text != this.node.text) &&
            e.text != this.nodeDOM.nodeValue &&
            ((this.nodeDOM.nodeValue = e.text),
            o.trackWrites == this.nodeDOM && (o.trackWrites = null)),
          (this.node = e),
          (this.dirty = Rs),
          !0);
    }
    inParent() {
      let e = this.parent.contentDOM;
      for (let t = this.nodeDOM; t; t = t.parentNode) if (t == e) return !0;
      return !1;
    }
    domFromPos(e) {
      return { node: this.nodeDOM, offset: e };
    }
    localPosFromDOM(e, t, r) {
      return e == this.nodeDOM
        ? this.posAtStart + Math.min(t, this.node.text.length)
        : super.localPosFromDOM(e, t, r);
    }
    ignoreMutation(e) {
      return e.type != "characterData" && e.type != "selection";
    }
    slice(e, t, r) {
      let o = this.node.cut(e, t),
        n = document.createTextNode(o.text);
      return new i(this.parent, o, this.outerDeco, this.innerDeco, n, n, r);
    }
    markDirty(e, t) {
      super.markDirty(e, t),
        this.dom != this.nodeDOM &&
          (e == 0 || t == this.nodeDOM.nodeValue.length) &&
          (this.dirty = Sa);
    }
    get domAtom() {
      return !1;
    }
    isText(e) {
      return this.node.text == e;
    }
  },
  B0 = class extends Wc {
    parseRule() {
      return { ignore: !0 };
    }
    matchesHack(e) {
      return this.dirty == Rs && this.dom.nodeName == e;
    }
    get domAtom() {
      return !0;
    }
    get ignoreForCoords() {
      return this.dom.nodeName == "IMG";
    }
  },
  Hg = class extends ec {
    constructor(e, t, r, o, n, u, h, m, b, _) {
      super(e, t, r, o, n, u, h, b, _), (this.spec = m);
    }
    update(e, t, r, o) {
      if (this.dirty == Sa) return !1;
      if (this.spec.update) {
        let n = this.spec.update(e, t, r);
        return n && this.updateInner(e, t, r, o), n;
      } else
        return !this.contentDOM && !e.isLeaf ? !1 : super.update(e, t, r, o);
    }
    selectNode() {
      this.spec.selectNode ? this.spec.selectNode() : super.selectNode();
    }
    deselectNode() {
      this.spec.deselectNode ? this.spec.deselectNode() : super.deselectNode();
    }
    setSelection(e, t, r, o) {
      this.spec.setSelection
        ? this.spec.setSelection(e, t, r)
        : super.setSelection(e, t, r, o);
    }
    destroy() {
      this.spec.destroy && this.spec.destroy(), super.destroy();
    }
    stopEvent(e) {
      return this.spec.stopEvent ? this.spec.stopEvent(e) : !1;
    }
    ignoreMutation(e) {
      return this.spec.ignoreMutation
        ? this.spec.ignoreMutation(e)
        : super.ignoreMutation(e);
    }
  };
function B4(i, e, t) {
  let r = i.firstChild,
    o = !1;
  for (let n = 0; n < e.length; n++) {
    let u = e[n],
      h = u.dom;
    if (h.parentNode == i) {
      for (; h != r; ) (r = a4(r)), (o = !0);
      r = r.nextSibling;
    } else (o = !0), i.insertBefore(h, r);
    if (u instanceof ad) {
      let m = r ? r.previousSibling : i.lastChild;
      B4(u.contentDOM, u.children, t), (r = m ? m.nextSibling : i.firstChild);
    }
  }
  for (; r; ) (r = a4(r)), (o = !0);
  o && t.trackWrites == i && (t.trackWrites = null);
}
var dp = function (i) {
  i && (this.nodeName = i);
};
dp.prototype = Object.create(null);
var Hc = [new dp()];
function qg(i, e, t) {
  if (i.length == 0) return Hc;
  let r = t ? Hc[0] : new dp(),
    o = [r];
  for (let n = 0; n < i.length; n++) {
    let u = i[n].type.attrs;
    if (u) {
      u.nodeName && o.push((r = new dp(u.nodeName)));
      for (let h in u) {
        let m = u[h];
        m != null &&
          (t &&
            o.length == 1 &&
            o.push((r = new dp(e.isInline ? "span" : "div"))),
          h == "class"
            ? (r.class = (r.class ? r.class + " " : "") + m)
            : h == "style"
            ? (r.style = (r.style ? r.style + ";" : "") + m)
            : h != "nodeName" && (r[h] = m));
      }
    }
  }
  return o;
}
function R4(i, e, t, r) {
  if (t == Hc && r == Hc) return e;
  let o = e;
  for (let n = 0; n < r.length; n++) {
    let u = r[n],
      h = t[n];
    if (n) {
      let m;
      (h &&
        h.nodeName == u.nodeName &&
        o != i &&
        (m = o.parentNode) &&
        m.nodeName.toLowerCase() == u.nodeName) ||
        ((m = document.createElement(u.nodeName)),
        (m.pmIsDeco = !0),
        m.appendChild(o),
        (h = Hc[0])),
        (o = m);
    }
    cE(o, h || Hc[0], u);
  }
  return o;
}
function cE(i, e, t) {
  for (let r in e)
    r != "class" &&
      r != "style" &&
      r != "nodeName" &&
      !(r in t) &&
      i.removeAttribute(r);
  for (let r in t)
    r != "class" &&
      r != "style" &&
      r != "nodeName" &&
      t[r] != e[r] &&
      i.setAttribute(r, t[r]);
  if (e.class != t.class) {
    let r = e.class ? e.class.split(" ").filter(Boolean) : [],
      o = t.class ? t.class.split(" ").filter(Boolean) : [];
    for (let n = 0; n < r.length; n++)
      o.indexOf(r[n]) == -1 && i.classList.remove(r[n]);
    for (let n = 0; n < o.length; n++)
      r.indexOf(o[n]) == -1 && i.classList.add(o[n]);
    i.classList.length == 0 && i.removeAttribute("class");
  }
  if (e.style != t.style) {
    if (e.style) {
      let r =
          /\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,
        o;
      for (; (o = r.exec(e.style)); ) i.style.removeProperty(o[1]);
    }
    t.style && (i.style.cssText += t.style);
  }
}
function U4(i, e, t) {
  return R4(i, i, Hc, qg(e, t, i.nodeType != 1));
}
function $g(i, e) {
  if (i.length != e.length) return !1;
  for (let t = 0; t < i.length; t++) if (!i[t].type.eq(e[t].type)) return !1;
  return !0;
}
function a4(i) {
  let e = i.nextSibling;
  return i.parentNode.removeChild(i), e;
}
var Qg = class {
  constructor(e, t, r) {
    (this.lock = t),
      (this.view = r),
      (this.index = 0),
      (this.stack = []),
      (this.changed = !1),
      (this.top = e),
      (this.preMatch = uE(e.node.content, e));
  }
  destroyBetween(e, t) {
    if (e != t) {
      for (let r = e; r < t; r++) this.top.children[r].destroy();
      this.top.children.splice(e, t - e), (this.changed = !0);
    }
  }
  destroyRest() {
    this.destroyBetween(this.index, this.top.children.length);
  }
  syncToMarks(e, t, r) {
    let o = 0,
      n = this.stack.length >> 1,
      u = Math.min(n, e.length);
    for (
      ;
      o < u &&
      (o == n - 1 ? this.top : this.stack[(o + 1) << 1]).matchesMark(e[o]) &&
      e[o].type.spec.spanning !== !1;

    )
      o++;
    for (; o < n; )
      this.destroyRest(),
        (this.top.dirty = Rs),
        (this.index = this.stack.pop()),
        (this.top = this.stack.pop()),
        n--;
    for (; n < e.length; ) {
      this.stack.push(this.top, this.index + 1);
      let h = -1;
      for (
        let m = this.index;
        m < Math.min(this.index + 3, this.top.children.length);
        m++
      ) {
        let b = this.top.children[m];
        if (b.matchesMark(e[n]) && !this.isLocked(b.dom)) {
          h = m;
          break;
        }
      }
      if (h > -1)
        h > this.index &&
          ((this.changed = !0), this.destroyBetween(this.index, h)),
          (this.top = this.top.children[this.index]);
      else {
        let m = ad.create(this.top, e[n], t, r);
        this.top.children.splice(this.index, 0, m),
          (this.top = m),
          (this.changed = !0);
      }
      (this.index = 0), n++;
    }
  }
  findNodeMatch(e, t, r, o) {
    let n = -1,
      u;
    if (
      o >= this.preMatch.index &&
      (u = this.preMatch.matches[o - this.preMatch.index]).parent == this.top &&
      u.matchesNode(e, t, r)
    )
      n = this.top.children.indexOf(u, this.index);
    else
      for (
        let h = this.index, m = Math.min(this.top.children.length, h + 5);
        h < m;
        h++
      ) {
        let b = this.top.children[h];
        if (b.matchesNode(e, t, r) && !this.preMatch.matched.has(b)) {
          n = h;
          break;
        }
      }
    return n < 0 ? !1 : (this.destroyBetween(this.index, n), this.index++, !0);
  }
  updateNodeAt(e, t, r, o, n) {
    let u = this.top.children[o];
    return (
      u.dirty == Sa && u.dom == u.contentDOM && (u.dirty = jc),
      u.update(e, t, r, n)
        ? (this.destroyBetween(this.index, o), this.index++, !0)
        : !1
    );
  }
  findIndexWithChild(e) {
    for (;;) {
      let t = e.parentNode;
      if (!t) return -1;
      if (t == this.top.contentDOM) {
        let r = e.pmViewDesc;
        if (r) {
          for (let o = this.index; o < this.top.children.length; o++)
            if (this.top.children[o] == r) return o;
        }
        return -1;
      }
      e = t;
    }
  }
  updateNextNode(e, t, r, o, n, u) {
    for (let h = this.index; h < this.top.children.length; h++) {
      let m = this.top.children[h];
      if (m instanceof ec) {
        let b = this.preMatch.matched.get(m);
        if (b != null && b != n) return !1;
        let _ = m.dom,
          S,
          T =
            this.isLocked(_) &&
            !(
              e.isText &&
              m.node &&
              m.node.isText &&
              m.nodeDOM.nodeValue == e.text &&
              m.dirty != Sa &&
              $g(t, m.outerDeco)
            );
        if (!T && m.update(e, t, r, o))
          return (
            this.destroyBetween(this.index, h),
            m.dom != _ && (this.changed = !0),
            this.index++,
            !0
          );
        if (!T && (S = this.recreateWrapper(m, e, t, r, o, u)))
          return (
            (this.top.children[this.index] = S),
            S.contentDOM &&
              ((S.dirty = jc), S.updateChildren(o, u + 1), (S.dirty = Rs)),
            (this.changed = !0),
            this.index++,
            !0
          );
        break;
      }
    }
    return !1;
  }
  recreateWrapper(e, t, r, o, n, u) {
    if (
      e.dirty ||
      t.isAtom ||
      !e.children.length ||
      !e.node.content.eq(t.content)
    )
      return null;
    let h = ec.create(this.top, t, r, o, n, u);
    if (h.contentDOM) {
      (h.children = e.children), (e.children = []);
      for (let m of h.children) m.parent = h;
    }
    return e.destroy(), h;
  }
  addNode(e, t, r, o, n) {
    let u = ec.create(this.top, e, t, r, o, n);
    u.contentDOM && u.updateChildren(o, n + 1),
      this.top.children.splice(this.index++, 0, u),
      (this.changed = !0);
  }
  placeWidget(e, t, r) {
    let o =
      this.index < this.top.children.length
        ? this.top.children[this.index]
        : null;
    if (
      o &&
      o.matchesWidget(e) &&
      (e == o.widget || !o.widget.type.toDOM.parentNode)
    )
      this.index++;
    else {
      let n = new N0(this.top, e, t, r);
      this.top.children.splice(this.index++, 0, n), (this.changed = !0);
    }
  }
  addTextblockHacks() {
    let e = this.top.children[this.index - 1],
      t = this.top;
    for (; e instanceof ad; ) (t = e), (e = t.children[t.children.length - 1]);
    (!e ||
      !(e instanceof O0) ||
      /\n$/.test(e.node.text) ||
      (this.view.requiresGeckoHackNode && /\s$/.test(e.node.text))) &&
      ((Xo || Jo) &&
        e &&
        e.dom.contentEditable == "false" &&
        this.addHackNode("IMG", t),
      this.addHackNode("BR", this.top));
  }
  addHackNode(e, t) {
    if (
      t == this.top &&
      this.index < t.children.length &&
      t.children[this.index].matchesHack(e)
    )
      this.index++;
    else {
      let r = document.createElement(e);
      e == "IMG" && ((r.className = "ProseMirror-separator"), (r.alt = "")),
        e == "BR" && (r.className = "ProseMirror-trailingBreak");
      let o = new B0(this.top, [], r, null);
      t != this.top
        ? t.children.push(o)
        : t.children.splice(this.index++, 0, o),
        (this.changed = !0);
    }
  }
  isLocked(e) {
    return (
      this.lock &&
      (e == this.lock || (e.nodeType == 1 && e.contains(this.lock.parentNode)))
    );
  }
};
function uE(i, e) {
  let t = e,
    r = t.children.length,
    o = i.childCount,
    n = new Map(),
    u = [];
  e: for (; o > 0; ) {
    let h;
    for (;;)
      if (r) {
        let b = t.children[r - 1];
        if (b instanceof ad) (t = b), (r = b.children.length);
        else {
          (h = b), r--;
          break;
        }
      } else {
        if (t == e) break e;
        (r = t.parent.children.indexOf(t)), (t = t.parent);
      }
    let m = h.node;
    if (m) {
      if (m != i.child(o - 1)) break;
      --o, n.set(h, o), u.push(h);
    }
  }
  return { index: o, matched: n, matches: u.reverse() };
}
function dE(i, e) {
  return i.type.side - e.type.side;
}
function hE(i, e, t, r) {
  let o = e.locals(i),
    n = 0;
  if (o.length == 0) {
    for (let b = 0; b < i.childCount; b++) {
      let _ = i.child(b);
      r(_, o, e.forChild(n, _), b), (n += _.nodeSize);
    }
    return;
  }
  let u = 0,
    h = [],
    m = null;
  for (let b = 0; ; ) {
    let _, S;
    for (; u < o.length && o[u].to == n; ) {
      let Q = o[u++];
      Q.widget && (_ ? (S || (S = [_])).push(Q) : (_ = Q));
    }
    if (_)
      if (S) {
        S.sort(dE);
        for (let Q = 0; Q < S.length; Q++) t(S[Q], b, !!m);
      } else t(_, b, !!m);
    let T, D;
    if (m) (D = -1), (T = m), (m = null);
    else if (b < i.childCount) (D = b), (T = i.child(b++));
    else break;
    for (let Q = 0; Q < h.length; Q++) h[Q].to <= n && h.splice(Q--, 1);
    for (; u < o.length && o[u].from <= n && o[u].to > n; ) h.push(o[u++]);
    let F = n + T.nodeSize;
    if (T.isText) {
      let Q = F;
      u < o.length && o[u].from < Q && (Q = o[u].from);
      for (let te = 0; te < h.length; te++) h[te].to < Q && (Q = h[te].to);
      Q < F && ((m = T.cut(Q - n)), (T = T.cut(0, Q - n)), (F = Q), (D = -1));
    } else for (; u < o.length && o[u].to < F; ) u++;
    let q = T.isInline && !T.isLeaf ? h.filter((Q) => !Q.inline) : h.slice();
    r(T, q, e.forChild(n, T), D), (n = F);
  }
}
function pE(i) {
  if (i.nodeName == "UL" || i.nodeName == "OL") {
    let e = i.style.cssText;
    (i.style.cssText = e + "; list-style: square !important"),
      window.getComputedStyle(i).listStyle,
      (i.style.cssText = e);
  }
}
function fE(i, e, t, r) {
  for (let o = 0, n = 0; o < i.childCount && n <= r; ) {
    let u = i.child(o++),
      h = n;
    if (((n += u.nodeSize), !u.isText)) continue;
    let m = u.text;
    for (; o < i.childCount; ) {
      let b = i.child(o++);
      if (((n += b.nodeSize), !b.isText)) break;
      m += b.text;
    }
    if (n >= t) {
      if (n >= r && m.slice(r - e.length - h, r - h) == e) return r - e.length;
      let b = h < r ? m.lastIndexOf(e, r - h - 1) : -1;
      if (b >= 0 && b + e.length + h >= t) return h + b;
      if (
        t == r &&
        m.length >= r + e.length - h &&
        m.slice(r - h, r - h + e.length) == e
      )
        return r;
    }
  }
  return -1;
}
function Gg(i, e, t, r, o) {
  let n = [];
  for (let u = 0, h = 0; u < i.length; u++) {
    let m = i[u],
      b = h,
      _ = (h += m.size);
    b >= t || _ <= e
      ? n.push(m)
      : (b < e && n.push(m.slice(0, e - b, r)),
        o && (n.push(o), (o = void 0)),
        _ > t && n.push(m.slice(t - b, m.size, r)));
  }
  return n;
}
function n2(i, e = null) {
  let t = i.domSelectionRange(),
    r = i.state.doc;
  if (!t.focusNode) return null;
  let o = i.docView.nearestDesc(t.focusNode),
    n = o && o.size == 0,
    u = i.docView.posFromDOM(t.focusNode, t.focusOffset, 1);
  if (u < 0) return null;
  let h = r.resolve(u),
    m,
    b;
  if (Q0(t)) {
    for (m = h; o && !o.node; ) o = o.parent;
    let _ = o.node;
    if (
      o &&
      _.isAtom &&
      fi.isSelectable(_) &&
      o.parent &&
      !(_.isInline && jC(t.focusNode, t.focusOffset, o.dom))
    ) {
      let S = o.posBefore;
      b = new fi(u == S ? h : r.resolve(S));
    }
  } else {
    let _ = i.docView.posFromDOM(t.anchorNode, t.anchorOffset, 1);
    if (_ < 0) return null;
    m = r.resolve(_);
  }
  if (!b) {
    let _ = e == "pointer" || (i.state.selection.head < h.pos && !n) ? 1 : -1;
    b = o2(i, m, h, _);
  }
  return b;
}
function V4(i) {
  return i.editable
    ? i.hasFocus()
    : H4(i) && document.activeElement && document.activeElement.contains(i.dom);
}
function il(i, e = !1) {
  let t = i.state.selection;
  if ((j4(i, t), !!V4(i))) {
    if (!e && i.input.mouseDown && i.input.mouseDown.allowDefault && Jo) {
      let r = i.domSelectionRange(),
        o = i.domObserver.currentSelection;
      if (
        r.anchorNode &&
        o.anchorNode &&
        Gc(r.anchorNode, r.anchorOffset, o.anchorNode, o.anchorOffset)
      ) {
        (i.input.mouseDown.delayedSelectionSync = !0),
          i.domObserver.setCurSelection();
        return;
      }
    }
    if ((i.domObserver.disconnectSelection(), i.cursorWrapper)) gE(i);
    else {
      let { anchor: r, head: o } = t,
        n,
        u;
      l4 &&
        !(t instanceof Mi) &&
        (t.$from.parent.inlineContent || (n = c4(i, t.from)),
        !t.empty && !t.$from.parent.inlineContent && (u = c4(i, t.to))),
        i.docView.setSelection(r, o, i.root, e),
        l4 && (n && u4(n), u && u4(u)),
        t.visible
          ? i.dom.classList.remove("ProseMirror-hideselection")
          : (i.dom.classList.add("ProseMirror-hideselection"),
            "onselectionchange" in document && mE(i));
    }
    i.domObserver.setCurSelection(), i.domObserver.connectSelection();
  }
}
var l4 = Xo || (Jo && $C < 63);
function c4(i, e) {
  let { node: t, offset: r } = i.docView.domFromPos(e, 0),
    o = r < t.childNodes.length ? t.childNodes[r] : null,
    n = r ? t.childNodes[r - 1] : null;
  if (Xo && o && o.contentEditable == "false") return zg(o);
  if (
    (!o || o.contentEditable == "false") &&
    (!n || n.contentEditable == "false")
  ) {
    if (o) return zg(o);
    if (n) return zg(n);
  }
}
function zg(i) {
  return (
    (i.contentEditable = "true"),
    Xo && i.draggable && ((i.draggable = !1), (i.wasDraggable = !0)),
    i
  );
}
function u4(i) {
  (i.contentEditable = "false"),
    i.wasDraggable && ((i.draggable = !0), (i.wasDraggable = null));
}
function mE(i) {
  let e = i.dom.ownerDocument;
  e.removeEventListener("selectionchange", i.input.hideSelectionGuard);
  let t = i.domSelectionRange(),
    r = t.anchorNode,
    o = t.anchorOffset;
  e.addEventListener(
    "selectionchange",
    (i.input.hideSelectionGuard = () => {
      (t.anchorNode != r || t.anchorOffset != o) &&
        (e.removeEventListener("selectionchange", i.input.hideSelectionGuard),
        setTimeout(() => {
          (!V4(i) || i.state.selection.visible) &&
            i.dom.classList.remove("ProseMirror-hideselection");
        }, 20));
    })
  );
}
function gE(i) {
  let e = i.domSelection(),
    t = document.createRange(),
    r = i.cursorWrapper.dom,
    o = r.nodeName == "IMG";
  o ? t.setEnd(r.parentNode, vo(r) + 1) : t.setEnd(r, 0),
    t.collapse(!1),
    e.removeAllRanges(),
    e.addRange(t),
    !o &&
      !i.state.selection.visible &&
      hs &&
      Yl <= 11 &&
      ((r.disabled = !0), (r.disabled = !1));
}
function j4(i, e) {
  if (e instanceof fi) {
    let t = i.docView.descAt(e.from);
    t != i.lastSelectedViewDesc &&
      (d4(i), t && t.selectNode(), (i.lastSelectedViewDesc = t));
  } else d4(i);
}
function d4(i) {
  i.lastSelectedViewDesc &&
    (i.lastSelectedViewDesc.parent && i.lastSelectedViewDesc.deselectNode(),
    (i.lastSelectedViewDesc = void 0));
}
function o2(i, e, t, r) {
  return (
    i.someProp("createSelectionBetween", (o) => o(i, e, t)) ||
    Mi.between(e, t, r)
  );
}
function h4(i) {
  return i.editable && !i.hasFocus() ? !1 : H4(i);
}
function H4(i) {
  let e = i.domSelectionRange();
  if (!e.anchorNode) return !1;
  try {
    return (
      i.dom.contains(
        e.anchorNode.nodeType == 3 ? e.anchorNode.parentNode : e.anchorNode
      ) &&
      (i.editable ||
        i.dom.contains(
          e.focusNode.nodeType == 3 ? e.focusNode.parentNode : e.focusNode
        ))
    );
  } catch {
    return !1;
  }
}
function yE(i) {
  let e = i.docView.domFromPos(i.state.selection.anchor, 0),
    t = i.domSelectionRange();
  return Gc(e.node, e.offset, t.anchorNode, t.anchorOffset);
}
function Wg(i, e) {
  let { $anchor: t, $head: r } = i.selection,
    o = e > 0 ? t.max(r) : t.min(r),
    n = o.parent.inlineContent
      ? o.depth
        ? i.doc.resolve(e > 0 ? o.after() : o.before())
        : null
      : o;
  return n && Ii.findFrom(n, e);
}
function Jl(i, e) {
  return i.dispatch(i.state.tr.setSelection(e).scrollIntoView()), !0;
}
function p4(i, e, t) {
  let r = i.state.selection;
  if (r instanceof Mi)
    if (t.indexOf("s") > -1) {
      let { $head: o } = r,
        n = o.textOffset ? null : e < 0 ? o.nodeBefore : o.nodeAfter;
      if (!n || n.isText || !n.isLeaf) return !1;
      let u = i.state.doc.resolve(o.pos + n.nodeSize * (e < 0 ? -1 : 1));
      return Jl(i, new Mi(r.$anchor, u));
    } else if (r.empty) {
      if (i.endOfTextblock(e > 0 ? "forward" : "backward")) {
        let o = Wg(i.state, e);
        return o && o instanceof fi ? Jl(i, o) : !1;
      } else if (!(Bs && t.indexOf("m") > -1)) {
        let o = r.$head,
          n = o.textOffset ? null : e < 0 ? o.nodeBefore : o.nodeAfter,
          u;
        if (!n || n.isText) return !1;
        let h = e < 0 ? o.pos - n.nodeSize : o.pos;
        return n.isAtom || ((u = i.docView.descAt(h)) && !u.contentDOM)
          ? fi.isSelectable(n)
            ? Jl(i, new fi(e < 0 ? i.state.doc.resolve(o.pos - n.nodeSize) : o))
            : bp
            ? Jl(i, new Mi(i.state.doc.resolve(e < 0 ? h : h + n.nodeSize)))
            : !1
          : !1;
      }
    } else return !1;
  else {
    if (r instanceof fi && r.node.isInline)
      return Jl(i, new Mi(e > 0 ? r.$to : r.$from));
    {
      let o = Wg(i.state, e);
      return o ? Jl(i, o) : !1;
    }
  }
}
function R0(i) {
  return i.nodeType == 3 ? i.nodeValue.length : i.childNodes.length;
}
function hp(i, e) {
  let t = i.pmViewDesc;
  return t && t.size == 0 && (e < 0 || i.nextSibling || i.nodeName != "BR");
}
function rd(i, e) {
  return e < 0 ? bE(i) : vE(i);
}
function bE(i) {
  let e = i.domSelectionRange(),
    t = e.focusNode,
    r = e.focusOffset;
  if (!t) return;
  let o,
    n,
    u = !1;
  for (
    oa && t.nodeType == 1 && r < R0(t) && hp(t.childNodes[r], -1) && (u = !0);
    ;

  )
    if (r > 0) {
      if (t.nodeType != 1) break;
      {
        let h = t.childNodes[r - 1];
        if (hp(h, -1)) (o = t), (n = --r);
        else if (h.nodeType == 3) (t = h), (r = t.nodeValue.length);
        else break;
      }
    } else {
      if (q4(t)) break;
      {
        let h = t.previousSibling;
        for (; h && hp(h, -1); )
          (o = t.parentNode), (n = vo(h)), (h = h.previousSibling);
        if (h) (t = h), (r = R0(t));
        else {
          if (((t = t.parentNode), t == i.dom)) break;
          r = 0;
        }
      }
    }
  u ? Zg(i, t, r) : o && Zg(i, o, n);
}
function vE(i) {
  let e = i.domSelectionRange(),
    t = e.focusNode,
    r = e.focusOffset;
  if (!t) return;
  let o = R0(t),
    n,
    u;
  for (;;)
    if (r < o) {
      if (t.nodeType != 1) break;
      let h = t.childNodes[r];
      if (hp(h, 1)) (n = t), (u = ++r);
      else break;
    } else {
      if (q4(t)) break;
      {
        let h = t.nextSibling;
        for (; h && hp(h, 1); )
          (n = h.parentNode), (u = vo(h) + 1), (h = h.nextSibling);
        if (h) (t = h), (r = 0), (o = R0(t));
        else {
          if (((t = t.parentNode), t == i.dom)) break;
          r = o = 0;
        }
      }
    }
  n && Zg(i, n, u);
}
function q4(i) {
  let e = i.pmViewDesc;
  return e && e.node && e.node.isBlock;
}
function _E(i, e) {
  for (; i && e == i.childNodes.length && !yp(i); )
    (e = vo(i) + 1), (i = i.parentNode);
  for (; i && e < i.childNodes.length; ) {
    let t = i.childNodes[e];
    if (t.nodeType == 3) return t;
    if (t.nodeType == 1 && t.contentEditable == "false") break;
    (i = t), (e = 0);
  }
}
function xE(i, e) {
  for (; i && !e && !yp(i); ) (e = vo(i)), (i = i.parentNode);
  for (; i && e; ) {
    let t = i.childNodes[e - 1];
    if (t.nodeType == 3) return t;
    if (t.nodeType == 1 && t.contentEditable == "false") break;
    (i = t), (e = i.childNodes.length);
  }
}
function Zg(i, e, t) {
  if (e.nodeType != 3) {
    let n, u;
    (u = _E(e, t))
      ? ((e = u), (t = 0))
      : (n = xE(e, t)) && ((e = n), (t = n.nodeValue.length));
  }
  let r = i.domSelection();
  if (Q0(r)) {
    let n = document.createRange();
    n.setEnd(e, t), n.setStart(e, t), r.removeAllRanges(), r.addRange(n);
  } else r.extend && r.extend(e, t);
  i.domObserver.setCurSelection();
  let { state: o } = i;
  setTimeout(() => {
    i.state == o && il(i);
  }, 50);
}
function f4(i, e) {
  let t = i.state.doc.resolve(e);
  if (!(Jo || QC) && t.parent.inlineContent) {
    let o = i.coordsAtPos(e);
    if (e > t.start()) {
      let n = i.coordsAtPos(e - 1),
        u = (n.top + n.bottom) / 2;
      if (u > o.top && u < o.bottom && Math.abs(n.left - o.left) > 1)
        return n.left < o.left ? "ltr" : "rtl";
    }
    if (e < t.end()) {
      let n = i.coordsAtPos(e + 1),
        u = (n.top + n.bottom) / 2;
      if (u > o.top && u < o.bottom && Math.abs(n.left - o.left) > 1)
        return n.left > o.left ? "ltr" : "rtl";
    }
  }
  return getComputedStyle(i.dom).direction == "rtl" ? "rtl" : "ltr";
}
function m4(i, e, t) {
  let r = i.state.selection;
  if (
    (r instanceof Mi && !r.empty) ||
    t.indexOf("s") > -1 ||
    (Bs && t.indexOf("m") > -1)
  )
    return !1;
  let { $from: o, $to: n } = r;
  if (!o.parent.inlineContent || i.endOfTextblock(e < 0 ? "up" : "down")) {
    let u = Wg(i.state, e);
    if (u && u instanceof fi) return Jl(i, u);
  }
  if (!o.parent.inlineContent) {
    let u = e < 0 ? o : n,
      h = r instanceof ks ? Ii.near(u, e) : Ii.findFrom(u, e);
    return h ? Jl(i, h) : !1;
  }
  return !1;
}
function g4(i, e) {
  if (!(i.state.selection instanceof Mi)) return !0;
  let { $head: t, $anchor: r, empty: o } = i.state.selection;
  if (!t.sameParent(r)) return !0;
  if (!o) return !1;
  if (i.endOfTextblock(e > 0 ? "forward" : "backward")) return !0;
  let n = !t.textOffset && (e < 0 ? t.nodeBefore : t.nodeAfter);
  if (n && !n.isText) {
    let u = i.state.tr;
    return (
      e < 0
        ? u.delete(t.pos - n.nodeSize, t.pos)
        : u.delete(t.pos, t.pos + n.nodeSize),
      i.dispatch(u),
      !0
    );
  }
  return !1;
}
function y4(i, e, t) {
  i.domObserver.stop(), (e.contentEditable = t), i.domObserver.start();
}
function wE(i) {
  if (!Xo || i.state.selection.$head.parentOffset > 0) return !1;
  let { focusNode: e, focusOffset: t } = i.domSelectionRange();
  if (
    e &&
    e.nodeType == 1 &&
    t == 0 &&
    e.firstChild &&
    e.firstChild.contentEditable == "false"
  ) {
    let r = e.firstChild;
    y4(i, r, "true"), setTimeout(() => y4(i, r, "false"), 20);
  }
  return !1;
}
function kE(i) {
  let e = "";
  return (
    i.ctrlKey && (e += "c"),
    i.metaKey && (e += "m"),
    i.altKey && (e += "a"),
    i.shiftKey && (e += "s"),
    e
  );
}
function SE(i, e) {
  let t = e.keyCode,
    r = kE(e);
  if (t == 8 || (Bs && t == 72 && r == "c")) return g4(i, -1) || rd(i, -1);
  if ((t == 46 && !e.shiftKey) || (Bs && t == 68 && r == "c"))
    return g4(i, 1) || rd(i, 1);
  if (t == 13 || t == 27) return !0;
  if (t == 37 || (Bs && t == 66 && r == "c")) {
    let o = t == 37 ? (f4(i, i.state.selection.from) == "ltr" ? -1 : 1) : -1;
    return p4(i, o, r) || rd(i, o);
  } else if (t == 39 || (Bs && t == 70 && r == "c")) {
    let o = t == 39 ? (f4(i, i.state.selection.from) == "ltr" ? 1 : -1) : 1;
    return p4(i, o, r) || rd(i, o);
  } else {
    if (t == 38 || (Bs && t == 80 && r == "c"))
      return m4(i, -1, r) || rd(i, -1);
    if (t == 40 || (Bs && t == 78 && r == "c"))
      return wE(i) || m4(i, 1, r) || rd(i, 1);
    if (r == (Bs ? "m" : "c") && (t == 66 || t == 73 || t == 89 || t == 90))
      return !0;
  }
  return !1;
}
function $4(i, e) {
  i.someProp("transformCopied", (D) => {
    e = D(e, i);
  });
  let t = [],
    { content: r, openStart: o, openEnd: n } = e;
  for (
    ;
    o > 1 && n > 1 && r.childCount == 1 && r.firstChild.childCount == 1;

  ) {
    o--, n--;
    let D = r.firstChild;
    t.push(D.type.name, D.attrs != D.type.defaultAttrs ? D.attrs : null),
      (r = D.content);
  }
  let u = i.someProp("clipboardSerializer") || Ja.fromSchema(i.state.schema),
    h = J4(),
    m = h.createElement("div");
  m.appendChild(u.serializeFragment(r, { document: h }));
  let b = m.firstChild,
    _,
    S = 0;
  for (; b && b.nodeType == 1 && (_ = K4[b.nodeName.toLowerCase()]); ) {
    for (let D = _.length - 1; D >= 0; D--) {
      let F = h.createElement(_[D]);
      for (; m.firstChild; ) F.appendChild(m.firstChild);
      m.appendChild(F), S++;
    }
    b = m.firstChild;
  }
  b &&
    b.nodeType == 1 &&
    b.setAttribute(
      "data-pm-slice",
      `${o} ${n}${S ? ` -${S}` : ""} ${JSON.stringify(t)}`
    );
  let T =
    i.someProp("clipboardTextSerializer", (D) => D(e, i)) ||
    e.content.textBetween(
      0,
      e.content.size,
      `

`
    );
  return { dom: m, text: T };
}
function Q4(i, e, t, r, o) {
  let n = o.parent.type.spec.code,
    u,
    h;
  if (!t && !e) return null;
  let m = e && (r || n || !t);
  if (m) {
    if (
      (i.someProp("transformPastedText", (T) => {
        e = T(e, n || r, i);
      }),
      n)
    )
      return e
        ? new Ht(
            Ct.from(
              i.state.schema.text(
                e.replace(
                  /\r\n?/g,
                  `
`
                )
              )
            ),
            0,
            0
          )
        : Ht.empty;
    let S = i.someProp("clipboardTextParser", (T) => T(e, o, r, i));
    if (S) h = S;
    else {
      let T = o.marks(),
        { schema: D } = i.state,
        F = Ja.fromSchema(D);
      (u = document.createElement("div")),
        e.split(/(?:\r\n?|\n)+/).forEach((q) => {
          let Q = u.appendChild(document.createElement("p"));
          q && Q.appendChild(F.serializeNode(D.text(q, T)));
        });
    }
  } else
    i.someProp("transformPastedHTML", (S) => {
      t = S(t, i);
    }),
      (u = TE(t)),
      bp && ME(u);
  let b = u && u.querySelector("[data-pm-slice]"),
    _ =
      b &&
      /^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(
        b.getAttribute("data-pm-slice") || ""
      );
  if (_ && _[3])
    for (let S = +_[3]; S > 0; S--) {
      let T = u.firstChild;
      for (; T && T.nodeType != 1; ) T = T.nextSibling;
      if (!T) break;
      u = T;
    }
  if (
    (h ||
      (h = (
        i.someProp("clipboardParser") ||
        i.someProp("domParser") ||
        Bc.fromSchema(i.state.schema)
      ).parseSlice(u, {
        preserveWhitespace: !!(m || _),
        context: o,
        ruleFromNode(T) {
          return T.nodeName == "BR" &&
            !T.nextSibling &&
            T.parentNode &&
            !CE.test(T.parentNode.nodeName)
            ? { ignore: !0 }
            : null;
        },
      })),
    _)
  )
    h = AE(b4(h, +_[1], +_[2]), _[4]);
  else if (((h = Ht.maxOpen(EE(h.content, o), !0)), h.openStart || h.openEnd)) {
    let S = 0,
      T = 0;
    for (
      let D = h.content.firstChild;
      S < h.openStart && !D.type.spec.isolating;
      S++, D = D.firstChild
    );
    for (
      let D = h.content.lastChild;
      T < h.openEnd && !D.type.spec.isolating;
      T++, D = D.lastChild
    );
    h = b4(h, S, T);
  }
  return (
    i.someProp("transformPasted", (S) => {
      h = S(h, i);
    }),
    h
  );
}
var CE =
  /^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;
function EE(i, e) {
  if (i.childCount < 2) return i;
  for (let t = e.depth; t >= 0; t--) {
    let o = e.node(t).contentMatchAt(e.index(t)),
      n,
      u = [];
    if (
      (i.forEach((h) => {
        if (!u) return;
        let m = o.findWrapping(h.type),
          b;
        if (!m) return (u = null);
        if ((b = u.length && n.length && W4(m, n, h, u[u.length - 1], 0)))
          u[u.length - 1] = b;
        else {
          u.length && (u[u.length - 1] = Z4(u[u.length - 1], n.length));
          let _ = G4(h, m);
          u.push(_), (o = o.matchType(_.type)), (n = m);
        }
      }),
      u)
    )
      return Ct.from(u);
  }
  return i;
}
function G4(i, e, t = 0) {
  for (let r = e.length - 1; r >= t; r--) i = e[r].create(null, Ct.from(i));
  return i;
}
function W4(i, e, t, r, o) {
  if (o < i.length && o < e.length && i[o] == e[o]) {
    let n = W4(i, e, t, r.lastChild, o + 1);
    if (n) return r.copy(r.content.replaceChild(r.childCount - 1, n));
    if (
      r
        .contentMatchAt(r.childCount)
        .matchType(o == i.length - 1 ? t.type : i[o + 1])
    )
      return r.copy(r.content.append(Ct.from(G4(t, i, o + 1))));
  }
}
function Z4(i, e) {
  if (e == 0) return i;
  let t = i.content.replaceChild(i.childCount - 1, Z4(i.lastChild, e - 1)),
    r = i.contentMatchAt(i.childCount).fillBefore(Ct.empty, !0);
  return i.copy(t.append(r));
}
function Kg(i, e, t, r, o, n) {
  let u = e < 0 ? i.firstChild : i.lastChild,
    h = u.content;
  return (
    i.childCount > 1 && (n = 0),
    o < r - 1 && (h = Kg(h, e, t, r, o + 1, n)),
    o >= t &&
      (h =
        e < 0
          ? u
              .contentMatchAt(0)
              .fillBefore(h, n <= o)
              .append(h)
          : h.append(u.contentMatchAt(u.childCount).fillBefore(Ct.empty, !0))),
    i.replaceChild(e < 0 ? 0 : i.childCount - 1, u.copy(h))
  );
}
function b4(i, e, t) {
  return (
    e < i.openStart &&
      (i = new Ht(
        Kg(i.content, -1, e, i.openStart, 0, i.openEnd),
        e,
        i.openEnd
      )),
    t < i.openEnd &&
      (i = new Ht(Kg(i.content, 1, t, i.openEnd, 0, 0), i.openStart, t)),
    i
  );
}
var K4 = {
    thead: ["table"],
    tbody: ["table"],
    tfoot: ["table"],
    caption: ["table"],
    colgroup: ["table"],
    col: ["table", "colgroup"],
    tr: ["table", "tbody"],
    td: ["table", "tbody", "tr"],
    th: ["table", "tbody", "tr"],
  },
  v4 = null;
function J4() {
  return v4 || (v4 = document.implementation.createHTMLDocument("title"));
}
function TE(i) {
  let e = /^(\s*<meta [^>]*>)*/.exec(i);
  e && (i = i.slice(e[0].length));
  let t = J4().createElement("div"),
    r = /<([a-z][^>\s]+)/i.exec(i),
    o;
  if (
    ((o = r && K4[r[1].toLowerCase()]) &&
      (i =
        o.map((n) => "<" + n + ">").join("") +
        i +
        o
          .map((n) => "</" + n + ">")
          .reverse()
          .join("")),
    (t.innerHTML = i),
    o)
  )
    for (let n = 0; n < o.length; n++) t = t.querySelector(o[n]) || t;
  return t;
}
function ME(i) {
  let e = i.querySelectorAll(
    Jo ? "span:not([class]):not([style])" : "span.Apple-converted-space"
  );
  for (let t = 0; t < e.length; t++) {
    let r = e[t];
    r.childNodes.length == 1 &&
      r.textContent == "\xA0" &&
      r.parentNode &&
      r.parentNode.replaceChild(i.ownerDocument.createTextNode(" "), r);
  }
}
function AE(i, e) {
  if (!i.size) return i;
  let t = i.content.firstChild.type.schema,
    r;
  try {
    r = JSON.parse(e);
  } catch {
    return i;
  }
  let { content: o, openStart: n, openEnd: u } = i;
  for (let h = r.length - 2; h >= 0; h -= 2) {
    let m = t.nodes[r[h]];
    if (!m || m.hasRequiredAttrs()) break;
    (o = Ct.from(m.create(r[h + 1], o))), n++, u++;
  }
  return new Ht(o, n, u);
}
var Yo = {},
  es = {},
  IE = { touchstart: !0, touchmove: !0 },
  Jg = class {
    constructor() {
      (this.shiftKey = !1),
        (this.mouseDown = null),
        (this.lastKeyCode = null),
        (this.lastKeyCodeTime = 0),
        (this.lastClick = { time: 0, x: 0, y: 0, type: "" }),
        (this.lastSelectionOrigin = null),
        (this.lastSelectionTime = 0),
        (this.lastIOSEnter = 0),
        (this.lastIOSEnterFallbackTimeout = -1),
        (this.lastFocus = 0),
        (this.lastTouch = 0),
        (this.lastAndroidDelete = 0),
        (this.composing = !1),
        (this.compositionNode = null),
        (this.composingTimeout = -1),
        (this.compositionNodes = []),
        (this.compositionEndedAt = -2e8),
        (this.compositionID = 1),
        (this.compositionPendingChanges = 0),
        (this.domChangeCount = 0),
        (this.eventHandlers = Object.create(null)),
        (this.hideSelectionGuard = null);
    }
  };
function PE(i) {
  for (let e in Yo) {
    let t = Yo[e];
    i.dom.addEventListener(
      e,
      (i.input.eventHandlers[e] = (r) => {
        LE(i, r) && !s2(i, r) && (i.editable || !(r.type in es)) && t(i, r);
      }),
      IE[e] ? { passive: !0 } : void 0
    );
  }
  Xo && i.dom.addEventListener("input", () => null), Xg(i);
}
function Xl(i, e) {
  (i.input.lastSelectionOrigin = e), (i.input.lastSelectionTime = Date.now());
}
function DE(i) {
  i.domObserver.stop();
  for (let e in i.input.eventHandlers)
    i.dom.removeEventListener(e, i.input.eventHandlers[e]);
  clearTimeout(i.input.composingTimeout),
    clearTimeout(i.input.lastIOSEnterFallbackTimeout);
}
function Xg(i) {
  i.someProp("handleDOMEvents", (e) => {
    for (let t in e)
      i.input.eventHandlers[t] ||
        i.dom.addEventListener(t, (i.input.eventHandlers[t] = (r) => s2(i, r)));
  });
}
function s2(i, e) {
  return i.someProp("handleDOMEvents", (t) => {
    let r = t[e.type];
    return r ? r(i, e) || e.defaultPrevented : !1;
  });
}
function LE(i, e) {
  if (!e.bubbles) return !0;
  if (e.defaultPrevented) return !1;
  for (let t = e.target; t != i.dom; t = t.parentNode)
    if (!t || t.nodeType == 11 || (t.pmViewDesc && t.pmViewDesc.stopEvent(e)))
      return !1;
  return !0;
}
function FE(i, e) {
  !s2(i, e) &&
    Yo[e.type] &&
    (i.editable || !(e.type in es)) &&
    Yo[e.type](i, e);
}
es.keydown = (i, e) => {
  let t = e;
  if (
    ((i.input.shiftKey = t.keyCode == 16 || t.shiftKey),
    !Y4(i, t) &&
      ((i.input.lastKeyCode = t.keyCode),
      (i.input.lastKeyCodeTime = Date.now()),
      !(na && Jo && t.keyCode == 13)))
  )
    if (
      (t.keyCode != 229 && i.domObserver.forceFlush(),
      sd && t.keyCode == 13 && !t.ctrlKey && !t.altKey && !t.metaKey)
    ) {
      let r = Date.now();
      (i.input.lastIOSEnter = r),
        (i.input.lastIOSEnterFallbackTimeout = setTimeout(() => {
          i.input.lastIOSEnter == r &&
            (i.someProp("handleKeyDown", (o) => o(i, Vc(13, "Enter"))),
            (i.input.lastIOSEnter = 0));
        }, 200));
    } else
      i.someProp("handleKeyDown", (r) => r(i, t)) || SE(i, t)
        ? t.preventDefault()
        : Xl(i, "key");
};
es.keyup = (i, e) => {
  e.keyCode == 16 && (i.input.shiftKey = !1);
};
es.keypress = (i, e) => {
  let t = e;
  if (Y4(i, t) || !t.charCode || (t.ctrlKey && !t.altKey) || (Bs && t.metaKey))
    return;
  if (i.someProp("handleKeyPress", (o) => o(i, t))) {
    t.preventDefault();
    return;
  }
  let r = i.state.selection;
  if (!(r instanceof Mi) || !r.$from.sameParent(r.$to)) {
    let o = String.fromCharCode(t.charCode);
    !/[\r\n]/.test(o) &&
      !i.someProp("handleTextInput", (n) => n(i, r.$from.pos, r.$to.pos, o)) &&
      i.dispatch(i.state.tr.insertText(o).scrollIntoView()),
      t.preventDefault();
  }
};
function G0(i) {
  return { left: i.clientX, top: i.clientY };
}
function zE(i, e) {
  let t = e.x - i.clientX,
    r = e.y - i.clientY;
  return t * t + r * r < 100;
}
function a2(i, e, t, r, o) {
  if (r == -1) return !1;
  let n = i.state.doc.resolve(r);
  for (let u = n.depth + 1; u > 0; u--)
    if (
      i.someProp(e, (h) =>
        u > n.depth
          ? h(i, t, n.nodeAfter, n.before(u), o, !0)
          : h(i, t, n.node(u), n.before(u), o, !1)
      )
    )
      return !0;
  return !1;
}
function od(i, e, t) {
  i.focused || i.focus();
  let r = i.state.tr.setSelection(e);
  t == "pointer" && r.setMeta("pointer", !0), i.dispatch(r);
}
function NE(i, e) {
  if (e == -1) return !1;
  let t = i.state.doc.resolve(e),
    r = t.nodeAfter;
  return r && r.isAtom && fi.isSelectable(r)
    ? (od(i, new fi(t), "pointer"), !0)
    : !1;
}
function OE(i, e) {
  if (e == -1) return !1;
  let t = i.state.selection,
    r,
    o;
  t instanceof fi && (r = t.node);
  let n = i.state.doc.resolve(e);
  for (let u = n.depth + 1; u > 0; u--) {
    let h = u > n.depth ? n.nodeAfter : n.node(u);
    if (fi.isSelectable(h)) {
      r &&
      t.$from.depth > 0 &&
      u >= t.$from.depth &&
      n.before(t.$from.depth + 1) == t.$from.pos
        ? (o = n.before(t.$from.depth))
        : (o = n.before(u));
      break;
    }
  }
  return o != null ? (od(i, fi.create(i.state.doc, o), "pointer"), !0) : !1;
}
function BE(i, e, t, r, o) {
  return (
    a2(i, "handleClickOn", e, t, r) ||
    i.someProp("handleClick", (n) => n(i, e, r)) ||
    (o ? OE(i, t) : NE(i, t))
  );
}
function RE(i, e, t, r) {
  return (
    a2(i, "handleDoubleClickOn", e, t, r) ||
    i.someProp("handleDoubleClick", (o) => o(i, e, r))
  );
}
function UE(i, e, t, r) {
  return (
    a2(i, "handleTripleClickOn", e, t, r) ||
    i.someProp("handleTripleClick", (o) => o(i, e, r)) ||
    VE(i, t, r)
  );
}
function VE(i, e, t) {
  if (t.button != 0) return !1;
  let r = i.state.doc;
  if (e == -1)
    return r.inlineContent
      ? (od(i, Mi.create(r, 0, r.content.size), "pointer"), !0)
      : !1;
  let o = r.resolve(e);
  for (let n = o.depth + 1; n > 0; n--) {
    let u = n > o.depth ? o.nodeAfter : o.node(n),
      h = o.before(n);
    if (u.inlineContent)
      od(i, Mi.create(r, h + 1, h + 1 + u.content.size), "pointer");
    else if (fi.isSelectable(u)) od(i, fi.create(r, h), "pointer");
    else continue;
    return !0;
  }
}
function l2(i) {
  return U0(i);
}
var X4 = Bs ? "metaKey" : "ctrlKey";
Yo.mousedown = (i, e) => {
  let t = e;
  i.input.shiftKey = t.shiftKey;
  let r = l2(i),
    o = Date.now(),
    n = "singleClick";
  o - i.input.lastClick.time < 500 &&
    zE(t, i.input.lastClick) &&
    !t[X4] &&
    (i.input.lastClick.type == "singleClick"
      ? (n = "doubleClick")
      : i.input.lastClick.type == "doubleClick" && (n = "tripleClick")),
    (i.input.lastClick = { time: o, x: t.clientX, y: t.clientY, type: n });
  let u = i.posAtCoords(G0(t));
  u &&
    (n == "singleClick"
      ? (i.input.mouseDown && i.input.mouseDown.done(),
        (i.input.mouseDown = new Yg(i, u, t, !!r)))
      : (n == "doubleClick" ? RE : UE)(i, u.pos, u.inside, t)
      ? t.preventDefault()
      : Xl(i, "pointer"));
};
var Yg = class {
  constructor(e, t, r, o) {
    (this.view = e),
      (this.pos = t),
      (this.event = r),
      (this.flushed = o),
      (this.delayedSelectionSync = !1),
      (this.mightDrag = null),
      (this.startDoc = e.state.doc),
      (this.selectNode = !!r[X4]),
      (this.allowDefault = r.shiftKey);
    let n, u;
    if (t.inside > -1) (n = e.state.doc.nodeAt(t.inside)), (u = t.inside);
    else {
      let _ = e.state.doc.resolve(t.pos);
      (n = _.parent), (u = _.depth ? _.before() : 0);
    }
    let h = o ? null : r.target,
      m = h ? e.docView.nearestDesc(h, !0) : null;
    this.target = m ? m.dom : null;
    let { selection: b } = e.state;
    ((r.button == 0 &&
      n.type.spec.draggable &&
      n.type.spec.selectable !== !1) ||
      (b instanceof fi && b.from <= u && b.to > u)) &&
      (this.mightDrag = {
        node: n,
        pos: u,
        addAttr: !!(this.target && !this.target.draggable),
        setUneditable: !!(
          this.target &&
          oa &&
          !this.target.hasAttribute("contentEditable")
        ),
      }),
      this.target &&
        this.mightDrag &&
        (this.mightDrag.addAttr || this.mightDrag.setUneditable) &&
        (this.view.domObserver.stop(),
        this.mightDrag.addAttr && (this.target.draggable = !0),
        this.mightDrag.setUneditable &&
          setTimeout(() => {
            this.view.input.mouseDown == this &&
              this.target.setAttribute("contentEditable", "false");
          }, 20),
        this.view.domObserver.start()),
      e.root.addEventListener("mouseup", (this.up = this.up.bind(this))),
      e.root.addEventListener("mousemove", (this.move = this.move.bind(this))),
      Xl(e, "pointer");
  }
  done() {
    this.view.root.removeEventListener("mouseup", this.up),
      this.view.root.removeEventListener("mousemove", this.move),
      this.mightDrag &&
        this.target &&
        (this.view.domObserver.stop(),
        this.mightDrag.addAttr && this.target.removeAttribute("draggable"),
        this.mightDrag.setUneditable &&
          this.target.removeAttribute("contentEditable"),
        this.view.domObserver.start()),
      this.delayedSelectionSync && setTimeout(() => il(this.view)),
      (this.view.input.mouseDown = null);
  }
  up(e) {
    if ((this.done(), !this.view.dom.contains(e.target))) return;
    let t = this.pos;
    this.view.state.doc != this.startDoc && (t = this.view.posAtCoords(G0(e))),
      this.updateAllowDefault(e),
      this.allowDefault || !t
        ? Xl(this.view, "pointer")
        : BE(this.view, t.pos, t.inside, e, this.selectNode)
        ? e.preventDefault()
        : e.button == 0 &&
          (this.flushed ||
            (Xo && this.mightDrag && !this.mightDrag.node.isAtom) ||
            (Jo &&
              !this.view.state.selection.visible &&
              Math.min(
                Math.abs(t.pos - this.view.state.selection.from),
                Math.abs(t.pos - this.view.state.selection.to)
              ) <= 2))
        ? (od(
            this.view,
            Ii.near(this.view.state.doc.resolve(t.pos)),
            "pointer"
          ),
          e.preventDefault())
        : Xl(this.view, "pointer");
  }
  move(e) {
    this.updateAllowDefault(e),
      Xl(this.view, "pointer"),
      e.buttons == 0 && this.done();
  }
  updateAllowDefault(e) {
    !this.allowDefault &&
      (Math.abs(this.event.x - e.clientX) > 4 ||
        Math.abs(this.event.y - e.clientY) > 4) &&
      (this.allowDefault = !0);
  }
};
Yo.touchstart = (i) => {
  (i.input.lastTouch = Date.now()), l2(i), Xl(i, "pointer");
};
Yo.touchmove = (i) => {
  (i.input.lastTouch = Date.now()), Xl(i, "pointer");
};
Yo.contextmenu = (i) => l2(i);
function Y4(i, e) {
  return i.composing
    ? !0
    : Xo && Math.abs(e.timeStamp - i.input.compositionEndedAt) < 500
    ? ((i.input.compositionEndedAt = -2e8), !0)
    : !1;
}
var jE = na ? 5e3 : -1;
es.compositionstart = es.compositionupdate = (i) => {
  if (!i.composing) {
    i.domObserver.flush();
    let { state: e } = i,
      t = e.selection.$from;
    if (
      e.selection.empty &&
      (e.storedMarks ||
        (!t.textOffset &&
          t.parentOffset &&
          t.nodeBefore.marks.some((r) => r.type.spec.inclusive === !1)))
    )
      (i.markCursor = i.state.storedMarks || t.marks()),
        U0(i, !0),
        (i.markCursor = null);
    else if (
      (U0(i),
      oa &&
        e.selection.empty &&
        t.parentOffset &&
        !t.textOffset &&
        t.nodeBefore.marks.length)
    ) {
      let r = i.domSelectionRange();
      for (
        let o = r.focusNode, n = r.focusOffset;
        o && o.nodeType == 1 && n != 0;

      ) {
        let u = n < 0 ? o.lastChild : o.childNodes[n - 1];
        if (!u) break;
        if (u.nodeType == 3) {
          i.domSelection().collapse(u, u.nodeValue.length);
          break;
        } else (o = u), (n = -1);
      }
    }
    i.input.composing = !0;
  }
  ex(i, jE);
};
es.compositionend = (i, e) => {
  i.composing &&
    ((i.input.composing = !1),
    (i.input.compositionEndedAt = e.timeStamp),
    (i.input.compositionPendingChanges = i.domObserver.pendingRecords().length
      ? i.input.compositionID
      : 0),
    (i.input.compositionNode = null),
    i.input.compositionPendingChanges &&
      Promise.resolve().then(() => i.domObserver.flush()),
    i.input.compositionID++,
    ex(i, 20));
};
function ex(i, e) {
  clearTimeout(i.input.composingTimeout),
    e > -1 && (i.input.composingTimeout = setTimeout(() => U0(i), e));
}
function tx(i) {
  for (
    i.composing &&
    ((i.input.composing = !1), (i.input.compositionEndedAt = qE()));
    i.input.compositionNodes.length > 0;

  )
    i.input.compositionNodes.pop().markParentsDirty();
}
function HE(i) {
  let e = i.domSelectionRange();
  if (!e.focusNode) return null;
  let t = UC(e.focusNode, e.focusOffset),
    r = VC(e.focusNode, e.focusOffset);
  if (t && r && t != r) {
    let o = r.pmViewDesc;
    if (!o || !o.isText(r.nodeValue)) return r;
    if (i.input.compositionNode == r) {
      let n = t.pmViewDesc;
      if (!(!n || !n.isText(t.nodeValue))) return r;
    }
  }
  return t;
}
function qE() {
  let i = document.createEvent("Event");
  return i.initEvent("event", !0, !0), i.timeStamp;
}
function U0(i, e = !1) {
  if (!(na && i.domObserver.flushingSoon >= 0)) {
    if (
      (i.domObserver.forceFlush(), tx(i), e || (i.docView && i.docView.dirty))
    ) {
      let t = n2(i);
      return (
        t && !t.eq(i.state.selection)
          ? i.dispatch(i.state.tr.setSelection(t))
          : i.updateState(i.state),
        !0
      );
    }
    return !1;
  }
}
function $E(i, e) {
  if (!i.dom.parentNode) return;
  let t = i.dom.parentNode.appendChild(document.createElement("div"));
  t.appendChild(e),
    (t.style.cssText = "position: fixed; left: -10000px; top: 10px");
  let r = getSelection(),
    o = document.createRange();
  o.selectNodeContents(e),
    i.dom.blur(),
    r.removeAllRanges(),
    r.addRange(o),
    setTimeout(() => {
      t.parentNode && t.parentNode.removeChild(t), i.focus();
    }, 50);
}
var fp = (hs && Yl < 15) || (sd && GC < 604);
Yo.copy = es.cut = (i, e) => {
  let t = e,
    r = i.state.selection,
    o = t.type == "cut";
  if (r.empty) return;
  let n = fp ? null : t.clipboardData,
    u = r.content(),
    { dom: h, text: m } = $4(i, u);
  n
    ? (t.preventDefault(),
      n.clearData(),
      n.setData("text/html", h.innerHTML),
      n.setData("text/plain", m))
    : $E(i, h),
    o &&
      i.dispatch(
        i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent", "cut")
      );
};
function QE(i) {
  return i.openStart == 0 && i.openEnd == 0 && i.content.childCount == 1
    ? i.content.firstChild
    : null;
}
function GE(i, e) {
  if (!i.dom.parentNode) return;
  let t = i.input.shiftKey || i.state.selection.$from.parent.type.spec.code,
    r = i.dom.parentNode.appendChild(
      document.createElement(t ? "textarea" : "div")
    );
  t || (r.contentEditable = "true"),
    (r.style.cssText = "position: fixed; left: -10000px; top: 10px"),
    r.focus();
  let o = i.input.shiftKey && i.input.lastKeyCode != 45;
  setTimeout(() => {
    i.focus(),
      r.parentNode && r.parentNode.removeChild(r),
      t ? mp(i, r.value, null, o, e) : mp(i, r.textContent, r.innerHTML, o, e);
  }, 50);
}
function mp(i, e, t, r, o) {
  let n = Q4(i, e, t, r, i.state.selection.$from);
  if (i.someProp("handlePaste", (m) => m(i, o, n || Ht.empty))) return !0;
  if (!n) return !1;
  let u = QE(n),
    h = u
      ? i.state.tr.replaceSelectionWith(u, r)
      : i.state.tr.replaceSelection(n);
  return (
    i.dispatch(
      h.scrollIntoView().setMeta("paste", !0).setMeta("uiEvent", "paste")
    ),
    !0
  );
}
function ix(i) {
  let e = i.getData("text/plain") || i.getData("Text");
  if (e) return e;
  let t = i.getData("text/uri-list");
  return t ? t.replace(/\r?\n/g, " ") : "";
}
es.paste = (i, e) => {
  let t = e;
  if (i.composing && !na) return;
  let r = fp ? null : t.clipboardData,
    o = i.input.shiftKey && i.input.lastKeyCode != 45;
  r && mp(i, ix(r), r.getData("text/html"), o, t)
    ? t.preventDefault()
    : GE(i, t);
};
var V0 = class {
    constructor(e, t, r) {
      (this.slice = e), (this.move = t), (this.node = r);
    }
  },
  rx = Bs ? "altKey" : "ctrlKey";
Yo.dragstart = (i, e) => {
  let t = e,
    r = i.input.mouseDown;
  if ((r && r.done(), !t.dataTransfer)) return;
  let o = i.state.selection,
    n = o.empty ? null : i.posAtCoords(G0(t)),
    u;
  if (!(n && n.pos >= o.from && n.pos <= (o instanceof fi ? o.to - 1 : o.to))) {
    if (r && r.mightDrag) u = fi.create(i.state.doc, r.mightDrag.pos);
    else if (t.target && t.target.nodeType == 1) {
      let _ = i.docView.nearestDesc(t.target, !0);
      _ &&
        _.node.type.spec.draggable &&
        _ != i.docView &&
        (u = fi.create(i.state.doc, _.posBefore));
    }
  }
  let h = (u || i.state.selection).content(),
    { dom: m, text: b } = $4(i, h);
  t.dataTransfer.clearData(),
    t.dataTransfer.setData(fp ? "Text" : "text/html", m.innerHTML),
    (t.dataTransfer.effectAllowed = "copyMove"),
    fp || t.dataTransfer.setData("text/plain", b),
    (i.dragging = new V0(h, !t[rx], u));
};
Yo.dragend = (i) => {
  let e = i.dragging;
  window.setTimeout(() => {
    i.dragging == e && (i.dragging = null);
  }, 50);
};
es.dragover = es.dragenter = (i, e) => e.preventDefault();
es.drop = (i, e) => {
  let t = e,
    r = i.dragging;
  if (((i.dragging = null), !t.dataTransfer)) return;
  let o = i.posAtCoords(G0(t));
  if (!o) return;
  let n = i.state.doc.resolve(o.pos),
    u = r && r.slice;
  u
    ? i.someProp("transformPasted", (F) => {
        u = F(u, i);
      })
    : (u = Q4(
        i,
        ix(t.dataTransfer),
        fp ? null : t.dataTransfer.getData("text/html"),
        !1,
        n
      ));
  let h = !!(r && !t[rx]);
  if (i.someProp("handleDrop", (F) => F(i, t, u || Ht.empty, h))) {
    t.preventDefault();
    return;
  }
  if (!u) return;
  t.preventDefault();
  let m = u ? D0(i.state.doc, n.pos, u) : n.pos;
  m == null && (m = n.pos);
  let b = i.state.tr;
  if (h) {
    let { node: F } = r;
    F ? F.replace(b) : b.deleteSelection();
  }
  let _ = b.mapping.map(m),
    S = u.openStart == 0 && u.openEnd == 0 && u.content.childCount == 1,
    T = b.doc;
  if (
    (S
      ? b.replaceRangeWith(_, _, u.content.firstChild)
      : b.replaceRange(_, _, u),
    b.doc.eq(T))
  )
    return;
  let D = b.doc.resolve(_);
  if (
    S &&
    fi.isSelectable(u.content.firstChild) &&
    D.nodeAfter &&
    D.nodeAfter.sameMarkup(u.content.firstChild)
  )
    b.setSelection(new fi(D));
  else {
    let F = b.mapping.map(m);
    b.mapping.maps[b.mapping.maps.length - 1].forEach(
      (q, Q, te, ce) => (F = ce)
    ),
      b.setSelection(o2(i, D, b.doc.resolve(F)));
  }
  i.focus(), i.dispatch(b.setMeta("uiEvent", "drop"));
};
Yo.focus = (i) => {
  (i.input.lastFocus = Date.now()),
    i.focused ||
      (i.domObserver.stop(),
      i.dom.classList.add("ProseMirror-focused"),
      i.domObserver.start(),
      (i.focused = !0),
      setTimeout(() => {
        i.docView &&
          i.hasFocus() &&
          !i.domObserver.currentSelection.eq(i.domSelectionRange()) &&
          il(i);
      }, 20));
};
Yo.blur = (i, e) => {
  let t = e;
  i.focused &&
    (i.domObserver.stop(),
    i.dom.classList.remove("ProseMirror-focused"),
    i.domObserver.start(),
    t.relatedTarget &&
      i.dom.contains(t.relatedTarget) &&
      i.domObserver.currentSelection.clear(),
    (i.focused = !1));
};
Yo.beforeinput = (i, e) => {
  if (Jo && na && e.inputType == "deleteContentBackward") {
    i.domObserver.flushSoon();
    let { domChangeCount: r } = i.input;
    setTimeout(() => {
      if (
        i.input.domChangeCount != r ||
        (i.dom.blur(),
        i.focus(),
        i.someProp("handleKeyDown", (n) => n(i, Vc(8, "Backspace"))))
      )
        return;
      let { $cursor: o } = i.state.selection;
      o &&
        o.pos > 0 &&
        i.dispatch(i.state.tr.delete(o.pos - 1, o.pos).scrollIntoView());
    }, 50);
  }
};
for (let i in es) Yo[i] = es[i];
function gp(i, e) {
  if (i == e) return !0;
  for (let t in i) if (i[t] !== e[t]) return !1;
  for (let t in e) if (!(t in i)) return !1;
  return !0;
}
var j0 = class i {
    constructor(e, t) {
      (this.toDOM = e),
        (this.spec = t || $c),
        (this.side = this.spec.side || 0);
    }
    map(e, t, r, o) {
      let { pos: n, deleted: u } = e.mapResult(
        t.from + o,
        this.side < 0 ? -1 : 1
      );
      return u ? null : new Us(n - r, n - r, this);
    }
    valid() {
      return !0;
    }
    eq(e) {
      return (
        this == e ||
        (e instanceof i &&
          ((this.spec.key && this.spec.key == e.spec.key) ||
            (this.toDOM == e.toDOM && gp(this.spec, e.spec))))
      );
    }
    destroy(e) {
      this.spec.destroy && this.spec.destroy(e);
    }
  },
  qc = class i {
    constructor(e, t) {
      (this.attrs = e), (this.spec = t || $c);
    }
    map(e, t, r, o) {
      let n = e.map(t.from + o, this.spec.inclusiveStart ? -1 : 1) - r,
        u = e.map(t.to + o, this.spec.inclusiveEnd ? 1 : -1) - r;
      return n >= u ? null : new Us(n, u, this);
    }
    valid(e, t) {
      return t.from < t.to;
    }
    eq(e) {
      return (
        this == e ||
        (e instanceof i && gp(this.attrs, e.attrs) && gp(this.spec, e.spec))
      );
    }
    static is(e) {
      return e.type instanceof i;
    }
    destroy() {}
  },
  e2 = class i {
    constructor(e, t) {
      (this.attrs = e), (this.spec = t || $c);
    }
    map(e, t, r, o) {
      let n = e.mapResult(t.from + o, 1);
      if (n.deleted) return null;
      let u = e.mapResult(t.to + o, -1);
      return u.deleted || u.pos <= n.pos
        ? null
        : new Us(n.pos - r, u.pos - r, this);
    }
    valid(e, t) {
      let { index: r, offset: o } = e.content.findIndex(t.from),
        n;
      return o == t.from && !(n = e.child(r)).isText && o + n.nodeSize == t.to;
    }
    eq(e) {
      return (
        this == e ||
        (e instanceof i && gp(this.attrs, e.attrs) && gp(this.spec, e.spec))
      );
    }
    destroy() {}
  },
  Us = class i {
    constructor(e, t, r) {
      (this.from = e), (this.to = t), (this.type = r);
    }
    copy(e, t) {
      return new i(e, t, this.type);
    }
    eq(e, t = 0) {
      return (
        this.type.eq(e.type) && this.from + t == e.from && this.to + t == e.to
      );
    }
    map(e, t, r) {
      return this.type.map(e, this, t, r);
    }
    static widget(e, t, r) {
      return new i(e, e, new j0(t, r));
    }
    static inline(e, t, r, o) {
      return new i(e, t, new qc(r, o));
    }
    static node(e, t, r, o) {
      return new i(e, t, new e2(r, o));
    }
    get spec() {
      return this.type.spec;
    }
    get inline() {
      return this.type instanceof qc;
    }
    get widget() {
      return this.type instanceof j0;
    }
  },
  nd = [],
  $c = {},
  Ro = class i {
    constructor(e, t) {
      (this.local = e.length ? e : nd), (this.children = t.length ? t : nd);
    }
    static create(e, t) {
      return t.length ? q0(t, e, 0, $c) : Bo;
    }
    find(e, t, r) {
      let o = [];
      return this.findInner(e ?? 0, t ?? 1e9, o, 0, r), o;
    }
    findInner(e, t, r, o, n) {
      for (let u = 0; u < this.local.length; u++) {
        let h = this.local[u];
        h.from <= t &&
          h.to >= e &&
          (!n || n(h.spec)) &&
          r.push(h.copy(h.from + o, h.to + o));
      }
      for (let u = 0; u < this.children.length; u += 3)
        if (this.children[u] < t && this.children[u + 1] > e) {
          let h = this.children[u] + 1;
          this.children[u + 2].findInner(e - h, t - h, r, o + h, n);
        }
    }
    map(e, t, r) {
      return this == Bo || e.maps.length == 0
        ? this
        : this.mapInner(e, t, 0, 0, r || $c);
    }
    mapInner(e, t, r, o, n) {
      let u;
      for (let h = 0; h < this.local.length; h++) {
        let m = this.local[h].map(e, r, o);
        m && m.type.valid(t, m)
          ? (u || (u = [])).push(m)
          : n.onRemove && n.onRemove(this.local[h].spec);
      }
      return this.children.length
        ? WE(this.children, u || [], e, t, r, o, n)
        : u
        ? new i(u.sort(Qc), nd)
        : Bo;
    }
    add(e, t) {
      return t.length
        ? this == Bo
          ? i.create(e, t)
          : this.addInner(e, t, 0)
        : this;
    }
    addInner(e, t, r) {
      let o,
        n = 0;
      e.forEach((h, m) => {
        let b = m + r,
          _;
        if ((_ = ox(t, h, b))) {
          for (o || (o = this.children.slice()); n < o.length && o[n] < m; )
            n += 3;
          o[n] == m
            ? (o[n + 2] = o[n + 2].addInner(h, _, b + 1))
            : o.splice(n, 0, m, m + h.nodeSize, q0(_, h, b + 1, $c)),
            (n += 3);
        }
      });
      let u = nx(n ? sx(t) : t, -r);
      for (let h = 0; h < u.length; h++)
        u[h].type.valid(e, u[h]) || u.splice(h--, 1);
      return new i(
        u.length ? this.local.concat(u).sort(Qc) : this.local,
        o || this.children
      );
    }
    remove(e) {
      return e.length == 0 || this == Bo ? this : this.removeInner(e, 0);
    }
    removeInner(e, t) {
      let r = this.children,
        o = this.local;
      for (let n = 0; n < r.length; n += 3) {
        let u,
          h = r[n] + t,
          m = r[n + 1] + t;
        for (let _ = 0, S; _ < e.length; _++)
          (S = e[_]) &&
            S.from > h &&
            S.to < m &&
            ((e[_] = null), (u || (u = [])).push(S));
        if (!u) continue;
        r == this.children && (r = this.children.slice());
        let b = r[n + 2].removeInner(u, h + 1);
        b != Bo ? (r[n + 2] = b) : (r.splice(n, 3), (n -= 3));
      }
      if (o.length) {
        for (let n = 0, u; n < e.length; n++)
          if ((u = e[n]))
            for (let h = 0; h < o.length; h++)
              o[h].eq(u, t) &&
                (o == this.local && (o = this.local.slice()), o.splice(h--, 1));
      }
      return r == this.children && o == this.local
        ? this
        : o.length || r.length
        ? new i(o, r)
        : Bo;
    }
    forChild(e, t) {
      if (this == Bo) return this;
      if (t.isLeaf) return i.empty;
      let r, o;
      for (let h = 0; h < this.children.length; h += 3)
        if (this.children[h] >= e) {
          this.children[h] == e && (r = this.children[h + 2]);
          break;
        }
      let n = e + 1,
        u = n + t.content.size;
      for (let h = 0; h < this.local.length; h++) {
        let m = this.local[h];
        if (m.from < u && m.to > n && m.type instanceof qc) {
          let b = Math.max(n, m.from) - n,
            _ = Math.min(u, m.to) - n;
          b < _ && (o || (o = [])).push(m.copy(b, _));
        }
      }
      if (o) {
        let h = new i(o.sort(Qc), nd);
        return r ? new H0([h, r]) : h;
      }
      return r || Bo;
    }
    eq(e) {
      if (this == e) return !0;
      if (
        !(e instanceof i) ||
        this.local.length != e.local.length ||
        this.children.length != e.children.length
      )
        return !1;
      for (let t = 0; t < this.local.length; t++)
        if (!this.local[t].eq(e.local[t])) return !1;
      for (let t = 0; t < this.children.length; t += 3)
        if (
          this.children[t] != e.children[t] ||
          this.children[t + 1] != e.children[t + 1] ||
          !this.children[t + 2].eq(e.children[t + 2])
        )
          return !1;
      return !0;
    }
    locals(e) {
      return c2(this.localsInner(e));
    }
    localsInner(e) {
      if (this == Bo) return nd;
      if (e.inlineContent || !this.local.some(qc.is)) return this.local;
      let t = [];
      for (let r = 0; r < this.local.length; r++)
        this.local[r].type instanceof qc || t.push(this.local[r]);
      return t;
    }
  };
Ro.empty = new Ro([], []);
Ro.removeOverlap = c2;
var Bo = Ro.empty,
  H0 = class i {
    constructor(e) {
      this.members = e;
    }
    map(e, t) {
      let r = this.members.map((o) => o.map(e, t, $c));
      return i.from(r);
    }
    forChild(e, t) {
      if (t.isLeaf) return Ro.empty;
      let r = [];
      for (let o = 0; o < this.members.length; o++) {
        let n = this.members[o].forChild(e, t);
        n != Bo && (n instanceof i ? (r = r.concat(n.members)) : r.push(n));
      }
      return i.from(r);
    }
    eq(e) {
      if (!(e instanceof i) || e.members.length != this.members.length)
        return !1;
      for (let t = 0; t < this.members.length; t++)
        if (!this.members[t].eq(e.members[t])) return !1;
      return !0;
    }
    locals(e) {
      let t,
        r = !0;
      for (let o = 0; o < this.members.length; o++) {
        let n = this.members[o].localsInner(e);
        if (n.length)
          if (!t) t = n;
          else {
            r && ((t = t.slice()), (r = !1));
            for (let u = 0; u < n.length; u++) t.push(n[u]);
          }
      }
      return t ? c2(r ? t : t.sort(Qc)) : nd;
    }
    static from(e) {
      switch (e.length) {
        case 0:
          return Bo;
        case 1:
          return e[0];
        default:
          return new i(
            e.every((t) => t instanceof Ro)
              ? e
              : e.reduce(
                  (t, r) => t.concat(r instanceof Ro ? r : r.members),
                  []
                )
          );
      }
    }
  };
function WE(i, e, t, r, o, n, u) {
  let h = i.slice();
  for (let b = 0, _ = n; b < t.maps.length; b++) {
    let S = 0;
    t.maps[b].forEach((T, D, F, q) => {
      let Q = q - F - (D - T);
      for (let te = 0; te < h.length; te += 3) {
        let ce = h[te + 1];
        if (ce < 0 || T > ce + _ - S) continue;
        let be = h[te] + _ - S;
        D >= be
          ? (h[te + 1] = T <= be ? -2 : -1)
          : T >= _ && Q && ((h[te] += Q), (h[te + 1] += Q));
      }
      S += Q;
    }),
      (_ = t.maps[b].map(_, -1));
  }
  let m = !1;
  for (let b = 0; b < h.length; b += 3)
    if (h[b + 1] < 0) {
      if (h[b + 1] == -2) {
        (m = !0), (h[b + 1] = -1);
        continue;
      }
      let _ = t.map(i[b] + n),
        S = _ - o;
      if (S < 0 || S >= r.content.size) {
        m = !0;
        continue;
      }
      let T = t.map(i[b + 1] + n, -1),
        D = T - o,
        { index: F, offset: q } = r.content.findIndex(S),
        Q = r.maybeChild(F);
      if (Q && q == S && q + Q.nodeSize == D) {
        let te = h[b + 2].mapInner(t, Q, _ + 1, i[b] + n + 1, u);
        te != Bo
          ? ((h[b] = S), (h[b + 1] = D), (h[b + 2] = te))
          : ((h[b + 1] = -2), (m = !0));
      } else m = !0;
    }
  if (m) {
    let b = ZE(h, i, e, t, o, n, u),
      _ = q0(b, r, 0, u);
    e = _.local;
    for (let S = 0; S < h.length; S += 3)
      h[S + 1] < 0 && (h.splice(S, 3), (S -= 3));
    for (let S = 0, T = 0; S < _.children.length; S += 3) {
      let D = _.children[S];
      for (; T < h.length && h[T] < D; ) T += 3;
      h.splice(T, 0, _.children[S], _.children[S + 1], _.children[S + 2]);
    }
  }
  return new Ro(e.sort(Qc), h);
}
function nx(i, e) {
  if (!e || !i.length) return i;
  let t = [];
  for (let r = 0; r < i.length; r++) {
    let o = i[r];
    t.push(new Us(o.from + e, o.to + e, o.type));
  }
  return t;
}
function ZE(i, e, t, r, o, n, u) {
  function h(m, b) {
    for (let _ = 0; _ < m.local.length; _++) {
      let S = m.local[_].map(r, o, b);
      S ? t.push(S) : u.onRemove && u.onRemove(m.local[_].spec);
    }
    for (let _ = 0; _ < m.children.length; _ += 3)
      h(m.children[_ + 2], m.children[_] + b + 1);
  }
  for (let m = 0; m < i.length; m += 3)
    i[m + 1] == -1 && h(i[m + 2], e[m] + n + 1);
  return t;
}
function ox(i, e, t) {
  if (e.isLeaf) return null;
  let r = t + e.nodeSize,
    o = null;
  for (let n = 0, u; n < i.length; n++)
    (u = i[n]) &&
      u.from > t &&
      u.to < r &&
      ((o || (o = [])).push(u), (i[n] = null));
  return o;
}
function sx(i) {
  let e = [];
  for (let t = 0; t < i.length; t++) i[t] != null && e.push(i[t]);
  return e;
}
function q0(i, e, t, r) {
  let o = [],
    n = !1;
  e.forEach((h, m) => {
    let b = ox(i, h, m + t);
    if (b) {
      n = !0;
      let _ = q0(b, h, t + m + 1, r);
      _ != Bo && o.push(m, m + h.nodeSize, _);
    }
  });
  let u = nx(n ? sx(i) : i, -t).sort(Qc);
  for (let h = 0; h < u.length; h++)
    u[h].type.valid(e, u[h]) ||
      (r.onRemove && r.onRemove(u[h].spec), u.splice(h--, 1));
  return u.length || o.length ? new Ro(u, o) : Bo;
}
function Qc(i, e) {
  return i.from - e.from || i.to - e.to;
}
function c2(i) {
  let e = i;
  for (let t = 0; t < e.length - 1; t++) {
    let r = e[t];
    if (r.from != r.to)
      for (let o = t + 1; o < e.length; o++) {
        let n = e[o];
        if (n.from == r.from) {
          n.to != r.to &&
            (e == i && (e = i.slice()),
            (e[o] = n.copy(n.from, r.to)),
            _4(e, o + 1, n.copy(r.to, n.to)));
          continue;
        } else {
          n.from < r.to &&
            (e == i && (e = i.slice()),
            (e[t] = r.copy(r.from, n.from)),
            _4(e, o, r.copy(n.from, r.to)));
          break;
        }
      }
  }
  return e;
}
function _4(i, e, t) {
  for (; e < i.length && Qc(t, i[e]) > 0; ) e++;
  i.splice(e, 0, t);
}
function Ng(i) {
  let e = [];
  return (
    i.someProp("decorations", (t) => {
      let r = t(i.state);
      r && r != Bo && e.push(r);
    }),
    i.cursorWrapper && e.push(Ro.create(i.state.doc, [i.cursorWrapper.deco])),
    H0.from(e)
  );
}
var KE = {
    childList: !0,
    characterData: !0,
    characterDataOldValue: !0,
    attributes: !0,
    attributeOldValue: !0,
    subtree: !0,
  },
  JE = hs && Yl <= 11,
  t2 = class {
    constructor() {
      (this.anchorNode = null),
        (this.anchorOffset = 0),
        (this.focusNode = null),
        (this.focusOffset = 0);
    }
    set(e) {
      (this.anchorNode = e.anchorNode),
        (this.anchorOffset = e.anchorOffset),
        (this.focusNode = e.focusNode),
        (this.focusOffset = e.focusOffset);
    }
    clear() {
      this.anchorNode = this.focusNode = null;
    }
    eq(e) {
      return (
        e.anchorNode == this.anchorNode &&
        e.anchorOffset == this.anchorOffset &&
        e.focusNode == this.focusNode &&
        e.focusOffset == this.focusOffset
      );
    }
  },
  i2 = class {
    constructor(e, t) {
      (this.view = e),
        (this.handleDOMChange = t),
        (this.queue = []),
        (this.flushingSoon = -1),
        (this.observer = null),
        (this.currentSelection = new t2()),
        (this.onCharData = null),
        (this.suppressingSelectionUpdates = !1),
        (this.observer =
          window.MutationObserver &&
          new window.MutationObserver((r) => {
            for (let o = 0; o < r.length; o++) this.queue.push(r[o]);
            hs &&
            Yl <= 11 &&
            r.some(
              (o) =>
                (o.type == "childList" && o.removedNodes.length) ||
                (o.type == "characterData" &&
                  o.oldValue.length > o.target.nodeValue.length)
            )
              ? this.flushSoon()
              : this.flush();
          })),
        JE &&
          (this.onCharData = (r) => {
            this.queue.push({
              target: r.target,
              type: "characterData",
              oldValue: r.prevValue,
            }),
              this.flushSoon();
          }),
        (this.onSelectionChange = this.onSelectionChange.bind(this));
    }
    flushSoon() {
      this.flushingSoon < 0 &&
        (this.flushingSoon = window.setTimeout(() => {
          (this.flushingSoon = -1), this.flush();
        }, 20));
    }
    forceFlush() {
      this.flushingSoon > -1 &&
        (window.clearTimeout(this.flushingSoon),
        (this.flushingSoon = -1),
        this.flush());
    }
    start() {
      this.observer &&
        (this.observer.takeRecords(), this.observer.observe(this.view.dom, KE)),
        this.onCharData &&
          this.view.dom.addEventListener(
            "DOMCharacterDataModified",
            this.onCharData
          ),
        this.connectSelection();
    }
    stop() {
      if (this.observer) {
        let e = this.observer.takeRecords();
        if (e.length) {
          for (let t = 0; t < e.length; t++) this.queue.push(e[t]);
          window.setTimeout(() => this.flush(), 20);
        }
        this.observer.disconnect();
      }
      this.onCharData &&
        this.view.dom.removeEventListener(
          "DOMCharacterDataModified",
          this.onCharData
        ),
        this.disconnectSelection();
    }
    connectSelection() {
      this.view.dom.ownerDocument.addEventListener(
        "selectionchange",
        this.onSelectionChange
      );
    }
    disconnectSelection() {
      this.view.dom.ownerDocument.removeEventListener(
        "selectionchange",
        this.onSelectionChange
      );
    }
    suppressSelectionUpdates() {
      (this.suppressingSelectionUpdates = !0),
        setTimeout(() => (this.suppressingSelectionUpdates = !1), 50);
    }
    onSelectionChange() {
      if (h4(this.view)) {
        if (this.suppressingSelectionUpdates) return il(this.view);
        if (hs && Yl <= 11 && !this.view.state.selection.empty) {
          let e = this.view.domSelectionRange();
          if (
            e.focusNode &&
            Gc(e.focusNode, e.focusOffset, e.anchorNode, e.anchorOffset)
          )
            return this.flushSoon();
        }
        this.flush();
      }
    }
    setCurSelection() {
      this.currentSelection.set(this.view.domSelectionRange());
    }
    ignoreSelectionChange(e) {
      if (!e.focusNode) return !0;
      let t = new Set(),
        r;
      for (let n = e.focusNode; n; n = pp(n)) t.add(n);
      for (let n = e.anchorNode; n; n = pp(n))
        if (t.has(n)) {
          r = n;
          break;
        }
      let o = r && this.view.docView.nearestDesc(r);
      if (
        o &&
        o.ignoreMutation({
          type: "selection",
          target: r.nodeType == 3 ? r.parentNode : r,
        })
      )
        return this.setCurSelection(), !0;
    }
    pendingRecords() {
      if (this.observer)
        for (let e of this.observer.takeRecords()) this.queue.push(e);
      return this.queue;
    }
    flush() {
      let { view: e } = this;
      if (!e.docView || this.flushingSoon > -1) return;
      let t = this.pendingRecords();
      t.length && (this.queue = []);
      let r = e.domSelectionRange(),
        o =
          !this.suppressingSelectionUpdates &&
          !this.currentSelection.eq(r) &&
          h4(e) &&
          !this.ignoreSelectionChange(r),
        n = -1,
        u = -1,
        h = !1,
        m = [];
      if (e.editable)
        for (let _ = 0; _ < t.length; _++) {
          let S = this.registerMutation(t[_], m);
          S &&
            ((n = n < 0 ? S.from : Math.min(S.from, n)),
            (u = u < 0 ? S.to : Math.max(S.to, u)),
            S.typeOver && (h = !0));
        }
      if (oa && m.length > 1) {
        let _ = m.filter((S) => S.nodeName == "BR");
        if (_.length == 2) {
          let S = _[0],
            T = _[1];
          S.parentNode && S.parentNode.parentNode == T.parentNode
            ? T.remove()
            : S.remove();
        }
      }
      let b = null;
      n < 0 &&
      o &&
      e.input.lastFocus > Date.now() - 200 &&
      Math.max(e.input.lastTouch, e.input.lastClick.time) < Date.now() - 300 &&
      Q0(r) &&
      (b = n2(e)) &&
      b.eq(Ii.near(e.state.doc.resolve(0), 1))
        ? ((e.input.lastFocus = 0),
          il(e),
          this.currentSelection.set(r),
          e.scrollToSelection())
        : (n > -1 || o) &&
          (n > -1 && (e.docView.markDirty(n, u), XE(e)),
          this.handleDOMChange(n, u, h, m),
          e.docView && e.docView.dirty
            ? e.updateState(e.state)
            : this.currentSelection.eq(r) || il(e),
          this.currentSelection.set(r));
    }
    registerMutation(e, t) {
      if (t.indexOf(e.target) > -1) return null;
      let r = this.view.docView.nearestDesc(e.target);
      if (
        (e.type == "attributes" &&
          (r == this.view.docView ||
            e.attributeName == "contenteditable" ||
            (e.attributeName == "style" &&
              !e.oldValue &&
              !e.target.getAttribute("style")))) ||
        !r ||
        r.ignoreMutation(e)
      )
        return null;
      if (e.type == "childList") {
        for (let _ = 0; _ < e.addedNodes.length; _++) t.push(e.addedNodes[_]);
        if (
          r.contentDOM &&
          r.contentDOM != r.dom &&
          !r.contentDOM.contains(e.target)
        )
          return { from: r.posBefore, to: r.posAfter };
        let o = e.previousSibling,
          n = e.nextSibling;
        if (hs && Yl <= 11 && e.addedNodes.length)
          for (let _ = 0; _ < e.addedNodes.length; _++) {
            let { previousSibling: S, nextSibling: T } = e.addedNodes[_];
            (!S || Array.prototype.indexOf.call(e.addedNodes, S) < 0) &&
              (o = S),
              (!T || Array.prototype.indexOf.call(e.addedNodes, T) < 0) &&
                (n = T);
          }
        let u = o && o.parentNode == e.target ? vo(o) + 1 : 0,
          h = r.localPosFromDOM(e.target, u, -1),
          m =
            n && n.parentNode == e.target ? vo(n) : e.target.childNodes.length,
          b = r.localPosFromDOM(e.target, m, 1);
        return { from: h, to: b };
      } else
        return e.type == "attributes"
          ? { from: r.posAtStart - r.border, to: r.posAtEnd + r.border }
          : {
              from: r.posAtStart,
              to: r.posAtEnd,
              typeOver: e.target.nodeValue == e.oldValue,
            };
    }
  },
  x4 = new WeakMap(),
  w4 = !1;
function XE(i) {
  if (
    !x4.has(i) &&
    (x4.set(i, null),
    ["normal", "nowrap", "pre-line"].indexOf(
      getComputedStyle(i.dom).whiteSpace
    ) !== -1)
  ) {
    if (((i.requiresGeckoHackNode = oa), w4)) return;
    console.warn(
      "ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."
    ),
      (w4 = !0);
  }
}
function k4(i, e) {
  let t = e.startContainer,
    r = e.startOffset,
    o = e.endContainer,
    n = e.endOffset,
    u = i.domAtPos(i.state.selection.anchor);
  return (
    Gc(u.node, u.offset, o, n) && ([t, r, o, n] = [o, n, t, r]),
    { anchorNode: t, anchorOffset: r, focusNode: o, focusOffset: n }
  );
}
function YE(i, e) {
  if (e.getComposedRanges) {
    let o = e.getComposedRanges(i.root)[0];
    if (o) return k4(i, o);
  }
  let t;
  function r(o) {
    o.preventDefault(),
      o.stopImmediatePropagation(),
      (t = o.getTargetRanges()[0]);
  }
  return (
    i.dom.addEventListener("beforeinput", r, !0),
    document.execCommand("indent"),
    i.dom.removeEventListener("beforeinput", r, !0),
    t ? k4(i, t) : null
  );
}
function eT(i, e, t) {
  let {
      node: r,
      fromOffset: o,
      toOffset: n,
      from: u,
      to: h,
    } = i.docView.parseRange(e, t),
    m = i.domSelectionRange(),
    b,
    _ = m.anchorNode;
  if (
    (_ &&
      i.dom.contains(_.nodeType == 1 ? _ : _.parentNode) &&
      ((b = [{ node: _, offset: m.anchorOffset }]),
      Q0(m) || b.push({ node: m.focusNode, offset: m.focusOffset })),
    Jo && i.input.lastKeyCode === 8)
  )
    for (let Q = n; Q > o; Q--) {
      let te = r.childNodes[Q - 1],
        ce = te.pmViewDesc;
      if (te.nodeName == "BR" && !ce) {
        n = Q;
        break;
      }
      if (!ce || ce.size) break;
    }
  let S = i.state.doc,
    T = i.someProp("domParser") || Bc.fromSchema(i.state.schema),
    D = S.resolve(u),
    F = null,
    q = T.parse(r, {
      topNode: D.parent,
      topMatch: D.parent.contentMatchAt(D.index()),
      topOpen: !0,
      from: o,
      to: n,
      preserveWhitespace: D.parent.type.whitespace == "pre" ? "full" : !0,
      findPositions: b,
      ruleFromNode: tT,
      context: D,
    });
  if (b && b[0].pos != null) {
    let Q = b[0].pos,
      te = b[1] && b[1].pos;
    te == null && (te = Q), (F = { anchor: Q + u, head: te + u });
  }
  return { doc: q, sel: F, from: u, to: h };
}
function tT(i) {
  let e = i.pmViewDesc;
  if (e) return e.parseRule();
  if (i.nodeName == "BR" && i.parentNode) {
    if (Xo && /^(ul|ol)$/i.test(i.parentNode.nodeName)) {
      let t = document.createElement("div");
      return t.appendChild(document.createElement("li")), { skip: t };
    } else if (
      i.parentNode.lastChild == i ||
      (Xo && /^(tr|table)$/i.test(i.parentNode.nodeName))
    )
      return { ignore: !0 };
  } else if (i.nodeName == "IMG" && i.getAttribute("mark-placeholder"))
    return { ignore: !0 };
  return null;
}
var iT =
  /^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;
function rT(i, e, t, r, o) {
  let n =
    i.input.compositionPendingChanges ||
    (i.composing ? i.input.compositionID : 0);
  if (((i.input.compositionPendingChanges = 0), e < 0)) {
    let De =
        i.input.lastSelectionTime > Date.now() - 50
          ? i.input.lastSelectionOrigin
          : null,
      st = n2(i, De);
    if (st && !i.state.selection.eq(st)) {
      if (
        Jo &&
        na &&
        i.input.lastKeyCode === 13 &&
        Date.now() - 100 < i.input.lastKeyCodeTime &&
        i.someProp("handleKeyDown", (zt) => zt(i, Vc(13, "Enter")))
      )
        return;
      let qe = i.state.tr.setSelection(st);
      De == "pointer"
        ? qe.setMeta("pointer", !0)
        : De == "key" && qe.scrollIntoView(),
        n && qe.setMeta("composition", n),
        i.dispatch(qe);
    }
    return;
  }
  let u = i.state.doc.resolve(e),
    h = u.sharedDepth(t);
  (e = u.before(h + 1)), (t = i.state.doc.resolve(t).after(h + 1));
  let m = i.state.selection,
    b = eT(i, e, t),
    _ = i.state.doc,
    S = _.slice(b.from, b.to),
    T,
    D;
  i.input.lastKeyCode === 8 && Date.now() - 100 < i.input.lastKeyCodeTime
    ? ((T = i.state.selection.to), (D = "end"))
    : ((T = i.state.selection.from), (D = "start")),
    (i.input.lastKeyCode = null);
  let F = sT(S.content, b.doc.content, b.from, T, D);
  if (
    ((sd && i.input.lastIOSEnter > Date.now() - 225) || na) &&
    o.some((De) => De.nodeType == 1 && !iT.test(De.nodeName)) &&
    (!F || F.endA >= F.endB) &&
    i.someProp("handleKeyDown", (De) => De(i, Vc(13, "Enter")))
  ) {
    i.input.lastIOSEnter = 0;
    return;
  }
  if (!F)
    if (
      r &&
      m instanceof Mi &&
      !m.empty &&
      m.$head.sameParent(m.$anchor) &&
      !i.composing &&
      !(b.sel && b.sel.anchor != b.sel.head)
    )
      F = { start: m.from, endA: m.to, endB: m.to };
    else {
      if (b.sel) {
        let De = S4(i, i.state.doc, b.sel);
        if (De && !De.eq(i.state.selection)) {
          let st = i.state.tr.setSelection(De);
          n && st.setMeta("composition", n), i.dispatch(st);
        }
      }
      return;
    }
  i.input.domChangeCount++,
    i.state.selection.from < i.state.selection.to &&
      F.start == F.endB &&
      i.state.selection instanceof Mi &&
      (F.start > i.state.selection.from &&
      F.start <= i.state.selection.from + 2 &&
      i.state.selection.from >= b.from
        ? (F.start = i.state.selection.from)
        : F.endA < i.state.selection.to &&
          F.endA >= i.state.selection.to - 2 &&
          i.state.selection.to <= b.to &&
          ((F.endB += i.state.selection.to - F.endA),
          (F.endA = i.state.selection.to))),
    hs &&
      Yl <= 11 &&
      F.endB == F.start + 1 &&
      F.endA == F.start &&
      F.start > b.from &&
      b.doc.textBetween(F.start - b.from - 1, F.start - b.from + 1) ==
        " \xA0" &&
      (F.start--, F.endA--, F.endB--);
  let q = b.doc.resolveNoCache(F.start - b.from),
    Q = b.doc.resolveNoCache(F.endB - b.from),
    te = _.resolve(F.start),
    ce = q.sameParent(Q) && q.parent.inlineContent && te.end() >= F.endA,
    be;
  if (
    ((sd &&
      i.input.lastIOSEnter > Date.now() - 225 &&
      (!ce || o.some((De) => De.nodeName == "DIV" || De.nodeName == "P"))) ||
      (!ce &&
        q.pos < b.doc.content.size &&
        !q.sameParent(Q) &&
        (be = Ii.findFrom(b.doc.resolve(q.pos + 1), 1, !0)) &&
        be.head == Q.pos)) &&
    i.someProp("handleKeyDown", (De) => De(i, Vc(13, "Enter")))
  ) {
    i.input.lastIOSEnter = 0;
    return;
  }
  if (
    i.state.selection.anchor > F.start &&
    oT(_, F.start, F.endA, q, Q) &&
    i.someProp("handleKeyDown", (De) => De(i, Vc(8, "Backspace")))
  ) {
    na && Jo && i.domObserver.suppressSelectionUpdates();
    return;
  }
  Jo && na && F.endB == F.start && (i.input.lastAndroidDelete = Date.now()),
    na &&
      !ce &&
      q.start() != Q.start() &&
      Q.parentOffset == 0 &&
      q.depth == Q.depth &&
      b.sel &&
      b.sel.anchor == b.sel.head &&
      b.sel.head == F.endA &&
      ((F.endB -= 2),
      (Q = b.doc.resolveNoCache(F.endB - b.from)),
      setTimeout(() => {
        i.someProp("handleKeyDown", function (De) {
          return De(i, Vc(13, "Enter"));
        });
      }, 20));
  let Y = F.start,
    Ie = F.endA,
    Te,
    fe,
    Le;
  if (ce) {
    if (q.pos == Q.pos)
      hs &&
        Yl <= 11 &&
        q.parentOffset == 0 &&
        (i.domObserver.suppressSelectionUpdates(), setTimeout(() => il(i), 20)),
        (Te = i.state.tr.delete(Y, Ie)),
        (fe = _.resolve(F.start).marksAcross(_.resolve(F.endA)));
    else if (
      F.endA == F.endB &&
      (Le = nT(
        q.parent.content.cut(q.parentOffset, Q.parentOffset),
        te.parent.content.cut(te.parentOffset, F.endA - te.start())
      ))
    )
      (Te = i.state.tr),
        Le.type == "add"
          ? Te.addMark(Y, Ie, Le.mark)
          : Te.removeMark(Y, Ie, Le.mark);
    else if (
      q.parent.child(q.index()).isText &&
      q.index() == Q.index() - (Q.textOffset ? 0 : 1)
    ) {
      let De = q.parent.textBetween(q.parentOffset, Q.parentOffset);
      if (i.someProp("handleTextInput", (st) => st(i, Y, Ie, De))) return;
      Te = i.state.tr.insertText(De, Y, Ie);
    }
  }
  if (
    (Te ||
      (Te = i.state.tr.replace(
        Y,
        Ie,
        b.doc.slice(F.start - b.from, F.endB - b.from)
      )),
    b.sel)
  ) {
    let De = S4(i, Te.doc, b.sel);
    De &&
      !(
        (Jo &&
          na &&
          i.composing &&
          De.empty &&
          (F.start != F.endB || i.input.lastAndroidDelete < Date.now() - 100) &&
          (De.head == Y || De.head == Te.mapping.map(Ie) - 1)) ||
        (hs && De.empty && De.head == Y)
      ) &&
      Te.setSelection(De);
  }
  fe && Te.ensureMarks(fe),
    n && Te.setMeta("composition", n),
    i.dispatch(Te.scrollIntoView());
}
function S4(i, e, t) {
  return Math.max(t.anchor, t.head) > e.content.size
    ? null
    : o2(i, e.resolve(t.anchor), e.resolve(t.head));
}
function nT(i, e) {
  let t = i.firstChild.marks,
    r = e.firstChild.marks,
    o = t,
    n = r,
    u,
    h,
    m;
  for (let _ = 0; _ < r.length; _++) o = r[_].removeFromSet(o);
  for (let _ = 0; _ < t.length; _++) n = t[_].removeFromSet(n);
  if (o.length == 1 && n.length == 0)
    (h = o[0]), (u = "add"), (m = (_) => _.mark(h.addToSet(_.marks)));
  else if (o.length == 0 && n.length == 1)
    (h = n[0]), (u = "remove"), (m = (_) => _.mark(h.removeFromSet(_.marks)));
  else return null;
  let b = [];
  for (let _ = 0; _ < e.childCount; _++) b.push(m(e.child(_)));
  if (Ct.from(b).eq(i)) return { mark: h, type: u };
}
function oT(i, e, t, r, o) {
  if (t - e <= o.pos - r.pos || Og(r, !0, !1) < o.pos) return !1;
  let n = i.resolve(e);
  if (!r.parent.isTextblock) {
    let h = n.nodeAfter;
    return h != null && t == e + h.nodeSize;
  }
  if (n.parentOffset < n.parent.content.size || !n.parent.isTextblock)
    return !1;
  let u = i.resolve(Og(n, !0, !0));
  return !u.parent.isTextblock || u.pos > t || Og(u, !0, !1) < t
    ? !1
    : r.parent.content.cut(r.parentOffset).eq(u.parent.content);
}
function Og(i, e, t) {
  let r = i.depth,
    o = e ? i.end() : i.pos;
  for (; r > 0 && (e || i.indexAfter(r) == i.node(r).childCount); )
    r--, o++, (e = !1);
  if (t) {
    let n = i.node(r).maybeChild(i.indexAfter(r));
    for (; n && !n.isLeaf; ) (n = n.firstChild), o++;
  }
  return o;
}
function sT(i, e, t, r, o) {
  let n = i.findDiffStart(e, t);
  if (n == null) return null;
  let { a: u, b: h } = i.findDiffEnd(e, t + i.size, t + e.size);
  if (o == "end") {
    let m = Math.max(0, n - Math.min(u, h));
    r -= u + m - n;
  }
  if (u < n && i.size < e.size) {
    let m = r <= n && r >= u ? n - r : 0;
    (n -= m),
      n && n < e.size && C4(e.textBetween(n - 1, n + 1)) && (n += m ? 1 : -1),
      (h = n + (h - u)),
      (u = n);
  } else if (h < n) {
    let m = r <= n && r >= h ? n - r : 0;
    (n -= m),
      n && n < i.size && C4(i.textBetween(n - 1, n + 1)) && (n += m ? 1 : -1),
      (u = n + (u - h)),
      (h = n);
  }
  return { start: n, endA: u, endB: h };
}
function C4(i) {
  if (i.length != 2) return !1;
  let e = i.charCodeAt(0),
    t = i.charCodeAt(1);
  return e >= 56320 && e <= 57343 && t >= 55296 && t <= 56319;
}
var $0 = class {
  constructor(e, t) {
    (this._root = null),
      (this.focused = !1),
      (this.trackWrites = null),
      (this.mounted = !1),
      (this.markCursor = null),
      (this.cursorWrapper = null),
      (this.lastSelectedViewDesc = void 0),
      (this.input = new Jg()),
      (this.prevDirectPlugins = []),
      (this.pluginViews = []),
      (this.requiresGeckoHackNode = !1),
      (this.dragging = null),
      (this._props = t),
      (this.state = t.state),
      (this.directPlugins = t.plugins || []),
      this.directPlugins.forEach(I4),
      (this.dispatch = this.dispatch.bind(this)),
      (this.dom = (e && e.mount) || document.createElement("div")),
      e &&
        (e.appendChild
          ? e.appendChild(this.dom)
          : typeof e == "function"
          ? e(this.dom)
          : e.mount && (this.mounted = !0)),
      (this.editable = M4(this)),
      T4(this),
      (this.nodeViews = A4(this)),
      (this.docView = s4(this.state.doc, E4(this), Ng(this), this.dom, this)),
      (this.domObserver = new i2(this, (r, o, n, u) => rT(this, r, o, n, u))),
      this.domObserver.start(),
      PE(this),
      this.updatePluginViews();
  }
  get composing() {
    return this.input.composing;
  }
  get props() {
    if (this._props.state != this.state) {
      let e = this._props;
      this._props = {};
      for (let t in e) this._props[t] = e[t];
      this._props.state = this.state;
    }
    return this._props;
  }
  update(e) {
    e.handleDOMEvents != this._props.handleDOMEvents && Xg(this);
    let t = this._props;
    (this._props = e),
      e.plugins && (e.plugins.forEach(I4), (this.directPlugins = e.plugins)),
      this.updateStateInner(e.state, t);
  }
  setProps(e) {
    let t = {};
    for (let r in this._props) t[r] = this._props[r];
    t.state = this.state;
    for (let r in e) t[r] = e[r];
    this.update(t);
  }
  updateState(e) {
    this.updateStateInner(e, this._props);
  }
  updateStateInner(e, t) {
    var r;
    let o = this.state,
      n = !1,
      u = !1;
    e.storedMarks && this.composing && (tx(this), (u = !0)), (this.state = e);
    let h = o.plugins != e.plugins || this._props.plugins != t.plugins;
    if (
      h ||
      this._props.plugins != t.plugins ||
      this._props.nodeViews != t.nodeViews
    ) {
      let D = A4(this);
      lT(D, this.nodeViews) && ((this.nodeViews = D), (n = !0));
    }
    (h || t.handleDOMEvents != this._props.handleDOMEvents) && Xg(this),
      (this.editable = M4(this)),
      T4(this);
    let m = Ng(this),
      b = E4(this),
      _ =
        o.plugins != e.plugins && !o.doc.eq(e.doc)
          ? "reset"
          : e.scrollToSelection > o.scrollToSelection
          ? "to selection"
          : "preserve",
      S = n || !this.docView.matchesNode(e.doc, b, m);
    (S || !e.selection.eq(o.selection)) && (u = !0);
    let T =
      _ == "preserve" && u && this.dom.style.overflowAnchor == null && KC(this);
    if (u) {
      this.domObserver.stop();
      let D =
        S &&
        (hs || Jo) &&
        !this.composing &&
        !o.selection.empty &&
        !e.selection.empty &&
        aT(o.selection, e.selection);
      if (S) {
        let F = Jo
          ? (this.trackWrites = this.domSelectionRange().focusNode)
          : null;
        this.composing && (this.input.compositionNode = HE(this)),
          (n || !this.docView.update(e.doc, b, m, this)) &&
            (this.docView.updateOuterDeco(b),
            this.docView.destroy(),
            (this.docView = s4(e.doc, b, m, this.dom, this))),
          F && !this.trackWrites && (D = !0);
      }
      D ||
      !(
        this.input.mouseDown &&
        this.domObserver.currentSelection.eq(this.domSelectionRange()) &&
        yE(this)
      )
        ? il(this, D)
        : (j4(this, e.selection), this.domObserver.setCurSelection()),
        this.domObserver.start();
    }
    this.updatePluginViews(o),
      !((r = this.dragging) === null || r === void 0) &&
        r.node &&
        !o.doc.eq(e.doc) &&
        this.updateDraggedNode(this.dragging, o),
      _ == "reset"
        ? (this.dom.scrollTop = 0)
        : _ == "to selection"
        ? this.scrollToSelection()
        : T && JC(T);
  }
  scrollToSelection() {
    let e = this.domSelectionRange().focusNode;
    if (!this.someProp("handleScrollToSelection", (t) => t(this)))
      if (this.state.selection instanceof fi) {
        let t = this.docView.domAfterPos(this.state.selection.from);
        t.nodeType == 1 && e4(this, t.getBoundingClientRect(), e);
      } else e4(this, this.coordsAtPos(this.state.selection.head, 1), e);
  }
  destroyPluginViews() {
    let e;
    for (; (e = this.pluginViews.pop()); ) e.destroy && e.destroy();
  }
  updatePluginViews(e) {
    if (
      !e ||
      e.plugins != this.state.plugins ||
      this.directPlugins != this.prevDirectPlugins
    ) {
      (this.prevDirectPlugins = this.directPlugins), this.destroyPluginViews();
      for (let t = 0; t < this.directPlugins.length; t++) {
        let r = this.directPlugins[t];
        r.spec.view && this.pluginViews.push(r.spec.view(this));
      }
      for (let t = 0; t < this.state.plugins.length; t++) {
        let r = this.state.plugins[t];
        r.spec.view && this.pluginViews.push(r.spec.view(this));
      }
    } else
      for (let t = 0; t < this.pluginViews.length; t++) {
        let r = this.pluginViews[t];
        r.update && r.update(this, e);
      }
  }
  updateDraggedNode(e, t) {
    let r = e.node,
      o = -1;
    if (this.state.doc.nodeAt(r.from) == r.node) o = r.from;
    else {
      let n = r.from + (this.state.doc.content.size - t.doc.content.size);
      (n > 0 && this.state.doc.nodeAt(n)) == r.node && (o = n);
    }
    this.dragging = new V0(
      e.slice,
      e.move,
      o < 0 ? void 0 : fi.create(this.state.doc, o)
    );
  }
  someProp(e, t) {
    let r = this._props && this._props[e],
      o;
    if (r != null && (o = t ? t(r) : r)) return o;
    for (let u = 0; u < this.directPlugins.length; u++) {
      let h = this.directPlugins[u].props[e];
      if (h != null && (o = t ? t(h) : h)) return o;
    }
    let n = this.state.plugins;
    if (n)
      for (let u = 0; u < n.length; u++) {
        let h = n[u].props[e];
        if (h != null && (o = t ? t(h) : h)) return o;
      }
  }
  hasFocus() {
    if (hs) {
      let e = this.root.activeElement;
      if (e == this.dom) return !0;
      if (!e || !this.dom.contains(e)) return !1;
      for (; e && this.dom != e && this.dom.contains(e); ) {
        if (e.contentEditable == "false") return !1;
        e = e.parentElement;
      }
      return !0;
    }
    return this.root.activeElement == this.dom;
  }
  focus() {
    this.domObserver.stop(),
      this.editable && XC(this.dom),
      il(this),
      this.domObserver.start();
  }
  get root() {
    let e = this._root;
    if (e == null) {
      for (let t = this.dom.parentNode; t; t = t.parentNode)
        if (t.nodeType == 9 || (t.nodeType == 11 && t.host))
          return (
            t.getSelection ||
              (Object.getPrototypeOf(t).getSelection = () =>
                t.ownerDocument.getSelection()),
            (this._root = t)
          );
    }
    return e || document;
  }
  updateRoot() {
    this._root = null;
  }
  posAtCoords(e) {
    return rE(this, e);
  }
  coordsAtPos(e, t = 1) {
    return N4(this, e, t);
  }
  domAtPos(e, t = 0) {
    return this.docView.domFromPos(e, t);
  }
  nodeDOM(e) {
    let t = this.docView.descAt(e);
    return t ? t.nodeDOM : null;
  }
  posAtDOM(e, t, r = -1) {
    let o = this.docView.posFromDOM(e, t, r);
    if (o == null) throw new RangeError("DOM position not inside the editor");
    return o;
  }
  endOfTextblock(e, t) {
    return lE(this, t || this.state, e);
  }
  pasteHTML(e, t) {
    return mp(this, "", e, !1, t || new ClipboardEvent("paste"));
  }
  pasteText(e, t) {
    return mp(this, e, null, !0, t || new ClipboardEvent("paste"));
  }
  destroy() {
    this.docView &&
      (DE(this),
      this.destroyPluginViews(),
      this.mounted
        ? (this.docView.update(this.state.doc, [], Ng(this), this),
          (this.dom.textContent = ""))
        : this.dom.parentNode && this.dom.parentNode.removeChild(this.dom),
      this.docView.destroy(),
      (this.docView = null),
      BC());
  }
  get isDestroyed() {
    return this.docView == null;
  }
  dispatchEvent(e) {
    return FE(this, e);
  }
  dispatch(e) {
    let t = this._props.dispatchTransaction;
    t ? t.call(this, e) : this.updateState(this.state.apply(e));
  }
  domSelectionRange() {
    let e = this.domSelection();
    return (
      (Xo &&
        this.root.nodeType === 11 &&
        HC(this.dom.ownerDocument) == this.dom &&
        YE(this, e)) ||
      e
    );
  }
  domSelection() {
    return this.root.getSelection();
  }
};
function E4(i) {
  let e = Object.create(null);
  return (
    (e.class = "ProseMirror"),
    (e.contenteditable = String(i.editable)),
    i.someProp("attributes", (t) => {
      if ((typeof t == "function" && (t = t(i.state)), t))
        for (let r in t)
          r == "class"
            ? (e.class += " " + t[r])
            : r == "style"
            ? (e.style = (e.style ? e.style + ";" : "") + t[r])
            : !e[r] &&
              r != "contenteditable" &&
              r != "nodeName" &&
              (e[r] = String(t[r]));
    }),
    e.translate || (e.translate = "no"),
    [Us.node(0, i.state.doc.content.size, e)]
  );
}
function T4(i) {
  if (i.markCursor) {
    let e = document.createElement("img");
    (e.className = "ProseMirror-separator"),
      e.setAttribute("mark-placeholder", "true"),
      e.setAttribute("alt", ""),
      (i.cursorWrapper = {
        dom: e,
        deco: Us.widget(i.state.selection.head, e, {
          raw: !0,
          marks: i.markCursor,
        }),
      });
  } else i.cursorWrapper = null;
}
function M4(i) {
  return !i.someProp("editable", (e) => e(i.state) === !1);
}
function aT(i, e) {
  let t = Math.min(
    i.$anchor.sharedDepth(i.head),
    e.$anchor.sharedDepth(e.head)
  );
  return i.$anchor.start(t) != e.$anchor.start(t);
}
function A4(i) {
  let e = Object.create(null);
  function t(r) {
    for (let o in r)
      Object.prototype.hasOwnProperty.call(e, o) || (e[o] = r[o]);
  }
  return i.someProp("nodeViews", t), i.someProp("markViews", t), e;
}
function lT(i, e) {
  let t = 0,
    r = 0;
  for (let o in i) {
    if (i[o] != e[o]) return !0;
    t++;
  }
  for (let o in e) r++;
  return t != r;
}
function I4(i) {
  if (i.spec.state || i.spec.filterTransaction || i.spec.appendTransaction)
    throw new RangeError(
      "Plugins passed directly to the view must not have a state component"
    );
}
var rl = {
    8: "Backspace",
    9: "Tab",
    10: "Enter",
    12: "NumLock",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    44: "PrintScreen",
    45: "Insert",
    46: "Delete",
    59: ";",
    61: "=",
    91: "Meta",
    92: "Meta",
    106: "*",
    107: "+",
    108: ",",
    109: "-",
    110: ".",
    111: "/",
    144: "NumLock",
    145: "ScrollLock",
    160: "Shift",
    161: "Shift",
    162: "Control",
    163: "Control",
    164: "Alt",
    165: "Alt",
    173: "-",
    186: ";",
    187: "=",
    188: ",",
    189: "-",
    190: ".",
    191: "/",
    192: "`",
    219: "[",
    220: "\\",
    221: "]",
    222: "'",
  },
  Z0 = {
    48: ")",
    49: "!",
    50: "@",
    51: "#",
    52: "$",
    53: "%",
    54: "^",
    55: "&",
    56: "*",
    57: "(",
    59: ":",
    61: "+",
    173: "_",
    186: ":",
    187: "+",
    188: "<",
    189: "_",
    190: ">",
    191: "?",
    192: "~",
    219: "{",
    220: "|",
    221: "}",
    222: '"',
  },
  cT = typeof navigator < "u" && /Mac/.test(navigator.platform),
  uT =
    typeof navigator < "u" &&
    /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);
for (Rn = 0; Rn < 10; Rn++) rl[48 + Rn] = rl[96 + Rn] = String(Rn);
var Rn;
for (Rn = 1; Rn <= 24; Rn++) rl[Rn + 111] = "F" + Rn;
var Rn;
for (Rn = 65; Rn <= 90; Rn++)
  (rl[Rn] = String.fromCharCode(Rn + 32)), (Z0[Rn] = String.fromCharCode(Rn));
var Rn;
for (W0 in rl) Z0.hasOwnProperty(W0) || (Z0[W0] = rl[W0]);
var W0;
function ax(i) {
  var e =
      (cT && i.metaKey && i.shiftKey && !i.ctrlKey && !i.altKey) ||
      (uT && i.shiftKey && i.key && i.key.length == 1) ||
      i.key == "Unidentified",
    t =
      (!e && i.key) ||
      (i.shiftKey ? Z0 : rl)[i.keyCode] ||
      i.key ||
      "Unidentified";
  return (
    t == "Esc" && (t = "Escape"),
    t == "Del" && (t = "Delete"),
    t == "Left" && (t = "ArrowLeft"),
    t == "Up" && (t = "ArrowUp"),
    t == "Right" && (t = "ArrowRight"),
    t == "Down" && (t = "ArrowDown"),
    t
  );
}
var dT =
  typeof navigator < "u" ? /Mac|iP(hone|[oa]d)/.test(navigator.platform) : !1;
function hT(i) {
  let e = i.split(/-(?!$)/),
    t = e[e.length - 1];
  t == "Space" && (t = " ");
  let r, o, n, u;
  for (let h = 0; h < e.length - 1; h++) {
    let m = e[h];
    if (/^(cmd|meta|m)$/i.test(m)) u = !0;
    else if (/^a(lt)?$/i.test(m)) r = !0;
    else if (/^(c|ctrl|control)$/i.test(m)) o = !0;
    else if (/^s(hift)?$/i.test(m)) n = !0;
    else if (/^mod$/i.test(m)) dT ? (u = !0) : (o = !0);
    else throw new Error("Unrecognized modifier name: " + m);
  }
  return (
    r && (t = "Alt-" + t),
    o && (t = "Ctrl-" + t),
    u && (t = "Meta-" + t),
    n && (t = "Shift-" + t),
    t
  );
}
function pT(i) {
  let e = Object.create(null);
  for (let t in i) e[hT(t)] = i[t];
  return e;
}
function u2(i, e, t = !0) {
  return (
    e.altKey && (i = "Alt-" + i),
    e.ctrlKey && (i = "Ctrl-" + i),
    e.metaKey && (i = "Meta-" + i),
    t && e.shiftKey && (i = "Shift-" + i),
    i
  );
}
function lx(i) {
  return new Vr({ props: { handleKeyDown: d2(i) } });
}
function d2(i) {
  let e = pT(i);
  return function (t, r) {
    let o = ax(r),
      n,
      u = e[u2(o, r)];
    if (u && u(t.state, t.dispatch, t)) return !0;
    if (o.length == 1 && o != " ") {
      if (r.shiftKey) {
        let h = e[u2(o, r, !1)];
        if (h && h(t.state, t.dispatch, t)) return !0;
      }
      if (
        (r.shiftKey || r.altKey || r.metaKey || o.charCodeAt(0) > 127) &&
        (n = rl[r.keyCode]) &&
        n != o
      ) {
        let h = e[u2(n, r)];
        if (h && h(t.state, t.dispatch, t)) return !0;
      }
    }
    return !1;
  };
}
var K0 = (i, e) =>
  i.selection.empty
    ? !1
    : (e && e(i.tr.deleteSelection().scrollIntoView()), !0);
function ux(i, e) {
  let { $cursor: t } = i.selection;
  return !t || (e ? !e.endOfTextblock("backward", i) : t.parentOffset > 0)
    ? null
    : t;
}
var p2 = (i, e, t) => {
    let r = ux(i, t);
    if (!r) return !1;
    let o = m2(r);
    if (!o) {
      let u = r.blockRange(),
        h = u && Ya(u);
      return h == null ? !1 : (e && e(i.tr.lift(u, h).scrollIntoView()), !0);
    }
    let n = o.nodeBefore;
    if (!n.type.spec.isolating && vx(i, o, e)) return !0;
    if (r.parent.content.size == 0 && (ld(n, "end") || fi.isSelectable(n))) {
      let u = lp(i.doc, r.before(), r.after(), Ht.empty);
      if (u && u.slice.size < u.to - u.from) {
        if (e) {
          let h = i.tr.step(u);
          h.setSelection(
            ld(n, "end")
              ? Ii.findFrom(h.doc.resolve(h.mapping.map(o.pos, -1)), -1)
              : fi.create(h.doc, o.pos - n.nodeSize)
          ),
            e(h.scrollIntoView());
        }
        return !0;
      }
    }
    return n.isAtom && o.depth == r.depth - 1
      ? (e && e(i.tr.delete(o.pos - n.nodeSize, o.pos).scrollIntoView()), !0)
      : !1;
  },
  dx = (i, e, t) => {
    let r = ux(i, t);
    if (!r) return !1;
    let o = m2(r);
    return o ? px(i, o, e) : !1;
  },
  hx = (i, e, t) => {
    let r = fx(i, t);
    if (!r) return !1;
    let o = b2(r);
    return o ? px(i, o, e) : !1;
  };
function px(i, e, t) {
  let r = e.nodeBefore,
    o = r,
    n = e.pos - 1;
  for (; !o.isTextblock; n--) {
    if (o.type.spec.isolating) return !1;
    let _ = o.lastChild;
    if (!_) return !1;
    o = _;
  }
  let u = e.nodeAfter,
    h = u,
    m = e.pos + 1;
  for (; !h.isTextblock; m++) {
    if (h.type.spec.isolating) return !1;
    let _ = h.firstChild;
    if (!_) return !1;
    h = _;
  }
  let b = lp(i.doc, n, m, Ht.empty);
  if (!b || b.from != n || (b instanceof Oo && b.slice.size >= m - n))
    return !1;
  if (t) {
    let _ = i.tr.step(b);
    _.setSelection(Mi.create(_.doc, n)), t(_.scrollIntoView());
  }
  return !0;
}
function ld(i, e, t = !1) {
  for (let r = i; r; r = e == "start" ? r.firstChild : r.lastChild) {
    if (r.isTextblock) return !0;
    if (t && r.childCount != 1) return !1;
  }
  return !1;
}
var f2 = (i, e, t) => {
  let { $head: r, empty: o } = i.selection,
    n = r;
  if (!o) return !1;
  if (r.parent.isTextblock) {
    if (t ? !t.endOfTextblock("backward", i) : r.parentOffset > 0) return !1;
    n = m2(r);
  }
  let u = n && n.nodeBefore;
  return !u || !fi.isSelectable(u)
    ? !1
    : (e &&
        e(
          i.tr
            .setSelection(fi.create(i.doc, n.pos - u.nodeSize))
            .scrollIntoView()
        ),
      !0);
};
function m2(i) {
  if (!i.parent.type.spec.isolating)
    for (let e = i.depth - 1; e >= 0; e--) {
      if (i.index(e) > 0) return i.doc.resolve(i.before(e + 1));
      if (i.node(e).type.spec.isolating) break;
    }
  return null;
}
function fx(i, e) {
  let { $cursor: t } = i.selection;
  return !t ||
    (e
      ? !e.endOfTextblock("forward", i)
      : t.parentOffset < t.parent.content.size)
    ? null
    : t;
}
var g2 = (i, e, t) => {
    let r = fx(i, t);
    if (!r) return !1;
    let o = b2(r);
    if (!o) return !1;
    let n = o.nodeAfter;
    if (vx(i, o, e)) return !0;
    if (r.parent.content.size == 0 && (ld(n, "start") || fi.isSelectable(n))) {
      let u = lp(i.doc, r.before(), r.after(), Ht.empty);
      if (u && u.slice.size < u.to - u.from) {
        if (e) {
          let h = i.tr.step(u);
          h.setSelection(
            ld(n, "start")
              ? Ii.findFrom(h.doc.resolve(h.mapping.map(o.pos)), 1)
              : fi.create(h.doc, h.mapping.map(o.pos))
          ),
            e(h.scrollIntoView());
        }
        return !0;
      }
    }
    return n.isAtom && o.depth == r.depth - 1
      ? (e && e(i.tr.delete(o.pos, o.pos + n.nodeSize).scrollIntoView()), !0)
      : !1;
  },
  y2 = (i, e, t) => {
    let { $head: r, empty: o } = i.selection,
      n = r;
    if (!o) return !1;
    if (r.parent.isTextblock) {
      if (
        t
          ? !t.endOfTextblock("forward", i)
          : r.parentOffset < r.parent.content.size
      )
        return !1;
      n = b2(r);
    }
    let u = n && n.nodeAfter;
    return !u || !fi.isSelectable(u)
      ? !1
      : (e && e(i.tr.setSelection(fi.create(i.doc, n.pos)).scrollIntoView()),
        !0);
  };
function b2(i) {
  if (!i.parent.type.spec.isolating)
    for (let e = i.depth - 1; e >= 0; e--) {
      let t = i.node(e);
      if (i.index(e) + 1 < t.childCount) return i.doc.resolve(i.after(e + 1));
      if (t.type.spec.isolating) break;
    }
  return null;
}
var mx = (i, e) => {
    let t = i.selection,
      r = t instanceof fi,
      o;
    if (r) {
      if (t.node.isTextblock || !ra(i.doc, t.from)) return !1;
      o = t.from;
    } else if (((o = ed(i.doc, t.from, -1)), o == null)) return !1;
    if (e) {
      let n = i.tr.join(o);
      r &&
        n.setSelection(
          fi.create(n.doc, o - i.doc.resolve(o).nodeBefore.nodeSize)
        ),
        e(n.scrollIntoView());
    }
    return !0;
  },
  gx = (i, e) => {
    let t = i.selection,
      r;
    if (t instanceof fi) {
      if (t.node.isTextblock || !ra(i.doc, t.to)) return !1;
      r = t.to;
    } else if (((r = ed(i.doc, t.to, 1)), r == null)) return !1;
    return e && e(i.tr.join(r).scrollIntoView()), !0;
  },
  yx = (i, e) => {
    let { $from: t, $to: r } = i.selection,
      o = t.blockRange(r),
      n = o && Ya(o);
    return n == null ? !1 : (e && e(i.tr.lift(o, n).scrollIntoView()), !0);
  },
  v2 = (i, e) => {
    let { $head: t, $anchor: r } = i.selection;
    return !t.parent.type.spec.code || !t.sameParent(r)
      ? !1
      : (e &&
          e(
            i.tr
              .insertText(
                `
`
              )
              .scrollIntoView()
          ),
        !0);
  };
function _2(i) {
  for (let e = 0; e < i.edgeCount; e++) {
    let { type: t } = i.edge(e);
    if (t.isTextblock && !t.hasRequiredAttrs()) return t;
  }
  return null;
}
var x2 = (i, e) => {
    let { $head: t, $anchor: r } = i.selection;
    if (!t.parent.type.spec.code || !t.sameParent(r)) return !1;
    let o = t.node(-1),
      n = t.indexAfter(-1),
      u = _2(o.contentMatchAt(n));
    if (!u || !o.canReplaceWith(n, n, u)) return !1;
    if (e) {
      let h = t.after(),
        m = i.tr.replaceWith(h, h, u.createAndFill());
      m.setSelection(Ii.near(m.doc.resolve(h), 1)), e(m.scrollIntoView());
    }
    return !0;
  },
  w2 = (i, e) => {
    let t = i.selection,
      { $from: r, $to: o } = t;
    if (t instanceof ks || r.parent.inlineContent || o.parent.inlineContent)
      return !1;
    let n = _2(o.parent.contentMatchAt(o.indexAfter()));
    if (!n || !n.isTextblock) return !1;
    if (e) {
      let u = (!r.parentOffset && o.index() < o.parent.childCount ? r : o).pos,
        h = i.tr.insert(u, n.createAndFill());
      h.setSelection(Mi.create(h.doc, u + 1)), e(h.scrollIntoView());
    }
    return !0;
  },
  k2 = (i, e) => {
    let { $cursor: t } = i.selection;
    if (!t || t.parent.content.size) return !1;
    if (t.depth > 1 && t.after() != t.end(-1)) {
      let n = t.before();
      if (Os(i.doc, n)) return e && e(i.tr.split(n).scrollIntoView()), !0;
    }
    let r = t.blockRange(),
      o = r && Ya(r);
    return o == null ? !1 : (e && e(i.tr.lift(r, o).scrollIntoView()), !0);
  };
function fT(i) {
  return (e, t) => {
    let { $from: r, $to: o } = e.selection;
    if (e.selection instanceof fi && e.selection.node.isBlock)
      return !r.parentOffset || !Os(e.doc, r.pos)
        ? !1
        : (t && t(e.tr.split(r.pos).scrollIntoView()), !0);
    if (!r.parent.isBlock) return !1;
    if (t) {
      let n = o.parentOffset == o.parent.content.size,
        u = e.tr;
      (e.selection instanceof Mi || e.selection instanceof ks) &&
        u.deleteSelection();
      let h =
          r.depth == 0 ? null : _2(r.node(-1).contentMatchAt(r.indexAfter(-1))),
        m = i && i(o.parent, n),
        b = m ? [m] : n && h ? [{ type: h }] : void 0,
        _ = Os(u.doc, u.mapping.map(r.pos), 1, b);
      if (
        (!b &&
          !_ &&
          Os(u.doc, u.mapping.map(r.pos), 1, h ? [{ type: h }] : void 0) &&
          (h && (b = [{ type: h }]), (_ = !0)),
        _ &&
          (u.split(u.mapping.map(r.pos), 1, b),
          !n && !r.parentOffset && r.parent.type != h))
      ) {
        let S = u.mapping.map(r.before()),
          T = u.doc.resolve(S);
        h &&
          r.node(-1).canReplaceWith(T.index(), T.index() + 1, h) &&
          u.setNodeMarkup(u.mapping.map(r.before()), h);
      }
      t(u.scrollIntoView());
    }
    return !0;
  };
}
var mT = fT();
var bx = (i, e) => {
    let { $from: t, to: r } = i.selection,
      o,
      n = t.sharedDepth(r);
    return n == 0
      ? !1
      : ((o = t.before(n)), e && e(i.tr.setSelection(fi.create(i.doc, o))), !0);
  },
  gT = (i, e) => (e && e(i.tr.setSelection(new ks(i.doc))), !0);
function yT(i, e, t) {
  let r = e.nodeBefore,
    o = e.nodeAfter,
    n = e.index();
  return !r || !o || !r.type.compatibleContent(o.type)
    ? !1
    : !r.content.size && e.parent.canReplace(n - 1, n)
    ? (t && t(i.tr.delete(e.pos - r.nodeSize, e.pos).scrollIntoView()), !0)
    : !e.parent.canReplace(n, n + 1) || !(o.isTextblock || ra(i.doc, e.pos))
    ? !1
    : (t &&
        t(
          i.tr
            .clearIncompatible(e.pos, r.type, r.contentMatchAt(r.childCount))
            .join(e.pos)
            .scrollIntoView()
        ),
      !0);
}
function vx(i, e, t) {
  let r = e.nodeBefore,
    o = e.nodeAfter,
    n,
    u;
  if (r.type.spec.isolating || o.type.spec.isolating) return !1;
  if (yT(i, e, t)) return !0;
  let h = e.parent.canReplace(e.index(), e.index() + 1);
  if (
    h &&
    (n = (u = r.contentMatchAt(r.childCount)).findWrapping(o.type)) &&
    u.matchType(n[0] || o.type).validEnd
  ) {
    if (t) {
      let S = e.pos + o.nodeSize,
        T = Ct.empty;
      for (let q = n.length - 1; q >= 0; q--) T = Ct.from(n[q].create(null, T));
      T = Ct.from(r.copy(T));
      let D = i.tr.step(
          new Bn(e.pos - 1, S, e.pos, S, new Ht(T, 1, 0), n.length, !0)
        ),
        F = S + 2 * n.length;
      ra(D.doc, F) && D.join(F), t(D.scrollIntoView());
    }
    return !0;
  }
  let m = Ii.findFrom(e, 1),
    b = m && m.$from.blockRange(m.$to),
    _ = b && Ya(b);
  if (_ != null && _ >= e.depth)
    return t && t(i.tr.lift(b, _).scrollIntoView()), !0;
  if (h && ld(o, "start", !0) && ld(r, "end")) {
    let S = r,
      T = [];
    for (; T.push(S), !S.isTextblock; ) S = S.lastChild;
    let D = o,
      F = 1;
    for (; !D.isTextblock; D = D.firstChild) F++;
    if (S.canReplace(S.childCount, S.childCount, D.content)) {
      if (t) {
        let q = Ct.empty;
        for (let te = T.length - 1; te >= 0; te--) q = Ct.from(T[te].copy(q));
        let Q = i.tr.step(
          new Bn(
            e.pos - T.length,
            e.pos + o.nodeSize,
            e.pos + F,
            e.pos + o.nodeSize - F,
            new Ht(q, T.length, 0),
            0,
            !0
          )
        );
        t(Q.scrollIntoView());
      }
      return !0;
    }
  }
  return !1;
}
function _x(i) {
  return function (e, t) {
    let r = e.selection,
      o = i < 0 ? r.$from : r.$to,
      n = o.depth;
    for (; o.node(n).isInline; ) {
      if (!n) return !1;
      n--;
    }
    return o.node(n).isTextblock
      ? (t &&
          t(e.tr.setSelection(Mi.create(e.doc, i < 0 ? o.start(n) : o.end(n)))),
        !0)
      : !1;
  };
}
var S2 = _x(-1),
  C2 = _x(1);
function xx(i, e = null) {
  return function (t, r) {
    let { $from: o, $to: n } = t.selection,
      u = o.blockRange(n),
      h = u && Yu(u, i, e);
    return h ? (r && r(t.tr.wrap(u, h).scrollIntoView()), !0) : !1;
  };
}
function E2(i, e = null) {
  return function (t, r) {
    let o = !1;
    for (let n = 0; n < t.selection.ranges.length && !o; n++) {
      let {
        $from: { pos: u },
        $to: { pos: h },
      } = t.selection.ranges[n];
      t.doc.nodesBetween(u, h, (m, b) => {
        if (o) return !1;
        if (!(!m.isTextblock || m.hasMarkup(i, e)))
          if (m.type == i) o = !0;
          else {
            let _ = t.doc.resolve(b),
              S = _.index();
            o = _.parent.canReplaceWith(S, S + 1, i);
          }
      });
    }
    if (!o) return !1;
    if (r) {
      let n = t.tr;
      for (let u = 0; u < t.selection.ranges.length; u++) {
        let {
          $from: { pos: h },
          $to: { pos: m },
        } = t.selection.ranges[u];
        n.setBlockType(h, m, i, e);
      }
      r(n.scrollIntoView());
    }
    return !0;
  };
}
function T2(...i) {
  return function (e, t, r) {
    for (let o = 0; o < i.length; o++) if (i[o](e, t, r)) return !0;
    return !1;
  };
}
var h2 = T2(K0, p2, f2),
  cx = T2(K0, g2, y2),
  ic = {
    Enter: T2(v2, w2, k2, mT),
    "Mod-Enter": x2,
    Backspace: h2,
    "Mod-Backspace": h2,
    "Shift-Backspace": h2,
    Delete: cx,
    "Mod-Delete": cx,
    "Mod-a": gT,
  },
  bT = {
    "Ctrl-h": ic.Backspace,
    "Alt-Backspace": ic["Mod-Backspace"],
    "Ctrl-d": ic.Delete,
    "Ctrl-Alt-Backspace": ic["Mod-Delete"],
    "Alt-Delete": ic["Mod-Delete"],
    "Alt-d": ic["Mod-Delete"],
    "Ctrl-a": S2,
    "Ctrl-e": C2,
  };
for (let i in ic) bT[i] = ic[i];
var aU =
  typeof navigator < "u"
    ? /Mac|iP(hone|[oa]d)/.test(navigator.platform)
    : typeof os < "u" && os.platform
    ? os.platform() == "darwin"
    : !1;
function wx(i, e = null) {
  return function (t, r) {
    let { $from: o, $to: n } = t.selection,
      u = o.blockRange(n),
      h = !1,
      m = u;
    if (!u) return !1;
    if (
      u.depth >= 2 &&
      o.node(u.depth - 1).type.compatibleContent(i) &&
      u.startIndex == 0
    ) {
      if (o.index(u.depth - 1) == 0) return !1;
      let _ = t.doc.resolve(u.start - 2);
      (m = new Nc(_, _, u.depth)),
        u.endIndex < u.parent.childCount &&
          (u = new Nc(o, t.doc.resolve(n.end(u.depth)), u.depth)),
        (h = !0);
    }
    let b = Yu(m, i, e, u);
    return b ? (r && r(vT(t.tr, u, b, h, i).scrollIntoView()), !0) : !1;
  };
}
function vT(i, e, t, r, o) {
  let n = Ct.empty;
  for (let _ = t.length - 1; _ >= 0; _--)
    n = Ct.from(t[_].type.create(t[_].attrs, n));
  i.step(
    new Bn(
      e.start - (r ? 2 : 0),
      e.end,
      e.start,
      e.end,
      new Ht(n, 0, 0),
      t.length,
      !0
    )
  );
  let u = 0;
  for (let _ = 0; _ < t.length; _++) t[_].type == o && (u = _ + 1);
  let h = t.length - u,
    m = e.start + t.length - (r ? 2 : 0),
    b = e.parent;
  for (let _ = e.startIndex, S = e.endIndex, T = !0; _ < S; _++, T = !1)
    !T && Os(i.doc, m, h) && (i.split(m, h), (m += 2 * h)),
      (m += b.child(_).nodeSize);
  return i;
}
function kx(i) {
  return function (e, t) {
    let { $from: r, $to: o } = e.selection,
      n = r.blockRange(o, (u) => u.childCount > 0 && u.firstChild.type == i);
    return n
      ? t
        ? r.node(n.depth - 1).type == i
          ? _T(e, t, i, n)
          : xT(e, t, n)
        : !0
      : !1;
  };
}
function _T(i, e, t, r) {
  let o = i.tr,
    n = r.end,
    u = r.$to.end(r.depth);
  n < u &&
    (o.step(
      new Bn(
        n - 1,
        u,
        n,
        u,
        new Ht(Ct.from(t.create(null, r.parent.copy())), 1, 0),
        1,
        !0
      )
    ),
    (r = new Nc(o.doc.resolve(r.$from.pos), o.doc.resolve(u), r.depth)));
  let h = Ya(r);
  if (h == null) return !1;
  o.lift(r, h);
  let m = o.mapping.map(n, -1) - 1;
  return ra(o.doc, m) && o.join(m), e(o.scrollIntoView()), !0;
}
function xT(i, e, t) {
  let r = i.tr,
    o = t.parent;
  for (let D = t.end, F = t.endIndex - 1, q = t.startIndex; F > q; F--)
    (D -= o.child(F).nodeSize), r.delete(D - 1, D + 1);
  let n = r.doc.resolve(t.start),
    u = n.nodeAfter;
  if (r.mapping.map(t.end) != t.start + n.nodeAfter.nodeSize) return !1;
  let h = t.startIndex == 0,
    m = t.endIndex == o.childCount,
    b = n.node(-1),
    _ = n.index(-1);
  if (
    !b.canReplace(
      _ + (h ? 0 : 1),
      _ + 1,
      u.content.append(m ? Ct.empty : Ct.from(o))
    )
  )
    return !1;
  let S = n.pos,
    T = S + u.nodeSize;
  return (
    r.step(
      new Bn(
        S - (h ? 1 : 0),
        T + (m ? 1 : 0),
        S + 1,
        T - 1,
        new Ht(
          (h ? Ct.empty : Ct.from(o.copy(Ct.empty))).append(
            m ? Ct.empty : Ct.from(o.copy(Ct.empty))
          ),
          h ? 0 : 1,
          m ? 0 : 1
        ),
        h ? 0 : 1
      )
    ),
    e(r.scrollIntoView()),
    !0
  );
}
function Sx(i) {
  return function (e, t) {
    let { $from: r, $to: o } = e.selection,
      n = r.blockRange(o, (b) => b.childCount > 0 && b.firstChild.type == i);
    if (!n) return !1;
    let u = n.startIndex;
    if (u == 0) return !1;
    let h = n.parent,
      m = h.child(u - 1);
    if (m.type != i) return !1;
    if (t) {
      let b = m.lastChild && m.lastChild.type == h.type,
        _ = Ct.from(b ? i.create() : null),
        S = new Ht(
          Ct.from(i.create(null, Ct.from(h.type.create(null, _)))),
          b ? 3 : 1,
          0
        ),
        T = n.start,
        D = n.end;
      t(e.tr.step(new Bn(T - (b ? 3 : 1), D, T, D, S, 1, !0)).scrollIntoView());
    }
    return !0;
  };
}
function im(i) {
  let { state: e, transaction: t } = i,
    { selection: r } = t,
    { doc: o } = t,
    { storedMarks: n } = t;
  return {
    ...e,
    apply: e.apply.bind(e),
    applyTransaction: e.applyTransaction.bind(e),
    plugins: e.plugins,
    schema: e.schema,
    reconfigure: e.reconfigure.bind(e),
    toJSON: e.toJSON.bind(e),
    get storedMarks() {
      return n;
    },
    get selection() {
      return r;
    },
    get doc() {
      return o;
    },
    get tr() {
      return (r = t.selection), (o = t.doc), (n = t.storedMarks), t;
    },
  };
}
var cd = class {
    constructor(e) {
      (this.editor = e.editor),
        (this.rawCommands = this.editor.extensionManager.commands),
        (this.customState = e.state);
    }
    get hasCustomState() {
      return !!this.customState;
    }
    get state() {
      return this.customState || this.editor.state;
    }
    get commands() {
      let { rawCommands: e, editor: t, state: r } = this,
        { view: o } = t,
        { tr: n } = r,
        u = this.buildProps(n);
      return Object.fromEntries(
        Object.entries(e).map(([h, m]) => [
          h,
          (..._) => {
            let S = m(..._)(u);
            return (
              !n.getMeta("preventDispatch") &&
                !this.hasCustomState &&
                o.dispatch(n),
              S
            );
          },
        ])
      );
    }
    get chain() {
      return () => this.createChain();
    }
    get can() {
      return () => this.createCan();
    }
    createChain(e, t = !0) {
      let { rawCommands: r, editor: o, state: n } = this,
        { view: u } = o,
        h = [],
        m = !!e,
        b = e || n.tr,
        _ = () => (
          !m &&
            t &&
            !b.getMeta("preventDispatch") &&
            !this.hasCustomState &&
            u.dispatch(b),
          h.every((T) => T === !0)
        ),
        S = {
          ...Object.fromEntries(
            Object.entries(r).map(([T, D]) => [
              T,
              (...q) => {
                let Q = this.buildProps(b, t),
                  te = D(...q)(Q);
                return h.push(te), S;
              },
            ])
          ),
          run: _,
        };
      return S;
    }
    createCan(e) {
      let { rawCommands: t, state: r } = this,
        o = !1,
        n = e || r.tr,
        u = this.buildProps(n, o);
      return {
        ...Object.fromEntries(
          Object.entries(t).map(([m, b]) => [
            m,
            (..._) => b(..._)({ ...u, dispatch: void 0 }),
          ])
        ),
        chain: () => this.createChain(n, o),
      };
    }
    buildProps(e, t = !0) {
      let { rawCommands: r, editor: o, state: n } = this,
        { view: u } = o,
        h = {
          tr: e,
          editor: o,
          view: u,
          state: im({ state: n, transaction: e }),
          dispatch: t ? () => {} : void 0,
          chain: () => this.createChain(e, t),
          can: () => this.createCan(e),
          get commands() {
            return Object.fromEntries(
              Object.entries(r).map(([m, b]) => [m, (..._) => b(..._)(h)])
            );
          },
        };
      return h;
    }
  },
  D2 = class {
    constructor() {
      this.callbacks = {};
    }
    on(e, t) {
      return (
        this.callbacks[e] || (this.callbacks[e] = []),
        this.callbacks[e].push(t),
        this
      );
    }
    emit(e, ...t) {
      let r = this.callbacks[e];
      return r && r.forEach((o) => o.apply(this, t)), this;
    }
    off(e, t) {
      let r = this.callbacks[e];
      return (
        r &&
          (t
            ? (this.callbacks[e] = r.filter((o) => o !== t))
            : delete this.callbacks[e]),
        this
      );
    }
    removeAllListeners() {
      this.callbacks = {};
    }
  };
function ri(i, e, t) {
  return i.config[e] === void 0 && i.parent
    ? ri(i.parent, e, t)
    : typeof i.config[e] == "function"
    ? i.config[e].bind({ ...t, parent: i.parent ? ri(i.parent, e, t) : null })
    : i.config[e];
}
function rm(i) {
  let e = i.filter((o) => o.type === "extension"),
    t = i.filter((o) => o.type === "node"),
    r = i.filter((o) => o.type === "mark");
  return { baseExtensions: e, nodeExtensions: t, markExtensions: r };
}
function Dx(i) {
  let e = [],
    { nodeExtensions: t, markExtensions: r } = rm(i),
    o = [...t, ...r],
    n = {
      default: null,
      rendered: !0,
      renderHTML: null,
      parseHTML: null,
      keepOnSplit: !0,
      isRequired: !1,
    };
  return (
    i.forEach((u) => {
      let h = { name: u.name, options: u.options, storage: u.storage },
        m = ri(u, "addGlobalAttributes", h);
      if (!m) return;
      m().forEach((_) => {
        _.types.forEach((S) => {
          Object.entries(_.attributes).forEach(([T, D]) => {
            e.push({ type: S, name: T, attribute: { ...n, ...D } });
          });
        });
      });
    }),
    o.forEach((u) => {
      let h = { name: u.name, options: u.options, storage: u.storage },
        m = ri(u, "addAttributes", h);
      if (!m) return;
      let b = m();
      Object.entries(b).forEach(([_, S]) => {
        let T = { ...n, ...S };
        typeof T?.default == "function" && (T.default = T.default()),
          T?.isRequired && T?.default === void 0 && delete T.default,
          e.push({ type: u.name, name: _, attribute: T });
      });
    }),
    e
  );
}
function no(i, e) {
  if (typeof i == "string") {
    if (!e.nodes[i])
      throw Error(
        `There is no node type named '${i}'. Maybe you forgot to add the extension?`
      );
    return e.nodes[i];
  }
  return i;
}
function hr(...i) {
  return i
    .filter((e) => !!e)
    .reduce((e, t) => {
      let r = { ...e };
      return (
        Object.entries(t).forEach(([o, n]) => {
          if (!r[o]) {
            r[o] = n;
            return;
          }
          if (o === "class") {
            let h = n ? n.split(" ") : [],
              m = r[o] ? r[o].split(" ") : [],
              b = h.filter((_) => !m.includes(_));
            r[o] = [...m, ...b].join(" ");
          } else o === "style" ? (r[o] = [r[o], n].join("; ")) : (r[o] = n);
        }),
        r
      );
    }, {});
}
function L2(i, e) {
  return e
    .filter((t) => t.attribute.rendered)
    .map((t) =>
      t.attribute.renderHTML
        ? t.attribute.renderHTML(i.attrs) || {}
        : { [t.name]: i.attrs[t.name] }
    )
    .reduce((t, r) => hr(t, r), {});
}
function Lx(i) {
  return typeof i == "function";
}
function qi(i, e = void 0, ...t) {
  return Lx(i) ? (e ? i.bind(e)(...t) : i(...t)) : i;
}
function wT(i = {}) {
  return Object.keys(i).length === 0 && i.constructor === Object;
}
function kT(i) {
  return typeof i != "string"
    ? i
    : i.match(/^[+-]?(?:\d*\.)?\d+$/)
    ? Number(i)
    : i === "true"
    ? !0
    : i === "false"
    ? !1
    : i;
}
function Cx(i, e) {
  return i.style
    ? i
    : {
        ...i,
        getAttrs: (t) => {
          let r = i.getAttrs ? i.getAttrs(t) : i.attrs;
          if (r === !1) return !1;
          let o = e.reduce((n, u) => {
            let h = u.attribute.parseHTML
              ? u.attribute.parseHTML(t)
              : kT(t.getAttribute(u.name));
            return h == null ? n : { ...n, [u.name]: h };
          }, {});
          return { ...r, ...o };
        },
      };
}
function Ex(i) {
  return Object.fromEntries(
    Object.entries(i).filter(([e, t]) =>
      e === "attrs" && wT(t) ? !1 : t != null
    )
  );
}
function ST(i, e) {
  var t;
  let r = Dx(i),
    { nodeExtensions: o, markExtensions: n } = rm(i),
    u =
      (t = o.find((b) => ri(b, "topNode"))) === null || t === void 0
        ? void 0
        : t.name,
    h = Object.fromEntries(
      o.map((b) => {
        let _ = r.filter((te) => te.type === b.name),
          S = {
            name: b.name,
            options: b.options,
            storage: b.storage,
            editor: e,
          },
          T = i.reduce((te, ce) => {
            let be = ri(ce, "extendNodeSchema", S);
            return { ...te, ...(be ? be(b) : {}) };
          }, {}),
          D = Ex({
            ...T,
            content: qi(ri(b, "content", S)),
            marks: qi(ri(b, "marks", S)),
            group: qi(ri(b, "group", S)),
            inline: qi(ri(b, "inline", S)),
            atom: qi(ri(b, "atom", S)),
            selectable: qi(ri(b, "selectable", S)),
            draggable: qi(ri(b, "draggable", S)),
            code: qi(ri(b, "code", S)),
            defining: qi(ri(b, "defining", S)),
            isolating: qi(ri(b, "isolating", S)),
            attrs: Object.fromEntries(
              _.map((te) => {
                var ce;
                return [
                  te.name,
                  {
                    default:
                      (ce = te?.attribute) === null || ce === void 0
                        ? void 0
                        : ce.default,
                  },
                ];
              })
            ),
          }),
          F = qi(ri(b, "parseHTML", S));
        F && (D.parseDOM = F.map((te) => Cx(te, _)));
        let q = ri(b, "renderHTML", S);
        q && (D.toDOM = (te) => q({ node: te, HTMLAttributes: L2(te, _) }));
        let Q = ri(b, "renderText", S);
        return Q && (D.toText = Q), [b.name, D];
      })
    ),
    m = Object.fromEntries(
      n.map((b) => {
        let _ = r.filter((Q) => Q.type === b.name),
          S = {
            name: b.name,
            options: b.options,
            storage: b.storage,
            editor: e,
          },
          T = i.reduce((Q, te) => {
            let ce = ri(te, "extendMarkSchema", S);
            return { ...Q, ...(ce ? ce(b) : {}) };
          }, {}),
          D = Ex({
            ...T,
            inclusive: qi(ri(b, "inclusive", S)),
            excludes: qi(ri(b, "excludes", S)),
            group: qi(ri(b, "group", S)),
            spanning: qi(ri(b, "spanning", S)),
            code: qi(ri(b, "code", S)),
            attrs: Object.fromEntries(
              _.map((Q) => {
                var te;
                return [
                  Q.name,
                  {
                    default:
                      (te = Q?.attribute) === null || te === void 0
                        ? void 0
                        : te.default,
                  },
                ];
              })
            ),
          }),
          F = qi(ri(b, "parseHTML", S));
        F && (D.parseDOM = F.map((Q) => Cx(Q, _)));
        let q = ri(b, "renderHTML", S);
        return (
          q && (D.toDOM = (Q) => q({ mark: Q, HTMLAttributes: L2(Q, _) })),
          [b.name, D]
        );
      })
    );
  return new C0({ topNode: u, nodes: h, marks: m });
}
function M2(i, e) {
  return e.nodes[i] || e.marks[i] || null;
}
function Tx(i, e) {
  return Array.isArray(e)
    ? e.some((t) => (typeof t == "string" ? t : t.name) === i.name)
    : e;
}
var CT = (i, e = 500) => {
  let t = "",
    r = i.parentOffset;
  return (
    i.parent.nodesBetween(Math.max(0, r - e), r, (o, n, u, h) => {
      var m, b;
      let _ =
        ((b = (m = o.type.spec).toText) === null || b === void 0
          ? void 0
          : b.call(m, { node: o, pos: n, parent: u, index: h })) ||
        o.textContent ||
        "%leaf%";
      t += _.slice(0, Math.max(0, r - n));
    }),
    t
  );
};
function R2(i) {
  return Object.prototype.toString.call(i) === "[object RegExp]";
}
var ud = class {
    constructor(e) {
      (this.find = e.find), (this.handler = e.handler);
    }
  },
  ET = (i, e) => {
    if (R2(e)) return e.exec(i);
    let t = e(i);
    if (!t) return null;
    let r = [t.text];
    return (
      (r.index = t.index),
      (r.input = i),
      (r.data = t.data),
      t.replaceWith &&
        (t.text.includes(t.replaceWith) ||
          console.warn(
            '[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'
          ),
        r.push(t.replaceWith)),
      r
    );
  };
function J0(i) {
  var e;
  let { editor: t, from: r, to: o, text: n, rules: u, plugin: h } = i,
    { view: m } = t;
  if (m.composing) return !1;
  let b = m.state.doc.resolve(r);
  if (
    b.parent.type.spec.code ||
    (!((e = b.nodeBefore || b.nodeAfter) === null || e === void 0) &&
      e.marks.find((T) => T.type.spec.code))
  )
    return !1;
  let _ = !1,
    S = CT(b) + n;
  return (
    u.forEach((T) => {
      if (_) return;
      let D = ET(S, T.find);
      if (!D) return;
      let F = m.state.tr,
        q = im({ state: m.state, transaction: F }),
        Q = { from: r - (D[0].length - n.length), to: o },
        { commands: te, chain: ce, can: be } = new cd({ editor: t, state: q });
      T.handler({
        state: q,
        range: Q,
        match: D,
        commands: te,
        chain: ce,
        can: be,
      }) === null ||
        !F.steps.length ||
        (F.setMeta(h, { transform: F, from: r, to: o, text: n }),
        m.dispatch(F),
        (_ = !0));
    }),
    _
  );
}
function TT(i) {
  let { editor: e, rules: t } = i,
    r = new Vr({
      state: {
        init() {
          return null;
        },
        apply(o, n) {
          let u = o.getMeta(r);
          if (u) return u;
          let h = o.getMeta("applyInputRules");
          return (
            !!h &&
              setTimeout(() => {
                let { from: b, text: _ } = h,
                  S = b + _.length;
                J0({ editor: e, from: b, to: S, text: _, rules: t, plugin: r });
              }),
            o.selectionSet || o.docChanged ? null : n
          );
        },
      },
      props: {
        handleTextInput(o, n, u, h) {
          return J0({
            editor: e,
            from: n,
            to: u,
            text: h,
            rules: t,
            plugin: r,
          });
        },
        handleDOMEvents: {
          compositionend: (o) => (
            setTimeout(() => {
              let { $cursor: n } = o.state.selection;
              n &&
                J0({
                  editor: e,
                  from: n.pos,
                  to: n.pos,
                  text: "",
                  rules: t,
                  plugin: r,
                });
            }),
            !1
          ),
        },
        handleKeyDown(o, n) {
          if (n.key !== "Enter") return !1;
          let { $cursor: u } = o.state.selection;
          return u
            ? J0({
                editor: e,
                from: u.pos,
                to: u.pos,
                text: `
`,
                rules: t,
                plugin: r,
              })
            : !1;
        },
      },
      isInputRules: !0,
    });
  return r;
}
function MT(i) {
  return typeof i == "number";
}
var F2 = class {
    constructor(e) {
      (this.find = e.find), (this.handler = e.handler);
    }
  },
  AT = (i, e, t) => {
    if (R2(e)) return [...i.matchAll(e)];
    let r = e(i, t);
    return r
      ? r.map((o) => {
          let n = [o.text];
          return (
            (n.index = o.index),
            (n.input = i),
            (n.data = o.data),
            o.replaceWith &&
              (o.text.includes(o.replaceWith) ||
                console.warn(
                  '[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'
                ),
              n.push(o.replaceWith)),
            n
          );
        })
      : [];
  };
function IT(i) {
  let {
      editor: e,
      state: t,
      from: r,
      to: o,
      rule: n,
      pasteEvent: u,
      dropEvent: h,
    } = i,
    { commands: m, chain: b, can: _ } = new cd({ editor: e, state: t }),
    S = [];
  return (
    t.doc.nodesBetween(r, o, (D, F) => {
      if (!D.isTextblock || D.type.spec.code) return;
      let q = Math.max(r, F),
        Q = Math.min(o, F + D.content.size),
        te = D.textBetween(q - F, Q - F, void 0, "\uFFFC");
      AT(te, n.find, u).forEach((be) => {
        if (be.index === void 0) return;
        let Y = q + be.index + 1,
          Ie = Y + be[0].length,
          Te = { from: t.tr.mapping.map(Y), to: t.tr.mapping.map(Ie) },
          fe = n.handler({
            state: t,
            range: Te,
            match: be,
            commands: m,
            chain: b,
            can: _,
            pasteEvent: u,
            dropEvent: h,
          });
        S.push(fe);
      });
    }),
    S.every((D) => D !== null)
  );
}
var PT = (i) => {
  var e;
  let t = new ClipboardEvent("paste", { clipboardData: new DataTransfer() });
  return (
    (e = t.clipboardData) === null || e === void 0 || e.setData("text/html", i),
    t
  );
};
function DT(i) {
  let { editor: e, rules: t } = i,
    r = null,
    o = !1,
    n = !1,
    u = typeof ClipboardEvent < "u" ? new ClipboardEvent("paste") : null,
    h = typeof DragEvent < "u" ? new DragEvent("drop") : null,
    m = ({ state: _, from: S, to: T, rule: D, pasteEvt: F }) => {
      let q = _.tr,
        Q = im({ state: _, transaction: q });
      if (
        !(
          !IT({
            editor: e,
            state: Q,
            from: Math.max(S - 1, 0),
            to: T.b - 1,
            rule: D,
            pasteEvent: F,
            dropEvent: h,
          }) || !q.steps.length
        )
      )
        return (
          (h = typeof DragEvent < "u" ? new DragEvent("drop") : null),
          (u =
            typeof ClipboardEvent < "u" ? new ClipboardEvent("paste") : null),
          q
        );
    };
  return t.map(
    (_) =>
      new Vr({
        view(S) {
          let T = (D) => {
            var F;
            r =
              !((F = S.dom.parentElement) === null || F === void 0) &&
              F.contains(D.target)
                ? S.dom.parentElement
                : null;
          };
          return (
            window.addEventListener("dragstart", T),
            {
              destroy() {
                window.removeEventListener("dragstart", T);
              },
            }
          );
        },
        props: {
          handleDOMEvents: {
            drop: (S, T) => ((n = r === S.dom.parentElement), (h = T), !1),
            paste: (S, T) => {
              var D;
              let F =
                (D = T.clipboardData) === null || D === void 0
                  ? void 0
                  : D.getData("text/html");
              return (u = T), (o = !!F?.includes("data-pm-slice")), !1;
            },
          },
        },
        appendTransaction: (S, T, D) => {
          let F = S[0],
            q = F.getMeta("uiEvent") === "paste" && !o,
            Q = F.getMeta("uiEvent") === "drop" && !n,
            te = F.getMeta("applyPasteRules"),
            ce = !!te;
          if (!q && !Q && !ce) return;
          if (ce) {
            let { from: Ie, text: Te } = te,
              fe = Ie + Te.length,
              Le = PT(Te);
            return m({
              rule: _,
              state: D,
              from: Ie,
              to: { b: fe },
              pasteEvt: Le,
            });
          }
          let be = T.doc.content.findDiffStart(D.doc.content),
            Y = T.doc.content.findDiffEnd(D.doc.content);
          if (!(!MT(be) || !Y || be === Y.b))
            return m({ rule: _, state: D, from: be, to: Y, pasteEvt: u });
        },
      })
  );
}
function LT(i) {
  let e = i.filter((t, r) => i.indexOf(t) !== r);
  return [...new Set(e)];
}
var z2 = class i {
  constructor(e, t) {
    (this.splittableMarks = []),
      (this.editor = t),
      (this.extensions = i.resolve(e)),
      (this.schema = ST(this.extensions, t)),
      this.extensions.forEach((r) => {
        var o;
        this.editor.extensionStorage[r.name] = r.storage;
        let n = {
          name: r.name,
          options: r.options,
          storage: r.storage,
          editor: this.editor,
          type: M2(r.name, this.schema),
        };
        r.type === "mark" &&
          (!((o = qi(ri(r, "keepOnSplit", n))) !== null && o !== void 0) ||
            o) &&
          this.splittableMarks.push(r.name);
        let u = ri(r, "onBeforeCreate", n);
        u && this.editor.on("beforeCreate", u);
        let h = ri(r, "onCreate", n);
        h && this.editor.on("create", h);
        let m = ri(r, "onUpdate", n);
        m && this.editor.on("update", m);
        let b = ri(r, "onSelectionUpdate", n);
        b && this.editor.on("selectionUpdate", b);
        let _ = ri(r, "onTransaction", n);
        _ && this.editor.on("transaction", _);
        let S = ri(r, "onFocus", n);
        S && this.editor.on("focus", S);
        let T = ri(r, "onBlur", n);
        T && this.editor.on("blur", T);
        let D = ri(r, "onDestroy", n);
        D && this.editor.on("destroy", D);
      });
  }
  static resolve(e) {
    let t = i.sort(i.flatten(e)),
      r = LT(t.map((o) => o.name));
    return (
      r.length &&
        console.warn(
          `[tiptap warn]: Duplicate extension names found: [${r
            .map((o) => `'${o}'`)
            .join(", ")}]. This can lead to issues.`
        ),
      t
    );
  }
  static flatten(e) {
    return e
      .map((t) => {
        let r = { name: t.name, options: t.options, storage: t.storage },
          o = ri(t, "addExtensions", r);
        return o ? [t, ...this.flatten(o())] : t;
      })
      .flat(10);
  }
  static sort(e) {
    return e.sort((r, o) => {
      let n = ri(r, "priority") || 100,
        u = ri(o, "priority") || 100;
      return n > u ? -1 : n < u ? 1 : 0;
    });
  }
  get commands() {
    return this.extensions.reduce((e, t) => {
      let r = {
          name: t.name,
          options: t.options,
          storage: t.storage,
          editor: this.editor,
          type: M2(t.name, this.schema),
        },
        o = ri(t, "addCommands", r);
      return o ? { ...e, ...o() } : e;
    }, {});
  }
  get plugins() {
    let { editor: e } = this,
      t = i.sort([...this.extensions].reverse()),
      r = [],
      o = [],
      n = t
        .map((u) => {
          let h = {
              name: u.name,
              options: u.options,
              storage: u.storage,
              editor: e,
              type: M2(u.name, this.schema),
            },
            m = [],
            b = ri(u, "addKeyboardShortcuts", h),
            _ = {};
          if (
            (u.type === "mark" &&
              u.config.exitable &&
              (_.ArrowRight = () => ts.handleExit({ editor: e, mark: u })),
            b)
          ) {
            let q = Object.fromEntries(
              Object.entries(b()).map(([Q, te]) => [Q, () => te({ editor: e })])
            );
            _ = { ..._, ...q };
          }
          let S = lx(_);
          m.push(S);
          let T = ri(u, "addInputRules", h);
          Tx(u, e.options.enableInputRules) && T && r.push(...T());
          let D = ri(u, "addPasteRules", h);
          Tx(u, e.options.enablePasteRules) && D && o.push(...D());
          let F = ri(u, "addProseMirrorPlugins", h);
          if (F) {
            let q = F();
            m.push(...q);
          }
          return m;
        })
        .flat();
    return [TT({ editor: e, rules: r }), ...DT({ editor: e, rules: o }), ...n];
  }
  get attributes() {
    return Dx(this.extensions);
  }
  get nodeViews() {
    let { editor: e } = this,
      { nodeExtensions: t } = rm(this.extensions);
    return Object.fromEntries(
      t
        .filter((r) => !!ri(r, "addNodeView"))
        .map((r) => {
          let o = this.attributes.filter((m) => m.type === r.name),
            n = {
              name: r.name,
              options: r.options,
              storage: r.storage,
              editor: e,
              type: no(r.name, this.schema),
            },
            u = ri(r, "addNodeView", n);
          if (!u) return [];
          let h = (m, b, _, S) => {
            let T = L2(m, o);
            return u()({
              editor: e,
              node: m,
              getPos: _,
              decorations: S,
              HTMLAttributes: T,
              extension: r,
            });
          };
          return [r.name, h];
        })
    );
  }
};
function FT(i) {
  return Object.prototype.toString.call(i).slice(8, -1);
}
function A2(i) {
  return FT(i) !== "Object"
    ? !1
    : i.constructor === Object && Object.getPrototypeOf(i) === Object.prototype;
}
function nm(i, e) {
  let t = { ...i };
  return (
    A2(i) &&
      A2(e) &&
      Object.keys(e).forEach((r) => {
        A2(e[r])
          ? r in i
            ? (t[r] = nm(i[r], e[r]))
            : Object.assign(t, { [r]: e[r] })
          : Object.assign(t, { [r]: e[r] });
      }),
    t
  );
}
var mn = class i {
  constructor(e = {}) {
    (this.type = "extension"),
      (this.name = "extension"),
      (this.parent = null),
      (this.child = null),
      (this.config = { name: this.name, defaultOptions: {} }),
      (this.config = { ...this.config, ...e }),
      (this.name = this.config.name),
      e.defaultOptions &&
        Object.keys(e.defaultOptions).length > 0 &&
        console.warn(
          `[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`
        ),
      (this.options = this.config.defaultOptions),
      this.config.addOptions &&
        (this.options = qi(ri(this, "addOptions", { name: this.name }))),
      (this.storage =
        qi(
          ri(this, "addStorage", { name: this.name, options: this.options })
        ) || {});
  }
  static create(e = {}) {
    return new i(e);
  }
  configure(e = {}) {
    let t = this.extend();
    return (
      (t.options = nm(this.options, e)),
      (t.storage = qi(
        ri(t, "addStorage", { name: t.name, options: t.options })
      )),
      t
    );
  }
  extend(e = {}) {
    let t = new i({ ...this.config, ...e });
    return (
      (t.parent = this),
      (this.child = t),
      (t.name = e.name ? e.name : t.parent.name),
      e.defaultOptions &&
        console.warn(
          `[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`
        ),
      (t.options = qi(ri(t, "addOptions", { name: t.name }))),
      (t.storage = qi(
        ri(t, "addStorage", { name: t.name, options: t.options })
      )),
      t
    );
  }
};
function Fx(i, e, t) {
  let { from: r, to: o } = e,
    {
      blockSeparator: n = `

`,
      textSerializers: u = {},
    } = t || {},
    h = "",
    m = !0;
  return (
    i.nodesBetween(r, o, (b, _, S, T) => {
      var D;
      let F = u?.[b.type.name];
      if (F)
        return (
          b.isBlock && !m && ((h += n), (m = !0)),
          S && (h += F({ node: b, pos: _, parent: S, index: T, range: e })),
          !1
        );
      b.isText
        ? ((h +=
            (D = b?.text) === null || D === void 0
              ? void 0
              : D.slice(Math.max(r, _) - _, o - _)),
          (m = !1))
        : b.isBlock && !m && ((h += n), (m = !0));
    }),
    h
  );
}
function zx(i) {
  return Object.fromEntries(
    Object.entries(i.nodes)
      .filter(([, e]) => e.spec.toText)
      .map(([e, t]) => [e, t.spec.toText])
  );
}
var zT = mn.create({
    name: "clipboardTextSerializer",
    addOptions() {
      return { blockSeparator: void 0 };
    },
    addProseMirrorPlugins() {
      return [
        new Vr({
          key: new Gn("clipboardTextSerializer"),
          props: {
            clipboardTextSerializer: () => {
              let { editor: i } = this,
                { state: e, schema: t } = i,
                { doc: r, selection: o } = e,
                { ranges: n } = o,
                u = Math.min(...n.map((_) => _.$from.pos)),
                h = Math.max(...n.map((_) => _.$to.pos)),
                m = zx(t);
              return Fx(
                r,
                { from: u, to: h },
                {
                  ...(this.options.blockSeparator !== void 0
                    ? { blockSeparator: this.options.blockSeparator }
                    : {}),
                  textSerializers: m,
                }
              );
            },
          },
        }),
      ];
    },
  }),
  NT =
    () =>
    ({ editor: i, view: e }) => (
      requestAnimationFrame(() => {
        var t;
        i.isDestroyed ||
          (e.dom.blur(),
          (t = window?.getSelection()) === null ||
            t === void 0 ||
            t.removeAllRanges());
      }),
      !0
    ),
  OT =
    (i = !1) =>
    ({ commands: e }) =>
      e.setContent("", i),
  BT =
    () =>
    ({ state: i, tr: e, dispatch: t }) => {
      let { selection: r } = e,
        { ranges: o } = r;
      return (
        t &&
          o.forEach(({ $from: n, $to: u }) => {
            i.doc.nodesBetween(n.pos, u.pos, (h, m) => {
              if (h.type.isText) return;
              let { doc: b, mapping: _ } = e,
                S = b.resolve(_.map(m)),
                T = b.resolve(_.map(m + h.nodeSize)),
                D = S.blockRange(T);
              if (!D) return;
              let F = Ya(D);
              if (h.type.isTextblock) {
                let { defaultType: q } = S.parent.contentMatchAt(S.index());
                e.setNodeMarkup(D.start, q);
              }
              (F || F === 0) && e.lift(D, F);
            });
          }),
        !0
      );
    },
  RT = (i) => (e) => i(e),
  UT =
    () =>
    ({ state: i, dispatch: e }) =>
      w2(i, e),
  VT =
    (i, e) =>
    ({ editor: t, tr: r }) => {
      let { state: o } = t,
        n = o.doc.slice(i.from, i.to);
      r.deleteRange(i.from, i.to);
      let u = r.mapping.map(e);
      return (
        r.insert(u, n.content), r.setSelection(new Mi(r.doc.resolve(u - 1))), !0
      );
    },
  jT =
    () =>
    ({ tr: i, dispatch: e }) => {
      let { selection: t } = i,
        r = t.$anchor.node();
      if (r.content.size > 0) return !1;
      let o = i.selection.$anchor;
      for (let n = o.depth; n > 0; n -= 1)
        if (o.node(n).type === r.type) {
          if (e) {
            let h = o.before(n),
              m = o.after(n);
            i.delete(h, m).scrollIntoView();
          }
          return !0;
        }
      return !1;
    },
  HT =
    (i) =>
    ({ tr: e, state: t, dispatch: r }) => {
      let o = no(i, t.schema),
        n = e.selection.$anchor;
      for (let u = n.depth; u > 0; u -= 1)
        if (n.node(u).type === o) {
          if (r) {
            let m = n.before(u),
              b = n.after(u);
            e.delete(m, b).scrollIntoView();
          }
          return !0;
        }
      return !1;
    },
  qT =
    (i) =>
    ({ tr: e, dispatch: t }) => {
      let { from: r, to: o } = i;
      return t && e.delete(r, o), !0;
    },
  $T =
    () =>
    ({ state: i, dispatch: e }) =>
      K0(i, e),
  QT =
    () =>
    ({ commands: i }) =>
      i.keyboardShortcut("Enter"),
  GT =
    () =>
    ({ state: i, dispatch: e }) =>
      x2(i, e);
function Y0(i, e, t = { strict: !0 }) {
  let r = Object.keys(e);
  return r.length
    ? r.every((o) =>
        t.strict ? e[o] === i[o] : R2(e[o]) ? e[o].test(i[o]) : e[o] === i[o]
      )
    : !0;
}
function N2(i, e, t = {}) {
  return i.find((r) => r.type === e && Y0(r.attrs, t));
}
function WT(i, e, t = {}) {
  return !!N2(i, e, t);
}
function U2(i, e, t = {}) {
  if (!i || !e) return;
  let r = i.parent.childAfter(i.parentOffset);
  if (
    (i.parentOffset === r.offset &&
      r.offset !== 0 &&
      (r = i.parent.childBefore(i.parentOffset)),
    !r.node)
  )
    return;
  let o = N2([...r.node.marks], e, t);
  if (!o) return;
  let n = r.index,
    u = i.start() + r.offset,
    h = n + 1,
    m = u + r.node.nodeSize;
  for (
    N2([...r.node.marks], e, t);
    n > 0 && o.isInSet(i.parent.child(n - 1).marks);

  )
    (n -= 1), (u -= i.parent.child(n).nodeSize);
  for (; h < i.parent.childCount && WT([...i.parent.child(h).marks], e, t); )
    (m += i.parent.child(h).nodeSize), (h += 1);
  return { from: u, to: m };
}
function rc(i, e) {
  if (typeof i == "string") {
    if (!e.marks[i])
      throw Error(
        `There is no mark type named '${i}'. Maybe you forgot to add the extension?`
      );
    return e.marks[i];
  }
  return i;
}
var ZT =
    (i, e = {}) =>
    ({ tr: t, state: r, dispatch: o }) => {
      let n = rc(i, r.schema),
        { doc: u, selection: h } = t,
        { $from: m, from: b, to: _ } = h;
      if (o) {
        let S = U2(m, n, e);
        if (S && S.from <= b && S.to >= _) {
          let T = Mi.create(u, S.from, S.to);
          t.setSelection(T);
        }
      }
      return !0;
    },
  KT = (i) => (e) => {
    let t = typeof i == "function" ? i(e) : i;
    for (let r = 0; r < t.length; r += 1) if (t[r](e)) return !0;
    return !1;
  };
function om(i) {
  return i instanceof Mi;
}
function nl(i = 0, e = 0, t = 0) {
  return Math.min(Math.max(i, e), t);
}
function Nx(i, e = null) {
  if (!e) return null;
  let t = Ii.atStart(i),
    r = Ii.atEnd(i);
  if (e === "start" || e === !0) return t;
  if (e === "end") return r;
  let o = t.from,
    n = r.to;
  return e === "all"
    ? Mi.create(i, nl(0, o, n), nl(i.content.size, o, n))
    : Mi.create(i, nl(e, o, n), nl(e, o, n));
}
function V2() {
  return (
    [
      "iPad Simulator",
      "iPhone Simulator",
      "iPod Simulator",
      "iPad",
      "iPhone",
      "iPod",
    ].includes(navigator.platform) ||
    (navigator.userAgent.includes("Mac") && "ontouchend" in document)
  );
}
var JT =
    (i = null, e = {}) =>
    ({ editor: t, view: r, tr: o, dispatch: n }) => {
      e = { scrollIntoView: !0, ...e };
      let u = () => {
        V2() && r.dom.focus(),
          requestAnimationFrame(() => {
            t.isDestroyed ||
              (r.focus(), e?.scrollIntoView && t.commands.scrollIntoView());
          });
      };
      if ((r.hasFocus() && i === null) || i === !1) return !0;
      if (n && i === null && !om(t.state.selection)) return u(), !0;
      let h = Nx(o.doc, i) || t.state.selection,
        m = t.state.selection.eq(h);
      return (
        n &&
          (m || o.setSelection(h),
          m && o.storedMarks && o.setStoredMarks(o.storedMarks),
          u()),
        !0
      );
    },
  XT = (i, e) => (t) => i.every((r, o) => e(r, { ...t, index: o })),
  YT =
    (i, e) =>
    ({ tr: t, commands: r }) =>
      r.insertContentAt({ from: t.selection.from, to: t.selection.to }, i, e),
  Ox = (i) => {
    let e = i.childNodes;
    for (let t = e.length - 1; t >= 0; t -= 1) {
      let r = e[t];
      r.nodeType === 3 && r.nodeValue && /^(\n\s\s|\n)$/.test(r.nodeValue)
        ? i.removeChild(r)
        : r.nodeType === 1 && Ox(r);
    }
    return i;
  };
function Mx(i) {
  let e = `<body>${i}</body>`,
    t = new window.DOMParser().parseFromString(e, "text/html").body;
  return Ox(t);
}
function em(i, e, t) {
  if (
    ((t = { slice: !0, parseOptions: {}, ...t }),
    typeof i == "object" && i !== null)
  )
    try {
      return Array.isArray(i) && i.length > 0
        ? Ct.fromArray(i.map((r) => e.nodeFromJSON(r)))
        : e.nodeFromJSON(i);
    } catch (r) {
      return (
        console.warn(
          "[tiptap warn]: Invalid content.",
          "Passed value:",
          i,
          "Error:",
          r
        ),
        em("", e, t)
      );
    }
  if (typeof i == "string") {
    let r = Bc.fromSchema(e);
    return t.slice
      ? r.parseSlice(Mx(i), t.parseOptions).content
      : r.parse(Mx(i), t.parseOptions);
  }
  return em("", e, t);
}
function eM(i, e, t) {
  let r = i.steps.length - 1;
  if (r < e) return;
  let o = i.steps[r];
  if (!(o instanceof Oo || o instanceof Bn)) return;
  let n = i.mapping.maps[r],
    u = 0;
  n.forEach((h, m, b, _) => {
    u === 0 && (u = _);
  }),
    i.setSelection(Ii.near(i.doc.resolve(u), t));
}
var tM = (i) => i.toString().startsWith("<"),
  iM =
    (i, e, t) =>
    ({ tr: r, dispatch: o, editor: n }) => {
      if (o) {
        t = {
          parseOptions: {},
          updateSelection: !0,
          applyInputRules: !1,
          applyPasteRules: !1,
          ...t,
        };
        let u = em(e, n.schema, {
          parseOptions: { preserveWhitespace: "full", ...t.parseOptions },
        });
        if (u.toString() === "<>") return !0;
        let { from: h, to: m } =
            typeof i == "number"
              ? { from: i, to: i }
              : { from: i.from, to: i.to },
          b = !0,
          _ = !0;
        if (
          ((tM(u) ? u : [u]).forEach((D) => {
            D.check(),
              (b = b ? D.isText && D.marks.length === 0 : !1),
              (_ = _ ? D.isBlock : !1);
          }),
          h === m && _)
        ) {
          let { parent: D } = r.doc.resolve(h);
          D.isTextblock &&
            !D.type.spec.code &&
            !D.childCount &&
            ((h -= 1), (m += 1));
        }
        let T;
        b
          ? (Array.isArray(e)
              ? (T = e.map((D) => D.text || "").join(""))
              : typeof e == "object" && e && e.text
              ? (T = e.text)
              : (T = e),
            r.insertText(T, h, m))
          : ((T = u), r.replaceWith(h, m, T)),
          t.updateSelection && eM(r, r.steps.length - 1, -1),
          t.applyInputRules &&
            r.setMeta("applyInputRules", { from: h, text: T }),
          t.applyPasteRules &&
            r.setMeta("applyPasteRules", { from: h, text: T });
      }
      return !0;
    },
  rM =
    () =>
    ({ state: i, dispatch: e }) =>
      mx(i, e),
  nM =
    () =>
    ({ state: i, dispatch: e }) =>
      gx(i, e),
  oM =
    () =>
    ({ state: i, dispatch: e }) =>
      p2(i, e),
  sM =
    () =>
    ({ state: i, dispatch: e }) =>
      g2(i, e),
  aM =
    () =>
    ({ tr: i, state: e, dispatch: t }) => {
      try {
        let r = ed(e.doc, e.selection.$from.pos, -1);
        return r == null ? !1 : (i.join(r, 2), t && t(i), !0);
      } catch {
        return !1;
      }
    },
  lM =
    () =>
    ({ state: i, dispatch: e, tr: t }) => {
      try {
        let r = ed(i.doc, i.selection.$from.pos, 1);
        return r == null ? !1 : (t.join(r, 2), e && e(t), !0);
      } catch {
        return !1;
      }
    },
  cM =
    () =>
    ({ state: i, dispatch: e }) =>
      dx(i, e),
  uM =
    () =>
    ({ state: i, dispatch: e }) =>
      hx(i, e);
function sm() {
  return typeof navigator < "u" ? /Mac/.test(navigator.platform) : !1;
}
function dM(i) {
  let e = i.split(/-(?!$)/),
    t = e[e.length - 1];
  t === "Space" && (t = " ");
  let r, o, n, u;
  for (let h = 0; h < e.length - 1; h += 1) {
    let m = e[h];
    if (/^(cmd|meta|m)$/i.test(m)) u = !0;
    else if (/^a(lt)?$/i.test(m)) r = !0;
    else if (/^(c|ctrl|control)$/i.test(m)) o = !0;
    else if (/^s(hift)?$/i.test(m)) n = !0;
    else if (/^mod$/i.test(m)) V2() || sm() ? (u = !0) : (o = !0);
    else throw new Error(`Unrecognized modifier name: ${m}`);
  }
  return (
    r && (t = `Alt-${t}`),
    o && (t = `Ctrl-${t}`),
    u && (t = `Meta-${t}`),
    n && (t = `Shift-${t}`),
    t
  );
}
var hM =
  (i) =>
  ({ editor: e, view: t, tr: r, dispatch: o }) => {
    let n = dM(i).split(/-(?!$)/),
      u = n.find((b) => !["Alt", "Ctrl", "Meta", "Shift"].includes(b)),
      h = new KeyboardEvent("keydown", {
        key: u === "Space" ? " " : u,
        altKey: n.includes("Alt"),
        ctrlKey: n.includes("Ctrl"),
        metaKey: n.includes("Meta"),
        shiftKey: n.includes("Shift"),
        bubbles: !0,
        cancelable: !0,
      }),
      m = e.captureTransaction(() => {
        t.someProp("handleKeyDown", (b) => b(t, h));
      });
    return (
      m?.steps.forEach((b) => {
        let _ = b.map(r.mapping);
        _ && o && r.maybeStep(_);
      }),
      !0
    );
  };
function vp(i, e, t = {}) {
  let { from: r, to: o, empty: n } = i.selection,
    u = e ? no(e, i.schema) : null,
    h = [];
  i.doc.nodesBetween(r, o, (S, T) => {
    if (S.isText) return;
    let D = Math.max(r, T),
      F = Math.min(o, T + S.nodeSize);
    h.push({ node: S, from: D, to: F });
  });
  let m = o - r,
    b = h
      .filter((S) => (u ? u.name === S.node.type.name : !0))
      .filter((S) => Y0(S.node.attrs, t, { strict: !1 }));
  return n ? !!b.length : b.reduce((S, T) => S + T.to - T.from, 0) >= m;
}
var pM =
    (i, e = {}) =>
    ({ state: t, dispatch: r }) => {
      let o = no(i, t.schema);
      return vp(t, o, e) ? yx(t, r) : !1;
    },
  fM =
    () =>
    ({ state: i, dispatch: e }) =>
      k2(i, e),
  mM =
    (i) =>
    ({ state: e, dispatch: t }) => {
      let r = no(i, e.schema);
      return kx(r)(e, t);
    },
  gM =
    () =>
    ({ state: i, dispatch: e }) =>
      v2(i, e);
function am(i, e) {
  return e.nodes[i] ? "node" : e.marks[i] ? "mark" : null;
}
function Ax(i, e) {
  let t = typeof e == "string" ? [e] : e;
  return Object.keys(i).reduce(
    (r, o) => (t.includes(o) || (r[o] = i[o]), r),
    {}
  );
}
var yM =
    (i, e) =>
    ({ tr: t, state: r, dispatch: o }) => {
      let n = null,
        u = null,
        h = am(typeof i == "string" ? i : i.name, r.schema);
      return h
        ? (h === "node" && (n = no(i, r.schema)),
          h === "mark" && (u = rc(i, r.schema)),
          o &&
            t.selection.ranges.forEach((m) => {
              r.doc.nodesBetween(m.$from.pos, m.$to.pos, (b, _) => {
                n && n === b.type && t.setNodeMarkup(_, void 0, Ax(b.attrs, e)),
                  u &&
                    b.marks.length &&
                    b.marks.forEach((S) => {
                      u === S.type &&
                        t.addMark(_, _ + b.nodeSize, u.create(Ax(S.attrs, e)));
                    });
              });
            }),
          !0)
        : !1;
    },
  bM =
    () =>
    ({ tr: i, dispatch: e }) => (e && i.scrollIntoView(), !0),
  vM =
    () =>
    ({ tr: i, commands: e }) =>
      e.setTextSelection({ from: 0, to: i.doc.content.size }),
  _M =
    () =>
    ({ state: i, dispatch: e }) =>
      f2(i, e),
  xM =
    () =>
    ({ state: i, dispatch: e }) =>
      y2(i, e),
  wM =
    () =>
    ({ state: i, dispatch: e }) =>
      bx(i, e),
  kM =
    () =>
    ({ state: i, dispatch: e }) =>
      C2(i, e),
  SM =
    () =>
    ({ state: i, dispatch: e }) =>
      S2(i, e);
function Bx(i, e, t = {}) {
  return em(i, e, { slice: !1, parseOptions: t });
}
var CM =
  (i, e = !1, t = {}) =>
  ({ tr: r, editor: o, dispatch: n }) => {
    let { doc: u } = r,
      h = Bx(i, o.schema, t);
    return (
      n && r.replaceWith(0, u.content.size, h).setMeta("preventUpdate", !e), !0
    );
  };
function dd(i, e) {
  let t = rc(e, i.schema),
    { from: r, to: o, empty: n } = i.selection,
    u = [];
  n
    ? (i.storedMarks && u.push(...i.storedMarks),
      u.push(...i.selection.$head.marks()))
    : i.doc.nodesBetween(r, o, (m) => {
        u.push(...m.marks);
      });
  let h = u.find((m) => m.type.name === t.name);
  return h ? { ...h.attrs } : {};
}
function EM(i) {
  for (let e = 0; e < i.edgeCount; e += 1) {
    let { type: t } = i.edge(e);
    if (t.isTextblock && !t.hasRequiredAttrs()) return t;
  }
  return null;
}
function TM(i, e) {
  for (let t = i.depth; t > 0; t -= 1) {
    let r = i.node(t);
    if (e(r))
      return {
        pos: t > 0 ? i.before(t) : 0,
        start: i.start(t),
        depth: t,
        node: r,
      };
  }
}
function j2(i) {
  return (e) => TM(e.$from, i);
}
function MM(i, e) {
  let t = Ja.fromSchema(e).serializeFragment(i),
    o = document.implementation.createHTMLDocument().createElement("div");
  return o.appendChild(t), o.innerHTML;
}
function AM(i, e) {
  let t = { from: 0, to: i.content.size };
  return Fx(i, t, e);
}
function IM(i, e) {
  let t = no(e, i.schema),
    { from: r, to: o } = i.selection,
    n = [];
  i.doc.nodesBetween(r, o, (h) => {
    n.push(h);
  });
  let u = n.reverse().find((h) => h.type.name === t.name);
  return u ? { ...u.attrs } : {};
}
function PM(i, e) {
  let t = am(typeof e == "string" ? e : e.name, i.schema);
  return t === "node" ? IM(i, e) : t === "mark" ? dd(i, e) : {};
}
function Rx(i, e, t) {
  let r = [];
  return (
    i === e
      ? t
          .resolve(i)
          .marks()
          .forEach((o) => {
            let n = t.resolve(i - 1),
              u = U2(n, o.type);
            u && r.push({ mark: o, ...u });
          })
      : t.nodesBetween(i, e, (o, n) => {
          !o ||
            o?.nodeSize === void 0 ||
            r.push(
              ...o.marks.map((u) => ({ from: n, to: n + o.nodeSize, mark: u }))
            );
        }),
    r
  );
}
function X0(i, e, t) {
  return Object.fromEntries(
    Object.entries(t).filter(([r]) => {
      let o = i.find((n) => n.type === e && n.name === r);
      return o ? o.attribute.keepOnSplit : !1;
    })
  );
}
function O2(i, e, t = {}) {
  let { empty: r, ranges: o } = i.selection,
    n = e ? rc(e, i.schema) : null;
  if (r)
    return !!(i.storedMarks || i.selection.$from.marks())
      .filter((S) => (n ? n.name === S.type.name : !0))
      .find((S) => Y0(S.attrs, t, { strict: !1 }));
  let u = 0,
    h = [];
  if (
    (o.forEach(({ $from: S, $to: T }) => {
      let D = S.pos,
        F = T.pos;
      i.doc.nodesBetween(D, F, (q, Q) => {
        if (!q.isText && !q.marks.length) return;
        let te = Math.max(D, Q),
          ce = Math.min(F, Q + q.nodeSize),
          be = ce - te;
        (u += be),
          h.push(...q.marks.map((Y) => ({ mark: Y, from: te, to: ce })));
      });
    }),
    u === 0)
  )
    return !1;
  let m = h
      .filter((S) => (n ? n.name === S.mark.type.name : !0))
      .filter((S) => Y0(S.mark.attrs, t, { strict: !1 }))
      .reduce((S, T) => S + T.to - T.from, 0),
    b = h
      .filter((S) => (n ? S.mark.type !== n && S.mark.type.excludes(n) : !0))
      .reduce((S, T) => S + T.to - T.from, 0);
  return (m > 0 ? m + b : m) >= u;
}
function DM(i, e, t = {}) {
  if (!e) return vp(i, null, t) || O2(i, null, t);
  let r = am(e, i.schema);
  return r === "node" ? vp(i, e, t) : r === "mark" ? O2(i, e, t) : !1;
}
function Ix(i, e) {
  let { nodeExtensions: t } = rm(e),
    r = t.find((u) => u.name === i);
  if (!r) return !1;
  let o = { name: r.name, options: r.options, storage: r.storage },
    n = qi(ri(r, "group", o));
  return typeof n != "string" ? !1 : n.split(" ").includes("list");
}
function LM(i) {
  var e;
  let t =
      (e = i.type.createAndFill()) === null || e === void 0
        ? void 0
        : e.toJSON(),
    r = i.toJSON();
  return JSON.stringify(t) === JSON.stringify(r);
}
function Ux(i) {
  return i instanceof fi;
}
function lm(i, e, t) {
  let o = i.state.doc.content.size,
    n = nl(e, 0, o),
    u = nl(t, 0, o),
    h = i.coordsAtPos(n),
    m = i.coordsAtPos(u, -1),
    b = Math.min(h.top, m.top),
    _ = Math.max(h.bottom, m.bottom),
    S = Math.min(h.left, m.left),
    T = Math.max(h.right, m.right),
    D = T - S,
    F = _ - b,
    te = {
      top: b,
      bottom: _,
      left: S,
      right: T,
      width: D,
      height: F,
      x: S,
      y: b,
    };
  return { ...te, toJSON: () => te };
}
function FM(i, e, t) {
  var r;
  let { selection: o } = e,
    n = null;
  if ((om(o) && (n = o.$cursor), n)) {
    let h = (r = i.storedMarks) !== null && r !== void 0 ? r : n.marks();
    return !!t.isInSet(h) || !h.some((m) => m.type.excludes(t));
  }
  let { ranges: u } = o;
  return u.some(({ $from: h, $to: m }) => {
    let b =
      h.depth === 0 ? i.doc.inlineContent && i.doc.type.allowsMarkType(t) : !1;
    return (
      i.doc.nodesBetween(h.pos, m.pos, (_, S, T) => {
        if (b) return !1;
        if (_.isInline) {
          let D = !T || T.type.allowsMarkType(t),
            F =
              !!t.isInSet(_.marks) || !_.marks.some((q) => q.type.excludes(t));
          b = D && F;
        }
        return !b;
      }),
      b
    );
  });
}
var zM =
    (i, e = {}) =>
    ({ tr: t, state: r, dispatch: o }) => {
      let { selection: n } = t,
        { empty: u, ranges: h } = n,
        m = rc(i, r.schema);
      if (o)
        if (u) {
          let b = dd(r, m);
          t.addStoredMark(m.create({ ...b, ...e }));
        } else
          h.forEach((b) => {
            let _ = b.$from.pos,
              S = b.$to.pos;
            r.doc.nodesBetween(_, S, (T, D) => {
              let F = Math.max(D, _),
                q = Math.min(D + T.nodeSize, S);
              T.marks.find((te) => te.type === m)
                ? T.marks.forEach((te) => {
                    m === te.type &&
                      t.addMark(F, q, m.create({ ...te.attrs, ...e }));
                  })
                : t.addMark(F, q, m.create(e));
            });
          });
      return FM(r, t, m);
    },
  NM =
    (i, e) =>
    ({ tr: t }) => (t.setMeta(i, e), !0),
  OM =
    (i, e = {}) =>
    ({ state: t, dispatch: r, chain: o }) => {
      let n = no(i, t.schema);
      return n.isTextblock
        ? o()
            .command(({ commands: u }) => (E2(n, e)(t) ? !0 : u.clearNodes()))
            .command(({ state: u }) => E2(n, e)(u, r))
            .run()
        : (console.warn(
            '[tiptap warn]: Currently "setNode()" only supports text block nodes.'
          ),
          !1);
    },
  BM =
    (i) =>
    ({ tr: e, dispatch: t }) => {
      if (t) {
        let { doc: r } = e,
          o = nl(i, 0, r.content.size),
          n = fi.create(r, o);
        e.setSelection(n);
      }
      return !0;
    },
  RM =
    (i) =>
    ({ tr: e, dispatch: t }) => {
      if (t) {
        let { doc: r } = e,
          { from: o, to: n } = typeof i == "number" ? { from: i, to: i } : i,
          u = Mi.atStart(r).from,
          h = Mi.atEnd(r).to,
          m = nl(o, u, h),
          b = nl(n, u, h),
          _ = Mi.create(r, m, b);
        e.setSelection(_);
      }
      return !0;
    },
  UM =
    (i) =>
    ({ state: e, dispatch: t }) => {
      let r = no(i, e.schema);
      return Sx(r)(e, t);
    };
function Px(i, e) {
  let t =
    i.storedMarks ||
    (i.selection.$to.parentOffset && i.selection.$from.marks());
  if (t) {
    let r = t.filter((o) => e?.includes(o.type.name));
    i.tr.ensureMarks(r);
  }
}
var VM =
    ({ keepMarks: i = !0 } = {}) =>
    ({ tr: e, state: t, dispatch: r, editor: o }) => {
      let { selection: n, doc: u } = e,
        { $from: h, $to: m } = n,
        b = o.extensionManager.attributes,
        _ = X0(b, h.node().type.name, h.node().attrs);
      if (n instanceof fi && n.node.isBlock)
        return !h.parentOffset || !Os(u, h.pos)
          ? !1
          : (r &&
              (i && Px(t, o.extensionManager.splittableMarks),
              e.split(h.pos).scrollIntoView()),
            !0);
      if (!h.parent.isBlock) return !1;
      if (r) {
        let S = m.parentOffset === m.parent.content.size;
        n instanceof Mi && e.deleteSelection();
        let T =
            h.depth === 0
              ? void 0
              : EM(h.node(-1).contentMatchAt(h.indexAfter(-1))),
          D = S && T ? [{ type: T, attrs: _ }] : void 0,
          F = Os(e.doc, e.mapping.map(h.pos), 1, D);
        if (
          (!D &&
            !F &&
            Os(e.doc, e.mapping.map(h.pos), 1, T ? [{ type: T }] : void 0) &&
            ((F = !0), (D = T ? [{ type: T, attrs: _ }] : void 0)),
          F &&
            (e.split(e.mapping.map(h.pos), 1, D),
            T && !S && !h.parentOffset && h.parent.type !== T))
        ) {
          let q = e.mapping.map(h.before()),
            Q = e.doc.resolve(q);
          h.node(-1).canReplaceWith(Q.index(), Q.index() + 1, T) &&
            e.setNodeMarkup(e.mapping.map(h.before()), T);
        }
        i && Px(t, o.extensionManager.splittableMarks), e.scrollIntoView();
      }
      return !0;
    },
  jM =
    (i) =>
    ({ tr: e, state: t, dispatch: r, editor: o }) => {
      var n;
      let u = no(i, t.schema),
        { $from: h, $to: m } = t.selection,
        b = t.selection.node;
      if ((b && b.isBlock) || h.depth < 2 || !h.sameParent(m)) return !1;
      let _ = h.node(-1);
      if (_.type !== u) return !1;
      let S = o.extensionManager.attributes;
      if (
        h.parent.content.size === 0 &&
        h.node(-1).childCount === h.indexAfter(-1)
      ) {
        if (
          h.depth === 2 ||
          h.node(-3).type !== u ||
          h.index(-2) !== h.node(-2).childCount - 1
        )
          return !1;
        if (r) {
          let Q = Ct.empty,
            te = h.index(-1) ? 1 : h.index(-2) ? 2 : 3;
          for (let fe = h.depth - te; fe >= h.depth - 3; fe -= 1)
            Q = Ct.from(h.node(fe).copy(Q));
          let ce =
              h.indexAfter(-1) < h.node(-2).childCount
                ? 1
                : h.indexAfter(-2) < h.node(-3).childCount
                ? 2
                : 3,
            be = X0(S, h.node().type.name, h.node().attrs),
            Y =
              ((n = u.contentMatch.defaultType) === null || n === void 0
                ? void 0
                : n.createAndFill(be)) || void 0;
          Q = Q.append(Ct.from(u.createAndFill(null, Y) || void 0));
          let Ie = h.before(h.depth - (te - 1));
          e.replace(Ie, h.after(-ce), new Ht(Q, 4 - te, 0));
          let Te = -1;
          e.doc.nodesBetween(Ie, e.doc.content.size, (fe, Le) => {
            if (Te > -1) return !1;
            fe.isTextblock && fe.content.size === 0 && (Te = Le + 1);
          }),
            Te > -1 && e.setSelection(Mi.near(e.doc.resolve(Te))),
            e.scrollIntoView();
        }
        return !0;
      }
      let T = m.pos === h.end() ? _.contentMatchAt(0).defaultType : null,
        D = X0(S, _.type.name, _.attrs),
        F = X0(S, h.node().type.name, h.node().attrs);
      e.delete(h.pos, m.pos);
      let q = T
        ? [
            { type: u, attrs: D },
            { type: T, attrs: F },
          ]
        : [{ type: u, attrs: D }];
      if (!Os(e.doc, h.pos, 2)) return !1;
      if (r) {
        let { selection: Q, storedMarks: te } = t,
          { splittableMarks: ce } = o.extensionManager,
          be = te || (Q.$to.parentOffset && Q.$from.marks());
        if ((e.split(h.pos, 2, q).scrollIntoView(), !be || !r)) return !0;
        let Y = be.filter((Ie) => ce.includes(Ie.type.name));
        e.ensureMarks(Y);
      }
      return !0;
    },
  I2 = (i, e) => {
    let t = j2((u) => u.type === e)(i.selection);
    if (!t) return !0;
    let r = i.doc.resolve(Math.max(0, t.pos - 1)).before(t.depth);
    if (r === void 0) return !0;
    let o = i.doc.nodeAt(r);
    return t.node.type === o?.type && ra(i.doc, t.pos) && i.join(t.pos), !0;
  },
  P2 = (i, e) => {
    let t = j2((u) => u.type === e)(i.selection);
    if (!t) return !0;
    let r = i.doc.resolve(t.start).after(t.depth);
    if (r === void 0) return !0;
    let o = i.doc.nodeAt(r);
    return t.node.type === o?.type && ra(i.doc, r) && i.join(r), !0;
  },
  HM =
    (i, e, t, r = {}) =>
    ({
      editor: o,
      tr: n,
      state: u,
      dispatch: h,
      chain: m,
      commands: b,
      can: _,
    }) => {
      let { extensions: S, splittableMarks: T } = o.extensionManager,
        D = no(i, u.schema),
        F = no(e, u.schema),
        { selection: q, storedMarks: Q } = u,
        { $from: te, $to: ce } = q,
        be = te.blockRange(ce),
        Y = Q || (q.$to.parentOffset && q.$from.marks());
      if (!be) return !1;
      let Ie = j2((Te) => Ix(Te.type.name, S))(q);
      if (be.depth >= 1 && Ie && be.depth - Ie.depth <= 1) {
        if (Ie.node.type === D) return b.liftListItem(F);
        if (Ix(Ie.node.type.name, S) && D.validContent(Ie.node.content) && h)
          return m()
            .command(() => (n.setNodeMarkup(Ie.pos, D), !0))
            .command(() => I2(n, D))
            .command(() => P2(n, D))
            .run();
      }
      return !t || !Y || !h
        ? m()
            .command(() => (_().wrapInList(D, r) ? !0 : b.clearNodes()))
            .wrapInList(D, r)
            .command(() => I2(n, D))
            .command(() => P2(n, D))
            .run()
        : m()
            .command(() => {
              let Te = _().wrapInList(D, r),
                fe = Y.filter((Le) => T.includes(Le.type.name));
              return n.ensureMarks(fe), Te ? !0 : b.clearNodes();
            })
            .wrapInList(D, r)
            .command(() => I2(n, D))
            .command(() => P2(n, D))
            .run();
    },
  qM =
    (i, e = {}, t = {}) =>
    ({ state: r, commands: o }) => {
      let { extendEmptyMarkRange: n = !1 } = t,
        u = rc(i, r.schema);
      return O2(r, u, e)
        ? o.unsetMark(u, { extendEmptyMarkRange: n })
        : o.setMark(u, e);
    },
  $M =
    (i, e, t = {}) =>
    ({ state: r, commands: o }) => {
      let n = no(i, r.schema),
        u = no(e, r.schema);
      return vp(r, n, t) ? o.setNode(u) : o.setNode(n, t);
    },
  QM =
    (i, e = {}) =>
    ({ state: t, commands: r }) => {
      let o = no(i, t.schema);
      return vp(t, o, e) ? r.lift(o) : r.wrapIn(o, e);
    },
  GM =
    () =>
    ({ state: i, dispatch: e }) => {
      let t = i.plugins;
      for (let r = 0; r < t.length; r += 1) {
        let o = t[r],
          n;
        if (o.spec.isInputRules && (n = o.getState(i))) {
          if (e) {
            let u = i.tr,
              h = n.transform;
            for (let m = h.steps.length - 1; m >= 0; m -= 1)
              u.step(h.steps[m].invert(h.docs[m]));
            if (n.text) {
              let m = u.doc.resolve(n.from).marks();
              u.replaceWith(n.from, n.to, i.schema.text(n.text, m));
            } else u.delete(n.from, n.to);
          }
          return !0;
        }
      }
      return !1;
    },
  WM =
    () =>
    ({ tr: i, dispatch: e }) => {
      let { selection: t } = i,
        { empty: r, ranges: o } = t;
      return (
        r ||
          (e &&
            o.forEach((n) => {
              i.removeMark(n.$from.pos, n.$to.pos);
            })),
        !0
      );
    },
  ZM =
    (i, e = {}) =>
    ({ tr: t, state: r, dispatch: o }) => {
      var n;
      let { extendEmptyMarkRange: u = !1 } = e,
        { selection: h } = t,
        m = rc(i, r.schema),
        { $from: b, empty: _, ranges: S } = h;
      if (!o) return !0;
      if (_ && u) {
        let { from: T, to: D } = h,
          F =
            (n = b.marks().find((Q) => Q.type === m)) === null || n === void 0
              ? void 0
              : n.attrs,
          q = U2(b, m, F);
        q && ((T = q.from), (D = q.to)), t.removeMark(T, D, m);
      } else
        S.forEach((T) => {
          t.removeMark(T.$from.pos, T.$to.pos, m);
        });
      return t.removeStoredMark(m), !0;
    },
  KM =
    (i, e = {}) =>
    ({ tr: t, state: r, dispatch: o }) => {
      let n = null,
        u = null,
        h = am(typeof i == "string" ? i : i.name, r.schema);
      return h
        ? (h === "node" && (n = no(i, r.schema)),
          h === "mark" && (u = rc(i, r.schema)),
          o &&
            t.selection.ranges.forEach((m) => {
              let b = m.$from.pos,
                _ = m.$to.pos;
              r.doc.nodesBetween(b, _, (S, T) => {
                n &&
                  n === S.type &&
                  t.setNodeMarkup(T, void 0, { ...S.attrs, ...e }),
                  u &&
                    S.marks.length &&
                    S.marks.forEach((D) => {
                      if (u === D.type) {
                        let F = Math.max(T, b),
                          q = Math.min(T + S.nodeSize, _);
                        t.addMark(F, q, u.create({ ...D.attrs, ...e }));
                      }
                    });
              });
            }),
          !0)
        : !1;
    },
  JM =
    (i, e = {}) =>
    ({ state: t, dispatch: r }) => {
      let o = no(i, t.schema);
      return xx(o, e)(t, r);
    },
  XM =
    (i, e = {}) =>
    ({ state: t, dispatch: r }) => {
      let o = no(i, t.schema);
      return wx(o, e)(t, r);
    },
  YM = Object.freeze({
    __proto__: null,
    blur: NT,
    clearContent: OT,
    clearNodes: BT,
    command: RT,
    createParagraphNear: UT,
    cut: VT,
    deleteCurrentNode: jT,
    deleteNode: HT,
    deleteRange: qT,
    deleteSelection: $T,
    enter: QT,
    exitCode: GT,
    extendMarkRange: ZT,
    first: KT,
    focus: JT,
    forEach: XT,
    insertContent: YT,
    insertContentAt: iM,
    joinUp: rM,
    joinDown: nM,
    joinBackward: oM,
    joinForward: sM,
    joinItemBackward: aM,
    joinItemForward: lM,
    joinTextblockBackward: cM,
    joinTextblockForward: uM,
    keyboardShortcut: hM,
    lift: pM,
    liftEmptyBlock: fM,
    liftListItem: mM,
    newlineInCode: gM,
    resetAttributes: yM,
    scrollIntoView: bM,
    selectAll: vM,
    selectNodeBackward: _M,
    selectNodeForward: xM,
    selectParentNode: wM,
    selectTextblockEnd: kM,
    selectTextblockStart: SM,
    setContent: CM,
    setMark: zM,
    setMeta: NM,
    setNode: OM,
    setNodeSelection: BM,
    setTextSelection: RM,
    sinkListItem: UM,
    splitBlock: VM,
    splitListItem: jM,
    toggleList: HM,
    toggleMark: qM,
    toggleNode: $M,
    toggleWrap: QM,
    undoInputRule: GM,
    unsetAllMarks: WM,
    unsetMark: ZM,
    updateAttributes: KM,
    wrapIn: JM,
    wrapInList: XM,
  }),
  eA = mn.create({
    name: "commands",
    addCommands() {
      return { ...YM };
    },
  }),
  tA = mn.create({
    name: "editable",
    addProseMirrorPlugins() {
      return [
        new Vr({
          key: new Gn("editable"),
          props: { editable: () => this.editor.options.editable },
        }),
      ];
    },
  }),
  iA = mn.create({
    name: "focusEvents",
    addProseMirrorPlugins() {
      let { editor: i } = this;
      return [
        new Vr({
          key: new Gn("focusEvents"),
          props: {
            handleDOMEvents: {
              focus: (e, t) => {
                i.isFocused = !0;
                let r = i.state.tr
                  .setMeta("focus", { event: t })
                  .setMeta("addToHistory", !1);
                return e.dispatch(r), !1;
              },
              blur: (e, t) => {
                i.isFocused = !1;
                let r = i.state.tr
                  .setMeta("blur", { event: t })
                  .setMeta("addToHistory", !1);
                return e.dispatch(r), !1;
              },
            },
          },
        }),
      ];
    },
  }),
  rA = mn.create({
    name: "keymap",
    addKeyboardShortcuts() {
      let i = () =>
          this.editor.commands.first(({ commands: u }) => [
            () => u.undoInputRule(),
            () =>
              u.command(({ tr: h }) => {
                let { selection: m, doc: b } = h,
                  { empty: _, $anchor: S } = m,
                  { pos: T, parent: D } = S,
                  F = S.parent.isTextblock && T > 0 ? h.doc.resolve(T - 1) : S,
                  q = F.parent.type.spec.isolating,
                  Q = S.pos - S.parentOffset,
                  te =
                    q && F.parent.childCount === 1
                      ? Q === S.pos
                      : Ii.atStart(b).from === T;
                return !_ || !te || !D.type.isTextblock || D.textContent.length
                  ? !1
                  : u.clearNodes();
              }),
            () => u.deleteSelection(),
            () => u.joinBackward(),
            () => u.selectNodeBackward(),
          ]),
        e = () =>
          this.editor.commands.first(({ commands: u }) => [
            () => u.deleteSelection(),
            () => u.deleteCurrentNode(),
            () => u.joinForward(),
            () => u.selectNodeForward(),
          ]),
        r = {
          Enter: () =>
            this.editor.commands.first(({ commands: u }) => [
              () => u.newlineInCode(),
              () => u.createParagraphNear(),
              () => u.liftEmptyBlock(),
              () => u.splitBlock(),
            ]),
          "Mod-Enter": () => this.editor.commands.exitCode(),
          Backspace: i,
          "Mod-Backspace": i,
          "Shift-Backspace": i,
          Delete: e,
          "Mod-Delete": e,
          "Mod-a": () => this.editor.commands.selectAll(),
        },
        o = { ...r },
        n = {
          ...r,
          "Ctrl-h": i,
          "Alt-Backspace": i,
          "Ctrl-d": e,
          "Ctrl-Alt-Backspace": e,
          "Alt-Delete": e,
          "Alt-d": e,
          "Ctrl-a": () => this.editor.commands.selectTextblockStart(),
          "Ctrl-e": () => this.editor.commands.selectTextblockEnd(),
        };
      return V2() || sm() ? n : o;
    },
    addProseMirrorPlugins() {
      return [
        new Vr({
          key: new Gn("clearDocument"),
          appendTransaction: (i, e, t) => {
            if (!(i.some((F) => F.docChanged) && !e.doc.eq(t.doc))) return;
            let { empty: o, from: n, to: u } = e.selection,
              h = Ii.atStart(e.doc).from,
              m = Ii.atEnd(e.doc).to;
            if (
              o ||
              !(n === h && u === m) ||
              !(t.doc.textBetween(0, t.doc.content.size, " ", " ").length === 0)
            )
              return;
            let S = t.tr,
              T = im({ state: t, transaction: S }),
              { commands: D } = new cd({ editor: this.editor, state: T });
            if ((D.clearNodes(), !!S.steps.length)) return S;
          },
        }),
      ];
    },
  }),
  nA = mn.create({
    name: "tabindex",
    addProseMirrorPlugins() {
      return [
        new Vr({
          key: new Gn("tabindex"),
          props: {
            attributes: this.editor.isEditable ? { tabindex: "0" } : {},
          },
        }),
      ];
    },
  });
var B2 = class i {
    constructor(e, t, r = !1, o = null) {
      (this.currentNode = null),
        (this.actualDepth = null),
        (this.isBlock = r),
        (this.resolvedPos = e),
        (this.editor = t),
        (this.currentNode = o);
    }
    get name() {
      return this.node.type.name;
    }
    get node() {
      return this.currentNode || this.resolvedPos.node();
    }
    get element() {
      return this.editor.view.domAtPos(this.pos).node;
    }
    get depth() {
      var e;
      return (e = this.actualDepth) !== null && e !== void 0
        ? e
        : this.resolvedPos.depth;
    }
    get pos() {
      return this.resolvedPos.pos;
    }
    get content() {
      return this.node.content;
    }
    set content(e) {
      let t = this.from,
        r = this.to;
      if (this.isBlock) {
        if (this.content.size === 0) {
          console.error(
            `You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`
          );
          return;
        }
        (t = this.from + 1), (r = this.to - 1);
      }
      this.editor.commands.insertContentAt({ from: t, to: r }, e);
    }
    get attributes() {
      return this.node.attrs;
    }
    get textContent() {
      return this.node.textContent;
    }
    get size() {
      return this.node.nodeSize;
    }
    get from() {
      return this.isBlock
        ? this.pos
        : this.resolvedPos.start(this.resolvedPos.depth);
    }
    get range() {
      return { from: this.from, to: this.to };
    }
    get to() {
      return this.isBlock
        ? this.pos + this.size
        : this.resolvedPos.end(this.resolvedPos.depth) +
            (this.node.isText ? 0 : 1);
    }
    get parent() {
      if (this.depth === 0) return null;
      let e = this.resolvedPos.start(this.resolvedPos.depth - 1),
        t = this.resolvedPos.doc.resolve(e);
      return new i(t, this.editor);
    }
    get before() {
      let e = this.resolvedPos.doc.resolve(this.from - (this.isBlock ? 1 : 2));
      return (
        e.depth !== this.depth &&
          (e = this.resolvedPos.doc.resolve(this.from - 3)),
        new i(e, this.editor)
      );
    }
    get after() {
      let e = this.resolvedPos.doc.resolve(this.to + (this.isBlock ? 2 : 1));
      return (
        e.depth !== this.depth &&
          (e = this.resolvedPos.doc.resolve(this.to + 3)),
        new i(e, this.editor)
      );
    }
    get children() {
      let e = [];
      return (
        this.node.content.forEach((t, r) => {
          let o = t.isBlock && !t.isTextblock,
            n = this.pos + r + 1,
            u = this.resolvedPos.doc.resolve(n);
          if (!o && u.depth <= this.depth) return;
          let h = new i(u, this.editor, o, o ? t : null);
          o && (h.actualDepth = this.depth + 1),
            e.push(new i(u, this.editor, o, o ? t : null));
        }),
        e
      );
    }
    get firstChild() {
      return this.children[0] || null;
    }
    get lastChild() {
      let e = this.children;
      return e[e.length - 1] || null;
    }
    closest(e, t = {}) {
      let r = null,
        o = this.parent;
      for (; o && !r; ) {
        if (o.node.type.name === e)
          if (Object.keys(t).length > 0) {
            let n = o.node.attrs,
              u = Object.keys(t);
            for (let h = 0; h < u.length; h += 1) {
              let m = u[h];
              if (n[m] !== t[m]) break;
            }
          } else r = o;
        o = o.parent;
      }
      return r;
    }
    querySelector(e, t = {}) {
      return this.querySelectorAll(e, t, !0)[0] || null;
    }
    querySelectorAll(e, t = {}, r = !1) {
      let o = [];
      return (
        !this.children ||
          this.children.length === 0 ||
          this.children.forEach((n) => {
            if (n.node.type.name === e) {
              if (Object.keys(t).length > 0) {
                let u = n.node.attrs,
                  h = Object.keys(t);
                for (let m = 0; m < h.length; m += 1) {
                  let b = h[m];
                  if (u[b] !== t[b]) return;
                }
              }
              if ((o.push(n), r)) return;
            }
            o = o.concat(n.querySelectorAll(e));
          }),
        o
      );
    }
    setAttribute(e) {
      let t = this.editor.state.selection;
      this.editor
        .chain()
        .setTextSelection(this.from)
        .updateAttributes(this.node.type.name, e)
        .setTextSelection(t.from)
        .run();
    }
  },
  oA = `.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;
function sA(i, e, t) {
  let r = document.querySelector(`style[data-tiptap-style${t ? `-${t}` : ""}]`);
  if (r !== null) return r;
  let o = document.createElement("style");
  return (
    e && o.setAttribute("nonce", e),
    o.setAttribute(`data-tiptap-style${t ? `-${t}` : ""}`, ""),
    (o.innerHTML = i),
    document.getElementsByTagName("head")[0].appendChild(o),
    o
  );
}
var tm = class extends D2 {
  constructor(e = {}) {
    super(),
      (this.isFocused = !1),
      (this.extensionStorage = {}),
      (this.options = {
        element: document.createElement("div"),
        content: "",
        injectCSS: !0,
        injectNonce: void 0,
        extensions: [],
        autofocus: !1,
        editable: !0,
        editorProps: {},
        parseOptions: {},
        coreExtensionOptions: {},
        enableInputRules: !0,
        enablePasteRules: !0,
        enableCoreExtensions: !0,
        onBeforeCreate: () => null,
        onCreate: () => null,
        onUpdate: () => null,
        onSelectionUpdate: () => null,
        onTransaction: () => null,
        onFocus: () => null,
        onBlur: () => null,
        onDestroy: () => null,
      }),
      (this.isCapturingTransaction = !1),
      (this.capturedTransaction = null),
      this.setOptions(e),
      this.createExtensionManager(),
      this.createCommandManager(),
      this.createSchema(),
      this.on("beforeCreate", this.options.onBeforeCreate),
      this.emit("beforeCreate", { editor: this }),
      this.createView(),
      this.injectCSS(),
      this.on("create", this.options.onCreate),
      this.on("update", this.options.onUpdate),
      this.on("selectionUpdate", this.options.onSelectionUpdate),
      this.on("transaction", this.options.onTransaction),
      this.on("focus", this.options.onFocus),
      this.on("blur", this.options.onBlur),
      this.on("destroy", this.options.onDestroy),
      window.setTimeout(() => {
        this.isDestroyed ||
          (this.commands.focus(this.options.autofocus),
          this.emit("create", { editor: this }));
      }, 0);
  }
  get storage() {
    return this.extensionStorage;
  }
  get commands() {
    return this.commandManager.commands;
  }
  chain() {
    return this.commandManager.chain();
  }
  can() {
    return this.commandManager.can();
  }
  injectCSS() {
    this.options.injectCSS &&
      document &&
      (this.css = sA(oA, this.options.injectNonce));
  }
  setOptions(e = {}) {
    (this.options = { ...this.options, ...e }),
      !(!this.view || !this.state || this.isDestroyed) &&
        (this.options.editorProps &&
          this.view.setProps(this.options.editorProps),
        this.view.updateState(this.state));
  }
  setEditable(e, t = !0) {
    this.setOptions({ editable: e }),
      t && this.emit("update", { editor: this, transaction: this.state.tr });
  }
  get isEditable() {
    return this.options.editable && this.view && this.view.editable;
  }
  get state() {
    return this.view.state;
  }
  registerPlugin(e, t) {
    let r = Lx(t) ? t(e, [...this.state.plugins]) : [...this.state.plugins, e],
      o = this.state.reconfigure({ plugins: r });
    this.view.updateState(o);
  }
  unregisterPlugin(e) {
    if (this.isDestroyed) return;
    let t = typeof e == "string" ? `${e}$` : e.key,
      r = this.state.reconfigure({
        plugins: this.state.plugins.filter((o) => !o.key.startsWith(t)),
      });
    this.view.updateState(r);
  }
  createExtensionManager() {
    var e, t;
    let o = [
      ...(this.options.enableCoreExtensions
        ? [
            tA,
            zT.configure({
              blockSeparator:
                (t =
                  (e = this.options.coreExtensionOptions) === null ||
                  e === void 0
                    ? void 0
                    : e.clipboardTextSerializer) === null || t === void 0
                  ? void 0
                  : t.blockSeparator,
            }),
            eA,
            iA,
            rA,
            nA,
          ]
        : []),
      ...this.options.extensions,
    ].filter((n) => ["extension", "node", "mark"].includes(n?.type));
    this.extensionManager = new z2(o, this);
  }
  createCommandManager() {
    this.commandManager = new cd({ editor: this });
  }
  createSchema() {
    this.schema = this.extensionManager.schema;
  }
  createView() {
    let e = Bx(this.options.content, this.schema, this.options.parseOptions),
      t = Nx(e, this.options.autofocus);
    this.view = new $0(this.options.element, {
      ...this.options.editorProps,
      dispatchTransaction: this.dispatchTransaction.bind(this),
      state: z0.create({ doc: e, selection: t || void 0 }),
    });
    let r = this.state.reconfigure({ plugins: this.extensionManager.plugins });
    this.view.updateState(r), this.createNodeViews(), this.prependClass();
    let o = this.view.dom;
    o.editor = this;
  }
  createNodeViews() {
    this.view.setProps({ nodeViews: this.extensionManager.nodeViews });
  }
  prependClass() {
    this.view.dom.className = `tiptap ${this.view.dom.className}`;
  }
  captureTransaction(e) {
    (this.isCapturingTransaction = !0), e(), (this.isCapturingTransaction = !1);
    let t = this.capturedTransaction;
    return (this.capturedTransaction = null), t;
  }
  dispatchTransaction(e) {
    if (this.view.isDestroyed) return;
    if (this.isCapturingTransaction) {
      if (!this.capturedTransaction) {
        this.capturedTransaction = e;
        return;
      }
      e.steps.forEach((u) => {
        var h;
        return (h = this.capturedTransaction) === null || h === void 0
          ? void 0
          : h.step(u);
      });
      return;
    }
    let t = this.state.apply(e),
      r = !this.state.selection.eq(t.selection);
    this.view.updateState(t),
      this.emit("transaction", { editor: this, transaction: e }),
      r && this.emit("selectionUpdate", { editor: this, transaction: e });
    let o = e.getMeta("focus"),
      n = e.getMeta("blur");
    o && this.emit("focus", { editor: this, event: o.event, transaction: e }),
      n && this.emit("blur", { editor: this, event: n.event, transaction: e }),
      !(!e.docChanged || e.getMeta("preventUpdate")) &&
        this.emit("update", { editor: this, transaction: e });
  }
  getAttributes(e) {
    return PM(this.state, e);
  }
  isActive(e, t) {
    let r = typeof e == "string" ? e : null,
      o = typeof e == "string" ? t : e;
    return DM(this.state, r, o);
  }
  getJSON() {
    return this.state.doc.toJSON();
  }
  getHTML() {
    return MM(this.state.doc.content, this.schema);
  }
  getText(e) {
    let {
      blockSeparator: t = `

`,
      textSerializers: r = {},
    } = e || {};
    return AM(this.state.doc, {
      blockSeparator: t,
      textSerializers: { ...zx(this.schema), ...r },
    });
  }
  get isEmpty() {
    return LM(this.state.doc);
  }
  getCharacterCount() {
    return (
      console.warn(
        '[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'
      ),
      this.state.doc.content.size - 2
    );
  }
  destroy() {
    this.emit("destroy"),
      this.view && this.view.destroy(),
      this.removeAllListeners();
  }
  get isDestroyed() {
    var e;
    return !(!((e = this.view) === null || e === void 0) && e.docView);
  }
  $node(e, t) {
    var r;
    return (
      ((r = this.$doc) === null || r === void 0
        ? void 0
        : r.querySelector(e, t)) || null
    );
  }
  $nodes(e, t) {
    var r;
    return (
      ((r = this.$doc) === null || r === void 0
        ? void 0
        : r.querySelectorAll(e, t)) || null
    );
  }
  $pos(e) {
    let t = this.state.doc.resolve(e);
    return new B2(t, this);
  }
  get $doc() {
    return this.$pos(0);
  }
};
function Ca(i) {
  return new ud({
    find: i.find,
    handler: ({ state: e, range: t, match: r }) => {
      let o = qi(i.getAttributes, void 0, r);
      if (o === !1 || o === null) return null;
      let { tr: n } = e,
        u = r[r.length - 1],
        h = r[0];
      if (u) {
        let m = h.search(/\S/),
          b = t.from + h.indexOf(u),
          _ = b + u.length;
        if (
          Rx(t.from, t.to, e.doc)
            .filter((D) =>
              D.mark.type.excluded.find(
                (q) => q === i.type && q !== D.mark.type
              )
            )
            .filter((D) => D.to > b).length
        )
          return null;
        _ < t.to && n.delete(_, t.to), b > t.from && n.delete(t.from + m, b);
        let T = t.from + m + u.length;
        n.addMark(t.from + m, T, i.type.create(o || {})),
          n.removeStoredMark(i.type);
      }
    },
  });
}
function Vx(i) {
  return new ud({
    find: i.find,
    handler: ({ state: e, range: t, match: r }) => {
      let o = qi(i.getAttributes, void 0, r) || {},
        { tr: n } = e,
        u = t.from,
        h = t.to,
        m = i.type.create(o);
      if (r[1]) {
        let b = r[0].lastIndexOf(r[1]),
          _ = u + b;
        _ > h ? (_ = h) : (h = _ + r[1].length);
        let S = r[0][r[0].length - 1];
        n.insertText(S, u + r[0].length - 1), n.replaceWith(_, h, m);
      } else
        r[0] &&
          n
            .insert(u - 1, i.type.create(o))
            .delete(n.mapping.map(u), n.mapping.map(h));
      n.scrollIntoView();
    },
  });
}
function _p(i) {
  return new ud({
    find: i.find,
    handler: ({ state: e, range: t, match: r }) => {
      let o = e.doc.resolve(t.from),
        n = qi(i.getAttributes, void 0, r) || {};
      if (!o.node(-1).canReplaceWith(o.index(-1), o.indexAfter(-1), i.type))
        return null;
      e.tr.delete(t.from, t.to).setBlockType(t.from, t.from, i.type, n);
    },
  });
}
function nc(i) {
  return new ud({
    find: i.find,
    handler: ({ state: e, range: t, match: r, chain: o }) => {
      let n = qi(i.getAttributes, void 0, r) || {},
        u = e.tr.delete(t.from, t.to),
        m = u.doc.resolve(t.from).blockRange(),
        b = m && Yu(m, i.type, n);
      if (!b) return null;
      if ((u.wrap(m, b), i.keepMarks && i.editor)) {
        let { selection: S, storedMarks: T } = e,
          { splittableMarks: D } = i.editor.extensionManager,
          F = T || (S.$to.parentOffset && S.$from.marks());
        if (F) {
          let q = F.filter((Q) => D.includes(Q.type.name));
          u.ensureMarks(q);
        }
      }
      if (i.keepAttributes) {
        let S =
          i.type.name === "bulletList" || i.type.name === "orderedList"
            ? "listItem"
            : "taskList";
        o().updateAttributes(S, n).run();
      }
      let _ = u.doc.resolve(t.from - 1).nodeBefore;
      _ &&
        _.type === i.type &&
        ra(u.doc, t.from - 1) &&
        (!i.joinPredicate || i.joinPredicate(r, _)) &&
        u.join(t.from - 1);
    },
  });
}
var ts = class i {
    constructor(e = {}) {
      (this.type = "mark"),
        (this.name = "mark"),
        (this.parent = null),
        (this.child = null),
        (this.config = { name: this.name, defaultOptions: {} }),
        (this.config = { ...this.config, ...e }),
        (this.name = this.config.name),
        e.defaultOptions &&
          Object.keys(e.defaultOptions).length > 0 &&
          console.warn(
            `[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`
          ),
        (this.options = this.config.defaultOptions),
        this.config.addOptions &&
          (this.options = qi(ri(this, "addOptions", { name: this.name }))),
        (this.storage =
          qi(
            ri(this, "addStorage", { name: this.name, options: this.options })
          ) || {});
    }
    static create(e = {}) {
      return new i(e);
    }
    configure(e = {}) {
      let t = this.extend();
      return (
        (t.options = nm(this.options, e)),
        (t.storage = qi(
          ri(t, "addStorage", { name: t.name, options: t.options })
        )),
        t
      );
    }
    extend(e = {}) {
      let t = new i({ ...this.config, ...e });
      return (
        (t.parent = this),
        (this.child = t),
        (t.name = e.name ? e.name : t.parent.name),
        e.defaultOptions &&
          console.warn(
            `[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`
          ),
        (t.options = qi(ri(t, "addOptions", { name: t.name }))),
        (t.storage = qi(
          ri(t, "addStorage", { name: t.name, options: t.options })
        )),
        t
      );
    }
    static handleExit({ editor: e, mark: t }) {
      let { tr: r } = e.state,
        o = e.state.selection.$from;
      if (o.pos === o.end()) {
        let u = o.marks();
        if (!!!u.find((b) => b?.type.name === t.name)) return !1;
        let m = u.find((b) => b?.type.name === t.name);
        return (
          m && r.removeStoredMark(m),
          r.insertText(" ", o.pos),
          e.view.dispatch(r),
          !0
        );
      }
      return !1;
    }
  },
  jr = class i {
    constructor(e = {}) {
      (this.type = "node"),
        (this.name = "node"),
        (this.parent = null),
        (this.child = null),
        (this.config = { name: this.name, defaultOptions: {} }),
        (this.config = { ...this.config, ...e }),
        (this.name = this.config.name),
        e.defaultOptions &&
          Object.keys(e.defaultOptions).length > 0 &&
          console.warn(
            `[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`
          ),
        (this.options = this.config.defaultOptions),
        this.config.addOptions &&
          (this.options = qi(ri(this, "addOptions", { name: this.name }))),
        (this.storage =
          qi(
            ri(this, "addStorage", { name: this.name, options: this.options })
          ) || {});
    }
    static create(e = {}) {
      return new i(e);
    }
    configure(e = {}) {
      let t = this.extend();
      return (
        (t.options = nm(this.options, e)),
        (t.storage = qi(
          ri(t, "addStorage", { name: t.name, options: t.options })
        )),
        t
      );
    }
    extend(e = {}) {
      let t = new i({ ...this.config, ...e });
      return (
        (t.parent = this),
        (this.child = t),
        (t.name = e.name ? e.name : t.parent.name),
        e.defaultOptions &&
          console.warn(
            `[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`
          ),
        (t.options = qi(ri(t, "addOptions", { name: t.name }))),
        (t.storage = qi(
          ri(t, "addStorage", { name: t.name, options: t.options })
        )),
        t
      );
    }
  };
function Ea(i) {
  return new F2({
    find: i.find,
    handler: ({ state: e, range: t, match: r, pasteEvent: o }) => {
      let n = qi(i.getAttributes, void 0, r, o);
      if (n === !1 || n === null) return null;
      let { tr: u } = e,
        h = r[r.length - 1],
        m = r[0],
        b = t.to;
      if (h) {
        let _ = m.search(/\S/),
          S = t.from + m.indexOf(h),
          T = S + h.length;
        if (
          Rx(t.from, t.to, e.doc)
            .filter((F) =>
              F.mark.type.excluded.find(
                (Q) => Q === i.type && Q !== F.mark.type
              )
            )
            .filter((F) => F.to > S).length
        )
          return null;
        T < t.to && u.delete(T, t.to),
          S > t.from && u.delete(t.from + _, S),
          (b = t.from + _ + h.length),
          u.addMark(t.from + _, b, i.type.create(n || {})),
          u.removeStoredMark(i.type);
      }
    },
  });
}
var jx = mn.create({
  name: "placeholder",
  addOptions() {
    return {
      emptyEditorClass: "is-editor-empty",
      emptyNodeClass: "is-empty",
      placeholder: "Write something \u2026",
      showOnlyWhenEditable: !0,
      considerAnyAsEmpty: !1,
      showOnlyCurrent: !0,
      includeChildren: !1,
    };
  },
  addProseMirrorPlugins() {
    return [
      new Vr({
        key: new Gn("placeholder"),
        props: {
          decorations: ({ doc: i, selection: e }) => {
            var t;
            let r =
                this.editor.isEditable || !this.options.showOnlyWhenEditable,
              { anchor: o } = e,
              n = [];
            if (!r) return null;
            let { firstChild: u } = i.content,
              h = u && u.type.isLeaf,
              m = u && u.isAtom,
              b = this.options.considerAnyAsEmpty
                ? !0
                : u &&
                  u.type.name ===
                    ((t = i.type.contentMatch.defaultType) === null ||
                    t === void 0
                      ? void 0
                      : t.name),
              _ =
                i.content.childCount <= 1 &&
                u &&
                b &&
                u.nodeSize <= 2 &&
                (!h || !m);
            return (
              i.descendants((S, T) => {
                let D = o >= T && o <= T + S.nodeSize,
                  F = !S.isLeaf && !S.childCount;
                if ((D || !this.options.showOnlyCurrent) && F) {
                  let q = [this.options.emptyNodeClass];
                  _ && q.push(this.options.emptyEditorClass);
                  let Q = Us.node(T, T + S.nodeSize, {
                    class: q.join(" "),
                    "data-placeholder":
                      typeof this.options.placeholder == "function"
                        ? this.options.placeholder({
                            editor: this.editor,
                            node: S,
                            pos: T,
                            hasAnchor: D,
                          })
                        : this.options.placeholder,
                  });
                  n.push(Q);
                }
                return this.options.includeChildren;
              }),
              Ro.create(i, n)
            );
          },
        },
      }),
    ];
  },
});
var aA = /^\s*>\s$/,
  Hx = jr.create({
    name: "blockquote",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    content: "block+",
    group: "block",
    defining: !0,
    parseHTML() {
      return [{ tag: "blockquote" }];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["blockquote", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        setBlockquote:
          () =>
          ({ commands: i }) =>
            i.wrapIn(this.name),
        toggleBlockquote:
          () =>
          ({ commands: i }) =>
            i.toggleWrap(this.name),
        unsetBlockquote:
          () =>
          ({ commands: i }) =>
            i.lift(this.name),
      };
    },
    addKeyboardShortcuts() {
      return { "Mod-Shift-b": () => this.editor.commands.toggleBlockquote() };
    },
    addInputRules() {
      return [nc({ find: aA, type: this.type })];
    },
  });
var lA = /(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,
  cA = /(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,
  uA = /(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,
  dA = /(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,
  qx = ts.create({
    name: "bold",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    parseHTML() {
      return [
        { tag: "strong" },
        { tag: "b", getAttrs: (i) => i.style.fontWeight !== "normal" && null },
        {
          style: "font-weight",
          getAttrs: (i) => /^(bold(er)?|[5-9]\d{2,})$/.test(i) && null,
        },
      ];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["strong", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        setBold:
          () =>
          ({ commands: i }) =>
            i.setMark(this.name),
        toggleBold:
          () =>
          ({ commands: i }) =>
            i.toggleMark(this.name),
        unsetBold:
          () =>
          ({ commands: i }) =>
            i.unsetMark(this.name),
      };
    },
    addKeyboardShortcuts() {
      return {
        "Mod-b": () => this.editor.commands.toggleBold(),
        "Mod-B": () => this.editor.commands.toggleBold(),
      };
    },
    addInputRules() {
      return [
        Ca({ find: lA, type: this.type }),
        Ca({ find: uA, type: this.type }),
      ];
    },
    addPasteRules() {
      return [
        Ea({ find: cA, type: this.type }),
        Ea({ find: dA, type: this.type }),
      ];
    },
  });
var hA = jr.create({
    name: "listItem",
    addOptions() {
      return {
        HTMLAttributes: {},
        bulletListTypeName: "bulletList",
        orderedListTypeName: "orderedList",
      };
    },
    content: "paragraph block*",
    defining: !0,
    parseHTML() {
      return [{ tag: "li" }];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["li", hr(this.options.HTMLAttributes, i), 0];
    },
    addKeyboardShortcuts() {
      return {
        Enter: () => this.editor.commands.splitListItem(this.name),
        Tab: () => this.editor.commands.sinkListItem(this.name),
        "Shift-Tab": () => this.editor.commands.liftListItem(this.name),
      };
    },
  }),
  $x = ts.create({
    name: "textStyle",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    parseHTML() {
      return [
        { tag: "span", getAttrs: (i) => (i.hasAttribute("style") ? {} : !1) },
      ];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["span", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        removeEmptyTextStyle:
          () =>
          ({ state: i, commands: e }) => {
            let t = dd(i, this.type);
            return Object.entries(t).some(([, o]) => !!o)
              ? !0
              : e.unsetMark(this.name);
          },
      };
    },
  }),
  Qx = /^\s*([-+*])\s$/,
  Gx = jr.create({
    name: "bulletList",
    addOptions() {
      return {
        itemTypeName: "listItem",
        HTMLAttributes: {},
        keepMarks: !1,
        keepAttributes: !1,
      };
    },
    group: "block list",
    content() {
      return `${this.options.itemTypeName}+`;
    },
    parseHTML() {
      return [{ tag: "ul" }];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["ul", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        toggleBulletList:
          () =>
          ({ commands: i, chain: e }) =>
            this.options.keepAttributes
              ? e()
                  .toggleList(
                    this.name,
                    this.options.itemTypeName,
                    this.options.keepMarks
                  )
                  .updateAttributes(hA.name, this.editor.getAttributes($x.name))
                  .run()
              : i.toggleList(
                  this.name,
                  this.options.itemTypeName,
                  this.options.keepMarks
                ),
      };
    },
    addKeyboardShortcuts() {
      return { "Mod-Shift-8": () => this.editor.commands.toggleBulletList() };
    },
    addInputRules() {
      let i = nc({ find: Qx, type: this.type });
      return (
        (this.options.keepMarks || this.options.keepAttributes) &&
          (i = nc({
            find: Qx,
            type: this.type,
            keepMarks: this.options.keepMarks,
            keepAttributes: this.options.keepAttributes,
            getAttributes: () => this.editor.getAttributes($x.name),
            editor: this.editor,
          })),
        [i]
      );
    },
  });
var pA = /(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,
  fA = /(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,
  Wx = ts.create({
    name: "code",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    excludes: "_",
    code: !0,
    exitable: !0,
    parseHTML() {
      return [{ tag: "code" }];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["code", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        setCode:
          () =>
          ({ commands: i }) =>
            i.setMark(this.name),
        toggleCode:
          () =>
          ({ commands: i }) =>
            i.toggleMark(this.name),
        unsetCode:
          () =>
          ({ commands: i }) =>
            i.unsetMark(this.name),
      };
    },
    addKeyboardShortcuts() {
      return { "Mod-e": () => this.editor.commands.toggleCode() };
    },
    addInputRules() {
      return [Ca({ find: pA, type: this.type })];
    },
    addPasteRules() {
      return [Ea({ find: fA, type: this.type })];
    },
  });
var mA = /^```([a-z]+)?[\s\n]$/,
  gA = /^~~~([a-z]+)?[\s\n]$/,
  Zx = jr.create({
    name: "codeBlock",
    addOptions() {
      return {
        languageClassPrefix: "language-",
        exitOnTripleEnter: !0,
        exitOnArrowDown: !0,
        HTMLAttributes: {},
      };
    },
    content: "text*",
    marks: "",
    group: "block",
    code: !0,
    defining: !0,
    addAttributes() {
      return {
        language: {
          default: null,
          parseHTML: (i) => {
            var e;
            let { languageClassPrefix: t } = this.options,
              n = [
                ...(((e = i.firstElementChild) === null || e === void 0
                  ? void 0
                  : e.classList) || []),
              ]
                .filter((u) => u.startsWith(t))
                .map((u) => u.replace(t, ""))[0];
            return n || null;
          },
          rendered: !1,
        },
      };
    },
    parseHTML() {
      return [{ tag: "pre", preserveWhitespace: "full" }];
    },
    renderHTML({ node: i, HTMLAttributes: e }) {
      return [
        "pre",
        hr(this.options.HTMLAttributes, e),
        [
          "code",
          {
            class: i.attrs.language
              ? this.options.languageClassPrefix + i.attrs.language
              : null,
          },
          0,
        ],
      ];
    },
    addCommands() {
      return {
        setCodeBlock:
          (i) =>
          ({ commands: e }) =>
            e.setNode(this.name, i),
        toggleCodeBlock:
          (i) =>
          ({ commands: e }) =>
            e.toggleNode(this.name, "paragraph", i),
      };
    },
    addKeyboardShortcuts() {
      return {
        "Mod-Alt-c": () => this.editor.commands.toggleCodeBlock(),
        Backspace: () => {
          let { empty: i, $anchor: e } = this.editor.state.selection,
            t = e.pos === 1;
          return !i || e.parent.type.name !== this.name
            ? !1
            : t || !e.parent.textContent.length
            ? this.editor.commands.clearNodes()
            : !1;
        },
        Enter: ({ editor: i }) => {
          if (!this.options.exitOnTripleEnter) return !1;
          let { state: e } = i,
            { selection: t } = e,
            { $from: r, empty: o } = t;
          if (!o || r.parent.type !== this.type) return !1;
          let n = r.parentOffset === r.parent.nodeSize - 2,
            u = r.parent.textContent.endsWith(`

`);
          return !n || !u
            ? !1
            : i
                .chain()
                .command(({ tr: h }) => (h.delete(r.pos - 2, r.pos), !0))
                .exitCode()
                .run();
        },
        ArrowDown: ({ editor: i }) => {
          if (!this.options.exitOnArrowDown) return !1;
          let { state: e } = i,
            { selection: t, doc: r } = e,
            { $from: o, empty: n } = t;
          if (
            !n ||
            o.parent.type !== this.type ||
            !(o.parentOffset === o.parent.nodeSize - 2)
          )
            return !1;
          let h = o.after();
          return h === void 0 || r.nodeAt(h) ? !1 : i.commands.exitCode();
        },
      };
    },
    addInputRules() {
      return [
        _p({
          find: mA,
          type: this.type,
          getAttributes: (i) => ({ language: i[1] }),
        }),
        _p({
          find: gA,
          type: this.type,
          getAttributes: (i) => ({ language: i[1] }),
        }),
      ];
    },
    addProseMirrorPlugins() {
      return [
        new Vr({
          key: new Gn("codeBlockVSCodeHandler"),
          props: {
            handlePaste: (i, e) => {
              if (!e.clipboardData || this.editor.isActive(this.type.name))
                return !1;
              let t = e.clipboardData.getData("text/plain"),
                r = e.clipboardData.getData("vscode-editor-data"),
                o = r ? JSON.parse(r) : void 0,
                n = o?.mode;
              if (!t || !n) return !1;
              let { tr: u } = i.state;
              return (
                u.replaceSelectionWith(this.type.create({ language: n })),
                u.setSelection(
                  Mi.near(u.doc.resolve(Math.max(0, u.selection.from - 2)))
                ),
                u.insertText(
                  t.replace(
                    /\r\n?/g,
                    `
`
                  )
                ),
                u.setMeta("paste", !0),
                i.dispatch(u),
                !0
              );
            },
          },
        }),
      ];
    },
  });
var Kx = jr.create({ name: "doc", topNode: !0, content: "block+" });
function Jx(i = {}) {
  return new Vr({
    view(e) {
      return new H2(e, i);
    },
  });
}
var H2 = class {
  constructor(e, t) {
    var r;
    (this.editorView = e),
      (this.cursorPos = null),
      (this.element = null),
      (this.timeout = -1),
      (this.width = (r = t.width) !== null && r !== void 0 ? r : 1),
      (this.color = t.color === !1 ? void 0 : t.color || "black"),
      (this.class = t.class),
      (this.handlers = ["dragover", "dragend", "drop", "dragleave"].map((o) => {
        let n = (u) => {
          this[o](u);
        };
        return e.dom.addEventListener(o, n), { name: o, handler: n };
      }));
  }
  destroy() {
    this.handlers.forEach(({ name: e, handler: t }) =>
      this.editorView.dom.removeEventListener(e, t)
    );
  }
  update(e, t) {
    this.cursorPos != null &&
      t.doc != e.state.doc &&
      (this.cursorPos > e.state.doc.content.size
        ? this.setCursor(null)
        : this.updateOverlay());
  }
  setCursor(e) {
    e != this.cursorPos &&
      ((this.cursorPos = e),
      e == null
        ? (this.element.parentNode.removeChild(this.element),
          (this.element = null))
        : this.updateOverlay());
  }
  updateOverlay() {
    let e = this.editorView.state.doc.resolve(this.cursorPos),
      t = !e.parent.inlineContent,
      r;
    if (t) {
      let h = e.nodeBefore,
        m = e.nodeAfter;
      if (h || m) {
        let b = this.editorView.nodeDOM(this.cursorPos - (h ? h.nodeSize : 0));
        if (b) {
          let _ = b.getBoundingClientRect(),
            S = h ? _.bottom : _.top;
          h &&
            m &&
            (S =
              (S +
                this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect()
                  .top) /
              2),
            (r = {
              left: _.left,
              right: _.right,
              top: S - this.width / 2,
              bottom: S + this.width / 2,
            });
        }
      }
    }
    if (!r) {
      let h = this.editorView.coordsAtPos(this.cursorPos);
      r = {
        left: h.left - this.width / 2,
        right: h.left + this.width / 2,
        top: h.top,
        bottom: h.bottom,
      };
    }
    let o = this.editorView.dom.offsetParent;
    this.element ||
      ((this.element = o.appendChild(document.createElement("div"))),
      this.class && (this.element.className = this.class),
      (this.element.style.cssText =
        "position: absolute; z-index: 50; pointer-events: none;"),
      this.color && (this.element.style.backgroundColor = this.color)),
      this.element.classList.toggle("prosemirror-dropcursor-block", t),
      this.element.classList.toggle("prosemirror-dropcursor-inline", !t);
    let n, u;
    if (!o || (o == document.body && getComputedStyle(o).position == "static"))
      (n = -pageXOffset), (u = -pageYOffset);
    else {
      let h = o.getBoundingClientRect();
      (n = h.left - o.scrollLeft), (u = h.top - o.scrollTop);
    }
    (this.element.style.left = r.left - n + "px"),
      (this.element.style.top = r.top - u + "px"),
      (this.element.style.width = r.right - r.left + "px"),
      (this.element.style.height = r.bottom - r.top + "px");
  }
  scheduleRemoval(e) {
    clearTimeout(this.timeout),
      (this.timeout = setTimeout(() => this.setCursor(null), e));
  }
  dragover(e) {
    if (!this.editorView.editable) return;
    let t = this.editorView.posAtCoords({ left: e.clientX, top: e.clientY }),
      r = t && t.inside >= 0 && this.editorView.state.doc.nodeAt(t.inside),
      o = r && r.type.spec.disableDropCursor,
      n = typeof o == "function" ? o(this.editorView, t, e) : o;
    if (t && !n) {
      let u = t.pos;
      if (this.editorView.dragging && this.editorView.dragging.slice) {
        let h = D0(
          this.editorView.state.doc,
          u,
          this.editorView.dragging.slice
        );
        h != null && (u = h);
      }
      this.setCursor(u), this.scheduleRemoval(5e3);
    }
  }
  dragend() {
    this.scheduleRemoval(20);
  }
  drop() {
    this.scheduleRemoval(20);
  }
  dragleave(e) {
    (e.target == this.editorView.dom ||
      !this.editorView.dom.contains(e.relatedTarget)) &&
      this.setCursor(null);
  }
};
var Xx = mn.create({
  name: "dropCursor",
  addOptions() {
    return { color: "currentColor", width: 1, class: void 0 };
  },
  addProseMirrorPlugins() {
    return [Jx(this.options)];
  },
});
var Uo = class i extends Ii {
  constructor(e) {
    super(e, e);
  }
  map(e, t) {
    let r = e.resolve(t.map(this.head));
    return i.valid(r) ? new i(r) : Ii.near(r);
  }
  content() {
    return Ht.empty;
  }
  eq(e) {
    return e instanceof i && e.head == this.head;
  }
  toJSON() {
    return { type: "gapcursor", pos: this.head };
  }
  static fromJSON(e, t) {
    if (typeof t.pos != "number")
      throw new RangeError("Invalid input for GapCursor.fromJSON");
    return new i(e.resolve(t.pos));
  }
  getBookmark() {
    return new q2(this.anchor);
  }
  static valid(e) {
    let t = e.parent;
    if (t.isTextblock || !yA(e) || !bA(e)) return !1;
    let r = t.type.spec.allowGapCursor;
    if (r != null) return r;
    let o = t.contentMatchAt(e.index()).defaultType;
    return o && o.isTextblock;
  }
  static findGapCursorFrom(e, t, r = !1) {
    e: for (;;) {
      if (!r && i.valid(e)) return e;
      let o = e.pos,
        n = null;
      for (let u = e.depth; ; u--) {
        let h = e.node(u);
        if (t > 0 ? e.indexAfter(u) < h.childCount : e.index(u) > 0) {
          n = h.child(t > 0 ? e.indexAfter(u) : e.index(u) - 1);
          break;
        } else if (u == 0) return null;
        o += t;
        let m = e.doc.resolve(o);
        if (i.valid(m)) return m;
      }
      for (;;) {
        let u = t > 0 ? n.firstChild : n.lastChild;
        if (!u) {
          if (n.isAtom && !n.isText && !fi.isSelectable(n)) {
            (e = e.doc.resolve(o + n.nodeSize * t)), (r = !1);
            continue e;
          }
          break;
        }
        (n = u), (o += t);
        let h = e.doc.resolve(o);
        if (i.valid(h)) return h;
      }
      return null;
    }
  }
};
Uo.prototype.visible = !1;
Uo.findFrom = Uo.findGapCursorFrom;
Ii.jsonID("gapcursor", Uo);
var q2 = class i {
  constructor(e) {
    this.pos = e;
  }
  map(e) {
    return new i(e.map(this.pos));
  }
  resolve(e) {
    let t = e.resolve(this.pos);
    return Uo.valid(t) ? new Uo(t) : Ii.near(t);
  }
};
function yA(i) {
  for (let e = i.depth; e >= 0; e--) {
    let t = i.index(e),
      r = i.node(e);
    if (t == 0) {
      if (r.type.spec.isolating) return !0;
      continue;
    }
    for (let o = r.child(t - 1); ; o = o.lastChild) {
      if (
        (o.childCount == 0 && !o.inlineContent) ||
        o.isAtom ||
        o.type.spec.isolating
      )
        return !0;
      if (o.inlineContent) return !1;
    }
  }
  return !0;
}
function bA(i) {
  for (let e = i.depth; e >= 0; e--) {
    let t = i.indexAfter(e),
      r = i.node(e);
    if (t == r.childCount) {
      if (r.type.spec.isolating) return !0;
      continue;
    }
    for (let o = r.child(t); ; o = o.firstChild) {
      if (
        (o.childCount == 0 && !o.inlineContent) ||
        o.isAtom ||
        o.type.spec.isolating
      )
        return !0;
      if (o.inlineContent) return !1;
    }
  }
  return !0;
}
function Yx() {
  return new Vr({
    props: {
      decorations: wA,
      createSelectionBetween(i, e, t) {
        return e.pos == t.pos && Uo.valid(t) ? new Uo(t) : null;
      },
      handleClick: _A,
      handleKeyDown: vA,
      handleDOMEvents: { beforeinput: xA },
    },
  });
}
var vA = d2({
  ArrowLeft: cm("horiz", -1),
  ArrowRight: cm("horiz", 1),
  ArrowUp: cm("vert", -1),
  ArrowDown: cm("vert", 1),
});
function cm(i, e) {
  let t = i == "vert" ? (e > 0 ? "down" : "up") : e > 0 ? "right" : "left";
  return function (r, o, n) {
    let u = r.selection,
      h = e > 0 ? u.$to : u.$from,
      m = u.empty;
    if (u instanceof Mi) {
      if (!n.endOfTextblock(t) || h.depth == 0) return !1;
      (m = !1), (h = r.doc.resolve(e > 0 ? h.after() : h.before()));
    }
    let b = Uo.findGapCursorFrom(h, e, m);
    return b ? (o && o(r.tr.setSelection(new Uo(b))), !0) : !1;
  };
}
function _A(i, e, t) {
  if (!i || !i.editable) return !1;
  let r = i.state.doc.resolve(e);
  if (!Uo.valid(r)) return !1;
  let o = i.posAtCoords({ left: t.clientX, top: t.clientY });
  return o && o.inside > -1 && fi.isSelectable(i.state.doc.nodeAt(o.inside))
    ? !1
    : (i.dispatch(i.state.tr.setSelection(new Uo(r))), !0);
}
function xA(i, e) {
  if (
    e.inputType != "insertCompositionText" ||
    !(i.state.selection instanceof Uo)
  )
    return !1;
  let { $from: t } = i.state.selection,
    r = t.parent
      .contentMatchAt(t.index())
      .findWrapping(i.state.schema.nodes.text);
  if (!r) return !1;
  let o = Ct.empty;
  for (let u = r.length - 1; u >= 0; u--)
    o = Ct.from(r[u].createAndFill(null, o));
  let n = i.state.tr.replace(t.pos, t.pos, new Ht(o, 0, 0));
  return n.setSelection(Mi.near(n.doc.resolve(t.pos + 1))), i.dispatch(n), !1;
}
function wA(i) {
  if (!(i.selection instanceof Uo)) return null;
  let e = document.createElement("div");
  return (
    (e.className = "ProseMirror-gapcursor"),
    Ro.create(i.doc, [Us.widget(i.selection.head, e, { key: "gapcursor" })])
  );
}
var e6 = mn.create({
  name: "gapCursor",
  addProseMirrorPlugins() {
    return [Yx()];
  },
  extendNodeSchema(i) {
    var e;
    let t = { name: i.name, options: i.options, storage: i.storage };
    return {
      allowGapCursor:
        (e = qi(ri(i, "allowGapCursor", t))) !== null && e !== void 0
          ? e
          : null,
    };
  },
});
var t6 = jr.create({
  name: "hardBreak",
  addOptions() {
    return { keepMarks: !0, HTMLAttributes: {} };
  },
  inline: !0,
  group: "inline",
  selectable: !1,
  parseHTML() {
    return [{ tag: "br" }];
  },
  renderHTML({ HTMLAttributes: i }) {
    return ["br", hr(this.options.HTMLAttributes, i)];
  },
  renderText() {
    return `
`;
  },
  addCommands() {
    return {
      setHardBreak:
        () =>
        ({ commands: i, chain: e, state: t, editor: r }) =>
          i.first([
            () => i.exitCode(),
            () =>
              i.command(() => {
                let { selection: o, storedMarks: n } = t;
                if (o.$from.parent.type.spec.isolating) return !1;
                let { keepMarks: u } = this.options,
                  { splittableMarks: h } = r.extensionManager,
                  m = n || (o.$to.parentOffset && o.$from.marks());
                return e()
                  .insertContent({ type: this.name })
                  .command(({ tr: b, dispatch: _ }) => {
                    if (_ && m && u) {
                      let S = m.filter((T) => h.includes(T.type.name));
                      b.ensureMarks(S);
                    }
                    return !0;
                  })
                  .run();
              }),
          ]),
    };
  },
  addKeyboardShortcuts() {
    return {
      "Mod-Enter": () => this.editor.commands.setHardBreak(),
      "Shift-Enter": () => this.editor.commands.setHardBreak(),
    };
  },
});
var i6 = jr.create({
  name: "heading",
  addOptions() {
    return { levels: [1, 2, 3, 4, 5, 6], HTMLAttributes: {} };
  },
  content: "inline*",
  group: "block",
  defining: !0,
  addAttributes() {
    return { level: { default: 1, rendered: !1 } };
  },
  parseHTML() {
    return this.options.levels.map((i) => ({
      tag: `h${i}`,
      attrs: { level: i },
    }));
  },
  renderHTML({ node: i, HTMLAttributes: e }) {
    return [
      `h${
        this.options.levels.includes(i.attrs.level)
          ? i.attrs.level
          : this.options.levels[0]
      }`,
      hr(this.options.HTMLAttributes, e),
      0,
    ];
  },
  addCommands() {
    return {
      setHeading:
        (i) =>
        ({ commands: e }) =>
          this.options.levels.includes(i.level) ? e.setNode(this.name, i) : !1,
      toggleHeading:
        (i) =>
        ({ commands: e }) =>
          this.options.levels.includes(i.level)
            ? e.toggleNode(this.name, "paragraph", i)
            : !1,
    };
  },
  addKeyboardShortcuts() {
    return this.options.levels.reduce(
      (i, e) => ({
        ...i,
        [`Mod-Alt-${e}`]: () =>
          this.editor.commands.toggleHeading({ level: e }),
      }),
      {}
    );
  },
  addInputRules() {
    return this.options.levels.map((i) =>
      _p({
        find: new RegExp(`^(#{1,${i}})\\s$`),
        type: this.type,
        getAttributes: { level: i },
      })
    );
  },
});
var um = 200,
  _o = function () {};
_o.prototype.append = function (e) {
  return e.length
    ? ((e = _o.from(e)),
      (!this.length && e) ||
        (e.length < um && this.leafAppend(e)) ||
        (this.length < um && e.leafPrepend(this)) ||
        this.appendInner(e))
    : this;
};
_o.prototype.prepend = function (e) {
  return e.length ? _o.from(e).append(this) : this;
};
_o.prototype.appendInner = function (e) {
  return new kA(this, e);
};
_o.prototype.slice = function (e, t) {
  return (
    e === void 0 && (e = 0),
    t === void 0 && (t = this.length),
    e >= t
      ? _o.empty
      : this.sliceInner(Math.max(0, e), Math.min(this.length, t))
  );
};
_o.prototype.get = function (e) {
  if (!(e < 0 || e >= this.length)) return this.getInner(e);
};
_o.prototype.forEach = function (e, t, r) {
  t === void 0 && (t = 0),
    r === void 0 && (r = this.length),
    t <= r
      ? this.forEachInner(e, t, r, 0)
      : this.forEachInvertedInner(e, t, r, 0);
};
_o.prototype.map = function (e, t, r) {
  t === void 0 && (t = 0), r === void 0 && (r = this.length);
  var o = [];
  return (
    this.forEach(
      function (n, u) {
        return o.push(e(n, u));
      },
      t,
      r
    ),
    o
  );
};
_o.from = function (e) {
  return e instanceof _o ? e : e && e.length ? new r6(e) : _o.empty;
};
var r6 = (function (i) {
  function e(r) {
    i.call(this), (this.values = r);
  }
  i && (e.__proto__ = i),
    (e.prototype = Object.create(i && i.prototype)),
    (e.prototype.constructor = e);
  var t = { length: { configurable: !0 }, depth: { configurable: !0 } };
  return (
    (e.prototype.flatten = function () {
      return this.values;
    }),
    (e.prototype.sliceInner = function (o, n) {
      return o == 0 && n == this.length ? this : new e(this.values.slice(o, n));
    }),
    (e.prototype.getInner = function (o) {
      return this.values[o];
    }),
    (e.prototype.forEachInner = function (o, n, u, h) {
      for (var m = n; m < u; m++)
        if (o(this.values[m], h + m) === !1) return !1;
    }),
    (e.prototype.forEachInvertedInner = function (o, n, u, h) {
      for (var m = n - 1; m >= u; m--)
        if (o(this.values[m], h + m) === !1) return !1;
    }),
    (e.prototype.leafAppend = function (o) {
      if (this.length + o.length <= um)
        return new e(this.values.concat(o.flatten()));
    }),
    (e.prototype.leafPrepend = function (o) {
      if (this.length + o.length <= um)
        return new e(o.flatten().concat(this.values));
    }),
    (t.length.get = function () {
      return this.values.length;
    }),
    (t.depth.get = function () {
      return 0;
    }),
    Object.defineProperties(e.prototype, t),
    e
  );
})(_o);
_o.empty = new r6([]);
var kA = (function (i) {
    function e(t, r) {
      i.call(this),
        (this.left = t),
        (this.right = r),
        (this.length = t.length + r.length),
        (this.depth = Math.max(t.depth, r.depth) + 1);
    }
    return (
      i && (e.__proto__ = i),
      (e.prototype = Object.create(i && i.prototype)),
      (e.prototype.constructor = e),
      (e.prototype.flatten = function () {
        return this.left.flatten().concat(this.right.flatten());
      }),
      (e.prototype.getInner = function (r) {
        return r < this.left.length
          ? this.left.get(r)
          : this.right.get(r - this.left.length);
      }),
      (e.prototype.forEachInner = function (r, o, n, u) {
        var h = this.left.length;
        if (
          (o < h && this.left.forEachInner(r, o, Math.min(n, h), u) === !1) ||
          (n > h &&
            this.right.forEachInner(
              r,
              Math.max(o - h, 0),
              Math.min(this.length, n) - h,
              u + h
            ) === !1)
        )
          return !1;
      }),
      (e.prototype.forEachInvertedInner = function (r, o, n, u) {
        var h = this.left.length;
        if (
          (o > h &&
            this.right.forEachInvertedInner(
              r,
              o - h,
              Math.max(n, h) - h,
              u + h
            ) === !1) ||
          (n < h &&
            this.left.forEachInvertedInner(r, Math.min(o, h), n, u) === !1)
        )
          return !1;
      }),
      (e.prototype.sliceInner = function (r, o) {
        if (r == 0 && o == this.length) return this;
        var n = this.left.length;
        return o <= n
          ? this.left.slice(r, o)
          : r >= n
          ? this.right.slice(r - n, o - n)
          : this.left.slice(r, n).append(this.right.slice(0, o - n));
      }),
      (e.prototype.leafAppend = function (r) {
        var o = this.right.leafAppend(r);
        if (o) return new e(this.left, o);
      }),
      (e.prototype.leafPrepend = function (r) {
        var o = this.left.leafPrepend(r);
        if (o) return new e(o, this.right);
      }),
      (e.prototype.appendInner = function (r) {
        return this.left.depth >= Math.max(this.right.depth, r.depth) + 1
          ? new e(this.left, new e(this.right, r))
          : new e(this, r);
      }),
      e
    );
  })(_o),
  $2 = _o;
var SA = 500,
  Kc = class i {
    constructor(e, t) {
      (this.items = e), (this.eventCount = t);
    }
    popEvent(e, t) {
      if (this.eventCount == 0) return null;
      let r = this.items.length;
      for (; ; r--)
        if (this.items.get(r - 1).selection) {
          --r;
          break;
        }
      let o, n;
      t && ((o = this.remapping(r, this.items.length)), (n = o.maps.length));
      let u = e.tr,
        h,
        m,
        b = [],
        _ = [];
      return (
        this.items.forEach(
          (S, T) => {
            if (!S.step) {
              o || ((o = this.remapping(r, T + 1)), (n = o.maps.length)),
                n--,
                _.push(S);
              return;
            }
            if (o) {
              _.push(new Ta(S.map));
              let D = S.step.map(o.slice(n)),
                F;
              D &&
                u.maybeStep(D).doc &&
                ((F = u.mapping.maps[u.mapping.maps.length - 1]),
                b.push(new Ta(F, void 0, void 0, b.length + _.length))),
                n--,
                F && o.appendMap(F, n);
            } else u.maybeStep(S.step);
            if (S.selection)
              return (
                (h = o ? S.selection.map(o.slice(n)) : S.selection),
                (m = new i(
                  this.items.slice(0, r).append(_.reverse().concat(b)),
                  this.eventCount - 1
                )),
                !1
              );
          },
          this.items.length,
          0
        ),
        { remaining: m, transform: u, selection: h }
      );
    }
    addTransform(e, t, r, o) {
      let n = [],
        u = this.eventCount,
        h = this.items,
        m = !o && h.length ? h.get(h.length - 1) : null;
      for (let _ = 0; _ < e.steps.length; _++) {
        let S = e.steps[_].invert(e.docs[_]),
          T = new Ta(e.mapping.maps[_], S, t),
          D;
        (D = m && m.merge(T)) &&
          ((T = D), _ ? n.pop() : (h = h.slice(0, h.length - 1))),
          n.push(T),
          t && (u++, (t = void 0)),
          o || (m = T);
      }
      let b = u - r.depth;
      return b > EA && ((h = CA(h, b)), (u -= b)), new i(h.append(n), u);
    }
    remapping(e, t) {
      let r = new rp();
      return (
        this.items.forEach(
          (o, n) => {
            let u =
              o.mirrorOffset != null && n - o.mirrorOffset >= e
                ? r.maps.length - o.mirrorOffset
                : void 0;
            r.appendMap(o.map, u);
          },
          e,
          t
        ),
        r
      );
    }
    addMaps(e) {
      return this.eventCount == 0
        ? this
        : new i(this.items.append(e.map((t) => new Ta(t))), this.eventCount);
    }
    rebased(e, t) {
      if (!this.eventCount) return this;
      let r = [],
        o = Math.max(0, this.items.length - t),
        n = e.mapping,
        u = e.steps.length,
        h = this.eventCount;
      this.items.forEach((T) => {
        T.selection && h--;
      }, o);
      let m = t;
      this.items.forEach((T) => {
        let D = n.getMirror(--m);
        if (D == null) return;
        u = Math.min(u, D);
        let F = n.maps[D];
        if (T.step) {
          let q = e.steps[D].invert(e.docs[D]),
            Q = T.selection && T.selection.map(n.slice(m + 1, D));
          Q && h++, r.push(new Ta(F, q, Q));
        } else r.push(new Ta(F));
      }, o);
      let b = [];
      for (let T = t; T < u; T++) b.push(new Ta(n.maps[T]));
      let _ = this.items.slice(0, o).append(b).append(r),
        S = new i(_, h);
      return (
        S.emptyItemCount() > SA &&
          (S = S.compress(this.items.length - r.length)),
        S
      );
    }
    emptyItemCount() {
      let e = 0;
      return (
        this.items.forEach((t) => {
          t.step || e++;
        }),
        e
      );
    }
    compress(e = this.items.length) {
      let t = this.remapping(0, e),
        r = t.maps.length,
        o = [],
        n = 0;
      return (
        this.items.forEach(
          (u, h) => {
            if (h >= e) o.push(u), u.selection && n++;
            else if (u.step) {
              let m = u.step.map(t.slice(r)),
                b = m && m.getMap();
              if ((r--, b && t.appendMap(b, r), m)) {
                let _ = u.selection && u.selection.map(t.slice(r));
                _ && n++;
                let S = new Ta(b.invert(), m, _),
                  T,
                  D = o.length - 1;
                (T = o.length && o[D].merge(S)) ? (o[D] = T) : o.push(S);
              }
            } else u.map && r--;
          },
          this.items.length,
          0
        ),
        new i($2.from(o.reverse()), n)
      );
    }
  };
Kc.empty = new Kc($2.empty, 0);
function CA(i, e) {
  let t;
  return (
    i.forEach((r, o) => {
      if (r.selection && e-- == 0) return (t = o), !1;
    }),
    i.slice(t)
  );
}
var Ta = class i {
    constructor(e, t, r, o) {
      (this.map = e),
        (this.step = t),
        (this.selection = r),
        (this.mirrorOffset = o);
    }
    merge(e) {
      if (this.step && e.step && !e.selection) {
        let t = e.step.merge(this.step);
        if (t) return new i(t.getMap().invert(), t, this.selection);
      }
    }
  },
  Ma = class {
    constructor(e, t, r, o, n) {
      (this.done = e),
        (this.undone = t),
        (this.prevRanges = r),
        (this.prevTime = o),
        (this.prevComposition = n);
    }
  },
  EA = 20;
function TA(i, e, t, r) {
  let o = t.getMeta(Zc),
    n;
  if (o) return o.historyState;
  t.getMeta(IA) && (i = new Ma(i.done, i.undone, null, 0, -1));
  let u = t.getMeta("appendedTransaction");
  if (t.steps.length == 0) return i;
  if (u && u.getMeta(Zc))
    return u.getMeta(Zc).redo
      ? new Ma(
          i.done.addTransform(t, void 0, r, dm(e)),
          i.undone,
          n6(t.mapping.maps[t.steps.length - 1]),
          i.prevTime,
          i.prevComposition
        )
      : new Ma(
          i.done,
          i.undone.addTransform(t, void 0, r, dm(e)),
          null,
          i.prevTime,
          i.prevComposition
        );
  if (
    t.getMeta("addToHistory") !== !1 &&
    !(u && u.getMeta("addToHistory") === !1)
  ) {
    let h = t.getMeta("composition"),
      m =
        i.prevTime == 0 ||
        (!u &&
          i.prevComposition != h &&
          (i.prevTime < (t.time || 0) - r.newGroupDelay ||
            !MA(t, i.prevRanges))),
      b = u
        ? Q2(i.prevRanges, t.mapping)
        : n6(t.mapping.maps[t.steps.length - 1]);
    return new Ma(
      i.done.addTransform(t, m ? e.selection.getBookmark() : void 0, r, dm(e)),
      Kc.empty,
      b,
      t.time,
      h ?? i.prevComposition
    );
  } else
    return (n = t.getMeta("rebased"))
      ? new Ma(
          i.done.rebased(t, n),
          i.undone.rebased(t, n),
          Q2(i.prevRanges, t.mapping),
          i.prevTime,
          i.prevComposition
        )
      : new Ma(
          i.done.addMaps(t.mapping.maps),
          i.undone.addMaps(t.mapping.maps),
          Q2(i.prevRanges, t.mapping),
          i.prevTime,
          i.prevComposition
        );
}
function MA(i, e) {
  if (!e) return !1;
  if (!i.docChanged) return !0;
  let t = !1;
  return (
    i.mapping.maps[0].forEach((r, o) => {
      for (let n = 0; n < e.length; n += 2)
        r <= e[n + 1] && o >= e[n] && (t = !0);
    }),
    t
  );
}
function n6(i) {
  let e = [];
  return i.forEach((t, r, o, n) => e.push(o, n)), e;
}
function Q2(i, e) {
  if (!i) return null;
  let t = [];
  for (let r = 0; r < i.length; r += 2) {
    let o = e.map(i[r], 1),
      n = e.map(i[r + 1], -1);
    o <= n && t.push(o, n);
  }
  return t;
}
function AA(i, e, t) {
  let r = dm(e),
    o = Zc.get(e).spec.config,
    n = (t ? i.undone : i.done).popEvent(e, r);
  if (!n) return null;
  let u = n.selection.resolve(n.transform.doc),
    h = (t ? i.done : i.undone).addTransform(
      n.transform,
      e.selection.getBookmark(),
      o,
      r
    ),
    m = new Ma(t ? h : n.remaining, t ? n.remaining : h, null, 0, -1);
  return n.transform.setSelection(u).setMeta(Zc, { redo: t, historyState: m });
}
var G2 = !1,
  o6 = null;
function dm(i) {
  let e = i.plugins;
  if (o6 != e) {
    (G2 = !1), (o6 = e);
    for (let t = 0; t < e.length; t++)
      if (e[t].spec.historyPreserveItems) {
        G2 = !0;
        break;
      }
  }
  return G2;
}
var Zc = new Gn("history"),
  IA = new Gn("closeHistory");
function s6(i = {}) {
  return (
    (i = { depth: i.depth || 100, newGroupDelay: i.newGroupDelay || 500 }),
    new Vr({
      key: Zc,
      state: {
        init() {
          return new Ma(Kc.empty, Kc.empty, null, 0, -1);
        },
        apply(e, t, r) {
          return TA(t, r, e, i);
        },
      },
      config: i,
      props: {
        handleDOMEvents: {
          beforeinput(e, t) {
            let r = t.inputType,
              o = r == "historyUndo" ? W2 : r == "historyRedo" ? Z2 : null;
            return o ? (t.preventDefault(), o(e.state, e.dispatch)) : !1;
          },
        },
      },
    })
  );
}
function hm(i, e) {
  return (t, r) => {
    let o = Zc.getState(t);
    if (!o || (i ? o.undone : o.done).eventCount == 0) return !1;
    if (r) {
      let n = AA(o, t, i);
      n && r(e ? n.scrollIntoView() : n);
    }
    return !0;
  };
}
var W2 = hm(!1, !0),
  Z2 = hm(!0, !0),
  pV = hm(!1, !1),
  fV = hm(!0, !1);
var a6 = mn.create({
  name: "history",
  addOptions() {
    return { depth: 100, newGroupDelay: 500 };
  },
  addCommands() {
    return {
      undo:
        () =>
        ({ state: i, dispatch: e }) =>
          W2(i, e),
      redo:
        () =>
        ({ state: i, dispatch: e }) =>
          Z2(i, e),
    };
  },
  addProseMirrorPlugins() {
    return [s6(this.options)];
  },
  addKeyboardShortcuts() {
    return {
      "Mod-z": () => this.editor.commands.undo(),
      "Shift-Mod-z": () => this.editor.commands.redo(),
      "Mod-y": () => this.editor.commands.redo(),
      "Mod-\u044F": () => this.editor.commands.undo(),
      "Shift-Mod-\u044F": () => this.editor.commands.redo(),
    };
  },
});
var l6 = jr.create({
  name: "horizontalRule",
  addOptions() {
    return { HTMLAttributes: {} };
  },
  group: "block",
  parseHTML() {
    return [{ tag: "hr" }];
  },
  renderHTML({ HTMLAttributes: i }) {
    return ["hr", hr(this.options.HTMLAttributes, i)];
  },
  addCommands() {
    return {
      setHorizontalRule:
        () =>
        ({ chain: i, state: e }) => {
          let { $to: t } = e.selection,
            r = i();
          return (
            t.parentOffset === 0
              ? r.insertContentAt(Math.max(t.pos - 2, 0), { type: this.name })
              : r.insertContent({ type: this.name }),
            r
              .command(({ tr: o, dispatch: n }) => {
                var u;
                if (n) {
                  let { $to: h } = o.selection,
                    m = h.end();
                  if (h.nodeAfter)
                    h.nodeAfter.isTextblock
                      ? o.setSelection(Mi.create(o.doc, h.pos + 1))
                      : h.nodeAfter.isBlock
                      ? o.setSelection(fi.create(o.doc, h.pos))
                      : o.setSelection(Mi.create(o.doc, h.pos));
                  else {
                    let b =
                      (u = h.parent.type.contentMatch.defaultType) === null ||
                      u === void 0
                        ? void 0
                        : u.create();
                    b &&
                      (o.insert(m, b), o.setSelection(Mi.create(o.doc, m + 1)));
                  }
                  o.scrollIntoView();
                }
                return !0;
              })
              .run()
          );
        },
    };
  },
  addInputRules() {
    return [Vx({ find: /^(?:---|—-|___\s|\*\*\*\s)$/, type: this.type })];
  },
});
var PA = /(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,
  DA = /(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,
  LA = /(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,
  FA = /(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,
  c6 = ts.create({
    name: "italic",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    parseHTML() {
      return [
        { tag: "em" },
        { tag: "i", getAttrs: (i) => i.style.fontStyle !== "normal" && null },
        { style: "font-style=italic" },
      ];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["em", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        setItalic:
          () =>
          ({ commands: i }) =>
            i.setMark(this.name),
        toggleItalic:
          () =>
          ({ commands: i }) =>
            i.toggleMark(this.name),
        unsetItalic:
          () =>
          ({ commands: i }) =>
            i.unsetMark(this.name),
      };
    },
    addKeyboardShortcuts() {
      return {
        "Mod-i": () => this.editor.commands.toggleItalic(),
        "Mod-I": () => this.editor.commands.toggleItalic(),
      };
    },
    addInputRules() {
      return [
        Ca({ find: PA, type: this.type }),
        Ca({ find: LA, type: this.type }),
      ];
    },
    addPasteRules() {
      return [
        Ea({ find: DA, type: this.type }),
        Ea({ find: FA, type: this.type }),
      ];
    },
  });
var u6 = jr.create({
  name: "listItem",
  addOptions() {
    return {
      HTMLAttributes: {},
      bulletListTypeName: "bulletList",
      orderedListTypeName: "orderedList",
    };
  },
  content: "paragraph block*",
  defining: !0,
  parseHTML() {
    return [{ tag: "li" }];
  },
  renderHTML({ HTMLAttributes: i }) {
    return ["li", hr(this.options.HTMLAttributes, i), 0];
  },
  addKeyboardShortcuts() {
    return {
      Enter: () => this.editor.commands.splitListItem(this.name),
      Tab: () => this.editor.commands.sinkListItem(this.name),
      "Shift-Tab": () => this.editor.commands.liftListItem(this.name),
    };
  },
});
var zA = jr.create({
    name: "listItem",
    addOptions() {
      return {
        HTMLAttributes: {},
        bulletListTypeName: "bulletList",
        orderedListTypeName: "orderedList",
      };
    },
    content: "paragraph block*",
    defining: !0,
    parseHTML() {
      return [{ tag: "li" }];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["li", hr(this.options.HTMLAttributes, i), 0];
    },
    addKeyboardShortcuts() {
      return {
        Enter: () => this.editor.commands.splitListItem(this.name),
        Tab: () => this.editor.commands.sinkListItem(this.name),
        "Shift-Tab": () => this.editor.commands.liftListItem(this.name),
      };
    },
  }),
  d6 = ts.create({
    name: "textStyle",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    parseHTML() {
      return [
        { tag: "span", getAttrs: (i) => (i.hasAttribute("style") ? {} : !1) },
      ];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["span", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        removeEmptyTextStyle:
          () =>
          ({ state: i, commands: e }) => {
            let t = dd(i, this.type);
            return Object.entries(t).some(([, o]) => !!o)
              ? !0
              : e.unsetMark(this.name);
          },
      };
    },
  }),
  h6 = /^(\d+)\.\s$/,
  p6 = jr.create({
    name: "orderedList",
    addOptions() {
      return {
        itemTypeName: "listItem",
        HTMLAttributes: {},
        keepMarks: !1,
        keepAttributes: !1,
      };
    },
    group: "block list",
    content() {
      return `${this.options.itemTypeName}+`;
    },
    addAttributes() {
      return {
        start: {
          default: 1,
          parseHTML: (i) =>
            i.hasAttribute("start")
              ? parseInt(i.getAttribute("start") || "", 10)
              : 1,
        },
      };
    },
    parseHTML() {
      return [{ tag: "ol" }];
    },
    renderHTML({ HTMLAttributes: i }) {
      let { start: e, ...t } = i;
      return e === 1
        ? ["ol", hr(this.options.HTMLAttributes, t), 0]
        : ["ol", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        toggleOrderedList:
          () =>
          ({ commands: i, chain: e }) =>
            this.options.keepAttributes
              ? e()
                  .toggleList(
                    this.name,
                    this.options.itemTypeName,
                    this.options.keepMarks
                  )
                  .updateAttributes(zA.name, this.editor.getAttributes(d6.name))
                  .run()
              : i.toggleList(
                  this.name,
                  this.options.itemTypeName,
                  this.options.keepMarks
                ),
      };
    },
    addKeyboardShortcuts() {
      return { "Mod-Shift-7": () => this.editor.commands.toggleOrderedList() };
    },
    addInputRules() {
      let i = nc({
        find: h6,
        type: this.type,
        getAttributes: (e) => ({ start: +e[1] }),
        joinPredicate: (e, t) => t.childCount + t.attrs.start === +e[1],
      });
      return (
        (this.options.keepMarks || this.options.keepAttributes) &&
          (i = nc({
            find: h6,
            type: this.type,
            keepMarks: this.options.keepMarks,
            keepAttributes: this.options.keepAttributes,
            getAttributes: (e) => ({
              start: +e[1],
              ...this.editor.getAttributes(d6.name),
            }),
            joinPredicate: (e, t) => t.childCount + t.attrs.start === +e[1],
            editor: this.editor,
          })),
        [i]
      );
    },
  });
var f6 = jr.create({
  name: "paragraph",
  priority: 1e3,
  addOptions() {
    return { HTMLAttributes: {} };
  },
  group: "block",
  content: "inline*",
  parseHTML() {
    return [{ tag: "p" }];
  },
  renderHTML({ HTMLAttributes: i }) {
    return ["p", hr(this.options.HTMLAttributes, i), 0];
  },
  addCommands() {
    return {
      setParagraph:
        () =>
        ({ commands: i }) =>
          i.setNode(this.name),
    };
  },
  addKeyboardShortcuts() {
    return { "Mod-Alt-0": () => this.editor.commands.setParagraph() };
  },
});
var NA = /(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,
  OA = /(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,
  m6 = ts.create({
    name: "strike",
    addOptions() {
      return { HTMLAttributes: {} };
    },
    parseHTML() {
      return [
        { tag: "s" },
        { tag: "del" },
        { tag: "strike" },
        {
          style: "text-decoration",
          consuming: !1,
          getAttrs: (i) => (i.includes("line-through") ? {} : !1),
        },
      ];
    },
    renderHTML({ HTMLAttributes: i }) {
      return ["s", hr(this.options.HTMLAttributes, i), 0];
    },
    addCommands() {
      return {
        setStrike:
          () =>
          ({ commands: i }) =>
            i.setMark(this.name),
        toggleStrike:
          () =>
          ({ commands: i }) =>
            i.toggleMark(this.name),
        unsetStrike:
          () =>
          ({ commands: i }) =>
            i.unsetMark(this.name),
      };
    },
    addKeyboardShortcuts() {
      let i = {};
      return (
        sm()
          ? (i["Mod-Shift-s"] = () => this.editor.commands.toggleStrike())
          : (i["Ctrl-Shift-s"] = () => this.editor.commands.toggleStrike()),
        i
      );
    },
    addInputRules() {
      return [Ca({ find: NA, type: this.type })];
    },
    addPasteRules() {
      return [Ea({ find: OA, type: this.type })];
    },
  });
var g6 = jr.create({ name: "text", group: "inline" });
var y6 = mn.create({
  name: "starterKit",
  addExtensions() {
    var i, e, t, r, o, n, u, h, m, b, _, S, T, D, F, q, Q, te;
    let ce = [];
    return (
      this.options.blockquote !== !1 &&
        ce.push(
          Hx.configure(
            (i = this.options) === null || i === void 0 ? void 0 : i.blockquote
          )
        ),
      this.options.bold !== !1 &&
        ce.push(
          qx.configure(
            (e = this.options) === null || e === void 0 ? void 0 : e.bold
          )
        ),
      this.options.bulletList !== !1 &&
        ce.push(
          Gx.configure(
            (t = this.options) === null || t === void 0 ? void 0 : t.bulletList
          )
        ),
      this.options.code !== !1 &&
        ce.push(
          Wx.configure(
            (r = this.options) === null || r === void 0 ? void 0 : r.code
          )
        ),
      this.options.codeBlock !== !1 &&
        ce.push(
          Zx.configure(
            (o = this.options) === null || o === void 0 ? void 0 : o.codeBlock
          )
        ),
      this.options.document !== !1 &&
        ce.push(
          Kx.configure(
            (n = this.options) === null || n === void 0 ? void 0 : n.document
          )
        ),
      this.options.dropcursor !== !1 &&
        ce.push(
          Xx.configure(
            (u = this.options) === null || u === void 0 ? void 0 : u.dropcursor
          )
        ),
      this.options.gapcursor !== !1 &&
        ce.push(
          e6.configure(
            (h = this.options) === null || h === void 0 ? void 0 : h.gapcursor
          )
        ),
      this.options.hardBreak !== !1 &&
        ce.push(
          t6.configure(
            (m = this.options) === null || m === void 0 ? void 0 : m.hardBreak
          )
        ),
      this.options.heading !== !1 &&
        ce.push(
          i6.configure(
            (b = this.options) === null || b === void 0 ? void 0 : b.heading
          )
        ),
      this.options.history !== !1 &&
        ce.push(
          a6.configure(
            (_ = this.options) === null || _ === void 0 ? void 0 : _.history
          )
        ),
      this.options.horizontalRule !== !1 &&
        ce.push(
          l6.configure(
            (S = this.options) === null || S === void 0
              ? void 0
              : S.horizontalRule
          )
        ),
      this.options.italic !== !1 &&
        ce.push(
          c6.configure(
            (T = this.options) === null || T === void 0 ? void 0 : T.italic
          )
        ),
      this.options.listItem !== !1 &&
        ce.push(
          u6.configure(
            (D = this.options) === null || D === void 0 ? void 0 : D.listItem
          )
        ),
      this.options.orderedList !== !1 &&
        ce.push(
          p6.configure(
            (F = this.options) === null || F === void 0 ? void 0 : F.orderedList
          )
        ),
      this.options.paragraph !== !1 &&
        ce.push(
          f6.configure(
            (q = this.options) === null || q === void 0 ? void 0 : q.paragraph
          )
        ),
      this.options.strike !== !1 &&
        ce.push(
          m6.configure(
            (Q = this.options) === null || Q === void 0 ? void 0 : Q.strike
          )
        ),
      this.options.text !== !1 &&
        ce.push(
          g6.configure(
            (te = this.options) === null || te === void 0 ? void 0 : te.text
          )
        ),
      ce
    );
  },
});
function b6(i) {
  var e,
    t,
    r = "";
  if (typeof i == "string" || typeof i == "number") r += i;
  else if (typeof i == "object")
    if (Array.isArray(i)) {
      var o = i.length;
      for (e = 0; e < o; e++)
        i[e] && (t = b6(i[e])) && (r && (r += " "), (r += t));
    } else for (t in i) i[t] && (r && (r += " "), (r += t));
  return r;
}
function BA() {
  for (var i, e, t = 0, r = "", o = arguments.length; t < o; t++)
    (i = arguments[t]) && (e = b6(i)) && (r && (r += " "), (r += e));
  return r;
}
var ol = BA;
var pm = class extends tm {
  constructor() {
    super(...arguments), (this.contentElement = null);
  }
};
var hd = [];
function Jc(i, e) {
  return { subscribe: cn(i, e).subscribe };
}
function cn(i, e = yt) {
  let t,
    r = new Set();
  function o(h) {
    if (ut(i, h) && ((i = h), t)) {
      let m = !hd.length;
      for (let b of r) b[1](), hd.push(b, i);
      if (m) {
        for (let b = 0; b < hd.length; b += 2) hd[b][0](hd[b + 1]);
        hd.length = 0;
      }
    }
  }
  function n(h) {
    o(h(i));
  }
  function u(h, m = yt) {
    let b = [h, m];
    return (
      r.add(b),
      r.size === 1 && (t = e(o, n) || yt),
      h(i),
      () => {
        r.delete(b), r.size === 0 && t && (t(), (t = null));
      }
    );
  }
  return { set: o, update: n, subscribe: u };
}
var RA = (i) => {
    let e = new pm(i),
      { subscribe: t } = Jc(
        e,
        (r) => (
          e.on("transaction", () => {
            r(e);
          }),
          () => {
            e.destroy();
          }
        )
      );
    return { subscribe: t };
  },
  K2 = RA;
function jA(i) {
  let e,
    t,
    r,
    o = i[3].default,
    n = bi(o, i, i[2], null);
  return {
    c() {
      (e = Je("div")), (t = Ot()), n && n.c();
    },
    m(u, h) {
      Ne(u, e, h), i[4](e), Ne(u, t, h), n && n.m(u, h), (r = !0);
    },
    p(u, [h]) {
      n &&
        n.p &&
        (!r || h & 4) &&
        _i(n, o, u, u[2], r ? vi(o, u[2], h, null) : xi(u[2]), null);
    },
    i(u) {
      r || (Oe(n, u), (r = !0));
    },
    o(u) {
      $e(n, u), (r = !1);
    },
    d(u) {
      u && (ze(e), ze(t)), i[4](null), n && n.d(u);
    },
  };
}
function HA(i, e, t) {
  let { $$slots: r = {}, $$scope: o } = e,
    n,
    { editor: u } = e,
    h = async () => {
      await Ns(),
        u?.options.element &&
          (u.contentElement ||
            (n.append(...Array.from(u.options.element.childNodes)),
            u.setOptions({ element: n }),
            t(1, (u.contentElement = n), u)));
    };
  Ur(h),
    lg(h),
    dr(() => {
      if (
        !u ||
        (t(1, (u.contentElement = null), u), !u.options.element.firstChild)
      )
        return;
      let b = document.createElement("div");
      b.append(...Array.from(u.options.element.childNodes)),
        u.setOptions({ element: b });
    });
  function m(b) {
    Bi[b ? "unshift" : "push"](() => {
      (n = b), t(0, n);
    });
  }
  return (
    (i.$$set = (b) => {
      "editor" in b && t(1, (u = b.editor)),
        "$$scope" in b && t(2, (o = b.$$scope));
    }),
    [n, u, o, r, m]
  );
}
var J2 = class extends dt {
    constructor(e) {
      super(), gt(this, e, HA, jA, ut, { editor: 1 });
    }
  },
  X2 = J2;
var gn = "top",
  Wn = "bottom",
  Un = "right",
  En = "left",
  fm = "auto",
  oc = [gn, Wn, Un, En],
  sl = "start",
  Xc = "end",
  v6 = "clippingParents",
  mm = "viewport",
  pd = "popper",
  _6 = "reference",
  ey = oc.reduce(function (i, e) {
    return i.concat([e + "-" + sl, e + "-" + Xc]);
  }, []),
  gm = [].concat(oc, [fm]).reduce(function (i, e) {
    return i.concat([e, e + "-" + sl, e + "-" + Xc]);
  }, []),
  $A = "beforeRead",
  QA = "read",
  GA = "afterRead",
  WA = "beforeMain",
  ZA = "main",
  KA = "afterMain",
  JA = "beforeWrite",
  XA = "write",
  YA = "afterWrite",
  x6 = [$A, QA, GA, WA, ZA, KA, JA, XA, YA];
function oo(i) {
  return i ? (i.nodeName || "").toLowerCase() : null;
}
function Yr(i) {
  if (i == null) return window;
  if (i.toString() !== "[object Window]") {
    var e = i.ownerDocument;
    return (e && e.defaultView) || window;
  }
  return i;
}
function Vs(i) {
  var e = Yr(i).Element;
  return i instanceof e || i instanceof Element;
}
function Zn(i) {
  var e = Yr(i).HTMLElement;
  return i instanceof e || i instanceof HTMLElement;
}
function fd(i) {
  if (typeof ShadowRoot > "u") return !1;
  var e = Yr(i).ShadowRoot;
  return i instanceof e || i instanceof ShadowRoot;
}
function eI(i) {
  var e = i.state;
  Object.keys(e.elements).forEach(function (t) {
    var r = e.styles[t] || {},
      o = e.attributes[t] || {},
      n = e.elements[t];
    !Zn(n) ||
      !oo(n) ||
      (Object.assign(n.style, r),
      Object.keys(o).forEach(function (u) {
        var h = o[u];
        h === !1 ? n.removeAttribute(u) : n.setAttribute(u, h === !0 ? "" : h);
      }));
  });
}
function tI(i) {
  var e = i.state,
    t = {
      popper: {
        position: e.options.strategy,
        left: "0",
        top: "0",
        margin: "0",
      },
      arrow: { position: "absolute" },
      reference: {},
    };
  return (
    Object.assign(e.elements.popper.style, t.popper),
    (e.styles = t),
    e.elements.arrow && Object.assign(e.elements.arrow.style, t.arrow),
    function () {
      Object.keys(e.elements).forEach(function (r) {
        var o = e.elements[r],
          n = e.attributes[r] || {},
          u = Object.keys(e.styles.hasOwnProperty(r) ? e.styles[r] : t[r]),
          h = u.reduce(function (m, b) {
            return (m[b] = ""), m;
          }, {});
        !Zn(o) ||
          !oo(o) ||
          (Object.assign(o.style, h),
          Object.keys(n).forEach(function (m) {
            o.removeAttribute(m);
          }));
      });
    }
  );
}
var xp = {
  name: "applyStyles",
  enabled: !0,
  phase: "write",
  fn: eI,
  effect: tI,
  requires: ["computeStyles"],
};
function so(i) {
  return i.split("-")[0];
}
var sa = Math.max,
  Yc = Math.min,
  al = Math.round;
function md() {
  var i = navigator.userAgentData;
  return i != null && i.brands && Array.isArray(i.brands)
    ? i.brands
        .map(function (e) {
          return e.brand + "/" + e.version;
        })
        .join(" ")
    : navigator.userAgent;
}
function wp() {
  return !/^((?!chrome|android).)*safari/i.test(md());
}
function js(i, e, t) {
  e === void 0 && (e = !1), t === void 0 && (t = !1);
  var r = i.getBoundingClientRect(),
    o = 1,
    n = 1;
  e &&
    Zn(i) &&
    ((o = (i.offsetWidth > 0 && al(r.width) / i.offsetWidth) || 1),
    (n = (i.offsetHeight > 0 && al(r.height) / i.offsetHeight) || 1));
  var u = Vs(i) ? Yr(i) : window,
    h = u.visualViewport,
    m = !wp() && t,
    b = (r.left + (m && h ? h.offsetLeft : 0)) / o,
    _ = (r.top + (m && h ? h.offsetTop : 0)) / n,
    S = r.width / o,
    T = r.height / n;
  return {
    width: S,
    height: T,
    top: _,
    right: b + S,
    bottom: _ + T,
    left: b,
    x: b,
    y: _,
  };
}
function eu(i) {
  var e = js(i),
    t = i.offsetWidth,
    r = i.offsetHeight;
  return (
    Math.abs(e.width - t) <= 1 && (t = e.width),
    Math.abs(e.height - r) <= 1 && (r = e.height),
    { x: i.offsetLeft, y: i.offsetTop, width: t, height: r }
  );
}
function kp(i, e) {
  var t = e.getRootNode && e.getRootNode();
  if (i.contains(e)) return !0;
  if (t && fd(t)) {
    var r = e;
    do {
      if (r && i.isSameNode(r)) return !0;
      r = r.parentNode || r.host;
    } while (r);
  }
  return !1;
}
function is(i) {
  return Yr(i).getComputedStyle(i);
}
function ty(i) {
  return ["table", "td", "th"].indexOf(oo(i)) >= 0;
}
function xo(i) {
  return ((Vs(i) ? i.ownerDocument : i.document) || window.document)
    .documentElement;
}
function ll(i) {
  return oo(i) === "html"
    ? i
    : i.assignedSlot || i.parentNode || (fd(i) ? i.host : null) || xo(i);
}
function w6(i) {
  return !Zn(i) || is(i).position === "fixed" ? null : i.offsetParent;
}
function iI(i) {
  var e = /firefox/i.test(md()),
    t = /Trident/i.test(md());
  if (t && Zn(i)) {
    var r = is(i);
    if (r.position === "fixed") return null;
  }
  var o = ll(i);
  for (fd(o) && (o = o.host); Zn(o) && ["html", "body"].indexOf(oo(o)) < 0; ) {
    var n = is(o);
    if (
      n.transform !== "none" ||
      n.perspective !== "none" ||
      n.contain === "paint" ||
      ["transform", "perspective"].indexOf(n.willChange) !== -1 ||
      (e && n.willChange === "filter") ||
      (e && n.filter && n.filter !== "none")
    )
      return o;
    o = o.parentNode;
  }
  return null;
}
function aa(i) {
  for (var e = Yr(i), t = w6(i); t && ty(t) && is(t).position === "static"; )
    t = w6(t);
  return t &&
    (oo(t) === "html" || (oo(t) === "body" && is(t).position === "static"))
    ? e
    : t || iI(i) || e;
}
function tu(i) {
  return ["top", "bottom"].indexOf(i) >= 0 ? "x" : "y";
}
function iu(i, e, t) {
  return sa(i, Yc(e, t));
}
function k6(i, e, t) {
  var r = iu(i, e, t);
  return r > t ? t : r;
}
function Sp() {
  return { top: 0, right: 0, bottom: 0, left: 0 };
}
function Cp(i) {
  return Object.assign({}, Sp(), i);
}
function Ep(i, e) {
  return e.reduce(function (t, r) {
    return (t[r] = i), t;
  }, {});
}
var rI = function (e, t) {
  return (
    (e =
      typeof e == "function"
        ? e(Object.assign({}, t.rects, { placement: t.placement }))
        : e),
    Cp(typeof e != "number" ? e : Ep(e, oc))
  );
};
function nI(i) {
  var e,
    t = i.state,
    r = i.name,
    o = i.options,
    n = t.elements.arrow,
    u = t.modifiersData.popperOffsets,
    h = so(t.placement),
    m = tu(h),
    b = [En, Un].indexOf(h) >= 0,
    _ = b ? "height" : "width";
  if (!(!n || !u)) {
    var S = rI(o.padding, t),
      T = eu(n),
      D = m === "y" ? gn : En,
      F = m === "y" ? Wn : Un,
      q =
        t.rects.reference[_] + t.rects.reference[m] - u[m] - t.rects.popper[_],
      Q = u[m] - t.rects.reference[m],
      te = aa(n),
      ce = te ? (m === "y" ? te.clientHeight || 0 : te.clientWidth || 0) : 0,
      be = q / 2 - Q / 2,
      Y = S[D],
      Ie = ce - T[_] - S[F],
      Te = ce / 2 - T[_] / 2 + be,
      fe = iu(Y, Te, Ie),
      Le = m;
    t.modifiersData[r] =
      ((e = {}), (e[Le] = fe), (e.centerOffset = fe - Te), e);
  }
}
function oI(i) {
  var e = i.state,
    t = i.options,
    r = t.element,
    o = r === void 0 ? "[data-popper-arrow]" : r;
  o != null &&
    ((typeof o == "string" && ((o = e.elements.popper.querySelector(o)), !o)) ||
      (kp(e.elements.popper, o) && (e.elements.arrow = o)));
}
var S6 = {
  name: "arrow",
  enabled: !0,
  phase: "main",
  fn: nI,
  effect: oI,
  requires: ["popperOffsets"],
  requiresIfExists: ["preventOverflow"],
};
function Hs(i) {
  return i.split("-")[1];
}
var sI = { top: "auto", right: "auto", bottom: "auto", left: "auto" };
function aI(i, e) {
  var t = i.x,
    r = i.y,
    o = e.devicePixelRatio || 1;
  return { x: al(t * o) / o || 0, y: al(r * o) / o || 0 };
}
function C6(i) {
  var e,
    t = i.popper,
    r = i.popperRect,
    o = i.placement,
    n = i.variation,
    u = i.offsets,
    h = i.position,
    m = i.gpuAcceleration,
    b = i.adaptive,
    _ = i.roundOffsets,
    S = i.isFixed,
    T = u.x,
    D = T === void 0 ? 0 : T,
    F = u.y,
    q = F === void 0 ? 0 : F,
    Q = typeof _ == "function" ? _({ x: D, y: q }) : { x: D, y: q };
  (D = Q.x), (q = Q.y);
  var te = u.hasOwnProperty("x"),
    ce = u.hasOwnProperty("y"),
    be = En,
    Y = gn,
    Ie = window;
  if (b) {
    var Te = aa(t),
      fe = "clientHeight",
      Le = "clientWidth";
    if (
      (Te === Yr(t) &&
        ((Te = xo(t)),
        is(Te).position !== "static" &&
          h === "absolute" &&
          ((fe = "scrollHeight"), (Le = "scrollWidth"))),
      (Te = Te),
      o === gn || ((o === En || o === Un) && n === Xc))
    ) {
      Y = Wn;
      var De =
        S && Te === Ie && Ie.visualViewport ? Ie.visualViewport.height : Te[fe];
      (q -= De - r.height), (q *= m ? 1 : -1);
    }
    if (o === En || ((o === gn || o === Wn) && n === Xc)) {
      be = Un;
      var st =
        S && Te === Ie && Ie.visualViewport ? Ie.visualViewport.width : Te[Le];
      (D -= st - r.width), (D *= m ? 1 : -1);
    }
  }
  var qe = Object.assign({ position: h }, b && sI),
    zt = _ === !0 ? aI({ x: D, y: q }, Yr(t)) : { x: D, y: q };
  if (((D = zt.x), (q = zt.y), m)) {
    var Rt;
    return Object.assign(
      {},
      qe,
      ((Rt = {}),
      (Rt[Y] = ce ? "0" : ""),
      (Rt[be] = te ? "0" : ""),
      (Rt.transform =
        (Ie.devicePixelRatio || 1) <= 1
          ? "translate(" + D + "px, " + q + "px)"
          : "translate3d(" + D + "px, " + q + "px, 0)"),
      Rt)
    );
  }
  return Object.assign(
    {},
    qe,
    ((e = {}),
    (e[Y] = ce ? q + "px" : ""),
    (e[be] = te ? D + "px" : ""),
    (e.transform = ""),
    e)
  );
}
function lI(i) {
  var e = i.state,
    t = i.options,
    r = t.gpuAcceleration,
    o = r === void 0 ? !0 : r,
    n = t.adaptive,
    u = n === void 0 ? !0 : n,
    h = t.roundOffsets,
    m = h === void 0 ? !0 : h,
    b = {
      placement: so(e.placement),
      variation: Hs(e.placement),
      popper: e.elements.popper,
      popperRect: e.rects.popper,
      gpuAcceleration: o,
      isFixed: e.options.strategy === "fixed",
    };
  e.modifiersData.popperOffsets != null &&
    (e.styles.popper = Object.assign(
      {},
      e.styles.popper,
      C6(
        Object.assign({}, b, {
          offsets: e.modifiersData.popperOffsets,
          position: e.options.strategy,
          adaptive: u,
          roundOffsets: m,
        })
      )
    )),
    e.modifiersData.arrow != null &&
      (e.styles.arrow = Object.assign(
        {},
        e.styles.arrow,
        C6(
          Object.assign({}, b, {
            offsets: e.modifiersData.arrow,
            position: "absolute",
            adaptive: !1,
            roundOffsets: m,
          })
        )
      )),
    (e.attributes.popper = Object.assign({}, e.attributes.popper, {
      "data-popper-placement": e.placement,
    }));
}
var E6 = {
  name: "computeStyles",
  enabled: !0,
  phase: "beforeWrite",
  fn: lI,
  data: {},
};
var ym = { passive: !0 };
function cI(i) {
  var e = i.state,
    t = i.instance,
    r = i.options,
    o = r.scroll,
    n = o === void 0 ? !0 : o,
    u = r.resize,
    h = u === void 0 ? !0 : u,
    m = Yr(e.elements.popper),
    b = [].concat(e.scrollParents.reference, e.scrollParents.popper);
  return (
    n &&
      b.forEach(function (_) {
        _.addEventListener("scroll", t.update, ym);
      }),
    h && m.addEventListener("resize", t.update, ym),
    function () {
      n &&
        b.forEach(function (_) {
          _.removeEventListener("scroll", t.update, ym);
        }),
        h && m.removeEventListener("resize", t.update, ym);
    }
  );
}
var T6 = {
  name: "eventListeners",
  enabled: !0,
  phase: "write",
  fn: function () {},
  effect: cI,
  data: {},
};
var uI = { left: "right", right: "left", bottom: "top", top: "bottom" };
function gd(i) {
  return i.replace(/left|right|bottom|top/g, function (e) {
    return uI[e];
  });
}
var dI = { start: "end", end: "start" };
function bm(i) {
  return i.replace(/start|end/g, function (e) {
    return dI[e];
  });
}
function ru(i) {
  var e = Yr(i),
    t = e.pageXOffset,
    r = e.pageYOffset;
  return { scrollLeft: t, scrollTop: r };
}
function nu(i) {
  return js(xo(i)).left + ru(i).scrollLeft;
}
function iy(i, e) {
  var t = Yr(i),
    r = xo(i),
    o = t.visualViewport,
    n = r.clientWidth,
    u = r.clientHeight,
    h = 0,
    m = 0;
  if (o) {
    (n = o.width), (u = o.height);
    var b = wp();
    (b || (!b && e === "fixed")) && ((h = o.offsetLeft), (m = o.offsetTop));
  }
  return { width: n, height: u, x: h + nu(i), y: m };
}
function ry(i) {
  var e,
    t = xo(i),
    r = ru(i),
    o = (e = i.ownerDocument) == null ? void 0 : e.body,
    n = sa(
      t.scrollWidth,
      t.clientWidth,
      o ? o.scrollWidth : 0,
      o ? o.clientWidth : 0
    ),
    u = sa(
      t.scrollHeight,
      t.clientHeight,
      o ? o.scrollHeight : 0,
      o ? o.clientHeight : 0
    ),
    h = -r.scrollLeft + nu(i),
    m = -r.scrollTop;
  return (
    is(o || t).direction === "rtl" &&
      (h += sa(t.clientWidth, o ? o.clientWidth : 0) - n),
    { width: n, height: u, x: h, y: m }
  );
}
function ou(i) {
  var e = is(i),
    t = e.overflow,
    r = e.overflowX,
    o = e.overflowY;
  return /auto|scroll|overlay|hidden/.test(t + o + r);
}
function vm(i) {
  return ["html", "body", "#document"].indexOf(oo(i)) >= 0
    ? i.ownerDocument.body
    : Zn(i) && ou(i)
    ? i
    : vm(ll(i));
}
function sc(i, e) {
  var t;
  e === void 0 && (e = []);
  var r = vm(i),
    o = r === ((t = i.ownerDocument) == null ? void 0 : t.body),
    n = Yr(r),
    u = o ? [n].concat(n.visualViewport || [], ou(r) ? r : []) : r,
    h = e.concat(u);
  return o ? h : h.concat(sc(ll(u)));
}
function yd(i) {
  return Object.assign({}, i, {
    left: i.x,
    top: i.y,
    right: i.x + i.width,
    bottom: i.y + i.height,
  });
}
function hI(i, e) {
  var t = js(i, !1, e === "fixed");
  return (
    (t.top = t.top + i.clientTop),
    (t.left = t.left + i.clientLeft),
    (t.bottom = t.top + i.clientHeight),
    (t.right = t.left + i.clientWidth),
    (t.width = i.clientWidth),
    (t.height = i.clientHeight),
    (t.x = t.left),
    (t.y = t.top),
    t
  );
}
function M6(i, e, t) {
  return e === mm ? yd(iy(i, t)) : Vs(e) ? hI(e, t) : yd(ry(xo(i)));
}
function pI(i) {
  var e = sc(ll(i)),
    t = ["absolute", "fixed"].indexOf(is(i).position) >= 0,
    r = t && Zn(i) ? aa(i) : i;
  return Vs(r)
    ? e.filter(function (o) {
        return Vs(o) && kp(o, r) && oo(o) !== "body";
      })
    : [];
}
function ny(i, e, t, r) {
  var o = e === "clippingParents" ? pI(i) : [].concat(e),
    n = [].concat(o, [t]),
    u = n[0],
    h = n.reduce(function (m, b) {
      var _ = M6(i, b, r);
      return (
        (m.top = sa(_.top, m.top)),
        (m.right = Yc(_.right, m.right)),
        (m.bottom = Yc(_.bottom, m.bottom)),
        (m.left = sa(_.left, m.left)),
        m
      );
    }, M6(i, u, r));
  return (
    (h.width = h.right - h.left),
    (h.height = h.bottom - h.top),
    (h.x = h.left),
    (h.y = h.top),
    h
  );
}
function Tp(i) {
  var e = i.reference,
    t = i.element,
    r = i.placement,
    o = r ? so(r) : null,
    n = r ? Hs(r) : null,
    u = e.x + e.width / 2 - t.width / 2,
    h = e.y + e.height / 2 - t.height / 2,
    m;
  switch (o) {
    case gn:
      m = { x: u, y: e.y - t.height };
      break;
    case Wn:
      m = { x: u, y: e.y + e.height };
      break;
    case Un:
      m = { x: e.x + e.width, y: h };
      break;
    case En:
      m = { x: e.x - t.width, y: h };
      break;
    default:
      m = { x: e.x, y: e.y };
  }
  var b = o ? tu(o) : null;
  if (b != null) {
    var _ = b === "y" ? "height" : "width";
    switch (n) {
      case sl:
        m[b] = m[b] - (e[_] / 2 - t[_] / 2);
        break;
      case Xc:
        m[b] = m[b] + (e[_] / 2 - t[_] / 2);
        break;
      default:
    }
  }
  return m;
}
function la(i, e) {
  e === void 0 && (e = {});
  var t = e,
    r = t.placement,
    o = r === void 0 ? i.placement : r,
    n = t.strategy,
    u = n === void 0 ? i.strategy : n,
    h = t.boundary,
    m = h === void 0 ? v6 : h,
    b = t.rootBoundary,
    _ = b === void 0 ? mm : b,
    S = t.elementContext,
    T = S === void 0 ? pd : S,
    D = t.altBoundary,
    F = D === void 0 ? !1 : D,
    q = t.padding,
    Q = q === void 0 ? 0 : q,
    te = Cp(typeof Q != "number" ? Q : Ep(Q, oc)),
    ce = T === pd ? _6 : pd,
    be = i.rects.popper,
    Y = i.elements[F ? ce : T],
    Ie = ny(Vs(Y) ? Y : Y.contextElement || xo(i.elements.popper), m, _, u),
    Te = js(i.elements.reference),
    fe = Tp({ reference: Te, element: be, strategy: "absolute", placement: o }),
    Le = yd(Object.assign({}, be, fe)),
    De = T === pd ? Le : Te,
    st = {
      top: Ie.top - De.top + te.top,
      bottom: De.bottom - Ie.bottom + te.bottom,
      left: Ie.left - De.left + te.left,
      right: De.right - Ie.right + te.right,
    },
    qe = i.modifiersData.offset;
  if (T === pd && qe) {
    var zt = qe[o];
    Object.keys(st).forEach(function (Rt) {
      var Gt = [Un, Wn].indexOf(Rt) >= 0 ? 1 : -1,
        qt = [gn, Wn].indexOf(Rt) >= 0 ? "y" : "x";
      st[Rt] += zt[qt] * Gt;
    });
  }
  return st;
}
function oy(i, e) {
  e === void 0 && (e = {});
  var t = e,
    r = t.placement,
    o = t.boundary,
    n = t.rootBoundary,
    u = t.padding,
    h = t.flipVariations,
    m = t.allowedAutoPlacements,
    b = m === void 0 ? gm : m,
    _ = Hs(r),
    S = _
      ? h
        ? ey
        : ey.filter(function (F) {
            return Hs(F) === _;
          })
      : oc,
    T = S.filter(function (F) {
      return b.indexOf(F) >= 0;
    });
  T.length === 0 && (T = S);
  var D = T.reduce(function (F, q) {
    return (
      (F[q] = la(i, { placement: q, boundary: o, rootBoundary: n, padding: u })[
        so(q)
      ]),
      F
    );
  }, {});
  return Object.keys(D).sort(function (F, q) {
    return D[F] - D[q];
  });
}
function fI(i) {
  if (so(i) === fm) return [];
  var e = gd(i);
  return [bm(i), e, bm(e)];
}
function mI(i) {
  var e = i.state,
    t = i.options,
    r = i.name;
  if (!e.modifiersData[r]._skip) {
    for (
      var o = t.mainAxis,
        n = o === void 0 ? !0 : o,
        u = t.altAxis,
        h = u === void 0 ? !0 : u,
        m = t.fallbackPlacements,
        b = t.padding,
        _ = t.boundary,
        S = t.rootBoundary,
        T = t.altBoundary,
        D = t.flipVariations,
        F = D === void 0 ? !0 : D,
        q = t.allowedAutoPlacements,
        Q = e.options.placement,
        te = so(Q),
        ce = te === Q,
        be = m || (ce || !F ? [gd(Q)] : fI(Q)),
        Y = [Q].concat(be).reduce(function (Ce, Bt) {
          return Ce.concat(
            so(Bt) === fm
              ? oy(e, {
                  placement: Bt,
                  boundary: _,
                  rootBoundary: S,
                  padding: b,
                  flipVariations: F,
                  allowedAutoPlacements: q,
                })
              : Bt
          );
        }, []),
        Ie = e.rects.reference,
        Te = e.rects.popper,
        fe = new Map(),
        Le = !0,
        De = Y[0],
        st = 0;
      st < Y.length;
      st++
    ) {
      var qe = Y[st],
        zt = so(qe),
        Rt = Hs(qe) === sl,
        Gt = [gn, Wn].indexOf(zt) >= 0,
        qt = Gt ? "width" : "height",
        ct = la(e, {
          placement: qe,
          boundary: _,
          rootBoundary: S,
          altBoundary: T,
          padding: b,
        }),
        vt = Gt ? (Rt ? Un : En) : Rt ? Wn : gn;
      Ie[qt] > Te[qt] && (vt = gd(vt));
      var ht = gd(vt),
        Vt = [];
      if (
        (n && Vt.push(ct[zt] <= 0),
        h && Vt.push(ct[vt] <= 0, ct[ht] <= 0),
        Vt.every(function (Ce) {
          return Ce;
        }))
      ) {
        (De = qe), (Le = !1);
        break;
      }
      fe.set(qe, Vt);
    }
    if (Le)
      for (
        var hi = F ? 3 : 1,
          Pi = function (Bt) {
            var ei = Y.find(function (Li) {
              var it = fe.get(Li);
              if (it)
                return it.slice(0, Bt).every(function (ii) {
                  return ii;
                });
            });
            if (ei) return (De = ei), "break";
          },
          Zt = hi;
        Zt > 0;
        Zt--
      ) {
        var Re = Pi(Zt);
        if (Re === "break") break;
      }
    e.placement !== De &&
      ((e.modifiersData[r]._skip = !0), (e.placement = De), (e.reset = !0));
  }
}
var A6 = {
  name: "flip",
  enabled: !0,
  phase: "main",
  fn: mI,
  requiresIfExists: ["offset"],
  data: { _skip: !1 },
};
function I6(i, e, t) {
  return (
    t === void 0 && (t = { x: 0, y: 0 }),
    {
      top: i.top - e.height - t.y,
      right: i.right - e.width + t.x,
      bottom: i.bottom - e.height + t.y,
      left: i.left - e.width - t.x,
    }
  );
}
function P6(i) {
  return [gn, Un, Wn, En].some(function (e) {
    return i[e] >= 0;
  });
}
function gI(i) {
  var e = i.state,
    t = i.name,
    r = e.rects.reference,
    o = e.rects.popper,
    n = e.modifiersData.preventOverflow,
    u = la(e, { elementContext: "reference" }),
    h = la(e, { altBoundary: !0 }),
    m = I6(u, r),
    b = I6(h, o, n),
    _ = P6(m),
    S = P6(b);
  (e.modifiersData[t] = {
    referenceClippingOffsets: m,
    popperEscapeOffsets: b,
    isReferenceHidden: _,
    hasPopperEscaped: S,
  }),
    (e.attributes.popper = Object.assign({}, e.attributes.popper, {
      "data-popper-reference-hidden": _,
      "data-popper-escaped": S,
    }));
}
var D6 = {
  name: "hide",
  enabled: !0,
  phase: "main",
  requiresIfExists: ["preventOverflow"],
  fn: gI,
};
function yI(i, e, t) {
  var r = so(i),
    o = [En, gn].indexOf(r) >= 0 ? -1 : 1,
    n = typeof t == "function" ? t(Object.assign({}, e, { placement: i })) : t,
    u = n[0],
    h = n[1];
  return (
    (u = u || 0),
    (h = (h || 0) * o),
    [En, Un].indexOf(r) >= 0 ? { x: h, y: u } : { x: u, y: h }
  );
}
function bI(i) {
  var e = i.state,
    t = i.options,
    r = i.name,
    o = t.offset,
    n = o === void 0 ? [0, 0] : o,
    u = gm.reduce(function (_, S) {
      return (_[S] = yI(S, e.rects, n)), _;
    }, {}),
    h = u[e.placement],
    m = h.x,
    b = h.y;
  e.modifiersData.popperOffsets != null &&
    ((e.modifiersData.popperOffsets.x += m),
    (e.modifiersData.popperOffsets.y += b)),
    (e.modifiersData[r] = u);
}
var L6 = {
  name: "offset",
  enabled: !0,
  phase: "main",
  requires: ["popperOffsets"],
  fn: bI,
};
function vI(i) {
  var e = i.state,
    t = i.name;
  e.modifiersData[t] = Tp({
    reference: e.rects.reference,
    element: e.rects.popper,
    strategy: "absolute",
    placement: e.placement,
  });
}
var F6 = {
  name: "popperOffsets",
  enabled: !0,
  phase: "read",
  fn: vI,
  data: {},
};
function sy(i) {
  return i === "x" ? "y" : "x";
}
function _I(i) {
  var e = i.state,
    t = i.options,
    r = i.name,
    o = t.mainAxis,
    n = o === void 0 ? !0 : o,
    u = t.altAxis,
    h = u === void 0 ? !1 : u,
    m = t.boundary,
    b = t.rootBoundary,
    _ = t.altBoundary,
    S = t.padding,
    T = t.tether,
    D = T === void 0 ? !0 : T,
    F = t.tetherOffset,
    q = F === void 0 ? 0 : F,
    Q = la(e, { boundary: m, rootBoundary: b, padding: S, altBoundary: _ }),
    te = so(e.placement),
    ce = Hs(e.placement),
    be = !ce,
    Y = tu(te),
    Ie = sy(Y),
    Te = e.modifiersData.popperOffsets,
    fe = e.rects.reference,
    Le = e.rects.popper,
    De =
      typeof q == "function"
        ? q(Object.assign({}, e.rects, { placement: e.placement }))
        : q,
    st =
      typeof De == "number"
        ? { mainAxis: De, altAxis: De }
        : Object.assign({ mainAxis: 0, altAxis: 0 }, De),
    qe = e.modifiersData.offset ? e.modifiersData.offset[e.placement] : null,
    zt = { x: 0, y: 0 };
  if (Te) {
    if (n) {
      var Rt,
        Gt = Y === "y" ? gn : En,
        qt = Y === "y" ? Wn : Un,
        ct = Y === "y" ? "height" : "width",
        vt = Te[Y],
        ht = vt + Q[Gt],
        Vt = vt - Q[qt],
        hi = D ? -Le[ct] / 2 : 0,
        Pi = ce === sl ? fe[ct] : Le[ct],
        Zt = ce === sl ? -Le[ct] : -fe[ct],
        Re = e.elements.arrow,
        Ce = D && Re ? eu(Re) : { width: 0, height: 0 },
        Bt = e.modifiersData["arrow#persistent"]
          ? e.modifiersData["arrow#persistent"].padding
          : Sp(),
        ei = Bt[Gt],
        Li = Bt[qt],
        it = iu(0, fe[ct], Ce[ct]),
        ii = be
          ? fe[ct] / 2 - hi - it - ei - st.mainAxis
          : Pi - it - ei - st.mainAxis,
        wi = be
          ? -fe[ct] / 2 + hi + it + Li + st.mainAxis
          : Zt + it + Li + st.mainAxis,
        sr = e.elements.arrow && aa(e.elements.arrow),
        Wr = sr ? (Y === "y" ? sr.clientTop || 0 : sr.clientLeft || 0) : 0,
        pt = (Rt = qe?.[Y]) != null ? Rt : 0,
        Ai = vt + ii - pt - Wr,
        je = vt + wi - pt,
        Si = iu(D ? Yc(ht, Ai) : ht, vt, D ? sa(Vt, je) : Vt);
      (Te[Y] = Si), (zt[Y] = Si - vt);
    }
    if (h) {
      var gi,
        ui = Y === "x" ? gn : En,
        pr = Y === "x" ? Wn : Un,
        Er = Te[Ie],
        en = Ie === "y" ? "height" : "width",
        tn = Er + Q[ui],
        yn = Er - Q[pr],
        Vn = [gn, En].indexOf(te) !== -1,
        An = (gi = qe?.[Ie]) != null ? gi : 0,
        Zr = Vn ? tn : Er - fe[en] - Le[en] - An + st.altAxis,
        at = Vn ? Er + fe[en] + Le[en] - An - st.altAxis : yn,
        Pr = D && Vn ? k6(Zr, Er, at) : iu(D ? Zr : tn, Er, D ? at : yn);
      (Te[Ie] = Pr), (zt[Ie] = Pr - Er);
    }
    e.modifiersData[r] = zt;
  }
}
var z6 = {
  name: "preventOverflow",
  enabled: !0,
  phase: "main",
  fn: _I,
  requiresIfExists: ["offset"],
};
function ay(i) {
  return { scrollLeft: i.scrollLeft, scrollTop: i.scrollTop };
}
function ly(i) {
  return i === Yr(i) || !Zn(i) ? ru(i) : ay(i);
}
function xI(i) {
  var e = i.getBoundingClientRect(),
    t = al(e.width) / i.offsetWidth || 1,
    r = al(e.height) / i.offsetHeight || 1;
  return t !== 1 || r !== 1;
}
function cy(i, e, t) {
  t === void 0 && (t = !1);
  var r = Zn(e),
    o = Zn(e) && xI(e),
    n = xo(e),
    u = js(i, o, t),
    h = { scrollLeft: 0, scrollTop: 0 },
    m = { x: 0, y: 0 };
  return (
    (r || (!r && !t)) &&
      ((oo(e) !== "body" || ou(n)) && (h = ly(e)),
      Zn(e)
        ? ((m = js(e, !0)), (m.x += e.clientLeft), (m.y += e.clientTop))
        : n && (m.x = nu(n))),
    {
      x: u.left + h.scrollLeft - m.x,
      y: u.top + h.scrollTop - m.y,
      width: u.width,
      height: u.height,
    }
  );
}
function wI(i) {
  var e = new Map(),
    t = new Set(),
    r = [];
  i.forEach(function (n) {
    e.set(n.name, n);
  });
  function o(n) {
    t.add(n.name);
    var u = [].concat(n.requires || [], n.requiresIfExists || []);
    u.forEach(function (h) {
      if (!t.has(h)) {
        var m = e.get(h);
        m && o(m);
      }
    }),
      r.push(n);
  }
  return (
    i.forEach(function (n) {
      t.has(n.name) || o(n);
    }),
    r
  );
}
function uy(i) {
  var e = wI(i);
  return x6.reduce(function (t, r) {
    return t.concat(
      e.filter(function (o) {
        return o.phase === r;
      })
    );
  }, []);
}
function dy(i) {
  var e;
  return function () {
    return (
      e ||
        (e = new Promise(function (t) {
          Promise.resolve().then(function () {
            (e = void 0), t(i());
          });
        })),
      e
    );
  };
}
function hy(i) {
  var e = i.reduce(function (t, r) {
    var o = t[r.name];
    return (
      (t[r.name] = o
        ? Object.assign({}, o, r, {
            options: Object.assign({}, o.options, r.options),
            data: Object.assign({}, o.data, r.data),
          })
        : r),
      t
    );
  }, {});
  return Object.keys(e).map(function (t) {
    return e[t];
  });
}
var N6 = { placement: "bottom", modifiers: [], strategy: "absolute" };
function O6() {
  for (var i = arguments.length, e = new Array(i), t = 0; t < i; t++)
    e[t] = arguments[t];
  return !e.some(function (r) {
    return !(r && typeof r.getBoundingClientRect == "function");
  });
}
function B6(i) {
  i === void 0 && (i = {});
  var e = i,
    t = e.defaultModifiers,
    r = t === void 0 ? [] : t,
    o = e.defaultOptions,
    n = o === void 0 ? N6 : o;
  return function (h, m, b) {
    b === void 0 && (b = n);
    var _ = {
        placement: "bottom",
        orderedModifiers: [],
        options: Object.assign({}, N6, n),
        modifiersData: {},
        elements: { reference: h, popper: m },
        attributes: {},
        styles: {},
      },
      S = [],
      T = !1,
      D = {
        state: _,
        setOptions: function (te) {
          var ce = typeof te == "function" ? te(_.options) : te;
          q(),
            (_.options = Object.assign({}, n, _.options, ce)),
            (_.scrollParents = {
              reference: Vs(h)
                ? sc(h)
                : h.contextElement
                ? sc(h.contextElement)
                : [],
              popper: sc(m),
            });
          var be = uy(hy([].concat(r, _.options.modifiers)));
          return (
            (_.orderedModifiers = be.filter(function (Y) {
              return Y.enabled;
            })),
            F(),
            D.update()
          );
        },
        forceUpdate: function () {
          if (!T) {
            var te = _.elements,
              ce = te.reference,
              be = te.popper;
            if (O6(ce, be)) {
              (_.rects = {
                reference: cy(ce, aa(be), _.options.strategy === "fixed"),
                popper: eu(be),
              }),
                (_.reset = !1),
                (_.placement = _.options.placement),
                _.orderedModifiers.forEach(function (st) {
                  return (_.modifiersData[st.name] = Object.assign(
                    {},
                    st.data
                  ));
                });
              for (var Y = 0; Y < _.orderedModifiers.length; Y++) {
                if (_.reset === !0) {
                  (_.reset = !1), (Y = -1);
                  continue;
                }
                var Ie = _.orderedModifiers[Y],
                  Te = Ie.fn,
                  fe = Ie.options,
                  Le = fe === void 0 ? {} : fe,
                  De = Ie.name;
                typeof Te == "function" &&
                  (_ =
                    Te({ state: _, options: Le, name: De, instance: D }) || _);
              }
            }
          }
        },
        update: dy(function () {
          return new Promise(function (Q) {
            D.forceUpdate(), Q(_);
          });
        }),
        destroy: function () {
          q(), (T = !0);
        },
      };
    if (!O6(h, m)) return D;
    D.setOptions(b).then(function (Q) {
      !T && b.onFirstUpdate && b.onFirstUpdate(Q);
    });
    function F() {
      _.orderedModifiers.forEach(function (Q) {
        var te = Q.name,
          ce = Q.options,
          be = ce === void 0 ? {} : ce,
          Y = Q.effect;
        if (typeof Y == "function") {
          var Ie = Y({ state: _, name: te, instance: D, options: be }),
            Te = function () {};
          S.push(Ie || Te);
        }
      });
    }
    function q() {
      S.forEach(function (Q) {
        return Q();
      }),
        (S = []);
    }
    return D;
  };
}
var kI = [T6, F6, E6, xp, L6, A6, z6, S6, D6],
  py = B6({ defaultModifiers: kI });
var SI = "tippy-box",
  W6 = "tippy-content",
  CI = "tippy-backdrop",
  Z6 = "tippy-arrow",
  K6 = "tippy-svg-arrow",
  su = { passive: !0, capture: !0 },
  J6 = function () {
    return document.body;
  };
function fy(i, e, t) {
  if (Array.isArray(i)) {
    var r = i[e];
    return r ?? (Array.isArray(t) ? t[e] : t);
  }
  return i;
}
function _y(i, e) {
  var t = {}.toString.call(i);
  return t.indexOf("[object") === 0 && t.indexOf(e + "]") > -1;
}
function X6(i, e) {
  return typeof i == "function" ? i.apply(void 0, e) : i;
}
function R6(i, e) {
  if (e === 0) return i;
  var t;
  return function (r) {
    clearTimeout(t),
      (t = setTimeout(function () {
        i(r);
      }, e));
  };
}
function EI(i) {
  return i.split(/\s+/).filter(Boolean);
}
function bd(i) {
  return [].concat(i);
}
function U6(i, e) {
  i.indexOf(e) === -1 && i.push(e);
}
function TI(i) {
  return i.filter(function (e, t) {
    return i.indexOf(e) === t;
  });
}
function MI(i) {
  return i.split("-")[0];
}
function xm(i) {
  return [].slice.call(i);
}
function V6(i) {
  return Object.keys(i).reduce(function (e, t) {
    return i[t] !== void 0 && (e[t] = i[t]), e;
  }, {});
}
function Mp() {
  return document.createElement("div");
}
function wm(i) {
  return ["Element", "Fragment"].some(function (e) {
    return _y(i, e);
  });
}
function AI(i) {
  return _y(i, "NodeList");
}
function II(i) {
  return _y(i, "MouseEvent");
}
function PI(i) {
  return !!(i && i._tippy && i._tippy.reference === i);
}
function DI(i) {
  return wm(i)
    ? [i]
    : AI(i)
    ? xm(i)
    : Array.isArray(i)
    ? i
    : xm(document.querySelectorAll(i));
}
function my(i, e) {
  i.forEach(function (t) {
    t && (t.style.transitionDuration = e + "ms");
  });
}
function j6(i, e) {
  i.forEach(function (t) {
    t && t.setAttribute("data-state", e);
  });
}
function LI(i) {
  var e,
    t = bd(i),
    r = t[0];
  return r != null && (e = r.ownerDocument) != null && e.body
    ? r.ownerDocument
    : document;
}
function FI(i, e) {
  var t = e.clientX,
    r = e.clientY;
  return i.every(function (o) {
    var n = o.popperRect,
      u = o.popperState,
      h = o.props,
      m = h.interactiveBorder,
      b = MI(u.placement),
      _ = u.modifiersData.offset;
    if (!_) return !0;
    var S = b === "bottom" ? _.top.y : 0,
      T = b === "top" ? _.bottom.y : 0,
      D = b === "right" ? _.left.x : 0,
      F = b === "left" ? _.right.x : 0,
      q = n.top - r + S > m,
      Q = r - n.bottom - T > m,
      te = n.left - t + D > m,
      ce = t - n.right - F > m;
    return q || Q || te || ce;
  });
}
function gy(i, e, t) {
  var r = e + "EventListener";
  ["transitionend", "webkitTransitionEnd"].forEach(function (o) {
    i[r](o, t);
  });
}
function H6(i, e) {
  for (var t = e; t; ) {
    var r;
    if (i.contains(t)) return !0;
    t =
      t.getRootNode == null || (r = t.getRootNode()) == null ? void 0 : r.host;
  }
  return !1;
}
var Aa = { isTouch: !1 },
  q6 = 0;
function zI() {
  Aa.isTouch ||
    ((Aa.isTouch = !0),
    window.performance && document.addEventListener("mousemove", Y6));
}
function Y6() {
  var i = performance.now();
  i - q6 < 20 &&
    ((Aa.isTouch = !1), document.removeEventListener("mousemove", Y6)),
    (q6 = i);
}
function NI() {
  var i = document.activeElement;
  if (PI(i)) {
    var e = i._tippy;
    i.blur && !e.state.isVisible && i.blur();
  }
}
function OI() {
  document.addEventListener("touchstart", zI, su),
    window.addEventListener("blur", NI);
}
var BI = typeof window < "u" && typeof document < "u",
  RI = BI ? !!window.msCrypto : !1;
var UI = {
    animateFill: !1,
    followCursor: !1,
    inlinePositioning: !1,
    sticky: !1,
  },
  VI = {
    allowHTML: !1,
    animation: "fade",
    arrow: !0,
    content: "",
    inertia: !1,
    maxWidth: 350,
    role: "tooltip",
    theme: "",
    zIndex: 9999,
  },
  ca = Object.assign(
    {
      appendTo: J6,
      aria: { content: "auto", expanded: "auto" },
      delay: 0,
      duration: [300, 250],
      getReferenceClientRect: null,
      hideOnClick: !0,
      ignoreAttributes: !1,
      interactive: !1,
      interactiveBorder: 2,
      interactiveDebounce: 0,
      moveTransition: "",
      offset: [0, 10],
      onAfterUpdate: function () {},
      onBeforeUpdate: function () {},
      onCreate: function () {},
      onDestroy: function () {},
      onHidden: function () {},
      onHide: function () {},
      onMount: function () {},
      onShow: function () {},
      onShown: function () {},
      onTrigger: function () {},
      onUntrigger: function () {},
      onClickOutside: function () {},
      placement: "top",
      plugins: [],
      popperOptions: {},
      render: null,
      showOnCreate: !1,
      touch: !0,
      trigger: "mouseenter focus",
      triggerTarget: null,
    },
    UI,
    VI
  ),
  jI = Object.keys(ca),
  HI = function (e) {
    var t = Object.keys(e);
    t.forEach(function (r) {
      ca[r] = e[r];
    });
  };
function e9(i) {
  var e = i.plugins || [],
    t = e.reduce(function (r, o) {
      var n = o.name,
        u = o.defaultValue;
      if (n) {
        var h;
        r[n] = i[n] !== void 0 ? i[n] : (h = ca[n]) != null ? h : u;
      }
      return r;
    }, {});
  return Object.assign({}, i, t);
}
function qI(i, e) {
  var t = e ? Object.keys(e9(Object.assign({}, ca, { plugins: e }))) : jI,
    r = t.reduce(function (o, n) {
      var u = (i.getAttribute("data-tippy-" + n) || "").trim();
      if (!u) return o;
      if (n === "content") o[n] = u;
      else
        try {
          o[n] = JSON.parse(u);
        } catch {
          o[n] = u;
        }
      return o;
    }, {});
  return r;
}
function $6(i, e) {
  var t = Object.assign(
    {},
    e,
    { content: X6(e.content, [i]) },
    e.ignoreAttributes ? {} : qI(i, e.plugins)
  );
  return (
    (t.aria = Object.assign({}, ca.aria, t.aria)),
    (t.aria = {
      expanded: t.aria.expanded === "auto" ? e.interactive : t.aria.expanded,
      content:
        t.aria.content === "auto"
          ? e.interactive
            ? null
            : "describedby"
          : t.aria.content,
    }),
    t
  );
}
var $I = function () {
  return "innerHTML";
};
function by(i, e) {
  i[$I()] = e;
}
function Q6(i) {
  var e = Mp();
  return (
    i === !0
      ? (e.className = Z6)
      : ((e.className = K6), wm(i) ? e.appendChild(i) : by(e, i)),
    e
  );
}
function G6(i, e) {
  wm(e.content)
    ? (by(i, ""), i.appendChild(e.content))
    : typeof e.content != "function" &&
      (e.allowHTML ? by(i, e.content) : (i.textContent = e.content));
}
function vy(i) {
  var e = i.firstElementChild,
    t = xm(e.children);
  return {
    box: e,
    content: t.find(function (r) {
      return r.classList.contains(W6);
    }),
    arrow: t.find(function (r) {
      return r.classList.contains(Z6) || r.classList.contains(K6);
    }),
    backdrop: t.find(function (r) {
      return r.classList.contains(CI);
    }),
  };
}
function t9(i) {
  var e = Mp(),
    t = Mp();
  (t.className = SI),
    t.setAttribute("data-state", "hidden"),
    t.setAttribute("tabindex", "-1");
  var r = Mp();
  (r.className = W6),
    r.setAttribute("data-state", "hidden"),
    G6(r, i.props),
    e.appendChild(t),
    t.appendChild(r),
    o(i.props, i.props);
  function o(n, u) {
    var h = vy(e),
      m = h.box,
      b = h.content,
      _ = h.arrow;
    u.theme
      ? m.setAttribute("data-theme", u.theme)
      : m.removeAttribute("data-theme"),
      typeof u.animation == "string"
        ? m.setAttribute("data-animation", u.animation)
        : m.removeAttribute("data-animation"),
      u.inertia
        ? m.setAttribute("data-inertia", "")
        : m.removeAttribute("data-inertia"),
      (m.style.maxWidth =
        typeof u.maxWidth == "number" ? u.maxWidth + "px" : u.maxWidth),
      u.role ? m.setAttribute("role", u.role) : m.removeAttribute("role"),
      (n.content !== u.content || n.allowHTML !== u.allowHTML) &&
        G6(b, i.props),
      u.arrow
        ? _
          ? n.arrow !== u.arrow &&
            (m.removeChild(_), m.appendChild(Q6(u.arrow)))
          : m.appendChild(Q6(u.arrow))
        : _ && m.removeChild(_);
  }
  return { popper: e, onUpdate: o };
}
t9.$$tippy = !0;
var QI = 1,
  _m = [],
  yy = [];
function GI(i, e) {
  var t = $6(i, Object.assign({}, ca, e9(V6(e)))),
    r,
    o,
    n,
    u = !1,
    h = !1,
    m = !1,
    b = !1,
    _,
    S,
    T,
    D = [],
    F = R6(Ai, t.interactiveDebounce),
    q,
    Q = QI++,
    te = null,
    ce = TI(t.plugins),
    be = {
      isEnabled: !0,
      isVisible: !1,
      isDestroyed: !1,
      isMounted: !1,
      isShown: !1,
    },
    Y = {
      id: Q,
      reference: i,
      popper: Mp(),
      popperInstance: te,
      props: t,
      state: be,
      plugins: ce,
      clearDelayTimeouts: Zr,
      setProps: at,
      setContent: Pr,
      show: Dr,
      hide: Kn,
      hideWithInteractivity: ko,
      enable: Vn,
      disable: An,
      unmount: ft,
      destroy: Tt,
    };
  if (!t.render) return Y;
  var Ie = t.render(Y),
    Te = Ie.popper,
    fe = Ie.onUpdate;
  Te.setAttribute("data-tippy-root", ""),
    (Te.id = "tippy-" + Y.id),
    (Y.popper = Te),
    (i._tippy = Y),
    (Te._tippy = Y);
  var Le = ce.map(function (Fe) {
      return Fe.fn(Y);
    }),
    De = i.hasAttribute("aria-expanded");
  return (
    sr(),
    hi(),
    vt(),
    ht("onCreate", [Y]),
    t.showOnCreate && tn(),
    Te.addEventListener("mouseenter", function () {
      Y.props.interactive && Y.state.isVisible && Y.clearDelayTimeouts();
    }),
    Te.addEventListener("mouseleave", function () {
      Y.props.interactive &&
        Y.props.trigger.indexOf("mouseenter") >= 0 &&
        Gt().addEventListener("mousemove", F);
    }),
    Y
  );
  function st() {
    var Fe = Y.props.touch;
    return Array.isArray(Fe) ? Fe : [Fe, 0];
  }
  function qe() {
    return st()[0] === "hold";
  }
  function zt() {
    var Fe;
    return !!((Fe = Y.props.render) != null && Fe.$$tippy);
  }
  function Rt() {
    return q || i;
  }
  function Gt() {
    var Fe = Rt().parentNode;
    return Fe ? LI(Fe) : document;
  }
  function qt() {
    return vy(Te);
  }
  function ct(Fe) {
    return (Y.state.isMounted && !Y.state.isVisible) ||
      Aa.isTouch ||
      (_ && _.type === "focus")
      ? 0
      : fy(Y.props.delay, Fe ? 0 : 1, ca.delay);
  }
  function vt(Fe) {
    Fe === void 0 && (Fe = !1),
      (Te.style.pointerEvents = Y.props.interactive && !Fe ? "" : "none"),
      (Te.style.zIndex = "" + Y.props.zIndex);
  }
  function ht(Fe, At, $t) {
    if (
      ($t === void 0 && ($t = !0),
      Le.forEach(function (yi) {
        yi[Fe] && yi[Fe].apply(yi, At);
      }),
      $t)
    ) {
      var Pt;
      (Pt = Y.props)[Fe].apply(Pt, At);
    }
  }
  function Vt() {
    var Fe = Y.props.aria;
    if (Fe.content) {
      var At = "aria-" + Fe.content,
        $t = Te.id,
        Pt = bd(Y.props.triggerTarget || i);
      Pt.forEach(function (yi) {
        var Fi = yi.getAttribute(At);
        if (Y.state.isVisible) yi.setAttribute(At, Fi ? Fi + " " + $t : $t);
        else {
          var re = Fi && Fi.replace($t, "").trim();
          re ? yi.setAttribute(At, re) : yi.removeAttribute(At);
        }
      });
    }
  }
  function hi() {
    if (!(De || !Y.props.aria.expanded)) {
      var Fe = bd(Y.props.triggerTarget || i);
      Fe.forEach(function (At) {
        Y.props.interactive
          ? At.setAttribute(
              "aria-expanded",
              Y.state.isVisible && At === Rt() ? "true" : "false"
            )
          : At.removeAttribute("aria-expanded");
      });
    }
  }
  function Pi() {
    Gt().removeEventListener("mousemove", F),
      (_m = _m.filter(function (Fe) {
        return Fe !== F;
      }));
  }
  function Zt(Fe) {
    if (!(Aa.isTouch && (m || Fe.type === "mousedown"))) {
      var At = (Fe.composedPath && Fe.composedPath()[0]) || Fe.target;
      if (!(Y.props.interactive && H6(Te, At))) {
        if (
          bd(Y.props.triggerTarget || i).some(function ($t) {
            return H6($t, At);
          })
        ) {
          if (
            Aa.isTouch ||
            (Y.state.isVisible && Y.props.trigger.indexOf("click") >= 0)
          )
            return;
        } else ht("onClickOutside", [Y, Fe]);
        Y.props.hideOnClick === !0 &&
          (Y.clearDelayTimeouts(),
          Y.hide(),
          (h = !0),
          setTimeout(function () {
            h = !1;
          }),
          Y.state.isMounted || ei());
      }
    }
  }
  function Re() {
    m = !0;
  }
  function Ce() {
    m = !1;
  }
  function Bt() {
    var Fe = Gt();
    Fe.addEventListener("mousedown", Zt, !0),
      Fe.addEventListener("touchend", Zt, su),
      Fe.addEventListener("touchstart", Ce, su),
      Fe.addEventListener("touchmove", Re, su);
  }
  function ei() {
    var Fe = Gt();
    Fe.removeEventListener("mousedown", Zt, !0),
      Fe.removeEventListener("touchend", Zt, su),
      Fe.removeEventListener("touchstart", Ce, su),
      Fe.removeEventListener("touchmove", Re, su);
  }
  function Li(Fe, At) {
    ii(Fe, function () {
      !Y.state.isVisible && Te.parentNode && Te.parentNode.contains(Te) && At();
    });
  }
  function it(Fe, At) {
    ii(Fe, At);
  }
  function ii(Fe, At) {
    var $t = qt().box;
    function Pt(yi) {
      yi.target === $t && (gy($t, "remove", Pt), At());
    }
    if (Fe === 0) return At();
    gy($t, "remove", S), gy($t, "add", Pt), (S = Pt);
  }
  function wi(Fe, At, $t) {
    $t === void 0 && ($t = !1);
    var Pt = bd(Y.props.triggerTarget || i);
    Pt.forEach(function (yi) {
      yi.addEventListener(Fe, At, $t),
        D.push({ node: yi, eventType: Fe, handler: At, options: $t });
    });
  }
  function sr() {
    qe() &&
      (wi("touchstart", pt, { passive: !0 }),
      wi("touchend", je, { passive: !0 })),
      EI(Y.props.trigger).forEach(function (Fe) {
        if (Fe !== "manual")
          switch ((wi(Fe, pt), Fe)) {
            case "mouseenter":
              wi("mouseleave", je);
              break;
            case "focus":
              wi(RI ? "focusout" : "blur", Si);
              break;
            case "focusin":
              wi("focusout", Si);
              break;
          }
      });
  }
  function Wr() {
    D.forEach(function (Fe) {
      var At = Fe.node,
        $t = Fe.eventType,
        Pt = Fe.handler,
        yi = Fe.options;
      At.removeEventListener($t, Pt, yi);
    }),
      (D = []);
  }
  function pt(Fe) {
    var At,
      $t = !1;
    if (!(!Y.state.isEnabled || gi(Fe) || h)) {
      var Pt = ((At = _) == null ? void 0 : At.type) === "focus";
      (_ = Fe),
        (q = Fe.currentTarget),
        hi(),
        !Y.state.isVisible &&
          II(Fe) &&
          _m.forEach(function (yi) {
            return yi(Fe);
          }),
        Fe.type === "click" &&
        (Y.props.trigger.indexOf("mouseenter") < 0 || u) &&
        Y.props.hideOnClick !== !1 &&
        Y.state.isVisible
          ? ($t = !0)
          : tn(Fe),
        Fe.type === "click" && (u = !$t),
        $t && !Pt && yn(Fe);
    }
  }
  function Ai(Fe) {
    var At = Fe.target,
      $t = Rt().contains(At) || Te.contains(At);
    if (!(Fe.type === "mousemove" && $t)) {
      var Pt = en()
        .concat(Te)
        .map(function (yi) {
          var Fi,
            re = yi._tippy,
            V = (Fi = re.popperInstance) == null ? void 0 : Fi.state;
          return V
            ? {
                popperRect: yi.getBoundingClientRect(),
                popperState: V,
                props: t,
              }
            : null;
        })
        .filter(Boolean);
      FI(Pt, Fe) && (Pi(), yn(Fe));
    }
  }
  function je(Fe) {
    var At = gi(Fe) || (Y.props.trigger.indexOf("click") >= 0 && u);
    if (!At) {
      if (Y.props.interactive) {
        Y.hideWithInteractivity(Fe);
        return;
      }
      yn(Fe);
    }
  }
  function Si(Fe) {
    (Y.props.trigger.indexOf("focusin") < 0 && Fe.target !== Rt()) ||
      (Y.props.interactive &&
        Fe.relatedTarget &&
        Te.contains(Fe.relatedTarget)) ||
      yn(Fe);
  }
  function gi(Fe) {
    return Aa.isTouch ? qe() !== Fe.type.indexOf("touch") >= 0 : !1;
  }
  function ui() {
    pr();
    var Fe = Y.props,
      At = Fe.popperOptions,
      $t = Fe.placement,
      Pt = Fe.offset,
      yi = Fe.getReferenceClientRect,
      Fi = Fe.moveTransition,
      re = zt() ? vy(Te).arrow : null,
      V = yi
        ? {
            getBoundingClientRect: yi,
            contextElement: yi.contextElement || Rt(),
          }
        : i,
      H = {
        name: "$$tippy",
        enabled: !0,
        phase: "beforeWrite",
        requires: ["computeStyles"],
        fn: function (ve) {
          var xe = ve.state;
          if (zt()) {
            var ke = qt(),
              me = ke.box;
            ["placement", "reference-hidden", "escaped"].forEach(function (we) {
              we === "placement"
                ? me.setAttribute("data-placement", xe.placement)
                : xe.attributes.popper["data-popper-" + we]
                ? me.setAttribute("data-" + we, "")
                : me.removeAttribute("data-" + we);
            }),
              (xe.attributes.popper = {});
          }
        },
      },
      $ = [
        { name: "offset", options: { offset: Pt } },
        {
          name: "preventOverflow",
          options: { padding: { top: 2, bottom: 2, left: 5, right: 5 } },
        },
        { name: "flip", options: { padding: 5 } },
        { name: "computeStyles", options: { adaptive: !Fi } },
        H,
      ];
    zt() &&
      re &&
      $.push({ name: "arrow", options: { element: re, padding: 3 } }),
      $.push.apply($, At?.modifiers || []),
      (Y.popperInstance = py(
        V,
        Te,
        Object.assign({}, At, { placement: $t, onFirstUpdate: T, modifiers: $ })
      ));
  }
  function pr() {
    Y.popperInstance && (Y.popperInstance.destroy(), (Y.popperInstance = null));
  }
  function Er() {
    var Fe = Y.props.appendTo,
      At,
      $t = Rt();
    (Y.props.interactive && Fe === J6) || Fe === "parent"
      ? (At = $t.parentNode)
      : (At = X6(Fe, [$t])),
      At.contains(Te) || At.appendChild(Te),
      (Y.state.isMounted = !0),
      ui();
  }
  function en() {
    return xm(Te.querySelectorAll("[data-tippy-root]"));
  }
  function tn(Fe) {
    Y.clearDelayTimeouts(), Fe && ht("onTrigger", [Y, Fe]), Bt();
    var At = ct(!0),
      $t = st(),
      Pt = $t[0],
      yi = $t[1];
    Aa.isTouch && Pt === "hold" && yi && (At = yi),
      At
        ? (r = setTimeout(function () {
            Y.show();
          }, At))
        : Y.show();
  }
  function yn(Fe) {
    if (
      (Y.clearDelayTimeouts(), ht("onUntrigger", [Y, Fe]), !Y.state.isVisible)
    ) {
      ei();
      return;
    }
    if (
      !(
        Y.props.trigger.indexOf("mouseenter") >= 0 &&
        Y.props.trigger.indexOf("click") >= 0 &&
        ["mouseleave", "mousemove"].indexOf(Fe.type) >= 0 &&
        u
      )
    ) {
      var At = ct(!1);
      At
        ? (o = setTimeout(function () {
            Y.state.isVisible && Y.hide();
          }, At))
        : (n = requestAnimationFrame(function () {
            Y.hide();
          }));
    }
  }
  function Vn() {
    Y.state.isEnabled = !0;
  }
  function An() {
    Y.hide(), (Y.state.isEnabled = !1);
  }
  function Zr() {
    clearTimeout(r), clearTimeout(o), cancelAnimationFrame(n);
  }
  function at(Fe) {
    if (!Y.state.isDestroyed) {
      ht("onBeforeUpdate", [Y, Fe]), Wr();
      var At = Y.props,
        $t = $6(i, Object.assign({}, At, V6(Fe), { ignoreAttributes: !0 }));
      (Y.props = $t),
        sr(),
        At.interactiveDebounce !== $t.interactiveDebounce &&
          (Pi(), (F = R6(Ai, $t.interactiveDebounce))),
        At.triggerTarget && !$t.triggerTarget
          ? bd(At.triggerTarget).forEach(function (Pt) {
              Pt.removeAttribute("aria-expanded");
            })
          : $t.triggerTarget && i.removeAttribute("aria-expanded"),
        hi(),
        vt(),
        fe && fe(At, $t),
        Y.popperInstance &&
          (ui(),
          en().forEach(function (Pt) {
            requestAnimationFrame(Pt._tippy.popperInstance.forceUpdate);
          })),
        ht("onAfterUpdate", [Y, Fe]);
    }
  }
  function Pr(Fe) {
    Y.setProps({ content: Fe });
  }
  function Dr() {
    var Fe = Y.state.isVisible,
      At = Y.state.isDestroyed,
      $t = !Y.state.isEnabled,
      Pt = Aa.isTouch && !Y.props.touch,
      yi = fy(Y.props.duration, 0, ca.duration);
    if (
      !(Fe || At || $t || Pt) &&
      !Rt().hasAttribute("disabled") &&
      (ht("onShow", [Y], !1), Y.props.onShow(Y) !== !1)
    ) {
      if (
        ((Y.state.isVisible = !0),
        zt() && (Te.style.visibility = "visible"),
        vt(),
        Bt(),
        Y.state.isMounted || (Te.style.transition = "none"),
        zt())
      ) {
        var Fi = qt(),
          re = Fi.box,
          V = Fi.content;
        my([re, V], 0);
      }
      (T = function () {
        var $;
        if (!(!Y.state.isVisible || b)) {
          if (
            ((b = !0),
            Te.offsetHeight,
            (Te.style.transition = Y.props.moveTransition),
            zt() && Y.props.animation)
          ) {
            var ne = qt(),
              ve = ne.box,
              xe = ne.content;
            my([ve, xe], yi), j6([ve, xe], "visible");
          }
          Vt(),
            hi(),
            U6(yy, Y),
            ($ = Y.popperInstance) == null || $.forceUpdate(),
            ht("onMount", [Y]),
            Y.props.animation &&
              zt() &&
              it(yi, function () {
                (Y.state.isShown = !0), ht("onShown", [Y]);
              });
        }
      }),
        Er();
    }
  }
  function Kn() {
    var Fe = !Y.state.isVisible,
      At = Y.state.isDestroyed,
      $t = !Y.state.isEnabled,
      Pt = fy(Y.props.duration, 1, ca.duration);
    if (
      !(Fe || At || $t) &&
      (ht("onHide", [Y], !1), Y.props.onHide(Y) !== !1)
    ) {
      if (
        ((Y.state.isVisible = !1),
        (Y.state.isShown = !1),
        (b = !1),
        (u = !1),
        zt() && (Te.style.visibility = "hidden"),
        Pi(),
        ei(),
        vt(!0),
        zt())
      ) {
        var yi = qt(),
          Fi = yi.box,
          re = yi.content;
        Y.props.animation && (my([Fi, re], Pt), j6([Fi, re], "hidden"));
      }
      Vt(), hi(), Y.props.animation ? zt() && Li(Pt, Y.unmount) : Y.unmount();
    }
  }
  function ko(Fe) {
    Gt().addEventListener("mousemove", F), U6(_m, F), F(Fe);
  }
  function ft() {
    Y.state.isVisible && Y.hide(),
      Y.state.isMounted &&
        (pr(),
        en().forEach(function (Fe) {
          Fe._tippy.unmount();
        }),
        Te.parentNode && Te.parentNode.removeChild(Te),
        (yy = yy.filter(function (Fe) {
          return Fe !== Y;
        })),
        (Y.state.isMounted = !1),
        ht("onHidden", [Y]));
  }
  function Tt() {
    Y.state.isDestroyed ||
      (Y.clearDelayTimeouts(),
      Y.unmount(),
      Wr(),
      delete i._tippy,
      (Y.state.isDestroyed = !0),
      ht("onDestroy", [Y]));
  }
}
function Ap(i, e) {
  e === void 0 && (e = {});
  var t = ca.plugins.concat(e.plugins || []);
  OI();
  var r = Object.assign({}, e, { plugins: t }),
    o = DI(i);
  if (0) var n, u;
  var h = o.reduce(function (m, b) {
    var _ = b && GI(b, r);
    return _ && m.push(_), m;
  }, []);
  return wm(i) ? h[0] : h;
}
Ap.defaultProps = ca;
Ap.setDefaultProps = HI;
Ap.currentInput = Aa;
var IQ = Object.assign({}, xp, {
  effect: function (e) {
    var t = e.state,
      r = {
        popper: {
          position: t.options.strategy,
          left: "0",
          top: "0",
          margin: "0",
        },
        arrow: { position: "absolute" },
        reference: {},
      };
    Object.assign(t.elements.popper.style, r.popper),
      (t.styles = r),
      t.elements.arrow && Object.assign(t.elements.arrow.style, r.arrow);
  },
});
Ap.setDefaultProps({ render: t9 });
var km = Ap;
var xy = class {
    constructor({
      editor: e,
      element: t,
      view: r,
      tippyOptions: o = {},
      updateDelay: n = 250,
      shouldShow: u,
    }) {
      (this.preventHide = !1),
        (this.shouldShow = ({ view: h, state: m, from: b, to: _ }) => {
          let { doc: S, selection: T } = m,
            { empty: D } = T,
            F = !S.textBetween(b, _).length && om(m.selection),
            q = this.element.contains(document.activeElement);
          return !(!(h.hasFocus() || q) || D || F || !this.editor.isEditable);
        }),
        (this.mousedownHandler = () => {
          this.preventHide = !0;
        }),
        (this.dragstartHandler = () => {
          this.hide();
        }),
        (this.focusHandler = () => {
          setTimeout(() => this.update(this.editor.view));
        }),
        (this.blurHandler = ({ event: h }) => {
          var m;
          if (this.preventHide) {
            this.preventHide = !1;
            return;
          }
          (h?.relatedTarget &&
            !((m = this.element.parentNode) === null || m === void 0) &&
            m.contains(h.relatedTarget)) ||
            this.hide();
        }),
        (this.tippyBlurHandler = (h) => {
          this.blurHandler({ event: h });
        }),
        (this.handleDebouncedUpdate = (h, m) => {
          let b = !m?.selection.eq(h.state.selection),
            _ = !m?.doc.eq(h.state.doc);
          (!b && !_) ||
            (this.updateDebounceTimer && clearTimeout(this.updateDebounceTimer),
            (this.updateDebounceTimer = window.setTimeout(() => {
              this.updateHandler(h, b, _, m);
            }, this.updateDelay)));
        }),
        (this.updateHandler = (h, m, b, _) => {
          var S, T, D;
          let { state: F, composing: q } = h,
            { selection: Q } = F;
          if (q || (!m && !b)) return;
          this.createTooltip();
          let { ranges: ce } = Q,
            be = Math.min(...ce.map((Te) => Te.$from.pos)),
            Y = Math.max(...ce.map((Te) => Te.$to.pos));
          if (
            !((S = this.shouldShow) === null || S === void 0
              ? void 0
              : S.call(this, {
                  editor: this.editor,
                  view: h,
                  state: F,
                  oldState: _,
                  from: be,
                  to: Y,
                }))
          ) {
            this.hide();
            return;
          }
          (T = this.tippy) === null ||
            T === void 0 ||
            T.setProps({
              getReferenceClientRect:
                ((D = this.tippyOptions) === null || D === void 0
                  ? void 0
                  : D.getReferenceClientRect) ||
                (() => {
                  if (Ux(F.selection)) {
                    let Te = h.nodeDOM(be),
                      fe = Te.dataset.nodeViewWrapper
                        ? Te
                        : Te.querySelector("[data-node-view-wrapper]");
                    if ((fe && (Te = fe.firstChild), Te))
                      return Te.getBoundingClientRect();
                  }
                  return lm(h, be, Y);
                }),
            }),
            this.show();
        }),
        (this.editor = e),
        (this.element = t),
        (this.view = r),
        (this.updateDelay = n),
        u && (this.shouldShow = u),
        this.element.addEventListener("mousedown", this.mousedownHandler, {
          capture: !0,
        }),
        this.view.dom.addEventListener("dragstart", this.dragstartHandler),
        this.editor.on("focus", this.focusHandler),
        this.editor.on("blur", this.blurHandler),
        (this.tippyOptions = o),
        this.element.remove(),
        (this.element.style.visibility = "visible");
    }
    createTooltip() {
      let { element: e } = this.editor.options,
        t = !!e.parentElement;
      this.tippy ||
        !t ||
        ((this.tippy = km(e, {
          duration: 0,
          getReferenceClientRect: null,
          content: this.element,
          interactive: !0,
          trigger: "manual",
          placement: "top",
          hideOnClick: "toggle",
          ...this.tippyOptions,
        })),
        this.tippy.popper.firstChild &&
          this.tippy.popper.firstChild.addEventListener(
            "blur",
            this.tippyBlurHandler
          ));
    }
    update(e, t) {
      let { state: r } = e,
        o = r.selection.$from.pos !== r.selection.$to.pos;
      if (this.updateDelay > 0 && o) {
        this.handleDebouncedUpdate(e, t);
        return;
      }
      let n = !t?.selection.eq(e.state.selection),
        u = !t?.doc.eq(e.state.doc);
      this.updateHandler(e, n, u, t);
    }
    show() {
      var e;
      (e = this.tippy) === null || e === void 0 || e.show();
    }
    hide() {
      var e;
      (e = this.tippy) === null || e === void 0 || e.hide();
    }
    destroy() {
      var e, t;
      !((e = this.tippy) === null || e === void 0) &&
        e.popper.firstChild &&
        this.tippy.popper.firstChild.removeEventListener(
          "blur",
          this.tippyBlurHandler
        ),
        (t = this.tippy) === null || t === void 0 || t.destroy(),
        this.element.removeEventListener("mousedown", this.mousedownHandler, {
          capture: !0,
        }),
        this.view.dom.removeEventListener("dragstart", this.dragstartHandler),
        this.editor.off("focus", this.focusHandler),
        this.editor.off("blur", this.blurHandler);
    }
  },
  wy = (i) =>
    new Vr({
      key: typeof i.pluginKey == "string" ? new Gn(i.pluginKey) : i.pluginKey,
      view: (e) => new xy({ view: e, ...i }),
    }),
  zQ = mn.create({
    name: "bubbleMenu",
    addOptions() {
      return {
        element: null,
        tippyOptions: {},
        pluginKey: "bubbleMenu",
        updateDelay: void 0,
        shouldShow: null,
      };
    },
    addProseMirrorPlugins() {
      return this.options.element
        ? [
            wy({
              pluginKey: this.options.pluginKey,
              editor: this.editor,
              element: this.options.element,
              tippyOptions: this.options.tippyOptions,
              updateDelay: this.options.updateDelay,
              shouldShow: this.options.shouldShow,
            }),
          ]
        : [];
    },
  });
function WI(i) {
  let e,
    t,
    r,
    o = i[8].default,
    n = bi(o, i, i[7], null);
  return {
    c() {
      (e = Je("div")),
        n && n.c(),
        J(e, "class", (t = i[1].class)),
        Nn(e, "visibility", "hidden");
    },
    m(u, h) {
      Ne(u, e, h), n && n.m(e, null), i[9](e), (r = !0);
    },
    p(u, [h]) {
      n &&
        n.p &&
        (!r || h & 128) &&
        _i(n, o, u, u[7], r ? vi(o, u[7], h, null) : xi(u[7]), null),
        (!r || (h & 2 && t !== (t = u[1].class))) && J(e, "class", t);
    },
    i(u) {
      r || (Oe(n, u), (r = !0));
    },
    o(u) {
      $e(n, u), (r = !1);
    },
    d(u) {
      u && ze(e), n && n.d(u), i[9](null);
    },
  };
}
function ZI(i, e, t) {
  let { $$slots: r = {}, $$scope: o } = e,
    { editor: n } = e,
    { tippyOptions: u = {} } = e,
    { pluginKey: h = "SvelteTiptapBubbleMenu" } = e,
    { shouldShow: m = null } = e,
    { updateDelay: b = 250 } = e,
    _;
  if (!n) throw new Error("Missing editor instance.");
  Ur(() => {
    let T = wy({
      pluginKey: h,
      editor: n,
      element: _,
      tippyOptions: u,
      shouldShow: m,
      updateDelay: b,
    });
    n.registerPlugin(T);
  }),
    dr(() => {
      n.unregisterPlugin(h);
    });
  function S(T) {
    Bi[T ? "unshift" : "push"](() => {
      (_ = T), t(0, _);
    });
  }
  return (
    (i.$$set = (T) => {
      t(1, (e = Rr(Rr({}, e), zn(T)))),
        "editor" in T && t(2, (n = T.editor)),
        "tippyOptions" in T && t(3, (u = T.tippyOptions)),
        "pluginKey" in T && t(4, (h = T.pluginKey)),
        "shouldShow" in T && t(5, (m = T.shouldShow)),
        "updateDelay" in T && t(6, (b = T.updateDelay)),
        "$$scope" in T && t(7, (o = T.$$scope));
    }),
    (e = zn(e)),
    [_, e, n, u, h, m, b, o, r, S]
  );
}
var ky = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, ZI, WI, ut, {
          editor: 2,
          tippyOptions: 3,
          pluginKey: 4,
          shouldShow: 5,
          updateDelay: 6,
        });
    }
  },
  Sy = ky;
var Cy = class {
    constructor({
      editor: e,
      element: t,
      view: r,
      tippyOptions: o = {},
      shouldShow: n,
    }) {
      (this.preventHide = !1),
        (this.shouldShow = ({ view: u, state: h }) => {
          let { selection: m } = h,
            { $anchor: b, empty: _ } = m,
            S = b.depth === 1,
            T =
              b.parent.isTextblock &&
              !b.parent.type.spec.code &&
              !b.parent.textContent;
          return !(!u.hasFocus() || !_ || !S || !T || !this.editor.isEditable);
        }),
        (this.mousedownHandler = () => {
          this.preventHide = !0;
        }),
        (this.focusHandler = () => {
          setTimeout(() => this.update(this.editor.view));
        }),
        (this.blurHandler = ({ event: u }) => {
          var h;
          if (this.preventHide) {
            this.preventHide = !1;
            return;
          }
          (u?.relatedTarget &&
            !((h = this.element.parentNode) === null || h === void 0) &&
            h.contains(u.relatedTarget)) ||
            this.hide();
        }),
        (this.tippyBlurHandler = (u) => {
          this.blurHandler({ event: u });
        }),
        (this.editor = e),
        (this.element = t),
        (this.view = r),
        n && (this.shouldShow = n),
        this.element.addEventListener("mousedown", this.mousedownHandler, {
          capture: !0,
        }),
        this.editor.on("focus", this.focusHandler),
        this.editor.on("blur", this.blurHandler),
        (this.tippyOptions = o),
        this.element.remove(),
        (this.element.style.visibility = "visible");
    }
    createTooltip() {
      let { element: e } = this.editor.options,
        t = !!e.parentElement;
      this.tippy ||
        !t ||
        ((this.tippy = km(e, {
          duration: 0,
          getReferenceClientRect: null,
          content: this.element,
          interactive: !0,
          trigger: "manual",
          placement: "right",
          hideOnClick: "toggle",
          ...this.tippyOptions,
        })),
        this.tippy.popper.firstChild &&
          this.tippy.popper.firstChild.addEventListener(
            "blur",
            this.tippyBlurHandler
          ));
    }
    update(e, t) {
      var r, o, n;
      let { state: u } = e,
        { doc: h, selection: m } = u,
        { from: b, to: _ } = m;
      if (t && t.doc.eq(h) && t.selection.eq(m)) return;
      if (
        (this.createTooltip(),
        !((r = this.shouldShow) === null || r === void 0
          ? void 0
          : r.call(this, {
              editor: this.editor,
              view: e,
              state: u,
              oldState: t,
            })))
      ) {
        this.hide();
        return;
      }
      (o = this.tippy) === null ||
        o === void 0 ||
        o.setProps({
          getReferenceClientRect:
            ((n = this.tippyOptions) === null || n === void 0
              ? void 0
              : n.getReferenceClientRect) || (() => lm(e, b, _)),
        }),
        this.show();
    }
    show() {
      var e;
      (e = this.tippy) === null || e === void 0 || e.show();
    }
    hide() {
      var e;
      (e = this.tippy) === null || e === void 0 || e.hide();
    }
    destroy() {
      var e, t;
      !((e = this.tippy) === null || e === void 0) &&
        e.popper.firstChild &&
        this.tippy.popper.firstChild.removeEventListener(
          "blur",
          this.tippyBlurHandler
        ),
        (t = this.tippy) === null || t === void 0 || t.destroy(),
        this.element.removeEventListener("mousedown", this.mousedownHandler, {
          capture: !0,
        }),
        this.editor.off("focus", this.focusHandler),
        this.editor.off("blur", this.blurHandler);
    }
  },
  Ey = (i) =>
    new Vr({
      key: typeof i.pluginKey == "string" ? new Gn(i.pluginKey) : i.pluginKey,
      view: (e) => new Cy({ view: e, ...i }),
    }),
  $Q = mn.create({
    name: "floatingMenu",
    addOptions() {
      return {
        element: null,
        tippyOptions: {},
        pluginKey: "floatingMenu",
        shouldShow: null,
      };
    },
    addProseMirrorPlugins() {
      return this.options.element
        ? [
            Ey({
              pluginKey: this.options.pluginKey,
              editor: this.editor,
              element: this.options.element,
              tippyOptions: this.options.tippyOptions,
              shouldShow: this.options.shouldShow,
            }),
          ]
        : [];
    },
  });
function KI(i) {
  let e,
    t,
    r,
    o = i[7].default,
    n = bi(o, i, i[6], null);
  return {
    c() {
      (e = Je("div")),
        n && n.c(),
        J(e, "class", (t = i[1].class)),
        Nn(e, "visibility", "hidden");
    },
    m(u, h) {
      Ne(u, e, h), n && n.m(e, null), i[8](e), (r = !0);
    },
    p(u, [h]) {
      n &&
        n.p &&
        (!r || h & 64) &&
        _i(n, o, u, u[6], r ? vi(o, u[6], h, null) : xi(u[6]), null),
        (!r || (h & 2 && t !== (t = u[1].class))) && J(e, "class", t);
    },
    i(u) {
      r || (Oe(n, u), (r = !0));
    },
    o(u) {
      $e(n, u), (r = !1);
    },
    d(u) {
      u && ze(e), n && n.d(u), i[8](null);
    },
  };
}
function JI(i, e, t) {
  let { $$slots: r = {}, $$scope: o } = e,
    { editor: n } = e,
    { tippyOptions: u = {} } = e,
    { pluginKey: h = "SvelteTiptapFloatingMenu" } = e,
    { shouldShow: m = null } = e,
    b;
  if (!n) throw new Error("Missing editor instance.");
  Ur(() => {
    let S = Ey({
      pluginKey: h,
      editor: n,
      element: b,
      tippyOptions: u,
      shouldShow: m,
    });
    n.registerPlugin(S);
  }),
    dr(() => {
      n.unregisterPlugin(h);
    });
  function _(S) {
    Bi[S ? "unshift" : "push"](() => {
      (b = S), t(0, b);
    });
  }
  return (
    (i.$$set = (S) => {
      t(1, (e = Rr(Rr({}, e), zn(S)))),
        "editor" in S && t(2, (n = S.editor)),
        "tippyOptions" in S && t(3, (u = S.tippyOptions)),
        "pluginKey" in S && t(4, (h = S.pluginKey)),
        "shouldShow" in S && t(5, (m = S.shouldShow)),
        "$$scope" in S && t(6, (o = S.$$scope));
    }),
    (e = zn(e)),
    [b, e, n, u, h, m, o, r, _]
  );
}
var Ty = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, JI, KI, ut, {
          editor: 2,
          tippyOptions: 3,
          pluginKey: 4,
          shouldShow: 5,
        });
    }
  },
  My = Ty;
function XI(i) {
  let e, t, r, o;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        (r = mi("path")),
        (o = mi("path")),
        J(t, "stroke", "none"),
        J(t, "d", "M0 0h24v24H0z"),
        J(t, "fill", "none"),
        J(r, "d", "M7 5h6a3.5 3.5 0 0 1 0 7h-6z"),
        J(o, "d", "M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"),
        J(e, "xmlns", "http://www.w3.org/2000/svg"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "fill", "none"),
        J(e, "stroke", "currentColor"),
        J(e, "stroke-width", "2"),
        J(e, "stroke-linecap", "round"),
        J(e, "stroke-linejoin", "round"),
        J(e, "class", "icon icon-tabler icons-tabler-outline icon-tabler-bold");
    },
    m(n, u) {
      Ne(n, e, u), He(e, t), He(e, r), He(e, o);
    },
    p: yt,
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
var Ay = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, XI, ut, {});
    }
  },
  Iy = Ay;
function YI(i) {
  let e, t, r, o, n;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        (r = mi("path")),
        (o = mi("path")),
        (n = mi("path")),
        J(t, "stroke", "none"),
        J(t, "d", "M0 0h24v24H0z"),
        J(t, "fill", "none"),
        J(r, "d", "M11 5l6 0"),
        J(o, "d", "M7 19l6 0"),
        J(n, "d", "M14 5l-4 14"),
        J(e, "xmlns", "http://www.w3.org/2000/svg"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "fill", "none"),
        J(e, "stroke", "currentColor"),
        J(e, "stroke-width", "2"),
        J(e, "stroke-linecap", "round"),
        J(e, "stroke-linejoin", "round"),
        J(
          e,
          "class",
          "icon icon-tabler icons-tabler-outline icon-tabler-italic"
        );
    },
    m(u, h) {
      Ne(u, e, h), He(e, t), He(e, r), He(e, o), He(e, n);
    },
    p: yt,
    i: yt,
    o: yt,
    d(u) {
      u && ze(e);
    },
  };
}
var Py = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, YI, ut, {});
    }
  },
  Dy = Py;
function i9(i) {
  let e, t, r, o;
  return (
    (e = new Sy({
      props: { editor: i[2], $$slots: { default: [eP] }, $$scope: { ctx: i } },
    })),
    (r = new My({
      props: { editor: i[2], $$slots: { default: [tP] }, $$scope: { ctx: i } },
    })),
    {
      c() {
        Yt(e.$$.fragment), (t = Ot()), Yt(r.$$.fragment);
      },
      m(n, u) {
        Jt(e, n, u), Ne(n, t, u), Jt(r, n, u), (o = !0);
      },
      p(n, u) {
        let h = {};
        u & 4 && (h.editor = n[2]),
          u & 262176 && (h.$$scope = { dirty: u, ctx: n }),
          e.$set(h);
        let m = {};
        u & 4 && (m.editor = n[2]),
          u & 262176 && (m.$$scope = { dirty: u, ctx: n }),
          r.$set(m);
      },
      i(n) {
        o || (Oe(e.$$.fragment, n), Oe(r.$$.fragment, n), (o = !0));
      },
      o(n) {
        $e(e.$$.fragment, n), $e(r.$$.fragment, n), (o = !1);
      },
      d(n) {
        n && ze(t), Xt(e, n), Xt(r, n);
      },
    }
  );
}
function eP(i) {
  let e, t, r, o, n, u, h, m, b, _, S;
  return (
    (r = new Iy({})),
    (h = new Dy({})),
    {
      c() {
        (e = Je("div")),
          (t = Je("button")),
          Yt(r.$$.fragment),
          (n = Ot()),
          (u = Je("button")),
          Yt(h.$$.fragment),
          J(
            t,
            "class",
            (o = ol(
              "border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",
              { "bg-black text-white": i[5]("bold") }
            ))
          ),
          J(t, "type", "button"),
          J(
            u,
            "class",
            (m = ol(
              "border border-black rounded px-2 hover:bg-black hover:text-white",
              { "bg-black text-white": i[5]("italic") }
            ))
          ),
          J(u, "type", "button"),
          J(e, "data-test-id", "bubble-menu"),
          J(e, "class", "flex items-center justify-center");
      },
      m(T, D) {
        Ne(T, e, D),
          He(e, t),
          Jt(r, t, null),
          He(e, n),
          He(e, u),
          Jt(h, u, null),
          (b = !0),
          _ || ((S = [Mt(t, "click", i[7]), Mt(u, "click", i[8])]), (_ = !0));
      },
      p(T, D) {
        (!b ||
          (D & 32 &&
            o !==
              (o = ol(
                "border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",
                { "bg-black text-white": T[5]("bold") }
              )))) &&
          J(t, "class", o),
          (!b ||
            (D & 32 &&
              m !==
                (m = ol(
                  "border border-black rounded px-2 hover:bg-black hover:text-white",
                  { "bg-black text-white": T[5]("italic") }
                )))) &&
            J(u, "class", m);
      },
      i(T) {
        b || (Oe(r.$$.fragment, T), Oe(h.$$.fragment, T), (b = !0));
      },
      o(T) {
        $e(r.$$.fragment, T), $e(h.$$.fragment, T), (b = !1);
      },
      d(T) {
        T && ze(e), Xt(r), Xt(h), (_ = !1), gr(S);
      },
    }
  );
}
function tP(i) {
  let e, t, r, o, n, u, h, m, b, _, S;
  return (
    (r = new Iy({})),
    (h = new Dy({})),
    {
      c() {
        (e = Je("div")),
          (t = Je("button")),
          Yt(r.$$.fragment),
          (n = Ot()),
          (u = Je("button")),
          Yt(h.$$.fragment),
          J(
            t,
            "class",
            (o = ol(
              "border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",
              { "bg-black text-white": i[5]("bold") }
            ))
          ),
          J(t, "type", "button"),
          J(
            u,
            "class",
            (m = ol(
              "border border-black rounded px-2 hover:bg-black hover:text-white",
              { "bg-black text-white": i[5]("italic") }
            ))
          ),
          J(u, "type", "button"),
          J(e, "data-test-id", "floating-menu"),
          J(e, "class", "flex items-center justify-center");
      },
      m(T, D) {
        Ne(T, e, D),
          He(e, t),
          Jt(r, t, null),
          He(e, n),
          He(e, u),
          Jt(h, u, null),
          (b = !0),
          _ || ((S = [Mt(t, "click", i[7]), Mt(u, "click", i[8])]), (_ = !0));
      },
      p(T, D) {
        (!b ||
          (D & 32 &&
            o !==
              (o = ol(
                "border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",
                { "bg-black text-white": T[5]("bold") }
              )))) &&
          J(t, "class", o),
          (!b ||
            (D & 32 &&
              m !==
                (m = ol(
                  "border border-black rounded px-2 hover:bg-black hover:text-white",
                  { "bg-black text-white": T[5]("italic") }
                )))) &&
            J(u, "class", m);
      },
      i(T) {
        b || (Oe(r.$$.fragment, T), Oe(h.$$.fragment, T), (b = !0));
      },
      o(T) {
        $e(r.$$.fragment, T), $e(h.$$.fragment, T), (b = !1);
      },
      d(T) {
        T && ze(e), Xt(r), Xt(h), (_ = !1), gr(S);
      },
    }
  );
}
function iP(i) {
  let e;
  return {
    c() {
      e = Xi("Save");
    },
    m(t, r) {
      Ne(t, e, r);
    },
    d(t) {
      t && ze(e);
    },
  };
}
function rP(i) {
  let e;
  return {
    c() {
      (e = Je("span")),
        (e.innerHTML = `Saving
        <div id="spinner" class="text-white flex justify-center items-center text-xl ml-2 m-1 w-4 h-4"><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_P7sC {
                transform-origin: center;
                animation: spinner_svv2 0.75s infinite linear;
              }
              @keyframes spinner_svv2 {
                100% {
                  transform: rotate(360deg);
                }
              }
            </style><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_P7sC"></path></svg></div>`),
        J(e, "class", "flex flex-row justify-center");
    },
    m(t, r) {
      Ne(t, e, r);
    },
    d(t) {
      t && ze(e);
    },
  };
}
function nP(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h,
    m,
    b,
    _,
    S,
    T,
    D,
    F = i[3] && i9(i);
  t = new X2({ props: { editor: i[2] } });
  function q(ce, be) {
    return ce[1] ? rP : iP;
  }
  let Q = q(i, -1),
    te = Q(i);
  return {
    c() {
      F && F.c(),
        (e = Ot()),
        Yt(t.$$.fragment),
        (r = Ot()),
        (o = Je("div")),
        (n = Je("button")),
        te.c(),
        (u = Ot()),
        (h = Je("button")),
        (m = Xi("Publish")),
        (b = Ot()),
        (_ = Je("input")),
        J(
          n,
          "class",
          "bg-blue-500 hover:bg-blue-700 opacity-70 text-white font-bold w-32 md:w-40 py-4 px-3 mx-2 rounded-lg"
        ),
        (n.disabled = i[1]),
        J(
          h,
          "class",
          "bg-green-500 hover:bg-green-700 opacity-70 text-white font-bold w-32 md:w-40 py-4 px-3 mx-2 rounded-lg"
        ),
        (h.disabled = i[6]),
        or(h, "opacity-50", i[6]),
        or(h, "cursor-not-allowed", i[6]),
        or(h, "bg-green-700", i[6]),
        or(h, "bg-green-600", i[6]),
        J(
          o,
          "class",
          "button-container flex justify-center mt-4 md:mt-8 lg:mt-12 mb-10"
        ),
        J(_, "type", "hidden"),
        J(_, "name", i[0]);
    },
    m(ce, be) {
      F && F.m(ce, be),
        Ne(ce, e, be),
        Jt(t, ce, be),
        Ne(ce, r, be),
        Ne(ce, o, be),
        He(o, n),
        te.m(n, null),
        He(o, u),
        He(o, h),
        He(h, m),
        Ne(ce, b, be),
        Ne(ce, _, be),
        zs(_, i[4]),
        (S = !0),
        T ||
          ((D = [Mt(n, "click", Zh(i[9])), Mt(_, "input", i[14])]), (T = !0));
    },
    p(ce, [be]) {
      ce[3]
        ? F
          ? (F.p(ce, be), be & 8 && Oe(F, 1))
          : ((F = i9(ce)), F.c(), Oe(F, 1), F.m(e.parentNode, e))
        : F &&
          (Yi(),
          $e(F, 1, 1, () => {
            F = null;
          }),
          er());
      let Y = {};
      be & 4 && (Y.editor = ce[2]),
        t.$set(Y),
        Q !== (Q = q(ce, be)) &&
          (te.d(1), (te = Q(ce)), te && (te.c(), te.m(n, null))),
        (!S || be & 2) && (n.disabled = ce[1]),
        (!S || be & 64) && (h.disabled = ce[6]),
        (!S || be & 64) && or(h, "opacity-50", ce[6]),
        (!S || be & 64) && or(h, "cursor-not-allowed", ce[6]),
        (!S || be & 64) && or(h, "bg-green-700", ce[6]),
        (!S || be & 64) && or(h, "bg-green-600", ce[6]),
        (!S || be & 1) && J(_, "name", ce[0]),
        be & 16 && zs(_, ce[4]);
    },
    i(ce) {
      S || (Oe(F), Oe(t.$$.fragment, ce), (S = !0));
    },
    o(ce) {
      $e(F), $e(t.$$.fragment, ce), (S = !1);
    },
    d(ce) {
      ce && (ze(e), ze(r), ze(o), ze(b), ze(_)),
        F && F.d(ce),
        Xt(t, ce),
        te.d(),
        (T = !1),
        gr(D);
    },
  };
}
var oP = 500;
function sP(i, e, t) {
  let r,
    o,
    n,
    u = yt,
    h = () => (u(), (u = $h(q, (fe) => t(2, (n = fe)))), q);
  i.$$.on_destroy.push(() => u());
  let { answerContentProp: m = "" } = e,
    { answerUpdatedEvent: b = "AnswerUpdatedEvent" } = e,
    { hiddenAnswerFieldName: _ = "text" } = e,
    { numAnswersCanPublish: S = 1 } = e,
    { componentIdEmittingEvent: T = "whoever-wants-to-emit-the-event" } = e,
    D,
    F = !0,
    q,
    Q = m || "",
    te = !1,
    ce = "";
  Ur(() => {
    h(
      t(
        3,
        (q = K2({
          extensions: [
            y6,
            jx.configure({ placeholder: "Write your answer here \u{1F58B}" }),
          ],
          content: m || "<p></p>",
          editorProps: {
            attributes: {
              class:
                "border-2 border-slate-500 dark:border-slate-800 rounded-md p-3 outline-none",
            },
            handleDOMEvents: { focus: (fe, Le) => (fe.focus(), !1) },
          },
          onUpdate: ({ editor: fe }) => {
            t(4, (Q = fe.getHTML()));
          },
        }))
      )
    );
  });
  let be = () => {
      n.chain().focus().toggleBold().run();
    },
    Y = () => {
      n.chain().focus().toggleItalic().run();
    };
  function Ie() {
    let fe = document.getElementById(T);
    if (fe) {
      t(1, (te = !0)),
        setTimeout(() => {
          t(1, (te = !1));
        }, 500);
      let Le = new CustomEvent(b, { detail: {} });
      console.log("DISPATCH EVENT"), fe.dispatchEvent(Le);
    }
  }
  Ka(() => {
    Q !== ce &&
      F &&
      Q.length > 0 &&
      (Ie(),
      (ce = Q),
      (F = !1),
      clearTimeout(D),
      (D = setTimeout(() => {
        F = !0;
      }, oP)));
  });
  function Te() {
    (Q = this.value), t(4, Q);
  }
  return (
    (i.$$set = (fe) => {
      "answerContentProp" in fe && t(10, (m = fe.answerContentProp)),
        "answerUpdatedEvent" in fe && t(11, (b = fe.answerUpdatedEvent)),
        "hiddenAnswerFieldName" in fe && t(0, (_ = fe.hiddenAnswerFieldName)),
        "numAnswersCanPublish" in fe && t(12, (S = fe.numAnswersCanPublish)),
        "componentIdEmittingEvent" in fe &&
          t(13, (T = fe.componentIdEmittingEvent));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 4098 && t(6, (r = S == 0 || te)),
        i.$$.dirty & 4 && t(5, (o = (fe, Le = {}) => n.isActive(fe, Le)));
    }),
    [_, te, n, q, Q, o, r, be, Y, Ie, m, b, S, T, Te]
  );
}
var Ly = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, sP, nP, ut, {
          answerContentProp: 10,
          answerUpdatedEvent: 11,
          hiddenAnswerFieldName: 0,
          numAnswersCanPublish: 12,
          componentIdEmittingEvent: 13,
        });
    }
  },
  r9 = Ly;
function n9(i, e, t) {
  let r = i.slice();
  return (r[20] = e[t]), r;
}
function o9(i) {
  let e;
  return {
    c() {
      (e = Je("div")),
        (e.innerHTML = ""),
        J(e, "class", "emoji-picker-container");
    },
    m(t, r) {
      Ne(t, e, r), i[9](e);
    },
    p: yt,
    d(t) {
      t && ze(e), i[9](null);
    },
  };
}
function s9(i) {
  let e, t, r, o, n, u, h, m;
  return {
    c() {
      (e = Je("input")),
        (r = Ot()),
        (o = Je("input")),
        (u = Ot()),
        (h = Je("input")),
        J(e, "type", "hidden"),
        J(e, "name", i[0]),
        (e.value = t = i[20].unified),
        J(o, "type", "hidden"),
        J(o, "name", i[1]),
        (o.value = n = i[20].shortcodes),
        J(h, "type", "hidden"),
        J(h, "name", i[2]),
        (h.value = m = !0);
    },
    m(b, _) {
      Ne(b, e, _), Ne(b, r, _), Ne(b, o, _), Ne(b, u, _), Ne(b, h, _);
    },
    p(b, _) {
      _ & 1 && J(e, "name", b[0]),
        _ & 16 && t !== (t = b[20].unified) && (e.value = t),
        _ & 2 && J(o, "name", b[1]),
        _ & 16 && n !== (n = b[20].shortcodes) && (o.value = n),
        _ & 4 && J(h, "name", b[2]);
    },
    d(b) {
      b && (ze(e), ze(r), ze(o), ze(u), ze(h));
    },
  };
}
function a9(i) {
  let e,
    t = i[20] && s9(i);
  return {
    c() {
      t && t.c(), (e = Ji());
    },
    m(r, o) {
      t && t.m(r, o), Ne(r, e, o);
    },
    p(r, o) {
      r[20]
        ? t
          ? t.p(r, o)
          : ((t = s9(r)), t.c(), t.m(e.parentNode, e))
        : t && (t.d(1), (t = null));
    },
    d(r) {
      r && ze(e), t && t.d(r);
    },
  };
}
function aP(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h = i[5] && o9(i),
    m = On(i[4]),
    b = [];
  for (let _ = 0; _ < m.length; _ += 1) b[_] = a9(n9(i, m, _));
  return {
    c() {
      (e = Je("button")),
        (e.innerHTML =
          '<div class="flex bg-slate-100 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-500 first-line:text-slate-900 dark:text-slate-200 rounded-2xl p-1.5 px-2 items-center text-bold"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.7" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"></path></svg></div>'),
        (t = Ot()),
        h && h.c(),
        (r = Ot());
      for (let _ = 0; _ < b.length; _ += 1) b[_].c();
      o = Ji();
    },
    m(_, S) {
      Ne(_, e, S), Ne(_, t, S), h && h.m(_, S), Ne(_, r, S);
      for (let T = 0; T < b.length; T += 1) b[T] && b[T].m(_, S);
      Ne(_, o, S), n || ((u = Mt(e, "click", Fs(i[6]))), (n = !0));
    },
    p(_, [S]) {
      if (
        (_[5]
          ? h
            ? h.p(_, S)
            : ((h = o9(_)), h.c(), h.m(r.parentNode, r))
          : h && (h.d(1), (h = null)),
        S & 23)
      ) {
        m = On(_[4]);
        let T;
        for (T = 0; T < m.length; T += 1) {
          let D = n9(_, m, T);
          b[T]
            ? b[T].p(D, S)
            : ((b[T] = a9(D)), b[T].c(), b[T].m(o.parentNode, o));
        }
        for (; T < b.length; T += 1) b[T].d(1);
        b.length = m.length;
      }
    },
    i: yt,
    o: yt,
    d(_) {
      _ && (ze(e), ze(t), ze(r), ze(o)), h && h.d(_), Gl(b, _), (n = !1), u();
    },
  };
}
var lP = 500;
async function cP() {
  window.EmojiMart ||
    (await import(
      "https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"
    )),
    window.Popper || (await import("https://unpkg.com/@popperjs/core@2"));
}
function uP() {
  return document.documentElement.getAttribute("data-theme") === "darkmode"
    ? "dark"
    : "light";
}
function dP(i, e, t) {
  let { id: r } = e,
    { eventName: o = "EmojiPicker" } = e,
    { formUnifiedName: n = "emoji_unified" } = e,
    { formShorthandName: u = "emoji_shorthand" } = e,
    { formAddName: h = "emoji_add" } = e,
    m,
    b = !0,
    _,
    S,
    T,
    D = null,
    F = [],
    q = !1;
  function Q(fe) {
    t(4, (F = [fe])), ce();
  }
  Ka(() => {
    F.length > 0 &&
      b &&
      (te(F),
      t(4, (F = [])),
      (b = !1),
      clearTimeout(m),
      (m = setTimeout(() => {
        b = !0;
      }, lP)));
  });
  function te(fe) {
    let Le = document.getElementById(r);
    if (Le) {
      let De = new CustomEvent(o, { detail: { selected: fe } });
      Le.dispatchEvent(De);
    }
  }
  function ce(fe) {
    fe && fe.preventDefault(),
      setTimeout(() => {
        t(5, (q = !q)), q ? be() : Y();
      }, 50);
  }
  function be() {
    t(3, (_ = document.getElementById(r))),
      S && typeof S.destroy == "function" && S.destroy(),
      T && T.firstChild && T.removeChild(T.firstChild);
    let fe = uP();
    (S = new EmojiMart.Picker({
      theme: fe,
      autoFocus: !0,
      previewPosition: "none",
      categories: [
        "frequent",
        "people",
        "nature",
        "objects",
        "foods",
        "places",
        "activity",
        "flags",
        "symbols",
      ],
      onEmojiSelect: (Le) => {
        Q(Le);
      },
    })),
      T ||
        ((T = document.createElement("div")),
        T.classList.add("picker-container"),
        document.body.appendChild(T)),
      T.appendChild(S),
      D ||
        (D = Popper.createPopper(_, T, {
          placement: "bottom-start",
          strategy: "fixed",
          modifiers: [
            {
              name: "flip",
              options: {
                fallbackPlacements: ["top-start", "bottom-end", "top-end"],
              },
            },
            {
              name: "preventOverflow",
              options: { boundary: "viewport", padding: 4 },
            },
          ],
        })),
      setTimeout(() => {
        D && D.update();
      }, 150),
      setTimeout(() => {
        D && D.update();
      }, 300),
      setTimeout(() => {
        D && D.update();
      }, 1500),
      setTimeout(() => {
        D && D.update();
      }, 3e3);
  }
  function Y() {
    T && T.parentNode && (T.parentNode.removeChild(T), (T = null)),
      D && (D.destroy(), (D = null));
  }
  function Ie(fe) {
    q &&
      T &&
      !T.contains(fe.target) &&
      !fe.target.closest(".emoji-mart") &&
      Y();
  }
  Ur(() => {
    cP(),
      t(3, (_ = document.getElementById(r))),
      document.addEventListener("click", Ie),
      t(3, (_ = document.getElementById(r)));
  }),
    dr(() => {
      document.removeEventListener("click", Ie),
        D && D.destroy(),
        (S = null),
        t(3, (_ = null));
    });
  function Te(fe) {
    Bi[fe ? "unshift" : "push"](() => {
      (_ = fe), t(3, _);
    });
  }
  return (
    (i.$$set = (fe) => {
      "id" in fe && t(7, (r = fe.id)),
        "eventName" in fe && t(8, (o = fe.eventName)),
        "formUnifiedName" in fe && t(0, (n = fe.formUnifiedName)),
        "formShorthandName" in fe && t(1, (u = fe.formShorthandName)),
        "formAddName" in fe && t(2, (h = fe.formAddName));
    }),
    [n, u, h, _, F, q, ce, r, o, Te]
  );
}
var Fy = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, dP, aP, ut, {
          id: 7,
          eventName: 8,
          formUnifiedName: 0,
          formShorthandName: 1,
          formAddName: 2,
        });
    }
  },
  l9 = Fy;
function hP(i) {
  let e,
    t = `${i[0]} transparent ${i[0]}
  ${i[0]}`;
  return {
    c() {
      (e = Je("div")),
        Nn(e, "--duration", i[1]),
        J(e, "class", "svelte-66wdl1"),
        Nn(e, "border-color", t),
        Nn(e, "width", i[2]),
        Nn(e, "height", i[2]);
    },
    m(r, o) {
      Ne(r, e, o);
    },
    p(r, [o]) {
      o & 2 && Nn(e, "--duration", r[1]);
      let n = o & 2;
      ((o & 3 &&
        t !==
          (t = `${r[0]} transparent ${r[0]}
  ${r[0]}`)) ||
        n) &&
        Nn(e, "border-color", t),
        (o & 6 || n) && Nn(e, "width", r[2]),
        (o & 6 || n) && Nn(e, "height", r[2]);
    },
    i: yt,
    o: yt,
    d(r) {
      r && ze(e);
    },
  };
}
function pP(i, e, t) {
  let { color: r = "cornflowerblue" } = e,
    { duration: o = "1.5s" } = e,
    { size: n = "1em" } = e;
  return (
    (i.$$set = (u) => {
      "color" in u && t(0, (r = u.color)),
        "duration" in u && t(1, (o = u.duration)),
        "size" in u && t(2, (n = u.size));
    }),
    [r, o, n]
  );
}
var zy = class extends dt {
    constructor(e) {
      super(), gt(this, e, pP, hP, ut, { color: 0, duration: 1, size: 2 });
    }
  },
  Ny = zy;
function Oy(i) {
  let e = i - 1;
  return e * e * e + 1;
}
function c9(i, { from: e, to: t }, r = {}) {
  let o = getComputedStyle(i),
    n = o.transform === "none" ? "" : o.transform,
    [u, h] = o.transformOrigin.split(" ").map(parseFloat),
    m = e.left + (e.width * u) / t.width - (t.left + u),
    b = e.top + (e.height * h) / t.height - (t.top + h),
    {
      delay: _ = 0,
      duration: S = (D) => Math.sqrt(D) * 120,
      easing: T = Oy,
    } = r;
  return {
    delay: _,
    duration: zo(S) ? S(Math.sqrt(m * m + b * b)) : S,
    easing: T,
    css: (D, F) => {
      let q = F * m,
        Q = F * b,
        te = D + (F * e.width) / t.width,
        ce = D + (F * e.height) / t.height;
      return `transform: ${n} translate(${q}px, ${Q}px) scale(${te}, ${ce});`;
    },
  };
}
function Sm(i) {
  return Object.prototype.toString.call(i) === "[object Date]";
}
function By(i, e, t, r) {
  if (typeof t == "number" || Sm(t)) {
    let o = r - t,
      n = (t - e) / (i.dt || 1 / 60),
      u = i.opts.stiffness * o,
      h = i.opts.damping * n,
      m = (u - h) * i.inv_mass,
      b = (n + m) * i.dt;
    return Math.abs(b) < i.opts.precision && Math.abs(o) < i.opts.precision
      ? r
      : ((i.settled = !1), Sm(t) ? new Date(t.getTime() + b) : t + b);
  } else {
    if (Array.isArray(t)) return t.map((o, n) => By(i, e[n], t[n], r[n]));
    if (typeof t == "object") {
      let o = {};
      for (let n in t) o[n] = By(i, e[n], t[n], r[n]);
      return o;
    } else throw new Error(`Cannot spring ${typeof t} values`);
  }
}
function u9(i, e = {}) {
  let t = cn(i),
    { stiffness: r = 0.15, damping: o = 0.8, precision: n = 0.01 } = e,
    u,
    h,
    m,
    b = i,
    _ = i,
    S = 1,
    T = 0,
    D = !1;
  function F(Q, te = {}) {
    _ = Q;
    let ce = (m = {});
    return i == null || te.hard || (q.stiffness >= 1 && q.damping >= 1)
      ? ((D = !0), (u = Mc()), (b = Q), t.set((i = _)), Promise.resolve())
      : (te.soft &&
          ((T = 1 / ((te.soft === !0 ? 0.5 : +te.soft) * 60)), (S = 0)),
        h ||
          ((u = Mc()),
          (D = !1),
          (h = Wu((be) => {
            if (D) return (D = !1), (h = null), !1;
            S = Math.min(S + T, 1);
            let Y = {
                inv_mass: S,
                opts: q,
                settled: !0,
                dt: ((be - u) * 60) / 1e3,
              },
              Ie = By(Y, b, i, _);
            return (
              (u = be),
              (b = i),
              t.set((i = Ie)),
              Y.settled && (h = null),
              !Y.settled
            );
          }))),
        new Promise((be) => {
          h.promise.then(() => {
            ce === m && be();
          });
        }));
  }
  let q = {
    set: F,
    update: (Q, te) => F(Q(_, i), te),
    subscribe: t.subscribe,
    stiffness: r,
    damping: o,
    precision: n,
  };
  return q;
}
function fP(i) {
  let e,
    t = `rotate(${i[0].angle}deg) scale(${i[0].scale}) translate(${i[0].dx}px,
  ${i[0].dy}px)`,
    r,
    o = i[11].default,
    n = bi(o, i, i[10], null);
  return {
    c() {
      (e = Je("span")), n && n.c(), Nn(e, "transform", t);
    },
    m(u, h) {
      Ne(u, e, h), n && n.m(e, null), (r = !0);
    },
    p(u, [h]) {
      n &&
        n.p &&
        (!r || h & 1024) &&
        _i(n, o, u, u[10], r ? vi(o, u[10], h, null) : xi(u[10]), null),
        h & 1 &&
          t !==
            (t = `rotate(${u[0].angle}deg) scale(${u[0].scale}) translate(${u[0].dx}px,
  ${u[0].dy}px)`) &&
          Nn(e, "transform", t);
    },
    i(u) {
      r || (Oe(n, u), (r = !0));
    },
    o(u) {
      $e(n, u), (r = !1);
    },
    d(u) {
      u && ze(e), n && n.d(u);
    },
  };
}
function mP(i, e, t) {
  let r,
    { $$slots: o = {}, $$scope: n } = e,
    { wiggle: u = !1 } = e,
    { angle: h = 0 } = e,
    { scale: m = 1 } = e,
    { dx: b = 0 } = e,
    { dy: _ = 0 } = e,
    { duration: S = 200 } = e,
    { stiffness: T = 0.05 } = e,
    { damping: D = 0.1 } = e,
    F = { angle: 0, scale: 1, dx: 0, dy: 0 },
    q = u9(F, { stiffness: T, damping: D });
  return (
    Di(i, q, (Q) => t(0, (r = Q))),
    (i.$$set = (Q) => {
      "wiggle" in Q && t(2, (u = Q.wiggle)),
        "angle" in Q && t(3, (h = Q.angle)),
        "scale" in Q && t(4, (m = Q.scale)),
        "dx" in Q && t(5, (b = Q.dx)),
        "dy" in Q && t(6, (_ = Q.dy)),
        "duration" in Q && t(7, (S = Q.duration)),
        "stiffness" in Q && t(8, (T = Q.stiffness)),
        "damping" in Q && t(9, (D = Q.damping)),
        "$$scope" in Q && t(10, (n = Q.$$scope));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 132 && u && setTimeout(() => t(2, (u = !1)), S),
        i.$$.dirty & 124 && q.set(u ? { scale: m, angle: h, dx: b, dy: _ } : F);
    }),
    [r, q, u, h, m, b, _, S, T, D, n, o]
  );
}
var Ry = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, mP, fP, ut, {
          wiggle: 2,
          angle: 3,
          scale: 4,
          dx: 5,
          dy: 6,
          duration: 7,
          stiffness: 8,
          damping: 9,
        });
    }
  },
  Uy = Ry;
function gP(i) {
  let e,
    t,
    r = [i[0], { fill: "currentColor" }, { viewBox: "0 0 16 16" }],
    o = {};
  for (let n = 0; n < r.length; n += 1) o = Rr(o, r[n]);
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        J(
          t,
          "d",
          "M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"
        ),
        va(e, o);
    },
    m(n, u) {
      Ne(n, e, u), He(e, t);
    },
    p(n, [u]) {
      va(
        e,
        (o = xa(r, [
          u & 1 && n[0],
          { fill: "currentColor" },
          { viewBox: "0 0 16 16" },
        ]))
      );
    },
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
function yP(i, e, t) {
  return (
    (i.$$set = (r) => {
      t(0, (e = Rr(Rr({}, e), zn(r))));
    }),
    (e = zn(e)),
    [e]
  );
}
var Vy = class extends dt {
    constructor(e) {
      super(), gt(this, e, yP, gP, ut, {});
    }
  },
  jy = Vy;
function bP(i) {
  let e,
    t,
    r = [i[0], { viewBox: "0 0 24 24" }, { fill: "currentColor" }],
    o = {};
  for (let n = 0; n < r.length; n += 1) o = Rr(o, r[n]);
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        J(
          t,
          "d",
          "M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"
        ),
        va(e, o);
    },
    m(n, u) {
      Ne(n, e, u), He(e, t);
    },
    p(n, [u]) {
      va(
        e,
        (o = xa(r, [
          u & 1 && n[0],
          { viewBox: "0 0 24 24" },
          { fill: "currentColor" },
        ]))
      );
    },
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
function vP(i, e, t) {
  return (
    (i.$$set = (r) => {
      t(0, (e = Rr(Rr({}, e), zn(r))));
    }),
    (e = zn(e)),
    [e]
  );
}
var Hy = class extends dt {
    constructor(e) {
      super(), gt(this, e, vP, bP, ut, {});
    }
  },
  Cm = Hy;
function _P(i) {
  let e,
    t,
    r = [i[0], { viewBox: "0 0 24 24" }, { fill: "currentColor" }],
    o = {};
  for (let n = 0; n < r.length; n += 1) o = Rr(o, r[n]);
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        J(
          t,
          "d",
          "M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10Zm-4.906-3.68L18.32 7.094A8 8 0 0 1 7.094 18.32ZM5.68 16.906A8 8 0 0 1 16.906 5.68L5.68 16.906Z"
        ),
        va(e, o);
    },
    m(n, u) {
      Ne(n, e, u), He(e, t);
    },
    p(n, [u]) {
      va(
        e,
        (o = xa(r, [
          u & 1 && n[0],
          { viewBox: "0 0 24 24" },
          { fill: "currentColor" },
        ]))
      );
    },
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
function xP(i, e, t) {
  return (
    (i.$$set = (r) => {
      t(0, (e = Rr(Rr({}, e), zn(r))));
    }),
    (e = zn(e)),
    [e]
  );
}
var qy = class extends dt {
    constructor(e) {
      super(), gt(this, e, xP, _P, ut, {});
    }
  },
  $y = qy;
var ao = (i) =>
  i instanceof Object
    ? (i.label === void 0 &&
        console.error(
          `MultiSelect option ${JSON.stringify(
            i
          )} is an object but has no label key`
        ),
      i.label)
    : `${i}`;
function Ip(i, e = null) {
  if (!i?.style) return null;
  if (!["selected", "option", null].includes(e)) {
    console.error(`MultiSelect: Invalid key=${e} for get_style`);
    return;
  }
  if (typeof i == "object" && i.style) {
    if (typeof i.style == "string") return i.style;
    if (typeof i.style == "object") {
      if (e && e in i.style) return i.style[e];
      console.error(`Invalid style object for option=${JSON.stringify(i)}`);
    }
  }
}
var { Boolean: wP } = Ac,
  kP = (i) => ({
    searchText: i[0] & 8,
    msgType: i[0] & 1073810458,
    msg: i[0] & 1073843226,
  }),
  d9 = (i) => ({ searchText: i[3], msgType: i[116], msg: i[117] });
function Qy(i) {
  let e = i.slice(),
    t = { dupe: e[15], create: e[10], "no-match": e[30] }[e[116]];
  return (e[117] = t), e;
}
function Gy(i) {
  let e = i.slice(),
    t = e[4].map(ao).includes(e[3]);
  e[112] = t;
  let r = !e[16] && e[112] && "dupe";
  e[113] = r;
  let o = !!(e[11] && e[10]) && "create";
  e[114] = o;
  let n = !!(e[1]?.length == 0 && e[30]) && "no-match";
  e[115] = n;
  let u = e[113] || e[114] || e[115];
  return (e[116] = u), e;
}
function h9(i, e, t) {
  let r = i.slice();
  (r[118] = e[t]), (r[125] = t);
  let o = r[118] instanceof Object ? r[118] : { label: r[118] };
  (r[119] = o.label),
    (r[42] = o.disabled !== void 0 ? o.disabled : null),
    (r[120] = o.title !== void 0 ? o.title : null),
    (r[121] = o.selectedTitle !== void 0 ? o.selectedTitle : null),
    (r[122] = o.disabledTitle !== void 0 ? o.disabledTitle : r[13]);
  let n = r[0] === r[125];
  return (r[123] = n), r;
}
var SP = (i) => ({ option: i[0] & 33554434 }),
  p9 = (i) => ({ option: i[118], idx: i[125] }),
  CP = (i) => ({ option: i[0] & 33554434 }),
  f9 = (i) => ({ option: i[118], idx: i[125] }),
  EP = (i) => ({}),
  m9 = (i) => ({}),
  TP = (i) => ({}),
  g9 = (i) => ({}),
  MP = (i) => ({}),
  y9 = (i) => ({}),
  AP = (i) => ({
    selected: i[0] & 16,
    disabled: i[1] & 2048,
    invalid: i[0] & 128,
    id: i[0] & 262144,
    placeholder: i[1] & 8,
    open: i[0] & 256,
    required: i[1] & 128,
  }),
  b9 = (i) => ({
    selected: i[4],
    disabled: i[42],
    invalid: i[7],
    id: i[18],
    placeholder: i[34],
    open: i[8],
    required: i[38],
  });
function v9(i, e, t) {
  let r = i.slice();
  return (r[118] = e[t]), (r[125] = t), r;
}
var IP = (i) => ({}),
  _9 = (i) => ({}),
  PP = (i) => ({ option: i[0] & 16, idx: i[0] & 16 }),
  x9 = (i) => ({ option: i[118], idx: i[125] }),
  DP = (i) => ({ option: i[0] & 16, idx: i[0] & 16 }),
  w9 = (i) => ({ option: i[118], idx: i[125] }),
  LP = (i) => ({ open: i[0] & 256 }),
  k9 = (i) => ({ open: i[8] });
function FP(i) {
  let e, t;
  return (
    (e = new jy({
      props: {
        width: "15px",
        style: "min-width: 1em; padding: 0 1pt; cursor: pointer;",
      },
    })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function zP(i) {
  let e = ao(i[118]) + "",
    t;
  return {
    c() {
      t = Xi(e);
    },
    m(r, o) {
      Ne(r, t, o);
    },
    p(r, o) {
      o[0] & 16 && e !== (e = ao(r[118]) + "") && fn(t, e);
    },
    d(r) {
      r && ze(t);
    },
  };
}
function NP(i) {
  let e,
    t = ao(i[118]) + "",
    r;
  return {
    c() {
      (e = new Wh(!1)), (r = Ji()), (e.a = r);
    },
    m(o, n) {
      e.m(t, o, n), Ne(o, r, n);
    },
    p(o, n) {
      n[0] & 16 && t !== (t = ao(o[118]) + "") && e.p(t);
    },
    d(o) {
      o && (ze(r), e.d());
    },
  };
}
function OP(i) {
  let e;
  function t(n, u) {
    return n[32] ? NP : zP;
  }
  let r = t(i, [-1, -1, -1, -1, -1]),
    o = r(i);
  return {
    c() {
      o.c(), (e = Ji());
    },
    m(n, u) {
      o.m(n, u), Ne(n, e, u);
    },
    p(n, u) {
      r === (r = t(n, u)) && o
        ? o.p(n, u)
        : (o.d(1), (o = r(n)), o && (o.c(), o.m(e.parentNode, e)));
    },
    d(n) {
      n && ze(e), o.d(n);
    },
  };
}
function BP(i) {
  let e,
    t = i[69].default,
    r = bi(t, i, i[107], x9),
    o = r || OP(i);
  return {
    c() {
      o && o.c();
    },
    m(n, u) {
      o && o.m(n, u), (e = !0);
    },
    p(n, u) {
      r
        ? r.p &&
          (!e || (u[0] & 16) | (u[3] & 16384)) &&
          _i(r, t, n, n[107], e ? vi(t, n[107], u, PP) : xi(n[107]), x9)
        : o &&
          o.p &&
          (!e || (u[0] & 16) | (u[1] & 2)) &&
          o.p(n, e ? u : [-1, -1, -1, -1, -1]);
    },
    i(n) {
      e || (Oe(o, n), (e = !0));
    },
    o(n) {
      $e(o, n), (e = !1);
    },
    d(n) {
      o && o.d(n);
    },
  };
}
function S9(i) {
  let e,
    t,
    r,
    o,
    n,
    u = i[69]["remove-icon"],
    h = bi(u, i, i[107], _9),
    m = h || RP(i);
  function b() {
    return i[89](i[118]);
  }
  function _() {
    return i[90](i[118]);
  }
  return {
    c() {
      (e = Je("button")),
        m && m.c(),
        J(e, "type", "button"),
        J(e, "title", (t = i[36] + " " + ao(i[118]))),
        J(e, "class", "remove svelte-1r2hsto");
    },
    m(S, T) {
      Ne(S, e, T),
        m && m.m(e, null),
        (r = !0),
        o ||
          ((n = [
            Mt(e, "mouseup", Fs(b)),
            Mt(e, "keydown", function () {
              zo(i[54](_)) && i[54](_).apply(this, arguments);
            }),
          ]),
          (o = !0));
    },
    p(S, T) {
      (i = S),
        h &&
          h.p &&
          (!r || T[3] & 16384) &&
          _i(h, u, i, i[107], r ? vi(u, i[107], T, IP) : xi(i[107]), _9),
        (!r ||
          ((T[0] & 16) | (T[1] & 32) &&
            t !== (t = i[36] + " " + ao(i[118])))) &&
          J(e, "title", t);
    },
    i(S) {
      r || (Oe(m, S), (r = !0));
    },
    o(S) {
      $e(m, S), (r = !1);
    },
    d(S) {
      S && ze(e), m && m.d(S), (o = !1), gr(n);
    },
  };
}
function RP(i) {
  let e, t;
  return (
    (e = new Cm({ props: { width: "15px" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function C9(i, e) {
  let t,
    r,
    o,
    n,
    u,
    h,
    m = yt,
    b,
    _,
    S,
    T = e[69].selected,
    D = bi(T, e, e[107], w9),
    F = D || BP(e),
    q = !e[42] && (e[37] === null || e[4].length > e[37]) && S9(e);
  function Q() {
    return e[91](e[125]);
  }
  return {
    key: i,
    first: null,
    c() {
      (t = Je("li")),
        F && F.c(),
        (r = Ot()),
        q && q.c(),
        J(t, "class", (o = Wa(e[23]) + " svelte-1r2hsto")),
        J(t, "role", "option"),
        J(t, "aria-selected", "true"),
        J(t, "draggable", (n = e[39] && !e[42] && e[4].length > 1)),
        J(t, "style", (u = Ip(e[118], "selected"))),
        or(t, "active", e[46] === e[125]),
        (this.first = t);
    },
    m(te, ce) {
      Ne(te, t, ce),
        F && F.m(t, null),
        He(t, r),
        q && q.m(t, null),
        (b = !0),
        _ ||
          ((S = [
            Mt(t, "dragstart", function () {
              zo(e[57](e[125])) && e[57](e[125]).apply(this, arguments);
            }),
            Mt(
              t,
              "drop",
              Zh(function () {
                zo(e[56](e[125])) && e[56](e[125]).apply(this, arguments);
              })
            ),
            Mt(t, "dragenter", Q),
            Mt(t, "dragover", Zh(e[85])),
          ]),
          (_ = !0));
    },
    p(te, ce) {
      (e = te),
        D
          ? D.p &&
            (!b || (ce[0] & 16) | (ce[3] & 16384)) &&
            _i(D, T, e, e[107], b ? vi(T, e[107], ce, DP) : xi(e[107]), w9)
          : F &&
            F.p &&
            (!b || (ce[0] & 16) | (ce[1] & 2) | (ce[3] & 16384)) &&
            F.p(e, b ? ce : [-1, -1, -1, -1, -1]),
        !e[42] && (e[37] === null || e[4].length > e[37])
          ? q
            ? (q.p(e, ce), (ce[0] & 16) | (ce[1] & 2112) && Oe(q, 1))
            : ((q = S9(e)), q.c(), Oe(q, 1), q.m(t, null))
          : q &&
            (Yi(),
            $e(q, 1, 1, () => {
              q = null;
            }),
            er()),
        (!b ||
          (ce[0] & 8388608 && o !== (o = Wa(e[23]) + " svelte-1r2hsto"))) &&
          J(t, "class", o),
        (!b ||
          ((ce[0] & 16) | (ce[1] & 2304) &&
            n !== (n = e[39] && !e[42] && e[4].length > 1))) &&
          J(t, "draggable", n),
        (!b || (ce[0] & 16 && u !== (u = Ip(e[118], "selected")))) &&
          J(t, "style", u),
        (!b || (ce[0] & 8388624) | (ce[1] & 32768)) &&
          or(t, "active", e[46] === e[125]);
    },
    r() {
      h = t.getBoundingClientRect();
    },
    f() {
      n5(t), m();
    },
    a() {
      m(), (m = r5(t, h, c9, { duration: 100 }));
    },
    i(te) {
      b || (Oe(F, te), Oe(q), (b = !0));
    },
    o(te) {
      $e(F, te), $e(q), (b = !1);
    },
    d(te) {
      te && ze(t), F && F.d(te), q && q.d(), (_ = !1), gr(S);
    },
  };
}
function E9(i) {
  let e,
    t = i[69].spinner,
    r = bi(t, i, i[107], y9),
    o = r || UP(i);
  return {
    c() {
      o && o.c();
    },
    m(n, u) {
      o && o.m(n, u), (e = !0);
    },
    p(n, u) {
      r &&
        r.p &&
        (!e || u[3] & 16384) &&
        _i(r, t, n, n[107], e ? vi(t, n[107], u, MP) : xi(n[107]), y9);
    },
    i(n) {
      e || (Oe(o, n), (e = !0));
    },
    o(n) {
      $e(o, n), (e = !1);
    },
    d(n) {
      o && o.d(n);
    },
  };
}
function UP(i) {
  let e, t;
  return (
    (e = new Ny({})),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function VP(i) {
  let e,
    t,
    r,
    o = i[26] && (i[26] > 1 || i[27]) && T9(i),
    n = i[26] !== 1 && i[4].length > 1 && M9(i);
  return {
    c() {
      o && o.c(), (e = Ot()), n && n.c(), (t = Ji());
    },
    m(u, h) {
      o && o.m(u, h), Ne(u, e, h), n && n.m(u, h), Ne(u, t, h), (r = !0);
    },
    p(u, h) {
      u[26] && (u[26] > 1 || u[27])
        ? o
          ? (o.p(u, h), h[0] & 201326592 && Oe(o, 1))
          : ((o = T9(u)), o.c(), Oe(o, 1), o.m(e.parentNode, e))
        : o &&
          (Yi(),
          $e(o, 1, 1, () => {
            o = null;
          }),
          er()),
        u[26] !== 1 && u[4].length > 1
          ? n
            ? (n.p(u, h), h[0] & 67108880 && Oe(n, 1))
            : ((n = M9(u)), n.c(), Oe(n, 1), n.m(t.parentNode, t))
          : n &&
            (Yi(),
            $e(n, 1, 1, () => {
              n = null;
            }),
            er());
    },
    i(u) {
      r || (Oe(o), Oe(n), (r = !0));
    },
    o(u) {
      $e(o), $e(n), (r = !1);
    },
    d(u) {
      u && (ze(e), ze(t)), o && o.d(u), n && n.d(u);
    },
  };
}
function jP(i) {
  let e,
    t = i[69]["disabled-icon"],
    r = bi(t, i, i[107], g9),
    o = r || $P(i);
  return {
    c() {
      o && o.c();
    },
    m(n, u) {
      o && o.m(n, u), (e = !0);
    },
    p(n, u) {
      r &&
        r.p &&
        (!e || u[3] & 16384) &&
        _i(r, t, n, n[107], e ? vi(t, n[107], u, TP) : xi(n[107]), g9);
    },
    i(n) {
      e || (Oe(o, n), (e = !0));
    },
    o(n) {
      $e(o, n), (e = !1);
    },
    d(n) {
      o && o.d(n);
    },
  };
}
function T9(i) {
  let e, t, r;
  function o(u) {
    i[94](u);
  }
  let n = { angle: 20, $$slots: { default: [HP] }, $$scope: { ctx: i } };
  return (
    i[43] !== void 0 && (n.wiggle = i[43]),
    (e = new Uy({ props: n })),
    Bi.push(() => Gr(e, "wiggle", o)),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(u, h) {
        Jt(e, u, h), (r = !0);
      },
      p(u, h) {
        let m = {};
        (h[0] & 469762064) | (h[3] & 16384) &&
          (m.$$scope = { dirty: h, ctx: u }),
          !t &&
            h[1] & 4096 &&
            ((t = !0), (m.wiggle = u[43]), Qr(() => (t = !1))),
          e.$set(m);
      },
      i(u) {
        r || (Oe(e.$$.fragment, u), (r = !0));
      },
      o(u) {
        $e(e.$$.fragment, u), (r = !1);
      },
      d(u) {
        Xt(e, u);
      },
    }
  );
}
function HP(i) {
  let e,
    t = i[27]?.(i[4].length, i[26]) + "",
    r,
    o;
  return {
    c() {
      (e = Je("span")),
        (r = Xi(t)),
        J(e, "class", (o = "max-select-msg " + i[28] + " svelte-1r2hsto"));
    },
    m(n, u) {
      Ne(n, e, u), He(e, r);
    },
    p(n, u) {
      u[0] & 201326608 &&
        t !== (t = n[27]?.(n[4].length, n[26]) + "") &&
        fn(r, t),
        u[0] & 268435456 &&
          o !== (o = "max-select-msg " + n[28] + " svelte-1r2hsto") &&
          J(e, "class", o);
    },
    d(n) {
      n && ze(e);
    },
  };
}
function M9(i) {
  let e,
    t,
    r,
    o,
    n = i[69]["remove-icon"],
    u = bi(n, i, i[107], m9),
    h = u || qP(i);
  return {
    c() {
      (e = Je("button")),
        h && h.c(),
        J(e, "type", "button"),
        J(e, "class", "remove remove-all svelte-1r2hsto"),
        J(e, "title", i[35]);
    },
    m(m, b) {
      Ne(m, e, b),
        h && h.m(e, null),
        (t = !0),
        r ||
          ((o = [Mt(e, "mouseup", Fs(i[53])), Mt(e, "keydown", i[54](i[53]))]),
          (r = !0));
    },
    p(m, b) {
      u &&
        u.p &&
        (!t || b[3] & 16384) &&
        _i(u, n, m, m[107], t ? vi(n, m[107], b, EP) : xi(m[107]), m9),
        (!t || b[1] & 16) && J(e, "title", m[35]);
    },
    i(m) {
      t || (Oe(h, m), (t = !0));
    },
    o(m) {
      $e(h, m), (t = !1);
    },
    d(m) {
      m && ze(e), h && h.d(m), (r = !1), gr(o);
    },
  };
}
function qP(i) {
  let e, t;
  return (
    (e = new Cm({ props: { width: "15px" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function $P(i) {
  let e, t;
  return (
    (e = new $y({
      props: {
        width: "14pt",
        style: "margin: 0 2pt;",
        "data-name": "disabled-icon",
      },
    })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function A9(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h = On(i[1].slice(0, Math.max(0, i[25] ?? 0) || 1 / 0)),
    m = [];
  for (let S = 0; S < h.length; S += 1) m[S] = I9(h9(i, h, S));
  let b = (S) =>
      $e(m[S], 1, 1, () => {
        m[S] = null;
      }),
    _ = i[3] && P9(Gy(i));
  return {
    c() {
      e = Je("ul");
      for (let S = 0; S < m.length; S += 1) m[S].c();
      (t = Ot()),
        _ && _.c(),
        J(e, "class", (r = "options " + i[40] + " svelte-1r2hsto")),
        J(e, "role", "listbox"),
        J(e, "aria-multiselectable", (o = i[26] === null || i[26] > 1)),
        J(e, "aria-expanded", i[8]),
        J(e, "aria-disabled", (n = i[42] ? "true" : null)),
        or(e, "hidden", !i[8]);
    },
    m(S, T) {
      Ne(S, e, T);
      for (let D = 0; D < m.length; D += 1) m[D] && m[D].m(e, null);
      He(e, t), _ && _.m(e, null), i[105](e), (u = !0);
    },
    p(S, T) {
      if ((T[0] & 39845891) | (T[1] & 393218) | (T[3] & 16384)) {
        h = On(S[1].slice(0, Math.max(0, S[25] ?? 0) || 1 / 0));
        let D;
        for (D = 0; D < h.length; D += 1) {
          let F = h9(S, h, D);
          m[D]
            ? (m[D].p(F, T), Oe(m[D], 1))
            : ((m[D] = I9(F)), m[D].c(), Oe(m[D], 1), m[D].m(e, t));
        }
        for (Yi(), D = h.length; D < m.length; D += 1) b(D);
        er();
      }
      S[3]
        ? _
          ? (_.p(Gy(S), T), T[0] & 8 && Oe(_, 1))
          : ((_ = P9(Gy(S))), _.c(), Oe(_, 1), _.m(e, null))
        : _ &&
          (Yi(),
          $e(_, 1, 1, () => {
            _ = null;
          }),
          er()),
        (!u ||
          (T[1] & 512 && r !== (r = "options " + S[40] + " svelte-1r2hsto"))) &&
          J(e, "class", r),
        (!u || (T[0] & 67108864 && o !== (o = S[26] === null || S[26] > 1))) &&
          J(e, "aria-multiselectable", o),
        (!u || T[0] & 256) && J(e, "aria-expanded", S[8]),
        (!u || (T[1] & 2048 && n !== (n = S[42] ? "true" : null))) &&
          J(e, "aria-disabled", n),
        (!u || (T[0] & 256) | (T[1] & 512)) && or(e, "hidden", !S[8]);
    },
    i(S) {
      if (!u) {
        for (let T = 0; T < h.length; T += 1) Oe(m[T]);
        Oe(_), (u = !0);
      }
    },
    o(S) {
      m = m.filter(wP);
      for (let T = 0; T < m.length; T += 1) $e(m[T]);
      $e(_), (u = !1);
    },
    d(S) {
      S && ze(e), Gl(m, S), _ && _.d(), i[105](null);
    },
  };
}
function QP(i) {
  let e = ao(i[118]) + "",
    t;
  return {
    c() {
      t = Xi(e);
    },
    m(r, o) {
      Ne(r, t, o);
    },
    p(r, o) {
      o[0] & 33554434 && e !== (e = ao(r[118]) + "") && fn(t, e);
    },
    d(r) {
      r && ze(t);
    },
  };
}
function GP(i) {
  let e,
    t = ao(i[118]) + "",
    r;
  return {
    c() {
      (e = new Wh(!1)), (r = Ji()), (e.a = r);
    },
    m(o, n) {
      e.m(t, o, n), Ne(o, r, n);
    },
    p(o, n) {
      n[0] & 33554434 && t !== (t = ao(o[118]) + "") && e.p(t);
    },
    d(o) {
      o && (ze(r), e.d());
    },
  };
}
function WP(i) {
  let e;
  function t(n, u) {
    return n[32] ? GP : QP;
  }
  let r = t(i, [-1, -1, -1, -1, -1]),
    o = r(i);
  return {
    c() {
      o.c(), (e = Ji());
    },
    m(n, u) {
      o.m(n, u), Ne(n, e, u);
    },
    p(n, u) {
      r === (r = t(n, u)) && o
        ? o.p(n, u)
        : (o.d(1), (o = r(n)), o && (o.c(), o.m(e.parentNode, e)));
    },
    d(n) {
      n && ze(e), o.d(n);
    },
  };
}
function ZP(i) {
  let e,
    t = i[69].default,
    r = bi(t, i, i[107], p9),
    o = r || WP(i);
  return {
    c() {
      o && o.c();
    },
    m(n, u) {
      o && o.m(n, u), (e = !0);
    },
    p(n, u) {
      r
        ? r.p &&
          (!e || (u[0] & 33554434) | (u[3] & 16384)) &&
          _i(r, t, n, n[107], e ? vi(t, n[107], u, SP) : xi(n[107]), p9)
        : o &&
          o.p &&
          (!e || (u[0] & 33554434) | (u[1] & 2)) &&
          o.p(n, e ? u : [-1, -1, -1, -1, -1]);
    },
    i(n) {
      e || (Oe(o, n), (e = !0));
    },
    o(n) {
      $e(o, n), (e = !1);
    },
    d(n) {
      o && o.d(n);
    },
  };
}
function I9(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h,
    m = i[69].option,
    b = bi(m, i, i[107], f9),
    _ = b || ZP(i);
  function S(...F) {
    return i[95](i[42], i[118], ...F);
  }
  function T() {
    return i[96](i[42], i[125]);
  }
  function D() {
    return i[97](i[42], i[125]);
  }
  return {
    c() {
      (e = Je("li")),
        _ && _.c(),
        J(
          e,
          "title",
          (t = i[42] ? i[122] : (i[48](i[119]) && i[121]) || i[120])
        ),
        J(
          e,
          "class",
          (r = i[22] + " " + (i[123] ? i[21] : "") + " svelte-1r2hsto")
        ),
        J(e, "role", "option"),
        J(e, "aria-selected", "false"),
        J(e, "style", (o = Ip(i[118], "option"))),
        or(e, "selected", i[48](i[119])),
        or(e, "active", i[123]),
        or(e, "disabled", i[42]);
    },
    m(F, q) {
      Ne(F, e, q),
        _ && _.m(e, null),
        (n = !0),
        u ||
          ((h = [
            Mt(e, "mousedown", Fs(i[71])),
            Mt(e, "mouseup", Fs(S)),
            Mt(e, "mouseover", T),
            Mt(e, "focus", D),
            Mt(e, "mouseout", i[98]),
            Mt(e, "blur", i[99]),
          ]),
          (u = !0));
    },
    p(F, q) {
      (i = F),
        b
          ? b.p &&
            (!n || (q[0] & 33554434) | (q[3] & 16384)) &&
            _i(b, m, i, i[107], n ? vi(m, i[107], q, CP) : xi(i[107]), f9)
          : _ &&
            _.p &&
            (!n || (q[0] & 33554434) | (q[1] & 2) | (q[3] & 16384)) &&
            _.p(i, n ? q : [-1, -1, -1, -1, -1]),
        (!n ||
          ((q[0] & 33554434) | (q[1] & 131072) &&
            t !==
              (t = i[42] ? i[122] : (i[48](i[119]) && i[121]) || i[120]))) &&
          J(e, "title", t),
        (!n ||
          (q[0] & 6291457 &&
            r !==
              (r = i[22] + " " + (i[123] ? i[21] : "") + " svelte-1r2hsto"))) &&
          J(e, "class", r),
        (!n || (q[0] & 33554434 && o !== (o = Ip(i[118], "option")))) &&
          J(e, "style", o),
        (!n || (q[0] & 39845891) | (q[1] & 131072)) &&
          or(e, "selected", i[48](i[119])),
        (!n || q[0] & 6291457) && or(e, "active", i[123]),
        (!n || q[0] & 39845891) && or(e, "disabled", i[42]);
    },
    i(F) {
      n || (Oe(_, F), (n = !0));
    },
    o(F) {
      $e(_, F), (n = !1);
    },
    d(F) {
      F && ze(e), _ && _.d(F), (u = !1), gr(h);
    },
  };
}
function P9(i) {
  let e,
    t,
    r = i[116] && D9(Qy(i));
  return {
    c() {
      r && r.c(), (e = Ji());
    },
    m(o, n) {
      r && r.m(o, n), Ne(o, e, n), (t = !0);
    },
    p(o, n) {
      o[116]
        ? r
          ? (r.p(Qy(o), n), n[0] & 1073810458 && Oe(r, 1))
          : ((r = D9(Qy(o))), r.c(), Oe(r, 1), r.m(e.parentNode, e))
        : r &&
          (Yi(),
          $e(r, 1, 1, () => {
            r = null;
          }),
          er());
    },
    i(o) {
      t || (Oe(r), (t = !0));
    },
    o(o) {
      $e(r), (t = !1);
    },
    d(o) {
      o && ze(e), r && r.d(o);
    },
  };
}
function D9(i) {
  let e,
    t,
    r,
    o,
    n = i[69]["user-msg"],
    u = bi(n, i, i[107], d9),
    h = u || KP(i);
  return {
    c() {
      (e = Je("li")),
        h && h.c(),
        J(e, "title", i[10]),
        J(e, "role", "option"),
        J(e, "aria-selected", "false"),
        J(e, "class", "user-msg svelte-1r2hsto"),
        or(e, "active", i[44]),
        Nn(
          e,
          "cursor",
          { dupe: "not-allowed", create: "pointer", "no-match": "default" }[
            i[116]
          ]
        );
    },
    m(m, b) {
      Ne(m, e, b),
        h && h.m(e, null),
        (t = !0),
        r ||
          ((o = [
            Mt(e, "mousedown", Fs(i[70])),
            Mt(e, "mouseup", Fs(i[100])),
            Mt(e, "mouseover", i[101]),
            Mt(e, "focus", i[102]),
            Mt(e, "mouseout", i[103]),
            Mt(e, "blur", i[104]),
          ]),
          (r = !0));
    },
    p(m, b) {
      u
        ? u.p &&
          (!t || (b[0] & 1073843226) | (b[3] & 16384)) &&
          _i(u, n, m, m[107], t ? vi(n, m[107], b, kP) : xi(m[107]), d9)
        : h &&
          h.p &&
          (!t || b[0] & 1073843226) &&
          h.p(m, t ? b : [-1, -1, -1, -1, -1]),
        (!t || b[0] & 1024) && J(e, "title", m[10]),
        (!t || b[1] & 8192) && or(e, "active", m[44]),
        b[0] & 1073810458 &&
          Nn(
            e,
            "cursor",
            { dupe: "not-allowed", create: "pointer", "no-match": "default" }[
              m[116]
            ]
          );
    },
    i(m) {
      t || (Oe(h, m), (t = !0));
    },
    o(m) {
      $e(h, m), (t = !1);
    },
    d(m) {
      m && ze(e), h && h.d(m), (r = !1), gr(o);
    },
  };
}
function KP(i) {
  let e = i[117] + "",
    t;
  return {
    c() {
      t = Xi(e);
    },
    m(r, o) {
      Ne(r, t, o);
    },
    p(r, o) {
      o[0] & 1073843226 && e !== (e = r[117] + "") && fn(t, e);
    },
    d(r) {
      r && ze(t);
    },
  };
}
function JP(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h,
    m = [],
    b = new Map(),
    _,
    S,
    T,
    D,
    F,
    q,
    Q,
    te,
    ce,
    be,
    Y,
    Ie,
    Te,
    fe,
    Le,
    De,
    st;
  _a(i[86]);
  let qe = i[69]["expand-icon"],
    zt = bi(qe, i, i[107], k9),
    Rt = zt || FP(i),
    Gt = On(i[4]),
    qt = (Re) => (Re[16] ? [Re[17](Re[118]), Re[125]] : Re[17](Re[118]));
  for (let Re = 0; Re < Gt.length; Re += 1) {
    let Ce = v9(i, Gt, Re),
      Bt = qt(Ce);
    b.set(Bt, (m[Re] = C9(Bt, Ce)));
  }
  let ct = i[69]["after-input"],
    vt = bi(ct, i, i[107], b9),
    ht = i[24] && E9(i),
    Vt = [jP, VP],
    hi = [];
  function Pi(Re, Ce) {
    return Re[42] ? 0 : Re[4].length > 0 ? 1 : -1;
  }
  ~(be = Pi(i, [-1, -1, -1, -1, -1])) && (Y = hi[be] = Vt[be](i));
  let Zt = ((i[3] && i[30]) || i[2]?.length > 0) && A9(i);
  return {
    c() {
      (e = Je("div")),
        (t = Je("input")),
        (n = Ot()),
        Rt && Rt.c(),
        (u = Ot()),
        (h = Je("ul"));
      for (let Re = 0; Re < m.length; Re += 1) m[Re].c();
      (_ = Ot()),
        (S = Je("input")),
        (q = Ot()),
        vt && vt.c(),
        (te = Ot()),
        ht && ht.c(),
        (ce = Ot()),
        Y && Y.c(),
        (Ie = Ot()),
        Zt && Zt.c(),
        J(t, "name", i[29]),
        (t.required = r = !!i[38]),
        (t.value = o =
          i[4].length >= Number(i[38]) ? JSON.stringify(i[4]) : null),
        J(t, "tabindex", "-1"),
        J(t, "aria-hidden", "true"),
        J(
          t,
          "aria-label",
          "ignore this, used only to prevent form submission if select is required but empty"
        ),
        J(t, "class", "form-control svelte-1r2hsto"),
        J(S, "class", (T = Wa(i[19]) + " svelte-1r2hsto")),
        J(S, "id", i[18]),
        (S.disabled = i[42]),
        J(S, "autocomplete", i[12]),
        J(S, "inputmode", i[20]),
        J(S, "pattern", i[33]),
        J(S, "placeholder", (D = i[4].length == 0 ? i[34] : null)),
        J(S, "aria-invalid", (F = i[7] ? "true" : null)),
        J(S, "ondrop", "return false"),
        J(h, "class", (Q = "selected " + i[41] + " svelte-1r2hsto")),
        J(h, "aria-label", "selected options"),
        J(e, "class", (Te = "multiselect " + i[31] + " svelte-1r2hsto")),
        J(e, "title", (fe = i[42] ? i[14] : null)),
        J(e, "data-id", i[18]),
        J(e, "role", "searchbox"),
        J(e, "tabindex", "-1"),
        or(e, "disabled", i[42]),
        or(e, "single", i[26] === 1),
        or(e, "open", i[8]),
        or(e, "invalid", i[7]);
    },
    m(Re, Ce) {
      Ne(Re, e, Ce),
        He(e, t),
        i[87](t),
        He(e, n),
        Rt && Rt.m(e, null),
        He(e, u),
        He(e, h);
      for (let Bt = 0; Bt < m.length; Bt += 1) m[Bt] && m[Bt].m(h, null);
      He(h, _),
        He(h, S),
        i[92](S),
        zs(S, i[3]),
        He(h, q),
        vt && vt.m(h, null),
        He(e, te),
        ht && ht.m(e, null),
        He(e, ce),
        ~be && hi[be].m(e, null),
        He(e, Ie),
        Zt && Zt.m(e, null),
        i[106](e),
        (Le = !0),
        De ||
          ((st = [
            Mt(window, "click", i[55]),
            Mt(window, "touchstart", i[55]),
            Mt(window, "resize", i[86]),
            Mt(t, "invalid", i[88]),
            Mt(S, "input", i[93]),
            Mt(S, "mouseup", X3(Fs(i[51]))),
            Mt(S, "keydown", Fs(i[52])),
            Mt(S, "focus", i[72]),
            Mt(S, "focus", i[51]),
            Mt(S, "input", i[58]),
            Mt(S, "blur", i[73]),
            Mt(S, "change", i[74]),
            Mt(S, "click", i[75]),
            Mt(S, "keydown", i[76]),
            Mt(S, "keyup", i[77]),
            Mt(S, "mousedown", i[78]),
            Mt(S, "mouseenter", i[79]),
            Mt(S, "mouseleave", i[80]),
            Mt(S, "touchcancel", i[81]),
            Mt(S, "touchend", i[82]),
            Mt(S, "touchmove", i[83]),
            Mt(S, "touchstart", i[84]),
            Mt(e, "mouseup", Fs(i[51])),
          ]),
          (De = !0));
    },
    p(Re, Ce) {
      if (
        ((!Le || Ce[0] & 536870912) && J(t, "name", Re[29]),
        (!Le || (Ce[1] & 128 && r !== (r = !!Re[38]))) && (t.required = r),
        (!Le ||
          ((Ce[0] & 16) | (Ce[1] & 128) &&
            o !==
              (o =
                Re[4].length >= Number(Re[38])
                  ? JSON.stringify(Re[4])
                  : null) &&
            t.value !== o)) &&
          (t.value = o),
        zt &&
          zt.p &&
          (!Le || (Ce[0] & 256) | (Ce[3] & 16384)) &&
          _i(
            zt,
            qe,
            Re,
            Re[107],
            Le ? vi(qe, Re[107], Ce, LP) : xi(Re[107]),
            k9
          ),
        (Ce[0] & 8585232) | (Ce[1] & 109611362) | (Ce[3] & 16384))
      ) {
        (Gt = On(Re[4])), Yi();
        for (let ei = 0; ei < m.length; ei += 1) m[ei].r();
        m = Kh(m, Ce, qt, 1, Re, Gt, b, h, c5, C9, _, v9);
        for (let ei = 0; ei < m.length; ei += 1) m[ei].a();
        er();
      }
      (!Le || (Ce[0] & 524288 && T !== (T = Wa(Re[19]) + " svelte-1r2hsto"))) &&
        J(S, "class", T),
        (!Le || Ce[0] & 262144) && J(S, "id", Re[18]),
        (!Le || Ce[1] & 2048) && (S.disabled = Re[42]),
        (!Le || Ce[0] & 4096) && J(S, "autocomplete", Re[12]),
        (!Le || Ce[0] & 1048576) && J(S, "inputmode", Re[20]),
        (!Le || Ce[1] & 4) && J(S, "pattern", Re[33]),
        (!Le ||
          ((Ce[0] & 16) | (Ce[1] & 8) &&
            D !== (D = Re[4].length == 0 ? Re[34] : null))) &&
          J(S, "placeholder", D),
        (!Le || (Ce[0] & 128 && F !== (F = Re[7] ? "true" : null))) &&
          J(S, "aria-invalid", F),
        Ce[0] & 8 && S.value !== Re[3] && zs(S, Re[3]),
        vt &&
          vt.p &&
          (!Le || (Ce[0] & 262544) | (Ce[1] & 2184) | (Ce[3] & 16384)) &&
          _i(
            vt,
            ct,
            Re,
            Re[107],
            Le ? vi(ct, Re[107], Ce, AP) : xi(Re[107]),
            b9
          ),
        (!Le ||
          (Ce[1] & 1024 &&
            Q !== (Q = "selected " + Re[41] + " svelte-1r2hsto"))) &&
          J(h, "class", Q),
        Re[24]
          ? ht
            ? (ht.p(Re, Ce), Ce[0] & 16777216 && Oe(ht, 1))
            : ((ht = E9(Re)), ht.c(), Oe(ht, 1), ht.m(e, ce))
          : ht &&
            (Yi(),
            $e(ht, 1, 1, () => {
              ht = null;
            }),
            er());
      let Bt = be;
      (be = Pi(Re, Ce)),
        be === Bt
          ? ~be && hi[be].p(Re, Ce)
          : (Y &&
              (Yi(),
              $e(hi[Bt], 1, 1, () => {
                hi[Bt] = null;
              }),
              er()),
            ~be
              ? ((Y = hi[be]),
                Y ? Y.p(Re, Ce) : ((Y = hi[be] = Vt[be](Re)), Y.c()),
                Oe(Y, 1),
                Y.m(e, Ie))
              : (Y = null)),
        (Re[3] && Re[30]) || Re[2]?.length > 0
          ? Zt
            ? (Zt.p(Re, Ce), Ce[0] & 1073741836 && Oe(Zt, 1))
            : ((Zt = A9(Re)), Zt.c(), Oe(Zt, 1), Zt.m(e, null))
          : Zt &&
            (Yi(),
            $e(Zt, 1, 1, () => {
              Zt = null;
            }),
            er()),
        (!Le ||
          (Ce[1] & 1 &&
            Te !== (Te = "multiselect " + Re[31] + " svelte-1r2hsto"))) &&
          J(e, "class", Te),
        (!Le ||
          ((Ce[0] & 16384) | (Ce[1] & 2048) &&
            fe !== (fe = Re[42] ? Re[14] : null))) &&
          J(e, "title", fe),
        (!Le || Ce[0] & 262144) && J(e, "data-id", Re[18]),
        (!Le || Ce[1] & 2049) && or(e, "disabled", Re[42]),
        (!Le || (Ce[0] & 67108864) | (Ce[1] & 1)) &&
          or(e, "single", Re[26] === 1),
        (!Le || (Ce[0] & 256) | (Ce[1] & 1)) && or(e, "open", Re[8]),
        (!Le || (Ce[0] & 128) | (Ce[1] & 1)) && or(e, "invalid", Re[7]);
    },
    i(Re) {
      if (!Le) {
        Oe(Rt, Re);
        for (let Ce = 0; Ce < Gt.length; Ce += 1) Oe(m[Ce]);
        Oe(vt, Re), Oe(ht), Oe(Y), Oe(Zt), (Le = !0);
      }
    },
    o(Re) {
      $e(Rt, Re);
      for (let Ce = 0; Ce < m.length; Ce += 1) $e(m[Ce]);
      $e(vt, Re), $e(ht), $e(Y), $e(Zt), (Le = !1);
    },
    d(Re) {
      Re && ze(e), i[87](null), Rt && Rt.d(Re);
      for (let Ce = 0; Ce < m.length; Ce += 1) m[Ce].d();
      i[92](null),
        vt && vt.d(Re),
        ht && ht.d(),
        ~be && hi[be].d(),
        Zt && Zt.d(),
        i[106](null),
        (De = !1),
        gr(st);
    },
  };
}
function XP(i, e, t) {
  let r,
    { $$slots: o = {}, $$scope: n } = e,
    { activeIndex: u = null } = e,
    { activeOption: h = null } = e,
    { createOptionMsg: m = "Create this option..." } = e,
    { allowUserOptions: b = !1 } = e,
    { allowEmpty: _ = !1 } = e,
    { autocomplete: S = "off" } = e,
    { autoScroll: T = !0 } = e,
    { breakpoint: D = 800 } = e,
    { defaultDisabledTitle: F = "This option is disabled" } = e,
    { disabled: q = !1 } = e,
    { disabledInputTitle: Q = "This input is disabled" } = e,
    { duplicateOptionMsg: te = "This option is already selected" } = e,
    { duplicates: ce = !1 } = e,
    { key: be = (de) => `${ao(de)}`.toLowerCase() } = e,
    {
      filterFunc: Y = (de, ai) =>
        ai ? `${ao(de)}`.toLowerCase().includes(ai.toLowerCase()) : !0,
    } = e,
    { closeDropdownOnSelect: Ie = "desktop" } = e,
    { form_input: Te = null } = e,
    { highlightMatches: fe = !0 } = e,
    { id: Le = null } = e,
    { input: De = null } = e,
    { inputClass: st = "" } = e,
    { inputmode: qe = null } = e,
    { invalid: zt = !1 } = e,
    { liActiveOptionClass: Rt = "" } = e,
    { liOptionClass: Gt = "" } = e,
    { liSelectedClass: qt = "" } = e,
    { loading: ct = !1 } = e,
    { matchingOptions: vt = [] } = e,
    { maxOptions: ht = void 0 } = e,
    { maxSelect: Vt = null } = e,
    { maxSelectMsg: hi = (de, ai) => (ai > 1 ? `${de}/${ai}` : "") } = e,
    { maxSelectMsgClass: Pi = "" } = e,
    { name: Zt = null } = e,
    { noMatchingOptionsMsg: Re = "No matching options" } = e,
    { open: Ce = !1 } = e,
    { options: Bt } = e,
    { outerDiv: ei = null } = e,
    { outerDivClass: Li = "" } = e,
    { parseLabelsAsHtml: it = !1 } = e,
    { pattern: ii = null } = e,
    { placeholder: wi = null } = e,
    { removeAllTitle: sr = "Remove all" } = e,
    { removeBtnTitle: Wr = "Remove" } = e,
    { minSelect: pt = null } = e,
    { required: Ai = !1 } = e,
    { resetFilterOnAdd: je = !0 } = e,
    { searchText: Si = "" } = e,
    {
      selected: gi = Bt?.filter(
        (de) => de instanceof Object && de?.preselected
      ).slice(0, Vt ?? void 0) ?? [],
    } = e,
    { sortSelected: ui = !1 } = e,
    { selectedOptionsDraggable: pr = !ui } = e,
    { ulOptionsClass: Er = "" } = e,
    { ulSelectedClass: en = "" } = e,
    { value: tn = null } = e,
    yn = (de) => {
      t(59, (tn = Vt === 1 ? de[0] ?? null : de));
    },
    Vn = (de) => {
      Vt === 1 ? t(4, (gi = de ? [de] : [])) : t(4, (gi = de ?? []));
    },
    An = !1;
  Bt?.length > 0 ||
    (b || ct || q || _
      ? (Bt = [])
      : console.error("MultiSelect received no options")),
    Vt !== null &&
      Vt < 1 &&
      console.error(
        `MultiSelect's maxSelect must be null or positive integer, got ${Vt}`
      ),
    Array.isArray(gi) ||
      console.error(
        `MultiSelect's selected prop should always be an array, got ${gi}`
      ),
    Vt &&
      typeof Ai == "number" &&
      Ai > Vt &&
      console.error(
        `MultiSelect maxSelect=${Vt} < required=${Ai}, makes it impossible for users to submit a valid form`
      ),
    it &&
      b &&
      console.warn(
        "Don't combine parseLabelsAsHtml and allowUserOptions. It's susceptible to XSS attacks!"
      ),
    ui &&
      pr &&
      console.warn(
        "MultiSelect's sortSelected and selectedOptionsDraggable should not be combined as any user re-orderings of selected options will be undone by sortSelected on component re-renders."
      ),
    b &&
      !m &&
      m !== null &&
      console.error(
        `MultiSelect has allowUserOptions=${b} but createOptionMsg=${m} is falsy. This prevents the "Add option" <span> from showing up, resulting in a confusing user experience.`
      ),
    ht &&
      (typeof ht != "number" || ht < 0 || ht % 1 != 0) &&
      console.error(
        `MultiSelect's maxOptions must be undefined or a positive integer, got ${ht}`
      );
  let Zr = yo(),
    at = !1,
    Pr;
  if (u !== null && !vt[u])
    throw `Run time error, activeIndex=${u} is out of bounds, matchingOptions.length=${vt.length}`;
  function Dr(de, ai) {
    Vt && Vt > 1 && gi.length >= Vt && t(43, (An = !0)),
      !isNaN(Number(de)) &&
        typeof gi.map(ao)[0] == "number" &&
        (de = Number(de));
    let fr = gi.map(be).includes(be(de));
    if ((Vt === null || Vt === 1 || gi.length < Vt) && (ce || !fr)) {
      if (
        (!Bt.includes(de) &&
          [!0, "append"].includes(b) &&
          Si.length > 0 &&
          (typeof Bt[0] == "object"
            ? (de = { label: Si })
            : (["number", "undefined"].includes(typeof Bt[0]) &&
              !isNaN(Number(Si))
                ? (de = Number(Si))
                : (de = Si),
              Zr("create", { option: de })),
          b === "append" && t(2, (Bt = [...Bt, de]))),
        je && t(3, (Si = "")),
        ["", void 0, null].includes(de))
      ) {
        console.error(`MultiSelect: encountered falsy option ${de}`);
        return;
      }
      Vt === 1
        ? t(4, (gi = [de]))
        : (t(4, (gi = [...gi, de])),
          ui === !0
            ? t(
                4,
                (gi = gi.sort((Ho, on) => {
                  let [cs, Hn] = [ao(Ho), ao(on)];
                  return `${cs}`.localeCompare(`${Hn}`);
                }))
              )
            : typeof ui == "function" && t(4, (gi = gi.sort(ui))));
      let Lr = gi.length === Vt,
        cr = Ie === !0 || (Ie === "desktop" && Pr < D);
      Lr || cr ? ft(ai) : cr || De?.focus(),
        Zr("add", { option: de }),
        Zr("change", { option: de, type: "add" }),
        t(7, (zt = !1)),
        Te?.setCustomValidity("");
    }
  }
  function Kn(de) {
    if (gi.length === 0) return;
    let ai = gi.findIndex((Lr) => be(Lr) === be(de)),
      [fr] = gi.splice(ai, 1);
    if (
      (fr === void 0 && b && (fr = typeof Bt[0] ? { label: de } : de),
      fr === void 0)
    )
      return console.error(
        `Multiselect can't remove selected option ${JSON.stringify(
          de
        )}, not found in selected list`
      );
    t(4, (gi = [...gi])),
      t(7, (zt = !1)),
      Te?.setCustomValidity(""),
      Zr("remove", { option: fr }),
      Zr("change", { option: fr, type: "remove" });
  }
  function ko(de) {
    q ||
      (t(8, (Ce = !0)),
      de instanceof FocusEvent || De?.focus(),
      Zr("open", { event: de }));
  }
  function ft(de) {
    t(8, (Ce = !1)), De?.blur(), t(0, (u = null)), Zr("close", { event: de });
  }
  async function Tt(de) {
    if (de.key === "Escape" || de.key === "Tab") ft(de), t(3, (Si = ""));
    else if (de.key === "Enter")
      de.preventDefault(),
        h
          ? (gi.includes(h) ? Kn(h) : Dr(h, de), t(3, (Si = "")))
          : b && Si.length > 0
          ? Dr(Si, de)
          : ko(de);
    else if (["ArrowDown", "ArrowUp"].includes(de.key)) {
      if (u === null && vt.length > 0) {
        t(0, (u = 0));
        return;
      } else if (b && !vt.length && Si.length > 0) {
        t(44, (at = !at));
        return;
      } else if (u === null) return;
      de.preventDefault();
      let ai = de.key === "ArrowUp" ? -1 : 1;
      if (
        (t(0, (u = (u + ai) % vt.length)),
        u < 0 && t(0, (u = vt.length - 1)),
        T)
      ) {
        await Ns();
        let fr = document.querySelector("ul.options > li.active");
        fr && fr.scrollIntoViewIfNeeded?.();
      }
    } else
      de.key === "Backspace" && gi.length > 0 && !Si
        ? Kn(gi.at(-1))
        : vt.length > 0 && t(0, (u = 0));
  }
  function Fe() {
    Zr("removeAll", { options: gi }),
      Zr("change", { options: gi, type: "removeAll" }),
      t(4, (gi = [])),
      t(3, (Si = ""));
  }
  let At = (de) => (ai) => {
    ["Enter", "Space"].includes(ai.code) && (ai.preventDefault(), de());
  };
  function $t(de) {
    ei && !ei.contains(de.target) && ft(de);
  }
  let Pt = null,
    yi = (de) => (ai) => {
      if (!ai.dataTransfer) return;
      ai.dataTransfer.dropEffect = "move";
      let fr = parseInt(ai.dataTransfer.getData("text/plain")),
        Lr = [...gi];
      fr < de
        ? (Lr.splice(de + 1, 0, Lr[fr]), Lr.splice(fr, 1))
        : (Lr.splice(de, 0, Lr[fr]), Lr.splice(fr + 1, 1)),
        t(4, (gi = Lr)),
        t(46, (Pt = null));
    },
    Fi = (de) => (ai) => {
      ai.dataTransfer &&
        ((ai.dataTransfer.effectAllowed = "move"),
        (ai.dataTransfer.dropEffect = "move"),
        ai.dataTransfer.setData("text/plain", `${de}`));
    },
    re;
  function V(de) {
    if (!fe || typeof CSS > "u" || !CSS.highlights) return;
    CSS.highlights.clear();
    let ai = de?.target?.value.trim().toLowerCase();
    if (!ai) return;
    let fr = document.createTreeWalker(re, NodeFilter.SHOW_TEXT, {
        acceptNode: (on) =>
          on?.textContent === Re
            ? NodeFilter.FILTER_REJECT
            : NodeFilter.FILTER_ACCEPT,
      }),
      Lr = [],
      cr = fr.nextNode();
    for (; cr; ) Lr.push(cr), (cr = fr.nextNode());
    let Ho = Lr.map((on) => {
      let cs = on.textContent?.toLowerCase(),
        Hn = [],
        Es = 0;
      for (; cs && Es < cs.length; ) {
        let ue = cs.indexOf(ai, Es);
        if (ue === -1) break;
        Hn.push(ue), (Es = ue + ai.length);
      }
      return Hn.map((ue) => {
        let R = new Range();
        return R.setStart(on, ue), R.setEnd(on, ue + ai.length), R;
      });
    });
    CSS.highlights.set("sms-search-matches", new Highlight(...Ho.flat()));
  }
  function H(de) {
    Vi.call(this, i, de);
  }
  function $(de) {
    Vi.call(this, i, de);
  }
  function ne(de) {
    Vi.call(this, i, de);
  }
  function ve(de) {
    Vi.call(this, i, de);
  }
  function xe(de) {
    Vi.call(this, i, de);
  }
  function ke(de) {
    Vi.call(this, i, de);
  }
  function me(de) {
    Vi.call(this, i, de);
  }
  function we(de) {
    Vi.call(this, i, de);
  }
  function Ze(de) {
    Vi.call(this, i, de);
  }
  function Qe(de) {
    Vi.call(this, i, de);
  }
  function Xe(de) {
    Vi.call(this, i, de);
  }
  function jt(de) {
    Vi.call(this, i, de);
  }
  function oi(de) {
    Vi.call(this, i, de);
  }
  function ti(de) {
    Vi.call(this, i, de);
  }
  function zi(de) {
    Vi.call(this, i, de);
  }
  function di(de) {
    Vi.call(this, i, de);
  }
  function lr() {
    t(45, (Pr = window.innerWidth));
  }
  function Ni(de) {
    Bi[de ? "unshift" : "push"](() => {
      (Te = de), t(5, Te);
    });
  }
  let Wi = () => {
      t(7, (zt = !0));
      let de;
      Vt && Vt > 1 && Number(Ai) > 1
        ? (de = `Please select between ${Ai} and ${Vt} options`)
        : Number(Ai) > 1
        ? (de = `Please select at least ${Ai} options`)
        : (de = "Please select an option"),
        Te?.setCustomValidity(de);
    },
    ci = (de) => Kn(de),
    br = (de) => Kn(de),
    Or = (de) => t(46, (Pt = de));
  function In(de) {
    Bi[de ? "unshift" : "push"](() => {
      (De = de), t(6, De);
    });
  }
  function rn() {
    (Si = this.value), t(3, Si);
  }
  function un(de) {
    (An = de), t(43, An);
  }
  let nn = (de, ai, fr) => {
      de || Dr(ai, fr);
    },
    vl = (de, ai) => {
      de || t(0, (u = ai));
    },
    ha = (de, ai) => {
      de || t(0, (u = ai));
    },
    tr = () => t(0, (u = null)),
    So = () => t(0, (u = null)),
    Pa = (de) => {
      b && Dr(Si, de);
    },
    jn = () => t(44, (at = !0)),
    Pn = () => t(44, (at = !0)),
    _l = () => t(44, (at = !1)),
    dn = () => t(44, (at = !1));
  function Jn(de) {
    Bi[de ? "unshift" : "push"](() => {
      (re = de), t(47, re);
    });
  }
  function xl(de) {
    Bi[de ? "unshift" : "push"](() => {
      (ei = de), t(9, ei);
    });
  }
  return (
    (i.$$set = (de) => {
      "activeIndex" in de && t(0, (u = de.activeIndex)),
        "activeOption" in de && t(60, (h = de.activeOption)),
        "createOptionMsg" in de && t(10, (m = de.createOptionMsg)),
        "allowUserOptions" in de && t(11, (b = de.allowUserOptions)),
        "allowEmpty" in de && t(61, (_ = de.allowEmpty)),
        "autocomplete" in de && t(12, (S = de.autocomplete)),
        "autoScroll" in de && t(62, (T = de.autoScroll)),
        "breakpoint" in de && t(63, (D = de.breakpoint)),
        "defaultDisabledTitle" in de && t(13, (F = de.defaultDisabledTitle)),
        "disabled" in de && t(42, (q = de.disabled)),
        "disabledInputTitle" in de && t(14, (Q = de.disabledInputTitle)),
        "duplicateOptionMsg" in de && t(15, (te = de.duplicateOptionMsg)),
        "duplicates" in de && t(16, (ce = de.duplicates)),
        "key" in de && t(17, (be = de.key)),
        "filterFunc" in de && t(64, (Y = de.filterFunc)),
        "closeDropdownOnSelect" in de && t(65, (Ie = de.closeDropdownOnSelect)),
        "form_input" in de && t(5, (Te = de.form_input)),
        "highlightMatches" in de && t(66, (fe = de.highlightMatches)),
        "id" in de && t(18, (Le = de.id)),
        "input" in de && t(6, (De = de.input)),
        "inputClass" in de && t(19, (st = de.inputClass)),
        "inputmode" in de && t(20, (qe = de.inputmode)),
        "invalid" in de && t(7, (zt = de.invalid)),
        "liActiveOptionClass" in de && t(21, (Rt = de.liActiveOptionClass)),
        "liOptionClass" in de && t(22, (Gt = de.liOptionClass)),
        "liSelectedClass" in de && t(23, (qt = de.liSelectedClass)),
        "loading" in de && t(24, (ct = de.loading)),
        "matchingOptions" in de && t(1, (vt = de.matchingOptions)),
        "maxOptions" in de && t(25, (ht = de.maxOptions)),
        "maxSelect" in de && t(26, (Vt = de.maxSelect)),
        "maxSelectMsg" in de && t(27, (hi = de.maxSelectMsg)),
        "maxSelectMsgClass" in de && t(28, (Pi = de.maxSelectMsgClass)),
        "name" in de && t(29, (Zt = de.name)),
        "noMatchingOptionsMsg" in de && t(30, (Re = de.noMatchingOptionsMsg)),
        "open" in de && t(8, (Ce = de.open)),
        "options" in de && t(2, (Bt = de.options)),
        "outerDiv" in de && t(9, (ei = de.outerDiv)),
        "outerDivClass" in de && t(31, (Li = de.outerDivClass)),
        "parseLabelsAsHtml" in de && t(32, (it = de.parseLabelsAsHtml)),
        "pattern" in de && t(33, (ii = de.pattern)),
        "placeholder" in de && t(34, (wi = de.placeholder)),
        "removeAllTitle" in de && t(35, (sr = de.removeAllTitle)),
        "removeBtnTitle" in de && t(36, (Wr = de.removeBtnTitle)),
        "minSelect" in de && t(37, (pt = de.minSelect)),
        "required" in de && t(38, (Ai = de.required)),
        "resetFilterOnAdd" in de && t(67, (je = de.resetFilterOnAdd)),
        "searchText" in de && t(3, (Si = de.searchText)),
        "selected" in de && t(4, (gi = de.selected)),
        "sortSelected" in de && t(68, (ui = de.sortSelected)),
        "selectedOptionsDraggable" in de &&
          t(39, (pr = de.selectedOptionsDraggable)),
        "ulOptionsClass" in de && t(40, (Er = de.ulOptionsClass)),
        "ulSelectedClass" in de && t(41, (en = de.ulSelectedClass)),
        "value" in de && t(59, (tn = de.value)),
        "$$scope" in de && t(107, (n = de.$$scope));
    }),
    (i.$$.update = () => {
      i.$$.dirty[0] & 16 && yn(gi),
        i.$$.dirty[1] & 268435456 && Vn(tn),
        (i.$$.dirty[0] & 196636) | (i.$$.dirty[2] & 4) &&
          t(
            1,
            (vt = Bt.filter(
              (de) => Y(de, Si) && (!gi.map(be).includes(be(de)) || ce)
            ))
          ),
        i.$$.dirty[0] & 3 && t(60, (h = vt[u ?? -1] ?? null)),
        i.$$.dirty[0] & 16 && t(48, (r = (de) => gi.map(ao).includes(de)));
    }),
    [
      u,
      vt,
      Bt,
      Si,
      gi,
      Te,
      De,
      zt,
      Ce,
      ei,
      m,
      b,
      S,
      F,
      Q,
      te,
      ce,
      be,
      Le,
      st,
      qe,
      Rt,
      Gt,
      qt,
      ct,
      ht,
      Vt,
      hi,
      Pi,
      Zt,
      Re,
      Li,
      it,
      ii,
      wi,
      sr,
      Wr,
      pt,
      Ai,
      pr,
      Er,
      en,
      q,
      An,
      at,
      Pr,
      Pt,
      re,
      r,
      Dr,
      Kn,
      ko,
      Tt,
      Fe,
      At,
      $t,
      yi,
      Fi,
      V,
      tn,
      h,
      _,
      T,
      D,
      Y,
      Ie,
      fe,
      je,
      ui,
      o,
      H,
      $,
      ne,
      ve,
      xe,
      ke,
      me,
      we,
      Ze,
      Qe,
      Xe,
      jt,
      oi,
      ti,
      zi,
      di,
      lr,
      Ni,
      Wi,
      ci,
      br,
      Or,
      In,
      rn,
      un,
      nn,
      vl,
      ha,
      tr,
      So,
      Pa,
      jn,
      Pn,
      _l,
      dn,
      Jn,
      xl,
      n,
    ]
  );
}
var Wy = class extends dt {
    constructor(e) {
      super(),
        gt(
          this,
          e,
          XP,
          JP,
          ut,
          {
            activeIndex: 0,
            activeOption: 60,
            createOptionMsg: 10,
            allowUserOptions: 11,
            allowEmpty: 61,
            autocomplete: 12,
            autoScroll: 62,
            breakpoint: 63,
            defaultDisabledTitle: 13,
            disabled: 42,
            disabledInputTitle: 14,
            duplicateOptionMsg: 15,
            duplicates: 16,
            key: 17,
            filterFunc: 64,
            closeDropdownOnSelect: 65,
            form_input: 5,
            highlightMatches: 66,
            id: 18,
            input: 6,
            inputClass: 19,
            inputmode: 20,
            invalid: 7,
            liActiveOptionClass: 21,
            liOptionClass: 22,
            liSelectedClass: 23,
            loading: 24,
            matchingOptions: 1,
            maxOptions: 25,
            maxSelect: 26,
            maxSelectMsg: 27,
            maxSelectMsgClass: 28,
            name: 29,
            noMatchingOptionsMsg: 30,
            open: 8,
            options: 2,
            outerDiv: 9,
            outerDivClass: 31,
            parseLabelsAsHtml: 32,
            pattern: 33,
            placeholder: 34,
            removeAllTitle: 35,
            removeBtnTitle: 36,
            minSelect: 37,
            required: 38,
            resetFilterOnAdd: 67,
            searchText: 3,
            selected: 4,
            sortSelected: 68,
            selectedOptionsDraggable: 39,
            ulOptionsClass: 40,
            ulSelectedClass: 41,
            value: 59,
          },
          null,
          [-1, -1, -1, -1, -1]
        );
    }
  },
  au = Wy;
function YP(i = !0) {
  let e = this,
    t = new IntersectionObserver(function ([r]) {
      let o = r.intersectionRatio;
      if (o < 1) {
        let n = o <= 0 && i ? "center" : "nearest";
        e.scrollIntoView({ block: n, inline: n });
      }
      this.disconnect();
    });
  return t.observe(e), t;
}
typeof Element < "u" &&
  !Element.prototype?.scrollIntoViewIfNeeded &&
  typeof IntersectionObserver < "u" &&
  (Element.prototype.scrollIntoViewIfNeeded = YP);
function L9(i, e, t) {
  let r = i.slice();
  return (r[9] = e[t]), r;
}
function F9(i) {
  let e, t;
  return {
    c() {
      (e = Je("input")),
        J(e, "type", "hidden"),
        J(e, "name", i[3]),
        (e.value = t = i[9]);
    },
    m(r, o) {
      Ne(r, e, o);
    },
    p(r, o) {
      o & 8 && J(e, "name", r[3]), o & 1 && t !== (t = r[9]) && (e.value = t);
    },
    d(r) {
      r && ze(e);
    },
  };
}
function eD(i) {
  let e, t, r, o, n;
  function u(_) {
    i[7](_);
  }
  let h = {
    options: i[1],
    placeholder: i[2],
    outerDivClass: `!bg-gray-50 !w-full !input !input-bordered !border-gray-300 
  !rounded-lg !p-2.5 !text-gray-900 !text-sm
  focus:!ring-blue-500 focus:!border-blue-500
  dark:!bg-gray-700 dark:!border-gray-600 dark:!placeholder-gray-400 dark:!text-white 
  dark:focus:!ring-blue-500 dark:focus:!border-blue-500
  `,
    liSelectedClass: "!bg-orange-500 dark:!bg-blue-600 !p-2 !text-white",
    ulOptionsClass:
      "!p-2 !m-1 !bg-gray-50 !text-gray-900 !text-sm dark:!bg-gray-700 dark:!border-gray-600 dark:!text-white ",
    liOptionClass:
      "!p-2 !m-1 !bg-gray-50 !text-gray-900 !text-sm dark:!bg-gray-700 dark:!border-gray-600 dark:!text-white hover:!bg-gray-200 hover:dark:!bg-gray-500 rounded",
    liUserMsgClass:
      "!p-2 !m-1 !bg-gray-50 !text-gray-900 !text-sm dark:!bg-gray-700 dark:!border-gray-600 dark:!text-white ",
    liActiveOptionClass: "!bg-slate-200 dark:!bg-blue-300",
    allowUserOptions: !0,
    createOptionMsg: "Hit enter to create",
  };
  i[0] !== void 0 && (h.selected = i[0]),
    (e = new au({ props: h })),
    Bi.push(() => Gr(e, "selected", u));
  let m = On(i[0]),
    b = [];
  for (let _ = 0; _ < m.length; _ += 1) b[_] = F9(L9(i, m, _));
  return {
    c() {
      Yt(e.$$.fragment), (r = Ot());
      for (let _ = 0; _ < b.length; _ += 1) b[_].c();
      o = Ji();
    },
    m(_, S) {
      Jt(e, _, S), Ne(_, r, S);
      for (let T = 0; T < b.length; T += 1) b[T] && b[T].m(_, S);
      Ne(_, o, S), (n = !0);
    },
    p(_, [S]) {
      let T = {};
      if (
        (S & 2 && (T.options = _[1]),
        S & 4 && (T.placeholder = _[2]),
        !t && S & 1 && ((t = !0), (T.selected = _[0]), Qr(() => (t = !1))),
        e.$set(T),
        S & 9)
      ) {
        m = On(_[0]);
        let D;
        for (D = 0; D < m.length; D += 1) {
          let F = L9(_, m, D);
          b[D]
            ? b[D].p(F, S)
            : ((b[D] = F9(F)), b[D].c(), b[D].m(o.parentNode, o));
        }
        for (; D < b.length; D += 1) b[D].d(1);
        b.length = m.length;
      }
    },
    i(_) {
      n || (Oe(e.$$.fragment, _), (n = !0));
    },
    o(_) {
      $e(e.$$.fragment, _), (n = !1);
    },
    d(_) {
      _ && (ze(r), ze(o)), Xt(e, _), Gl(b, _);
    },
  };
}
function tD(i, e, t) {
  let { items: r = ["Svelte", "React", "Vue", "Angular", "..."] } = e,
    { selected: o = [] } = e,
    { placeholder: n = "Select options..." } = e,
    { formInputName: u = "input_name" } = e,
    { postURL: h = "/multiselect-post-request" } = e,
    { csrfToken: m = "" } = e,
    b = [];
  Ur(() => {
    t(6, (b = [...o]));
  });
  async function _() {
    let T = new FormData();
    o.forEach((D) => {
      T.append("interested_genders", D);
    });
    try {
      let D = await fetch(h, {
        method: "POST",
        headers: { "X-CSRF-Token": m },
        body: T,
        credentials: "include",
      });
      if (!D.ok) throw new Error(`HTTP error! status: ${D.status}`);
      let F = await D.json();
      console.log("Form submitted successfully:", F);
    } catch (D) {
      console.error("Failed to submit form:", D);
    }
  }
  function S(T) {
    (o = T), t(0, o);
  }
  return (
    (i.$$set = (T) => {
      "items" in T && t(1, (r = T.items)),
        "selected" in T && t(0, (o = T.selected)),
        "placeholder" in T && t(2, (n = T.placeholder)),
        "formInputName" in T && t(3, (u = T.formInputName)),
        "postURL" in T && t(4, (h = T.postURL)),
        "csrfToken" in T && t(5, (m = T.csrfToken));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 1 && t(0, (o = Array.isArray(o) ? o : [])),
        i.$$.dirty & 65 && o.length !== b.length && (_(), t(6, (b = [...o])));
    }),
    [o, r, n, u, h, m, b, S]
  );
}
var Zy = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, tD, eD, ut, {
          items: 1,
          selected: 0,
          placeholder: 2,
          formInputName: 3,
          postURL: 4,
          csrfToken: 5,
        });
    }
  },
  z9 = Zy;
var iD = (i) => ({}),
  N9 = (i) => ({});
function rD(i) {
  let e,
    t,
    r,
    o,
    n,
    u = i[4].icon,
    h = bi(u, i, i[3], N9);
  return {
    c() {
      (e = Je("button")),
        h && h.c(),
        (e.disabled = i[1]),
        J(e, "type", "button"),
        J(
          e,
          "class",
          (t =
            "p-2 m-2 text-sm font-medium focus:outline-none rounded-full " +
            (i[0]
              ? "text-blue-900 bg-blue-400 hover:bg-blue-600 hover:text-blue-900 dark:bg-blue-700 dark:text-blue-300 dark:hover:text-white dark:hover:bg-blue-700"
              : "text-gray-600 bg-slate-200 hover:bg-blue-200 hover:text-blue-800 dark:bg-gray-700 dark:text-gray-400 dark:hover:text-white dark:hover:bg-blue-700"))
        );
    },
    m(m, b) {
      Ne(m, e, b),
        h && h.m(e, null),
        (r = !0),
        o || ((n = Mt(e, "click", i[5])), (o = !0));
    },
    p(m, [b]) {
      h &&
        h.p &&
        (!r || b & 8) &&
        _i(h, u, m, m[3], r ? vi(u, m[3], b, iD) : xi(m[3]), N9),
        (!r || b & 2) && (e.disabled = m[1]),
        (!r ||
          (b & 1 &&
            t !==
              (t =
                "p-2 m-2 text-sm font-medium focus:outline-none rounded-full " +
                (m[0]
                  ? "text-blue-900 bg-blue-400 hover:bg-blue-600 hover:text-blue-900 dark:bg-blue-700 dark:text-blue-300 dark:hover:text-white dark:hover:bg-blue-700"
                  : "text-gray-600 bg-slate-200 hover:bg-blue-200 hover:text-blue-800 dark:bg-gray-700 dark:text-gray-400 dark:hover:text-white dark:hover:bg-blue-700")))) &&
          J(e, "class", t);
    },
    i(m) {
      r || (Oe(h, m), (r = !0));
    },
    o(m) {
      $e(h, m), (r = !1);
    },
    d(m) {
      m && ze(e), h && h.d(m), (o = !1), n();
    },
  };
}
function nD(i, e, t) {
  let { $$slots: r = {}, $$scope: o } = e,
    n = yo(),
    { permissionGranted: u = !1 } = e,
    { disabled: h = !1 } = e,
    m = () => n("click");
  return (
    (i.$$set = (b) => {
      "permissionGranted" in b && t(0, (u = b.permissionGranted)),
        "disabled" in b && t(1, (h = b.disabled)),
        "$$scope" in b && t(3, (o = b.$$scope));
    }),
    [u, h, n, o, r, m]
  );
}
var Ky = class extends dt {
    constructor(e) {
      super(), gt(this, e, nD, rD, ut, { permissionGranted: 0, disabled: 1 });
    }
  },
  ac = Ky;
function oD(i) {
  let e, t, r, o, n;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        (r = mi("path")),
        (o = mi("path")),
        (n = mi("path")),
        J(t, "stroke", "none"),
        J(t, "d", "M0 0h24v24H0z"),
        J(t, "fill", "none"),
        J(
          r,
          "d",
          "M9 5h10a2 2 0 0 1 2 2v10m-2 2h-14a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2"
        ),
        J(o, "d", "M3 7l9 6l.565 -.377m2.435 -1.623l6 -4"),
        J(n, "d", "M3 3l18 18"),
        J(e, "xmlns", "http://www.w3.org/2000/svg"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "fill", "none"),
        J(e, "stroke", "currentColor"),
        J(e, "stroke-width", "2"),
        J(e, "stroke-linecap", "round"),
        J(e, "stroke-linejoin", "round"),
        J(
          e,
          "class",
          "icon icon-tabler icons-tabler-outline icon-tabler-mail-off"
        );
    },
    m(u, h) {
      Ne(u, e, h), He(e, t), He(e, r), He(e, o), He(e, n);
    },
    p: yt,
    i: yt,
    o: yt,
    d(u) {
      u && ze(e);
    },
  };
}
var Jy = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, oD, ut, {});
    }
  },
  O9 = Jy;
function sD(i) {
  let e, t, r, o;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        (r = mi("path")),
        (o = mi("path")),
        J(t, "stroke", "none"),
        J(t, "d", "M0 0h24v24H0z"),
        J(t, "fill", "none"),
        J(
          r,
          "d",
          "M22 7.535v9.465a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-9.465l9.445 6.297l.116 .066a1 1 0 0 0 .878 0l.116 -.066l9.445 -6.297z"
        ),
        J(
          o,
          "d",
          "M19 4c1.08 0 2.027 .57 2.555 1.427l-9.555 6.37l-9.555 -6.37a2.999 2.999 0 0 1 2.354 -1.42l.201 -.007h14z"
        ),
        J(e, "xmlns", "http://www.w3.org/2000/svg"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "fill", "currentColor"),
        J(e, "class", "icon icon-tabler icons-tabler-filled icon-tabler-mail");
    },
    m(n, u) {
      Ne(n, e, u), He(e, t), He(e, r), He(e, o);
    },
    p: yt,
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
var Xy = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, sD, ut, {});
    }
  },
  B9 = Xy;
function aD(i) {
  let e, t, r, o;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("style")),
        (r = Xi(`.spinner_P7sC {
      transform-origin: center;
      animation: spinner_svv2 0.75s infinite linear;
    }
    @keyframes spinner_svv2 {
      100% {
        transform: rotate(360deg);
      }
    }
  `)),
        (o = mi("path")),
        J(
          o,
          "d",
          "M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"
        ),
        J(o, "class", "spinner_P7sC"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "xmlns", "http://www.w3.org/2000/svg");
    },
    m(n, u) {
      Ne(n, e, u), He(e, t), He(t, r), He(e, o);
    },
    p: yt,
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
var Yy = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, aD, ut, {});
    }
  },
  Em = Yy;
function lD(i) {
  let e, t;
  return (
    (e = new ac({
      props: {
        permissionGranted: i[0],
        $$slots: { icon: [dD] },
        $$scope: { ctx: i },
      },
    })),
    e.$on("click", i[2]),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p(r, o) {
        let n = {};
        o & 1 && (n.permissionGranted = r[0]),
          o & 256 && (n.$$scope = { dirty: o, ctx: r }),
          e.$set(n);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function cD(i) {
  let e, t;
  return (
    (e = new ac({
      props: {
        permissionGranted: i[0],
        $$slots: { icon: [hD] },
        $$scope: { ctx: i },
      },
    })),
    e.$on("click", i[3]),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p(r, o) {
        let n = {};
        o & 1 && (n.permissionGranted = r[0]),
          o & 256 && (n.$$scope = { dirty: o, ctx: r }),
          e.$set(n);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function uD(i) {
  let e, t;
  return (
    (e = new ac({
      props: {
        permissionGranted: i[0],
        $$slots: { icon: [pD] },
        $$scope: { ctx: i },
      },
    })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p(r, o) {
        let n = {};
        o & 1 && (n.permissionGranted = r[0]),
          o & 256 && (n.$$scope = { dirty: o, ctx: r }),
          e.$set(n);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function dD(i) {
  let e, t;
  return (
    (e = new O9({ props: { slot: "icon" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function hD(i) {
  let e, t;
  return (
    (e = new B9({ props: { slot: "icon" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function pD(i) {
  let e, t;
  return (
    (e = new Em({ props: { slot: "icon" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function fD(i) {
  let e,
    t,
    r,
    o,
    n = [uD, cD, lD],
    u = [];
  function h(m, b) {
    return m[1] ? 0 : m[0] ? 1 : 2;
  }
  return (
    (e = h(i, -1)),
    (t = u[e] = n[e](i)),
    {
      c() {
        t.c(), (r = Ji());
      },
      m(m, b) {
        u[e].m(m, b), Ne(m, r, b), (o = !0);
      },
      p(m, [b]) {
        let _ = e;
        (e = h(m, b)),
          e === _
            ? u[e].p(m, b)
            : (Yi(),
              $e(u[_], 1, 1, () => {
                u[_] = null;
              }),
              er(),
              (t = u[e]),
              t ? t.p(m, b) : ((t = u[e] = n[e](m)), t.c()),
              Oe(t, 1),
              t.m(r.parentNode, r));
      },
      i(m) {
        o || (Oe(t), (o = !0));
      },
      o(m) {
        $e(t), (o = !1);
      },
      d(m) {
        m && ze(r), u[e].d(m);
      },
    }
  );
}
function mD(i, e, t) {
  let { permissionGranted: r = !1 } = e,
    { addEmailSubscriptionEndpoint: o = "" } = e,
    { deleteEmailSubscriptionEndpoint: n = "" } = e,
    { permissionKey: u = "" } = e,
    { notificationTypeQueryParamKey: h = "" } = e,
    m = !1;
  async function b() {
    t(1, (m = !0));
    try {
      await fetch(o + `&${h}=` + u, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
      }),
        t(0, (r = !0)),
        Fn.success("Email notification turned on");
    } catch (S) {
      console.error("Failed to subscribe the user: ", S),
        Fn.error(`Failed to subscribe: ${S.message || "Unknown error"}`);
    } finally {
      t(1, (m = !1));
    }
  }
  async function _() {
    t(1, (m = !0));
    try {
      await fetch(n + `&${h}=` + u, {
        method: "DELETE",
        headers: { "Content-Type": "application/json" },
      }),
        t(0, (r = !1)),
        Fn.success("Email notification turned off");
    } catch (S) {
      console.error("Failed to unsubscribe the user: ", S),
        Fn.error(`Failed to unsubscribe: ${S.message || "Unknown error"}`);
    } finally {
      t(1, (m = !1));
    }
  }
  return (
    (i.$$set = (S) => {
      "permissionGranted" in S && t(0, (r = S.permissionGranted)),
        "addEmailSubscriptionEndpoint" in S &&
          t(4, (o = S.addEmailSubscriptionEndpoint)),
        "deleteEmailSubscriptionEndpoint" in S &&
          t(5, (n = S.deleteEmailSubscriptionEndpoint)),
        "permissionKey" in S && t(6, (u = S.permissionKey)),
        "notificationTypeQueryParamKey" in S &&
          t(7, (h = S.notificationTypeQueryParamKey));
    }),
    [r, m, b, _, o, n, u, h]
  );
}
var eb = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, mD, fD, ut, {
          permissionGranted: 0,
          addEmailSubscriptionEndpoint: 4,
          deleteEmailSubscriptionEndpoint: 5,
          permissionKey: 6,
          notificationTypeQueryParamKey: 7,
        });
    }
  },
  tb = eb;
function gD(i) {
  let e, t, r, o, n;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        (r = mi("path")),
        (o = mi("path")),
        (n = mi("path")),
        J(t, "stroke", "none"),
        J(t, "d", "M0 0h24v24H0z"),
        J(t, "fill", "none"),
        J(
          r,
          "d",
          "M9.346 5.353c.21 -.129 .428 -.246 .654 -.353a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3m-1 3h-13a4 4 0 0 0 2 -3v-3a6.996 6.996 0 0 1 1.273 -3.707"
        ),
        J(o, "d", "M9 17v1a3 3 0 0 0 6 0v-1"),
        J(n, "d", "M3 3l18 18"),
        J(e, "xmlns", "http://www.w3.org/2000/svg"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "fill", "none"),
        J(e, "stroke", "currentColor"),
        J(e, "stroke-width", "2"),
        J(e, "stroke-linecap", "round"),
        J(e, "stroke-linejoin", "round"),
        J(
          e,
          "class",
          "icon icon-tabler icons-tabler-outline icon-tabler-bell-off"
        );
    },
    m(u, h) {
      Ne(u, e, h), He(e, t), He(e, r), He(e, o), He(e, n);
    },
    p: yt,
    i: yt,
    o: yt,
    d(u) {
      u && ze(e);
    },
  };
}
var ib = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, gD, ut, {});
    }
  },
  R9 = ib;
function yD(i) {
  let e, t, r, o;
  return {
    c() {
      (e = mi("svg")),
        (t = mi("path")),
        (r = mi("path")),
        (o = mi("path")),
        J(t, "stroke", "none"),
        J(t, "d", "M0 0h24v24H0z"),
        J(t, "fill", "none"),
        J(
          r,
          "d",
          "M14.235 19c.865 0 1.322 1.024 .745 1.668a3.992 3.992 0 0 1 -2.98 1.332a3.992 3.992 0 0 1 -2.98 -1.332c-.552 -.616 -.158 -1.579 .634 -1.661l.11 -.006h4.471z"
        ),
        J(
          o,
          "d",
          "M12 2c1.358 0 2.506 .903 2.875 2.141l.046 .171l.008 .043a8.013 8.013 0 0 1 4.024 6.069l.028 .287l.019 .289v2.931l.021 .136a3 3 0 0 0 1.143 1.847l.167 .117l.162 .099c.86 .487 .56 1.766 -.377 1.864l-.116 .006h-16c-1.028 0 -1.387 -1.364 -.493 -1.87a3 3 0 0 0 1.472 -2.063l.021 -.143l.001 -2.97a8 8 0 0 1 3.821 -6.454l.248 -.146l.01 -.043a3.003 3.003 0 0 1 2.562 -2.29l.182 -.017l.176 -.004z"
        ),
        J(e, "xmlns", "http://www.w3.org/2000/svg"),
        J(e, "width", "24"),
        J(e, "height", "24"),
        J(e, "viewBox", "0 0 24 24"),
        J(e, "fill", "currentColor"),
        J(e, "class", "icon icon-tabler icons-tabler-filled icon-tabler-bell");
    },
    m(n, u) {
      Ne(n, e, u), He(e, t), He(e, r), He(e, o);
    },
    p: yt,
    i: yt,
    o: yt,
    d(n) {
      n && ze(e);
    },
  };
}
var rb = class extends dt {
    constructor(e) {
      super(), gt(this, e, null, yD, ut, {});
    }
  },
  U9 = rb;
function bD(i) {
  let e, t;
  return (
    (e = new ac({
      props: {
        permissionGranted: i[1],
        $$slots: { icon: [xD] },
        $$scope: { ctx: i },
      },
    })),
    e.$on("click", i[3]),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p(r, o) {
        let n = {};
        o & 2 && (n.permissionGranted = r[1]),
          o & 262144 && (n.$$scope = { dirty: o, ctx: r }),
          e.$set(n);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function vD(i) {
  let e, t;
  return (
    (e = new ac({
      props: {
        permissionGranted: i[1],
        $$slots: { icon: [wD] },
        $$scope: { ctx: i },
      },
    })),
    e.$on("click", i[4]),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p(r, o) {
        let n = {};
        o & 2 && (n.permissionGranted = r[1]),
          o & 262144 && (n.$$scope = { dirty: o, ctx: r }),
          e.$set(n);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function _D(i) {
  let e, t;
  return (
    (e = new ac({
      props: {
        permissionGranted: i[0],
        $$slots: { icon: [kD] },
        $$scope: { ctx: i },
      },
    })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p(r, o) {
        let n = {};
        o & 1 && (n.permissionGranted = r[0]),
          o & 262144 && (n.$$scope = { dirty: o, ctx: r }),
          e.$set(n);
      },
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function xD(i) {
  let e, t;
  return (
    (e = new R9({ props: { slot: "icon" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function wD(i) {
  let e, t;
  return (
    (e = new U9({ props: { slot: "icon" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function kD(i) {
  let e, t;
  return (
    (e = new Em({ props: { slot: "icon" } })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function SD(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h = [_D, vD, bD],
    m = [];
  function b(_, S) {
    return _[2] ? 0 : _[1] ? 1 : 2;
  }
  return (
    (r = b(i, -1)),
    (o = m[r] = h[r](i)),
    {
      c() {
        (e = Je("wc-toast")), (t = Ot()), o.c(), (n = Ji());
      },
      m(_, S) {
        Ne(_, e, S), Ne(_, t, S), m[r].m(_, S), Ne(_, n, S), (u = !0);
      },
      p(_, [S]) {
        let T = r;
        (r = b(_, S)),
          r === T
            ? m[r].p(_, S)
            : (Yi(),
              $e(m[T], 1, 1, () => {
                m[T] = null;
              }),
              er(),
              (o = m[r]),
              o ? o.p(_, S) : ((o = m[r] = h[r](_)), o.c()),
              Oe(o, 1),
              o.m(n.parentNode, n));
      },
      i(_) {
        u || (Oe(o), (u = !0));
      },
      o(_) {
        $e(o), (u = !1);
      },
      d(_) {
        _ && (ze(e), ze(t), ze(n)), m[r].d(_);
      },
    }
  );
}
function CD() {
  var i = window.navigator.userAgent,
    e = !!i.match(/WebKit/i),
    t = !!i.match(/iPad/i) || !!i.match(/iPhone/i);
  return !!(e && t);
}
async function ED() {
  window.Swal || (await import("https://cdn.jsdelivr.net/npm/sweetalert2@10"));
}
function nb(i) {
  return i && i.message && typeof i.message == "string";
}
function TD() {
  var i = window.navigator.userAgent,
    e = !!i.match(/iPad/i) || !!i.match(/iPhone/i),
    t = !!i.match(/WebKit/i),
    r = !!i.match(/Safari/i) && !i.match(/CriOS/i);
  return e && t && !r;
}
function MD(i, e, t) {
  let { vapidPublicKey: r = "" } = e,
    { subscribedEndpoints: o = [] } = e,
    { addSubscriptionEndpoint: n = "/subscribe-to-push-notifs" } = e,
    { deleteSubscriptionEndpoint: u = "/unsubscribe-from-push-notifs" } = e,
    { permissionKey: h } = e,
    { permissionGranted: m } = e,
    { notificationTypeQueryParamKey: b } = e;
  console.log(`${h}: ${m}`);
  let _ = !1,
    S = !1,
    T = !0,
    D = null,
    F = !1;
  Ur(async () => {
    ED();
    let Ie = window.navigator.standalone;
    (S = Ie || window.matchMedia("(display-mode: standalone)").matches),
      S || (T = !(CD() && !Ie)),
      (D = await (
        await navigator.serviceWorker.ready
      ).pushManager.getSubscription()),
      t(1, (_ = m && q()));
  });
  function q() {
    return (
      console.log(
        `checkIfDeviceIsSubscribed for ${h}, currentSubscription ${D} in ${o}?`
      ),
      !D || !o ? !1 : o.includes(D.endpoint)
    );
  }
  async function Q() {
    if (TD()) {
      Swal.fire({
        icon: "error",
        title: "Oops...",
        text: "Unfortunately, on iOS devices in-app notifications only work after installing the progressive web app (PWA). This is due to a sad boycott of PWAs from Apple, prompting them to be big pain in the neck to developers \u{1F625}.",
      });
      return;
    }
    t(2, (F = !0)),
      T ||
        (t(2, (F = !1)),
        console.log("platform does not support push notifications")),
      navigator.serviceWorker.register("/service-worker.js");
    try {
      let Ie = await navigator.serviceWorker.ready;
      D && (await D.unsubscribe());
      let Te = await Ie.pushManager.subscribe({
        userVisibleOnly: !0,
        applicationServerKey: Y(r),
      });
      try {
        await ce(Te),
          (D = Te),
          t(1, (_ = !0)),
          console.debug("Successfully subscribed to push notifications"),
          Fn.success("Push notification turned on");
      } catch (fe) {
        throw (
          (Fn.error(`Failed to subscribe: ${fe.message || "Unknown error"}`),
          console.error("Failed to send subscription to backend: ", fe),
          await Te.unsubscribe(),
          fe)
        );
      }
    } catch (Ie) {
      Fn.error(
        `Failed to subscribe: ${backendError.message || "Unknown error"}`
      ),
        console.error("Failed to subscribe the user: ", Ie),
        nb(Ie) &&
          Fn.error(`Failed to subscribe: ${Ie.message || "Unknown error"}`),
        setTimeout(() => {
          t(1, (_ = !1));
        }, 250);
    } finally {
      t(2, (F = !1));
    }
  }
  async function te() {
    if ((t(2, (F = !0)), D))
      try {
        try {
          await be(D),
            (D = null),
            t(1, (_ = !1)),
            Fn.success("Push notification turned off");
        } catch (Ie) {
          Fn.error(`Failed to unsubscribe: ${Ie.message || "Unknown error"}`),
            console.error(
              "Failed to notify backend about the unsubscription: ",
              Ie
            ),
            nb(Ie) &&
              Fn.error(
                `Failed to update subscription status: ${
                  Ie.message || "Unknown error"
                }`
              ),
            t(1, (_ = !0));
        }
      } catch (Ie) {
        console.error("Failed to unsubscribe the user locally: ", Ie),
          nb(Ie) &&
            Fn.error(`Failed to unsubscribe: ${Ie.message || "Unknown error"}`);
      }
    t(2, (F = !1));
  }
  async function ce(Ie) {
    let Te = n + `&${b}=` + h;
    console.log(Te),
      await fetch(Te, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(Ie),
      });
  }
  async function be(Ie) {
    let Te = u + `&${b}=` + h;
    console.log(Te),
      await fetch(Te, {
        method: "DELETE",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ endpoint: Ie.endpoint }),
      });
  }
  let Y = (Ie) => {
    let Te = "=".repeat((4 - (Ie.length % 4)) % 4),
      fe = (Ie + Te).replace(/\-/g, "+").replace(/_/g, "/"),
      Le = atob(fe),
      De = new Uint8Array(Le.length);
    for (let st = 0; st < Le.length; ++st) De[st] = Le.charCodeAt(st);
    return De;
  };
  return (
    (i.$$set = (Ie) => {
      "vapidPublicKey" in Ie && t(5, (r = Ie.vapidPublicKey)),
        "subscribedEndpoints" in Ie && t(6, (o = Ie.subscribedEndpoints)),
        "addSubscriptionEndpoint" in Ie &&
          t(7, (n = Ie.addSubscriptionEndpoint)),
        "deleteSubscriptionEndpoint" in Ie &&
          t(8, (u = Ie.deleteSubscriptionEndpoint)),
        "permissionKey" in Ie && t(9, (h = Ie.permissionKey)),
        "permissionGranted" in Ie && t(0, (m = Ie.permissionGranted)),
        "notificationTypeQueryParamKey" in Ie &&
          t(10, (b = Ie.notificationTypeQueryParamKey));
    }),
    [m, _, F, Q, te, r, o, n, u, h, b]
  );
}
var ob = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, MD, SD, ut, {
          vapidPublicKey: 5,
          subscribedEndpoints: 6,
          addSubscriptionEndpoint: 7,
          deleteSubscriptionEndpoint: 8,
          permissionKey: 9,
          permissionGranted: 0,
          notificationTypeQueryParamKey: 10,
        });
    }
  },
  Pp = ob;
function AD(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h,
    m = i[0].title + "",
    b,
    _,
    S,
    T,
    D = i[0].subtitle + "",
    F,
    q,
    Q,
    te,
    ce,
    be,
    Y,
    Ie,
    Te,
    fe,
    Le,
    De,
    st = i[1].title + "",
    qe,
    zt,
    Rt,
    Gt,
    qt = i[1].subtitle + "",
    ct,
    vt,
    ht,
    Vt,
    hi,
    Pi,
    Zt;
  return (
    (te = new Pp({
      props: {
        vapidPublicKey: i[2],
        subscribedEndpoints: i[3],
        addSubscriptionEndpoint: i[5],
        deleteSubscriptionEndpoint: i[6],
        notificationTypeQueryParamKey: i[4],
        permissionKey: i[0].permission,
        permissionGranted: lc("push", i[0].platforms_list),
      },
    })),
    (be = new tb({
      props: {
        notificationTypeQueryParamKey: i[4],
        permissionKey: i[0].permission,
        addEmailSubscriptionEndpoint: i[7],
        deleteEmailSubscriptionEndpoint: i[8],
        permissionGranted: lc("email", i[0].platforms_list),
      },
    })),
    (Vt = new Pp({
      props: {
        vapidPublicKey: i[2],
        subscribedEndpoints: i[3],
        addSubscriptionEndpoint: i[5],
        deleteSubscriptionEndpoint: i[6],
        notificationTypeQueryParamKey: i[4],
        permissionKey: i[1].permission,
        permissionGranted: lc("push", i[1].platforms_list),
      },
    })),
    (Pi = new tb({
      props: {
        notificationTypeQueryParamKey: i[4],
        permissionKey: i[1].permission,
        addEmailSubscriptionEndpoint: i[7],
        deleteEmailSubscriptionEndpoint: i[8],
        permissionGranted: lc("email", i[1].platforms_list),
      },
    })),
    {
      c() {
        (e = Je("wc-toast")),
          (t = Ot()),
          (r = Je("div")),
          (o = Je("div")),
          (n = Je("div")),
          (u = Je("div")),
          (h = Je("span")),
          (b = Xi(m)),
          (_ = Ot()),
          (S = Je("div")),
          (T = Je("span")),
          (F = Xi(D)),
          (q = Ot()),
          (Q = Je("div")),
          Yt(te.$$.fragment),
          (ce = Ot()),
          Yt(be.$$.fragment),
          (Y = Ot()),
          (Ie = Je("div")),
          (Te = Je("div")),
          (fe = Je("div")),
          (Le = Je("div")),
          (De = Je("span")),
          (qe = Xi(st)),
          (zt = Ot()),
          (Rt = Je("div")),
          (Gt = Je("span")),
          (ct = Xi(qt)),
          (vt = Ot()),
          (ht = Je("div")),
          Yt(Vt.$$.fragment),
          (hi = Ot()),
          Yt(Pi.$$.fragment),
          J(
            u,
            "class",
            "ms-3 text-sm sm:text-base font-medium text-gray-900 dark:text-gray-300"
          ),
          J(
            S,
            "class",
            "ms-3 text-sm font-light text-gray-900 dark:text-gray-300"
          ),
          J(o, "class", "inline-flex items-center cursor-pointer my-2"),
          J(Q, "class", "flex flex-row justify-center"),
          J(
            r,
            "class",
            "bg-slate-100 dark:bg-slate-800 rounded-xl p-2 md:p-4 my-2"
          ),
          J(
            Le,
            "class",
            "ms-3 text-sm sm:text-base font-medium text-gray-900 dark:text-gray-300"
          ),
          J(
            Rt,
            "class",
            "ms-3 text-sm font-light text-gray-900 dark:text-gray-300"
          ),
          J(Te, "class", "inline-flex items-center cursor-pointer my-2"),
          J(ht, "class", "flex flex-row justify-center"),
          J(
            Ie,
            "class",
            "bg-slate-100 dark:bg-slate-800 rounded-xl p-2 md:p-4 my-2"
          );
      },
      m(Re, Ce) {
        Ne(Re, e, Ce),
          Ne(Re, t, Ce),
          Ne(Re, r, Ce),
          He(r, o),
          He(o, n),
          He(n, u),
          He(u, h),
          He(h, b),
          He(n, _),
          He(n, S),
          He(S, T),
          He(T, F),
          He(r, q),
          He(r, Q),
          Jt(te, Q, null),
          He(Q, ce),
          Jt(be, Q, null),
          Ne(Re, Y, Ce),
          Ne(Re, Ie, Ce),
          He(Ie, Te),
          He(Te, fe),
          He(fe, Le),
          He(Le, De),
          He(De, qe),
          He(fe, zt),
          He(fe, Rt),
          He(Rt, Gt),
          He(Gt, ct),
          He(Ie, vt),
          He(Ie, ht),
          Jt(Vt, ht, null),
          He(ht, hi),
          Jt(Pi, ht, null),
          (Zt = !0);
      },
      p(Re, [Ce]) {
        (!Zt || Ce & 1) && m !== (m = Re[0].title + "") && fn(b, m),
          (!Zt || Ce & 1) && D !== (D = Re[0].subtitle + "") && fn(F, D);
        let Bt = {};
        Ce & 4 && (Bt.vapidPublicKey = Re[2]),
          Ce & 8 && (Bt.subscribedEndpoints = Re[3]),
          Ce & 32 && (Bt.addSubscriptionEndpoint = Re[5]),
          Ce & 64 && (Bt.deleteSubscriptionEndpoint = Re[6]),
          Ce & 16 && (Bt.notificationTypeQueryParamKey = Re[4]),
          Ce & 1 && (Bt.permissionKey = Re[0].permission),
          Ce & 1 && (Bt.permissionGranted = lc("push", Re[0].platforms_list)),
          te.$set(Bt);
        let ei = {};
        Ce & 16 && (ei.notificationTypeQueryParamKey = Re[4]),
          Ce & 1 && (ei.permissionKey = Re[0].permission),
          Ce & 128 && (ei.addEmailSubscriptionEndpoint = Re[7]),
          Ce & 256 && (ei.deleteEmailSubscriptionEndpoint = Re[8]),
          Ce & 1 && (ei.permissionGranted = lc("email", Re[0].platforms_list)),
          be.$set(ei),
          (!Zt || Ce & 2) && st !== (st = Re[1].title + "") && fn(qe, st),
          (!Zt || Ce & 2) && qt !== (qt = Re[1].subtitle + "") && fn(ct, qt);
        let Li = {};
        Ce & 4 && (Li.vapidPublicKey = Re[2]),
          Ce & 8 && (Li.subscribedEndpoints = Re[3]),
          Ce & 32 && (Li.addSubscriptionEndpoint = Re[5]),
          Ce & 64 && (Li.deleteSubscriptionEndpoint = Re[6]),
          Ce & 16 && (Li.notificationTypeQueryParamKey = Re[4]),
          Ce & 2 && (Li.permissionKey = Re[1].permission),
          Ce & 2 && (Li.permissionGranted = lc("push", Re[1].platforms_list)),
          Vt.$set(Li);
        let it = {};
        Ce & 16 && (it.notificationTypeQueryParamKey = Re[4]),
          Ce & 2 && (it.permissionKey = Re[1].permission),
          Ce & 128 && (it.addEmailSubscriptionEndpoint = Re[7]),
          Ce & 256 && (it.deleteEmailSubscriptionEndpoint = Re[8]),
          Ce & 2 && (it.permissionGranted = lc("email", Re[1].platforms_list)),
          Pi.$set(it);
      },
      i(Re) {
        Zt ||
          (Oe(te.$$.fragment, Re),
          Oe(be.$$.fragment, Re),
          Oe(Vt.$$.fragment, Re),
          Oe(Pi.$$.fragment, Re),
          (Zt = !0));
      },
      o(Re) {
        $e(te.$$.fragment, Re),
          $e(be.$$.fragment, Re),
          $e(Vt.$$.fragment, Re),
          $e(Pi.$$.fragment, Re),
          (Zt = !1);
      },
      d(Re) {
        Re && (ze(e), ze(t), ze(r), ze(Y), ze(Ie)),
          Xt(te),
          Xt(be),
          Xt(Vt),
          Xt(Pi);
      },
    }
  );
}
function lc(i, e) {
  return e.some((t) => t.platform === i && t.granted);
}
function ID(i, e, t) {
  let { permissionDailyNotif: r } = e,
    { permissionPartnerActivity: o } = e,
    { vapidPublicKey: n = "" } = e,
    { subscribedEndpoints: u = [] } = e,
    { notificationTypeQueryParamKey: h = "notifType" } = e,
    { addPushSubscriptionEndpoint: m = "" } = e,
    { deletePushSubscriptionEndpoint: b = "" } = e,
    { addEmailSubscriptionEndpoint: _ = "" } = e,
    { deleteEmailSubscriptionEndpoint: S = "" } = e,
    { addSmsSubscriptionEndpoint: T = "" } = e,
    { deleteSmsSubscriptionEndpoint: D = "" } = e,
    { phoneSubscriptionEnabled: F = !1 } = e;
  return (
    console.log(r),
    console.log(o),
    (i.$$set = (q) => {
      "permissionDailyNotif" in q && t(0, (r = q.permissionDailyNotif)),
        "permissionPartnerActivity" in q &&
          t(1, (o = q.permissionPartnerActivity)),
        "vapidPublicKey" in q && t(2, (n = q.vapidPublicKey)),
        "subscribedEndpoints" in q && t(3, (u = q.subscribedEndpoints)),
        "notificationTypeQueryParamKey" in q &&
          t(4, (h = q.notificationTypeQueryParamKey)),
        "addPushSubscriptionEndpoint" in q &&
          t(5, (m = q.addPushSubscriptionEndpoint)),
        "deletePushSubscriptionEndpoint" in q &&
          t(6, (b = q.deletePushSubscriptionEndpoint)),
        "addEmailSubscriptionEndpoint" in q &&
          t(7, (_ = q.addEmailSubscriptionEndpoint)),
        "deleteEmailSubscriptionEndpoint" in q &&
          t(8, (S = q.deleteEmailSubscriptionEndpoint)),
        "addSmsSubscriptionEndpoint" in q &&
          t(9, (T = q.addSmsSubscriptionEndpoint)),
        "deleteSmsSubscriptionEndpoint" in q &&
          t(10, (D = q.deleteSmsSubscriptionEndpoint)),
        "phoneSubscriptionEnabled" in q &&
          t(11, (F = q.phoneSubscriptionEnabled));
    }),
    [r, o, n, u, h, m, b, _, S, T, D, F]
  );
}
var sb = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, ID, AD, ut, {
          permissionDailyNotif: 0,
          permissionPartnerActivity: 1,
          vapidPublicKey: 2,
          subscribedEndpoints: 3,
          notificationTypeQueryParamKey: 4,
          addPushSubscriptionEndpoint: 5,
          deletePushSubscriptionEndpoint: 6,
          addEmailSubscriptionEndpoint: 7,
          deleteEmailSubscriptionEndpoint: 8,
          addSmsSubscriptionEndpoint: 9,
          deleteSmsSubscriptionEndpoint: 10,
          phoneSubscriptionEnabled: 11,
        });
    }
  },
  V9 = sb;
var vd = {
  version: 4,
  country_calling_codes: {
    1: [
      "US",
      "AG",
      "AI",
      "AS",
      "BB",
      "BM",
      "BS",
      "CA",
      "DM",
      "DO",
      "GD",
      "GU",
      "JM",
      "KN",
      "KY",
      "LC",
      "MP",
      "MS",
      "PR",
      "SX",
      "TC",
      "TT",
      "VC",
      "VG",
      "VI",
    ],
    7: ["RU", "KZ"],
    20: ["EG"],
    27: ["ZA"],
    30: ["GR"],
    31: ["NL"],
    32: ["BE"],
    33: ["FR"],
    34: ["ES"],
    36: ["HU"],
    39: ["IT", "VA"],
    40: ["RO"],
    41: ["CH"],
    43: ["AT"],
    44: ["GB", "GG", "IM", "JE"],
    45: ["DK"],
    46: ["SE"],
    47: ["NO", "SJ"],
    48: ["PL"],
    49: ["DE"],
    51: ["PE"],
    52: ["MX"],
    53: ["CU"],
    54: ["AR"],
    55: ["BR"],
    56: ["CL"],
    57: ["CO"],
    58: ["VE"],
    60: ["MY"],
    61: ["AU", "CC", "CX"],
    62: ["ID"],
    63: ["PH"],
    64: ["NZ"],
    65: ["SG"],
    66: ["TH"],
    81: ["JP"],
    82: ["KR"],
    84: ["VN"],
    86: ["CN"],
    90: ["TR"],
    91: ["IN"],
    92: ["PK"],
    93: ["AF"],
    94: ["LK"],
    95: ["MM"],
    98: ["IR"],
    211: ["SS"],
    212: ["MA", "EH"],
    213: ["DZ"],
    216: ["TN"],
    218: ["LY"],
    220: ["GM"],
    221: ["SN"],
    222: ["MR"],
    223: ["ML"],
    224: ["GN"],
    225: ["CI"],
    226: ["BF"],
    227: ["NE"],
    228: ["TG"],
    229: ["BJ"],
    230: ["MU"],
    231: ["LR"],
    232: ["SL"],
    233: ["GH"],
    234: ["NG"],
    235: ["TD"],
    236: ["CF"],
    237: ["CM"],
    238: ["CV"],
    239: ["ST"],
    240: ["GQ"],
    241: ["GA"],
    242: ["CG"],
    243: ["CD"],
    244: ["AO"],
    245: ["GW"],
    246: ["IO"],
    247: ["AC"],
    248: ["SC"],
    249: ["SD"],
    250: ["RW"],
    251: ["ET"],
    252: ["SO"],
    253: ["DJ"],
    254: ["KE"],
    255: ["TZ"],
    256: ["UG"],
    257: ["BI"],
    258: ["MZ"],
    260: ["ZM"],
    261: ["MG"],
    262: ["RE", "YT"],
    263: ["ZW"],
    264: ["NA"],
    265: ["MW"],
    266: ["LS"],
    267: ["BW"],
    268: ["SZ"],
    269: ["KM"],
    290: ["SH", "TA"],
    291: ["ER"],
    297: ["AW"],
    298: ["FO"],
    299: ["GL"],
    350: ["GI"],
    351: ["PT"],
    352: ["LU"],
    353: ["IE"],
    354: ["IS"],
    355: ["AL"],
    356: ["MT"],
    357: ["CY"],
    358: ["FI", "AX"],
    359: ["BG"],
    370: ["LT"],
    371: ["LV"],
    372: ["EE"],
    373: ["MD"],
    374: ["AM"],
    375: ["BY"],
    376: ["AD"],
    377: ["MC"],
    378: ["SM"],
    380: ["UA"],
    381: ["RS"],
    382: ["ME"],
    383: ["XK"],
    385: ["HR"],
    386: ["SI"],
    387: ["BA"],
    389: ["MK"],
    420: ["CZ"],
    421: ["SK"],
    423: ["LI"],
    500: ["FK"],
    501: ["BZ"],
    502: ["GT"],
    503: ["SV"],
    504: ["HN"],
    505: ["NI"],
    506: ["CR"],
    507: ["PA"],
    508: ["PM"],
    509: ["HT"],
    590: ["GP", "BL", "MF"],
    591: ["BO"],
    592: ["GY"],
    593: ["EC"],
    594: ["GF"],
    595: ["PY"],
    596: ["MQ"],
    597: ["SR"],
    598: ["UY"],
    599: ["CW", "BQ"],
    670: ["TL"],
    672: ["NF"],
    673: ["BN"],
    674: ["NR"],
    675: ["PG"],
    676: ["TO"],
    677: ["SB"],
    678: ["VU"],
    679: ["FJ"],
    680: ["PW"],
    681: ["WF"],
    682: ["CK"],
    683: ["NU"],
    685: ["WS"],
    686: ["KI"],
    687: ["NC"],
    688: ["TV"],
    689: ["PF"],
    690: ["TK"],
    691: ["FM"],
    692: ["MH"],
    850: ["KP"],
    852: ["HK"],
    853: ["MO"],
    855: ["KH"],
    856: ["LA"],
    880: ["BD"],
    886: ["TW"],
    960: ["MV"],
    961: ["LB"],
    962: ["JO"],
    963: ["SY"],
    964: ["IQ"],
    965: ["KW"],
    966: ["SA"],
    967: ["YE"],
    968: ["OM"],
    970: ["PS"],
    971: ["AE"],
    972: ["IL"],
    973: ["BH"],
    974: ["QA"],
    975: ["BT"],
    976: ["MN"],
    977: ["NP"],
    992: ["TJ"],
    993: ["TM"],
    994: ["AZ"],
    995: ["GE"],
    996: ["KG"],
    998: ["UZ"],
  },
  countries: {
    AC: [
      "247",
      "00",
      "(?:[01589]\\d|[46])\\d{4}",
      [5, 6],
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["6[2-467]\\d{3}", [5]],
        ["4\\d{4}", [5]],
        0,
        0,
        0,
        0,
        ["(?:0[1-9]|[1589]\\d)\\d{4}", [6]],
      ],
    ],
    AD: [
      "376",
      "00",
      "(?:1|6\\d)\\d{7}|[135-9]\\d{5}",
      [6, 8, 9],
      [
        ["(\\d{3})(\\d{3})", "$1 $2", ["[135-9]"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["1"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["6"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["[78]\\d{5}", [6]],
        ["690\\d{6}|[356]\\d{5}", [6, 9]],
        ["180[02]\\d{4}", [8]],
        ["[19]\\d{5}", [6]],
      ],
    ],
    AE: [
      "971",
      "00",
      "(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",
      [5, 6, 7, 8, 9, 10, 11, 12],
      [
        ["(\\d{3})(\\d{2,9})", "$1 $2", ["60|8"]],
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["[236]|[479][2-8]"], "0$1"],
        ["(\\d{3})(\\d)(\\d{5})", "$1 $2 $3", ["[479]"]],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["5"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["[2-4679][2-8]\\d{6}", [8]],
        ["5[024-68]\\d{7}", [9]],
        ["400\\d{6}|800\\d{2,9}"],
        ["900[02]\\d{5}", [9]],
        0,
        0,
        ["600[25]\\d{5}", [9]],
        0,
        0,
        ["700[05]\\d{5}", [9]],
      ],
    ],
    AF: [
      "93",
      "00",
      "[2-7]\\d{8}",
      [9],
      [["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[2-7]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [["(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}"], ["7\\d{8}"]],
    ],
    AG: [
      "1",
      "011",
      "(?:268|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([457]\\d{6})$|1",
      "268$1",
      0,
      "268",
      [
        ["268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}"],
        ["268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        0,
        ["26840[69]\\d{4}"],
        ["26848[01]\\d{4}"],
      ],
    ],
    AI: [
      "1",
      "011",
      "(?:264|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2457]\\d{6})$|1",
      "264$1",
      0,
      "264",
      [
        ["264(?:292|4(?:6[12]|9[78]))\\d{4}"],
        ["264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        0,
        ["264724\\d{4}"],
      ],
    ],
    AL: [
      "355",
      "00",
      "(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",
      [6, 7, 8, 9],
      [
        ["(\\d{3})(\\d{3,4})", "$1 $2", ["80|9"], "0$1"],
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["4[2-6]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[2358][2-5]|4"], "0$1"],
        ["(\\d{3})(\\d{5})", "$1 $2", ["[23578]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["6"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",
          [8],
        ],
        ["6(?:[78][2-9]|9\\d)\\d{6}", [9]],
        ["800\\d{4}", [7]],
        ["900[1-9]\\d\\d", [6]],
        ["700[2-9]\\d{4}", [8]],
        0,
        0,
        0,
        0,
        ["808[1-9]\\d\\d", [6]],
      ],
    ],
    AM: [
      "374",
      "00",
      "(?:[1-489]\\d|55|60|77)\\d{6}",
      [8],
      [
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["[89]0"], "0 $1"],
        ["(\\d{3})(\\d{5})", "$1 $2", ["2|3[12]"], "(0$1)"],
        ["(\\d{2})(\\d{6})", "$1 $2", ["1|47"], "(0$1)"],
        ["(\\d{2})(\\d{6})", "$1 $2", ["[3-9]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}",
        ],
        ["(?:33|4[1349]|55|77|88|9[13-9])\\d{6}"],
        ["800\\d{5}"],
        ["90[016]\\d{5}"],
        0,
        0,
        0,
        0,
        ["60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|9[0-2])\\d{4}"],
        ["80[1-4]\\d{5}"],
      ],
    ],
    AO: [
      "244",
      "00",
      "[29]\\d{8}",
      [9],
      [["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[29]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}"], ["9[1-59]\\d{7}"]],
    ],
    AR: [
      "54",
      "00",
      "(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",
      [10, 11],
      [
        [
          "(\\d{4})(\\d{2})(\\d{4})",
          "$1 $2-$3",
          [
            "2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])",
            "2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)",
            "2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]",
            "2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]",
          ],
          "0$1",
          1,
        ],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1 $2-$3", ["1"], "0$1", 1],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1-$2-$3", ["[68]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2-$3", ["[23]"], "0$1", 1],
        [
          "(\\d)(\\d{4})(\\d{2})(\\d{4})",
          "$2 15-$3-$4",
          [
            "9(?:2[2-469]|3[3-578])",
            "9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))",
            "9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)",
            "9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]",
            "9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]",
          ],
          "0$1",
          0,
          "$1 $2 $3-$4",
        ],
        [
          "(\\d)(\\d{2})(\\d{4})(\\d{4})",
          "$2 15-$3-$4",
          ["91"],
          "0$1",
          0,
          "$1 $2 $3-$4",
        ],
        ["(\\d{3})(\\d{3})(\\d{5})", "$1-$2-$3", ["8"], "0$1"],
        [
          "(\\d)(\\d{3})(\\d{3})(\\d{4})",
          "$2 15-$3-$4",
          ["9"],
          "0$1",
          0,
          "$1 $2 $3-$4",
        ],
      ],
      "0",
      0,
      "0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?",
      "9$1",
      0,
      0,
      [
        [
          "3888[013-9]\\d{5}|3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:657|9(?:54|66))|3(?:7(?:55|77)|865))[2-8]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:284|3(?:02|23)|920)|3(?:4(?:46|8[27]|92)|541|878))[2-7]\\d{5}|(?:2(?:(?:26|62)2|320|477|9(?:42|83))|3(?:329|4(?:62|76|89)|564))[2-6]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[235][4-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|[17][2-6]|3[4-6]|[58][3-6])))\\d{6}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",
          [10],
        ],
        [
          "93(?:7(?:1[15]|81)[46]|8(?:(?:21|4[16]|69|9[12])[46]|88[013-9]))\\d{5}|9(?:2(?:657|9(?:54|66))|3(?:7(?:55|77)|865))[2-8]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:284|3(?:02|23)|920)|3(?:4(?:46|8[27]|92)|541|878))[2-7]\\d{5}|9(?:2(?:(?:26|62)2|320|477|9(?:42|83))|3(?:329|4(?:62|76|89)|564))[2-6]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[235][4-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|[17][2-6]|3[4-6]|[58][3-6]))))\\d{6}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",
        ],
        ["800\\d{7,8}"],
        ["60[04579]\\d{7}", [10]],
        0,
        0,
        ["810\\d{7}", [10]],
      ],
    ],
    AS: [
      "1",
      "011",
      "(?:[58]\\d\\d|684|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([267]\\d{6})$|1",
      "684$1",
      0,
      "684",
      [
        ["6846(?:22|33|44|55|77|88|9[19])\\d{4}"],
        ["684(?:2(?:48|5[2468]|7[26])|7(?:3[13]|70|82))\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    AT: [
      "43",
      "00",
      "1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",
      [4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
      [
        ["(\\d)(\\d{3,12})", "$1 $2", ["1(?:11|[2-9])"], "0$1"],
        ["(\\d{3})(\\d{2})", "$1 $2", ["517"], "0$1"],
        ["(\\d{2})(\\d{3,5})", "$1 $2", ["5[079]"], "0$1"],
        [
          "(\\d{3})(\\d{3,10})",
          "$1 $2",
          ["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],
          "0$1",
        ],
        ["(\\d{4})(\\d{3,9})", "$1 $2", ["[2-467]|5[2-6]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["5"], "0$1"],
        ["(\\d{2})(\\d{4})(\\d{4,7})", "$1 $2 $3", ["5"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "1(?:11\\d|[2-9]\\d{3,11})|(?:316|463|(?:51|66|73)2)\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-8]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}",
        ],
        [
          "6(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}",
          [7, 8, 9, 10, 11, 12, 13],
        ],
        ["800\\d{6,10}", [9, 10, 11, 12, 13]],
        ["(?:8[69][2-68]|9(?:0[01]|3[019]))\\d{6,10}", [9, 10, 11, 12, 13]],
        0,
        0,
        0,
        0,
        [
          "5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",
          [5, 6, 7, 8, 9, 10, 11, 12, 13],
        ],
        ["8(?:10|2[018])\\d{6,10}|828\\d{5}", [8, 9, 10, 11, 12, 13]],
      ],
    ],
    AU: [
      "61",
      "001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011",
      "1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",
      [5, 6, 7, 8, 9, 10, 12],
      [
        ["(\\d{2})(\\d{3,4})", "$1 $2", ["16"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{2,4})", "$1 $2 $3", ["16"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["14|4"], "0$1"],
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["[2378]"], "(0$1)"],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["1(?:30|[89])"]],
      ],
      "0",
      0,
      "(183[12])|0",
      0,
      0,
      0,
      [
        [
          "(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",
          [9],
        ],
        [
          "4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",
          [9],
        ],
        ["180(?:0\\d{3}|2)\\d{3}", [7, 10]],
        ["190[0-26]\\d{6}", [10]],
        0,
        0,
        0,
        ["163\\d{2,6}", [5, 6, 7, 8, 9]],
        ["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}", [9]],
        ["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}", [6, 8, 10, 12]],
      ],
      "0011",
    ],
    AW: [
      "297",
      "00",
      "(?:[25-79]\\d\\d|800)\\d{4}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[25-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["5(?:2\\d|8[1-9])\\d{4}"],
        [
          "(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}",
        ],
        ["800\\d{4}"],
        ["900\\d{4}"],
        0,
        0,
        0,
        0,
        ["(?:28\\d|501)\\d{4}"],
      ],
    ],
    AX: [
      "358",
      "00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))",
      "2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",
      [5, 6, 7, 8, 9, 10, 11, 12],
      0,
      "0",
      0,
      0,
      0,
      0,
      "18",
      [
        ["18[1-8]\\d{3,6}", [6, 7, 8, 9]],
        ["4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}", [6, 7, 8, 9, 10]],
        ["800\\d{4,6}", [7, 8, 9]],
        ["[67]00\\d{5,6}", [8, 9]],
        0,
        0,
        [
          "20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",
        ],
      ],
      "00",
    ],
    AZ: [
      "994",
      "00",
      "365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["90"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["1[28]|2|365|46", "1[28]|2|365[45]|46", "1[28]|2|365(?:4|5[02])|46"],
          "(0$1)",
        ],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[13-9]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2[12]428|3655[02])\\d{4}|(?:2(?:22[0-79]|63[0-28])|3654)\\d{5}|(?:(?:1[28]|46)\\d|2(?:[014-6]2|[23]3))\\d{6}",
        ],
        ["36554\\d{4}|(?:[16]0|4[04]|5[015]|7[07]|99)\\d{7}"],
        ["88\\d{7}"],
        ["900200\\d{3}"],
      ],
    ],
    BA: [
      "387",
      "00",
      "6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",
      [8, 9],
      [
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["6[1-3]|[7-9]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2-$3", ["[3-5]|6[56]"], "0$1"],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{3})", "$1 $2 $3 $4", ["6"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",
          [8],
        ],
        ["6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}"],
        ["8[08]\\d{6}", [8]],
        ["9[0246]\\d{6}", [8]],
        0,
        0,
        ["703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}", [8]],
        0,
        0,
        ["8[12]\\d{6}", [8]],
      ],
    ],
    BB: [
      "1",
      "011",
      "(?:246|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "246$1",
      0,
      "246",
      [
        [
          "246521[0369]\\d{3}|246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",
        ],
        [
          "246(?:(?:2(?:[3568]\\d|4[0-57-9])|3(?:5[2-9]|6[0-6])|4(?:46|5\\d)|69[5-7]|8(?:[2-5]\\d|83))\\d|52(?:1[147]|20))\\d{3}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["(?:246976|900[2-9]\\d\\d)\\d{4}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        [
          "246(?:292|367|4(?:1[7-9]|3[01]|4[47-9]|67)|7(?:1[2-9]|2\\d|3[016]|53))\\d{4}",
        ],
        0,
        ["24631\\d{5}"],
      ],
    ],
    BD: [
      "880",
      "00",
      "[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",
      [6, 7, 8, 9, 10],
      [
        ["(\\d{2})(\\d{4,6})", "$1-$2", ["31[5-8]|[459]1"], "0$1"],
        [
          "(\\d{3})(\\d{3,7})",
          "$1-$2",
          [
            "3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]",
          ],
          "0$1",
        ],
        ["(\\d{4})(\\d{3,6})", "$1-$2", ["[13-9]|22"], "0$1"],
        ["(\\d)(\\d{7,8})", "$1-$2", ["2"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2(?:222|[45]\\d)\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}",
        ],
        ["(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}", [10]],
        ["80[03]\\d{7}", [10]],
        0,
        0,
        0,
        0,
        0,
        ["96(?:0[469]|1[0-47]|3[389]|43|6[69]|7[78])\\d{6}", [10]],
      ],
    ],
    BE: [
      "32",
      "00",
      "4\\d{8}|[1-9]\\d{7}",
      [8, 9],
      [
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["(?:80|9)0"], "0$1"],
        [
          "(\\d)(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["[239]|4[23]"],
          "0$1",
        ],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[15-8]"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["4"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",
          [8],
        ],
        ["4[5-9]\\d{7}", [9]],
        ["800[1-9]\\d{4}", [8]],
        ["(?:70(?:2[0-57]|3[04-7]|44|6[4-69]|7[0579])|90\\d\\d)\\d{4}", [8]],
        0,
        0,
        ["78(?:0[57]|1[014-8]|2[25]|3[15-8]|48|[56]0|7[06-8]|9\\d)\\d{4}", [8]],
        0,
        0,
        ["7879\\d{4}", [8]],
      ],
    ],
    BF: [
      "226",
      "00",
      "[025-7]\\d{7}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[025-7]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:0(?:49|5[23]|6[5-7]|9[016-9])|4(?:4[569]|5[4-6]|6[5-7]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}",
        ],
        ["(?:0[1-35-7]|5[0-8]|[67]\\d)\\d{6}"],
      ],
    ],
    BG: [
      "359",
      "00",
      "00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",
      [6, 7, 8, 9, 12],
      [
        ["(\\d)(\\d)(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["2"], "0$1"],
        ["(\\d{3})(\\d{4})", "$1 $2", ["43[1-6]|70[1-9]"], "0$1"],
        ["(\\d)(\\d{3})(\\d{3,4})", "$1 $2 $3", ["2"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{2,3})",
          "$1 $2 $3",
          ["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],
          "0$1",
        ],
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["(?:70|8)0"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{2})", "$1 $2 $3", ["43[1-7]|7"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[48]|9[08]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["9"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",
          [6, 7, 8],
        ],
        ["(?:43[07-9]|99[69]\\d)\\d{5}|(?:8[7-9]|98)\\d{7}", [8, 9]],
        ["(?:00800\\d\\d|800)\\d{5}", [8, 12]],
        ["90\\d{6}", [8]],
        0,
        0,
        0,
        0,
        0,
        ["700\\d{5}", [8]],
      ],
    ],
    BH: [
      "973",
      "00",
      "[136-9]\\d{7}",
      [8],
      [["(\\d{4})(\\d{4})", "$1 $2", ["[13679]|8[02-4679]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|55|7[7-9]|88)|9[69][69])|7(?:[07]\\d\\d|1(?:11|78)))\\d{4}",
        ],
        [
          "(?:3(?:[0-79]\\d|8[0-57-9])\\d|6(?:3(?:00|33|6[16])|441|6(?:3[03-9]|[69]\\d|7[0-689])))\\d{4}",
        ],
        ["8[02369]\\d{6}"],
        ["(?:87|9[0-8])\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["84\\d{6}"],
      ],
    ],
    BI: [
      "257",
      "00",
      "(?:[267]\\d|31)\\d{6}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2367]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["(?:22|31)\\d{6}"], ["(?:29|[67][125-9])\\d{6}"]],
    ],
    BJ: [
      "229",
      "00",
      "[24-689]\\d{7}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[24-689]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2(?:02|1[037]|2[45]|3[68]|4\\d)\\d{5}"],
        ["(?:4[0-7]|[56]\\d|9[013-9])\\d{6}"],
        0,
        0,
        0,
        0,
        ["81\\d{6}"],
        0,
        ["857[58]\\d{4}"],
      ],
    ],
    BL: [
      "590",
      "00",
      "590\\d{6}|(?:69|80|9\\d)\\d{7}",
      [9],
      0,
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],
        [
          "69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}",
        ],
        ["80[0-5]\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"],
      ],
    ],
    BM: [
      "1",
      "011",
      "(?:441|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "441$1",
      0,
      "441",
      [
        ["441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}"],
        ["441(?:[2378]\\d|5[0-39]|9[02])\\d{5}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    BN: [
      "673",
      "00",
      "[2-578]\\d{6}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[2-578]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}"],
        ["(?:22[89]|[78]\\d\\d)\\d{4}"],
        0,
        0,
        0,
        0,
        0,
        0,
        ["5[34]\\d{5}"],
      ],
    ],
    BO: [
      "591",
      "00(?:1\\d)?",
      "(?:[2-467]\\d\\d|8001)\\d{5}",
      [8, 9],
      [
        ["(\\d)(\\d{7})", "$1 $2", ["[23]|4[46]"]],
        ["(\\d{8})", "$1", ["[67]"]],
        ["(\\d{3})(\\d{2})(\\d{4})", "$1 $2 $3", ["8"]],
      ],
      "0",
      0,
      "0(1\\d)?",
      0,
      0,
      0,
      [
        [
          "(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",
          [8],
        ],
        ["[67]\\d{7}", [8]],
        ["8001[07]\\d{4}", [9]],
      ],
    ],
    BQ: [
      "599",
      "00",
      "(?:[34]1|7\\d)\\d{5}",
      [7],
      0,
      0,
      0,
      0,
      0,
      0,
      "[347]",
      [
        ["(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}"],
        [
          "(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}",
        ],
      ],
    ],
    BR: [
      "55",
      "00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)",
      "(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",
      [8, 9, 10, 11],
      [
        [
          "(\\d{4})(\\d{4})",
          "$1-$2",
          ["300|4(?:0[02]|37)", "4(?:02|37)0|[34]00"],
        ],
        ["(\\d{3})(\\d{2,3})(\\d{4})", "$1 $2 $3", ["(?:[358]|90)0"], "0$1"],
        [
          "(\\d{2})(\\d{4})(\\d{4})",
          "$1 $2-$3",
          ["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],
          "($1)",
        ],
        [
          "(\\d{2})(\\d{5})(\\d{4})",
          "$1 $2-$3",
          ["[16][1-9]|[2-57-9]"],
          "($1)",
        ],
      ],
      "0",
      0,
      "(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?",
      "$2",
      0,
      0,
      [
        [
          "(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",
          [10],
        ],
        [
          "(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",
          [10, 11],
        ],
        ["800\\d{6,7}", [9, 10]],
        ["300\\d{6}|[59]00\\d{6,7}", [9, 10]],
        0,
        0,
        0,
        0,
        0,
        ["(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|370))\\d{4}|300\\d{5}", [8, 10]],
      ],
    ],
    BS: [
      "1",
      "011",
      "(?:242|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([3-8]\\d{6})$|1",
      "242$1",
      0,
      "242",
      [
        [
          "242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-5]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",
        ],
        [
          "242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|3[0-4]|[89]9))\\d{4}",
        ],
        ["242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        ["242225\\d{4}"],
      ],
    ],
    BT: [
      "975",
      "00",
      "[17]\\d{7}|[2-8]\\d{6}",
      [7, 8],
      [
        ["(\\d)(\\d{3})(\\d{3})", "$1 $2 $3", ["[2-68]|7[246]"]],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["1[67]|7"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}", [7]],
        ["(?:1[67]|77)\\d{6}", [8]],
      ],
    ],
    BW: [
      "267",
      "00",
      "(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",
      [7, 8, 10],
      [
        ["(\\d{2})(\\d{5})", "$1 $2", ["90"]],
        ["(\\d{3})(\\d{4})", "$1 $2", ["[24-6]|3[15-9]"]],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[37]"]],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["0"]],
        ["(\\d{3})(\\d{4})(\\d{3})", "$1 $2 $3", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013]|81)|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}",
          [7],
        ],
        ["(?:321|7[1-8]\\d)\\d{5}", [8]],
        ["(?:0800|800\\d)\\d{6}", [10]],
        ["90\\d{5}", [7]],
        0,
        0,
        0,
        0,
        ["79(?:1(?:[01]\\d|2[0-8])|2[0-7]\\d)\\d{3}", [8]],
      ],
    ],
    BY: [
      "375",
      "810",
      "(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",
      [6, 7, 8, 9, 10, 11],
      [
        ["(\\d{3})(\\d{3})", "$1 $2", ["800"], "8 $1"],
        ["(\\d{3})(\\d{2})(\\d{2,4})", "$1 $2 $3", ["800"], "8 $1"],
        [
          "(\\d{4})(\\d{2})(\\d{3})",
          "$1 $2-$3",
          [
            "1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])",
            "1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])",
          ],
          "8 0$1",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2-$3-$4",
          ["1(?:[56]|7[467])|2[1-3]"],
          "8 0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1 $2-$3-$4", ["[1-4]"], "8 0$1"],
        ["(\\d{3})(\\d{3,4})(\\d{4})", "$1 $2 $3", ["[89]"], "8 $1"],
      ],
      "8",
      0,
      "0|80?",
      0,
      0,
      0,
      [
        [
          "(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",
          [9],
        ],
        ["(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}", [9]],
        ["800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}"],
        ["(?:810|902)\\d{7}", [10]],
        0,
        0,
        0,
        0,
        ["249\\d{6}", [9]],
      ],
      "8~10",
    ],
    BZ: [
      "501",
      "00",
      "(?:0800\\d|[2-8])\\d{6}",
      [7, 11],
      [
        ["(\\d{3})(\\d{4})", "$1-$2", ["[2-8]"]],
        ["(\\d)(\\d{3})(\\d{4})(\\d{3})", "$1-$2-$3-$4", ["0"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",
          [7],
        ],
        ["6[0-35-7]\\d{5}", [7]],
        ["0800\\d{7}", [11]],
      ],
    ],
    CA: [
      "1",
      "011",
      "(?:[2-8]\\d|90)\\d{8}|3\\d{6}",
      [7, 10],
      0,
      "1",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",
          [10],
        ],
        ["", [10]],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}", [10]],
        ["900[2-9]\\d{6}", [10]],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",
          [10],
        ],
        0,
        ["310\\d{4}", [7]],
        0,
        ["600[2-9]\\d{6}", [10]],
      ],
    ],
    CC: [
      "61",
      "001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011",
      "1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",
      [6, 7, 8, 9, 10, 12],
      0,
      "0",
      0,
      "([59]\\d{7})$|0",
      "8$1",
      0,
      0,
      [
        [
          "8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",
          [9],
        ],
        [
          "4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",
          [9],
        ],
        ["180(?:0\\d{3}|2)\\d{3}", [7, 10]],
        ["190[0-26]\\d{6}", [10]],
        0,
        0,
        0,
        0,
        ["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}", [9]],
        ["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}", [6, 8, 10, 12]],
      ],
      "0011",
    ],
    CD: [
      "243",
      "00",
      "[189]\\d{8}|[1-68]\\d{6}",
      [7, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{3})", "$1 $2 $3", ["88"], "0$1"],
        ["(\\d{2})(\\d{5})", "$1 $2", ["[1-6]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[89]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [["12\\d{7}|[1-6]\\d{6}"], ["88\\d{5}|(?:8[0-59]|9[017-9])\\d{7}"]],
    ],
    CF: [
      "236",
      "00",
      "(?:[27]\\d{3}|8776)\\d{4}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[278]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["2[12]\\d{6}"], ["7[024-7]\\d{6}"], 0, ["8776\\d{4}"]],
    ],
    CG: [
      "242",
      "00",
      "222\\d{6}|(?:0\\d|80)\\d{7}",
      [9],
      [
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["8"]],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[02]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["222[1-589]\\d{5}"],
        [
          "026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}",
        ],
        0,
        ["80[0-2]\\d{6}"],
      ],
    ],
    CH: [
      "41",
      "00",
      "8\\d{11}|[2-9]\\d{8}",
      [9],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["8[047]|90"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["[2-79]|81"],
          "0$1",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4 $5",
          ["8"],
          "0$1",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}"],
        ["7[35-9]\\d{7}"],
        ["800\\d{6}"],
        ["90[016]\\d{6}"],
        ["878\\d{6}"],
        0,
        ["5[18]\\d{7}"],
        ["74[0248]\\d{6}"],
        0,
        ["84[0248]\\d{6}"],
      ],
    ],
    CI: [
      "225",
      "00",
      "[02]\\d{9}",
      [10],
      [
        ["(\\d{2})(\\d{2})(\\d)(\\d{5})", "$1 $2 $3 $4", ["2"]],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{4})", "$1 $2 $3 $4", ["0"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|2[245]|3[45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}",
        ],
        ["0[157]\\d{8}"],
      ],
    ],
    CK: [
      "682",
      "00",
      "[2-578]\\d{4}",
      [5],
      [["(\\d{2})(\\d{3})", "$1 $2", ["[2-578]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["(?:2\\d|3[13-7]|4[1-5])\\d{3}"], ["[578]\\d{4}"]],
    ],
    CL: [
      "56",
      "(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0",
      "12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",
      [9, 10, 11],
      [
        ["(\\d{5})(\\d{4})", "$1 $2", ["219", "2196"], "($1)"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["44"]],
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["2[1-36]"], "($1)"],
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["9[2-9]"]],
        [
          "(\\d{2})(\\d{3})(\\d{4})",
          "$1 $2 $3",
          ["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],
          "($1)",
        ],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["60|8"]],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"]],
        ["(\\d{3})(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3 $4", ["60"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-3])|600)|646[59])|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",
          [9],
        ],
        ["", [9]],
        ["(?:123|8)00\\d{6}", [9, 11]],
        0,
        0,
        0,
        0,
        0,
        ["44\\d{7}", [9]],
        ["600\\d{7,8}", [10, 11]],
      ],
    ],
    CM: [
      "237",
      "00",
      "[26]\\d{8}|88\\d{6,7}",
      [8, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["88"]],
        [
          "(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4 $5",
          ["[26]|88"],
        ],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2(?:22|33)\\d{6}", [9]],
        ["(?:24[23]|6[25-9]\\d)\\d{6}", [9]],
        ["88\\d{6,7}"],
      ],
    ],
    CN: [
      "86",
      "00|1(?:[12]\\d|79)\\d\\d00",
      "1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",
      [7, 8, 9, 10, 11, 12],
      [
        [
          "(\\d{2})(\\d{5,6})",
          "$1 $2",
          [
            "(?:10|2[0-57-9])[19]",
            "(?:10|2[0-57-9])(?:10|9[56])",
            "10(?:10|9[56])|2[0-57-9](?:100|9[56])",
          ],
          "0$1",
        ],
        [
          "(\\d{3})(\\d{5,6})",
          "$1 $2",
          [
            "3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]",
            "(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]",
            "85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])",
            "85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])",
          ],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["(?:4|80)0"]],
        [
          "(\\d{2})(\\d{4})(\\d{4})",
          "$1 $2 $3",
          [
            "10|2(?:[02-57-9]|1[1-9])",
            "10|2(?:[02-57-9]|1[1-9])",
            "10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])",
          ],
          "0$1",
          1,
        ],
        [
          "(\\d{3})(\\d{3})(\\d{4})",
          "$1 $2 $3",
          [
            "3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]",
          ],
          "0$1",
          1,
        ],
        ["(\\d{3})(\\d{7,8})", "$1 $2", ["9"]],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["80"], "0$1", 1],
        ["(\\d{3})(\\d{4})(\\d{4})", "$1 $2 $3", ["[3-578]"], "0$1", 1],
        ["(\\d{3})(\\d{4})(\\d{4})", "$1 $2 $3", ["1[3-9]"]],
        ["(\\d{2})(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3 $4", ["[12]"], "0$1", 1],
      ],
      "0",
      0,
      "(1(?:[12]\\d|79)\\d\\d)|0",
      0,
      0,
      0,
      [
        [
          "(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|21(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))\\d{5}|(?:43[35]|754)\\d{7,8}|8(?:078\\d{7}|51\\d{7,8})|(?:10|(?:2|85)1|43[35]|754)(?:100\\d\\d|95\\d{3,4})|(?:2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[1-9]\\d{6})|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[1-9]\\d{5})|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",
          [7, 8, 9, 10, 11],
        ],
        [
          "1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|[59][0-35-9]|6[25-7]|7[0-35-8])\\d{8}",
          [11],
        ],
        ["(?:(?:10|21)8|8)00\\d{7}", [10, 12]],
        ["16[08]\\d{5}", [8]],
        0,
        0,
        0,
        0,
        0,
        [
          "10(?:10\\d{4}|96\\d{3,4})|400\\d{7}|950\\d{7,8}|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",
          [7, 8, 9, 10, 11],
        ],
      ],
      "00",
    ],
    CO: [
      "57",
      "00(?:4(?:[14]4|56)|[579])",
      "(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",
      [10, 11],
      [
        ["(\\d{3})(\\d{7})", "$1 $2", ["6"], "($1)"],
        ["(\\d{3})(\\d{7})", "$1 $2", ["3[0-357]|91"]],
        ["(\\d)(\\d{3})(\\d{7})", "$1-$2-$3", ["1"], "0$1", 0, "$1 $2 $3"],
      ],
      "0",
      0,
      "0([3579]|4(?:[14]4|56))?",
      0,
      0,
      0,
      [
        [
          "601055(?:[0-4]\\d|50)\\d\\d|6010(?:[0-4]\\d|5[0-4])\\d{4}|60(?:[124-7][2-9]|8[1-9])\\d{6}",
          [10],
        ],
        [
          "333301[0-5]\\d{3}|3333(?:00|2[5-9]|[3-9]\\d)\\d{4}|(?:3(?:24[1-9]|3(?:00|3[0-24-9]))|9101)\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}",
          [10],
        ],
        ["1800\\d{7}", [11]],
        ["19(?:0[01]|4[78])\\d{7}", [11]],
      ],
    ],
    CR: [
      "506",
      "00",
      "(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",
      [8, 10],
      [
        ["(\\d{4})(\\d{4})", "$1 $2", ["[2-7]|8[3-9]"]],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1-$2-$3", ["[89]"]],
      ],
      0,
      0,
      "(19(?:0[0-2468]|1[09]|20|66|77|99))",
      0,
      0,
      0,
      [
        ["210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}", [8]],
        [
          "(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",
          [8],
        ],
        ["800\\d{7}", [10]],
        ["90[059]\\d{7}", [10]],
        0,
        0,
        0,
        0,
        ["(?:210[0-6]|4\\d{3}|5100)\\d{4}", [8]],
      ],
    ],
    CU: [
      "53",
      "119",
      "(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",
      [6, 7, 8, 10],
      [
        ["(\\d{2})(\\d{4,6})", "$1 $2", ["2[1-4]|[34]"], "(0$1)"],
        ["(\\d)(\\d{6,7})", "$1 $2", ["7"], "(0$1)"],
        ["(\\d)(\\d{7})", "$1 $2", ["[56]"], "0$1"],
        ["(\\d{3})(\\d{7})", "$1 $2", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:3[23]|4[89])\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}",
        ],
        ["(?:5\\d|6[2-4])\\d{6}", [8]],
        ["800\\d{7}", [10]],
        0,
        0,
        0,
        0,
        0,
        0,
        ["807\\d{7}", [10]],
      ],
    ],
    CV: [
      "238",
      "0",
      "(?:[2-59]\\d\\d|800)\\d{4}",
      [7],
      [["(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3", ["[2-589]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}"],
        ["(?:36|5[1-389]|9\\d)\\d{5}"],
        ["800\\d{4}"],
        0,
        0,
        0,
        0,
        0,
        ["(?:3[3-5]|4[356])\\d{5}"],
      ],
    ],
    CW: [
      "599",
      "00",
      "(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",
      [7, 8],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["[3467]"]],
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["9[4-8]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      "[69]",
      [
        [
          "9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}",
        ],
        ["953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}"],
        0,
        0,
        0,
        0,
        0,
        ["955\\d{5}", [8]],
        0,
        ["60[0-2]\\d{4}", [7]],
      ],
    ],
    CX: [
      "61",
      "001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011",
      "1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",
      [6, 7, 8, 9, 10, 12],
      0,
      "0",
      0,
      "([59]\\d{7})$|0",
      "8$1",
      0,
      0,
      [
        [
          "8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",
          [9],
        ],
        [
          "4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",
          [9],
        ],
        ["180(?:0\\d{3}|2)\\d{3}", [7, 10]],
        ["190[0-26]\\d{6}", [10]],
        0,
        0,
        0,
        0,
        ["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}", [9]],
        ["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}", [6, 8, 10, 12]],
      ],
      "0011",
    ],
    CY: [
      "357",
      "00",
      "(?:[279]\\d|[58]0)\\d{6}",
      [8],
      [["(\\d{2})(\\d{6})", "$1 $2", ["[257-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2[2-6]\\d{6}"],
        ["9(?:10|[4-79]\\d)\\d{5}"],
        ["800\\d{5}"],
        ["90[09]\\d{5}"],
        ["700\\d{5}"],
        0,
        ["(?:50|77)\\d{6}"],
        0,
        0,
        ["80[1-9]\\d{5}"],
      ],
    ],
    CZ: [
      "420",
      "00",
      "(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",
      [9],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[2-8]|9[015-7]"]],
        ["(\\d{2})(\\d{3})(\\d{3})(\\d{2})", "$1 $2 $3 $4", ["96"]],
        ["(\\d{2})(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["9"]],
        ["(\\d{3})(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["9"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}"],
        ["(?:60[1-8]\\d|7(?:0(?:[2-5]\\d|60)|190|[2379]\\d\\d))\\d{5}"],
        ["800\\d{6}"],
        ["9(?:0[05689]|76)\\d{6}"],
        ["70[01]\\d{6}"],
        0,
        ["9(?:5\\d|7[2-4])\\d{6}"],
        0,
        ["9[17]0\\d{6}"],
        ["8[134]\\d{7}"],
      ],
    ],
    DE: [
      "49",
      "00",
      "[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",
      [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
      [
        ["(\\d{2})(\\d{3,13})", "$1 $2", ["3[02]|40|[68]9"], "0$1"],
        [
          "(\\d{3})(\\d{3,12})",
          "$1 $2",
          [
            "2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1",
            "2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1",
          ],
          "0$1",
        ],
        [
          "(\\d{4})(\\d{2,11})",
          "$1 $2",
          [
            "[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]",
            "[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]",
          ],
          "0$1",
        ],
        ["(\\d{3})(\\d{4})", "$1 $2", ["138"], "0$1"],
        ["(\\d{5})(\\d{2,10})", "$1 $2", ["3"], "0$1"],
        ["(\\d{3})(\\d{5,11})", "$1 $2", ["181"], "0$1"],
        ["(\\d{3})(\\d)(\\d{4,10})", "$1 $2 $3", ["1(?:3|80)|9"], "0$1"],
        ["(\\d{3})(\\d{7,8})", "$1 $2", ["1[67]"], "0$1"],
        ["(\\d{3})(\\d{7,12})", "$1 $2", ["8"], "0$1"],
        ["(\\d{5})(\\d{6})", "$1 $2", ["185", "1850", "18500"], "0$1"],
        ["(\\d{3})(\\d{4})(\\d{4})", "$1 $2 $3", ["7"], "0$1"],
        ["(\\d{4})(\\d{7})", "$1 $2", ["18[68]"], "0$1"],
        ["(\\d{4})(\\d{7})", "$1 $2", ["15[1279]"], "0$1"],
        ["(\\d{5})(\\d{6})", "$1 $2", ["15[03568]", "15(?:[0568]|31)"], "0$1"],
        ["(\\d{3})(\\d{8})", "$1 $2", ["18"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{7,8})", "$1 $2 $3", ["1(?:6[023]|7)"], "0$1"],
        ["(\\d{4})(\\d{2})(\\d{7})", "$1 $2 $3", ["15[279]"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{8})", "$1 $2 $3", ["15"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "32\\d{9,11}|49[1-6]\\d{10}|322\\d{6}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",
          [5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
        ],
        ["15(?:[0-25-9]\\d\\d|310)\\d{6}|1(?:6[023]|7\\d)\\d{7,8}", [10, 11]],
        ["800\\d{7,12}", [10, 11, 12, 13, 14, 15]],
        ["(?:137[7-9]|900(?:[135]|9\\d))\\d{6}", [10, 11]],
        ["700\\d{8}", [11]],
        0,
        ["18(?:1\\d{5,11}|[2-9]\\d{8})", [8, 9, 10, 11, 12, 13, 14]],
        [
          "16(?:4\\d{1,10}|[89]\\d{1,11})",
          [4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
        ],
        0,
        [
          "180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",
          [7, 8, 9, 10, 11, 12, 13, 14],
        ],
      ],
    ],
    DJ: [
      "253",
      "00",
      "(?:2\\d|77)\\d{6}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[27]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["2(?:1[2-5]|7[45])\\d{5}"], ["77\\d{6}"]],
    ],
    DK: [
      "45",
      "00",
      "[2-9]\\d{7}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:2\\d|9[1-46-9])\\d|3(?:[0-37]\\d|4[013]|5[0-58]|6[01347-9]|8[0-8]|9[0-79])|4(?:[0-25]\\d|[34][02-9]|6[013-579]|7[013579]|8[0-47]|9[0-27])|5(?:[0-36]\\d|4[0146-9]|5[03-57-9]|7[0568]|8[0-358]|9[0-69])|6(?:[013578]\\d|2[0-68]|4[02-8]|6[01689]|9[015689])|7(?:[0-69]\\d|7[03-9]|8[0147])|8(?:[16-9]\\d|2[0-58]))\\d{5}",
        ],
        ["(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}"],
        ["80\\d{6}"],
        ["90\\d{6}"],
      ],
    ],
    DM: [
      "1",
      "011",
      "(?:[58]\\d\\d|767|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-7]\\d{6})$|1",
      "767$1",
      0,
      "767",
      [
        ["767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}"],
        ["767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    DO: [
      "1",
      "011",
      "(?:[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      0,
      0,
      0,
      "8001|8[024]9",
      [
        [
          "8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",
        ],
        ["8[024]9[2-9]\\d{6}"],
        ["8(?:00(?:14|[2-9]\\d)|(?:33|44|55|66|77|88)[2-9]\\d)\\d{5}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    DZ: [
      "213",
      "00",
      "(?:[1-4]|[5-79]\\d|80)\\d{7}",
      [8, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[1-4]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["9"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[5-8]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[013-689])\\d{6}"],
        [
          "(?:5(?:4[0-29]|5\\d|6[0-2])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",
          [9],
        ],
        ["800\\d{6}", [9]],
        ["80[3-689]1\\d{5}", [9]],
        0,
        0,
        0,
        0,
        ["98[23]\\d{6}", [9]],
        ["80[12]1\\d{5}", [9]],
      ],
    ],
    EC: [
      "593",
      "00",
      "1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",
      [8, 9, 10, 11],
      [
        [
          "(\\d)(\\d{3})(\\d{4})",
          "$1 $2-$3",
          ["[2-7]"],
          "(0$1)",
          0,
          "$1-$2-$3",
        ],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["9"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["1"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["[2-7][2-7]\\d{6}", [8]],
        ["964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}", [9]],
        ["1800\\d{7}|1[78]00\\d{6}", [10, 11]],
        0,
        0,
        0,
        0,
        0,
        ["[2-7]890\\d{4}", [8]],
      ],
    ],
    EE: [
      "372",
      "00",
      "8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",
      [7, 8, 10],
      [
        [
          "(\\d{3})(\\d{4})",
          "$1 $2",
          [
            "[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88",
            "[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88",
          ],
        ],
        [
          "(\\d{4})(\\d{3,4})",
          "$1 $2",
          ["[45]|8(?:00|[1-49])", "[45]|8(?:00[1-9]|[1-49])"],
        ],
        ["(\\d{2})(\\d{2})(\\d{4})", "$1 $2 $3", ["7"]],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}", [7]],
        [
          "(?:5\\d{5}|8(?:1(?:0(?:0(?:00|[178]\\d)|[3-9]\\d\\d)|(?:1(?:0[236]|1\\d)|(?:2[0-59]|[3-79]\\d)\\d)\\d)|2(?:0(?:0(?:00|4\\d)|(?:19|[2-7]\\d)\\d)|(?:(?:[124-6]\\d|3[5-9])\\d|7(?:[0-79]\\d|8[13-9])|8(?:[2-6]\\d|7[01]))\\d)|[349]\\d{4}))\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",
          [7, 8],
        ],
        ["800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}"],
        ["(?:40\\d\\d|900)\\d{4}", [7, 8]],
        ["70[0-2]\\d{5}", [8]],
      ],
    ],
    EG: [
      "20",
      "00",
      "[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",
      [8, 9, 10],
      [
        ["(\\d)(\\d{7,8})", "$1 $2", ["[23]"], "0$1"],
        [
          "(\\d{2})(\\d{6,7})",
          "$1 $2",
          ["1[35]|[4-6]|8[2468]|9[235-7]"],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["[89]"], "0$1"],
        ["(\\d{2})(\\d{8})", "$1 $2", ["1"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2[2-4]|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",
          [8, 9],
        ],
        ["1[0-25]\\d{8}", [10]],
        ["800\\d{7}", [10]],
        ["900\\d{7}", [10]],
      ],
    ],
    EH: [
      "212",
      "00",
      "[5-8]\\d{8}",
      [9],
      0,
      "0",
      0,
      0,
      0,
      0,
      "528[89]",
      [
        ["528[89]\\d{5}"],
        [
          "(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}",
        ],
        ["80[0-7]\\d{6}"],
        ["89\\d{7}"],
        0,
        0,
        0,
        0,
        ["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"],
      ],
    ],
    ER: [
      "291",
      "00",
      "[178]\\d{6}",
      [7],
      [["(\\d)(\\d{3})(\\d{3})", "$1 $2 $3", ["[178]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}"],
        ["(?:17[1-3]|7\\d\\d)\\d{4}"],
      ],
    ],
    ES: [
      "34",
      "00",
      "[5-9]\\d{8}",
      [9],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[89]00"]],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[5-9]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}",
        ],
        [
          "(?:590[16]00\\d|9(?:6906(?:09|10)|7390\\d\\d))\\d\\d|(?:6\\d|7[1-48])\\d{7}",
        ],
        ["[89]00\\d{6}"],
        ["80[367]\\d{6}"],
        ["70\\d{7}"],
        0,
        ["51\\d{7}"],
        0,
        0,
        ["90[12]\\d{6}"],
      ],
    ],
    ET: [
      "251",
      "00",
      "(?:11|[2-579]\\d)\\d{7}",
      [9],
      [["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[1-579]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "11667[01]\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[578]|44|5[0-4])|6(?:1[578]|2[69]|39|4[5-7]|5[0-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}",
        ],
        ["700[1-9]\\d{5}|(?:7(?:0[1-9]|1[0-8]|22|77|86|99)|9\\d\\d)\\d{6}"],
      ],
    ],
    FI: [
      "358",
      "00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))",
      "[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",
      [5, 6, 7, 8, 9, 10, 11, 12],
      [
        ["(\\d{5})", "$1", ["20[2-59]"], "0$1"],
        ["(\\d{3})(\\d{3,7})", "$1 $2", ["(?:[1-3]0|[68])0|70[07-9]"], "0$1"],
        ["(\\d{2})(\\d{4,8})", "$1 $2", ["[14]|2[09]|50|7[135]"], "0$1"],
        ["(\\d{2})(\\d{6,10})", "$1 $2", ["7"], "0$1"],
        [
          "(\\d)(\\d{4,9})",
          "$1 $2",
          ["(?:1[3-79]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],
          "0$1",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      "1[03-79]|[2-9]",
      [
        [
          "(?:1[3-79][1-8]|[23568][1-8]\\d|9(?:00|[1-8]\\d))\\d{2,6}",
          [5, 6, 7, 8, 9],
        ],
        ["4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}", [6, 7, 8, 9, 10]],
        ["800\\d{4,6}", [7, 8, 9]],
        ["[67]00\\d{5,6}", [8, 9]],
        0,
        0,
        [
          "20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",
        ],
      ],
      "00",
    ],
    FJ: [
      "679",
      "0(?:0|52)",
      "45\\d{5}|(?:0800\\d|[235-9])\\d{6}",
      [7, 11],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["[235-9]|45"]],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["0"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}", [7]],
        ["(?:[279]\\d|45|5[01568]|8[034679])\\d{5}", [7]],
        ["0800\\d{7}", [11]],
      ],
      "00",
    ],
    FK: [
      "500",
      "00",
      "[2-7]\\d{4}",
      [5],
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      [["[2-47]\\d{4}"], ["[56]\\d{4}"]],
    ],
    FM: [
      "691",
      "00",
      "(?:[39]\\d\\d|820)\\d{4}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[389]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}",
        ],
        [
          "31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}",
        ],
      ],
    ],
    FO: [
      "298",
      "00",
      "[2-9]\\d{5}",
      [6],
      [["(\\d{6})", "$1", ["[2-9]"]]],
      0,
      0,
      "(10(?:01|[12]0|88))",
      0,
      0,
      0,
      [
        ["(?:20|[34]\\d|8[19])\\d{4}"],
        ["(?:[27][1-9]|5\\d|9[16])\\d{4}"],
        ["80[257-9]\\d{3}"],
        ["90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d"],
        0,
        0,
        0,
        0,
        ["(?:6[0-36]|88)\\d{4}"],
      ],
    ],
    FR: [
      "33",
      "00",
      "[1-9]\\d{8}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"], "0 $1"],
        [
          "(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4 $5",
          ["[1-79]"],
          "0$1",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:26[013-9]|59[1-35-9])\\d{6}|(?:[13]\\d|2[0-57-9]|4[1-9]|5[0-8])\\d{7}",
        ],
        ["(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7[3-9]\\d)\\d{6}"],
        ["80[0-5]\\d{6}"],
        [
          "836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}",
        ],
        0,
        0,
        ["80[6-9]\\d{6}"],
        0,
        ["9\\d{8}"],
        ["8(?:1[01]|2[0156]|4[02]|84)\\d{6}"],
      ],
    ],
    GA: [
      "241",
      "00",
      "(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",
      [7, 8],
      [
        ["(\\d)(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2-7]"], "0$1"],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["0"]],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["11|[67]"], "0$1"],
      ],
      0,
      0,
      "0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})",
      "$1",
      0,
      0,
      [
        ["[01]1\\d{6}", [8]],
        ["(?:(?:0[2-7]|7[467])\\d|6(?:0[0-4]|10|[256]\\d))\\d{5}|[2-7]\\d{6}"],
      ],
    ],
    GB: [
      "44",
      "00",
      "[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",
      [7, 9, 10],
      [
        [
          "(\\d{3})(\\d{4})",
          "$1 $2",
          ["800", "8001", "80011", "800111", "8001111"],
          "0$1",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3",
          ["845", "8454", "84546", "845464"],
          "0$1",
        ],
        ["(\\d{3})(\\d{6})", "$1 $2", ["800"], "0$1"],
        [
          "(\\d{5})(\\d{4,5})",
          "$1 $2",
          [
            "1(?:38|5[23]|69|76|94)",
            "1(?:(?:38|69)7|5(?:24|39)|768|946)",
            "1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)",
          ],
          "0$1",
        ],
        ["(\\d{4})(\\d{5,6})", "$1 $2", ["1(?:[2-69][02-9]|[78])"], "0$1"],
        [
          "(\\d{2})(\\d{4})(\\d{4})",
          "$1 $2 $3",
          ["[25]|7(?:0|6[02-9])", "[25]|7(?:0|6(?:[03-9]|2[356]))"],
          "0$1",
        ],
        ["(\\d{4})(\\d{6})", "$1 $2", ["7"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["[1389]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-2]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",
          [9, 10],
        ],
        [
          "7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",
          [10],
        ],
        ["80[08]\\d{7}|800\\d{6}|8001111"],
        [
          "(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",
          [7, 10],
        ],
        ["70\\d{8}", [10]],
        0,
        ["(?:3[0347]|55)\\d{8}", [10]],
        [
          "76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",
          [10],
        ],
        ["56\\d{8}", [10]],
      ],
      0,
      " x",
    ],
    GD: [
      "1",
      "011",
      "(?:473|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "473$1",
      0,
      "473",
      [
        [
          "473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-4]|5[579]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",
        ],
        [
          "473(?:4(?:0[2-79]|1[04-9]|2[0-5]|49|5[68])|5(?:2[01]|3[3-8])|901)\\d{4}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    GE: [
      "995",
      "00",
      "(?:[3-57]\\d\\d|800)\\d{6}",
      [9],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["70"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["32"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[57]"]],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[348]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}",
        ],
        [
          "5(?:(?:(?:0555|1(?:[17]77|555))[5-9]|757(?:7[7-9]|8[01]))\\d|22252[0-4])\\d\\d|(?:5(?:0(?:0(?:0\\d|11|22|33|44|5[05]|77|88|9[09])|111)|1(?:1(?:00|[124]\\d|3[01])|4\\d\\d)|(?:44|68)\\d\\d|5(?:[0157-9]\\d\\d|200)|7(?:[0147-9]\\d\\d|5(?:00|[57]5))|8(?:0(?:[018]\\d|2[0-4])|58[89]|8(?:55|88))|9(?:090|[1-35-9]\\d\\d))|790\\d\\d)\\d{4}|5(?:0(?:0[17]0|505)|1(?:0[01]0|1(?:07|33|51))|2(?:0[02]0|2[25]2)|3(?:0[03]0|3[35]3)|(?:40[04]|900)0|5222)[0-4]\\d{3}",
        ],
        ["800\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["70[67]\\d{6}"],
      ],
    ],
    GF: [
      "594",
      "00",
      "[56]94\\d{6}|(?:80|9\\d)\\d{7}",
      [9],
      [
        [
          "(\\d{3})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["[56]|9[47]"],
          "0$1",
        ],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[89]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["594(?:[02-49]\\d|1[0-5]|5[6-9]|6[0-3]|80)\\d{4}"],
        ["694(?:[0-249]\\d|3[0-8])\\d{4}"],
        ["80[0-5]\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:(?:396|76\\d)\\d|476[0-5])\\d{4}"],
      ],
    ],
    GG: [
      "44",
      "00",
      "(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",
      [7, 9, 10],
      0,
      "0",
      0,
      "([25-9]\\d{5})$|0",
      "1481$1",
      0,
      0,
      [
        ["1481[25-9]\\d{5}", [10]],
        ["7(?:(?:781|839)\\d|911[17])\\d{5}", [10]],
        ["80[08]\\d{7}|800\\d{6}|8001111"],
        ["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d", [7, 10]],
        ["70\\d{8}", [10]],
        0,
        ["(?:3[0347]|55)\\d{8}", [10]],
        [
          "76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",
          [10],
        ],
        ["56\\d{8}", [10]],
      ],
    ],
    GH: [
      "233",
      "00",
      "(?:[235]\\d{3}|800)\\d{5}",
      [8, 9],
      [
        ["(\\d{3})(\\d{5})", "$1 $2", ["8"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[235]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",
          [9],
        ],
        ["(?:2(?:[0346-9]\\d|5[67])|5(?:[03-7]\\d|9[1-9]))\\d{6}", [9]],
        ["800\\d{5}", [8]],
      ],
    ],
    GI: [
      "350",
      "00",
      "(?:[25]\\d|60)\\d{6}",
      [8],
      [["(\\d{3})(\\d{5})", "$1 $2", ["2"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2190[0-2]\\d{3}|2(?:0(?:[02]\\d|3[01])|16[24-9]|2[2-5]\\d)\\d{4}"],
        ["5251[0-4]\\d{3}|(?:5(?:[146-8]\\d\\d|250)|60(?:1[01]|6\\d))\\d{4}"],
      ],
    ],
    GL: [
      "299",
      "00",
      "(?:19|[2-689]\\d|70)\\d{4}",
      [6],
      [["(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3", ["19|[2-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:19|3[1-7]|[68][1-9]|70|9\\d)\\d{4}"],
        ["[245]\\d{5}"],
        ["80\\d{4}"],
        0,
        0,
        0,
        0,
        0,
        ["3[89]\\d{4}"],
      ],
    ],
    GM: [
      "220",
      "00",
      "[2-9]\\d{6}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[2-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}",
        ],
        ["(?:[23679]\\d|5[0-489])\\d{5}"],
      ],
    ],
    GN: [
      "224",
      "00",
      "722\\d{6}|(?:3|6\\d)\\d{7}",
      [8, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["3"]],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[67]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",
          [8],
        ],
        ["6[0-356]\\d{7}", [9]],
        0,
        0,
        0,
        0,
        0,
        0,
        ["722\\d{6}", [9]],
      ],
    ],
    GP: [
      "590",
      "00",
      "590\\d{6}|(?:69|80|9\\d)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[569]"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}",
        ],
        [
          "69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}",
        ],
        ["80[0-5]\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"],
      ],
    ],
    GQ: [
      "240",
      "00",
      "222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[235]"]],
        ["(\\d{3})(\\d{6})", "$1 $2", ["[89]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}"],
        ["(?:222|55\\d)\\d{6}"],
        ["80\\d[1-9]\\d{5}"],
        ["90\\d[1-9]\\d{5}"],
      ],
    ],
    GR: [
      "30",
      "00",
      "5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",
      [10, 11, 12],
      [
        ["(\\d{2})(\\d{4})(\\d{4})", "$1 $2 $3", ["21|7"]],
        [
          "(\\d{4})(\\d{6})",
          "$1 $2",
          ["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"],
        ],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["[2689]"]],
        ["(\\d{3})(\\d{3,4})(\\d{5})", "$1 $2 $3", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",
          [10],
        ],
        ["68[57-9]\\d{7}|(?:69|94)\\d{8}", [10]],
        ["800\\d{7,9}"],
        ["90[19]\\d{7}", [10]],
        ["70\\d{8}", [10]],
        0,
        ["5005000\\d{3}", [10]],
        0,
        0,
        ["8(?:0[16]|12|[27]5|50)\\d{7}", [10]],
      ],
    ],
    GT: [
      "502",
      "00",
      "80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",
      [8, 11],
      [
        ["(\\d{4})(\\d{4})", "$1 $2", ["[2-8]"]],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["[267][2-9]\\d{6}", [8]],
        ["(?:[3-5]\\d\\d|80[0-4])\\d{5}", [8]],
        ["18[01]\\d{8}", [11]],
        ["19\\d{9}", [11]],
      ],
    ],
    GU: [
      "1",
      "011",
      "(?:[58]\\d\\d|671|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "671$1",
      0,
      "671",
      [
        [
          "671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-46-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",
        ],
        [""],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    GW: [
      "245",
      "00",
      "[49]\\d{8}|4\\d{6}",
      [7, 9],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["40"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[49]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["443\\d{6}", [9]],
        ["9(?:5\\d|6[569]|77)\\d{6}", [9]],
        0,
        0,
        0,
        0,
        0,
        0,
        ["40\\d{5}", [7]],
      ],
    ],
    GY: [
      "592",
      "001",
      "(?:[2-8]\\d{3}|9008)\\d{3}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[2-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|50[0-6]|77[1-57])\\d{4}",
        ],
        ["(?:510|6\\d\\d|7(?:[01]\\d|2[156]|3[12]|49))\\d{4}"],
        ["(?:289|8(?:00|6[28]|88|99))\\d{4}"],
        ["9008\\d{3}"],
        0,
        0,
        0,
        0,
        ["515\\d{4}"],
      ],
    ],
    HK: [
      "852",
      "00(?:30|5[09]|[126-9]?)",
      "8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",
      [5, 6, 7, 8, 9, 11],
      [
        ["(\\d{3})(\\d{2,5})", "$1 $2", ["900", "9003"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["8"]],
        ["(\\d{3})(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["9"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-8]|[59]\\d|6[01]))|58(?:0[1-9]|1[2-9]))\\d{4}",
          [8],
        ],
        [
          "(?:4(?:44[0-25-9]|6(?:1[0-7]|4[0-57-9]|6[0-4]))|5(?:73[0-6]|95[0-8])|6(?:26[013-8]|66[0-3])|70(?:7[1-8]|8[0-4])|848[0-35-9]|9(?:29[013-9]|39[01]|59[0-4]|899))\\d{4}|(?:4(?:4[0-35-8]|6[02357-9])|5(?:[1-59][0-46-9]|6[0-4689]|7[0-246-9])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|70[129]|84[0-29]|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",
          [8],
        ],
        ["800\\d{6}", [9]],
        ["900(?:[0-24-9]\\d{7}|3\\d{1,4})", [5, 6, 7, 8, 11]],
        [
          "8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",
          [8],
        ],
        0,
        ["30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}", [8]],
        [
          "7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",
          [8],
        ],
      ],
      "00",
    ],
    HN: [
      "504",
      "00",
      "8\\d{10}|[237-9]\\d{7}",
      [8, 11],
      [["(\\d{4})(\\d{4})", "$1-$2", ["[237-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:2(?:0[0-59]|1[1-9]|[23]\\d|4[02-6]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[578]|2[3-59]|3[13-9]|4[0-68]|5[1-3589])|5(?:0[2357-9]|1[1-356]|4[03-5]|5\\d|6[014-69]|7[04]|80)|6(?:[056]\\d|17|2[067]|3[047]|4[0-378]|[78][0-8]|9[01])|7(?:0[5-79]|6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",
          [8],
        ],
        ["[37-9]\\d{7}", [8]],
        ["8002\\d{7}", [11]],
      ],
    ],
    HR: [
      "385",
      "00",
      "(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",
      [6, 7, 8, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2,3})", "$1 $2 $3", ["6[01]"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2,3})", "$1 $2 $3", ["8"], "0$1"],
        ["(\\d)(\\d{4})(\\d{3})", "$1 $2 $3", ["1"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["6|7[245]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["9"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[2-57]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}", [8, 9]],
        [
          "9(?:(?:0[1-9]|[12589]\\d)\\d\\d|7(?:[0679]\\d\\d|5(?:[01]\\d|44|55|77|9[5-7])))\\d{4}|98\\d{6}",
          [8, 9],
        ],
        ["80\\d{5,7}", [7, 8, 9]],
        ["6[01459]\\d{6}|6[01]\\d{4,5}", [6, 7, 8]],
        ["7[45]\\d{6}", [8]],
        0,
        ["62\\d{6,7}|72\\d{6}", [8, 9]],
      ],
    ],
    HT: [
      "509",
      "00",
      "(?:[2-489]\\d|55)\\d{6}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{4})", "$1 $2 $3", ["[2-589]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2(?:2\\d|5[1-5]|81|9[149])\\d{5}"],
        ["(?:[34]\\d|55)\\d{6}"],
        ["8\\d{7}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}"],
      ],
    ],
    HU: [
      "36",
      "00",
      "[235-7]\\d{8}|[1-9]\\d{7}",
      [8, 9],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["1"], "(06 $1)"],
        [
          "(\\d{2})(\\d{3})(\\d{3})",
          "$1 $2 $3",
          ["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],
          "(06 $1)",
        ],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[2-9]"], "06 $1"],
      ],
      "06",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",
          [8],
        ],
        ["(?:[257]0|3[01])\\d{7}", [9]],
        ["(?:[48]0\\d|680[29])\\d{5}"],
        ["9[01]\\d{6}", [8]],
        0,
        0,
        ["38\\d{7}", [9]],
        0,
        ["21\\d{7}", [9]],
      ],
    ],
    ID: [
      "62",
      "00[89]",
      "(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",
      [7, 8, 9, 10, 11, 12, 13],
      [
        ["(\\d)(\\d{3})(\\d{3})", "$1 $2 $3", ["15"]],
        ["(\\d{2})(\\d{5,9})", "$1 $2", ["2[124]|[36]1"], "(0$1)"],
        ["(\\d{3})(\\d{5,7})", "$1 $2", ["800"], "0$1"],
        ["(\\d{3})(\\d{5,8})", "$1 $2", ["[2-79]"], "(0$1)"],
        ["(\\d{3})(\\d{3,4})(\\d{3})", "$1-$2-$3", ["8[1-35-9]"], "0$1"],
        ["(\\d{3})(\\d{6,8})", "$1 $2", ["1"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["804"], "0$1"],
        ["(\\d{3})(\\d)(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["80"], "0$1"],
        ["(\\d{3})(\\d{4})(\\d{4,5})", "$1-$2-$3", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",
          [7, 8, 9, 10, 11],
        ],
        ["8[1-35-9]\\d{7,10}", [9, 10, 11, 12]],
        [
          "00[17]803\\d{7}|(?:177\\d|800)\\d{5,7}|001803\\d{6}",
          [8, 9, 10, 11, 12, 13],
        ],
        ["809\\d{7}", [10]],
        0,
        0,
        ["(?:1500|8071\\d{3})\\d{3}", [7, 10]],
        0,
        0,
        ["804\\d{7}", [10]],
      ],
    ],
    IE: [
      "353",
      "00",
      "(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",
      [7, 8, 9, 10],
      [
        [
          "(\\d{2})(\\d{5})",
          "$1 $2",
          ["2[24-9]|47|58|6[237-9]|9[35-9]"],
          "(0$1)",
        ],
        ["(\\d{3})(\\d{5})", "$1 $2", ["[45]0"], "(0$1)"],
        ["(\\d)(\\d{3,4})(\\d{4})", "$1 $2 $3", ["1"], "(0$1)"],
        [
          "(\\d{2})(\\d{3})(\\d{3,4})",
          "$1 $2 $3",
          ["[2569]|4[1-69]|7[14]"],
          "(0$1)",
        ],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["70"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["81"], "(0$1)"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[78]"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["1"]],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1 $2 $3", ["4"], "(0$1)"],
        ["(\\d{2})(\\d)(\\d{3})(\\d{4})", "$1 $2 $3 $4", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}",
        ],
        ["8(?:22|[35-9]\\d)\\d{6}", [9]],
        ["1800\\d{6}", [10]],
        ["15(?:1[2-8]|[2-8]0|9[089])\\d{6}", [10]],
        ["700\\d{6}", [9]],
        0,
        ["818\\d{6}", [9]],
        0,
        ["76\\d{7}", [9]],
        ["18[59]0\\d{6}", [10]],
      ],
    ],
    IL: [
      "972",
      "0(?:0|1[2-9])",
      "1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",
      [7, 8, 9, 10, 11, 12],
      [
        ["(\\d{4})(\\d{3})", "$1-$2", ["125"]],
        ["(\\d{4})(\\d{2})(\\d{2})", "$1-$2-$3", ["121"]],
        ["(\\d)(\\d{3})(\\d{4})", "$1-$2-$3", ["[2-489]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1-$2-$3", ["[57]"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1-$2-$3", ["12"]],
        ["(\\d{4})(\\d{6})", "$1-$2", ["159"]],
        ["(\\d)(\\d{3})(\\d{3})(\\d{3})", "$1-$2-$3-$4", ["1[7-9]"]],
        ["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})", "$1-$2 $3-$4", ["15"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}", [8, 11, 12]],
        [
          "55410\\d{4}|5(?:(?:[02][02-9]|[149][2-9]|[36]\\d|8[3-7])\\d|5(?:01|2\\d|3[0-3]|4[34]|5[0-25689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",
          [9],
        ],
        ["1(?:255|80[019]\\d{3})\\d{3}", [7, 10]],
        ["1212\\d{4}|1(?:200|9(?:0[0-2]|19))\\d{6}", [8, 10]],
        0,
        0,
        ["1599\\d{6}", [10]],
        0,
        [
          "7(?:38(?:0\\d|5[0-29]|88)|8(?:33|55|77|81)\\d)\\d{4}|7(?:18|2[23]|3[237]|47|6[258]|7\\d|82|9[2-9])\\d{6}",
          [9],
        ],
        ["1700\\d{6}", [10]],
      ],
    ],
    IM: [
      "44",
      "00",
      "1624\\d{6}|(?:[3578]\\d|90)\\d{8}",
      [10],
      0,
      "0",
      0,
      "([25-8]\\d{5})$|0",
      "1624$1",
      0,
      "74576|(?:16|7[56])24",
      [
        ["1624(?:230|[5-8]\\d\\d)\\d{3}"],
        ["76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}"],
        ["808162\\d{4}"],
        ["8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}"],
        ["70\\d{8}"],
        0,
        [
          "3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}",
        ],
        0,
        ["56\\d{8}"],
      ],
    ],
    IN: [
      "91",
      "00",
      "(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",
      [8, 9, 10, 11, 12, 13],
      [
        [
          "(\\d{8})",
          "$1",
          [
            "5(?:0|2[23]|3[03]|[67]1|88)",
            "5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)",
            "5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)",
          ],
          0,
          1,
        ],
        ["(\\d{4})(\\d{4,5})", "$1 $2", ["180", "1800"], 0, 1],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["140"], 0, 1],
        [
          "(\\d{2})(\\d{4})(\\d{4})",
          "$1 $2 $3",
          [
            "11|2[02]|33|4[04]|79[1-7]|80[2-46]",
            "11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])",
            "11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])",
          ],
          "0$1",
          1,
        ],
        [
          "(\\d{3})(\\d{3})(\\d{4})",
          "$1 $2 $3",
          [
            "1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]",
            "1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]",
            "1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]",
          ],
          "0$1",
          1,
        ],
        [
          "(\\d{4})(\\d{3})(\\d{3})",
          "$1 $2 $3",
          [
            "1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807",
            "1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]",
            "1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]",
          ],
          "0$1",
          1,
        ],
        ["(\\d{5})(\\d{5})", "$1 $2", ["[6-9]"], "0$1", 1],
        [
          "(\\d{4})(\\d{2,4})(\\d{4})",
          "$1 $2 $3",
          ["1(?:6|8[06])", "1(?:6|8[06]0)"],
          0,
          1,
        ],
        ["(\\d{4})(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["18"], 0, 1],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",
          [10],
        ],
        [
          "(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",
          [10],
        ],
        ["000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))"],
        ["186[12]\\d{9}", [13]],
        0,
        0,
        ["140\\d{7}", [10]],
        0,
        0,
        ["1860\\d{7}", [11]],
      ],
    ],
    IO: [
      "246",
      "00",
      "3\\d{6}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["3"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["37\\d{5}"], ["38\\d{5}"]],
    ],
    IQ: [
      "964",
      "00",
      "(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",
      [8, 9, 10],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["1"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[2-6]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["7"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}", [8, 9]],
        ["7[3-9]\\d{8}", [10]],
      ],
    ],
    IR: [
      "98",
      "00",
      "[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",
      [4, 5, 6, 7, 10],
      [
        ["(\\d{4,5})", "$1", ["96"], "0$1"],
        [
          "(\\d{2})(\\d{4,5})",
          "$1 $2",
          [
            "(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]",
          ],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["9"], "0$1"],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1 $2 $3", ["[1-8]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|(?:12\\d|30[0-2])\\d|2(?:121|[2689]0\\d)|4(?:111|40\\d))\\d{4}",
          [6, 7, 10],
        ],
        [
          "9(?:(?:0(?:[0-35]\\d|4[4-6])|(?:[13]\\d|2[0-3])\\d)\\d|9(?:[0-46]\\d\\d|5[15]0|8(?:[12]\\d|88)|9(?:0[0-3]|[19]\\d|21|69|77|8[7-9])))\\d{5}",
          [10],
        ],
        0,
        0,
        0,
        0,
        [
          "96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",
          [4, 5],
        ],
      ],
    ],
    IS: [
      "354",
      "00|1(?:0(?:01|[12]0)|100)",
      "(?:38\\d|[4-9])\\d{6}",
      [7, 9],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["[4-9]"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["3"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-24589]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",
          [7],
        ],
        [
          "(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[026-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[238]))\\d{4}",
        ],
        ["80[0-8]\\d{4}", [7]],
        [
          "90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",
          [7],
        ],
        0,
        0,
        ["809\\d{4}", [7]],
        0,
        ["49[0-24-79]\\d{4}", [7]],
      ],
      "00",
    ],
    IT: [
      "39",
      "00",
      "0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",
      [6, 7, 8, 9, 10, 11],
      [
        ["(\\d{2})(\\d{4,6})", "$1 $2", ["0[26]"]],
        [
          "(\\d{3})(\\d{3,6})",
          "$1 $2",
          [
            "0[13-57-9][0159]|8(?:03|4[17]|9[2-5])",
            "0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))",
          ],
        ],
        ["(\\d{4})(\\d{2,6})", "$1 $2", ["0(?:[13-579][2-46-8]|8[236-8])"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["894"]],
        ["(\\d{2})(\\d{3,4})(\\d{4})", "$1 $2 $3", ["0[26]|5"]],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["1(?:44|[679])|[378]|43"]],
        ["(\\d{3})(\\d{3,4})(\\d{4})", "$1 $2 $3", ["0[13-57-9][0159]|14"]],
        ["(\\d{2})(\\d{4})(\\d{5})", "$1 $2 $3", ["0[26]"]],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["0"]],
        ["(\\d{3})(\\d{4})(\\d{4,5})", "$1 $2 $3", ["3"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",
        ],
        ["3[2-9]\\d{7,8}|(?:31|43)\\d{8}", [9, 10]],
        ["80(?:0\\d{3}|3)\\d{3}", [6, 9]],
        [
          "(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",
          [6, 8, 9, 10],
        ],
        ["1(?:78\\d|99)\\d{6}", [9, 10]],
        0,
        0,
        0,
        ["55\\d{8}", [10]],
        ["84(?:[08]\\d{3}|[17])\\d{3}", [6, 9]],
      ],
    ],
    JE: [
      "44",
      "00",
      "1534\\d{6}|(?:[3578]\\d|90)\\d{8}",
      [10],
      0,
      "0",
      0,
      "([0-24-8]\\d{5})$|0",
      "1534$1",
      0,
      0,
      [
        ["1534[0-24-8]\\d{5}"],
        ["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],
        ["80(?:07(?:35|81)|8901)\\d{4}"],
        [
          "(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}",
        ],
        ["701511\\d{4}"],
        0,
        [
          "(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}",
        ],
        [
          "76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",
        ],
        ["56\\d{8}"],
      ],
    ],
    JM: [
      "1",
      "011",
      "(?:[58]\\d\\d|658|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      0,
      0,
      0,
      "658|876",
      [
        [
          "8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[0235-9]|[23]\\d|40|5[06]|6[2-589]|7[0-25-9]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",
        ],
        [
          "(?:658295|876(?:2(?:0[1-9]|[13-9]\\d|2[013-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    JO: [
      "962",
      "00",
      "(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",
      [8, 9],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["[2356]|87"], "(0$1)"],
        ["(\\d{3})(\\d{5,6})", "$1 $2", ["[89]"], "0$1"],
        ["(\\d{2})(\\d{7})", "$1 $2", ["70"], "0$1"],
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["7"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",
          [8],
        ],
        ["7(?:[78][0-25-9]|9\\d)\\d{6}", [9]],
        ["80\\d{6}", [8]],
        ["9\\d{7}", [8]],
        ["70\\d{7}", [9]],
        0,
        ["8(?:10|8\\d)\\d{5}", [8]],
        ["74(?:66|77)\\d{5}", [9]],
        0,
        ["85\\d{6}", [8]],
      ],
    ],
    JP: [
      "81",
      "010",
      "00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",
      [8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1-$2-$3", ["(?:12|57|99)0"], "0$1"],
        [
          "(\\d{4})(\\d)(\\d{4})",
          "$1-$2-$3",
          [
            "1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])",
            "1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]",
            "1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]",
          ],
          "0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1-$2-$3", ["60"], "0$1"],
        [
          "(\\d)(\\d{4})(\\d{4})",
          "$1-$2-$3",
          ["[36]|4(?:2[09]|7[01])", "[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],
          "0$1",
        ],
        [
          "(\\d{2})(\\d{3})(\\d{4})",
          "$1-$2-$3",
          [
            "1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])",
            "1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]",
            "1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]",
          ],
          "0$1",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{4})",
          "$1-$2-$3",
          ["[14]|[289][2-9]|5[3-9]|7[2-4679]"],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1-$2-$3", ["800"], "0$1"],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1-$2-$3", ["[257-9]"], "0$1"],
      ],
      "0",
      0,
      "(000[259]\\d{6})$|(?:(?:003768)0?)|0",
      "$1",
      0,
      0,
      [
        [
          "(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",
          [9],
        ],
        ["[7-9]0[1-9]\\d{7}", [10]],
        [
          "00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}",
        ],
        ["990\\d{6}", [9]],
        ["60\\d{7}", [9]],
        0,
        ["570\\d{6}", [9]],
        ["20\\d{8}", [10]],
        ["50[1-9]\\d{7}", [10]],
      ],
    ],
    KE: [
      "254",
      "000",
      "(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",
      [7, 8, 9, 10],
      [
        ["(\\d{2})(\\d{5,7})", "$1 $2", ["[24-6]"], "0$1"],
        ["(\\d{3})(\\d{6})", "$1 $2", ["[17]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[89]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",
          [7, 8, 9],
        ],
        ["(?:1(?:0[0-8]|1[0-5]|2[014]|30)|7\\d\\d)\\d{6}", [9]],
        ["800[02-8]\\d{5,6}", [9, 10]],
        ["900[02-9]\\d{5}", [9]],
      ],
    ],
    KG: [
      "996",
      "00",
      "8\\d{9}|[235-9]\\d{8}",
      [9, 10],
      [
        ["(\\d{4})(\\d{5})", "$1 $2", ["3(?:1[346]|[24-79])"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[235-79]|88"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d)(\\d{2,3})", "$1 $2 $3 $4", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",
          [9],
        ],
        [
          "312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|600|7(?:[07]\\d|55)|88[08]|9(?:12|9[05-9]))\\d{6}",
          [9],
        ],
        ["800\\d{6,7}"],
      ],
    ],
    KH: [
      "855",
      "00[14-9]",
      "1\\d{9}|[1-9]\\d{7,8}",
      [8, 9, 10],
      [
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[1-9]"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["1"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",
          [8, 9],
        ],
        [
          "(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",
          [8, 9],
        ],
        ["1800(?:1\\d|2[019])\\d{4}", [10]],
        ["1900(?:1\\d|2[09])\\d{4}", [10]],
      ],
    ],
    KI: [
      "686",
      "00",
      "(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",
      [5, 8],
      0,
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}",
        ],
        [
          "(?:6200[01]|7(?:310[1-9]|5(?:02[03-9]|12[0-47-9]|22[0-7]|[34](?:0[1-9]|8[02-9])|50[1-9])))\\d{3}|(?:63\\d\\d|7(?:(?:[0146-9]\\d|2[0-689])\\d|3(?:[02-9]\\d|1[1-9])|5(?:[0-2][013-9]|[34][1-79]|5[1-9]|[6-9]\\d)))\\d{4}",
          [8],
        ],
        0,
        0,
        0,
        0,
        0,
        0,
        ["30(?:0[01]\\d\\d|12(?:11|20))\\d\\d", [8]],
      ],
    ],
    KM: [
      "269",
      "00",
      "[3478]\\d{6}",
      [7],
      [["(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3", ["[3478]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["7[4-7]\\d{5}"], ["[34]\\d{6}"], 0, ["8\\d{6}"]],
    ],
    KN: [
      "1",
      "011",
      "(?:[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-7]\\d{6})$|1",
      "869$1",
      0,
      "869",
      [
        ["869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}"],
        ["869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    KP: [
      "850",
      "00|99",
      "85\\d{6}|(?:19\\d|[2-7])\\d{7}",
      [8, 10],
      [
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["8"], "0$1"],
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["[2-7]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}"],
        ["19[1-3]\\d{7}", [10]],
      ],
    ],
    KR: [
      "82",
      "00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))",
      "00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",
      [5, 6, 8, 9, 10, 11, 12, 13, 14],
      [
        [
          "(\\d{2})(\\d{3,4})",
          "$1-$2",
          ["(?:3[1-3]|[46][1-4]|5[1-5])1"],
          "0$1",
        ],
        ["(\\d{4})(\\d{4})", "$1-$2", ["1"]],
        ["(\\d)(\\d{3,4})(\\d{4})", "$1-$2-$3", ["2"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1-$2-$3", ["60|8"], "0$1"],
        ["(\\d{2})(\\d{3,4})(\\d{4})", "$1-$2-$3", ["[1346]|5[1-5]"], "0$1"],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1-$2-$3", ["[57]"], "0$1"],
        ["(\\d{2})(\\d{5})(\\d{4})", "$1-$2-$3", ["5"], "0$1"],
      ],
      "0",
      0,
      "0(8(?:[1-46-8]|5\\d\\d))?",
      0,
      0,
      0,
      [
        [
          "(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",
          [5, 6, 8, 9, 10],
        ],
        [
          "1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[0-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",
          [9, 10],
        ],
        [
          "00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|80)\\d{7}",
          [9, 11, 12, 13, 14],
        ],
        ["60[2-9]\\d{6}", [9]],
        ["50\\d{8,9}", [10, 11]],
        0,
        [
          "1(?:5(?:22|33|44|66|77|88|99)|6(?:[07]0|44|6[0168]|88)|8(?:00|33|55|77|99))\\d{4}",
          [8],
        ],
        ["15\\d{7,8}", [9, 10]],
        ["70\\d{8}", [10]],
      ],
    ],
    KW: [
      "965",
      "00",
      "18\\d{5}|(?:[2569]\\d|41)\\d{6}",
      [7, 8],
      [
        ["(\\d{4})(\\d{3,4})", "$1 $2", ["[169]|2(?:[235]|4[1-35-9])|52"]],
        ["(\\d{3})(\\d{5})", "$1 $2", ["[245]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",
          [8],
        ],
        [
          "(?:41\\d\\d|5(?:(?:[05]\\d|1[0-7]|6[56])\\d|2(?:22|5[25])|7(?:55|77)|88[58])|6(?:(?:0[034679]|5[015-9]|6\\d)\\d|1(?:00|11|6[16])|2[26]2|3[36]3|4[46]4|7(?:0[013-9]|[67]\\d)|8[68]8|9(?:[069]\\d|3[039]))|9(?:(?:[04679]\\d|8[057-9])\\d|1(?:1[01]|99)|2(?:00|2\\d)|3(?:00|3[03])|5(?:00|5\\d)))\\d{4}",
          [8],
        ],
        ["18\\d{5}", [7]],
      ],
    ],
    KY: [
      "1",
      "011",
      "(?:345|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "345$1",
      0,
      "345",
      [
        [
          "345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|[48]8)|9(?:14|4[035-9]))\\d{4}",
        ],
        [
          "345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|82[56]|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["(?:345976|900[2-9]\\d\\d)\\d{4}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        0,
        ["345849\\d{4}"],
      ],
    ],
    KZ: [
      "7",
      "810",
      "(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",
      [10, 14],
      0,
      "8",
      0,
      0,
      0,
      0,
      "33|7",
      [
        [
          "(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9]|97)|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]|59))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",
          [10],
        ],
        ["7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}", [10]],
        ["8(?:00|108\\d{3})\\d{7}"],
        ["809\\d{7}", [10]],
        ["808\\d{7}", [10]],
        0,
        0,
        0,
        ["751\\d{7}", [10]],
      ],
      "8~10",
    ],
    LA: [
      "856",
      "00",
      "[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",
      [8, 9, 10],
      [
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["2[13]|3[14]|[4-8]"], "0$1"],
        [
          "(\\d{2})(\\d{2})(\\d{2})(\\d{3})",
          "$1 $2 $3 $4",
          ["30[013-9]"],
          "0$1",
        ],
        ["(\\d{2})(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["[23]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2[13]|[35-7][14]|41|8[1468])\\d{6}", [8]],
        ["2088\\d{6}|(?:20[23579]|302)\\d{7}", [10]],
        0,
        0,
        0,
        0,
        ["30[013-9]\\d{6}", [9]],
      ],
    ],
    LB: [
      "961",
      "00",
      "[27-9]\\d{7}|[13-9]\\d{6}",
      [7, 8],
      [
        [
          "(\\d)(\\d{3})(\\d{3})",
          "$1 $2 $3",
          ["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],
          "0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[27-9]"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "7(?:62|8[0-7]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}",
        ],
        [
          "793(?:[01]\\d|2[0-4])\\d{3}|(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[89]|9[12]))\\d{5}",
        ],
        0,
        ["9[01]\\d{6}", [8]],
        0,
        0,
        0,
        0,
        0,
        ["80\\d{6}", [8]],
      ],
    ],
    LC: [
      "1",
      "011",
      "(?:[58]\\d\\d|758|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-8]\\d{6})$|1",
      "758$1",
      0,
      "758",
      [
        ["758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}"],
        [
          "758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    LI: [
      "423",
      "00",
      "[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",
      [7, 9],
      [
        [
          "(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3",
          ["[2379]|8(?:0[09]|7)", "[2379]|8(?:0(?:02|9)|7)"],
        ],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["8"]],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["69"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["6"]],
      ],
      "0",
      0,
      "(1001)|0",
      0,
      0,
      0,
      [
        [
          "(?:2(?:01|1[27]|2[02]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",
          [7],
        ],
        [
          "(?:6(?:(?:4[5-9]|5[0-469])\\d|6(?:[024-6]\\d|[17]0|3[7-9]))\\d|7(?:[37-9]\\d|42|56))\\d{4}",
        ],
        ["8002[28]\\d\\d|80(?:05\\d|9)\\d{4}"],
        ["90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d", [7]],
        0,
        0,
        ["870(?:28|87)\\d\\d", [7]],
      ],
    ],
    LK: [
      "94",
      "00",
      "[1-9]\\d{8}",
      [9],
      [
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["7"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[1-689]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}",
        ],
        ["7(?:[0-25-8]\\d|4[0-4])\\d{6}"],
        0,
        0,
        0,
        0,
        ["1973\\d{5}"],
      ],
    ],
    LR: [
      "231",
      "00",
      "(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",
      [7, 8, 9],
      [
        ["(\\d)(\\d{3})(\\d{3})", "$1 $2 $3", ["4[67]|[56]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["2"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[2-578]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["2\\d{7}", [8]],
        [
          "(?:(?:(?:22|33)0|555|(?:77|88)\\d)\\d|4(?:240|[67]))\\d{5}|[56]\\d{6}",
          [7, 9],
        ],
        0,
        ["332(?:02|[34]\\d)\\d{4}", [9]],
      ],
    ],
    LS: [
      "266",
      "00",
      "(?:[256]\\d\\d|800)\\d{5}",
      [8],
      [["(\\d{4})(\\d{4})", "$1 $2", ["[2568]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["2\\d{7}"], ["[56]\\d{7}"], ["800[1256]\\d{4}"]],
    ],
    LT: [
      "370",
      "00",
      "(?:[3469]\\d|52|[78]0)\\d{6}",
      [8],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["52[0-7]"], "(0-$1)", 1],
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["[7-9]"], "0 $1", 1],
        ["(\\d{2})(\\d{6})", "$1 $2", ["37|4(?:[15]|6[1-8])"], "(0-$1)", 1],
        ["(\\d{3})(\\d{5})", "$1 $2", ["[3-6]"], "(0-$1)", 1],
      ],
      "0",
      0,
      "[08]",
      0,
      0,
      0,
      [
        ["(?:3[1478]|4[124-6]|52)\\d{6}"],
        ["6\\d{7}"],
        ["80[02]\\d{5}"],
        ["9(?:0[0239]|10)\\d{5}"],
        ["70[05]\\d{5}"],
        0,
        ["70[67]\\d{5}"],
        0,
        ["[89]01\\d{5}"],
        ["808\\d{5}"],
      ],
    ],
    LU: [
      "352",
      "00",
      "35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",
      [4, 5, 6, 7, 8, 9, 10, 11],
      [
        [
          "(\\d{2})(\\d{3})",
          "$1 $2",
          ["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],
        ],
        [
          "(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3",
          ["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],
        ],
        ["(\\d{2})(\\d{2})(\\d{3})", "$1 $2 $3", ["20[2-689]"]],
        [
          "(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})",
          "$1 $2 $3 $4",
          ["2(?:[0367]|4[3-8])"],
        ],
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["80[01]|90[015]"]],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{3})", "$1 $2 $3 $4", ["20"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["6"]],
        [
          "(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})",
          "$1 $2 $3 $4 $5",
          ["2(?:[0367]|4[3-8])"],
        ],
        [
          "(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})",
          "$1 $2 $3 $4",
          ["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"],
        ],
      ],
      0,
      0,
      "(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",
      0,
      0,
      0,
      [
        [
          "(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}",
        ],
        ["6(?:[269][18]|5[1568]|7[189]|81)\\d{6}", [9]],
        ["800\\d{5}", [8]],
        ["90[015]\\d{5}", [8]],
        0,
        0,
        0,
        0,
        ["20(?:1\\d{5}|[2-689]\\d{1,7})", [4, 5, 6, 7, 8, 9, 10]],
        ["801\\d{5}", [8]],
      ],
    ],
    LV: [
      "371",
      "00",
      "(?:[268]\\d|90)\\d{6}",
      [8],
      [["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[269]|8[01]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["6\\d{7}"],
        [
          "23(?:23[0-57-9]|33[0238])\\d{3}|2(?:[0-24-9]\\d\\d|3(?:0[07]|[14-9]\\d|2[024-9]|3[0-24-9]))\\d{4}",
        ],
        ["80\\d{6}"],
        ["90\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["81\\d{6}"],
      ],
    ],
    LY: [
      "218",
      "00",
      "[2-9]\\d{8}",
      [9],
      [["(\\d{2})(\\d{7})", "$1-$2", ["[2-9]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}",
        ],
        ["9[1-6]\\d{7}"],
      ],
    ],
    MA: [
      "212",
      "00",
      "[5-8]\\d{8}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["5[45]"], "0$1"],
        [
          "(\\d{4})(\\d{5})",
          "$1-$2",
          ["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],
          "0$1",
        ],
        ["(\\d{2})(\\d{7})", "$1-$2", ["8"], "0$1"],
        ["(\\d{3})(\\d{6})", "$1-$2", ["[5-7]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}",
        ],
        [
          "(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}",
        ],
        ["80[0-7]\\d{6}"],
        ["89\\d{7}"],
        0,
        0,
        0,
        0,
        ["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"],
      ],
    ],
    MC: [
      "377",
      "00",
      "(?:[3489]|6\\d)\\d{7}",
      [8, 9],
      [
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["4"], "0$1"],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[389]"]],
        [
          "(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4 $5",
          ["6"],
          "0$1",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:870|9[2-47-9]\\d)\\d{5}", [8]],
        ["4(?:[469]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}"],
        ["(?:800|90\\d)\\d{5}", [8]],
      ],
    ],
    MD: [
      "373",
      "00",
      "(?:[235-7]\\d|[89]0)\\d{6}",
      [8],
      [
        ["(\\d{3})(\\d{5})", "$1 $2", ["[89]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["22|3"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["[25-7]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}"],
        ["562\\d{5}|(?:6\\d|7[16-9])\\d{6}"],
        ["800\\d{5}"],
        ["90[056]\\d{5}"],
        0,
        0,
        ["803\\d{5}"],
        0,
        ["3[08]\\d{6}"],
        ["808\\d{5}"],
      ],
    ],
    ME: [
      "382",
      "00",
      "(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",
      [8, 9],
      [["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[2-9]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",
          [8],
        ],
        ["6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}", [8]],
        ["80(?:[0-2578]|9\\d)\\d{5}"],
        ["9(?:4[1568]|5[178])\\d{5}", [8]],
        0,
        0,
        ["77[1-9]\\d{5}", [8]],
        0,
        ["78[1-49]\\d{5}", [8]],
      ],
    ],
    MF: [
      "590",
      "00",
      "590\\d{6}|(?:69|80|9\\d)\\d{7}",
      [9],
      0,
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],
        [
          "69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}",
        ],
        ["80[0-5]\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"],
      ],
    ],
    MG: [
      "261",
      "00",
      "[23]\\d{8}",
      [9],
      [["(\\d{2})(\\d{2})(\\d{3})(\\d{2})", "$1 $2 $3 $4", ["[23]"], "0$1"]],
      "0",
      0,
      "([24-9]\\d{6})$|0",
      "20$1",
      0,
      0,
      [
        [
          "2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[35]|8[268]|9[245])\\d{5}",
        ],
        ["3[2-47-9]\\d{7}"],
        0,
        0,
        0,
        0,
        0,
        0,
        ["22\\d{7}"],
      ],
    ],
    MH: [
      "692",
      "011",
      "329\\d{4}|(?:[256]\\d|45)\\d{5}",
      [7],
      [["(\\d{3})(\\d{4})", "$1-$2", ["[2-6]"]]],
      "1",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:247|528|625)\\d{4}"],
        ["(?:(?:23|54)5|329|45[35-8])\\d{4}"],
        0,
        0,
        0,
        0,
        0,
        0,
        ["635\\d{4}"],
      ],
    ],
    MK: [
      "389",
      "00",
      "[2-578]\\d{7}",
      [8],
      [
        [
          "(\\d)(\\d{3})(\\d{4})",
          "$1 $2 $3",
          ["2|34[47]|4(?:[37]7|5[47]|64)"],
          "0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[347]"], "0$1"],
        ["(\\d{3})(\\d)(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[58]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:2(?:62|77)0|3444)\\d|4[56]440)\\d{3}|(?:34|4[357])700\\d{3}|(?:2(?:[0-3]\\d|5[0-578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}",
        ],
        [
          "7(?:3555|(?:474|9[019]7)7)\\d{3}|7(?:[0-25-8]\\d\\d|3(?:[1-48]\\d|6[01]|7[01578])|4(?:2\\d|60|7[01578])|9(?:[2-4]\\d|5[01]|7[015]))\\d{4}",
        ],
        ["800\\d{5}"],
        ["5\\d{7}"],
        0,
        0,
        0,
        0,
        0,
        ["8(?:0[1-9]|[1-9]\\d)\\d{5}"],
      ],
    ],
    ML: [
      "223",
      "00",
      "[24-9]\\d{7}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[24-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-39]))\\d{5}",
        ],
        ["2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[01]|[679]\\d|8[2-49])\\d{6}"],
        ["80\\d{6}"],
      ],
    ],
    MM: [
      "95",
      "00",
      "1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",
      [6, 7, 8, 9, 10],
      [
        ["(\\d)(\\d{2})(\\d{3})", "$1 $2 $3", ["16|2"], "0$1"],
        [
          "(\\d{2})(\\d{2})(\\d{3})",
          "$1 $2 $3",
          ["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],
          "0$1",
        ],
        ["(\\d)(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[12]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[4-7]|8[1-35]"], "0$1"],
        [
          "(\\d)(\\d{3})(\\d{4,6})",
          "$1 $2 $3",
          ["9(?:2[0-4]|[35-9]|4[137-9])"],
          "0$1",
        ],
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["2"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["8"], "0$1"],
        ["(\\d)(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["92"], "0$1"],
        ["(\\d)(\\d{5})(\\d{4})", "$1 $2 $3", ["9"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:(?:2\\d|3[56]|[89][0-6])\\d|4(?:2[29]|62|7[0-2]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|[26]2|7[0-2]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[013])|3(?:20\\d|4(?:70|83)|56)|420\\d|5470)|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|2472|3(?:20\\d|470)|4(?:2[04]\\d|472)|7(?:(?:3\\d|8[01459])\\d|4[67]0)))\\d{4}|5(?:2(?:2\\d{5,6}|47[02]\\d{4})|(?:3472|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[01])|8(?:20\\d|47[02])|9(?:20\\d|470))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:(?:2\\d|51)\\d|4(?:[1-35-9]\\d|4[0-57-9]))|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|[35]2\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",
          [6, 7, 8, 9],
        ],
        [
          "(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",
          [7, 8, 9, 10],
        ],
        ["80080(?:0[1-9]|2\\d)\\d{3}", [10]],
        0,
        0,
        0,
        0,
        0,
        ["1333\\d{4}|[12]468\\d{4}", [8]],
      ],
    ],
    MN: [
      "976",
      "001",
      "[12]\\d{7,9}|[5-9]\\d{7}",
      [8, 9, 10],
      [
        ["(\\d{2})(\\d{2})(\\d{4})", "$1 $2 $3", ["[12]1"], "0$1"],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[5-9]"]],
        ["(\\d{3})(\\d{5,6})", "$1 $2", ["[12]2[1-3]"], "0$1"],
        [
          "(\\d{4})(\\d{5,6})",
          "$1 $2",
          [
            "[12](?:27|3[2-8]|4[2-68]|5[1-4689])",
            "[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]",
          ],
          "0$1",
        ],
        ["(\\d{5})(\\d{4,5})", "$1 $2", ["[12]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "[12]2[1-3]\\d{5,6}|(?:(?:[12](?:1|27)|5[368])\\d\\d|7(?:0(?:[0-5]\\d|7[078]|80)|128))\\d{4}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}",
        ],
        [
          "(?:83[01]|92[039])\\d{5}|(?:5[05]|6[069]|8[015689]|9[013-9])\\d{6}",
          [8],
        ],
        0,
        0,
        0,
        0,
        0,
        0,
        ["712[0-79]\\d{4}|7(?:1[013-9]|[25-9]\\d)\\d{5}", [8]],
      ],
    ],
    MO: [
      "853",
      "00",
      "0800\\d{3}|(?:28|[68]\\d)\\d{6}",
      [7, 8],
      [
        ["(\\d{4})(\\d{3})", "$1 $2", ["0"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[268]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}", [8]],
        [
          "6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",
          [8],
        ],
        ["0800\\d{3}", [7]],
      ],
    ],
    MP: [
      "1",
      "011",
      "[58]\\d{9}|(?:67|90)0\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "670$1",
      0,
      "670",
      [
        [
          "670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",
        ],
        [""],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    MQ: [
      "596",
      "00",
      "596\\d{6}|(?:69|80|9\\d)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[569]"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["596(?:[03-7]\\d|1[05]|2[7-9]|8[0-39]|9[04-9])\\d{4}"],
        ["69(?:6(?:[0-46-9]\\d|5[0-6])|727)\\d{4}"],
        ["80[0-5]\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:397[0-3]|477[0-5]|76(?:6\\d|7[0-367]))\\d{4}"],
      ],
    ],
    MR: [
      "222",
      "00",
      "(?:[2-4]\\d\\d|800)\\d{5}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2-48]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:25[08]|35\\d|45[1-7])\\d{5}"],
        ["[2-4][0-46-9]\\d{6}"],
        ["800\\d{5}"],
      ],
    ],
    MS: [
      "1",
      "011",
      "(?:[58]\\d\\d|664|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([34]\\d{6})$|1",
      "664$1",
      0,
      "664",
      [
        ["6644(?:1[0-3]|91)\\d{4}"],
        ["664(?:3(?:49|9[1-6])|49[2-6])\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    MT: [
      "356",
      "00",
      "3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",
      [8],
      [["(\\d{4})(\\d{4})", "$1 $2", ["[2357-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["20(?:3[1-4]|6[059])\\d{4}|2(?:0[19]|[1-357]\\d|60)\\d{5}"],
        [
          "(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}",
        ],
        ["800(?:02|[3467]\\d)\\d{3}"],
        ["5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}"],
        0,
        0,
        ["501\\d{5}"],
        ["7117\\d{4}"],
        ["3550\\d{4}"],
      ],
    ],
    MU: [
      "230",
      "0(?:0|[24-7]0|3[03])",
      "(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",
      [7, 8, 10],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["[2-46]|8[013]"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[57]"]],
        ["(\\d{5})(\\d{5})", "$1 $2", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:[0346-8]\\d|1[0-7])|4(?:[013568]\\d|2[4-8])|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",
          [7, 8],
        ],
        [
          "5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|(?:5(?:2[5-9]|4[3-689]|[57]\\d|8[0-689]|9[0-8])|7(?:0[0-3]|3[013]))\\d{5}",
          [8],
        ],
        ["802\\d{7}|80[0-2]\\d{4}", [7, 10]],
        ["30\\d{5}", [7]],
        0,
        0,
        0,
        0,
        ["3(?:20|9\\d)\\d{4}", [7]],
      ],
      "020",
    ],
    MV: [
      "960",
      "0(?:0|19)",
      "(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",
      [7, 10],
      [
        ["(\\d{3})(\\d{4})", "$1-$2", ["[34679]"]],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["[89]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:3(?:0[0-3]|3[0-59])|6(?:[58][024689]|6[024-68]|7[02468]))\\d{4}",
          [7],
        ],
        ["(?:46[46]|[79]\\d\\d)\\d{4}", [7]],
        ["800\\d{7}", [10]],
        ["900\\d{7}", [10]],
        0,
        0,
        ["4(?:0[01]|50)\\d{4}", [7]],
      ],
      "00",
    ],
    MW: [
      "265",
      "00",
      "(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",
      [7, 9],
      [
        ["(\\d)(\\d{3})(\\d{3})", "$1 $2 $3", ["1[2-9]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["2"], "0$1"],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[137-9]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:1[2-9]|2[12]\\d\\d)\\d{5}"],
        ["111\\d{6}|(?:31|77|[89][89])\\d{7}", [9]],
      ],
    ],
    MX: [
      "52",
      "0[09]",
      "1(?:(?:22|44|7[27]|87|9[69])[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-689]|8[1-69]|9[1-578])|[2-9]\\d)\\d{8}",
      [10, 11],
      [
        ["(\\d{2})(\\d{4})(\\d{4})", "$1 $2 $3", ["33|5[56]|81"], 0, 1],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["[2-9]"], 0, 1],
        [
          "(\\d)(\\d{2})(\\d{4})(\\d{4})",
          "$2 $3 $4",
          ["1(?:33|5[56]|81)"],
          0,
          1,
        ],
        ["(\\d)(\\d{3})(\\d{3})(\\d{4})", "$2 $3 $4", ["1"], 0, 1],
      ],
      "01",
      0,
      "0(?:[12]|4[45])|1",
      0,
      0,
      0,
      [
        [
          "657[12]\\d{6}|(?:2(?:0[01]|2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}",
          [10],
        ],
        [
          "657[12]\\d{6}|(?:1(?:2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))|2(?:2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}",
        ],
        ["8(?:00|88)\\d{7}", [10]],
        ["900\\d{7}", [10]],
        ["500\\d{7}", [10]],
        0,
        0,
        0,
        0,
        ["300\\d{7}", [10]],
      ],
      "00",
    ],
    MY: [
      "60",
      "00",
      "1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",
      [8, 9, 10],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1-$2 $3", ["[4-79]"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{3,4})",
          "$1-$2 $3",
          [
            "1(?:[02469]|[378][1-9]|53)|8",
            "1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8",
          ],
          "0$1",
        ],
        ["(\\d)(\\d{4})(\\d{4})", "$1-$2 $3", ["3"], "0$1"],
        ["(\\d)(\\d{3})(\\d{2})(\\d{4})", "$1-$2-$3-$4", ["1(?:[367]|80)"]],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1-$2 $3", ["15"], "0$1"],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1-$2 $3", ["1"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",
          [8, 9],
        ],
        [
          "1(?:1888[689]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0-4]\\d|5[0-7]))|(?:[269]\\d|[37][1-9]|4[235-9])\\d|5(?:31|9\\d\\d)|8(?:1[23]|[236]\\d|4[06]|5(?:46|[7-9])|7[016-9]|8[01]|9[0-8]))\\d{5}",
          [9, 10],
        ],
        ["1[378]00\\d{6}", [10]],
        ["1600\\d{6}", [10]],
        0,
        0,
        0,
        0,
        [
          "15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",
          [10],
        ],
      ],
    ],
    MZ: [
      "258",
      "00",
      "(?:2|8\\d)\\d{7}",
      [8, 9],
      [
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["2|8[2-79]"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}", [8]],
        ["8[2-79]\\d{7}", [9]],
        ["800\\d{6}", [9]],
      ],
    ],
    NA: [
      "264",
      "00",
      "[68]\\d{7,8}",
      [8, 9],
      [
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["88"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["6"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["87"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}",
        ],
        ["(?:60|8[1245])\\d{7}", [9]],
        ["80\\d{7}", [9]],
        ["8701\\d{5}", [9]],
        0,
        0,
        0,
        0,
        ["8(?:3\\d\\d|86)\\d{5}"],
      ],
    ],
    NC: [
      "687",
      "00",
      "(?:050|[2-57-9]\\d\\d)\\d{3}",
      [6],
      [["(\\d{2})(\\d{2})(\\d{2})", "$1.$2.$3", ["[02-57-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}"],
        ["(?:5[0-4]|[79]\\d|8[0-79])\\d{4}"],
        ["050\\d{3}"],
        ["36\\d{4}"],
      ],
    ],
    NE: [
      "227",
      "00",
      "[027-9]\\d{7}",
      [8],
      [
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["08"]],
        [
          "(\\d{2})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["[089]|2[013]|7[047]"],
        ],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}",
        ],
        ["(?:23|7[047]|[89]\\d)\\d{6}"],
        ["08\\d{6}"],
        ["09\\d{6}"],
      ],
    ],
    NF: [
      "672",
      "00",
      "[13]\\d{5}",
      [6],
      [
        ["(\\d{2})(\\d{4})", "$1 $2", ["1[0-3]"]],
        ["(\\d)(\\d{5})", "$1 $2", ["[13]"]],
      ],
      0,
      0,
      "([0-258]\\d{4})$",
      "3$1",
      0,
      0,
      [["(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}"], ["(?:14|3[58])\\d{4}"]],
    ],
    NG: [
      "234",
      "009",
      "2[0-24-9]\\d{8}|[78]\\d{10,13}|[7-9]\\d{9}|[1-9]\\d{7}|[124-7]\\d{6}",
      [7, 8, 10, 11, 12, 13, 14],
      [
        ["(\\d{2})(\\d{2})(\\d{3})", "$1 $2 $3", ["78"], "0$1"],
        [
          "(\\d)(\\d{3})(\\d{3,4})",
          "$1 $2 $3",
          ["[12]|9(?:0[3-9]|[1-9])"],
          "0$1",
        ],
        [
          "(\\d{2})(\\d{3})(\\d{2,3})",
          "$1 $2 $3",
          ["[3-6]|7(?:0[0-689]|[1-79])|8[2-9]"],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[7-9]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["20[129]"], "0$1"],
        ["(\\d{4})(\\d{2})(\\d{4})", "$1 $2 $3", ["2"], "0$1"],
        ["(\\d{3})(\\d{4})(\\d{4,5})", "$1 $2 $3", ["[78]"], "0$1"],
        ["(\\d{3})(\\d{5})(\\d{5,6})", "$1 $2 $3", ["[78]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "20(?:[1259]\\d|3[013-9]|4[1-8]|6[024-689]|7[1-79]|8[2-9])\\d{6}|(?:(?:[1-356]\\d|4[02-8]|8[2-9])\\d|9(?:0[3-9]|[1-9]\\d))\\d{5}|7(?:0(?:[013-689]\\d|2[0-24-9])\\d{3,4}|[1-79]\\d{6})|(?:[12]\\d|4[147]|5[14579]|6[1578]|7[1-3578])\\d{5}",
          [7, 8, 10],
        ],
        [
          "(?:702[0-24-9]|819[01])\\d{6}|(?:7(?:0[13-9]|[12]\\d)|8(?:0[1-9]|1[0-8])|9(?:0[1-9]|1[1-6]))\\d{7}",
          [10],
        ],
        ["800\\d{7,11}", [10, 11, 12, 13, 14]],
        0,
        0,
        0,
        ["700\\d{7,11}", [10, 11, 12, 13, 14]],
      ],
    ],
    NI: [
      "505",
      "00",
      "(?:1800|[25-8]\\d{3})\\d{4}",
      [8],
      [["(\\d{4})(\\d{4})", "$1 $2", ["[125-8]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2\\d{7}"],
        [
          "(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}",
        ],
        ["1800\\d{4}"],
      ],
    ],
    NL: [
      "31",
      "00",
      "(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",
      [5, 6, 7, 8, 9, 10, 11],
      [
        ["(\\d{3})(\\d{4,7})", "$1 $2", ["[89]0"], "0$1"],
        ["(\\d{2})(\\d{7})", "$1 $2", ["66"], "0$1"],
        ["(\\d)(\\d{8})", "$1 $2", ["6"], "0$1"],
        [
          "(\\d{3})(\\d{3})(\\d{3})",
          "$1 $2 $3",
          ["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],
          "0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[1-578]|91"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{5})", "$1 $2 $3", ["9"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",
          [9],
        ],
        ["(?:6[1-58]|970\\d)\\d{7}", [9, 11]],
        ["800\\d{4,7}", [7, 8, 9, 10]],
        ["90[069]\\d{4,7}", [7, 8, 9, 10]],
        0,
        0,
        [
          "140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",
          [5, 6, 9],
        ],
        ["66\\d{7}", [9]],
        ["(?:85|91)\\d{7}", [9]],
      ],
    ],
    NO: [
      "47",
      "00",
      "(?:0|[2-9]\\d{3})\\d{4}",
      [5, 8],
      [
        ["(\\d{3})(\\d{2})(\\d{3})", "$1 $2 $3", ["8"]],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2-79]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      "[02-689]|7[0-8]",
      [
        ["(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}", [8]],
        ["(?:4[015-8]|9\\d)\\d{6}", [8]],
        ["80[01]\\d{5}", [8]],
        ["82[09]\\d{5}", [8]],
        ["880\\d{5}", [8]],
        0,
        ["(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}"],
        0,
        ["85[0-5]\\d{5}", [8]],
        ["810(?:0[0-6]|[2-8]\\d)\\d{3}", [8]],
      ],
    ],
    NP: [
      "977",
      "00",
      "(?:1\\d|9)\\d{9}|[1-9]\\d{7}",
      [8, 10, 11],
      [
        ["(\\d)(\\d{7})", "$1-$2", ["1[2-6]"], "0$1"],
        [
          "(\\d{2})(\\d{6})",
          "$1-$2",
          ["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],
          "0$1",
        ],
        ["(\\d{3})(\\d{7})", "$1-$2", ["9"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",
          [8],
        ],
        ["9(?:00|6[0-3]|7[024-6]|8[0-24-68])\\d{7}", [10]],
        ["1(?:66001|800\\d\\d)\\d{5}", [11]],
      ],
    ],
    NR: [
      "674",
      "00",
      "(?:444|(?:55|8\\d)\\d|666)\\d{4}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[4-68]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["444\\d{4}"], ["(?:55[3-9]|666|8\\d\\d)\\d{4}"]],
    ],
    NU: [
      "683",
      "00",
      "(?:[4-7]|888\\d)\\d{3}",
      [4, 7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["8"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["[47]\\d{3}", [4]], ["(?:[56]|888[1-9])\\d{3}"]],
    ],
    NZ: [
      "64",
      "0(?:0|161)",
      "[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",
      [5, 6, 7, 8, 9, 10],
      [
        ["(\\d{2})(\\d{3,8})", "$1 $2", ["8[1-79]"], "0$1"],
        [
          "(\\d{3})(\\d{2})(\\d{2,3})",
          "$1 $2 $3",
          ["50[036-8]|8|90", "50(?:[0367]|88)|8|90"],
          "0$1",
        ],
        [
          "(\\d)(\\d{3})(\\d{4})",
          "$1 $2 $3",
          ["24|[346]|7[2-57-9]|9[2-9]"],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["2(?:10|74)|[589]"], "0$1"],
        ["(\\d{2})(\\d{3,4})(\\d{4})", "$1 $2 $3", ["1|2[028]"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{3,5})",
          "$1 $2 $3",
          ["2(?:[169]|7[0-35-9])|7"],
          "0$1",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["24099\\d{3}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}", [8]],
        ["2(?:[0-27-9]\\d|6)\\d{6,7}|2(?:1\\d|75)\\d{5}", [8, 9, 10]],
        ["508\\d{6,7}|80\\d{6,8}", [8, 9, 10]],
        [
          "(?:1[13-57-9]\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",
          [7, 8, 9, 10],
        ],
        ["70\\d{7}", [9]],
        0,
        ["8(?:1[16-9]|22|3\\d|4[045]|5[459]|6[235-9]|7[0-3579]|90)\\d{2,7}"],
      ],
      "00",
    ],
    OM: [
      "968",
      "00",
      "(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",
      [7, 8, 9],
      [
        ["(\\d{3})(\\d{4,6})", "$1 $2", ["[58]"]],
        ["(\\d{2})(\\d{6})", "$1 $2", ["2"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[179]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2[1-6]\\d{6}", [8]],
        ["(?:1505|90[1-9]\\d)\\d{4}|(?:7[126-9]|9[1-9])\\d{6}", [8]],
        ["8007\\d{4,5}|(?:500|800[05])\\d{4}"],
        ["900\\d{5}", [8]],
      ],
    ],
    PA: [
      "507",
      "00",
      "(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",
      [7, 8, 10, 11],
      [
        ["(\\d{3})(\\d{4})", "$1-$2", ["[1-57-9]"]],
        ["(\\d{4})(\\d{4})", "$1-$2", ["[68]"]],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[058]|7[0167]|8[2358]|9[1389])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[02-9])|3(?:[089]\\d|1[0-7]|2[0-5]|33|4[0-79]|5[0-35]|6[068]|7[0-8])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[0156]|7[0-24-9]|8[5-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",
          [7],
        ],
        ["(?:1[16]1|21[89]|6\\d{3}|8(?:1[01]|7[23]))\\d{4}", [7, 8]],
        ["800\\d{4,5}|(?:00800|800\\d)\\d{6}"],
        ["(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}", [7]],
      ],
    ],
    PE: [
      "51",
      "00|19(?:1[124]|77|90)00",
      "(?:[14-8]|9\\d)\\d{7}",
      [8, 9],
      [
        ["(\\d{3})(\\d{5})", "$1 $2", ["80"], "(0$1)"],
        ["(\\d)(\\d{7})", "$1 $2", ["1"], "(0$1)"],
        ["(\\d{2})(\\d{6})", "$1 $2", ["[4-8]"], "(0$1)"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["9"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:4[34]|5[14])[0-8]\\d|7(?:173|3[0-8]\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",
          [8],
        ],
        ["9\\d{8}", [9]],
        ["800\\d{5}", [8]],
        ["805\\d{5}", [8]],
        ["80[24]\\d{5}", [8]],
        0,
        0,
        0,
        0,
        ["801\\d{5}", [8]],
      ],
      "00",
      " Anexo ",
    ],
    PF: [
      "689",
      "00",
      "4\\d{5}(?:\\d{2})?|8\\d{7,8}",
      [6, 8, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3", ["44"]],
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["4|8[7-9]"]],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["4(?:0[4-689]|9[4-68])\\d{5}", [8]],
        ["8[7-9]\\d{6}", [8]],
        ["80[0-5]\\d{6}", [9]],
        0,
        0,
        0,
        ["44\\d{4}", [6]],
        0,
        ["499\\d{5}", [8]],
      ],
    ],
    PG: [
      "675",
      "00|140[1-3]",
      "(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",
      [7, 8],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["18|[2-69]|85"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[78]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}", [7]],
        ["(?:7\\d|8[1-38])\\d{6}", [8]],
        ["180\\d{4}", [7]],
        0,
        0,
        0,
        0,
        ["27[01]\\d{4}", [7]],
        ["2(?:0[0-57]|7[568])\\d{4}", [7]],
      ],
      "00",
    ],
    PH: [
      "63",
      "00",
      "(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",
      [6, 8, 9, 10, 11, 12, 13],
      [
        ["(\\d)(\\d{5})", "$1 $2", ["2"], "(0$1)"],
        [
          "(\\d{4})(\\d{4,6})",
          "$1 $2",
          [
            "3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2",
            "3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))",
          ],
          "(0$1)",
        ],
        [
          "(\\d{5})(\\d{4})",
          "$1 $2",
          ["346|4(?:27|9[35])|883", "3469|4(?:279|9(?:30|56))|8834"],
          "(0$1)",
        ],
        ["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["2"], "(0$1)"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[3-7]|8[2-8]"], "(0$1)"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["[89]"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"]],
        ["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})", "$1 $2 $3 $4", ["1"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",
          [6, 8, 9, 10],
        ],
        [
          "(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[235-7]\\d|4[2-9]|8[135-9]|9[1-9]))\\d{7}",
          [10],
        ],
        ["1800\\d{7,9}", [11, 12, 13]],
      ],
    ],
    PK: [
      "92",
      "00",
      "122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",
      [8, 9, 10, 11, 12],
      [
        ["(\\d{3})(\\d{3})(\\d{2,7})", "$1 $2 $3", ["[89]0"], "0$1"],
        ["(\\d{4})(\\d{5})", "$1 $2", ["1"]],
        [
          "(\\d{3})(\\d{6,7})",
          "$1 $2",
          [
            "2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])",
            "9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]",
          ],
          "(0$1)",
        ],
        [
          "(\\d{2})(\\d{7,8})",
          "$1 $2",
          ["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],
          "(0$1)",
        ],
        ["(\\d{5})(\\d{5})", "$1 $2", ["58"], "(0$1)"],
        ["(\\d{3})(\\d{7})", "$1 $2", ["3"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{3})(\\d{3})",
          "$1 $2 $3 $4",
          ["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],
          "(0$1)",
        ],
        [
          "(\\d{3})(\\d{3})(\\d{3})(\\d{3})",
          "$1 $2 $3 $4",
          ["[24-9]"],
          "(0$1)",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",
          [9, 10],
        ],
        ["3(?:[0-247]\\d|3[0-79]|55|64)\\d{7}", [10]],
        ["800\\d{5}(?:\\d{3})?", [8, 11]],
        ["900\\d{5}", [8]],
        ["122\\d{6}", [9]],
        0,
        [
          "(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",
          [11, 12],
        ],
      ],
    ],
    PL: [
      "48",
      "00",
      "(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",
      [6, 7, 8, 9, 10],
      [
        ["(\\d{5})", "$1", ["19"]],
        ["(\\d{3})(\\d{3})", "$1 $2", ["11|20|64"]],
        [
          "(\\d{2})(\\d{2})(\\d{3})",
          "$1 $2 $3",
          [
            "(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1",
            "(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19",
          ],
        ],
        ["(\\d{3})(\\d{2})(\\d{2,3})", "$1 $2 $3", ["64"]],
        [
          "(\\d{3})(\\d{3})(\\d{3})",
          "$1 $2 $3",
          ["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"],
        ],
        [
          "(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["1[2-8]|[2-7]|8[1-79]|9[145]"],
        ],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",
          [7, 9],
        ],
        [
          "21(?:1[013-5]|2\\d)\\d{5}|(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",
          [9],
        ],
        ["800\\d{6,7}", [9, 10]],
        ["70[01346-8]\\d{6}", [9]],
        0,
        0,
        ["804\\d{6}", [9]],
        ["64\\d{4,7}", [6, 7, 8, 9]],
        ["39\\d{7}", [9]],
        ["801\\d{6}", [9]],
      ],
    ],
    PM: [
      "508",
      "00",
      "[45]\\d{5}|(?:708|80\\d)\\d{6}",
      [6, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3", ["[45]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["7"]],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:4[1-35-7]|5[01])\\d{4}", [6]],
        ["(?:4[02-4]|5[056]|708[45][0-5])\\d{4}"],
        ["80[0-5]\\d{6}", [9]],
      ],
    ],
    PR: [
      "1",
      "011",
      "(?:[589]\\d\\d|787)\\d{7}",
      [10],
      0,
      "1",
      0,
      0,
      0,
      0,
      "787|939",
      [
        ["(?:787|939)[2-9]\\d{6}"],
        [""],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    PS: [
      "970",
      "00",
      "[2489]2\\d{6}|(?:1\\d|5)\\d{8}",
      [8, 9, 10],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["[2489]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["5"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["1"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}", [8]],
        ["5[69]\\d{7}", [9]],
        ["1800\\d{6}", [10]],
        0,
        0,
        0,
        0,
        0,
        0,
        ["1700\\d{6}", [10]],
      ],
    ],
    PT: [
      "351",
      "00",
      "1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",
      [9],
      [
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["2[12]"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["16|[236-9]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:[12]\\d|3[1-689]|4[1-59]|[57][1-9]|6[1-35689]|8[1-69]|9[1256])\\d{6}",
        ],
        [
          "6(?:[06]92(?:30|9\\d)|[35]92(?:3[034]|9\\d))\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}",
        ],
        ["80[02]\\d{6}"],
        ["(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}"],
        ["884[0-4689]\\d{5}"],
        0,
        ["70(?:38[01]|596|(?:7\\d|8[17])\\d)\\d{4}"],
        ["6(?:222\\d|8988)\\d{4}"],
        ["30\\d{7}"],
        ["80(?:8\\d|9[1579])\\d{5}"],
      ],
    ],
    PW: [
      "680",
      "01[12]",
      "(?:[24-8]\\d\\d|345|900)\\d{4}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[2-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}",
        ],
        ["(?:(?:46|83)[0-5]|6[2-4689]0)\\d{4}|(?:45|77|88)\\d{5}"],
      ],
    ],
    PY: [
      "595",
      "00",
      "59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",
      [6, 7, 8, 9, 10, 11],
      [
        ["(\\d{3})(\\d{3,6})", "$1 $2", ["[2-9]0"], "0$1"],
        [
          "(\\d{2})(\\d{5})",
          "$1 $2",
          ["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],
          "(0$1)",
        ],
        [
          "(\\d{3})(\\d{4,5})",
          "$1 $2",
          ["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],
          "(0$1)",
        ],
        [
          "(\\d{2})(\\d{3})(\\d{3,4})",
          "$1 $2 $3",
          ["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],
          "(0$1)",
        ],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["87"]],
        ["(\\d{3})(\\d{6})", "$1 $2", ["9(?:[5-79]|8[1-7])"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[2-8]"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["9"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",
          [7, 8, 9],
        ],
        ["9(?:51|6[129]|7[1-6]|8[1-7]|9[1-5])\\d{6}", [9]],
        ["9800\\d{5,7}", [9, 10, 11]],
        0,
        0,
        0,
        ["[2-9]0\\d{4,7}", [6, 7, 8, 9]],
        0,
        ["8700[0-4]\\d{4}", [9]],
      ],
    ],
    QA: [
      "974",
      "00",
      "800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",
      [7, 8, 9, 11],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["2[16]|8"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[3-7]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["4(?:1111|2022)\\d{3}|4(?:[04]\\d\\d|14[0-6]|999)\\d{4}", [8]],
        ["[35-7]\\d{7}", [8]],
        ["800\\d{4}|(?:0080[01]|800)\\d{6}", [7, 9, 11]],
        0,
        0,
        0,
        0,
        ["2[16]\\d{5}", [7]],
      ],
    ],
    RE: [
      "262",
      "00",
      "(?:26|[689]\\d)\\d{7}",
      [9],
      [["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2689]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],
        [
          "69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}",
        ],
        ["80\\d{7}"],
        ["89[1-37-9]\\d{6}"],
        0,
        0,
        0,
        0,
        ["9(?:399[0-3]|479[0-5]|76(?:2[27]|3[0-37]))\\d{4}"],
        ["8(?:1[019]|2[0156]|84|90)\\d{6}"],
      ],
    ],
    RO: [
      "40",
      "00",
      "(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",
      [6, 9],
      [
        ["(\\d{3})(\\d{3})", "$1 $2", ["2[3-6]", "2[3-6]\\d9"], "0$1"],
        ["(\\d{2})(\\d{4})", "$1 $2", ["219|31"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[23]1"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[236-9]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d"],
        [
          "7020\\d{5}|(?:6(?:2\\d|40)|7(?:0[013-9]|1[0-3]|[2-7]\\d|8[03-8]|9[0-39]))\\d{6}",
          [9],
        ],
        ["800\\d{6}", [9]],
        ["90[0136]\\d{6}", [9]],
        0,
        0,
        ["(?:37\\d|80[578])\\d{6}", [9]],
        0,
        0,
        ["801\\d{6}", [9]],
      ],
      0,
      " int ",
    ],
    RS: [
      "381",
      "00",
      "38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",
      [6, 7, 8, 9, 10, 11, 12],
      [
        ["(\\d{3})(\\d{3,9})", "$1 $2", ["(?:2[389]|39)0|[7-9]"], "0$1"],
        ["(\\d{2})(\\d{5,10})", "$1 $2", ["[1-36]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",
          [7, 8, 9, 10, 11, 12],
        ],
        ["6(?:[0-689]|7\\d)\\d{6,7}", [8, 9, 10]],
        ["800\\d{3,9}"],
        ["(?:78\\d|90[0169])\\d{3,7}", [6, 7, 8, 9, 10]],
        0,
        0,
        ["7[06]\\d{4,10}"],
      ],
    ],
    RU: [
      "7",
      "810",
      "8\\d{13}|[347-9]\\d{9}",
      [10, 14],
      [
        [
          "(\\d{4})(\\d{2})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          [
            "7(?:1[0-8]|2[1-9])",
            "7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))",
            "7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2",
          ],
          "8 ($1)",
          1,
        ],
        [
          "(\\d{5})(\\d)(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          [
            "7(?:1[0-68]|2[1-9])",
            "7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))",
            "7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]",
          ],
          "8 ($1)",
          1,
        ],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["7"], "8 ($1)", 1],
        [
          "(\\d{3})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2-$3-$4",
          ["[349]|8(?:[02-7]|1[1-8])"],
          "8 ($1)",
          1,
        ],
        ["(\\d{4})(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["8"], "8 ($1)"],
      ],
      "8",
      0,
      0,
      0,
      0,
      "3[04-689]|[489]",
      [
        [
          "(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}",
          [10],
        ],
        ["9\\d{9}", [10]],
        ["8(?:0[04]|108\\d{3})\\d{7}"],
        ["80[39]\\d{7}", [10]],
        ["808\\d{7}", [10]],
      ],
      "8~10",
    ],
    RW: [
      "250",
      "00",
      "(?:06|[27]\\d\\d|[89]00)\\d{6}",
      [8, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["0"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["2"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[7-9]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:06|2[23568]\\d)\\d{6}"],
        ["7[237-9]\\d{7}", [9]],
        ["800\\d{6}", [9]],
        ["900\\d{6}", [9]],
      ],
    ],
    SA: [
      "966",
      "00",
      "92\\d{7}|(?:[15]|8\\d)\\d{8}",
      [9, 10],
      [
        ["(\\d{4})(\\d{5})", "$1 $2", ["9"]],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["5"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["81"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["8"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}", [9]],
        ["579[01]\\d{5}|5(?:[013-689]\\d|7[0-8])\\d{6}", [9]],
        ["800\\d{7}", [10]],
        ["925\\d{6}", [9]],
        0,
        0,
        ["811\\d{7}", [10]],
        0,
        0,
        ["920\\d{6}", [9]],
      ],
    ],
    SB: [
      "677",
      "0[01]",
      "(?:[1-6]|[7-9]\\d\\d)\\d{4}",
      [5, 7],
      [["(\\d{2})(\\d{5})", "$1 $2", ["7|8[4-9]|9(?:[1-8]|9[0-8])"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}", [5]],
        [
          "48\\d{3}|(?:(?:7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}",
        ],
        ["1[38]\\d{3}", [5]],
        0,
        0,
        0,
        0,
        0,
        ["5[12]\\d{3}", [5]],
      ],
    ],
    SC: [
      "248",
      "010|0[0-2]",
      "800\\d{4}|(?:[249]\\d|64)\\d{5}",
      [7],
      [["(\\d)(\\d{3})(\\d{3})", "$1 $2 $3", ["[246]|9[57]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["4[2-46]\\d{5}"],
        ["2[125-8]\\d{5}"],
        ["800[08]\\d{3}"],
        0,
        0,
        0,
        0,
        0,
        ["971\\d{4}|(?:64|95)\\d{5}"],
      ],
      "00",
    ],
    SD: [
      "249",
      "00",
      "[19]\\d{8}",
      [9],
      [["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[19]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [["1(?:5\\d|8[35-7])\\d{6}"], ["(?:1[0-2]|9[0-3569])\\d{7}"]],
    ],
    SE: [
      "46",
      "00",
      "(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",
      [6, 7, 8, 9, 10],
      [
        [
          "(\\d{2})(\\d{2,3})(\\d{2})",
          "$1-$2 $3",
          ["20"],
          "0$1",
          0,
          "$1 $2 $3",
        ],
        ["(\\d{3})(\\d{4})", "$1-$2", ["9(?:00|39|44|9)"], "0$1", 0, "$1 $2"],
        [
          "(\\d{2})(\\d{3})(\\d{2})",
          "$1-$2 $3",
          ["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],
          "0$1",
          0,
          "$1 $2 $3",
        ],
        [
          "(\\d)(\\d{2,3})(\\d{2})(\\d{2})",
          "$1-$2 $3 $4",
          ["8"],
          "0$1",
          0,
          "$1 $2 $3 $4",
        ],
        [
          "(\\d{3})(\\d{2,3})(\\d{2})",
          "$1-$2 $3",
          [
            "1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])",
          ],
          "0$1",
          0,
          "$1 $2 $3",
        ],
        [
          "(\\d{3})(\\d{2,3})(\\d{3})",
          "$1-$2 $3",
          ["9(?:00|39|44)"],
          "0$1",
          0,
          "$1 $2 $3",
        ],
        [
          "(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})",
          "$1-$2 $3 $4",
          ["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],
          "0$1",
          0,
          "$1 $2 $3 $4",
        ],
        [
          "(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1-$2 $3 $4",
          ["10|7"],
          "0$1",
          0,
          "$1 $2 $3 $4",
        ],
        [
          "(\\d)(\\d{3})(\\d{3})(\\d{2})",
          "$1-$2 $3 $4",
          ["8"],
          "0$1",
          0,
          "$1 $2 $3 $4",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{2})(\\d{2})",
          "$1-$2 $3 $4",
          [
            "[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])",
          ],
          "0$1",
          0,
          "$1 $2 $3 $4",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{2})(\\d{3})",
          "$1-$2 $3 $4",
          ["9"],
          "0$1",
          0,
          "$1 $2 $3 $4",
        ],
        [
          "(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1-$2 $3 $4 $5",
          ["[26]"],
          "0$1",
          0,
          "$1 $2 $3 $4 $5",
        ],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",
          [7, 8, 9],
        ],
        ["7[02369]\\d{7}", [9]],
        ["20\\d{4,7}", [6, 7, 8, 9]],
        [
          "649\\d{6}|99[1-59]\\d{4}(?:\\d{3})?|9(?:00|39|44)[1-8]\\d{3,6}",
          [7, 8, 9, 10],
        ],
        ["75[1-8]\\d{6}", [9]],
        0,
        ["10[1-8]\\d{6}", [9]],
        ["74[02-9]\\d{6}", [9]],
        0,
        ["77[0-7]\\d{6}", [9]],
      ],
    ],
    SG: [
      "65",
      "0[0-3]\\d",
      "(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",
      [8, 10, 11],
      [
        ["(\\d{4})(\\d{4})", "$1 $2", ["[369]|8(?:0[1-9]|[1-9])"]],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["8"]],
        ["(\\d{4})(\\d{4})(\\d{3})", "$1 $2 $3", ["7"]],
        ["(\\d{4})(\\d{3})(\\d{4})", "$1 $2 $3", ["1"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["662[0-24-9]\\d{4}|6(?:[0-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}", [8]],
        [
          "8(?:09|95)[0-2]\\d{4}|(?:8(?:0[1-8]|[1-8]\\d|9[0-4])|9[0-8]\\d)\\d{5}",
          [8],
        ],
        ["(?:18|8)00\\d{7}", [10, 11]],
        ["1900\\d{7}", [11]],
        0,
        0,
        ["7000\\d{7}", [11]],
        0,
        ["(?:3[12]\\d|666)\\d{5}", [8]],
      ],
    ],
    SH: [
      "290",
      "00",
      "(?:[256]\\d|8)\\d{3}",
      [4, 5],
      0,
      0,
      0,
      0,
      0,
      0,
      "[256]",
      [
        ["2(?:[0-57-9]\\d|6[4-9])\\d\\d"],
        ["[56]\\d{4}", [5]],
        0,
        0,
        0,
        0,
        0,
        0,
        ["262\\d\\d", [5]],
      ],
    ],
    SI: [
      "386",
      "00|10(?:22|66|88|99)",
      "[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",
      [5, 6, 7, 8],
      [
        ["(\\d{2})(\\d{3,6})", "$1 $2", ["8[09]|9"], "0$1"],
        ["(\\d{3})(\\d{5})", "$1 $2", ["59|8"], "0$1"],
        [
          "(\\d{2})(\\d{3})(\\d{3})",
          "$1 $2 $3",
          ["[37][01]|4[0139]|51|6"],
          "0$1",
        ],
        ["(\\d)(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[1-57]"], "(0$1)"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:[1-357][2-8]|4[24-8])\\d{6}", [8]],
        [
          "65(?:[178]\\d|5[56]|6[01])\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",
          [8],
        ],
        ["80\\d{4,6}", [6, 7, 8]],
        ["89[1-3]\\d{2,5}|90\\d{4,6}"],
        0,
        0,
        0,
        0,
        [
          "(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-589])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",
          [8],
        ],
      ],
      "00",
    ],
    SJ: [
      "47",
      "00",
      "0\\d{4}|(?:[489]\\d|79)\\d{6}",
      [5, 8],
      0,
      0,
      0,
      0,
      0,
      0,
      "79",
      [
        ["79\\d{6}", [8]],
        ["(?:4[015-8]|9\\d)\\d{6}", [8]],
        ["80[01]\\d{5}", [8]],
        ["82[09]\\d{5}", [8]],
        ["880\\d{5}", [8]],
        0,
        ["(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}"],
        0,
        ["85[0-5]\\d{5}", [8]],
        ["810(?:0[0-6]|[2-8]\\d)\\d{3}", [8]],
      ],
    ],
    SK: [
      "421",
      "00",
      "[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",
      [6, 7, 9],
      [
        ["(\\d)(\\d{2})(\\d{3,4})", "$1 $2 $3", ["21"], "0$1"],
        [
          "(\\d{2})(\\d{2})(\\d{2,3})",
          "$1 $2 $3",
          ["[3-5][1-8]1", "[3-5][1-8]1[67]"],
          "0$1",
        ],
        ["(\\d)(\\d{3})(\\d{3})(\\d{2})", "$1/$2 $3 $4", ["2"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[689]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1/$2 $3 $4", ["[3-5]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d",
        ],
        ["909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}", [9]],
        ["800\\d{6}", [9]],
        ["9(?:00|[78]\\d)\\d{6}", [9]],
        0,
        0,
        ["96\\d{7}", [9]],
        ["9090\\d{3}", [7]],
        ["6(?:02|5[0-4]|9[0-6])\\d{6}", [9]],
        ["8[5-9]\\d{7}", [9]],
      ],
    ],
    SL: [
      "232",
      "00",
      "(?:[237-9]\\d|66)\\d{6}",
      [8],
      [["(\\d{2})(\\d{6})", "$1 $2", ["[236-9]"], "(0$1)"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [["22[2-4][2-9]\\d{4}"], ["(?:25|3[0-5]|66|7[2-9]|8[08]|9[09])\\d{6}"]],
    ],
    SM: [
      "378",
      "00",
      "(?:0549|[5-7]\\d)\\d{6}",
      [8, 10],
      [
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[5-7]"]],
        ["(\\d{4})(\\d{6})", "$1 $2", ["0"]],
      ],
      0,
      0,
      "([89]\\d{5})$",
      "0549$1",
      0,
      0,
      [
        ["0549(?:8[0157-9]|9\\d)\\d{4}", [10]],
        ["6[16]\\d{6}", [8]],
        0,
        ["7[178]\\d{6}", [8]],
        0,
        0,
        0,
        0,
        ["5[158]\\d{6}", [8]],
      ],
    ],
    SN: [
      "221",
      "00",
      "(?:[378]\\d|93)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"]],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[379]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}"],
        ["7(?:(?:[06-8]\\d|21|90)\\d|5(?:01|[19]0|25|[38]3|[4-7]\\d))\\d{5}"],
        ["800\\d{6}"],
        ["88[4689]\\d{6}"],
        0,
        0,
        0,
        0,
        ["(?:3(?:392|9[01]\\d)\\d|93(?:3[13]0|929))\\d{4}"],
        ["81[02468]\\d{6}"],
      ],
    ],
    SO: [
      "252",
      "00",
      "[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",
      [6, 7, 8, 9],
      [
        ["(\\d{2})(\\d{4})", "$1 $2", ["8[125]"]],
        ["(\\d{6})", "$1", ["[134]"]],
        ["(\\d)(\\d{6})", "$1 $2", ["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],
        ["(\\d)(\\d{7})", "$1 $2", ["(?:2|90)4|[67]"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[348]|64|79|90"]],
        ["(\\d{2})(\\d{5,7})", "$1 $2", ["1|28|6[0-35-9]|77|9[2-9]"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",
          [6, 7],
        ],
        [
          "(?:(?:15|(?:3[59]|4[89]|6\\d|7[79]|8[08])\\d|9(?:0\\d|[2-9]))\\d|2(?:4\\d|8))\\d{5}|(?:[67]\\d\\d|904)\\d{5}",
          [7, 8, 9],
        ],
      ],
    ],
    SR: [
      "597",
      "00",
      "(?:[2-5]|68|[78]\\d)\\d{5}",
      [6, 7],
      [
        ["(\\d{2})(\\d{2})(\\d{2})", "$1-$2-$3", ["56"]],
        ["(\\d{3})(\\d{3})", "$1-$2", ["[2-5]"]],
        ["(\\d{3})(\\d{4})", "$1-$2", ["[6-8]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}"],
        ["(?:7[124-7]|8[124-9])\\d{5}", [7]],
        0,
        0,
        0,
        0,
        0,
        0,
        ["56\\d{4}", [6]],
      ],
    ],
    SS: [
      "211",
      "00",
      "[19]\\d{8}",
      [9],
      [["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[19]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [["1[89]\\d{7}"], ["(?:12|9[1257-9])\\d{7}"]],
    ],
    ST: [
      "239",
      "00",
      "(?:22|9\\d)\\d{5}",
      [7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[29]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["22\\d{5}"], ["900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}"]],
    ],
    SV: [
      "503",
      "00",
      "[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",
      [7, 8, 11],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["[89]"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[267]"]],
        ["(\\d{3})(\\d{4})(\\d{4})", "$1 $2 $3", ["[89]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:79(?:0[0347-9]|[1-9]\\d)|89(?:0[024589]|[1-9]\\d))\\d{3}|2(?:[1-69]\\d|[78][0-8])\\d{5}",
          [8],
        ],
        ["[67]\\d{7}", [8]],
        ["800\\d{8}|80[01]\\d{4}", [7, 11]],
        ["900\\d{4}(?:\\d{4})?", [7, 11]],
      ],
    ],
    SX: [
      "1",
      "011",
      "7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "(5\\d{6})$|1",
      "721$1",
      0,
      "721",
      [
        ["7215(?:4[2-8]|8[239]|9[056])\\d{4}"],
        ["7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    SY: [
      "963",
      "00",
      "[1-39]\\d{8}|[1-5]\\d{7}",
      [8, 9],
      [
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[1-5]"], "0$1", 1],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["9"], "0$1", 1],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}",
        ],
        ["9[1-689]\\d{7}", [9]],
      ],
    ],
    SZ: [
      "268",
      "00",
      "0800\\d{4}|(?:[237]\\d|900)\\d{6}",
      [8, 9],
      [
        ["(\\d{4})(\\d{4})", "$1 $2", ["[0237]"]],
        ["(\\d{5})(\\d{4})", "$1 $2", ["9"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["[23][2-5]\\d{6}", [8]],
        ["7[6-9]\\d{6}", [8]],
        ["0800\\d{4}", [8]],
        ["900\\d{6}", [9]],
        0,
        0,
        0,
        0,
        ["70\\d{6}", [8]],
      ],
    ],
    TA: ["290", "00", "8\\d{3}", [4], 0, 0, 0, 0, 0, 0, "8", [["8\\d{3}"]]],
    TC: [
      "1",
      "011",
      "(?:[58]\\d\\d|649|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-479]\\d{6})$|1",
      "649$1",
      0,
      "649",
      [
        ["649(?:266|712|9(?:4\\d|50))\\d{4}"],
        ["649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        0,
        0,
        ["649(?:71[01]|966)\\d{4}"],
      ],
    ],
    TD: [
      "235",
      "00|16",
      "(?:22|[69]\\d|77)\\d{6}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[2679]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [["22(?:[37-9]0|5[0-5]|6[89])\\d{4}"], ["(?:6[0235689]|77|9\\d)\\d{6}"]],
      "00",
    ],
    TG: [
      "228",
      "00",
      "[279]\\d{7}",
      [8],
      [["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["[279]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}"],
        ["(?:7[019]|9[0-36-9])\\d{6}"],
      ],
    ],
    TH: [
      "66",
      "00[1-9]",
      "(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",
      [8, 9, 10, 13],
      [
        ["(\\d)(\\d{3})(\\d{4})", "$1 $2 $3", ["2"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[13-9]"], "0$1"],
        ["(\\d{4})(\\d{3})(\\d{3})", "$1 $2 $3", ["1"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}", [8]],
        ["67(?:1[0-8]|2[4-7])\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}", [9]],
        ["(?:001800\\d|1800)\\d{6}", [10, 13]],
        ["1900\\d{6}", [10]],
        0,
        0,
        0,
        0,
        ["6[08]\\d{7}", [9]],
      ],
    ],
    TJ: [
      "992",
      "810",
      "[0-57-9]\\d{8}",
      [9],
      [
        ["(\\d{6})(\\d)(\\d{2})", "$1 $2 $3", ["331", "3317"]],
        ["(\\d{3})(\\d{2})(\\d{4})", "$1 $2 $3", ["44[02-479]|[34]7"]],
        ["(\\d{4})(\\d)(\\d{4})", "$1 $2 $3", ["3[1-5]"]],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[0-57-9]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}"],
        [
          "(?:4(?:1[18]|4[02-479])|81[1-9])\\d{6}|(?:0[0-57-9]|1[017]|2[02]|[34]0|5[05]|7[0178]|8[078]|9\\d)\\d{7}",
        ],
      ],
      "8~10",
    ],
    TK: [
      "690",
      "00",
      "[2-47]\\d{3,6}",
      [4, 5, 6, 7],
      0,
      0,
      0,
      0,
      0,
      0,
      0,
      [["(?:2[2-4]|[34]\\d)\\d{2,5}"], ["7[2-4]\\d{2,5}"]],
    ],
    TL: [
      "670",
      "00",
      "7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",
      [7, 8],
      [
        ["(\\d{3})(\\d{4})", "$1 $2", ["[2-489]|70"]],
        ["(\\d{4})(\\d{4})", "$1 $2", ["7"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2[1-5]|3[1-9]|4[1-4])\\d{5}", [7]],
        ["7[2-8]\\d{6}", [8]],
        ["80\\d{5}", [7]],
        ["90\\d{5}", [7]],
        ["70\\d{5}", [7]],
      ],
    ],
    TM: [
      "993",
      "810",
      "(?:[1-6]\\d|71)\\d{6}",
      [8],
      [
        ["(\\d{2})(\\d{2})(\\d{2})(\\d{2})", "$1 $2-$3-$4", ["12"], "(8 $1)"],
        ["(\\d{3})(\\d)(\\d{2})(\\d{2})", "$1 $2-$3-$4", ["[1-5]"], "(8 $1)"],
        ["(\\d{2})(\\d{6})", "$1 $2", ["[67]"], "8 $1"],
      ],
      "8",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}",
        ],
        ["(?:6\\d|71)\\d{6}"],
      ],
      "8~10",
    ],
    TN: [
      "216",
      "00",
      "[2-57-9]\\d{7}",
      [8],
      [["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[2-57-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}"],
        [
          "3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-8])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}",
        ],
        ["8010\\d{4}"],
        ["88\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["8[12]10\\d{4}"],
      ],
    ],
    TO: [
      "676",
      "00",
      "(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",
      [5, 7],
      [
        ["(\\d{2})(\\d{3})", "$1-$2", ["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],
        ["(\\d{4})(\\d{3})", "$1 $2", ["0"]],
        ["(\\d{3})(\\d{4})", "$1 $2", ["[5-9]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}", [5]],
        [
          "(?:5(?:4[0-5]|5[4-6])|6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",
          [7],
        ],
        ["0800\\d{3}", [7]],
        0,
        0,
        0,
        0,
        0,
        ["55[0-37-9]\\d{4}", [7]],
      ],
    ],
    TR: [
      "90",
      "00",
      "4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",
      [7, 10, 12, 13],
      [
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["512|8[01589]|90"], "0$1", 1],
        [
          "(\\d{3})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["5(?:[0-59]|61)", "5(?:[0-59]|61[06])", "5(?:[0-59]|61[06]1)"],
          "0$1",
          1,
        ],
        [
          "(\\d{3})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["[24][1-8]|3[1-9]"],
          "(0$1)",
          1,
        ],
        ["(\\d{3})(\\d{3})(\\d{6,7})", "$1 $2 $3", ["80"], "0$1", 1],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",
          [10],
        ],
        [
          "561(?:011|61\\d)\\d{4}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",
          [10],
        ],
        ["8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})", [10, 12, 13]],
        ["(?:8[89]8|900)\\d{7}", [10]],
        ["592(?:21[12]|461)\\d{4}", [10]],
        0,
        ["444\\d{4}", [7]],
        ["512\\d{7}", [10]],
        ["850\\d{7}", [10]],
      ],
    ],
    TT: [
      "1",
      "011",
      "(?:[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-46-8]\\d{6})$|1",
      "868$1",
      0,
      "868",
      [
        [
          "868(?:2(?:01|1[5-9]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",
        ],
        [
          "868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    TV: [
      "688",
      "00",
      "(?:2|7\\d\\d|90)\\d{4}",
      [5, 6, 7],
      [
        ["(\\d{2})(\\d{3})", "$1 $2", ["2"]],
        ["(\\d{2})(\\d{4})", "$1 $2", ["90"]],
        ["(\\d{2})(\\d{5})", "$1 $2", ["7"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["2[02-9]\\d{3}", [5]],
        ["(?:7[01]\\d|90)\\d{4}", [6, 7]],
      ],
    ],
    TW: [
      "886",
      "0(?:0[25-79]|19)",
      "[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",
      [7, 8, 9, 10, 11],
      [
        ["(\\d{2})(\\d)(\\d{4})", "$1 $2 $3", ["202"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[258]0"], "0$1"],
        [
          "(\\d)(\\d{3,4})(\\d{4})",
          "$1 $2 $3",
          [
            "[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]",
            "[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]",
          ],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[49]"], "0$1"],
        ["(\\d{2})(\\d{4})(\\d{4,5})", "$1 $2 $3", ["7"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",
          [8, 9],
        ],
        ["(?:40001[0-2]|9[0-8]\\d{4})\\d{3}", [9]],
        ["80[0-79]\\d{6}|800\\d{5}", [8, 9]],
        ["20(?:[013-9]\\d\\d|2)\\d{4}", [7, 9]],
        ["99\\d{7}", [9]],
        0,
        ["50[0-46-9]\\d{6}", [9]],
        0,
        ["7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}", [10, 11]],
      ],
      0,
      "#",
    ],
    TZ: [
      "255",
      "00[056]",
      "(?:[25-8]\\d|41|90)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{2})(\\d{4})", "$1 $2 $3", ["[89]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[24]"], "0$1"],
        ["(\\d{2})(\\d{7})", "$1 $2", ["5"]],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[67]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["2[2-8]\\d{7}"],
        ["(?:6[125-9]|7[13-9])\\d{7}"],
        ["80[08]\\d{6}"],
        ["90\\d{7}"],
        0,
        0,
        0,
        0,
        ["41\\d{7}"],
        ["8(?:40|6[01])\\d{6}"],
      ],
    ],
    UA: [
      "380",
      "00",
      "[89]\\d{9}|[3-9]\\d{8}",
      [9, 10],
      [
        [
          "(\\d{3})(\\d{3})(\\d{3})",
          "$1 $2 $3",
          [
            "6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]",
            "6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]",
          ],
          "0$1",
        ],
        [
          "(\\d{4})(\\d{5})",
          "$1 $2",
          [
            "3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])",
            "3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])",
          ],
          "0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[3-7]|89|9[1-9]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["[89]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}", [9]],
        ["(?:39|50|6[36-8]|7[1-357]|9[1-9])\\d{7}", [9]],
        ["800[1-8]\\d{5,6}"],
        ["900[239]\\d{5,6}"],
        0,
        0,
        0,
        0,
        ["89[1-579]\\d{6}", [9]],
      ],
      "0~0",
    ],
    UG: [
      "256",
      "00[057]",
      "800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",
      [9],
      [
        ["(\\d{4})(\\d{5})", "$1 $2", ["202", "2024"], "0$1"],
        ["(\\d{3})(\\d{6})", "$1 $2", ["[27-9]|4(?:6[45]|[7-9])"], "0$1"],
        ["(\\d{2})(\\d{7})", "$1 $2", ["[34]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "20(?:(?:240|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[017]\\d|2[5-9]|3[1-4]|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}",
        ],
        ["72(?:[48]0|6[01])\\d{5}|7(?:[015-8]\\d|20|36|4[0-5]|9[89])\\d{6}"],
        ["800[1-3]\\d{5}"],
        ["90[1-3]\\d{6}"],
      ],
    ],
    US: [
      "1",
      "011",
      "[2-9]\\d{9}|3\\d{6}",
      [10],
      [
        ["(\\d{3})(\\d{4})", "$1-$2", ["310"], 0, 1],
        ["(\\d{3})(\\d{3})(\\d{4})", "($1) $2-$3", ["[2-9]"], 0, 1, "$1-$2-$3"],
      ],
      "1",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",
        ],
        [""],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    UY: [
      "598",
      "0(?:0|1[3-9]\\d)",
      "0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",
      [6, 7, 8, 9, 10, 11, 12, 13],
      [
        ["(\\d{3})(\\d{3,4})", "$1 $2", ["0"]],
        ["(\\d{3})(\\d{4})", "$1 $2", ["[49]0|8"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["9"], "0$1"],
        ["(\\d{4})(\\d{4})", "$1 $2", ["[124]"]],
        ["(\\d{3})(\\d{3})(\\d{2,4})", "$1 $2 $3", ["0"]],
        ["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})", "$1 $2 $3 $4", ["0"]],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:1(?:770|9(?:20|87))|(?:2\\d|4[2-7])\\d\\d)\\d{4}", [8]],
        ["9[1-9]\\d{6}", [8]],
        ["0004\\d{2,9}|(?:405|80[05])\\d{4}"],
        ["90[0-8]\\d{4}", [7]],
      ],
      "00",
      " int. ",
    ],
    UZ: [
      "998",
      "810",
      "(?:20|33|[5-79]\\d|88)\\d{7}",
      [9],
      [
        [
          "(\\d{2})(\\d{3})(\\d{2})(\\d{2})",
          "$1 $2 $3 $4",
          ["[235-9]"],
          "8 $1",
        ],
      ],
      "8",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:55\\d\\d|6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d\\d|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|(?:1[12]|[68]\\d)\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|9(?:22|5[1-9])))\\d{5}",
        ],
        [
          "(?:(?:[25]0|33|88|9[0-57-9])\\d{3}|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|3[01]|5\\d|7[0-4])|(?:5[67]|7\\d)\\d|6(?:2[0-26]|8\\d)))|7(?:[07]\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}",
        ],
      ],
      "8~10",
    ],
    VA: [
      "39",
      "00",
      "0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",
      [6, 7, 8, 9, 10, 11],
      0,
      0,
      0,
      0,
      0,
      0,
      "06698",
      [
        ["06698\\d{1,6}"],
        ["3[1-9]\\d{8}|3[2-9]\\d{7}", [9, 10]],
        ["80(?:0\\d{3}|3)\\d{3}", [6, 9]],
        [
          "(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",
          [6, 8, 9, 10],
        ],
        ["1(?:78\\d|99)\\d{6}", [9, 10]],
        0,
        0,
        0,
        ["55\\d{8}", [10]],
        ["84(?:[08]\\d{3}|[17])\\d{3}", [6, 9]],
      ],
    ],
    VC: [
      "1",
      "011",
      "(?:[58]\\d\\d|784|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-7]\\d{6})$|1",
      "784$1",
      0,
      "784",
      [
        [
          "784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",
        ],
        ["784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}"],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
        0,
        0,
        0,
        ["78451[0-2]\\d{4}"],
      ],
    ],
    VE: [
      "58",
      "00",
      "[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",
      [10],
      [["(\\d{3})(\\d{7})", "$1-$2", ["[24-689]"], "0$1"]],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}"],
        ["4(?:1[24-8]|2[46])\\d{7}"],
        ["800\\d{7}"],
        ["90[01]\\d{7}"],
        0,
        0,
        ["501\\d{7}"],
      ],
    ],
    VG: [
      "1",
      "011",
      "(?:284|[58]\\d\\d|900)\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-578]\\d{6})$|1",
      "284$1",
      0,
      "284",
      [
        ["284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}"],
        [
          "284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|9[69])|5(?:4[0-7]|68|9[69]))\\d{4}",
        ],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    VI: [
      "1",
      "011",
      "[58]\\d{9}|(?:34|90)0\\d{7}",
      [10],
      0,
      "1",
      0,
      "([2-9]\\d{6})$|1",
      "340$1",
      0,
      "340",
      [
        [
          "340(?:2(?:0[0-368]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",
        ],
        [""],
        ["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],
        ["900[2-9]\\d{6}"],
        [
          "52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",
        ],
      ],
    ],
    VN: [
      "84",
      "00",
      "[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",
      [7, 8, 9, 10],
      [
        ["(\\d{2})(\\d{5})", "$1 $2", ["80"], "0$1", 1],
        ["(\\d{4})(\\d{4,6})", "$1 $2", ["1"], 0, 1],
        ["(\\d{2})(\\d{3})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["6"], "0$1", 1],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[357-9]"], "0$1", 1],
        ["(\\d{2})(\\d{4})(\\d{4})", "$1 $2 $3", ["2[48]"], "0$1", 1],
        ["(\\d{3})(\\d{4})(\\d{3})", "$1 $2 $3", ["2"], "0$1", 1],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "2(?:0[3-9]|1[0-689]|2[0-25-9]|[38][2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|9[0-4679])\\d{7}",
          [10],
        ],
        [
          "(?:5(?:2[238]|59)|89[6-9]|99[013-9])\\d{6}|(?:3\\d|5[1689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",
          [9],
        ],
        ["1800\\d{4,6}|12(?:0[13]|28)\\d{4}", [8, 9, 10]],
        ["1900\\d{4,6}", [8, 9, 10]],
        0,
        0,
        ["(?:[17]99|80\\d)\\d{4}|69\\d{5,6}", [7, 8]],
        0,
        ["672\\d{6}", [9]],
      ],
    ],
    VU: [
      "678",
      "00",
      "[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",
      [5, 7],
      [["(\\d{3})(\\d{4})", "$1 $2", ["[57-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}", [5]],
        ["(?:[58]\\d|7[013-7])\\d{5}", [7]],
        ["81[18]\\d\\d", [5]],
        0,
        0,
        0,
        ["(?:3[03]|900\\d)\\d{3}"],
        0,
        ["9(?:0[1-9]|1[01])\\d{4}", [7]],
      ],
    ],
    WF: [
      "681",
      "00",
      "(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",
      [6, 9],
      [
        ["(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3", ["[478]"]],
        ["(\\d{3})(\\d{2})(\\d{2})(\\d{2})", "$1 $2 $3 $4", ["8"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["72\\d{4}", [6]],
        ["(?:72|8[23])\\d{4}", [6]],
        ["80[0-5]\\d{6}", [9]],
      ],
    ],
    WS: [
      "685",
      "0",
      "(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",
      [5, 6, 7, 10],
      [
        ["(\\d{5})", "$1", ["[2-5]|6[1-9]"]],
        ["(\\d{3})(\\d{3,7})", "$1 $2", ["[68]"]],
        ["(\\d{2})(\\d{5})", "$1 $2", ["7"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        ["6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}", [5, 6]],
        ["(?:7[1-35-7]|8(?:[3-7]|9\\d{3}))\\d{5}", [7, 10]],
        ["800\\d{3}", [6]],
      ],
    ],
    XK: [
      "383",
      "00",
      "2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",
      [8, 9, 10, 11, 12],
      [
        ["(\\d{3})(\\d{5})", "$1 $2", ["[89]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{3})", "$1 $2 $3", ["[2-4]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["2|39"], "0$1"],
        ["(\\d{2})(\\d{7,10})", "$1 $2", ["3"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["38\\d{6,10}|(?:2[89]|39)(?:0\\d{5,6}|[1-9]\\d{5})"],
        ["4[3-9]\\d{6}", [8]],
        ["800\\d{5}", [8]],
        ["900\\d{5}", [8]],
      ],
    ],
    YE: [
      "967",
      "00",
      "(?:1|7\\d)\\d{7}|[1-7]\\d{6}",
      [7, 8, 9],
      [
        [
          "(\\d)(\\d{3})(\\d{3,4})",
          "$1 $2 $3",
          ["[1-6]|7(?:[24-6]|8[0-7])"],
          "0$1",
        ],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["7"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",
          [7, 8],
        ],
        ["7[01378]\\d{7}", [9]],
      ],
    ],
    YT: [
      "262",
      "00",
      "(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",
      [9],
      0,
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],
        ["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],
        ["80\\d{7}"],
        0,
        0,
        0,
        0,
        0,
        ["9(?:(?:39|47)8[01]|769\\d)\\d{4}"],
      ],
    ],
    ZA: [
      "27",
      "00",
      "[1-79]\\d{8}|8\\d{4,9}",
      [5, 6, 7, 8, 9, 10],
      [
        ["(\\d{2})(\\d{3,4})", "$1 $2", ["8[1-4]"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{2,3})", "$1 $2 $3", ["8[1-4]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["860"], "0$1"],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["[1-9]"], "0$1"],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["8"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",
          [9],
        ],
        [
          "(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:6\\d|7[0-46-9])\\d{3}|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",
          [5, 6, 7, 8, 9],
        ],
        ["80\\d{7}", [9]],
        ["(?:86[2-9]|9[0-2]\\d)\\d{6}", [9]],
        0,
        0,
        ["861\\d{6,7}", [9, 10]],
        0,
        [
          "87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",
          [9],
        ],
        ["860\\d{6}", [9]],
      ],
    ],
    ZM: [
      "260",
      "00",
      "800\\d{6}|(?:21|63|[79]\\d)\\d{7}",
      [9],
      [
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[28]"], "0$1"],
        ["(\\d{2})(\\d{7})", "$1 $2", ["[79]"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        ["21[1-8]\\d{6}"],
        ["(?:7[5-79]|9[5-8])\\d{7}"],
        ["800\\d{6}"],
        0,
        0,
        0,
        0,
        0,
        ["63\\d{7}"],
      ],
    ],
    ZW: [
      "263",
      "00",
      "2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",
      [5, 6, 7, 8, 9, 10],
      [
        [
          "(\\d{3})(\\d{3,5})",
          "$1 $2",
          [
            "2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]",
          ],
          "0$1",
        ],
        ["(\\d)(\\d{3})(\\d{2,4})", "$1 $2 $3", ["[49]"], "0$1"],
        ["(\\d{3})(\\d{4})", "$1 $2", ["80"], "0$1"],
        [
          "(\\d{2})(\\d{7})",
          "$1 $2",
          [
            "24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2",
            "2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]",
          ],
          "(0$1)",
        ],
        ["(\\d{2})(\\d{3})(\\d{4})", "$1 $2 $3", ["7"], "0$1"],
        [
          "(\\d{3})(\\d{3})(\\d{3,4})",
          "$1 $2 $3",
          [
            "2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)",
            "2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)",
          ],
          "0$1",
        ],
        ["(\\d{4})(\\d{6})", "$1 $2", ["8"], "0$1"],
        [
          "(\\d{2})(\\d{3,5})",
          "$1 $2",
          [
            "1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]",
          ],
          "0$1",
        ],
        ["(\\d{2})(\\d{3})(\\d{3,4})", "$1 $2 $3", ["29[013-9]|39|54"], "0$1"],
        ["(\\d{4})(\\d{3,5})", "$1 $2", ["(?:25|54)8", "258|5483"], "0$1"],
      ],
      "0",
      0,
      0,
      0,
      0,
      0,
      [
        [
          "(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}",
        ],
        ["7(?:[1278]\\d|3[1-9])\\d{6}", [9]],
        ["80(?:[01]\\d|20|8[0-8])\\d{3}", [7]],
        0,
        0,
        0,
        0,
        0,
        ["86(?:1[12]|22|30|44|55|77|8[368])\\d{6}", [10]],
      ],
    ],
  },
  nonGeographic: {
    800: [
      "800",
      0,
      "(?:00|[1-9]\\d)\\d{6}",
      [8],
      [["(\\d{4})(\\d{4})", "$1 $2", ["\\d"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, 0, ["(?:00|[1-9]\\d)\\d{6}"]],
    ],
    808: [
      "808",
      0,
      "[1-9]\\d{7}",
      [8],
      [["(\\d{4})(\\d{4})", "$1 $2", ["[1-9]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, 0, 0, 0, 0, 0, 0, 0, 0, ["[1-9]\\d{7}"]],
    ],
    870: [
      "870",
      0,
      "7\\d{11}|[35-7]\\d{8}",
      [9, 12],
      [["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["[35-7]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, ["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]],
    ],
    878: [
      "878",
      0,
      "10\\d{10}",
      [12],
      [["(\\d{2})(\\d{5})(\\d{5})", "$1 $2 $3", ["1"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, 0, 0, 0, 0, 0, 0, 0, ["10\\d{10}"]],
    ],
    881: [
      "881",
      0,
      "6\\d{9}|[0-36-9]\\d{8}",
      [9, 10],
      [
        ["(\\d)(\\d{3})(\\d{5})", "$1 $2 $3", ["[0-37-9]"]],
        ["(\\d)(\\d{3})(\\d{5,6})", "$1 $2 $3", ["6"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, ["6\\d{9}|[0-36-9]\\d{8}"]],
    ],
    882: [
      "882",
      0,
      "[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",
      [7, 8, 9, 10, 11, 12],
      [
        ["(\\d{2})(\\d{5})", "$1 $2", ["16|342"]],
        ["(\\d{2})(\\d{6})", "$1 $2", ["49"]],
        ["(\\d{2})(\\d{2})(\\d{4})", "$1 $2 $3", ["1[36]|9"]],
        ["(\\d{2})(\\d{4})(\\d{3})", "$1 $2 $3", ["3[23]"]],
        ["(\\d{2})(\\d{3,4})(\\d{4})", "$1 $2 $3", ["16"]],
        [
          "(\\d{2})(\\d{4})(\\d{4})",
          "$1 $2 $3",
          ["10|23|3(?:[15]|4[57])|4|51"],
        ],
        ["(\\d{3})(\\d{4})(\\d{4})", "$1 $2 $3", ["34"]],
        ["(\\d{2})(\\d{4,5})(\\d{5})", "$1 $2 $3", ["[1-35]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        0,
        [
          "342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",
          [7, 8, 9, 10, 12],
        ],
        0,
        0,
        0,
        0,
        0,
        0,
        [
          "1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}",
        ],
      ],
    ],
    883: [
      "883",
      0,
      "(?:[1-4]\\d|51)\\d{6,10}",
      [8, 9, 10, 11, 12],
      [
        [
          "(\\d{3})(\\d{3})(\\d{2,8})",
          "$1 $2 $3",
          ["[14]|2[24-689]|3[02-689]|51[24-9]"],
        ],
        ["(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3", ["510"]],
        ["(\\d{3})(\\d{3})(\\d{4})", "$1 $2 $3", ["21"]],
        ["(\\d{4})(\\d{4})(\\d{4})", "$1 $2 $3", ["51[13]"]],
        ["(\\d{3})(\\d{3})(\\d{3})(\\d{3})", "$1 $2 $3 $4", ["[235]"]],
      ],
      0,
      0,
      0,
      0,
      0,
      0,
      [
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        [
          "(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}",
        ],
      ],
    ],
    888: [
      "888",
      0,
      "\\d{11}",
      [11],
      [["(\\d{3})(\\d{3})(\\d{5})", "$1 $2 $3"]],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, 0, 0, 0, 0, 0, ["\\d{11}"]],
    ],
    979: [
      "979",
      0,
      "[1359]\\d{8}",
      [9],
      [["(\\d)(\\d{4})(\\d{4})", "$1 $2 $3", ["[1359]"]]],
      0,
      0,
      0,
      0,
      0,
      0,
      [0, 0, 0, ["[1359]\\d{8}"]],
    ],
  },
};
function lu(i, e) {
  var t = Array.prototype.slice.call(e);
  return t.push(vd), i.apply(this, t);
}
function ab(i) {
  "@babel/helpers - typeof";
  return (
    (ab =
      typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
        ? function (e) {
            return typeof e;
          }
        : function (e) {
            return e &&
              typeof Symbol == "function" &&
              e.constructor === Symbol &&
              e !== Symbol.prototype
              ? "symbol"
              : typeof e;
          }),
    ab(i)
  );
}
function j9(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function PD(i, e, t) {
  return (
    e && j9(i.prototype, e),
    t && j9(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
function DD(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function LD(i, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  (i.prototype = Object.create(e && e.prototype, {
    constructor: { value: i, writable: !0, configurable: !0 },
  })),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    e && Dp(i, e);
}
function FD(i) {
  var e = q9();
  return function () {
    var r = Lp(i),
      o;
    if (e) {
      var n = Lp(this).constructor;
      o = Reflect.construct(r, arguments, n);
    } else o = r.apply(this, arguments);
    return zD(this, o);
  };
}
function zD(i, e) {
  if (e && (ab(e) === "object" || typeof e == "function")) return e;
  if (e !== void 0)
    throw new TypeError(
      "Derived constructors may only return object or undefined"
    );
  return H9(i);
}
function H9(i) {
  if (i === void 0)
    throw new ReferenceError(
      "this hasn't been initialised - super() hasn't been called"
    );
  return i;
}
function lb(i) {
  var e = typeof Map == "function" ? new Map() : void 0;
  return (
    (lb = function (r) {
      if (r === null || !ND(r)) return r;
      if (typeof r != "function")
        throw new TypeError(
          "Super expression must either be null or a function"
        );
      if (typeof e < "u") {
        if (e.has(r)) return e.get(r);
        e.set(r, o);
      }
      function o() {
        return Tm(r, arguments, Lp(this).constructor);
      }
      return (
        (o.prototype = Object.create(r.prototype, {
          constructor: {
            value: o,
            enumerable: !1,
            writable: !0,
            configurable: !0,
          },
        })),
        Dp(o, r)
      );
    }),
    lb(i)
  );
}
function Tm(i, e, t) {
  return (
    q9()
      ? (Tm = Reflect.construct)
      : (Tm = function (o, n, u) {
          var h = [null];
          h.push.apply(h, n);
          var m = Function.bind.apply(o, h),
            b = new m();
          return u && Dp(b, u.prototype), b;
        }),
    Tm.apply(null, arguments)
  );
}
function q9() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function") return !0;
  try {
    return (
      Boolean.prototype.valueOf.call(
        Reflect.construct(Boolean, [], function () {})
      ),
      !0
    );
  } catch {
    return !1;
  }
}
function ND(i) {
  return Function.toString.call(i).indexOf("[native code]") !== -1;
}
function Dp(i, e) {
  return (
    (Dp =
      Object.setPrototypeOf ||
      function (r, o) {
        return (r.__proto__ = o), r;
      }),
    Dp(i, e)
  );
}
function Lp(i) {
  return (
    (Lp = Object.setPrototypeOf
      ? Object.getPrototypeOf
      : function (t) {
          return t.__proto__ || Object.getPrototypeOf(t);
        }),
    Lp(i)
  );
}
var ps = (function (i) {
  LD(t, i);
  var e = FD(t);
  function t(r) {
    var o;
    return (
      DD(this, t),
      (o = e.call(this, r)),
      Object.setPrototypeOf(H9(o), t.prototype),
      (o.name = o.constructor.name),
      o
    );
  }
  return PD(t);
})(lb(Error));
var Fp = 2,
  $9 = 17,
  Q9 = 3,
  Tn = "0-9\uFF10-\uFF19\u0660-\u0669\u06F0-\u06F9",
  OD = "-\u2010-\u2015\u2212\u30FC\uFF0D",
  BD = "\uFF0F/",
  RD = "\uFF0E.",
  UD = " \xA0\xAD\u200B\u2060\u3000",
  VD = "()\uFF08\uFF09\uFF3B\uFF3D\\[\\]",
  jD = "~\u2053\u223C\uFF5E",
  rs = "".concat(OD).concat(BD).concat(RD).concat(UD).concat(VD).concat(jD),
  cu = "+\uFF0B";
function cb(i, e) {
  (i = i.split("-")), (e = e.split("-"));
  for (var t = i[0].split("."), r = e[0].split("."), o = 0; o < 3; o++) {
    var n = Number(t[o]),
      u = Number(r[o]);
    if (n > u) return 1;
    if (u > n) return -1;
    if (!isNaN(n) && isNaN(u)) return 1;
    if (isNaN(n) && !isNaN(u)) return -1;
  }
  return i[1] && e[1]
    ? i[1] > e[1]
      ? 1
      : i[1] < e[1]
      ? -1
      : 0
    : !i[1] && e[1]
    ? 1
    : i[1] && !e[1]
    ? -1
    : 0;
}
var HD = {}.constructor;
function cl(i) {
  return i != null && i.constructor === HD;
}
function ub(i) {
  "@babel/helpers - typeof";
  return (
    (ub =
      typeof Symbol == "function" && typeof Symbol.iterator == "symbol"
        ? function (e) {
            return typeof e;
          }
        : function (e) {
            return e &&
              typeof Symbol == "function" &&
              e.constructor === Symbol &&
              e !== Symbol.prototype
              ? "symbol"
              : typeof e;
          }),
    ub(i)
  );
}
function Mm(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function G9(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function Am(i, e, t) {
  return (
    e && G9(i.prototype, e),
    t && G9(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var qD = "1.2.0",
  $D = "1.7.35",
  W9 = " ext. ",
  QD = /^\d+$/,
  ar = (function () {
    function i(e) {
      Mm(this, i), KD(e), (this.metadata = e), J9.call(this, e);
    }
    return (
      Am(i, [
        {
          key: "getCountries",
          value: function () {
            return Object.keys(this.metadata.countries).filter(function (t) {
              return t !== "001";
            });
          },
        },
        {
          key: "getCountryMetadata",
          value: function (t) {
            return this.metadata.countries[t];
          },
        },
        {
          key: "nonGeographic",
          value: function () {
            if (!(this.v1 || this.v2 || this.v3))
              return (
                this.metadata.nonGeographic || this.metadata.nonGeographical
              );
          },
        },
        {
          key: "hasCountry",
          value: function (t) {
            return this.getCountryMetadata(t) !== void 0;
          },
        },
        {
          key: "hasCallingCode",
          value: function (t) {
            if (this.getCountryCodesForCallingCode(t)) return !0;
            if (this.nonGeographic()) {
              if (this.nonGeographic()[t]) return !0;
            } else {
              var r = this.countryCallingCodes()[t];
              if (r && r.length === 1 && r[0] === "001") return !0;
            }
          },
        },
        {
          key: "isNonGeographicCallingCode",
          value: function (t) {
            return this.nonGeographic()
              ? !!this.nonGeographic()[t]
              : !this.getCountryCodesForCallingCode(t);
          },
        },
        {
          key: "country",
          value: function (t) {
            return this.selectNumberingPlan(t);
          },
        },
        {
          key: "selectNumberingPlan",
          value: function (t, r) {
            if ((t && QD.test(t) && ((r = t), (t = null)), t && t !== "001")) {
              if (!this.hasCountry(t))
                throw new Error("Unknown country: ".concat(t));
              this.numberingPlan = new Z9(this.getCountryMetadata(t), this);
            } else if (r) {
              if (!this.hasCallingCode(r))
                throw new Error("Unknown calling code: ".concat(r));
              this.numberingPlan = new Z9(
                this.getNumberingPlanMetadata(r),
                this
              );
            } else this.numberingPlan = void 0;
            return this;
          },
        },
        {
          key: "getCountryCodesForCallingCode",
          value: function (t) {
            var r = this.countryCallingCodes()[t];
            if (r) return r.length === 1 && r[0].length === 3 ? void 0 : r;
          },
        },
        {
          key: "getCountryCodeForCallingCode",
          value: function (t) {
            var r = this.getCountryCodesForCallingCode(t);
            if (r) return r[0];
          },
        },
        {
          key: "getNumberingPlanMetadata",
          value: function (t) {
            var r = this.getCountryCodeForCallingCode(t);
            if (r) return this.getCountryMetadata(r);
            if (this.nonGeographic()) {
              var o = this.nonGeographic()[t];
              if (o) return o;
            } else {
              var n = this.countryCallingCodes()[t];
              if (n && n.length === 1 && n[0] === "001")
                return this.metadata.countries["001"];
            }
          },
        },
        {
          key: "countryCallingCode",
          value: function () {
            return this.numberingPlan.callingCode();
          },
        },
        {
          key: "IDDPrefix",
          value: function () {
            return this.numberingPlan.IDDPrefix();
          },
        },
        {
          key: "defaultIDDPrefix",
          value: function () {
            return this.numberingPlan.defaultIDDPrefix();
          },
        },
        {
          key: "nationalNumberPattern",
          value: function () {
            return this.numberingPlan.nationalNumberPattern();
          },
        },
        {
          key: "possibleLengths",
          value: function () {
            return this.numberingPlan.possibleLengths();
          },
        },
        {
          key: "formats",
          value: function () {
            return this.numberingPlan.formats();
          },
        },
        {
          key: "nationalPrefixForParsing",
          value: function () {
            return this.numberingPlan.nationalPrefixForParsing();
          },
        },
        {
          key: "nationalPrefixTransformRule",
          value: function () {
            return this.numberingPlan.nationalPrefixTransformRule();
          },
        },
        {
          key: "leadingDigits",
          value: function () {
            return this.numberingPlan.leadingDigits();
          },
        },
        {
          key: "hasTypes",
          value: function () {
            return this.numberingPlan.hasTypes();
          },
        },
        {
          key: "type",
          value: function (t) {
            return this.numberingPlan.type(t);
          },
        },
        {
          key: "ext",
          value: function () {
            return this.numberingPlan.ext();
          },
        },
        {
          key: "countryCallingCodes",
          value: function () {
            return this.v1
              ? this.metadata.country_phone_code_to_countries
              : this.metadata.country_calling_codes;
          },
        },
        {
          key: "chooseCountryByCountryCallingCode",
          value: function (t) {
            return this.selectNumberingPlan(t);
          },
        },
        {
          key: "hasSelectedNumberingPlan",
          value: function () {
            return this.numberingPlan !== void 0;
          },
        },
      ]),
      i
    );
  })();
var Z9 = (function () {
    function i(e, t) {
      Mm(this, i),
        (this.globalMetadataObject = t),
        (this.metadata = e),
        J9.call(this, t.metadata);
    }
    return (
      Am(i, [
        {
          key: "callingCode",
          value: function () {
            return this.metadata[0];
          },
        },
        {
          key: "getDefaultCountryMetadataForRegion",
          value: function () {
            return this.globalMetadataObject.getNumberingPlanMetadata(
              this.callingCode()
            );
          },
        },
        {
          key: "IDDPrefix",
          value: function () {
            if (!(this.v1 || this.v2)) return this.metadata[1];
          },
        },
        {
          key: "defaultIDDPrefix",
          value: function () {
            if (!(this.v1 || this.v2)) return this.metadata[12];
          },
        },
        {
          key: "nationalNumberPattern",
          value: function () {
            return this.v1 || this.v2 ? this.metadata[1] : this.metadata[2];
          },
        },
        {
          key: "possibleLengths",
          value: function () {
            if (!this.v1) return this.metadata[this.v2 ? 2 : 3];
          },
        },
        {
          key: "_getFormats",
          value: function (t) {
            return t[this.v1 ? 2 : this.v2 ? 3 : 4];
          },
        },
        {
          key: "formats",
          value: function () {
            var t = this,
              r =
                this._getFormats(this.metadata) ||
                this._getFormats(this.getDefaultCountryMetadataForRegion()) ||
                [];
            return r.map(function (o) {
              return new GD(o, t);
            });
          },
        },
        {
          key: "nationalPrefix",
          value: function () {
            return this.metadata[this.v1 ? 3 : this.v2 ? 4 : 5];
          },
        },
        {
          key: "_getNationalPrefixFormattingRule",
          value: function (t) {
            return t[this.v1 ? 4 : this.v2 ? 5 : 6];
          },
        },
        {
          key: "nationalPrefixFormattingRule",
          value: function () {
            return (
              this._getNationalPrefixFormattingRule(this.metadata) ||
              this._getNationalPrefixFormattingRule(
                this.getDefaultCountryMetadataForRegion()
              )
            );
          },
        },
        {
          key: "_nationalPrefixForParsing",
          value: function () {
            return this.metadata[this.v1 ? 5 : this.v2 ? 6 : 7];
          },
        },
        {
          key: "nationalPrefixForParsing",
          value: function () {
            return this._nationalPrefixForParsing() || this.nationalPrefix();
          },
        },
        {
          key: "nationalPrefixTransformRule",
          value: function () {
            return this.metadata[this.v1 ? 6 : this.v2 ? 7 : 8];
          },
        },
        {
          key: "_getNationalPrefixIsOptionalWhenFormatting",
          value: function () {
            return !!this.metadata[this.v1 ? 7 : this.v2 ? 8 : 9];
          },
        },
        {
          key: "nationalPrefixIsOptionalWhenFormattingInNationalFormat",
          value: function () {
            return (
              this._getNationalPrefixIsOptionalWhenFormatting(this.metadata) ||
              this._getNationalPrefixIsOptionalWhenFormatting(
                this.getDefaultCountryMetadataForRegion()
              )
            );
          },
        },
        {
          key: "leadingDigits",
          value: function () {
            return this.metadata[this.v1 ? 8 : this.v2 ? 9 : 10];
          },
        },
        {
          key: "types",
          value: function () {
            return this.metadata[this.v1 ? 9 : this.v2 ? 10 : 11];
          },
        },
        {
          key: "hasTypes",
          value: function () {
            return this.types() && this.types().length === 0
              ? !1
              : !!this.types();
          },
        },
        {
          key: "type",
          value: function (t) {
            if (this.hasTypes() && K9(this.types(), t))
              return new ZD(K9(this.types(), t), this);
          },
        },
        {
          key: "ext",
          value: function () {
            return this.v1 || this.v2 ? W9 : this.metadata[13] || W9;
          },
        },
      ]),
      i
    );
  })(),
  GD = (function () {
    function i(e, t) {
      Mm(this, i), (this._format = e), (this.metadata = t);
    }
    return (
      Am(i, [
        {
          key: "pattern",
          value: function () {
            return this._format[0];
          },
        },
        {
          key: "format",
          value: function () {
            return this._format[1];
          },
        },
        {
          key: "leadingDigitsPatterns",
          value: function () {
            return this._format[2] || [];
          },
        },
        {
          key: "nationalPrefixFormattingRule",
          value: function () {
            return (
              this._format[3] || this.metadata.nationalPrefixFormattingRule()
            );
          },
        },
        {
          key: "nationalPrefixIsOptionalWhenFormattingInNationalFormat",
          value: function () {
            return (
              !!this._format[4] ||
              this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()
            );
          },
        },
        {
          key: "nationalPrefixIsMandatoryWhenFormattingInNationalFormat",
          value: function () {
            return (
              this.usesNationalPrefix() &&
              !this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()
            );
          },
        },
        {
          key: "usesNationalPrefix",
          value: function () {
            return !!(
              this.nationalPrefixFormattingRule() &&
              !WD.test(this.nationalPrefixFormattingRule())
            );
          },
        },
        {
          key: "internationalFormat",
          value: function () {
            return this._format[5] || this.format();
          },
        },
      ]),
      i
    );
  })(),
  WD = /^\(?\$1\)?$/,
  ZD = (function () {
    function i(e, t) {
      Mm(this, i), (this.type = e), (this.metadata = t);
    }
    return (
      Am(i, [
        {
          key: "pattern",
          value: function () {
            return this.metadata.v1 ? this.type : this.type[0];
          },
        },
        {
          key: "possibleLengths",
          value: function () {
            if (!this.metadata.v1)
              return this.type[1] || this.metadata.possibleLengths();
          },
        },
      ]),
      i
    );
  })();
function K9(i, e) {
  switch (e) {
    case "FIXED_LINE":
      return i[0];
    case "MOBILE":
      return i[1];
    case "TOLL_FREE":
      return i[2];
    case "PREMIUM_RATE":
      return i[3];
    case "PERSONAL_NUMBER":
      return i[4];
    case "VOICEMAIL":
      return i[5];
    case "UAN":
      return i[6];
    case "PAGER":
      return i[7];
    case "VOIP":
      return i[8];
    case "SHARED_COST":
      return i[9];
  }
}
function KD(i) {
  if (!i)
    throw new Error(
      "[libphonenumber-js] `metadata` argument not passed. Check your arguments."
    );
  if (!cl(i) || !cl(i.countries))
    throw new Error(
      "[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(
        cl(i)
          ? "an object of shape: { " + Object.keys(i).join(", ") + " }"
          : "a " + JD(i) + ": " + i,
        "."
      )
    );
}
var JD = function (e) {
  return ub(e);
};
function Ia(i, e) {
  if (((e = new ar(e)), e.hasCountry(i)))
    return e.country(i).countryCallingCode();
  throw new Error("Unknown country: ".concat(i));
}
function J9(i) {
  var e = i.version;
  typeof e == "number"
    ? ((this.v1 = e === 1),
      (this.v2 = e === 2),
      (this.v3 = e === 3),
      (this.v4 = e === 4))
    : e
    ? cb(e, qD) === -1
      ? (this.v2 = !0)
      : cb(e, $D) === -1
      ? (this.v3 = !0)
      : (this.v4 = !0)
    : (this.v1 = !0);
}
var XD = ";ext=",
  _d = function (e) {
    return "([".concat(Tn, "]{1,").concat(e, "})");
  };
function zp(i) {
  var e = "20",
    t = "15",
    r = "9",
    o = "6",
    n = "[ \xA0\\t,]*",
    u = "[:\\.\uFF0E]?[ \xA0\\t,-]*",
    h = "#?",
    m =
      "(?:e?xt(?:ensi(?:o\u0301?|\xF3))?n?|\uFF45?\uFF58\uFF54\uFF4E?|\u0434\u043E\u0431|anexo)",
    b = "(?:[x\uFF58#\uFF03~\uFF5E]|int|\uFF49\uFF4E\uFF54)",
    _ = "[- ]+",
    S = "[ \xA0\\t]*",
    T = "(?:,{2}|;)",
    D = XD + _d(e),
    F = n + m + u + _d(e) + h,
    q = n + b + u + _d(r) + h,
    Q = _ + _d(o) + "#",
    te = S + T + u + _d(t) + h,
    ce = S + "(?:,)+" + u + _d(r) + h;
  return D + "|" + F + "|" + q + "|" + Q + "|" + te + "|" + ce;
}
var YD = "[" + Tn + "]{" + Fp + "}",
  eL = "[" + cu + "]{0,1}(?:[" + rs + "]*[" + Tn + "]){3,}[" + rs + Tn + "]*",
  tL = new RegExp("^[" + cu + "]{0,1}(?:[" + rs + "]*[" + Tn + "]){1,2}$", "i"),
  iL = eL + "(?:" + zp() + ")?",
  rL = new RegExp("^" + YD + "$|^" + iL + "$", "i");
function db(i) {
  return i.length >= Fp && rL.test(i);
}
function X9(i) {
  return tL.test(i);
}
var Y9 = new RegExp("(?:" + zp() + ")$", "i");
function hb(i) {
  var e = i.search(Y9);
  if (e < 0) return {};
  for (var t = i.slice(0, e), r = i.match(Y9), o = 1; o < r.length; ) {
    if (r[o]) return { number: t, ext: r[o] };
    o++;
  }
}
function nL(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = oL(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function oL(i, e) {
  if (i) {
    if (typeof i == "string") return ew(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return ew(i, e);
  }
}
function ew(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
var sL = {
  0: "0",
  1: "1",
  2: "2",
  3: "3",
  4: "4",
  5: "5",
  6: "6",
  7: "7",
  8: "8",
  9: "9",
  "\uFF10": "0",
  "\uFF11": "1",
  "\uFF12": "2",
  "\uFF13": "3",
  "\uFF14": "4",
  "\uFF15": "5",
  "\uFF16": "6",
  "\uFF17": "7",
  "\uFF18": "8",
  "\uFF19": "9",
  "\u0660": "0",
  "\u0661": "1",
  "\u0662": "2",
  "\u0663": "3",
  "\u0664": "4",
  "\u0665": "5",
  "\u0666": "6",
  "\u0667": "7",
  "\u0668": "8",
  "\u0669": "9",
  "\u06F0": "0",
  "\u06F1": "1",
  "\u06F2": "2",
  "\u06F3": "3",
  "\u06F4": "4",
  "\u06F5": "5",
  "\u06F6": "6",
  "\u06F7": "7",
  "\u06F8": "8",
  "\u06F9": "9",
};
function pb(i) {
  return sL[i];
}
function ul(i) {
  for (var e = "", t = nL(i.split("")), r; !(r = t()).done; ) {
    var o = r.value,
      n = pb(o);
    n && (e += n);
  }
  return e;
}
function aL(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = lL(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function lL(i, e) {
  if (i) {
    if (typeof i == "string") return tw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return tw(i, e);
  }
}
function tw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function Np(i) {
  for (var e = "", t = aL(i.split("")), r; !(r = t()).done; ) {
    var o = r.value;
    e += iw(o, e) || "";
  }
  return e;
}
function iw(i, e, t) {
  if (i === "+") {
    if (e) {
      typeof t == "function" && t("end");
      return;
    }
    return "+";
  }
  return pb(i);
}
function cL(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = uL(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function uL(i, e) {
  if (i) {
    if (typeof i == "string") return rw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return rw(i, e);
  }
}
function rw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function fb(i, e) {
  for (var t = i.slice(), r = cL(e), o; !(o = r()).done; ) {
    var n = o.value;
    i.indexOf(n) < 0 && t.push(n);
  }
  return t.sort(function (u, h) {
    return u - h;
  });
}
function dl(i, e) {
  return nw(i, void 0, e);
}
function nw(i, e, t) {
  var r = t.type(e),
    o = (r && r.possibleLengths()) || t.possibleLengths();
  if (!o) return "IS_POSSIBLE";
  if (e === "FIXED_LINE_OR_MOBILE") {
    if (!t.type("FIXED_LINE")) return nw(i, "MOBILE", t);
    var n = t.type("MOBILE");
    n && (o = fb(o, n.possibleLengths()));
  } else if (e && !r) return "INVALID_LENGTH";
  var u = i.length,
    h = o[0];
  return h === u
    ? "IS_POSSIBLE"
    : h > u
    ? "TOO_SHORT"
    : o[o.length - 1] < u
    ? "TOO_LONG"
    : o.indexOf(u, 1) >= 0
    ? "IS_POSSIBLE"
    : "INVALID_LENGTH";
}
function mb(i, e, t) {
  if ((e === void 0 && (e = {}), (t = new ar(t)), e.v2)) {
    if (!i.countryCallingCode)
      throw new Error("Invalid phone number object passed");
    t.selectNumberingPlan(i.countryCallingCode);
  } else {
    if (!i.phone) return !1;
    if (i.country) {
      if (!t.hasCountry(i.country))
        throw new Error("Unknown country: ".concat(i.country));
      t.country(i.country);
    } else {
      if (!i.countryCallingCode)
        throw new Error("Invalid phone number object passed");
      t.selectNumberingPlan(i.countryCallingCode);
    }
  }
  if (t.possibleLengths()) return gb(i.phone || i.nationalNumber, t);
  if (
    i.countryCallingCode &&
    t.isNonGeographicCallingCode(i.countryCallingCode)
  )
    return !0;
  throw new Error(
    'Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.'
  );
}
function gb(i, e) {
  switch (dl(i, e)) {
    case "IS_POSSIBLE":
      return !0;
    default:
      return !1;
  }
}
function Vo(i, e) {
  return (i = i || ""), new RegExp("^(?:" + e + ")$").test(i);
}
function dL(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = hL(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function hL(i, e) {
  if (i) {
    if (typeof i == "string") return ow(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return ow(i, e);
  }
}
function ow(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
var pL = [
  "MOBILE",
  "PREMIUM_RATE",
  "TOLL_FREE",
  "SHARED_COST",
  "VOIP",
  "PERSONAL_NUMBER",
  "PAGER",
  "UAN",
  "VOICEMAIL",
];
function uu(i, e, t) {
  if (((e = e || {}), !(!i.country && !i.countryCallingCode))) {
    (t = new ar(t)), t.selectNumberingPlan(i.country, i.countryCallingCode);
    var r = e.v2 ? i.nationalNumber : i.phone;
    if (Vo(r, t.nationalNumberPattern())) {
      if (yb(r, "FIXED_LINE", t))
        return (t.type("MOBILE") && t.type("MOBILE").pattern() === "") ||
          !t.type("MOBILE") ||
          yb(r, "MOBILE", t)
          ? "FIXED_LINE_OR_MOBILE"
          : "FIXED_LINE";
      for (var o = dL(pL), n; !(n = o()).done; ) {
        var u = n.value;
        if (yb(r, u, t)) return u;
      }
    }
  }
}
function yb(i, e, t) {
  return (
    (e = t.type(e)),
    !e ||
    !e.pattern() ||
    (e.possibleLengths() && e.possibleLengths().indexOf(i.length) < 0)
      ? !1
      : Vo(i, e.pattern())
  );
}
function bb(i, e, t) {
  if (
    ((e = e || {}),
    (t = new ar(t)),
    t.selectNumberingPlan(i.country, i.countryCallingCode),
    t.hasTypes())
  )
    return uu(i, e, t.metadata) !== void 0;
  var r = e.v2 ? i.nationalNumber : i.phone;
  return Vo(r, t.nationalNumberPattern());
}
function vb(i, e, t) {
  var r = new ar(t),
    o = r.getCountryCodesForCallingCode(i);
  return o
    ? o.filter(function (n) {
        return fL(e, n, t);
      })
    : [];
}
function fL(i, e, t) {
  var r = new ar(t);
  return (
    r.selectNumberingPlan(e),
    r.numberingPlan.possibleLengths().indexOf(i.length) >= 0
  );
}
function Op(i) {
  return i.replace(new RegExp("[".concat(rs, "]+"), "g"), " ").trim();
}
var _b = /(\$\d)/;
function Bp(i, e, t) {
  var r = t.useInternationalFormat,
    o = t.withNationalPrefix,
    n = t.carrierCode,
    u = t.metadata,
    h = i.replace(
      new RegExp(e.pattern()),
      r
        ? e.internationalFormat()
        : o && e.nationalPrefixFormattingRule()
        ? e.format().replace(_b, e.nationalPrefixFormattingRule())
        : e.format()
    );
  return r ? Op(h) : h;
}
var mL = /^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;
function xb(i, e, t) {
  var r = new ar(t);
  if ((r.selectNumberingPlan(i, e), r.defaultIDDPrefix()))
    return r.defaultIDDPrefix();
  if (mL.test(r.IDDPrefix())) return r.IDDPrefix();
}
function wb(i) {
  var e = i.number,
    t = i.ext;
  if (!e) return "";
  if (e[0] !== "+")
    throw new Error(
      '"formatRFC3966()" expects "number" to be in E.164 format.'
    );
  return "tel:".concat(e).concat(t ? ";ext=" + t : "");
}
function gL(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = yL(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function yL(i, e) {
  if (i) {
    if (typeof i == "string") return sw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return sw(i, e);
  }
}
function sw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function aw(i, e) {
  var t = Object.keys(i);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(i);
    e &&
      (r = r.filter(function (o) {
        return Object.getOwnPropertyDescriptor(i, o).enumerable;
      })),
      t.push.apply(t, r);
  }
  return t;
}
function lw(i) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2
      ? aw(Object(t), !0).forEach(function (r) {
          bL(i, r, t[r]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(i, Object.getOwnPropertyDescriptors(t))
      : aw(Object(t)).forEach(function (r) {
          Object.defineProperty(i, r, Object.getOwnPropertyDescriptor(t, r));
        });
  }
  return i;
}
function bL(i, e, t) {
  return (
    e in i
      ? Object.defineProperty(i, e, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (i[e] = t),
    i
  );
}
var cw = {
  formatExtension: function (e, t, r) {
    return "".concat(e).concat(r.ext()).concat(t);
  },
};
function Sb(i, e, t, r) {
  if (
    (t ? (t = lw(lw({}, cw), t)) : (t = cw),
    (r = new ar(r)),
    i.country && i.country !== "001")
  ) {
    if (!r.hasCountry(i.country))
      throw new Error("Unknown country: ".concat(i.country));
    r.country(i.country);
  } else if (i.countryCallingCode) r.selectNumberingPlan(i.countryCallingCode);
  else return i.phone || "";
  var o = r.countryCallingCode(),
    n = t.v2 ? i.nationalNumber : i.phone,
    u;
  switch (e) {
    case "NATIONAL":
      return n
        ? ((u = Im(n, i.carrierCode, "NATIONAL", r, t)),
          kb(u, i.ext, r, t.formatExtension))
        : "";
    case "INTERNATIONAL":
      return n
        ? ((u = Im(n, null, "INTERNATIONAL", r, t)),
          (u = "+".concat(o, " ").concat(u)),
          kb(u, i.ext, r, t.formatExtension))
        : "+".concat(o);
    case "E.164":
      return "+".concat(o).concat(n);
    case "RFC3966":
      return wb({ number: "+".concat(o).concat(n), ext: i.ext });
    case "IDD":
      if (!t.fromCountry) return;
      var h = _L(n, i.carrierCode, o, t.fromCountry, r);
      return kb(h, i.ext, r, t.formatExtension);
    default:
      throw new Error(
        'Unknown "format" argument passed to "formatNumber()": "'.concat(e, '"')
      );
  }
}
function Im(i, e, t, r, o) {
  var n = vL(r.formats(), i);
  return n
    ? Bp(i, n, {
        useInternationalFormat: t === "INTERNATIONAL",
        withNationalPrefix: !(
          n.nationalPrefixIsOptionalWhenFormattingInNationalFormat() &&
          o &&
          o.nationalPrefix === !1
        ),
        carrierCode: e,
        metadata: r,
      })
    : i;
}
function vL(i, e) {
  for (var t = gL(i), r; !(r = t()).done; ) {
    var o = r.value;
    if (o.leadingDigitsPatterns().length > 0) {
      var n = o.leadingDigitsPatterns()[o.leadingDigitsPatterns().length - 1];
      if (e.search(n) !== 0) continue;
    }
    if (Vo(e, o.pattern())) return o;
  }
}
function kb(i, e, t, r) {
  return e ? r(i, e, t) : i;
}
function _L(i, e, t, r, o) {
  var n = Ia(r, o.metadata);
  if (n === t) {
    var u = Im(i, e, "NATIONAL", o);
    return t === "1" ? t + " " + u : u;
  }
  var h = xb(r, void 0, o.metadata);
  if (h)
    return ""
      .concat(h, " ")
      .concat(t, " ")
      .concat(Im(i, null, "INTERNATIONAL", o));
}
function uw(i, e) {
  var t = Object.keys(i);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(i);
    e &&
      (r = r.filter(function (o) {
        return Object.getOwnPropertyDescriptor(i, o).enumerable;
      })),
      t.push.apply(t, r);
  }
  return t;
}
function dw(i) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2
      ? uw(Object(t), !0).forEach(function (r) {
          xL(i, r, t[r]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(i, Object.getOwnPropertyDescriptors(t))
      : uw(Object(t)).forEach(function (r) {
          Object.defineProperty(i, r, Object.getOwnPropertyDescriptor(t, r));
        });
  }
  return i;
}
function xL(i, e, t) {
  return (
    e in i
      ? Object.defineProperty(i, e, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (i[e] = t),
    i
  );
}
function wL(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function hw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function kL(i, e, t) {
  return (
    e && hw(i.prototype, e),
    t && hw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var SL = !1,
  xd = (function () {
    function i(e, t, r) {
      if ((wL(this, i), !e))
        throw new TypeError("`country` or `countryCallingCode` not passed");
      if (!t) throw new TypeError("`nationalNumber` not passed");
      if (!r) throw new TypeError("`metadata` not passed");
      var o = EL(e, r),
        n = o.country,
        u = o.countryCallingCode;
      (this.country = n),
        (this.countryCallingCode = u),
        (this.nationalNumber = t),
        (this.number = "+" + this.countryCallingCode + this.nationalNumber),
        (this.getMetadata = function () {
          return r;
        });
    }
    return (
      kL(i, [
        {
          key: "setExt",
          value: function (t) {
            this.ext = t;
          },
        },
        {
          key: "getPossibleCountries",
          value: function () {
            return this.country
              ? [this.country]
              : vb(
                  this.countryCallingCode,
                  this.nationalNumber,
                  this.getMetadata()
                );
          },
        },
        {
          key: "isPossible",
          value: function () {
            return mb(this, { v2: !0 }, this.getMetadata());
          },
        },
        {
          key: "isValid",
          value: function () {
            return bb(this, { v2: !0 }, this.getMetadata());
          },
        },
        {
          key: "isNonGeographic",
          value: function () {
            var t = new ar(this.getMetadata());
            return t.isNonGeographicCallingCode(this.countryCallingCode);
          },
        },
        {
          key: "isEqual",
          value: function (t) {
            return this.number === t.number && this.ext === t.ext;
          },
        },
        {
          key: "getType",
          value: function () {
            return uu(this, { v2: !0 }, this.getMetadata());
          },
        },
        {
          key: "format",
          value: function (t, r) {
            return Sb(
              this,
              t,
              r ? dw(dw({}, r), {}, { v2: !0 }) : { v2: !0 },
              this.getMetadata()
            );
          },
        },
        {
          key: "formatNational",
          value: function (t) {
            return this.format("NATIONAL", t);
          },
        },
        {
          key: "formatInternational",
          value: function (t) {
            return this.format("INTERNATIONAL", t);
          },
        },
        {
          key: "getURI",
          value: function (t) {
            return this.format("RFC3966", t);
          },
        },
      ]),
      i
    );
  })();
var CL = function (e) {
  return /^[A-Z]{2}$/.test(e);
};
function EL(i, e) {
  var t,
    r,
    o = new ar(e);
  return (
    CL(i)
      ? ((t = i), o.selectNumberingPlan(t), (r = o.countryCallingCode()))
      : ((r = i), SL && o.isNonGeographicCallingCode(r) && (t = "001")),
    { country: t, countryCallingCode: r }
  );
}
var TL = new RegExp("([" + Tn + "])");
function Rp(i, e, t, r) {
  if (e) {
    var o = new ar(r);
    o.selectNumberingPlan(e, t);
    var n = new RegExp(o.IDDPrefix());
    if (i.search(n) === 0) {
      i = i.slice(i.match(n)[0].length);
      var u = i.match(TL);
      if (!(u && u[1] != null && u[1].length > 0 && u[1] === "0")) return i;
    }
  }
}
function wd(i, e) {
  if (i && e.numberingPlan.nationalPrefixForParsing()) {
    var t = new RegExp(
        "^(?:" + e.numberingPlan.nationalPrefixForParsing() + ")"
      ),
      r = t.exec(i);
    if (r) {
      var o,
        n,
        u = r.length - 1,
        h = u > 0 && r[u];
      if (e.nationalPrefixTransformRule() && h)
        (o = i.replace(t, e.nationalPrefixTransformRule())),
          u > 1 && (n = r[1]);
      else {
        var m = r[0];
        (o = i.slice(m.length)), h && (n = r[1]);
      }
      var b;
      if (h) {
        var _ = i.indexOf(r[1]),
          S = i.slice(0, _);
        S === e.numberingPlan.nationalPrefix() &&
          (b = e.numberingPlan.nationalPrefix());
      } else b = r[0];
      return { nationalNumber: o, nationalPrefix: b, carrierCode: n };
    }
  }
  return { nationalNumber: i };
}
function kd(i, e) {
  var t = wd(i, e),
    r = t.carrierCode,
    o = t.nationalNumber;
  if (o !== i) {
    if (!ML(i, o, e)) return { nationalNumber: i };
    if (e.possibleLengths() && !AL(o, e)) return { nationalNumber: i };
  }
  return { nationalNumber: o, carrierCode: r };
}
function ML(i, e, t) {
  return !(
    Vo(i, t.nationalNumberPattern()) && !Vo(e, t.nationalNumberPattern())
  );
}
function AL(i, e) {
  switch (dl(i, e)) {
    case "TOO_SHORT":
    case "INVALID_LENGTH":
      return !1;
    default:
      return !0;
  }
}
function Up(i, e, t, r) {
  var o = e ? Ia(e, r) : t;
  if (i.indexOf(o) === 0) {
    (r = new ar(r)), r.selectNumberingPlan(e, t);
    var n = i.slice(o.length),
      u = kd(n, r),
      h = u.nationalNumber,
      m = kd(i, r),
      b = m.nationalNumber;
    if (
      (!Vo(b, r.nationalNumberPattern()) && Vo(h, r.nationalNumberPattern())) ||
      dl(b, r) === "TOO_LONG"
    )
      return { countryCallingCode: o, number: n };
  }
  return { number: i };
}
function Vp(i, e, t, r) {
  if (!i) return {};
  var o;
  if (i[0] !== "+") {
    var n = Rp(i, e, t, r);
    if (n && n !== i) (o = !0), (i = "+" + n);
    else {
      if (e || t) {
        var u = Up(i, e, t, r),
          h = u.countryCallingCode,
          m = u.number;
        if (h)
          return {
            countryCallingCodeSource: "FROM_NUMBER_WITHOUT_PLUS_SIGN",
            countryCallingCode: h,
            number: m,
          };
      }
      return { number: i };
    }
  }
  if (i[1] === "0") return {};
  r = new ar(r);
  for (var b = 2; b - 1 <= Q9 && b <= i.length; ) {
    var _ = i.slice(1, b);
    if (r.hasCallingCode(_))
      return (
        r.selectNumberingPlan(_),
        {
          countryCallingCodeSource: o
            ? "FROM_NUMBER_WITH_IDD"
            : "FROM_NUMBER_WITH_PLUS_SIGN",
          countryCallingCode: _,
          number: i.slice(b),
        }
      );
    b++;
  }
  return {};
}
function IL(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = PL(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function PL(i, e) {
  if (i) {
    if (typeof i == "string") return pw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return pw(i, e);
  }
}
function pw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function jp(i, e) {
  var t = e.countries,
    r = e.defaultCountry,
    o = e.metadata;
  o = new ar(o);
  for (var n = [], u = IL(t), h; !(h = u()).done; ) {
    var m = h.value;
    if ((o.country(m), o.leadingDigits())) {
      if (i && i.search(o.leadingDigits()) === 0) return m;
    } else if (uu({ phone: i, country: m }, void 0, o.metadata))
      if (r) {
        if (m === r) return m;
        n.push(m);
      } else return m;
  }
  if (n.length > 0) return n[0];
}
var DL = !1;
function Hp(i, e) {
  var t = e.nationalNumber,
    r = e.defaultCountry,
    o = e.metadata;
  if (DL && o.isNonGeographicCallingCode(i)) return "001";
  var n = o.getCountryCodesForCallingCode(i);
  if (n)
    return n.length === 1
      ? n[0]
      : jp(t, { countries: n, defaultCountry: r, metadata: o.metadata });
}
var Eb = "+",
  LL = "[\\-\\.\\(\\)]?",
  fw = "([" + Tn + "]|" + LL + ")",
  FL = "^\\" + Eb + fw + "*[" + Tn + "]" + fw + "*$",
  zL = new RegExp(FL, "g"),
  Cb = Tn,
  NL = "[" + Cb + "]+((\\-)*[" + Cb + "])*",
  OL = "a-zA-Z",
  BL = "[" + OL + "]+((\\-)*[" + Cb + "])*",
  RL = "^(" + NL + "\\.)*" + BL + "\\.?$",
  UL = new RegExp(RL, "g"),
  Tb = "tel:",
  Pm = ";phone-context=",
  mw = ";isub=";
function Mb(i) {
  var e = i.indexOf(Pm);
  if (e < 0) return null;
  var t = e + Pm.length;
  if (t >= i.length) return "";
  var r = i.indexOf(";", t);
  return r >= 0 ? i.substring(t, r) : i.substring(t);
}
function gw(i) {
  return i === null ? !0 : i.length === 0 ? !1 : zL.test(i) || UL.test(i);
}
function Ab(i, e) {
  var t = e.extractFormattedPhoneNumber,
    r = Mb(i);
  if (!gw(r)) throw new ps("NOT_A_NUMBER");
  var o;
  if (r === null) o = t(i) || "";
  else {
    (o = ""), r.charAt(0) === Eb && (o += r);
    var n = i.indexOf(Tb),
      u;
    n >= 0 ? (u = n + Tb.length) : (u = 0);
    var h = i.indexOf(Pm);
    o += i.substring(u, h);
  }
  var m = o.indexOf(mw);
  if ((m > 0 && (o = o.substring(0, m)), o !== "")) return o;
}
var VL = 250,
  jL = new RegExp("[" + cu + Tn + "]"),
  HL = new RegExp("[^" + Tn + "#]+$"),
  qL = !1;
function Ib(i, e, t) {
  if (
    ((e = e || {}),
    (t = new ar(t)),
    e.defaultCountry && !t.hasCountry(e.defaultCountry))
  )
    throw e.v2
      ? new ps("INVALID_COUNTRY")
      : new Error("Unknown country: ".concat(e.defaultCountry));
  var r = QL(i, e.v2, e.extract),
    o = r.number,
    n = r.ext,
    u = r.error;
  if (!o) {
    if (e.v2)
      throw u === "TOO_SHORT" ? new ps("TOO_SHORT") : new ps("NOT_A_NUMBER");
    return {};
  }
  var h = WL(o, e.defaultCountry, e.defaultCallingCode, t),
    m = h.country,
    b = h.nationalNumber,
    _ = h.countryCallingCode,
    S = h.countryCallingCodeSource,
    T = h.carrierCode;
  if (!t.hasSelectedNumberingPlan()) {
    if (e.v2) throw new ps("INVALID_COUNTRY");
    return {};
  }
  if (!b || b.length < Fp) {
    if (e.v2) throw new ps("TOO_SHORT");
    return {};
  }
  if (b.length > $9) {
    if (e.v2) throw new ps("TOO_LONG");
    return {};
  }
  if (e.v2) {
    var D = new xd(_, b, t.metadata);
    return (
      m && (D.country = m),
      T && (D.carrierCode = T),
      n && (D.ext = n),
      (D.__countryCallingCodeSource = S),
      D
    );
  }
  var F = (e.extended ? t.hasSelectedNumberingPlan() : m)
    ? Vo(b, t.nationalNumberPattern())
    : !1;
  return e.extended
    ? {
        country: m,
        countryCallingCode: _,
        carrierCode: T,
        valid: F,
        possible: F
          ? !0
          : !!(e.extended === !0 && t.possibleLengths() && gb(b, t)),
        phone: b,
        ext: n,
      }
    : F
    ? GL(m, b, n)
    : {};
}
function $L(i, e, t) {
  if (i) {
    if (i.length > VL) {
      if (t) throw new ps("TOO_LONG");
      return;
    }
    if (e === !1) return i;
    var r = i.search(jL);
    if (!(r < 0)) return i.slice(r).replace(HL, "");
  }
}
function QL(i, e, t) {
  var r = Ab(i, {
    extractFormattedPhoneNumber: function (u) {
      return $L(u, t, e);
    },
  });
  if (!r) return {};
  if (!db(r)) return X9(r) ? { error: "TOO_SHORT" } : {};
  var o = hb(r);
  return o.ext ? o : { number: r };
}
function GL(i, e, t) {
  var r = { country: i, phone: e };
  return t && (r.ext = t), r;
}
function WL(i, e, t, r) {
  var o = Vp(Np(i), e, t, r.metadata),
    n = o.countryCallingCodeSource,
    u = o.countryCallingCode,
    h = o.number,
    m;
  if (u) r.selectNumberingPlan(u);
  else if (h && (e || t))
    r.selectNumberingPlan(e, t),
      e ? (m = e) : qL && r.isNonGeographicCallingCode(t) && (m = "001"),
      (u = t || Ia(e, r.metadata));
  else return {};
  if (!h) return { countryCallingCodeSource: n, countryCallingCode: u };
  var b = kd(Np(h), r),
    _ = b.nationalNumber,
    S = b.carrierCode,
    T = Hp(u, { nationalNumber: _, defaultCountry: e, metadata: r });
  return (
    T && ((m = T), T === "001" || r.country(m)),
    {
      country: m,
      countryCallingCode: u,
      countryCallingCodeSource: n,
      nationalNumber: _,
      carrierCode: S,
    }
  );
}
function yw(i, e) {
  var t = Object.keys(i);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(i);
    e &&
      (r = r.filter(function (o) {
        return Object.getOwnPropertyDescriptor(i, o).enumerable;
      })),
      t.push.apply(t, r);
  }
  return t;
}
function bw(i) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2
      ? yw(Object(t), !0).forEach(function (r) {
          ZL(i, r, t[r]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(i, Object.getOwnPropertyDescriptors(t))
      : yw(Object(t)).forEach(function (r) {
          Object.defineProperty(i, r, Object.getOwnPropertyDescriptor(t, r));
        });
  }
  return i;
}
function ZL(i, e, t) {
  return (
    e in i
      ? Object.defineProperty(i, e, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (i[e] = t),
    i
  );
}
function Pb(i, e, t) {
  return Ib(i, bw(bw({}, e), {}, { v2: !0 }), t);
}
function vw(i, e) {
  var t = Object.keys(i);
  if (Object.getOwnPropertySymbols) {
    var r = Object.getOwnPropertySymbols(i);
    e &&
      (r = r.filter(function (o) {
        return Object.getOwnPropertyDescriptor(i, o).enumerable;
      })),
      t.push.apply(t, r);
  }
  return t;
}
function KL(i) {
  for (var e = 1; e < arguments.length; e++) {
    var t = arguments[e] != null ? arguments[e] : {};
    e % 2
      ? vw(Object(t), !0).forEach(function (r) {
          JL(i, r, t[r]);
        })
      : Object.getOwnPropertyDescriptors
      ? Object.defineProperties(i, Object.getOwnPropertyDescriptors(t))
      : vw(Object(t)).forEach(function (r) {
          Object.defineProperty(i, r, Object.getOwnPropertyDescriptor(t, r));
        });
  }
  return i;
}
function JL(i, e, t) {
  return (
    e in i
      ? Object.defineProperty(i, e, {
          value: t,
          enumerable: !0,
          configurable: !0,
          writable: !0,
        })
      : (i[e] = t),
    i
  );
}
function XL(i, e) {
  return iF(i) || tF(i, e) || eF(i, e) || YL();
}
function YL() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function eF(i, e) {
  if (i) {
    if (typeof i == "string") return _w(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return _w(i, e);
  }
}
function _w(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function tF(i, e) {
  var t =
    i == null
      ? null
      : (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t != null) {
    var r = [],
      o = !0,
      n = !1,
      u,
      h;
    try {
      for (
        t = t.call(i);
        !(o = (u = t.next()).done) && (r.push(u.value), !(e && r.length === e));
        o = !0
      );
    } catch (m) {
      (n = !0), (h = m);
    } finally {
      try {
        !o && t.return != null && t.return();
      } finally {
        if (n) throw h;
      }
    }
    return r;
  }
}
function iF(i) {
  if (Array.isArray(i)) return i;
}
function Db(i) {
  var e = Array.prototype.slice.call(i),
    t = XL(e, 4),
    r = t[0],
    o = t[1],
    n = t[2],
    u = t[3],
    h,
    m,
    b;
  if (typeof r == "string") h = r;
  else throw new TypeError("A text for parsing must be a string.");
  if (!o || typeof o == "string")
    u ? ((m = n), (b = u)) : ((m = void 0), (b = n)),
      o && (m = KL({ defaultCountry: o }, m));
  else if (cl(o)) n ? ((m = o), (b = n)) : (b = o);
  else throw new Error("Invalid second argument: ".concat(o));
  return { text: h, options: m, metadata: b };
}
function qp() {
  var i = Db(arguments),
    e = i.text,
    t = i.options,
    r = i.metadata;
  return Pb(e, t, r);
}
function rF(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function xw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function nF(i, e, t) {
  return (
    e && xw(i.prototype, e),
    t && xw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var ww = (function () {
  function i(e) {
    var t = e.onCountryChange,
      r = e.onCallingCodeChange;
    rF(this, i), (this.onCountryChange = t), (this.onCallingCodeChange = r);
  }
  return (
    nF(i, [
      {
        key: "reset",
        value: function (t) {
          var r = t.country,
            o = t.callingCode;
          (this.international = !1),
            (this.missingPlus = !1),
            (this.IDDPrefix = void 0),
            (this.callingCode = void 0),
            (this.digits = ""),
            this.resetNationalSignificantNumber(),
            this.initCountryAndCallingCode(r, o);
        },
      },
      {
        key: "resetNationalSignificantNumber",
        value: function () {
          (this.nationalSignificantNumber = this.getNationalDigits()),
            (this.nationalSignificantNumberMatchesInput = !0),
            (this.nationalPrefix = void 0),
            (this.carrierCode = void 0),
            (this.complexPrefixBeforeNationalSignificantNumber = void 0);
        },
      },
      {
        key: "update",
        value: function (t) {
          for (var r = 0, o = Object.keys(t); r < o.length; r++) {
            var n = o[r];
            this[n] = t[n];
          }
        },
      },
      {
        key: "initCountryAndCallingCode",
        value: function (t, r) {
          this.setCountry(t), this.setCallingCode(r);
        },
      },
      {
        key: "setCountry",
        value: function (t) {
          (this.country = t), this.onCountryChange(t);
        },
      },
      {
        key: "setCallingCode",
        value: function (t) {
          (this.callingCode = t), this.onCallingCodeChange(t, this.country);
        },
      },
      {
        key: "startInternationalNumber",
        value: function (t, r) {
          (this.international = !0), this.initCountryAndCallingCode(t, r);
        },
      },
      {
        key: "appendDigits",
        value: function (t) {
          this.digits += t;
        },
      },
      {
        key: "appendNationalSignificantNumberDigits",
        value: function (t) {
          this.nationalSignificantNumber += t;
        },
      },
      {
        key: "getNationalDigits",
        value: function () {
          return this.international
            ? this.digits.slice(
                (this.IDDPrefix ? this.IDDPrefix.length : 0) +
                  (this.callingCode ? this.callingCode.length : 0)
              )
            : this.digits;
        },
      },
      {
        key: "getDigitsWithoutInternationalPrefix",
        value: function () {
          return this.international && this.IDDPrefix
            ? this.digits.slice(this.IDDPrefix.length)
            : this.digits;
        },
      },
    ]),
    i
  );
})();
function oF(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = sF(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function sF(i, e) {
  if (i) {
    if (typeof i == "string") return kw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return kw(i, e);
  }
}
function kw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
var ns = "x",
  Lb = new RegExp(ns);
function $p(i, e) {
  if (e < 1) return "";
  for (var t = ""; e > 1; ) e & 1 && (t += i), (e >>= 1), (i += i);
  return t + i;
}
function Fb(i, e) {
  return i[e] === ")" && e++, aF(i.slice(0, e));
}
function aF(i) {
  for (var e = [], t = 0; t < i.length; )
    i[t] === "(" ? e.push(t) : i[t] === ")" && e.pop(), t++;
  var r = 0,
    o = "";
  e.push(i.length);
  for (var n = 0, u = e; n < u.length; n++) {
    var h = u[n];
    (o += i.slice(r, h)), (r = h + 1);
  }
  return o;
}
function Sw(i, e, t) {
  for (var r = oF(t.split("")), o; !(o = r()).done; ) {
    var n = o.value;
    if (i.slice(e + 1).search(Lb) < 0) return;
    (e = i.search(Lb)), (i = i.replace(Lb, n));
  }
  return [i, e];
}
function zb(i, e, t) {
  var r = t.metadata,
    o = t.shouldTryNationalPrefixFormattingRule,
    n = t.getSeparatorAfterNationalPrefix,
    u = new RegExp("^(?:".concat(e.pattern(), ")$"));
  if (u.test(i.nationalSignificantNumber))
    return lF(i, e, {
      metadata: r,
      shouldTryNationalPrefixFormattingRule: o,
      getSeparatorAfterNationalPrefix: n,
    });
}
function Ew(i, e) {
  return dl(i, e) === "IS_POSSIBLE";
}
function lF(i, e, t) {
  var r = t.metadata,
    o = t.shouldTryNationalPrefixFormattingRule,
    n = t.getSeparatorAfterNationalPrefix,
    u = i.nationalSignificantNumber,
    h = i.international,
    m = i.nationalPrefix,
    b = i.carrierCode;
  if (o(e)) {
    var _ = Cw(i, e, {
      useNationalPrefixFormattingRule: !0,
      getSeparatorAfterNationalPrefix: n,
      metadata: r,
    });
    if (_) return _;
  }
  return Cw(i, e, {
    useNationalPrefixFormattingRule: !1,
    getSeparatorAfterNationalPrefix: n,
    metadata: r,
  });
}
function Cw(i, e, t) {
  var r = t.metadata,
    o = t.useNationalPrefixFormattingRule,
    n = t.getSeparatorAfterNationalPrefix,
    u = Bp(i.nationalSignificantNumber, e, {
      carrierCode: i.carrierCode,
      useInternationalFormat: i.international,
      withNationalPrefix: o,
      metadata: r,
    });
  if (
    (o ||
      (i.nationalPrefix
        ? (u = i.nationalPrefix + n(e) + u)
        : i.complexPrefixBeforeNationalSignificantNumber &&
          (u = i.complexPrefixBeforeNationalSignificantNumber + " " + u)),
    cF(u, i))
  )
    return u;
}
function cF(i, e) {
  return ul(i) === e.getNationalDigits();
}
function uF(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function Tw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function dF(i, e, t) {
  return (
    e && Tw(i.prototype, e),
    t && Tw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var Mw = (function () {
  function i() {
    uF(this, i);
  }
  return (
    dF(i, [
      {
        key: "parse",
        value: function (t) {
          if (
            ((this.context = [{ or: !0, instructions: [] }]),
            this.parsePattern(t),
            this.context.length !== 1)
          )
            throw new Error(
              "Non-finalized contexts left when pattern parse ended"
            );
          var r = this.context[0],
            o = r.branches,
            n = r.instructions;
          if (o) return { op: "|", args: o.concat([Nb(n)]) };
          if (n.length === 0) throw new Error("Pattern is required");
          return n.length === 1 ? n[0] : n;
        },
      },
      {
        key: "startContext",
        value: function (t) {
          this.context.push(t);
        },
      },
      {
        key: "endContext",
        value: function () {
          this.context.pop();
        },
      },
      {
        key: "getContext",
        value: function () {
          return this.context[this.context.length - 1];
        },
      },
      {
        key: "parsePattern",
        value: function (t) {
          if (!t) throw new Error("Pattern is required");
          var r = t.match(fF);
          if (!r) {
            if (pF.test(t))
              throw new Error(
                "Illegal characters found in a pattern: ".concat(t)
              );
            this.getContext().instructions =
              this.getContext().instructions.concat(t.split(""));
            return;
          }
          var o = r[1],
            n = t.slice(0, r.index),
            u = t.slice(r.index + o.length);
          switch (o) {
            case "(?:":
              n && this.parsePattern(n),
                this.startContext({ or: !0, instructions: [], branches: [] });
              break;
            case ")":
              if (!this.getContext().or)
                throw new Error(
                  '")" operator must be preceded by "(?:" operator'
                );
              if (
                (n && this.parsePattern(n),
                this.getContext().instructions.length === 0)
              )
                throw new Error(
                  'No instructions found after "|" operator in an "or" group'
                );
              var h = this.getContext(),
                m = h.branches;
              m.push(Nb(this.getContext().instructions)),
                this.endContext(),
                this.getContext().instructions.push({ op: "|", args: m });
              break;
            case "|":
              if (!this.getContext().or)
                throw new Error(
                  '"|" operator can only be used inside "or" groups'
                );
              if ((n && this.parsePattern(n), !this.getContext().branches))
                if (this.context.length === 1) this.getContext().branches = [];
                else
                  throw new Error(
                    '"branches" not found in an "or" group context'
                  );
              this.getContext().branches.push(
                Nb(this.getContext().instructions)
              ),
                (this.getContext().instructions = []);
              break;
            case "[":
              n && this.parsePattern(n), this.startContext({ oneOfSet: !0 });
              break;
            case "]":
              if (!this.getContext().oneOfSet)
                throw new Error(
                  '"]" operator must be preceded by "[" operator'
                );
              this.endContext(),
                this.getContext().instructions.push({ op: "[]", args: hF(n) });
              break;
            default:
              throw new Error("Unknown operator: ".concat(o));
          }
          u && this.parsePattern(u);
        },
      },
    ]),
    i
  );
})();
function hF(i) {
  for (var e = [], t = 0; t < i.length; ) {
    if (i[t] === "-") {
      if (t === 0 || t === i.length - 1)
        throw new Error("Couldn't parse a one-of set pattern: ".concat(i));
      for (
        var r = i[t - 1].charCodeAt(0) + 1,
          o = i[t + 1].charCodeAt(0) - 1,
          n = r;
        n <= o;

      )
        e.push(String.fromCharCode(n)), n++;
    } else e.push(i[t]);
    t++;
  }
  return e;
}
var pF = /[\(\)\[\]\?\:\|]/,
  fF = new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");
function Nb(i) {
  return i.length === 1 ? i[0] : i;
}
function Aw(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = mF(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function mF(i, e) {
  if (i) {
    if (typeof i == "string") return Iw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return Iw(i, e);
  }
}
function Iw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function gF(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function Pw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function yF(i, e, t) {
  return (
    e && Pw(i.prototype, e),
    t && Pw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var Dw = (function () {
  function i(e) {
    gF(this, i), (this.matchTree = new Mw().parse(e));
  }
  return (
    yF(i, [
      {
        key: "match",
        value: function (t) {
          var r =
              arguments.length > 1 && arguments[1] !== void 0
                ? arguments[1]
                : {},
            o = r.allowOverflow;
          if (!t) throw new Error("String is required");
          var n = Ob(t.split(""), this.matchTree, !0);
          if ((n && n.match && delete n.matchedChars, !(n && n.overflow && !o)))
            return n;
        },
      },
    ]),
    i
  );
})();
function Ob(i, e, t) {
  if (typeof e == "string") {
    var r = i.join("");
    return e.indexOf(r) === 0
      ? i.length === e.length
        ? { match: !0, matchedChars: i }
        : { partialMatch: !0 }
      : r.indexOf(e) === 0
      ? t && i.length > e.length
        ? { overflow: !0 }
        : { match: !0, matchedChars: i.slice(0, e.length) }
      : void 0;
  }
  if (Array.isArray(e)) {
    for (var o = i.slice(), n = 0; n < e.length; ) {
      var u = e[n],
        h = Ob(o, u, t && n === e.length - 1);
      if (h) {
        if (h.overflow) return h;
        if (h.match) {
          if (((o = o.slice(h.matchedChars.length)), o.length === 0))
            return n === e.length - 1
              ? { match: !0, matchedChars: i }
              : { partialMatch: !0 };
        } else {
          if (h.partialMatch) return { partialMatch: !0 };
          throw new Error(
            `Unsupported match result:
`.concat(JSON.stringify(h, null, 2))
          );
        }
      } else return;
      n++;
    }
    return t
      ? { overflow: !0 }
      : { match: !0, matchedChars: i.slice(0, i.length - o.length) };
  }
  switch (e.op) {
    case "|":
      for (var m, b = Aw(e.args), _; !(_ = b()).done; ) {
        var S = _.value,
          T = Ob(i, S, t);
        if (T) {
          if (T.overflow) return T;
          if (T.match) return { match: !0, matchedChars: T.matchedChars };
          if (T.partialMatch) m = !0;
          else
            throw new Error(
              `Unsupported match result:
`.concat(JSON.stringify(T, null, 2))
            );
        }
      }
      return m ? { partialMatch: !0 } : void 0;
    case "[]":
      for (var D = Aw(e.args), F; !(F = D()).done; ) {
        var q = F.value;
        if (i[0] === q)
          return i.length === 1
            ? { match: !0, matchedChars: i }
            : t
            ? { overflow: !0 }
            : { match: !0, matchedChars: [q] };
      }
      return;
    default:
      throw new Error("Unsupported instruction tree: ".concat(e));
  }
}
function Lw(i, e) {
  var t = (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t) return (t = t.call(i)).next.bind(t);
  if (
    Array.isArray(i) ||
    (t = bF(i)) ||
    (e && i && typeof i.length == "number")
  ) {
    t && (i = t);
    var r = 0;
    return function () {
      return r >= i.length ? { done: !0 } : { done: !1, value: i[r++] };
    };
  }
  throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function bF(i, e) {
  if (i) {
    if (typeof i == "string") return Fw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return Fw(i, e);
  }
}
function Fw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function vF(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function zw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function _F(i, e, t) {
  return (
    e && zw(i.prototype, e),
    t && zw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var Bb = "9",
  xF = 15,
  wF = $p(Bb, xF),
  kF = /[- ]/,
  Dm = !0,
  SF =
    Dm &&
    function () {
      return /\[([^\[\]])*\]/g;
    },
  CF =
    Dm &&
    function () {
      return /\d(?=[^,}][^,}])/g;
    },
  EF = new RegExp("[" + rs + "]*\\$1[" + rs + "]*(\\$\\d[" + rs + "]*)*$"),
  Nw = 3,
  Ow = (function () {
    function i(e) {
      var t = e.state,
        r = e.metadata;
      vF(this, i), (this.metadata = r), this.resetFormat();
    }
    return (
      _F(i, [
        {
          key: "resetFormat",
          value: function () {
            (this.chosenFormat = void 0),
              (this.template = void 0),
              (this.nationalNumberTemplate = void 0),
              (this.populatedNationalNumberTemplate = void 0),
              (this.populatedNationalNumberTemplatePosition = -1);
          },
        },
        {
          key: "reset",
          value: function (t, r) {
            this.resetFormat(),
              t
                ? ((this.isNANP = t.callingCode() === "1"),
                  (this.matchingFormats = t.formats()),
                  r.nationalSignificantNumber &&
                    this.narrowDownMatchingFormats(r))
                : ((this.isNANP = void 0), (this.matchingFormats = []));
          },
        },
        {
          key: "format",
          value: function (t, r) {
            var o = this;
            if (Ew(r.nationalSignificantNumber, this.metadata))
              for (var n = Lw(this.matchingFormats), u; !(u = n()).done; ) {
                var h = u.value,
                  m = zb(r, h, {
                    metadata: this.metadata,
                    shouldTryNationalPrefixFormattingRule: function (_) {
                      return o.shouldTryNationalPrefixFormattingRule(_, {
                        international: r.international,
                        nationalPrefix: r.nationalPrefix,
                      });
                    },
                    getSeparatorAfterNationalPrefix: function (_) {
                      return o.getSeparatorAfterNationalPrefix(_);
                    },
                  });
                if (m)
                  return (
                    this.resetFormat(),
                    (this.chosenFormat = h),
                    this.setNationalNumberTemplate(m.replace(/\d/g, ns), r),
                    (this.populatedNationalNumberTemplate = m),
                    (this.populatedNationalNumberTemplatePosition =
                      this.template.lastIndexOf(ns)),
                    m
                  );
              }
            return this.formatNationalNumberWithNextDigits(t, r);
          },
        },
        {
          key: "formatNationalNumberWithNextDigits",
          value: function (t, r) {
            var o = this.chosenFormat,
              n = this.chooseFormat(r);
            if (n)
              return n === o
                ? this.formatNextNationalNumberDigits(t)
                : this.formatNextNationalNumberDigits(r.getNationalDigits());
          },
        },
        {
          key: "narrowDownMatchingFormats",
          value: function (t) {
            var r = this,
              o = t.nationalSignificantNumber,
              n = t.nationalPrefix,
              u = t.international,
              h = o,
              m = h.length - Nw;
            m < 0 && (m = 0),
              (this.matchingFormats = this.matchingFormats.filter(function (b) {
                return r.formatSuits(b, u, n) && r.formatMatches(b, h, m);
              })),
              this.chosenFormat &&
                this.matchingFormats.indexOf(this.chosenFormat) === -1 &&
                this.resetFormat();
          },
        },
        {
          key: "formatSuits",
          value: function (t, r, o) {
            return !(
              (o &&
                !t.usesNationalPrefix() &&
                !t.nationalPrefixIsOptionalWhenFormattingInNationalFormat()) ||
              (!r &&
                !o &&
                t.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())
            );
          },
        },
        {
          key: "formatMatches",
          value: function (t, r, o) {
            var n = t.leadingDigitsPatterns().length;
            if (n === 0) return !0;
            o = Math.min(o, n - 1);
            var u = t.leadingDigitsPatterns()[o];
            if (r.length < Nw)
              try {
                return new Dw(u).match(r, { allowOverflow: !0 }) !== void 0;
              } catch (h) {
                return console.error(h), !0;
              }
            return new RegExp("^(".concat(u, ")")).test(r);
          },
        },
        {
          key: "getFormatFormat",
          value: function (t, r) {
            return r ? t.internationalFormat() : t.format();
          },
        },
        {
          key: "chooseFormat",
          value: function (t) {
            for (
              var r = this,
                o = function () {
                  var b = u.value;
                  return r.chosenFormat === b
                    ? "break"
                    : EF.test(r.getFormatFormat(b, t.international))
                    ? r.createTemplateForFormat(b, t)
                      ? ((r.chosenFormat = b), "break")
                      : ((r.matchingFormats = r.matchingFormats.filter(
                          function (_) {
                            return _ !== b;
                          }
                        )),
                        "continue")
                    : "continue";
                },
                n = Lw(this.matchingFormats.slice()),
                u;
              !(u = n()).done;

            ) {
              var h = o();
              if (h === "break") break;
            }
            return this.chosenFormat || this.resetFormat(), this.chosenFormat;
          },
        },
        {
          key: "createTemplateForFormat",
          value: function (t, r) {
            if (!(Dm && t.pattern().indexOf("|") >= 0)) {
              var o = this.getTemplateForFormat(t, r);
              if (o) return this.setNationalNumberTemplate(o, r), !0;
            }
          },
        },
        {
          key: "getSeparatorAfterNationalPrefix",
          value: function (t) {
            return this.isNANP ||
              (t &&
                t.nationalPrefixFormattingRule() &&
                kF.test(t.nationalPrefixFormattingRule()))
              ? " "
              : "";
          },
        },
        {
          key: "getInternationalPrefixBeforeCountryCallingCode",
          value: function (t, r) {
            var o = t.IDDPrefix,
              n = t.missingPlus;
            return o ? (r && r.spacing === !1 ? o : o + " ") : n ? "" : "+";
          },
        },
        {
          key: "getTemplate",
          value: function (t) {
            if (this.template) {
              for (
                var r = -1,
                  o = 0,
                  n = t.international
                    ? this.getInternationalPrefixBeforeCountryCallingCode(t, {
                        spacing: !1,
                      })
                    : "";
                o < n.length + t.getDigitsWithoutInternationalPrefix().length;

              )
                (r = this.template.indexOf(ns, r + 1)), o++;
              return Fb(this.template, r + 1);
            }
          },
        },
        {
          key: "setNationalNumberTemplate",
          value: function (t, r) {
            (this.nationalNumberTemplate = t),
              (this.populatedNationalNumberTemplate = t),
              (this.populatedNationalNumberTemplatePosition = -1),
              r.international
                ? (this.template =
                    this.getInternationalPrefixBeforeCountryCallingCode(
                      r
                    ).replace(/[\d\+]/g, ns) +
                    $p(ns, r.callingCode.length) +
                    " " +
                    t)
                : (this.template = t);
          },
        },
        {
          key: "getTemplateForFormat",
          value: function (t, r) {
            var o = r.nationalSignificantNumber,
              n = r.international,
              u = r.nationalPrefix,
              h = r.complexPrefixBeforeNationalSignificantNumber,
              m = t.pattern();
            Dm && (m = m.replace(SF(), "\\d").replace(CF(), "\\d"));
            var b = wF.match(m)[0];
            if (!(o.length > b.length)) {
              var _ = new RegExp("^" + m + "$"),
                S = o.replace(/\d/g, Bb);
              _.test(S) && (b = S);
              var T = this.getFormatFormat(t, n),
                D;
              if (
                this.shouldTryNationalPrefixFormattingRule(t, {
                  international: n,
                  nationalPrefix: u,
                })
              ) {
                var F = T.replace(_b, t.nationalPrefixFormattingRule());
                if (
                  ul(t.nationalPrefixFormattingRule()) ===
                    (u || "") + ul("$1") &&
                  ((T = F), (D = !0), u)
                )
                  for (var q = u.length; q > 0; )
                    (T = T.replace(/\d/, ns)), q--;
              }
              var Q = b
                .replace(new RegExp(m), T)
                .replace(new RegExp(Bb, "g"), ns);
              return (
                D ||
                  (h
                    ? (Q = $p(ns, h.length) + " " + Q)
                    : u &&
                      (Q =
                        $p(ns, u.length) +
                        this.getSeparatorAfterNationalPrefix(t) +
                        Q)),
                n && (Q = Op(Q)),
                Q
              );
            }
          },
        },
        {
          key: "formatNextNationalNumberDigits",
          value: function (t) {
            var r = Sw(
              this.populatedNationalNumberTemplate,
              this.populatedNationalNumberTemplatePosition,
              t
            );
            if (!r) {
              this.resetFormat();
              return;
            }
            return (
              (this.populatedNationalNumberTemplate = r[0]),
              (this.populatedNationalNumberTemplatePosition = r[1]),
              Fb(
                this.populatedNationalNumberTemplate,
                this.populatedNationalNumberTemplatePosition + 1
              )
            );
          },
        },
        {
          key: "shouldTryNationalPrefixFormattingRule",
          value: function (t, r) {
            var o = r.international,
              n = r.nationalPrefix;
            if (t.nationalPrefixFormattingRule()) {
              var u = t.usesNationalPrefix();
              if ((u && n) || (!u && !o)) return !0;
            }
          },
        },
      ]),
      i
    );
  })();
function Uw(i, e) {
  return IF(i) || AF(i, e) || MF(i, e) || TF();
}
function TF() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function MF(i, e) {
  if (i) {
    if (typeof i == "string") return Bw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return Bw(i, e);
  }
}
function Bw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function AF(i, e) {
  var t =
    i == null
      ? null
      : (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t != null) {
    var r = [],
      o = !0,
      n = !1,
      u,
      h;
    try {
      for (
        t = t.call(i);
        !(o = (u = t.next()).done) && (r.push(u.value), !(e && r.length === e));
        o = !0
      );
    } catch (m) {
      (n = !0), (h = m);
    } finally {
      try {
        !o && t.return != null && t.return();
      } finally {
        if (n) throw h;
      }
    }
    return r;
  }
}
function IF(i) {
  if (Array.isArray(i)) return i;
}
function PF(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function Rw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function DF(i, e, t) {
  return (
    e && Rw(i.prototype, e),
    t && Rw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var LF = "[" + rs + Tn + "]+",
  FF = new RegExp("^" + LF + "$", "i"),
  zF = "(?:[" + cu + "][" + rs + Tn + "]*|[" + rs + Tn + "]+)",
  NF = new RegExp("[^" + rs + Tn + "]+.*$"),
  OF = /[^\d\[\]]/,
  Vw = (function () {
    function i(e) {
      var t = e.defaultCountry,
        r = e.defaultCallingCode,
        o = e.metadata,
        n = e.onNationalSignificantNumberChange;
      PF(this, i),
        (this.defaultCountry = t),
        (this.defaultCallingCode = r),
        (this.metadata = o),
        (this.onNationalSignificantNumberChange = n);
    }
    return (
      DF(i, [
        {
          key: "input",
          value: function (t, r) {
            var o = UF(t),
              n = Uw(o, 2),
              u = n[0],
              h = n[1],
              m = ul(u),
              b;
            return (
              h && (r.digits || (r.startInternationalNumber(), m || (b = !0))),
              m && this.inputDigits(m, r),
              { digits: m, justLeadingPlus: b }
            );
          },
        },
        {
          key: "inputDigits",
          value: function (t, r) {
            var o = r.digits,
              n = o.length < 3 && o.length + t.length >= 3;
            if (
              (r.appendDigits(t),
              n && this.extractIddPrefix(r),
              this.isWaitingForCountryCallingCode(r))
            ) {
              if (!this.extractCountryCallingCode(r)) return;
            } else r.appendNationalSignificantNumberDigits(t);
            r.international ||
              this.hasExtractedNationalSignificantNumber ||
              this.extractNationalSignificantNumber(
                r.getNationalDigits(),
                function (u) {
                  return r.update(u);
                }
              );
          },
        },
        {
          key: "isWaitingForCountryCallingCode",
          value: function (t) {
            var r = t.international,
              o = t.callingCode;
            return r && !o;
          },
        },
        {
          key: "extractCountryCallingCode",
          value: function (t) {
            var r = Vp(
                "+" + t.getDigitsWithoutInternationalPrefix(),
                this.defaultCountry,
                this.defaultCallingCode,
                this.metadata.metadata
              ),
              o = r.countryCallingCode,
              n = r.number;
            if (o)
              return (
                t.setCallingCode(o),
                t.update({ nationalSignificantNumber: n }),
                !0
              );
          },
        },
        {
          key: "reset",
          value: function (t) {
            if (t) {
              this.hasSelectedNumberingPlan = !0;
              var r = t._nationalPrefixForParsing();
              this.couldPossiblyExtractAnotherNationalSignificantNumber =
                r && OF.test(r);
            } else
              (this.hasSelectedNumberingPlan = void 0),
                (this.couldPossiblyExtractAnotherNationalSignificantNumber =
                  void 0);
          },
        },
        {
          key: "extractNationalSignificantNumber",
          value: function (t, r) {
            if (this.hasSelectedNumberingPlan) {
              var o = wd(t, this.metadata),
                n = o.nationalPrefix,
                u = o.nationalNumber,
                h = o.carrierCode;
              if (u !== t)
                return this.onExtractedNationalNumber(n, h, u, t, r), !0;
            }
          },
        },
        {
          key: "extractAnotherNationalSignificantNumber",
          value: function (t, r, o) {
            if (!this.hasExtractedNationalSignificantNumber)
              return this.extractNationalSignificantNumber(t, o);
            if (this.couldPossiblyExtractAnotherNationalSignificantNumber) {
              var n = wd(t, this.metadata),
                u = n.nationalPrefix,
                h = n.nationalNumber,
                m = n.carrierCode;
              if (h !== r)
                return this.onExtractedNationalNumber(u, m, h, t, o), !0;
            }
          },
        },
        {
          key: "onExtractedNationalNumber",
          value: function (t, r, o, n, u) {
            var h,
              m,
              b = n.lastIndexOf(o);
            if (b >= 0 && b === n.length - o.length) {
              m = !0;
              var _ = n.slice(0, b);
              _ !== t && (h = _);
            }
            u({
              nationalPrefix: t,
              carrierCode: r,
              nationalSignificantNumber: o,
              nationalSignificantNumberMatchesInput: m,
              complexPrefixBeforeNationalSignificantNumber: h,
            }),
              (this.hasExtractedNationalSignificantNumber = !0),
              this.onNationalSignificantNumberChange();
          },
        },
        {
          key: "reExtractNationalSignificantNumber",
          value: function (t) {
            if (
              this.extractAnotherNationalSignificantNumber(
                t.getNationalDigits(),
                t.nationalSignificantNumber,
                function (r) {
                  return t.update(r);
                }
              )
            )
              return !0;
            if (this.extractIddPrefix(t))
              return this.extractCallingCodeAndNationalSignificantNumber(t), !0;
            if (this.fixMissingPlus(t))
              return this.extractCallingCodeAndNationalSignificantNumber(t), !0;
          },
        },
        {
          key: "extractIddPrefix",
          value: function (t) {
            var r = t.international,
              o = t.IDDPrefix,
              n = t.digits,
              u = t.nationalSignificantNumber;
            if (!(r || o)) {
              var h = Rp(
                n,
                this.defaultCountry,
                this.defaultCallingCode,
                this.metadata.metadata
              );
              if (h !== void 0 && h !== n)
                return (
                  t.update({ IDDPrefix: n.slice(0, n.length - h.length) }),
                  this.startInternationalNumber(t, {
                    country: void 0,
                    callingCode: void 0,
                  }),
                  !0
                );
            }
          },
        },
        {
          key: "fixMissingPlus",
          value: function (t) {
            if (!t.international) {
              var r = Up(
                  t.digits,
                  this.defaultCountry,
                  this.defaultCallingCode,
                  this.metadata.metadata
                ),
                o = r.countryCallingCode,
                n = r.number;
              if (o)
                return (
                  t.update({ missingPlus: !0 }),
                  this.startInternationalNumber(t, {
                    country: t.country,
                    callingCode: o,
                  }),
                  !0
                );
            }
          },
        },
        {
          key: "startInternationalNumber",
          value: function (t, r) {
            var o = r.country,
              n = r.callingCode;
            t.startInternationalNumber(o, n),
              t.nationalSignificantNumber &&
                (t.resetNationalSignificantNumber(),
                this.onNationalSignificantNumberChange(),
                (this.hasExtractedNationalSignificantNumber = void 0));
          },
        },
        {
          key: "extractCallingCodeAndNationalSignificantNumber",
          value: function (t) {
            this.extractCountryCallingCode(t) &&
              this.extractNationalSignificantNumber(
                t.getNationalDigits(),
                function (r) {
                  return t.update(r);
                }
              );
          },
        },
      ]),
      i
    );
  })();
function BF(i) {
  var e = i.search(zF);
  if (!(e < 0)) {
    i = i.slice(e);
    var t;
    return (
      i[0] === "+" && ((t = !0), (i = i.slice(1))),
      (i = i.replace(NF, "")),
      t && (i = "+" + i),
      i
    );
  }
}
function RF(i) {
  var e = BF(i) || "";
  return e[0] === "+" ? [e.slice(1), !0] : [e];
}
function UF(i) {
  var e = RF(i),
    t = Uw(e, 2),
    r = t[0],
    o = t[1];
  return FF.test(r) || (r = ""), [r, o];
}
function VF(i, e) {
  return $F(i) || qF(i, e) || HF(i, e) || jF();
}
function jF() {
  throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function HF(i, e) {
  if (i) {
    if (typeof i == "string") return jw(i, e);
    var t = Object.prototype.toString.call(i).slice(8, -1);
    if (
      (t === "Object" && i.constructor && (t = i.constructor.name),
      t === "Map" || t === "Set")
    )
      return Array.from(i);
    if (t === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))
      return jw(i, e);
  }
}
function jw(i, e) {
  (e == null || e > i.length) && (e = i.length);
  for (var t = 0, r = new Array(e); t < e; t++) r[t] = i[t];
  return r;
}
function qF(i, e) {
  var t =
    i == null
      ? null
      : (typeof Symbol < "u" && i[Symbol.iterator]) || i["@@iterator"];
  if (t != null) {
    var r = [],
      o = !0,
      n = !1,
      u,
      h;
    try {
      for (
        t = t.call(i);
        !(o = (u = t.next()).done) && (r.push(u.value), !(e && r.length === e));
        o = !0
      );
    } catch (m) {
      (n = !0), (h = m);
    } finally {
      try {
        !o && t.return != null && t.return();
      } finally {
        if (n) throw h;
      }
    }
    return r;
  }
}
function $F(i) {
  if (Array.isArray(i)) return i;
}
function QF(i, e) {
  if (!(i instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function Hw(i, e) {
  for (var t = 0; t < e.length; t++) {
    var r = e[t];
    (r.enumerable = r.enumerable || !1),
      (r.configurable = !0),
      "value" in r && (r.writable = !0),
      Object.defineProperty(i, r.key, r);
  }
}
function GF(i, e, t) {
  return (
    e && Hw(i.prototype, e),
    t && Hw(i, t),
    Object.defineProperty(i, "prototype", { writable: !1 }),
    i
  );
}
var qw = !1,
  Lm = (function () {
    function i(e, t) {
      QF(this, i), (this.metadata = new ar(t));
      var r = this.getCountryAndCallingCode(e),
        o = VF(r, 2),
        n = o[0],
        u = o[1];
      (this.defaultCountry = n), (this.defaultCallingCode = u), this.reset();
    }
    return (
      GF(i, [
        {
          key: "getCountryAndCallingCode",
          value: function (t) {
            var r, o;
            return (
              t &&
                (cl(t)
                  ? ((r = t.defaultCountry), (o = t.defaultCallingCode))
                  : (r = t)),
              r && !this.metadata.hasCountry(r) && (r = void 0),
              o &&
                qw &&
                this.metadata.isNonGeographicCallingCode(o) &&
                (r = "001"),
              [r, o]
            );
          },
        },
        {
          key: "input",
          value: function (t) {
            var r = this.parser.input(t, this.state),
              o = r.digits,
              n = r.justLeadingPlus;
            if (n) this.formattedOutput = "+";
            else if (o) {
              this.determineTheCountryIfNeeded(),
                this.state.nationalSignificantNumber &&
                  this.formatter.narrowDownMatchingFormats(this.state);
              var u;
              if (
                (this.metadata.hasSelectedNumberingPlan() &&
                  (u = this.formatter.format(o, this.state)),
                u === void 0 &&
                  this.parser.reExtractNationalSignificantNumber(this.state))
              ) {
                this.determineTheCountryIfNeeded();
                var h = this.state.getNationalDigits();
                h && (u = this.formatter.format(h, this.state));
              }
              this.formattedOutput = u
                ? this.getFullNumber(u)
                : this.getNonFormattedNumber();
            }
            return this.formattedOutput;
          },
        },
        {
          key: "reset",
          value: function () {
            var t = this;
            return (
              (this.state = new ww({
                onCountryChange: function (o) {
                  t.country = o;
                },
                onCallingCodeChange: function (o, n) {
                  t.metadata.selectNumberingPlan(n, o),
                    t.formatter.reset(t.metadata.numberingPlan, t.state),
                    t.parser.reset(t.metadata.numberingPlan);
                },
              })),
              (this.formatter = new Ow({
                state: this.state,
                metadata: this.metadata,
              })),
              (this.parser = new Vw({
                defaultCountry: this.defaultCountry,
                defaultCallingCode: this.defaultCallingCode,
                metadata: this.metadata,
                state: this.state,
                onNationalSignificantNumberChange: function () {
                  t.determineTheCountryIfNeeded(),
                    t.formatter.reset(t.metadata.numberingPlan, t.state);
                },
              })),
              this.state.reset({
                country: this.defaultCountry,
                callingCode: this.defaultCallingCode,
              }),
              (this.formattedOutput = ""),
              this
            );
          },
        },
        {
          key: "isInternational",
          value: function () {
            return this.state.international;
          },
        },
        {
          key: "getCallingCode",
          value: function () {
            if (this.isInternational()) return this.state.callingCode;
          },
        },
        {
          key: "getCountryCallingCode",
          value: function () {
            return this.getCallingCode();
          },
        },
        {
          key: "getCountry",
          value: function () {
            var t = this.state.digits;
            if (t) return this._getCountry();
          },
        },
        {
          key: "_getCountry",
          value: function () {
            var t = this.state.country;
            if (!(qw && t === "001")) return t;
          },
        },
        {
          key: "determineTheCountryIfNeeded",
          value: function () {
            (!this.state.country || this.isCountryCallingCodeAmbiguous()) &&
              this.determineTheCountry();
          },
        },
        {
          key: "getFullNumber",
          value: function (t) {
            var r = this;
            if (this.isInternational()) {
              var o = function (h) {
                  return (
                    r.formatter.getInternationalPrefixBeforeCountryCallingCode(
                      r.state,
                      { spacing: !!h }
                    ) + h
                  );
                },
                n = this.state.callingCode;
              return o(
                n
                  ? t
                    ? "".concat(n, " ").concat(t)
                    : n
                  : "".concat(this.state.getDigitsWithoutInternationalPrefix())
              );
            }
            return t;
          },
        },
        {
          key: "getNonFormattedNationalNumberWithPrefix",
          value: function () {
            var t = this.state,
              r = t.nationalSignificantNumber,
              o = t.complexPrefixBeforeNationalSignificantNumber,
              n = t.nationalPrefix,
              u = r,
              h = o || n;
            return h && (u = h + u), u;
          },
        },
        {
          key: "getNonFormattedNumber",
          value: function () {
            var t = this.state.nationalSignificantNumberMatchesInput;
            return this.getFullNumber(
              t
                ? this.getNonFormattedNationalNumberWithPrefix()
                : this.state.getNationalDigits()
            );
          },
        },
        {
          key: "getNonFormattedTemplate",
          value: function () {
            var t = this.getNonFormattedNumber();
            if (t) return t.replace(/[\+\d]/g, ns);
          },
        },
        {
          key: "isCountryCallingCodeAmbiguous",
          value: function () {
            var t = this.state.callingCode,
              r = this.metadata.getCountryCodesForCallingCode(t);
            return r && r.length > 1;
          },
        },
        {
          key: "determineTheCountry",
          value: function () {
            this.state.setCountry(
              Hp(
                this.isInternational()
                  ? this.state.callingCode
                  : this.defaultCallingCode,
                {
                  nationalNumber: this.state.nationalSignificantNumber,
                  defaultCountry: this.defaultCountry,
                  metadata: this.metadata,
                }
              )
            );
          },
        },
        {
          key: "getNumberValue",
          value: function () {
            var t = this.state,
              r = t.digits,
              o = t.callingCode,
              n = t.country,
              u = t.nationalSignificantNumber;
            if (r) {
              if (this.isInternational()) return o ? "+" + o + u : "+" + r;
              if (n || o) {
                var h = n ? this.metadata.countryCallingCode() : o;
                return "+" + h + u;
              }
            }
          },
        },
        {
          key: "getNumber",
          value: function () {
            var t = this.state,
              r = t.nationalSignificantNumber,
              o = t.carrierCode,
              n = t.callingCode,
              u = this._getCountry();
            if (r && !(!u && !n)) {
              if (u && u === this.defaultCountry) {
                var h = new ar(this.metadata.metadata);
                h.selectNumberingPlan(u);
                var m = h.numberingPlan.callingCode(),
                  b = this.metadata.getCountryCodesForCallingCode(m);
                if (b.length > 1) {
                  var _ = jp(r, {
                    countries: b,
                    defaultCountry: this.defaultCountry,
                    metadata: this.metadata.metadata,
                  });
                  _ && (u = _);
                }
              }
              var S = new xd(u || n, r, this.metadata.metadata);
              return o && (S.carrierCode = o), S;
            }
          },
        },
        {
          key: "isPossible",
          value: function () {
            var t = this.getNumber();
            return t ? t.isPossible() : !1;
          },
        },
        {
          key: "isValid",
          value: function () {
            var t = this.getNumber();
            return t ? t.isValid() : !1;
          },
        },
        {
          key: "getNationalNumber",
          value: function () {
            return this.state.nationalSignificantNumber;
          },
        },
        {
          key: "getChars",
          value: function () {
            return (this.state.international ? "+" : "") + this.state.digits;
          },
        },
        {
          key: "getTemplate",
          value: function () {
            return (
              this.formatter.getTemplate(this.state) ||
              this.getNonFormattedTemplate() ||
              ""
            );
          },
        },
      ]),
      i
    );
  })();
function Fm(i, e, t) {
  if (e[i]) return new xd(i, e[i], t);
}
function zm() {
  return lu(qp, arguments);
}
function Sd(i) {
  return Lm.call(this, i, vd);
}
Sd.prototype = Object.create(Lm.prototype, {});
Sd.prototype.constructor = Sd;
function Rb() {
  return lu(Ia, arguments);
}
function Cd() {
  return ar.call(this, vd);
}
Cd.prototype = Object.create(ar.prototype, {});
Cd.prototype.constructor = Cd;
function Ub() {
  return lu(Fm, arguments);
}
var WF = [
    [
      "Afghanistan (\u202B\u0627\u0641\u063A\u0627\u0646\u0633\u062A\u0627\u0646\u202C\u200E)",
      "af",
      "93",
    ],
    ["Albania (Shqip\xEBri)", "al", "355"],
    [
      "Algeria (\u202B\u0627\u0644\u062C\u0632\u0627\u0626\u0631\u202C\u200E)",
      "dz",
      "213",
    ],
    ["American Samoa", "as", "1", 5, ["684"]],
    ["Andorra", "ad", "376"],
    ["Angola", "ao", "244"],
    ["Anguilla", "ai", "1", 6, ["264"]],
    ["Antigua and Barbuda", "ag", "1", 7, ["268"]],
    ["Argentina", "ar", "54"],
    ["Armenia (\u0540\u0561\u0575\u0561\u057D\u057F\u0561\u0576)", "am", "374"],
    ["Aruba", "aw", "297"],
    ["Ascension Island", "ac", "247"],
    ["Australia", "au", "61", 0],
    ["Austria (\xD6sterreich)", "at", "43"],
    ["Azerbaijan (Az\u0259rbaycan)", "az", "994"],
    ["Bahamas", "bs", "1", 8, ["242"]],
    [
      "Bahrain (\u202B\u0627\u0644\u0628\u062D\u0631\u064A\u0646\u202C\u200E)",
      "bh",
      "973",
    ],
    [
      "Bangladesh (\u09AC\u09BE\u0982\u09B2\u09BE\u09A6\u09C7\u09B6)",
      "bd",
      "880",
    ],
    ["Barbados", "bb", "1", 9, ["246"]],
    ["Belarus (\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u044C)", "by", "375"],
    ["Belgium (Belgi\xEB)", "be", "32"],
    ["Belize", "bz", "501"],
    ["Benin (B\xE9nin)", "bj", "229"],
    ["Bermuda", "bm", "1", 10, ["441"]],
    ["Bhutan (\u0F60\u0F56\u0FB2\u0F74\u0F42)", "bt", "975"],
    ["Bolivia", "bo", "591"],
    [
      "Bosnia and Herzegovina (\u0411\u043E\u0441\u043D\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043E\u0432\u0438\u043D\u0430)",
      "ba",
      "387",
    ],
    ["Botswana", "bw", "267"],
    ["Brazil (Brasil)", "br", "55"],
    ["British Indian Ocean Territory", "io", "246"],
    ["British Virgin Islands", "vg", "1", 11, ["284"]],
    ["Brunei", "bn", "673"],
    [
      "Bulgaria (\u0411\u044A\u043B\u0433\u0430\u0440\u0438\u044F)",
      "bg",
      "359",
    ],
    ["Burkina Faso", "bf", "226"],
    ["Burundi (Uburundi)", "bi", "257"],
    ["Cambodia (\u1780\u1798\u17D2\u1796\u17BB\u1787\u17B6)", "kh", "855"],
    ["Cameroon (Cameroun)", "cm", "237"],
    [
      "Canada",
      "ca",
      "1",
      1,
      [
        "204",
        "226",
        "236",
        "249",
        "250",
        "289",
        "306",
        "343",
        "365",
        "387",
        "403",
        "416",
        "418",
        "431",
        "437",
        "438",
        "450",
        "506",
        "514",
        "519",
        "548",
        "579",
        "581",
        "587",
        "604",
        "613",
        "639",
        "647",
        "672",
        "705",
        "709",
        "742",
        "778",
        "780",
        "782",
        "807",
        "819",
        "825",
        "867",
        "873",
        "902",
        "905",
      ],
    ],
    ["Cape Verde (Kabu Verdi)", "cv", "238"],
    ["Caribbean Netherlands", "bq", "599", 1, ["3", "4", "7"]],
    ["Cayman Islands", "ky", "1", 12, ["345"]],
    ["Central African Republic (R\xE9publique centrafricaine)", "cf", "236"],
    ["Chad (Tchad)", "td", "235"],
    ["Chile", "cl", "56"],
    ["China (\u4E2D\u56FD)", "cn", "86"],
    ["Christmas Island", "cx", "61", 2, ["89164"]],
    ["Cocos (Keeling) Islands", "cc", "61", 1, ["89162"]],
    ["Colombia", "co", "57"],
    [
      "Comoros (\u202B\u062C\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202C\u200E)",
      "km",
      "269",
    ],
    ["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)", "cd", "243"],
    ["Congo (Republic) (Congo-Brazzaville)", "cg", "242"],
    ["Cook Islands", "ck", "682"],
    ["Costa Rica", "cr", "506"],
    ["C\xF4te d\u2019Ivoire", "ci", "225"],
    ["Croatia (Hrvatska)", "hr", "385"],
    ["Cuba", "cu", "53"],
    ["Cura\xE7ao", "cw", "599", 0],
    ["Cyprus (\u039A\u03CD\u03C0\u03C1\u03BF\u03C2)", "cy", "357"],
    ["Czech Republic (\u010Cesk\xE1 republika)", "cz", "420"],
    ["Denmark (Danmark)", "dk", "45"],
    ["Djibouti", "dj", "253"],
    ["Dominica", "dm", "1", 13, ["767"]],
    [
      "Dominican Republic (Rep\xFAblica Dominicana)",
      "do",
      "1",
      2,
      ["809", "829", "849"],
    ],
    ["Ecuador", "ec", "593"],
    ["Egypt (\u202B\u0645\u0635\u0631\u202C\u200E)", "eg", "20"],
    ["El Salvador", "sv", "503"],
    ["Equatorial Guinea (Guinea Ecuatorial)", "gq", "240"],
    ["Eritrea", "er", "291"],
    ["Estonia (Eesti)", "ee", "372"],
    ["Eswatini", "sz", "268"],
    ["Ethiopia", "et", "251"],
    ["Falkland Islands (Islas Malvinas)", "fk", "500"],
    ["Faroe Islands (F\xF8royar)", "fo", "298"],
    ["Fiji", "fj", "679"],
    ["Finland (Suomi)", "fi", "358", 0],
    ["France", "fr", "33"],
    ["French Guiana (Guyane fran\xE7aise)", "gf", "594"],
    ["French Polynesia (Polyn\xE9sie fran\xE7aise)", "pf", "689"],
    ["Gabon", "ga", "241"],
    ["Gambia", "gm", "220"],
    [
      "Georgia (\u10E1\u10D0\u10E5\u10D0\u10E0\u10D7\u10D5\u10D4\u10DA\u10DD)",
      "ge",
      "995",
    ],
    ["Germany (Deutschland)", "de", "49"],
    ["Ghana (Gaana)", "gh", "233"],
    ["Gibraltar", "gi", "350"],
    ["Greece (\u0395\u03BB\u03BB\u03AC\u03B4\u03B1)", "gr", "30"],
    ["Greenland (Kalaallit Nunaat)", "gl", "299"],
    ["Grenada", "gd", "1", 14, ["473"]],
    ["Guadeloupe", "gp", "590", 0],
    ["Guam", "gu", "1", 15, ["671"]],
    ["Guatemala", "gt", "502"],
    ["Guernsey", "gg", "44", 1, ["1481", "7781", "7839", "7911"]],
    ["Guinea (Guin\xE9e)", "gn", "224"],
    ["Guinea-Bissau (Guin\xE9 Bissau)", "gw", "245"],
    ["Guyana", "gy", "592"],
    ["Haiti", "ht", "509"],
    ["Honduras", "hn", "504"],
    ["Hong Kong (\u9999\u6E2F)", "hk", "852"],
    ["Hungary (Magyarorsz\xE1g)", "hu", "36"],
    ["Iceland (\xCDsland)", "is", "354"],
    ["India (\u092D\u093E\u0930\u0924)", "in", "91"],
    ["Indonesia", "id", "62"],
    ["Iran (\u202B\u0627\u06CC\u0631\u0627\u0646\u202C\u200E)", "ir", "98"],
    [
      "Iraq (\u202B\u0627\u0644\u0639\u0631\u0627\u0642\u202C\u200E)",
      "iq",
      "964",
    ],
    ["Ireland", "ie", "353"],
    ["Isle of Man", "im", "44", 2, ["1624", "74576", "7524", "7924", "7624"]],
    ["Israel (\u202B\u05D9\u05E9\u05E8\u05D0\u05DC\u202C\u200E)", "il", "972"],
    ["Italy (Italia)", "it", "39", 0],
    ["Jamaica", "jm", "1", 4, ["876", "658"]],
    ["Japan (\u65E5\u672C)", "jp", "81"],
    ["Jersey", "je", "44", 3, ["1534", "7509", "7700", "7797", "7829", "7937"]],
    [
      "Jordan (\u202B\u0627\u0644\u0623\u0631\u062F\u0646\u202C\u200E)",
      "jo",
      "962",
    ],
    [
      "Kazakhstan (\u041A\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043D)",
      "kz",
      "7",
      1,
      ["33", "7"],
    ],
    ["Kenya", "ke", "254"],
    ["Kiribati", "ki", "686"],
    ["Kosovo", "xk", "383"],
    [
      "Kuwait (\u202B\u0627\u0644\u0643\u0648\u064A\u062A\u202C\u200E)",
      "kw",
      "965",
    ],
    [
      "Kyrgyzstan (\u041A\u044B\u0440\u0433\u044B\u0437\u0441\u0442\u0430\u043D)",
      "kg",
      "996",
    ],
    ["Laos (\u0EA5\u0EB2\u0EA7)", "la", "856"],
    ["Latvia (Latvija)", "lv", "371"],
    ["Lebanon (\u202B\u0644\u0628\u0646\u0627\u0646\u202C\u200E)", "lb", "961"],
    ["Lesotho", "ls", "266"],
    ["Liberia", "lr", "231"],
    ["Libya (\u202B\u0644\u064A\u0628\u064A\u0627\u202C\u200E)", "ly", "218"],
    ["Liechtenstein", "li", "423"],
    ["Lithuania (Lietuva)", "lt", "370"],
    ["Luxembourg", "lu", "352"],
    ["Macau (\u6FB3\u9580)", "mo", "853"],
    [
      "North Macedonia (\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0438\u0458\u0430)",
      "mk",
      "389",
    ],
    ["Madagascar (Madagasikara)", "mg", "261"],
    ["Malawi", "mw", "265"],
    ["Malaysia", "my", "60"],
    ["Maldives", "mv", "960"],
    ["Mali", "ml", "223"],
    ["Malta", "mt", "356"],
    ["Marshall Islands", "mh", "692"],
    ["Martinique", "mq", "596"],
    [
      "Mauritania (\u202B\u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627\u202C\u200E)",
      "mr",
      "222",
    ],
    ["Mauritius (Moris)", "mu", "230"],
    ["Mayotte", "yt", "262", 1, ["269", "639"]],
    ["Mexico (M\xE9xico)", "mx", "52"],
    ["Micronesia", "fm", "691"],
    ["Moldova (Republica Moldova)", "md", "373"],
    ["Monaco", "mc", "377"],
    ["Mongolia (\u041C\u043E\u043D\u0433\u043E\u043B)", "mn", "976"],
    ["Montenegro (Crna Gora)", "me", "382"],
    ["Montserrat", "ms", "1", 16, ["664"]],
    [
      "Morocco (\u202B\u0627\u0644\u0645\u063A\u0631\u0628\u202C\u200E)",
      "ma",
      "212",
      0,
    ],
    ["Mozambique (Mo\xE7ambique)", "mz", "258"],
    ["Myanmar (Burma) (\u1019\u103C\u1014\u103A\u1019\u102C)", "mm", "95"],
    ["Namibia (Namibi\xEB)", "na", "264"],
    ["Nauru", "nr", "674"],
    ["Nepal (\u0928\u0947\u092A\u093E\u0932)", "np", "977"],
    ["Netherlands (Nederland)", "nl", "31"],
    ["New Caledonia (Nouvelle-Cal\xE9donie)", "nc", "687"],
    ["New Zealand", "nz", "64"],
    ["Nicaragua", "ni", "505"],
    ["Niger (Nijar)", "ne", "227"],
    ["Nigeria", "ng", "234"],
    ["Niue", "nu", "683"],
    ["Norfolk Island", "nf", "672"],
    [
      "North Korea (\uC870\uC120 \uBBFC\uC8FC\uC8FC\uC758 \uC778\uBBFC \uACF5\uD654\uAD6D)",
      "kp",
      "850",
    ],
    ["Northern Mariana Islands", "mp", "1", 17, ["670"]],
    ["Norway (Norge)", "no", "47", 0],
    ["Oman (\u202B\u0639\u064F\u0645\u0627\u0646\u202C\u200E)", "om", "968"],
    [
      "Pakistan (\u202B\u067E\u0627\u06A9\u0633\u062A\u0627\u0646\u202C\u200E)",
      "pk",
      "92",
    ],
    ["Palau", "pw", "680"],
    [
      "Palestine (\u202B\u0641\u0644\u0633\u0637\u064A\u0646\u202C\u200E)",
      "ps",
      "970",
    ],
    ["Panama (Panam\xE1)", "pa", "507"],
    ["Papua New Guinea", "pg", "675"],
    ["Paraguay", "py", "595"],
    ["Peru (Per\xFA)", "pe", "51"],
    ["Philippines", "ph", "63"],
    ["Poland (Polska)", "pl", "48"],
    ["Portugal", "pt", "351"],
    ["Puerto Rico", "pr", "1", 3, ["787", "939"]],
    ["Qatar (\u202B\u0642\u0637\u0631\u202C\u200E)", "qa", "974"],
    ["R\xE9union (La R\xE9union)", "re", "262", 0],
    ["Romania (Rom\xE2nia)", "ro", "40"],
    ["Russia (\u0420\u043E\u0441\u0441\u0438\u044F)", "ru", "7", 0],
    ["Rwanda", "rw", "250"],
    ["Saint Barth\xE9lemy", "bl", "590", 1],
    ["Saint Helena", "sh", "290"],
    ["Saint Kitts and Nevis", "kn", "1", 18, ["869"]],
    ["Saint Lucia", "lc", "1", 19, ["758"]],
    ["Saint Martin (Saint-Martin (partie fran\xE7aise))", "mf", "590", 2],
    ["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)", "pm", "508"],
    ["Saint Vincent and the Grenadines", "vc", "1", 20, ["784"]],
    ["Samoa", "ws", "685"],
    ["San Marino", "sm", "378"],
    [
      "S\xE3o Tom\xE9 and Pr\xEDncipe (S\xE3o Tom\xE9 e Pr\xEDncipe)",
      "st",
      "239",
    ],
    [
      "Saudi Arabia (\u202B\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629\u202C\u200E)",
      "sa",
      "966",
    ],
    ["Senegal (S\xE9n\xE9gal)", "sn", "221"],
    ["Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)", "rs", "381"],
    ["Seychelles", "sc", "248"],
    ["Sierra Leone", "sl", "232"],
    ["Singapore", "sg", "65"],
    ["Sint Maarten", "sx", "1", 21, ["721"]],
    ["Slovakia (Slovensko)", "sk", "421"],
    ["Slovenia (Slovenija)", "si", "386"],
    ["Solomon Islands", "sb", "677"],
    ["Somalia (Soomaaliya)", "so", "252"],
    ["South Africa", "za", "27"],
    ["South Korea (\uB300\uD55C\uBBFC\uAD6D)", "kr", "82"],
    [
      "South Sudan (\u202B\u062C\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062F\u0627\u0646\u202C\u200E)",
      "ss",
      "211",
    ],
    ["Spain (Espa\xF1a)", "es", "34"],
    [
      "Sri Lanka (\u0DC1\u0DCA\u200D\u0DBB\u0DD3 \u0DBD\u0D82\u0D9A\u0DCF\u0DC0)",
      "lk",
      "94",
    ],
    [
      "Sudan (\u202B\u0627\u0644\u0633\u0648\u062F\u0627\u0646\u202C\u200E)",
      "sd",
      "249",
    ],
    ["Suriname", "sr", "597"],
    ["Svalbard and Jan Mayen", "sj", "47", 1, ["79"]],
    ["Sweden (Sverige)", "se", "46"],
    ["Switzerland (Schweiz)", "ch", "41"],
    ["Syria (\u202B\u0633\u0648\u0631\u064A\u0627\u202C\u200E)", "sy", "963"],
    ["Taiwan (\u53F0\u7063)", "tw", "886"],
    ["Tajikistan", "tj", "992"],
    ["Tanzania", "tz", "255"],
    ["Thailand (\u0E44\u0E17\u0E22)", "th", "66"],
    ["Timor-Leste", "tl", "670"],
    ["Togo", "tg", "228"],
    ["Tokelau", "tk", "690"],
    ["Tonga", "to", "676"],
    ["Trinidad and Tobago", "tt", "1", 22, ["868"]],
    ["Tristan da Cunha", "ta", "290"],
    ["Tunisia (\u202B\u062A\u0648\u0646\u0633\u202C\u200E)", "tn", "216"],
    ["Turkey (T\xFCrkiye)", "tr", "90"],
    ["Turkmenistan", "tm", "993"],
    ["Turks and Caicos Islands", "tc", "1", 23, ["649"]],
    ["Tuvalu", "tv", "688"],
    ["U.S. Virgin Islands", "vi", "1", 24, ["340"]],
    ["Uganda", "ug", "256"],
    ["Ukraine (\u0423\u043A\u0440\u0430\u0457\u043D\u0430)", "ua", "380"],
    [
      "United Arab Emirates (\u202B\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u062A\u062D\u062F\u0629\u202C\u200E)",
      "ae",
      "971",
    ],
    ["United Kingdom", "gb", "44", 0],
    ["United States", "us", "1", 0],
    ["Uruguay", "uy", "598"],
    ["Uzbekistan (O\u02BBzbekiston)", "uz", "998"],
    ["Vanuatu", "vu", "678"],
    ["Vatican City (Citt\xE0 del Vaticano)", "va", "39", 1, ["06698"]],
    ["Venezuela", "ve", "58"],
    ["Vietnam (Vi\u1EC7t Nam)", "vn", "84"],
    ["Wallis and Futuna (Wallis-et-Futuna)", "wf", "681"],
    [
      "Western Sahara (\u202B\u0627\u0644\u0635\u062D\u0631\u0627\u0621 \u0627\u0644\u063A\u0631\u0628\u064A\u0629\u202C\u200E)",
      "eh",
      "212",
      1,
      ["5288", "5289"],
    ],
    ["Yemen (\u202B\u0627\u0644\u064A\u0645\u0646\u202C\u200E)", "ye", "967"],
    ["Zambia", "zm", "260"],
    ["Zimbabwe", "zw", "263"],
    ["\xC5land Islands", "ax", "358", 1, ["18"]],
  ],
  Ed = WF.map((i) => ({
    id: i[1].toUpperCase(),
    label: `${i[0]} +${i[2]}`,
    name: i[0],
    iso2: i[1].toUpperCase(),
    dialCode: i[2],
    priority: i[3] || 0,
    areaCodes: i[4] || null,
  }));
var Vb = {
  AC: "40123",
  AD: "312345",
  AE: "501234567",
  AF: "701234567",
  AG: "2684641234",
  AI: "2642351234",
  AL: "672123456",
  AM: "77123456",
  AO: "923123456",
  AR: "91123456789",
  AS: "6847331234",
  AT: "664123456",
  AU: "412345678",
  AW: "5601234",
  AX: "412345678",
  AZ: "401234567",
  BA: "61123456",
  BB: "2462501234",
  BD: "1812345678",
  BE: "470123456",
  BF: "70123456",
  BG: "43012345",
  BH: "36001234",
  BI: "79561234",
  BJ: "90011234",
  BL: "690001234",
  BM: "4413701234",
  BN: "7123456",
  BO: "71234567",
  BQ: "3181234",
  BR: "11961234567",
  BS: "2423591234",
  BT: "17123456",
  BW: "71123456",
  BY: "294911911",
  BZ: "6221234",
  CA: "5062345678",
  CC: "412345678",
  CD: "991234567",
  CF: "70012345",
  CG: "061234567",
  CH: "781234567",
  CI: "0123456789",
  CK: "71234",
  CL: "221234567",
  CM: "671234567",
  CN: "13123456789",
  CO: "3211234567",
  CR: "83123456",
  CU: "51234567",
  CV: "9911234",
  CW: "95181234",
  CX: "412345678",
  CY: "96123456",
  CZ: "601123456",
  DE: "15123456789",
  DJ: "77831001",
  DK: "32123456",
  DM: "7672251234",
  DO: "8092345678",
  DZ: "551234567",
  EC: "991234567",
  EE: "51234567",
  EG: "1001234567",
  EH: "650123456",
  ER: "7123456",
  ES: "612345678",
  ET: "911234567",
  FI: "412345678",
  FJ: "7012345",
  FK: "51234",
  FM: "3501234",
  FO: "211234",
  FR: "612345678",
  GA: "06031234",
  GB: "7400123456",
  GD: "4734031234",
  GE: "555123456",
  GF: "694201234",
  GG: "7781123456",
  GH: "231234567",
  GI: "57123456",
  GL: "221234",
  GM: "3012345",
  GN: "601123456",
  GP: "690001234",
  GQ: "222123456",
  GR: "6912345678",
  GT: "51234567",
  GU: "6713001234",
  GW: "955012345",
  GY: "6091234",
  HK: "51234567",
  HN: "91234567",
  HR: "921234567",
  HT: "34101234",
  HU: "201234567",
  ID: "812345678",
  IE: "850123456",
  IL: "502345678",
  IM: "7924123456",
  IN: "8123456789",
  IO: "3801234",
  IQ: "7912345678",
  IR: "9123456789",
  IS: "6111234",
  IT: "3123456789",
  JE: "7797712345",
  JM: "8762101234",
  JO: "790123456",
  JP: "9012345678",
  KE: "712123456",
  KG: "700123456",
  KH: "91234567",
  KI: "72001234",
  KM: "3212345",
  KN: "8697652917",
  KP: "1921234567",
  KR: "1020000000",
  KW: "50012345",
  KY: "3453231234",
  KZ: "7710009998",
  LA: "2023123456",
  LB: "71123456",
  LC: "7582845678",
  LI: "660234567",
  LK: "712345678",
  LR: "770123456",
  LS: "50123456",
  LT: "61234567",
  LU: "628123456",
  LV: "21234567",
  LY: "912345678",
  MA: "650123456",
  MC: "612345678",
  MD: "62112345",
  ME: "67622901",
  MF: "690001234",
  MG: "321234567",
  MH: "2351234",
  MK: "72345678",
  ML: "65012345",
  MM: "92123456",
  MN: "88123456",
  MO: "66123456",
  MP: "6702345678",
  MQ: "696201234",
  MR: "22123456",
  MS: "6644923456",
  MT: "96961234",
  MU: "52512345",
  MV: "7712345",
  MW: "991234567",
  MX: "12221234567",
  MY: "123456789",
  MZ: "821234567",
  NA: "811234567",
  NC: "751234",
  NE: "93123456",
  NF: "381234",
  NG: "8021234567",
  NI: "81234567",
  NL: "612345678",
  NO: "40612345",
  NP: "9841234567",
  NR: "5551234",
  NU: "8884012",
  NZ: "211234567",
  OM: "92123456",
  PA: "61234567",
  PE: "912345678",
  PF: "87123456",
  PG: "70123456",
  PH: "9051234567",
  PK: "3012345678",
  PL: "512345678",
  PM: "551234",
  PR: "7872345678",
  PS: "599123456",
  PT: "912345678",
  PW: "6201234",
  PY: "961456789",
  QA: "33123456",
  RE: "692123456",
  RO: "712034567",
  RS: "601234567",
  RU: "9123456789",
  RW: "720123456",
  SA: "512345678",
  SB: "7421234",
  SC: "2510123",
  SD: "911231234",
  SE: "701234567",
  SG: "81234567",
  SH: "51234",
  SI: "31234567",
  SJ: "41234567",
  SK: "912123456",
  SL: "25123456",
  SM: "66661212",
  SN: "701234567",
  SO: "71123456",
  SR: "7412345",
  SS: "977123456",
  ST: "9812345",
  SV: "70123456",
  SX: "7215205678",
  SY: "944567890",
  SZ: "76123456",
  TA: "8999",
  TC: "6492311234",
  TD: "63012345",
  TG: "90112345",
  TH: "812345678",
  TJ: "917123456",
  TK: "7290",
  TL: "77212345",
  TM: "66123456",
  TN: "20123456",
  TO: "7715123",
  TR: "5012345678",
  TT: "8682911234",
  TV: "901234",
  TW: "912345678",
  TZ: "621234567",
  UA: "501234567",
  UG: "712345678",
  US: "2015550123",
  UY: "94231234",
  UZ: "912345678",
  VA: "3123456789",
  VC: "7844301234",
  VE: "4121234567",
  VG: "2843001234",
  VI: "3406421234",
  VN: "912345678",
  VU: "5912345",
  WF: "821234",
  WS: "7212345",
  XK: "43201234",
  YE: "712345678",
  YT: "639012345",
  ZA: "711234567",
  ZM: "955123456",
  ZW: "712345678",
};
var jb = (i) =>
    Object.fromEntries(
      Object.entries({
        countryCode: i ? i.country : null,
        isValid: i ? i.isValid() : !1,
        isPossible: i ? i.isPossible() : !1,
        phoneNumber: i ? i.number : null,
        countryCallingCode: i ? i.countryCallingCode : null,
        formattedNumber: i ? i.formatInternational() : null,
        nationalNumber: i ? i.nationalNumber : null,
        formatInternational: i ? i.formatInternational() : null,
        formatOriginal: i
          ? i
              .formatInternational()
              .slice(i.countryCallingCode.length + 1)
              .trim()
          : null,
        formatNational: i ? i.formatNational() : null,
        uri: i ? i.getURI() : null,
        e164: i ? i.number : null,
      }).filter(([, t]) => t !== null)
    ),
  $w = (i, { format: e, spaces: t } = { format: "national", spaces: !0 }) => {
    let r = Ub(i, Vb);
    if (r)
      switch (e) {
        case "international":
          return t ? r.formatInternational() : r.number;
        default:
          return t
            ? r
                .formatInternational()
                .slice(r.countryCallingCode.length + 1)
                .trim()
            : r.nationalNumber;
      }
    else throw new Error(`No country found with this country code: ${i}`);
  };
var ZF = (i) => {
  let e = /^\d+$/,
    t = "+" + Rb(i),
    o = new Cd().numberingPlan?.leadingDigits();
  return o && e.test(o) && (t += o), t;
};
var Nm = (i, { country: e, countries: t, required: r } = {}) => {
    if (i === "+") return e;
    let o = KF(i);
    return o && (!t || t.indexOf(o) >= 0)
      ? o
      : e && !r && !JF(i, e)
      ? void 0
      : e;
  },
  KF = (i) => {
    let e = new Sd();
    return e.input(i), e.getCountry();
  };
var JF = (i, e) => {
  let t = ZF(e),
    r = 0;
  for (; r < i.length && r < t.length; ) {
    if (i[r] !== t[r]) return !1;
    r++;
  }
  return !0;
};
var XF = (i, { spaces: e } = { spaces: !0 }) => {
    let t = {
      0: "0",
      1: "1",
      2: "2",
      3: "3",
      4: "4",
      5: "5",
      6: "6",
      7: "7",
      8: "8",
      9: "9",
      "\uFF10": "0",
      "\uFF11": "1",
      "\uFF12": "2",
      "\uFF13": "3",
      "\uFF14": "4",
      "\uFF15": "5",
      "\uFF16": "6",
      "\uFF17": "7",
      "\uFF18": "8",
      "\uFF19": "9",
      "\u0660": "0",
      "\u0661": "1",
      "\u0662": "2",
      "\u0663": "3",
      "\u0664": "4",
      "\u0665": "5",
      "\u0666": "6",
      "\u0667": "7",
      "\u0668": "8",
      "\u0669": "9",
      "\u06F0": "0",
      "\u06F1": "1",
      "\u06F2": "2",
      "\u06F3": "3",
      "\u06F4": "4",
      "\u06F5": "5",
      "\u06F6": "6",
      "\u06F7": "7",
      "\u06F8": "8",
      "\u06F9": "9",
    };
    return e &&
      new RegExp(
        "[\\t\\n\\v\\f\\r \\u00a0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u3000]",
        "g"
      ).test(i)
      ? i
      : t[i];
  },
  Hb = (i, { allowSpaces: e, parseCharacter: t }) => {
    let r = "";
    for (let o = 0; o < i.length; o++) {
      let n = t(i[o], r, e);
      n !== void 0 && (r += n);
    }
    return r;
  },
  qb = (i, e, t) => (i === "+" && !e ? i : XF(i, { spaces: t }));
var Qw = (i, { handler: e, spaces: t }) => {
  let r = (o) => {
    if (i && i.contains(o.target)) {
      let n = o.target.value,
        u = Hb(n, { parseCharacter: qb, allowSpaces: t });
      (i.value = u), e(u);
    }
  };
  return (
    i.addEventListener("input", r, !0),
    {
      update(o) {
        (o.value === null || o.value === "") && (i.value = "");
      },
      destroy() {
        i.removeEventListener("input", r, !0);
      },
    }
  );
};
var Gw = (i, e) => {
  let { subscribe: t, update: r } = cn(i);
  return {
    subscribe: t,
    set: (o) => {
      r((n) => (e(n, o), o));
    },
  };
};
function YF(i) {
  let e, t, r, o;
  return {
    c() {
      (e = Je("input")),
        J(e, "autocomplete", i[1]),
        J(e, "class", i[2]),
        (e.disabled = i[3]),
        J(e, "id", i[4]),
        J(e, "name", i[5]),
        (e.readOnly = i[6]),
        (e.required = i[7]),
        J(e, "size", i[8]),
        J(e, "placeholder", i[10]),
        J(e, "type", "tel"),
        (e.value = i[9]);
    },
    m(n, u) {
      Ne(n, e, u),
        r ||
          ((o = [
            Mt(e, "beforeinput", i[19]),
            Mt(e, "blur", i[20]),
            Mt(e, "change", i[21]),
            Mt(e, "click", i[22]),
            Mt(e, "focus", i[23]),
            Mt(e, "input", i[24]),
            Mt(e, "keydown", i[25]),
            Mt(e, "keypress", i[26]),
            Mt(e, "keyup", i[27]),
            Mt(e, "paste", i[28]),
            Qh(
              (t = Qw.call(null, e, {
                handler: i[12],
                spaces: i[11].spaces,
                value: i[0],
              }))
            ),
          ]),
          (r = !0));
    },
    p(n, u) {
      u[0] & 2 && J(e, "autocomplete", n[1]),
        u[0] & 4 && J(e, "class", n[2]),
        u[0] & 8 && (e.disabled = n[3]),
        u[0] & 16 && J(e, "id", n[4]),
        u[0] & 32 && J(e, "name", n[5]),
        u[0] & 64 && (e.readOnly = n[6]),
        u[0] & 128 && (e.required = n[7]),
        u[0] & 256 && J(e, "size", n[8]),
        u[0] & 1024 && J(e, "placeholder", n[10]),
        u[0] & 512 && e.value !== n[9] && (e.value = n[9]),
        t &&
          zo(t.update) &&
          u[0] & 1 &&
          t.update.call(null, {
            handler: n[12],
            spaces: n[11].spaces,
            value: n[0],
          });
    },
    i: yt,
    o: yt,
    d(n) {
      n && ze(e), (r = !1), gr(o);
    },
  };
}
function ez(i, e, t) {
  let r,
    o,
    n = yo(),
    u = {
      autoPlaceholder: !0,
      spaces: !0,
      invalidateOnCountryChange: !1,
      format: "national",
    },
    { autocomplete: h = null } = e,
    { class: m = "" } = e,
    { disabled: b = !1 } = e,
    {
      id: _ = "phone-input-" +
        new Date().getTime().toString(36) +
        Math.random().toString(36).slice(2),
    } = e,
    { name: S = null } = e,
    { placeholder: T = null } = e,
    { readonly: D = null } = e,
    { required: F = null } = e,
    { size: q = null } = e,
    { value: Q } = e,
    { country: te } = e,
    { detailedValue: ce = null } = e,
    { valid: be = !0 } = e,
    { options: Y = u } = e,
    Ie = Q,
    Te = te,
    fe = { ...u, ...Y },
    Le = (Ce) => {
      b || D || st(Ce, te);
    },
    De = (Ce) => (
      Ce !== te && (t(14, (te = Ce)), (Te = te), n("updateCountry", te)), te
    ),
    st = (Ce, Bt = null) => {
      if (Ce !== null) {
        let ei = Nm(Ce);
        ei && ei !== Te && De(ei);
        try {
          t(15, (ce = jb(zm(Ce, ei ?? Bt ?? void 0))));
        } catch (ii) {
          if (ii instanceof ps)
            t(15, (ce = { isValid: !1, error: ii.message })),
              n("parseError", ii.message);
          else throw ii;
        }
        let Li = fe.format === "national" ? "nationalNumber" : "e164",
          it =
            fe.format === "national" ? "formatOriginal" : "formatInternational";
        fe.spaces && ce?.[it]
          ? t(9, (Ie = ce[it] ?? null))
          : ce?.[Li] && t(9, (Ie = ce[Li] ?? null)),
          t(0, (Q = ce?.e164 ?? Ce ?? null)),
          t(16, (be = ce?.isValid ?? !1)),
          n("updateValid", be),
          n("updateValue", Q),
          n("updateDetailedValue", ce);
      } else
        Ce === null && Bt !== null
          ? Bt !== Te &&
            ((Te = Bt),
            t(16, (be = !Y.invalidateOnCountryChange)),
            t(0, (Q = null)),
            t(9, (Ie = null)),
            t(15, (ce = null)),
            n("updateValid", be),
            n("updateValue", Q),
            n("updateDetailedValue", ce))
          : (t(16, (be = !0)),
            t(0, (Q = null)),
            t(15, (ce = null)),
            (Te = Bt),
            n("updateValid", be),
            n("updateDetailedValue", ce),
            t(9, (Ie = null)));
    },
    qe = !0,
    Rt = Gw(null, () => {
      qe || st(null, te), (qe = !1);
    });
  Di(i, Rt, (Ce) => t(31, (o = Ce))),
    Ur(() => {
      Q && st(Q, Nm(Q) || te);
    });
  function Gt(Ce) {
    Vi.call(this, i, Ce);
  }
  function qt(Ce) {
    Vi.call(this, i, Ce);
  }
  function ct(Ce) {
    Vi.call(this, i, Ce);
  }
  function vt(Ce) {
    Vi.call(this, i, Ce);
  }
  function ht(Ce) {
    Vi.call(this, i, Ce);
  }
  function Vt(Ce) {
    Vi.call(this, i, Ce);
  }
  function hi(Ce) {
    Vi.call(this, i, Ce);
  }
  function Pi(Ce) {
    Vi.call(this, i, Ce);
  }
  function Zt(Ce) {
    Vi.call(this, i, Ce);
  }
  function Re(Ce) {
    Vi.call(this, i, Ce);
  }
  return (
    (i.$$set = (Ce) => {
      "autocomplete" in Ce && t(1, (h = Ce.autocomplete)),
        "class" in Ce && t(2, (m = Ce.class)),
        "disabled" in Ce && t(3, (b = Ce.disabled)),
        "id" in Ce && t(4, (_ = Ce.id)),
        "name" in Ce && t(5, (S = Ce.name)),
        "placeholder" in Ce && t(17, (T = Ce.placeholder)),
        "readonly" in Ce && t(6, (D = Ce.readonly)),
        "required" in Ce && t(7, (F = Ce.required)),
        "size" in Ce && t(8, (q = Ce.size)),
        "value" in Ce && t(0, (Q = Ce.value)),
        "country" in Ce && t(14, (te = Ce.country)),
        "detailedValue" in Ce && t(15, (ce = Ce.detailedValue)),
        "valid" in Ce && t(16, (be = Ce.valid)),
        "options" in Ce && t(18, (Y = Ce.options));
    }),
    (i.$$.update = () => {
      i.$$.dirty[0] & 16384 && Cn(Rt, (o = te), o),
        i.$$.dirty[0] & 147456 &&
          t(
            10,
            (r =
              fe.autoPlaceholder && te
                ? $w(te, { format: fe.format, spaces: fe.spaces })
                : T)
          ),
        i.$$.dirty[0] & 33281 &&
          Q === null &&
          Ie !== null &&
          ce !== null &&
          (t(9, (Ie = null)), t(15, (ce = null)), n("updateDetailedValue", ce));
    }),
    [
      Q,
      h,
      m,
      b,
      _,
      S,
      D,
      F,
      q,
      Ie,
      r,
      fe,
      Le,
      Rt,
      te,
      ce,
      be,
      T,
      Y,
      Gt,
      qt,
      ct,
      vt,
      ht,
      Vt,
      hi,
      Pi,
      Zt,
      Re,
    ]
  );
}
var $b = class extends dt {
    constructor(e) {
      super(),
        gt(
          this,
          e,
          ez,
          YF,
          ut,
          {
            autocomplete: 1,
            class: 2,
            disabled: 3,
            id: 4,
            name: 5,
            placeholder: 17,
            readonly: 6,
            required: 7,
            size: 8,
            value: 0,
            country: 14,
            detailedValue: 15,
            valid: 16,
            options: 18,
          },
          null,
          [-1, -1]
        );
    }
  },
  Qb = $b;
function Ww(i, e, t) {
  let r = i.slice();
  return (r[22] = e[t]), r;
}
function Zw(i, e) {
  let t,
    r = e[22].iso2 + "",
    o,
    n,
    u = e[22].dialCode + "",
    h,
    m,
    b,
    _,
    S;
  return {
    key: i,
    first: null,
    c() {
      (t = Je("option")),
        (o = Xi(r)),
        (n = Xi(" (+")),
        (h = Xi(u)),
        (m = Xi(`)
      `)),
        (t.__value = b = e[22].iso2),
        zs(t, t.__value),
        (t.selected = _ = e[22].iso2 === e[3]),
        J(t, "aria-selected", (S = e[22].iso2 === e[3])),
        (this.first = t);
    },
    m(T, D) {
      Ne(T, t, D), He(t, o), He(t, n), He(t, h), He(t, m);
    },
    p(T, D) {
      (e = T),
        D & 8 && _ !== (_ = e[22].iso2 === e[3]) && (t.selected = _),
        D & 8 && S !== (S = e[22].iso2 === e[3]) && J(t, "aria-selected", S);
    },
    d(T) {
      T && ze(t);
    },
  };
}
function Kw(i) {
  let e, t, r, o, n;
  return {
    c() {
      (e = Je("input")),
        (r = Ot()),
        (o = Je("input")),
        J(e, "type", "hidden"),
        J(e, "name", i[7]),
        (e.value = t = i[2].e164),
        J(o, "type", "hidden"),
        J(o, "name", i[8]),
        (o.value = n = i[2].countryCode);
    },
    m(u, h) {
      Ne(u, e, h), Ne(u, r, h), Ne(u, o, h);
    },
    p(u, h) {
      h & 128 && J(e, "name", u[7]),
        h & 4 && t !== (t = u[2].e164) && (e.value = t),
        h & 256 && J(o, "name", u[8]),
        h & 4 && n !== (n = u[2].countryCode) && (o.value = n);
    },
    d(u) {
      u && (ze(e), ze(r), ze(o));
    },
  };
}
function tz(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h = [],
    m = new Map(),
    b,
    _,
    S,
    T,
    D,
    F,
    q,
    Q,
    te,
    ce,
    be,
    Y,
    Ie,
    Te = On(Ed),
    fe = (ct) => ct[22].id;
  for (let ct = 0; ct < Te.length; ct += 1) {
    let vt = Ww(i, Te, ct),
      ht = fe(vt);
    m.set(ht, (h[ct] = Zw(ht, vt)));
  }
  function Le(ct) {
    i[13](ct);
  }
  function De(ct) {
    i[14](ct);
  }
  function st(ct) {
    i[15](ct);
  }
  function qe(ct) {
    i[16](ct);
  }
  function zt(ct) {
    i[17](ct);
  }
  function Rt(ct) {
    i[18](ct);
  }
  let Gt = {
    required: !0,
    options: i[6],
    class:
      `bg-gray-50  text-gray-900 text-xs sm:text-sm 
    block p-2.5 dark:bg-gray-700  dark:placeholder-gray-400
  dark:text-white 
     rounded-r-lg w-full ` +
      (i[1]
        ? "border border-gray-300 border-l-gray-100 dark:border-l-gray-700 dark:border-gray-600"
        : "border-2 border-red-600"),
  };
  i[3] !== void 0 && (Gt.country = i[3]),
    i[1] !== void 0 && (Gt.valid = i[1]),
    i[0] !== void 0 && (Gt.value = i[0]),
    i[2] !== void 0 && (Gt.detailedValue = i[2]),
    i[4] !== void 0 && (Gt.disabled = i[4]),
    i[5] !== void 0 && (Gt.readonly = i[5]),
    (_ = new Qb({ props: Gt })),
    Bi.push(() => Gr(_, "country", Le)),
    Bi.push(() => Gr(_, "valid", De)),
    Bi.push(() => Gr(_, "value", st)),
    Bi.push(() => Gr(_, "detailedValue", qe)),
    Bi.push(() => Gr(_, "disabled", zt)),
    Bi.push(() => Gr(_, "readonly", Rt));
  let qt = i[9] && i[2] && Kw(i);
  return {
    c() {
      (e = Je("div")),
        (t = Je("select")),
        (r = Je("option")),
        (o = Xi("Country"));
      for (let ct = 0; ct < h.length; ct += 1) h[ct].c();
      (b = Ot()),
        Yt(_.$$.fragment),
        (te = Ot()),
        qt && qt.c(),
        (ce = Ji()),
        (r.__value = n = null),
        zs(r, r.__value),
        (r.hidden = u = i[3] !== null),
        J(
          t,
          "class",
          "form-select appearance-none w-24 sm:w-40 bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 bg-clip-padding bg-no-repeat cursor-pointer rounded-l-lg m-0 focus:outline-none"
        ),
        J(t, "aria-label", "Default select example"),
        J(t, "name", "Country"),
        i[3] === void 0 && _a(() => i[12].call(t)),
        J(e, "class", "flex w-full");
    },
    m(ct, vt) {
      Ne(ct, e, vt), He(e, t), He(t, r), He(r, o);
      for (let ht = 0; ht < h.length; ht += 1) h[ht] && h[ht].m(t, null);
      og(t, i[3], !0),
        He(e, b),
        Jt(_, e, null),
        Ne(ct, te, vt),
        qt && qt.m(ct, vt),
        Ne(ct, ce, vt),
        (be = !0),
        Y || ((Ie = Mt(t, "change", i[12])), (Y = !0));
    },
    p(ct, [vt]) {
      (!be || (vt & 8 && u !== (u = ct[3] !== null))) && (r.hidden = u),
        vt & 8 &&
          ((Te = On(Ed)),
          (h = Kh(h, vt, fe, 1, ct, Te, m, t, a5, Zw, null, Ww))),
        vt & 8 && og(t, ct[3]);
      let ht = {};
      vt & 64 && (ht.options = ct[6]),
        vt & 2 &&
          (ht.class =
            `bg-gray-50  text-gray-900 text-xs sm:text-sm 
    block p-2.5 dark:bg-gray-700  dark:placeholder-gray-400
  dark:text-white 
     rounded-r-lg w-full ` +
            (ct[1]
              ? "border border-gray-300 border-l-gray-100 dark:border-l-gray-700 dark:border-gray-600"
              : "border-2 border-red-600")),
        !S && vt & 8 && ((S = !0), (ht.country = ct[3]), Qr(() => (S = !1))),
        !T && vt & 2 && ((T = !0), (ht.valid = ct[1]), Qr(() => (T = !1))),
        !D && vt & 1 && ((D = !0), (ht.value = ct[0]), Qr(() => (D = !1))),
        !F &&
          vt & 4 &&
          ((F = !0), (ht.detailedValue = ct[2]), Qr(() => (F = !1))),
        !q && vt & 16 && ((q = !0), (ht.disabled = ct[4]), Qr(() => (q = !1))),
        !Q && vt & 32 && ((Q = !0), (ht.readonly = ct[5]), Qr(() => (Q = !1))),
        _.$set(ht),
        ct[9] && ct[2]
          ? qt
            ? qt.p(ct, vt)
            : ((qt = Kw(ct)), qt.c(), qt.m(ce.parentNode, ce))
          : qt && (qt.d(1), (qt = null));
    },
    i(ct) {
      be || (Oe(_.$$.fragment, ct), (be = !0));
    },
    o(ct) {
      $e(_.$$.fragment, ct), (be = !1);
    },
    d(ct) {
      ct && (ze(e), ze(te), ze(ce));
      for (let vt = 0; vt < h.length; vt += 1) h[vt].d();
      Xt(_), qt && qt.d(ct), (Y = !1), Ie();
    },
  };
}
var iz = 200;
function rz(i, e, t) {
  let r,
    { value: o = null } = e,
    { country: n = null } = e,
    { valid: u } = e,
    { detailedValue: h = null } = e,
    { options: m } = e,
    { disabled: b = !1 } = e,
    { readonly: _ = !1 } = e,
    { formInputNameE164: S = "phone_number_e164" } = e,
    { formInputNameCountryCode: T = "country_code" } = e,
    { saveEventName: D = "savePhoneNumber" } = e,
    { componentID: F = "phone-number-picker" } = e;
  Ed.sort();
  let q,
    Q = !0;
  Ka(() => {
    r &&
      (te(h),
      (Q = !1),
      clearTimeout(q),
      (q = setTimeout(() => {
        Q = !0;
      }, iz)));
  });
  function te(De) {
    let st = document.getElementById(F);
    if (st) {
      let qe = new CustomEvent(D, { detail: { detailedValue: De } });
      st.dispatchEvent(qe);
    }
  }
  function ce() {
    (n = t5(this)), t(3, n);
  }
  function be(De) {
    (n = De), t(3, n);
  }
  function Y(De) {
    (u = De), t(1, u);
  }
  function Ie(De) {
    (o = De), t(0, o);
  }
  function Te(De) {
    (h = De), t(2, h);
  }
  function fe(De) {
    (b = De), t(4, b);
  }
  function Le(De) {
    (_ = De), t(5, _);
  }
  return (
    (i.$$set = (De) => {
      "value" in De && t(0, (o = De.value)),
        "country" in De && t(3, (n = De.country)),
        "valid" in De && t(1, (u = De.valid)),
        "detailedValue" in De && t(2, (h = De.detailedValue)),
        "options" in De && t(6, (m = De.options)),
        "disabled" in De && t(4, (b = De.disabled)),
        "readonly" in De && t(5, (_ = De.readonly)),
        "formInputNameE164" in De && t(7, (S = De.formInputNameE164)),
        "formInputNameCountryCode" in De &&
          t(8, (T = De.formInputNameCountryCode)),
        "saveEventName" in De && t(10, (D = De.saveEventName)),
        "componentID" in De && t(11, (F = De.componentID));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 7 && t(9, (r = o && h && u));
    }),
    [o, u, h, n, b, _, m, S, T, r, D, F, ce, be, Y, Ie, Te, fe, Le]
  );
}
var Gb = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, rz, tz, ut, {
          value: 0,
          country: 3,
          valid: 1,
          detailedValue: 2,
          options: 6,
          disabled: 4,
          readonly: 5,
          formInputNameE164: 7,
          formInputNameCountryCode: 8,
          saveEventName: 10,
          componentID: 11,
        });
    }
  },
  Jw = Gb;
var ua = class {
  constructor() {
    (this.type = "service"),
      (this.name = ""),
      (this.invisible = !1),
      (this.noRecolor = !1),
      (this.icon = ""),
      (this.color = "#333"),
      (this.template = () => ""),
      (this.handlers = () => {}),
      (this.stop = () => {}),
      (this.supports = () => !0);
  }
};
var Qp = {},
  Xw = (i) => {
    let e = {};
    for (let t in i)
      if (i.hasOwnProperty(t))
        if (typeof i[t] == "object") {
          let r = Xw(i[t]);
          for (let o in r) r.hasOwnProperty(o) && (e[t + "." + o] = r[o]);
        } else e[t] = i[t];
    return e;
  },
  Yw = (i) => {
    Qp = Xw(i);
  },
  ss = (i, e) => {
    try {
      let t = Qp[i];
      return (
        typeof e == "string" && (e = [e]),
        e &&
          e.forEach((r, o) => {
            t = t.replace(`$${o + 1}$`, r);
          }),
        Qp.helper && typeof Qp.helper == "function" && (t = Qp.helper(t)),
        t
      );
    } catch {
      return "";
    }
  };
var Zb = (i) => {
    if (!i) return [];
    let e = [];
    return (
      typeof i == "string"
        ? e.push(...Array.prototype.slice.call(document.querySelectorAll(i)))
        : Array.isArray(i)
        ? i.forEach((t) => {
            typeof t == "string"
              ? e.push(
                  ...Array.prototype.slice.call(document.querySelectorAll(t))
                )
              : e.push(t);
          })
        : e.push(i),
      e
    );
  },
  e8 = [],
  kr = (i, e, t) => {
    e8.find((o) => o.element === i && o.type === e) ||
      (i.addEventListener(e, t), e8.push({ element: i, type: e }));
  },
  Wb = (i) => {
    if (window.requestAnimationFrame) return window.requestAnimationFrame(i);
    setTimeout(() => {
      i(0);
    }, 100);
  },
  du = (i, e) =>
    new Promise((t) => {
      Wb(() => {
        let r = e.parentElement,
          o = e.getBoundingClientRect();
        if (!r) return;
        let n = r.getBoundingClientRect();
        o.height < o.width
          ? ((e.style.height = `${n.height}px`), (e.style.width = "auto"))
          : ((e.style.width = `${n.width}px`), (e.style.height = "auto")),
          Wb(() => {
            let u = e.getBoundingClientRect();
            u.height > n.height
              ? ((e.style.height = `${n.height}px`), (e.style.width = "auto"))
              : u.width > n.width &&
                ((e.style.width = `${n.width}px`), (e.style.height = "auto")),
              Wb(() => {
                let h = i.uppload.container.querySelector(".uppload-effect");
                h && (h.style.opacity = "1"), t();
              });
          });
      });
    }),
  t8 = (i, e) =>
    new Promise((t) => {
      let r = URL.createObjectURL(i),
        o = document.createElement("canvas"),
        n = document.createElement("img"),
        u = e.maxSize || [e.maxWidth || 1 / 0, e.maxHeight || 1 / 0];
      (n.src = r),
        (n.onload = () => {
          let h = e.compressionToMime || "image/jpeg",
            m = e.compression || 1,
            b = n.width / n.height;
          n.width > u[0] && ((n.width = u[0]), (n.height = n.width * (1 / b))),
            n.height > u[1] && ((n.height = u[1]), (n.width = n.height * b)),
            (o.width = n.width),
            (o.height = n.height);
          let _ = o.getContext("2d");
          if (!_) return t(i);
          _.clearRect(0, 0, o.width, o.height),
            _.drawImage(n, 0, 0, o.width, o.height),
            hl(o, h, m).then((S) => {
              if (S) return t(S);
              t(i);
            });
        }),
        kr(n, "error", () => t(i));
    }),
  nz = (i) => {
    let e = atob(i.split(",")[1]),
      t = i.split(",")[0].split(":")[1].split(";")[0],
      r = new ArrayBuffer(e.length),
      o = new Uint8Array(r);
    for (let n = 0; n < e.length; n++) o[n] = e.charCodeAt(n);
    return new Blob([r], { type: t });
  },
  hl = (i, e, t) =>
    new Promise((r, o) => {
      let n = i.getContext("2d"),
        u = !1;
      if (n)
        try {
          let h = n.getImageData(0, 0, i.width, i.height).data;
          for (let m = 0; m < h.length; m += 4) h[m + 3] < 255 && (u = !0);
        } catch {}
      if (
        (u && e !== "image/webp" && ((e = void 0), (t = void 0)),
        typeof i.toBlob == "function")
      )
        i.toBlob(
          (h) => {
            h && r(h), o(new Error("errors.image_error"));
          },
          e,
          t
        );
      else if (typeof i.toDataURL == "function") {
        let h = i.toDataURL(e, t);
        r(nz(h));
      } else o(new Error("errors.image_error"));
    });
var Gp = (i, e) => (e.noRecolor ? i : i.replace(/#000/g, e.color || "#000"));
var b8 = ws(g8());
function kz(i) {
  return (
    (i = i || Object.create(null)),
    {
      on: function (t, r) {
        (i[t] || (i[t] = [])).push(r);
      },
      off: function (t, r) {
        i[t] && i[t].splice(i[t].indexOf(r) >>> 0, 1);
      },
      emit: function (t, r) {
        (i[t] || []).slice().map(function (o) {
          o(r);
        }),
          (i["*"] || []).slice().map(function (o) {
            o(t, r);
          });
      },
    }
  );
}
var y8 = kz;
var Sz = (i, e, t) => {
    try {
      return new File([i], e || "file_name", {
        lastModified: (t || new Date()).getTime(),
        type: i.type,
      });
    } catch {
      return i;
    }
  },
  Td = (i, e, t, r) => ({ name: e, blob: i, lastModified: r, type: t }),
  Om = (i) => {
    let e = i.blob;
    return (
      (i.lastModified = i.lastModified || new Date()),
      Sz(e, i.name, i.lastModified)
    );
  };
var Bm = class extends ua {
    constructor() {
      super(...arguments),
        (this.name = "default"),
        (this.invisible = !0),
        (this.template = () => `<p>${ss("services.default.heading")}</p>`);
    }
  },
  Rm = class extends ua {
    constructor() {
      super(...arguments),
        (this.name = "uploading"),
        (this.invisible = !0),
        (this.template = () => `<div class="uppload-loader">
  <div></div>
    <p class="uppload-loader-text">${ss(
      "uploading"
    )}<span class="progress"></span></p>
  </div>`);
    }
  },
  Wp = class {
    constructor(e) {
      (this.services = [new Bm(), new Rm()]),
        (this.effects = []),
        (this.isOpen = !1),
        (this.activeService = "default"),
        (this.activeEffect = ""),
        (this.file = { blob: new Blob() }),
        (this.lang = {}),
        (this.emitter = y8()),
        (this.uploadProgress = 0),
        (this.inline = !1),
        (this.transitionDuration = 300),
        (this.settings = {}),
        this.updateSettings(e || {});
      let t = document.createElement("div");
      this.renderContainer(), t.classList.add("uppload-container");
      let r = document.body;
      r && r.appendChild(t),
        (this.container = t),
        (this.focusTrap = (0, b8.default)(this.container, {
          initialFocus: () => this.container.querySelector("button"),
        })),
        requestAnimationFrame(() => this.update());
    }
    updateSettings(e) {
      (this.settings = Object.assign(Object.assign({}, this.settings), e)),
        this.emitter.emit("settingsUpdated", e),
        e.lang && Yw(e.lang),
        e.defaultService && (this.activeService = e.defaultService),
        e.lang && (this.lang = e.lang),
        e.transitionDuration &&
          (this.transitionDuration = e.transitionDuration),
        e.uploader && (this.uploader = e.uploader),
        (this.inline = !!e.inline),
        this.update(),
        this.settings.customClass &&
          this.container.classList.add(this.settings.customClass),
        this.inline && this.container.classList.add("uppload-inline");
    }
    ready() {
      this.settings.value && this.bind(this.settings.value),
        this.renderContainer(),
        this.emitter.emit("ready");
    }
    bind(e) {
      this.settings.bind &&
        (Zb(this.settings.bind).forEach((r) => {
          r.nodeName === "IMG"
            ? r.setAttribute("src", e)
            : r.setAttribute("value", e);
        }),
        this.emitter.emit("bind"));
    }
    use(e) {
      Array.isArray(e) ? e.forEach((t) => this.install(t)) : this.install(e);
    }
    remove(e) {
      (this.services = this.services.filter((t) => t.name !== e)),
        (this.effects = this.effects.filter((t) => t.name !== e)),
        this.update(),
        this.emitter.emit("remove", e);
    }
    updatePlugins(e) {
      let t = e(this.services),
        r = t.filter((u) => u.type === "service"),
        o = !!r.filter((u) => u.name === "default").length;
      !!r.filter((u) => u.name === "uploading").length || r.unshift(new Rm()),
        o || r.unshift(new Bm()),
        (this.services = r),
        (this.effects = t.filter((u) => u.type === "effect")),
        this.update();
    }
    install(e) {
      e.supports() &&
        (e.type === "service"
          ? (this.services.filter((r) => r.name === e.name).length ||
              this.services.push(e),
            this.ready())
          : e.type === "effect" &&
            (this.effects.filter((r) => r.name === e.name).length ||
              this.effects.push(e),
            this.ready()));
    }
    modalOpen() {
      return this.isOpen;
    }
    open() {
      if (this.isOpen) return;
      (this.isOpen = !0),
        (this.file = { blob: new Blob() }),
        (this.activeService = "default"),
        (this.activeEffect = "");
      let e = this.container.querySelector(
        `input[type=radio][value='${this.activeService}']`
      );
      e && e.setAttribute("checked", "checked"),
        (this.container.style.transition = `${this.transitionDuration}ms`),
        (this.container.style.opacity = "0"),
        this.update();
      let t = this.settings.defaultService;
      this.services.length === 3 && this.navigate(this.services[2].name),
        t && this.navigate(t),
        kr(document.body, "keyup", (r) => {
          r.key === "Escape" && this.open && this.close();
        }),
        setTimeout(() => {
          this.container.style.opacity = "1";
        }, 1),
        this.emitter.emit("open");
    }
    close() {
      this.isOpen &&
        (this.stopCurrentService(),
        (this.isOpen = !1),
        this.emitter.emit("close"),
        (this.container.style.opacity = "0"),
        setTimeout(() => this.update(), this.transitionDuration));
    }
    toggle() {
      this.modalOpen() ? this.close() : this.open();
    }
    update() {
      if (!this.container) return;
      this.hideHelp();
      let e = this.container.querySelector(".uppload-active-container");
      e && (e.innerHTML = this.render());
      let t = this.container.querySelector("aside");
      t &&
        this.activeService !== "default" &&
        !this.activeEffect &&
        (t.style.display = "block");
      let r = this.container.querySelector(".effects-nav");
      t && r && this.activeEffect
        ? ((r.style.display = ""), (t.style.display = "none"))
        : t && r && this.activeService === "default"
        ? ((t.style.display = "none"), (r.style.display = "none"))
        : t && r && ((t.style.display = ""), (r.style.display = "none"));
      let o = this.container.querySelector(".uppload-effect");
      o && (o.style.display = this.activeEffect ? "" : "none"),
        window.requestAnimationFrame(() => this.handlers()),
        this.isOpen
          ? (this.container.classList.add("visible"), this.focusTrap.activate())
          : (this.container.classList.remove("visible"),
            this.focusTrap.deactivate());
      let n = this.container.querySelector("footer.effects-nav .effects-tabs");
      if (n) {
        let m = n.parentElement;
        if (m) {
          let b = 0;
          m.querySelectorAll(".effects-continue").forEach((T) => {
            let D = T.getBoundingClientRect();
            b += D.width;
          });
          let S = m.getBoundingClientRect();
          n.style.width = `${S.width - b}px`;
        }
      }
      let u = this.container.querySelector("aside");
      u &&
        this.services.length === 3 &&
        u.classList.add("uppload-services--single");
      let h = this.container.querySelector(".uppload-help");
      h &&
        (h.classList.remove("visible"), kr(h, "click", () => this.hideHelp()));
    }
    getNavbar(e = !1) {
      return `<${e ? "nav" : "div"} class="uppload-services">
      ${this.services
        .filter((t) => !t.invisible)
        .map(
          (t) => `<div data-uppload-service="${
            t.name
          }" class="uppload-service-name">
          ${
            e
              ? `<input type="radio" id="uppload-service-radio-${t.name}" value="${t.name}" name="uppload-radio">`
              : ""
          }
          <${
            e ? `label for="uppload-service-radio-${t.name}"` : "button"
          } data-uppload-service="${t.name}">
            ${
              t.icon.indexOf("http") === 0
                ? `<img class="service-icon" alt="" src="${t.icon}">`
                : Gp(t.icon, t)
            }
            <span>${
              this.lang.services &&
              this.lang.services[t.name] &&
              this.lang.services[t.name].title
                ? this.lang.services[t.name].title
                : t.name
            }</span>
          </${e ? "label" : "button"}>
        </div>`
        )
        .join("")}
    </${e ? "nav" : "div"}>`;
    }
    getEffectsNavbar() {
      return `<div class="effects-continue">
    <button class="effects-continue--cancel">${ss("cancel")}</button>
  </div><div class="effects-tabs"><div class="effects-tabs-flow">
      ${this.effects
        .map(
          (e) => `
      <input type="radio" id="uppload-effect-radio-${e.name}" value="${
            e.name
          }" name="uppload-effect-radio">
        <label for="uppload-effect-radio-${e.name}">
          ${
            e.icon.indexOf("http") === 0
              ? `<img class="effect-icon" alt="" src="${e.icon}">`
              : Gp(e.icon, e)
          }
          <span>${
            this.lang.effects &&
            this.lang.effects[e.name] &&
            this.lang.effects[e.name].title
              ? this.lang.effects[e.name].title
              : e.name
          }</span>
        </label>
      `
        )
        .join("")}
      </div></div><div class="effects-continue">
        <button class="effects-continue--upload">${ss("upload")}</button>
      </div>`;
    }
    renderContainer() {
      this.container &&
        (this.container.innerHTML = `
      <div class="uppload-modal">
        <aside style="display: none">
          ${this.getNavbar(!0)}
        </aside>
        <section>
          ${this.error ? `<div class="uppload-error">${this.error}</div>` : ""}
          <div class="uppload-active-container"></div>
          <footer style="display: none" class="effects-nav">${this.getEffectsNavbar()}</footer>
        </section>
        <div class="uppload-help-loading">
          <div class="uppload-loader">
            <div></div>
            <p class="uppload-loader-text">${ss("help.loading")}</p>
          </div>
        </div>
        <div class="uppload-help">
          <div><button><span>${ss(
            "help.close"
          )}</span><span aria-hidden="true">&times;</span></button></div>
          <iframe></iframe>
        </div>
      </div>
      <div class="uppload-modal-bg">
        <button class="uppload-close" aria-label="${ss(
          "close"
        )}">&times;</button>
      </div>
    `);
    }
    render() {
      return `
      ${this.error ? `<div class="uppload-error">${this.error}</div>` : ""}
      ${
        this.activeEffect
          ? `<div class="uppload-effect uppload-effect--${
              this.activeEffect || "none"
            }">
      ${
        this.activeEffect && this.file ? this.renderActiveEffect(this.file) : ""
      }
    </div>`
          : `<div class="uppload-service uppload-service--${
              this.activeService
            }">
      ${this.activeEffect && this.file ? "" : this.renderActiveService()}
      ${this.activeService === "default" ? this.getNavbar() : ""}
    </div>`
      }`;
    }
    renderActiveService() {
      let e = this.services.filter((t) => t.name === this.activeService);
      if (e.length) {
        let t = e[0];
        return (
          requestAnimationFrame(() => {
            typeof t.handlers == "function" &&
              t.handlers({
                next: this.next.bind(this),
                upload: this.upload.bind(this),
                uploadMultiple: this.uploadMultiple.bind(this),
                handle: this.handle.bind(this),
                showHelp: this.showHelp.bind(this),
                uppload: this,
                translate: ss,
              });
          }),
          `${
            typeof t.template == "function"
              ? t.template({ translate: ss, uppload: this })
              : ""
          }`
        );
      }
    }
    renderActiveEffect(e) {
      let t = this.effects.filter((r) => r.name === this.activeEffect);
      if (t.length) {
        let r = t[0];
        return (
          requestAnimationFrame(() => {
            typeof r.handlers == "function" &&
              r.handlers({
                next: this.next.bind(this),
                upload: this.upload.bind(this),
                uploadMultiple: this.uploadMultiple.bind(this),
                handle: this.handle.bind(this),
                showHelp: this.showHelp.bind(this),
                uppload: this,
                translate: ss,
              });
          }),
          `
        <div class="active-effect-container">${
          typeof r.template == "function"
            ? r.template({ file: e, translate: ss })
            : ""
        }</div>
      `
        );
      }
    }
    uploadMultiple(e) {
      return (
        this.emitter.emit("before-upload"),
        new Promise((t) => {
          this.navigate("uploading"),
            this.uploader && typeof this.uploader == "function"
              ? this.uploader(e, this.updateProgress.bind(this))
                  .then((r) => {
                    this.navigate("default"),
                      t(r),
                      this.emitter.emit("upload", r),
                      this.close();
                  })
                  .catch((r) => this.handle(r))
              : this.handle(new Error("no-uploader"));
        })
      );
    }
    hideHelp() {
      let e = this.container.querySelector(".uppload-help"),
        t = this.container.querySelector(".uppload-help-loading"),
        r = this.container.querySelector("aside"),
        o = this.container.querySelector("section");
      t && t.classList.remove("visible"),
        e && e.classList.remove("visible"),
        r && (r.style.display = ""),
        o && (o.style.display = ""),
        this.emitter.emit("hide-help");
    }
    showHelp(e) {
      this.emitter.emit("help", e);
      let t = this.container.querySelector("aside");
      t && (t.style.display = "none");
      let r = this.container.querySelector("section");
      r && (r.style.display = "none");
      let o = this.container.querySelector(".uppload-help-loading");
      o && o.classList.add("visible");
      let n = this.container.querySelector(".uppload-help");
      if (n) {
        let u = n.querySelector("iframe");
        if (u) {
          u.setAttribute("src", `https://uppload.js.org/help${e}`);
          let h = !1;
          kr(u, "load", () => {
            (h = !0),
              n.classList.add("visible"),
              o && o.classList.remove("visible");
          }),
            kr(u, "error", () => {
              (h = !0), this.hideHelp();
            });
        }
      }
    }
    next(e) {
      if ((this.emitter.emit("next", e), (this.file = e), !this.activeEffect))
        if (this.effects.length && e.type && e.type.indexOf("image/") === 0)
          (this.activeEffect = this.effects[0].name), this.update();
        else return this.upload(Om(e));
      let t = this.container.querySelector(
        `input[name='uppload-effect-radio'][value='${this.activeEffect}']`
      );
      t && t.setAttribute("checked", "checked");
    }
    compress(e) {
      return this.settings.compressionFromMimes &&
        !this.settings.compressionFromMimes.includes(e.type)
        ? new Promise((t) => t(e))
        : typeof this.settings.compressor == "function"
        ? this.settings.compressor(e)
        : t8(e, this.settings);
    }
    upload(e) {
      return (
        this.emitter.emit("before-upload", e),
        new Promise((t, r) => {
          this.navigate("uploading");
          let o = Td(e);
          try {
            typeof e.name == "string" &&
              (o = Td(e, e.name, e.type, new Date(e.lastModified)));
          } catch {}
          this.uploader && typeof this.uploader == "function"
            ? this.compress(e)
                .then(
                  (n) => (
                    this.settings.compression &&
                      this.emitter.emit("compress", n),
                    n
                  )
                )
                .then((n) => ((o.blob = n), Om(o)))
                .then((n) => this.uploader(n, this.updateProgress.bind(this)))
                .then((n) => {
                  this.bind(n),
                    this.navigate("default"),
                    t(n),
                    this.emitter.emit("upload", n),
                    this.close();
                })
                .catch((n) => this.handle(n))
            : r("no-uploader");
        })
      );
    }
    handle(e) {
      (this.error = ss(e.message) || e.message),
        this.emitter.emit("error", this.error),
        this.update(),
        this.activeService === "uploading" && this.navigate("default"),
        setTimeout(() => {
          (this.error = void 0), this.update();
        }, 4e3);
    }
    handlers() {
      let e = () => this.open(),
        t = () => this.close();
      this.container
        .querySelectorAll(
          ".uppload-service--default .uppload-service-name button"
        )
        .forEach((b) => {
          kr(b, "click", (S) => {
            let T = b.getAttribute("data-uppload-service");
            if (T) {
              this.navigate(T);
              let F = this.container.querySelector(
                `[data-uppload-service="${T}"]`
              );
              if (F && F.parentElement) {
                let q = 0,
                  Q = 0,
                  te = F.getBoundingClientRect(),
                  ce = F.parentElement.getBoundingClientRect();
                (q = te.top - ce.top), (Q = te.left - ce.left);
                let be = F.parentElement.parentElement;
                try {
                  be && be.scrollTo(Q, q);
                } catch {}
              }
            }
            let D = this.container.querySelector(
              `input[type=radio][value='${T}']`
            );
            return (
              D && D.setAttribute("checked", "checked"), S.preventDefault(), !1
            );
          });
        }),
        this.container
          .querySelectorAll(".uppload-services input[type='radio']")
          .forEach((b) => {
            kr(b, "change", (S) => {
              let T = this.container.querySelector(
                "[name='uppload-radio']:checked"
              );
              if (!T) return;
              let D = T.value;
              this.navigate(D);
            });
          }),
        this.container
          .querySelectorAll(".effects-nav input[type='radio']")
          .forEach((b) => {
            kr(b, "change", (S) => {
              let T = this.container.querySelector(
                "[name='uppload-effect-radio']:checked"
              );
              if (!T) return;
              let D = T.value;
              (this.activeEffect = D), this.update();
            });
          });
      let u = this.container.querySelector(".uppload-modal-bg");
      u && kr(u, "click", t),
        this.settings.call &&
          Zb(this.settings.call).forEach((_) => {
            kr(_, "click", e);
          });
      let h = this.container.querySelector(".effects-continue--cancel");
      h &&
        kr(h, "click", () => {
          (this.file = { blob: new Blob() }),
            (this.activeService = "default"),
            (this.activeEffect = ""),
            this.update();
        });
      let m = this.container.querySelector(".effects-continue--upload");
      m &&
        kr(m, "click", () => {
          this.file &&
            ((this.activeService = ""),
            (this.activeEffect = ""),
            this.upload(Om(this.file)));
        });
    }
    stopCurrentService() {
      let e = this.services.filter((t) => t.name === this.activeService);
      e.length && e[0].stop();
    }
    navigate(e) {
      if (!this.services.filter((r) => r.name === e).length)
        throw new Error("invalid-service");
      this.stopCurrentService(), (this.activeService = e), this.update();
      let t = this.container.querySelector(
        ".uppload-active-container input, .uppload-active-container button"
      );
      t && t.focus();
    }
    on(e, t) {
      return this.emitter.on(e, t);
    }
    off(e, t) {
      return this.emitter.on(e, t);
    }
    updateProgress(e) {
      this.uploadProgress = e;
      let t = this.container.querySelector(".uppload-loader-text .progress");
      t && (t.innerHTML = `${parseInt(e.toString())}%`),
        this.emitter.emit("progress", this.updateProgress);
    }
  };
var pl = class {
  constructor() {
    (this.type = "effect"),
      (this.name = ""),
      (this.invisible = !1),
      (this.noRecolor = !1),
      (this.color = "#000"),
      (this.icon = ""),
      (this.template = () => ""),
      (this.handlers = () => {}),
      (this.supports = () => !0);
  }
};
var Yb = {
  upload: "Upload",
  cancel: "Cancel",
  close: "Close",
  uploading: "Uploading...",
  uploaded: "Uploaded",
  fetching: "Getting your image from $1$...",
  poweredBy: "Powered by $1$",
  needHelp: "Need help?",
  units: { px: "px", "%": "%", deg: "\xB0" },
  errors: {
    response_not_ok: "We got an error fetching this file",
    unable_to_search: "We got an error searching",
    invalid_service_url: "This is not $A$ $1$ URL",
    invalid_url: "This URL seems to be invalid",
    upload_aborted: "Your upload was cancelled",
    upload_error: "We got an error uploading this file",
    file_type_not_allowed: "This file type is not allowed",
    file_too_large: "Your file should be smaller than $1$",
  },
  help: { loading: "Loading help...", close: "Close help" },
  services: {
    default: { heading: "Select an image" },
    local: {
      title: "Choose file",
      button: "Select a file",
      or: "or",
      drop: "Drop files here",
    },
    camera: {
      title: "Camera",
      button: "Click photo",
      switch: "Switch camera",
      waiting: "Waiting for permission...",
      unableToRead:
        "We're not able to read your camera's video. This may be because you didn't grant the required permission, or because your device doesn't support camera access.",
    },
    microlink: {
      button: "Import from $1$",
      label: "$1$ $2$ URL",
      placeholder: "Enter $A$ $1$ $2$ URL",
      type: "post",
    },
    url: {
      title: "Direct URL",
      label: "Image URL",
      placeholder: "Enter an image URL",
    },
    instagram: { title: "Instagram" },
    facebook: { title: "Facebook" },
    flickr: { title: "Flickr", type: "photo" },
    ninegag: { title: "9GAG", type: "photo" },
    deviantart: { title: "DeviantArt" },
    artstation: { title: "ArtStation" },
    twitter: { title: "Twitter", type: "image tweet" },
    pinterest: { title: "Pinterest", type: "pin" },
    flipboard: { title: "Flipboard", type: "article" },
    fotki: { title: "Fotki", type: "photo" },
    linkedin: { title: "LinkedIn" },
    reddit: { title: "Reddit" },
    tumblr: { title: "Tumblr" },
    weheartit: { title: "We Heart It" },
    screenshot: {
      title: "Screenshot",
      button: "Take screenshot",
      label: "Webpage URL",
      placeholder: "Enter a webpage URL",
      loading: "Taking a screenshot...",
    },
    search: {
      button: "Search on $1$",
      label: "Find an image",
      placeholder: "Search for something",
      imagesPoweredBy: "Images powered by $1$",
    },
    giphy: { title: "GIPHY" },
    unsplash: { title: "Unsplash" },
    pixabay: { title: "Pixabay" },
    pexels: { title: "Pexels" },
  },
  effects: {
    preview: { title: "Preview" },
    filters: { title: "Filters" },
    crop: { title: "Crop", aspectRatios: { free: "Free", square: "Square" } },
    rotate: { title: "Rotate" },
    flip: {
      title: "Flip",
      buttons: { horizontal: "Horizontal", vertical: "Vertical" },
    },
    sharpen: { title: "Sharpen" },
    blur: { title: "Blur" },
    brightness: { title: "Brightness" },
    contrast: { title: "Contrast" },
    grayscale: { title: "Grayscale" },
    "hue-rotate": { title: "Hue rotate" },
    invert: { title: "Invert" },
    saturate: { title: "Saturate" },
    sepia: { title: "Sepia" },
  },
  helper: (i) => {
    let e = "$A$";
    for (; i.indexOf(e) !== -1; ) {
      let t = i.indexOf(e);
      i.length > t + 3 &&
        (["a", "e", "i", "o", "u"].indexOf(i[t + 4].toLowerCase()) !== -1
          ? (i = i.replace(e, "an"))
          : (i = i.replace(e, "a")));
    }
    return i;
  },
};
var Md = class extends ua {
  constructor({ mimeTypes: e, maxFileSize: t } = {}) {
    super(),
      (this.name = "local"),
      (this.icon =
        '<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M177 56L125 4l-3-2v57h57c0-2-1-3-2-3z"/><path d="M173 113h8V75h-66c-5 0-8-4-8-8V1H27c-4 0-8 4-8 8v184c0 4 4 8 8 8h65v-8c0-45 36-80 81-80z"/><path d="M173 128c-36 0-65 29-65 64s29 64 65 64c35 0 64-29 64-64s-29-64-64-64zm27 63h-14v33c0 2-2 3-4 3h-20c-2 0-3-1-3-3v-33h-14c-3 0-5-3-3-5l28-30c1-2 3-2 5 0l27 30c2 2 1 5-2 5z"/></g></svg>'),
      (this.color = "#34495e"),
      (this.mimeTypes = ["image/gif", "image/jpeg", "image/jpg", "image/png"]),
      (this.maxFileSize = 1 / 0),
      (this.template = (r) => `<div class="drop-area">
      <div>${r.translate("services.local.drop")}</div>
      <em>${r.translate("services.local.or")}</em>
      <button class="uppload-button uppload-button--cta" style="background: ${
        this.color
      }">${r.translate("services.local.button")}</button>
    </div>
      <div class="alternate-input">
        <input type="file" accept="${this.mimeTypes.join()}"${
        r.uppload.settings.multiple ? " multiple" : ""
      }></div><button class="need-help-link"><span>${ss(
        "needHelp"
      )}</span aria-hidden="true"><span>?</span></button>`),
      (this.handlers = (r) => {
        let o = r.uppload.container.querySelector(".drop-area");
        o &&
          (kr(o, "drop", (h) => this.dropHandler(r, h)),
          kr(o, "dragover", (h) => this.dragHandler(r, h)),
          kr(o, "dragend", (h) => this.dragStop(r, h)),
          kr(o, "dragexit", (h) => this.dragStop(r, h)),
          kr(o, "dragleave", (h) => this.dragStop(r, h)),
          kr(o, "click", (h) => this.fileSelect(r, h)));
        let n = r.uppload.container.querySelector(
          ".alternate-input input[type=file]"
        );
        n && kr(n, "change", (h) => this.getFile(r, h));
        let u = r.uppload.container.querySelector(".need-help-link");
        u && kr(u, "click", () => r.showHelp("/services/local"));
      }),
      e && (this.mimeTypes = e),
      t && (this.maxFileSize = t);
  }
  getFile(e, t) {
    t.preventDefault();
    let r = t.target.files,
      o = null;
    if (r) {
      if (e.uppload.settings.multiple && r.length > 1)
        return e.uploadMultiple(Array.from(r));
      for (let n = 0; n < r.length; n++) {
        let u = r[n];
        this.mimeTypes.indexOf(u.type) !== -1 &&
          (u.size < this.maxFileSize
            ? (o = u)
            : e.handle(
                new Error(
                  e.translate(
                    "errors.file_too_large",
                    `${this.maxFileSize} bytes`
                  )
                )
              ));
      }
    }
    o &&
      o &&
      e.next({
        blob: o,
        size: o.size,
        type: o.type,
        lastModified: o.lastModified ? new Date(o.lastModified) : void 0,
        name: o.name,
      });
  }
  fileSelect(e, t) {
    let r = e.uppload.container.querySelector(
      ".alternate-input input[type=file]"
    );
    r && r.click();
  }
  dragStop(e, t) {
    let r = e.uppload.container.querySelector(".drop-area");
    r && r.classList.remove("drop-area-active");
  }
  dragHandler(e, t) {
    t.preventDefault();
    let r = e.uppload.container.querySelector(".drop-area");
    r && r.classList.add("drop-area-active");
  }
  dropHandler(e, t) {
    t.preventDefault(), this.dragStop(e, t);
    let r = null;
    if (t.dataTransfer && t.dataTransfer.items)
      for (let o = 0; o < t.dataTransfer.items.length; o++) {
        let n = t.dataTransfer.items[o];
        n.kind === "file" &&
          this.mimeTypes.indexOf(n.type) !== -1 &&
          ((r = n.getAsFile()),
          (!r || r.size > this.maxFileSize) &&
            ((r = null),
            e.handle(
              new Error(
                e.translate(
                  "errors.file_too_large",
                  `${this.maxFileSize} bytes`
                )
              )
            )));
      }
    r &&
      r &&
      e.next({
        blob: r,
        size: r.size,
        type: r.type,
        lastModified: r.lastModified ? new Date(r.lastModified) : void 0,
        name: r.name,
      });
  }
};
var v8 = ws(rv());
var Ad = class extends pl {
  constructor({
    aspectRatio: e,
    aspectRatioOptions: t,
    hideAspectRatioSettings: r,
    autoCropArea: o,
    viewMode: n,
  } = {}) {
    super(),
      (this.name = "crop"),
      (this.icon =
        '<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><path d="M74 0v182h134v-25h-26V74H99V48h96c4 0 7 1 9 4 3 2 4 5 4 9v121h48v26h-48v48h-26v-48H61a13 13 0 01-13-13V74H0V48h48V0h26z" fill="#000" fill-rule="nonzero"/></svg>'),
      (this.aspectRatio = NaN),
      (this.hideAspectRatioSettings = !1),
      (this.aspectRatioOptions = { free: NaN, square: 1, "16:9": 16 / 9 }),
      (this.autoCropArea = 1),
      (this.viewMode = 1),
      (this.originalFile = { blob: new Blob() }),
      (this.template = ({ file: u, translate: h }) => {
        let m = URL.createObjectURL(u.blob);
        return (
          (this.originalFile = u),
          `
      <div class="uppload-cropping-element">
        <img style="width: 20px" alt="" src="${m}">
      </div>
      ${
        !this.aspectRatio && !this.hideAspectRatioSettings
          ? `<div class="uppload-actions">
        ${Object.keys(this.aspectRatioOptions)
          .map(
            (b, _) => `
          <input value="${
            this.aspectRatioOptions[b]
          }" data-name="${b}" name="crop-aspect-ratio" type="radio"${
              _ ? "" : " checked"
            } id="crop-aspect-ratio-${b}">
          <label for="crop-aspect-ratio-${b}">${
              h(`effects.crop.aspectRatios.${b}`) || b
            }</label>`
          )
          .join("")}
      </div>`
          : ""
      }
    `
        );
      }),
      (this.handlers = (u) => {
        let h = u.uppload.container.querySelector(
            ".uppload-cropping-element img"
          ),
          m = this.originalFile;
        h &&
          du(u, h).then(() => {
            let b = new v8.default(h, {
              aspectRatio: this.aspectRatio,
              autoCropArea: this.autoCropArea,
              viewMode: this.viewMode,
              ready() {
                hl(b.getCroppedCanvas()).then((S) => {
                  (m.blob = S), u.next(m);
                });
              },
              cropend() {
                hl(b.getCroppedCanvas()).then((S) => {
                  (m.blob = S), u.next(m);
                });
              },
            });
            u.uppload.container
              .querySelectorAll("input[name='crop-aspect-ratio']")
              .forEach((S) => {
                kr(S, "change", () => {
                  let T = u.uppload.container.querySelector(
                    "input[name='crop-aspect-ratio']:checked"
                  );
                  T &&
                    (b.setAspectRatio(
                      this.aspectRatioOptions[
                        T.getAttribute("data-name") || "free"
                      ]
                    ),
                    hl(b.getCroppedCanvas()).then((D) => {
                      (m.blob = D), u.next(m);
                    }));
                });
              });
          });
      }),
      e && (this.aspectRatio = e),
      t && (this.aspectRatioOptions = t),
      o && (this.autoCropArea = o),
      n && (this.viewMode = n),
      r && (this.hideAspectRatioSettings = r);
  }
};
var Tz = ws(rv());
function Mz(i) {
  let e, t, r, o, n;
  return {
    c() {
      (e = Je("div")),
        (t = mi("svg")),
        (r = mi("path")),
        (o = Ot()),
        (n = Xi(i[3])),
        J(r, "fill-rule", "evenodd"),
        J(
          r,
          "d",
          "M1 5.25A2.25 2.25 0 0 1 3.25 3h13.5A2.25 2.25 0 0 1 19 5.25v9.5A2.25 2.25 0 0 1 16.75 17H3.25A2.25 2.25 0 0 1 1 14.75v-9.5Zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75v-2.69l-2.22-2.219a.75.75 0 0 0-1.06 0l-1.91 1.909.47.47a.75.75 0 1 1-1.06 1.06L6.53 8.091a.75.75 0 0 0-1.06 0l-2.97 2.97ZM12 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"
        ),
        J(r, "clip-rule", "evenodd"),
        J(t, "xmlns", "http://www.w3.org/2000/svg"),
        J(t, "viewBox", "0 0 20 20"),
        J(t, "fill", "currentColor"),
        J(t, "class", "w-5 h-5 mr-1 md:mr-2"),
        J(e, "class", "flex flex-row items-center");
    },
    m(u, h) {
      Ne(u, e, h), He(e, t), He(t, r), He(e, o), He(e, n);
    },
    p(u, h) {
      h & 8 && fn(n, u[3]);
    },
    d(u) {
      u && ze(e);
    },
  };
}
function Az(i) {
  let e;
  return {
    c() {
      (e = Je("div")),
        (e.innerHTML =
          '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>'),
        J(
          e,
          "class",
          "absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-gray-800 border-2 rounded-full bottom-4 left-3/4 transform -translate-x-1/2 translate-y-1/2"
        );
    },
    m(t, r) {
      Ne(t, e, r);
    },
    p: yt,
    d(t) {
      t && ze(e);
    },
  };
}
function Iz(i) {
  let e, t, r, o, n;
  function u(b, _) {
    return b[4] ? Az : Mz;
  }
  let h = u(i, -1),
    m = h(i);
  return {
    c() {
      (e = Je("button")),
        m.c(),
        J(e, "class", (t = i[0] ? i[1] : i[2])),
        (e.disabled = r = !i[0]);
    },
    m(b, _) {
      Ne(b, e, _), m.m(e, null), o || ((n = Mt(e, "click", i[5])), (o = !0));
    },
    p(b, [_]) {
      h === (h = u(b, _)) && m
        ? m.p(b, _)
        : (m.d(1), (m = h(b)), m && (m.c(), m.m(e, null))),
        _ & 7 && t !== (t = b[0] ? b[1] : b[2]) && J(e, "class", t),
        _ & 1 && r !== (r = !b[0]) && (e.disabled = r);
    },
    i: yt,
    o: yt,
    d(b) {
      b && ze(e), m.d(), (o = !1), n();
    },
  };
}
function Pz(i, e, t) {
  let { postURL: r = "localhost:8000/uploadImage" } = e,
    { uploadEnabled: o = !0 } = e,
    { stylingClassesUploadEnabled: n = "" } = e,
    { stylingClassesUploadDisabled: u = "" } = e,
    { buttonText: h = "Upload image" } = e,
    { isProfilePhotoCornerUploader: m = !1 } = e,
    b;
  (b = new Wp({
    lang: Yb,
    uploader: (S, T) =>
      new Promise((D, F) => {
        let q = new FormData();
        q.append("file", S);
        let Q = new XMLHttpRequest();
        Q.open("POST", r, !0),
          (Q.upload.onprogress = (te) => {
            if (te.lengthComputable) {
              let ce = te.loaded / te.total;
              T(ce);
            }
          }),
          (Q.onload = () => {
            Q.status >= 200 && Q.status < 300
              ? (window.location.reload(), D("Upload successful"))
              : F("Upload failed");
          }),
          (Q.onerror = () => F("Upload error")),
          Q.send(q);
      }),
    maxSize: [1500, 1500],
    compression: 0.8,
    compressionToMime: "image/jpeg",
  })),
    b.use([new Md()]),
    b.use([new Ad({ aspectRatio: 1 })]);
  let _ = () => b.open();
  return (
    b.on("upload", (S) => {
      console.log("File uploaded!", S);
    }),
    (i.$$set = (S) => {
      "postURL" in S && t(6, (r = S.postURL)),
        "uploadEnabled" in S && t(0, (o = S.uploadEnabled)),
        "stylingClassesUploadEnabled" in S &&
          t(1, (n = S.stylingClassesUploadEnabled)),
        "stylingClassesUploadDisabled" in S &&
          t(2, (u = S.stylingClassesUploadDisabled)),
        "buttonText" in S && t(3, (h = S.buttonText)),
        "isProfilePhotoCornerUploader" in S &&
          t(4, (m = S.isProfilePhotoCornerUploader));
    }),
    [o, n, u, h, m, _, r]
  );
}
var nv = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, Pz, Iz, ut, {
          postURL: 6,
          uploadEnabled: 0,
          stylingClassesUploadEnabled: 1,
          stylingClassesUploadDisabled: 2,
          buttonText: 3,
          isProfilePhotoCornerUploader: 4,
        });
    }
  },
  _8 = nv;
var Um = globalThis,
  Vm =
    Um.ShadowRoot &&
    (Um.ShadyCSS === void 0 || Um.ShadyCSS.nativeShadow) &&
    "adoptedStyleSheets" in Document.prototype &&
    "replace" in CSSStyleSheet.prototype,
  ov = Symbol(),
  x8 = new WeakMap(),
  Zp = class {
    constructor(e, t, r) {
      if (((this._$cssResult$ = !0), r !== ov))
        throw Error(
          "CSSResult is not constructable. Use `unsafeCSS` or `css` instead."
        );
      (this.cssText = e), (this.t = t);
    }
    get styleSheet() {
      let e = this.o,
        t = this.t;
      if (Vm && e === void 0) {
        let r = t !== void 0 && t.length === 1;
        r && (e = x8.get(t)),
          e === void 0 &&
            ((this.o = e = new CSSStyleSheet()).replaceSync(this.cssText),
            r && x8.set(t, e));
      }
      return e;
    }
    toString() {
      return this.cssText;
    }
  },
  w8 = (i) => new Zp(typeof i == "string" ? i : i + "", void 0, ov),
  sv = (i, ...e) => {
    let t =
      i.length === 1
        ? i[0]
        : e.reduce(
            (r, o, n) =>
              r +
              ((u) => {
                if (u._$cssResult$ === !0) return u.cssText;
                if (typeof u == "number") return u;
                throw Error(
                  "Value passed to 'css' function must be a 'css' function result: " +
                    u +
                    ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security."
                );
              })(o) +
              i[n + 1],
            i[0]
          );
    return new Zp(t, i, ov);
  },
  av = (i, e) => {
    if (Vm)
      i.adoptedStyleSheets = e.map((t) =>
        t instanceof CSSStyleSheet ? t : t.styleSheet
      );
    else
      for (let t of e) {
        let r = document.createElement("style"),
          o = Um.litNonce;
        o !== void 0 && r.setAttribute("nonce", o),
          (r.textContent = t.cssText),
          i.appendChild(r);
      }
  },
  jm = Vm
    ? (i) => i
    : (i) =>
        i instanceof CSSStyleSheet
          ? ((e) => {
              let t = "";
              for (let r of e.cssRules) t += r.cssText;
              return w8(t);
            })(i)
          : i;
var {
    is: Dz,
    defineProperty: Lz,
    getOwnPropertyDescriptor: Fz,
    getOwnPropertyNames: zz,
    getOwnPropertySymbols: Nz,
    getPrototypeOf: Oz,
  } = Object,
  Hm = globalThis,
  k8 = Hm.trustedTypes,
  Bz = k8 ? k8.emptyScript : "",
  Rz = Hm.reactiveElementPolyfillSupport,
  Kp = (i, e) => i,
  Jp = {
    toAttribute(i, e) {
      switch (e) {
        case Boolean:
          i = i ? Bz : null;
          break;
        case Object:
        case Array:
          i = i == null ? i : JSON.stringify(i);
      }
      return i;
    },
    fromAttribute(i, e) {
      let t = i;
      switch (e) {
        case Boolean:
          t = i !== null;
          break;
        case Number:
          t = i === null ? null : Number(i);
          break;
        case Object:
        case Array:
          try {
            t = JSON.parse(i);
          } catch {
            t = null;
          }
      }
      return t;
    },
  },
  qm = (i, e) => !Dz(i, e),
  S8 = {
    attribute: !0,
    type: String,
    converter: Jp,
    reflect: !1,
    hasChanged: qm,
  };
(Symbol.metadata ??= Symbol("metadata")),
  (Hm.litPropertyMetadata ??= new WeakMap());
var fl = class extends HTMLElement {
  static addInitializer(e) {
    this._$Ei(), (this.l ??= []).push(e);
  }
  static get observedAttributes() {
    return this.finalize(), this._$Eh && [...this._$Eh.keys()];
  }
  static createProperty(e, t = S8) {
    if (
      (t.state && (t.attribute = !1),
      this._$Ei(),
      this.elementProperties.set(e, t),
      !t.noAccessor)
    ) {
      let r = Symbol(),
        o = this.getPropertyDescriptor(e, r, t);
      o !== void 0 && Lz(this.prototype, e, o);
    }
  }
  static getPropertyDescriptor(e, t, r) {
    let { get: o, set: n } = Fz(this.prototype, e) ?? {
      get() {
        return this[t];
      },
      set(u) {
        this[t] = u;
      },
    };
    return {
      get() {
        return o?.call(this);
      },
      set(u) {
        let h = o?.call(this);
        n.call(this, u), this.requestUpdate(e, h, r);
      },
      configurable: !0,
      enumerable: !0,
    };
  }
  static getPropertyOptions(e) {
    return this.elementProperties.get(e) ?? S8;
  }
  static _$Ei() {
    if (this.hasOwnProperty(Kp("elementProperties"))) return;
    let e = Oz(this);
    e.finalize(),
      e.l !== void 0 && (this.l = [...e.l]),
      (this.elementProperties = new Map(e.elementProperties));
  }
  static finalize() {
    if (this.hasOwnProperty(Kp("finalized"))) return;
    if (
      ((this.finalized = !0),
      this._$Ei(),
      this.hasOwnProperty(Kp("properties")))
    ) {
      let t = this.properties,
        r = [...zz(t), ...Nz(t)];
      for (let o of r) this.createProperty(o, t[o]);
    }
    let e = this[Symbol.metadata];
    if (e !== null) {
      let t = litPropertyMetadata.get(e);
      if (t !== void 0) for (let [r, o] of t) this.elementProperties.set(r, o);
    }
    this._$Eh = new Map();
    for (let [t, r] of this.elementProperties) {
      let o = this._$Eu(t, r);
      o !== void 0 && this._$Eh.set(o, t);
    }
    this.elementStyles = this.finalizeStyles(this.styles);
  }
  static finalizeStyles(e) {
    let t = [];
    if (Array.isArray(e)) {
      let r = new Set(e.flat(1 / 0).reverse());
      for (let o of r) t.unshift(jm(o));
    } else e !== void 0 && t.push(jm(e));
    return t;
  }
  static _$Eu(e, t) {
    let r = t.attribute;
    return r === !1
      ? void 0
      : typeof r == "string"
      ? r
      : typeof e == "string"
      ? e.toLowerCase()
      : void 0;
  }
  constructor() {
    super(),
      (this._$Ep = void 0),
      (this.isUpdatePending = !1),
      (this.hasUpdated = !1),
      (this._$Em = null),
      this._$Ev();
  }
  _$Ev() {
    (this._$ES = new Promise((e) => (this.enableUpdating = e))),
      (this._$AL = new Map()),
      this._$E_(),
      this.requestUpdate(),
      this.constructor.l?.forEach((e) => e(this));
  }
  addController(e) {
    (this._$EO ??= new Set()).add(e),
      this.renderRoot !== void 0 && this.isConnected && e.hostConnected?.();
  }
  removeController(e) {
    this._$EO?.delete(e);
  }
  _$E_() {
    let e = new Map(),
      t = this.constructor.elementProperties;
    for (let r of t.keys())
      this.hasOwnProperty(r) && (e.set(r, this[r]), delete this[r]);
    e.size > 0 && (this._$Ep = e);
  }
  createRenderRoot() {
    let e =
      this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
    return av(e, this.constructor.elementStyles), e;
  }
  connectedCallback() {
    (this.renderRoot ??= this.createRenderRoot()),
      this.enableUpdating(!0),
      this._$EO?.forEach((e) => e.hostConnected?.());
  }
  enableUpdating(e) {}
  disconnectedCallback() {
    this._$EO?.forEach((e) => e.hostDisconnected?.());
  }
  attributeChangedCallback(e, t, r) {
    this._$AK(e, r);
  }
  _$EC(e, t) {
    let r = this.constructor.elementProperties.get(e),
      o = this.constructor._$Eu(e, r);
    if (o !== void 0 && r.reflect === !0) {
      let n = (
        r.converter?.toAttribute !== void 0 ? r.converter : Jp
      ).toAttribute(t, r.type);
      (this._$Em = e),
        n == null ? this.removeAttribute(o) : this.setAttribute(o, n),
        (this._$Em = null);
    }
  }
  _$AK(e, t) {
    let r = this.constructor,
      o = r._$Eh.get(e);
    if (o !== void 0 && this._$Em !== o) {
      let n = r.getPropertyOptions(o),
        u =
          typeof n.converter == "function"
            ? { fromAttribute: n.converter }
            : n.converter?.fromAttribute !== void 0
            ? n.converter
            : Jp;
      (this._$Em = o),
        (this[o] = u.fromAttribute(t, n.type)),
        (this._$Em = null);
    }
  }
  requestUpdate(e, t, r) {
    if (e !== void 0) {
      if (
        ((r ??= this.constructor.getPropertyOptions(e)),
        !(r.hasChanged ?? qm)(this[e], t))
      )
        return;
      this.P(e, t, r);
    }
    this.isUpdatePending === !1 && (this._$ES = this._$ET());
  }
  P(e, t, r) {
    this._$AL.has(e) || this._$AL.set(e, t),
      r.reflect === !0 && this._$Em !== e && (this._$Ej ??= new Set()).add(e);
  }
  async _$ET() {
    this.isUpdatePending = !0;
    try {
      await this._$ES;
    } catch (t) {
      Promise.reject(t);
    }
    let e = this.scheduleUpdate();
    return e != null && (await e), !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    if (!this.isUpdatePending) return;
    if (!this.hasUpdated) {
      if (((this.renderRoot ??= this.createRenderRoot()), this._$Ep)) {
        for (let [o, n] of this._$Ep) this[o] = n;
        this._$Ep = void 0;
      }
      let r = this.constructor.elementProperties;
      if (r.size > 0)
        for (let [o, n] of r)
          n.wrapped !== !0 ||
            this._$AL.has(o) ||
            this[o] === void 0 ||
            this.P(o, this[o], n);
    }
    let e = !1,
      t = this._$AL;
    try {
      (e = this.shouldUpdate(t)),
        e
          ? (this.willUpdate(t),
            this._$EO?.forEach((r) => r.hostUpdate?.()),
            this.update(t))
          : this._$EU();
    } catch (r) {
      throw ((e = !1), this._$EU(), r);
    }
    e && this._$AE(t);
  }
  willUpdate(e) {}
  _$AE(e) {
    this._$EO?.forEach((t) => t.hostUpdated?.()),
      this.hasUpdated || ((this.hasUpdated = !0), this.firstUpdated(e)),
      this.updated(e);
  }
  _$EU() {
    (this._$AL = new Map()), (this.isUpdatePending = !1);
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$ES;
  }
  shouldUpdate(e) {
    return !0;
  }
  update(e) {
    (this._$Ej &&= this._$Ej.forEach((t) => this._$EC(t, this[t]))),
      this._$EU();
  }
  updated(e) {}
  firstUpdated(e) {}
};
(fl.elementStyles = []),
  (fl.shadowRootOptions = { mode: "open" }),
  (fl[Kp("elementProperties")] = new Map()),
  (fl[Kp("finalized")] = new Map()),
  Rz?.({ ReactiveElement: fl }),
  (Hm.reactiveElementVersions ??= []).push("2.0.4");
var fv = globalThis,
  $m = fv.trustedTypes,
  C8 = $m ? $m.createPolicy("lit-html", { createHTML: (i) => i }) : void 0,
  P8 = "$lit$",
  cc = `lit$${Math.random().toFixed(9).slice(2)}$`,
  D8 = "?" + cc,
  Uz = `<${D8}>`,
  mu = document,
  Yp = () => mu.createComment(""),
  ef = (i) => i === null || (typeof i != "object" && typeof i != "function"),
  L8 = Array.isArray,
  Vz = (i) => L8(i) || typeof i?.[Symbol.iterator] == "function",
  lv = `[ 	
\f\r]`,
  Xp = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,
  E8 = /-->/g,
  T8 = />/g,
  pu = RegExp(
    `>|${lv}(?:([^\\s"'>=/]+)(${lv}*=${lv}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,
    "g"
  ),
  M8 = /'/g,
  A8 = /"/g,
  F8 = /^(?:script|style|textarea|title)$/i,
  z8 =
    (i) =>
    (e, ...t) => ({ _$litType$: i, strings: e, values: t }),
  N8 = z8(1),
  fne = z8(2),
  ml = Symbol.for("lit-noChange"),
  lo = Symbol.for("lit-nothing"),
  I8 = new WeakMap(),
  fu = mu.createTreeWalker(mu, 129);
function O8(i, e) {
  if (!Array.isArray(i) || !i.hasOwnProperty("raw"))
    throw Error("invalid template strings array");
  return C8 !== void 0 ? C8.createHTML(e) : e;
}
var jz = (i, e) => {
    let t = i.length - 1,
      r = [],
      o,
      n = e === 2 ? "<svg>" : "",
      u = Xp;
    for (let h = 0; h < t; h++) {
      let m = i[h],
        b,
        _,
        S = -1,
        T = 0;
      for (; T < m.length && ((u.lastIndex = T), (_ = u.exec(m)), _ !== null); )
        (T = u.lastIndex),
          u === Xp
            ? _[1] === "!--"
              ? (u = E8)
              : _[1] !== void 0
              ? (u = T8)
              : _[2] !== void 0
              ? (F8.test(_[2]) && (o = RegExp("</" + _[2], "g")), (u = pu))
              : _[3] !== void 0 && (u = pu)
            : u === pu
            ? _[0] === ">"
              ? ((u = o ?? Xp), (S = -1))
              : _[1] === void 0
              ? (S = -2)
              : ((S = u.lastIndex - _[2].length),
                (b = _[1]),
                (u = _[3] === void 0 ? pu : _[3] === '"' ? A8 : M8))
            : u === A8 || u === M8
            ? (u = pu)
            : u === E8 || u === T8
            ? (u = Xp)
            : ((u = pu), (o = void 0));
      let D = u === pu && i[h + 1].startsWith("/>") ? " " : "";
      n +=
        u === Xp
          ? m + Uz
          : S >= 0
          ? (r.push(b), m.slice(0, S) + P8 + m.slice(S) + cc + D)
          : m + cc + (S === -2 ? h : D);
    }
    return [O8(i, n + (i[t] || "<?>") + (e === 2 ? "</svg>" : "")), r];
  },
  tf = class i {
    constructor({ strings: e, _$litType$: t }, r) {
      let o;
      this.parts = [];
      let n = 0,
        u = 0,
        h = e.length - 1,
        m = this.parts,
        [b, _] = jz(e, t);
      if (
        ((this.el = i.createElement(b, r)),
        (fu.currentNode = this.el.content),
        t === 2)
      ) {
        let S = this.el.content.firstChild;
        S.replaceWith(...S.childNodes);
      }
      for (; (o = fu.nextNode()) !== null && m.length < h; ) {
        if (o.nodeType === 1) {
          if (o.hasAttributes())
            for (let S of o.getAttributeNames())
              if (S.endsWith(P8)) {
                let T = _[u++],
                  D = o.getAttribute(S).split(cc),
                  F = /([.?@])?(.*)/.exec(T);
                m.push({
                  type: 1,
                  index: n,
                  name: F[2],
                  strings: D,
                  ctor:
                    F[1] === "."
                      ? uv
                      : F[1] === "?"
                      ? dv
                      : F[1] === "@"
                      ? hv
                      : Pd,
                }),
                  o.removeAttribute(S);
              } else
                S.startsWith(cc) &&
                  (m.push({ type: 6, index: n }), o.removeAttribute(S));
          if (F8.test(o.tagName)) {
            let S = o.textContent.split(cc),
              T = S.length - 1;
            if (T > 0) {
              o.textContent = $m ? $m.emptyScript : "";
              for (let D = 0; D < T; D++)
                o.append(S[D], Yp()),
                  fu.nextNode(),
                  m.push({ type: 2, index: ++n });
              o.append(S[T], Yp());
            }
          }
        } else if (o.nodeType === 8)
          if (o.data === D8) m.push({ type: 2, index: n });
          else {
            let S = -1;
            for (; (S = o.data.indexOf(cc, S + 1)) !== -1; )
              m.push({ type: 7, index: n }), (S += cc.length - 1);
          }
        n++;
      }
    }
    static createElement(e, t) {
      let r = mu.createElement("template");
      return (r.innerHTML = e), r;
    }
  };
function Id(i, e, t = i, r) {
  if (e === ml) return e;
  let o = r !== void 0 ? t._$Co?.[r] : t._$Cl,
    n = ef(e) ? void 0 : e._$litDirective$;
  return (
    o?.constructor !== n &&
      (o?._$AO?.(!1),
      n === void 0 ? (o = void 0) : ((o = new n(i)), o._$AT(i, t, r)),
      r !== void 0 ? ((t._$Co ??= [])[r] = o) : (t._$Cl = o)),
    o !== void 0 && (e = Id(i, o._$AS(i, e.values), o, r)),
    e
  );
}
var cv = class {
    constructor(e, t) {
      (this._$AV = []), (this._$AN = void 0), (this._$AD = e), (this._$AM = t);
    }
    get parentNode() {
      return this._$AM.parentNode;
    }
    get _$AU() {
      return this._$AM._$AU;
    }
    u(e) {
      let {
          el: { content: t },
          parts: r,
        } = this._$AD,
        o = (e?.creationScope ?? mu).importNode(t, !0);
      fu.currentNode = o;
      let n = fu.nextNode(),
        u = 0,
        h = 0,
        m = r[0];
      for (; m !== void 0; ) {
        if (u === m.index) {
          let b;
          m.type === 2
            ? (b = new rf(n, n.nextSibling, this, e))
            : m.type === 1
            ? (b = new m.ctor(n, m.name, m.strings, this, e))
            : m.type === 6 && (b = new pv(n, this, e)),
            this._$AV.push(b),
            (m = r[++h]);
        }
        u !== m?.index && ((n = fu.nextNode()), u++);
      }
      return (fu.currentNode = mu), o;
    }
    p(e) {
      let t = 0;
      for (let r of this._$AV)
        r !== void 0 &&
          (r.strings !== void 0
            ? (r._$AI(e, r, t), (t += r.strings.length - 2))
            : r._$AI(e[t])),
          t++;
    }
  },
  rf = class i {
    get _$AU() {
      return this._$AM?._$AU ?? this._$Cv;
    }
    constructor(e, t, r, o) {
      (this.type = 2),
        (this._$AH = lo),
        (this._$AN = void 0),
        (this._$AA = e),
        (this._$AB = t),
        (this._$AM = r),
        (this.options = o),
        (this._$Cv = o?.isConnected ?? !0);
    }
    get parentNode() {
      let e = this._$AA.parentNode,
        t = this._$AM;
      return t !== void 0 && e?.nodeType === 11 && (e = t.parentNode), e;
    }
    get startNode() {
      return this._$AA;
    }
    get endNode() {
      return this._$AB;
    }
    _$AI(e, t = this) {
      (e = Id(this, e, t)),
        ef(e)
          ? e === lo || e == null || e === ""
            ? (this._$AH !== lo && this._$AR(), (this._$AH = lo))
            : e !== this._$AH && e !== ml && this._(e)
          : e._$litType$ !== void 0
          ? this.$(e)
          : e.nodeType !== void 0
          ? this.T(e)
          : Vz(e)
          ? this.k(e)
          : this._(e);
    }
    S(e) {
      return this._$AA.parentNode.insertBefore(e, this._$AB);
    }
    T(e) {
      this._$AH !== e && (this._$AR(), (this._$AH = this.S(e)));
    }
    _(e) {
      this._$AH !== lo && ef(this._$AH)
        ? (this._$AA.nextSibling.data = e)
        : this.T(mu.createTextNode(e)),
        (this._$AH = e);
    }
    $(e) {
      let { values: t, _$litType$: r } = e,
        o =
          typeof r == "number"
            ? this._$AC(e)
            : (r.el === void 0 &&
                (r.el = tf.createElement(O8(r.h, r.h[0]), this.options)),
              r);
      if (this._$AH?._$AD === o) this._$AH.p(t);
      else {
        let n = new cv(o, this),
          u = n.u(this.options);
        n.p(t), this.T(u), (this._$AH = n);
      }
    }
    _$AC(e) {
      let t = I8.get(e.strings);
      return t === void 0 && I8.set(e.strings, (t = new tf(e))), t;
    }
    k(e) {
      L8(this._$AH) || ((this._$AH = []), this._$AR());
      let t = this._$AH,
        r,
        o = 0;
      for (let n of e)
        o === t.length
          ? t.push((r = new i(this.S(Yp()), this.S(Yp()), this, this.options)))
          : (r = t[o]),
          r._$AI(n),
          o++;
      o < t.length && (this._$AR(r && r._$AB.nextSibling, o), (t.length = o));
    }
    _$AR(e = this._$AA.nextSibling, t) {
      for (this._$AP?.(!1, !0, t); e && e !== this._$AB; ) {
        let r = e.nextSibling;
        e.remove(), (e = r);
      }
    }
    setConnected(e) {
      this._$AM === void 0 && ((this._$Cv = e), this._$AP?.(e));
    }
  },
  Pd = class {
    get tagName() {
      return this.element.tagName;
    }
    get _$AU() {
      return this._$AM._$AU;
    }
    constructor(e, t, r, o, n) {
      (this.type = 1),
        (this._$AH = lo),
        (this._$AN = void 0),
        (this.element = e),
        (this.name = t),
        (this._$AM = o),
        (this.options = n),
        r.length > 2 || r[0] !== "" || r[1] !== ""
          ? ((this._$AH = Array(r.length - 1).fill(new String())),
            (this.strings = r))
          : (this._$AH = lo);
    }
    _$AI(e, t = this, r, o) {
      let n = this.strings,
        u = !1;
      if (n === void 0)
        (e = Id(this, e, t, 0)),
          (u = !ef(e) || (e !== this._$AH && e !== ml)),
          u && (this._$AH = e);
      else {
        let h = e,
          m,
          b;
        for (e = n[0], m = 0; m < n.length - 1; m++)
          (b = Id(this, h[r + m], t, m)),
            b === ml && (b = this._$AH[m]),
            (u ||= !ef(b) || b !== this._$AH[m]),
            b === lo ? (e = lo) : e !== lo && (e += (b ?? "") + n[m + 1]),
            (this._$AH[m] = b);
      }
      u && !o && this.j(e);
    }
    j(e) {
      e === lo
        ? this.element.removeAttribute(this.name)
        : this.element.setAttribute(this.name, e ?? "");
    }
  },
  uv = class extends Pd {
    constructor() {
      super(...arguments), (this.type = 3);
    }
    j(e) {
      this.element[this.name] = e === lo ? void 0 : e;
    }
  },
  dv = class extends Pd {
    constructor() {
      super(...arguments), (this.type = 4);
    }
    j(e) {
      this.element.toggleAttribute(this.name, !!e && e !== lo);
    }
  },
  hv = class extends Pd {
    constructor(e, t, r, o, n) {
      super(e, t, r, o, n), (this.type = 5);
    }
    _$AI(e, t = this) {
      if ((e = Id(this, e, t, 0) ?? lo) === ml) return;
      let r = this._$AH,
        o =
          (e === lo && r !== lo) ||
          e.capture !== r.capture ||
          e.once !== r.once ||
          e.passive !== r.passive,
        n = e !== lo && (r === lo || o);
      o && this.element.removeEventListener(this.name, this, r),
        n && this.element.addEventListener(this.name, this, e),
        (this._$AH = e);
    }
    handleEvent(e) {
      typeof this._$AH == "function"
        ? this._$AH.call(this.options?.host ?? this.element, e)
        : this._$AH.handleEvent(e);
    }
  },
  pv = class {
    constructor(e, t, r) {
      (this.element = e),
        (this.type = 6),
        (this._$AN = void 0),
        (this._$AM = t),
        (this.options = r);
    }
    get _$AU() {
      return this._$AM._$AU;
    }
    _$AI(e) {
      Id(this, e);
    }
  };
var Hz = fv.litHtmlPolyfillSupport;
Hz?.(tf, rf), (fv.litHtmlVersions ??= []).push("3.1.3");
var B8 = (i, e, t) => {
  let r = t?.renderBefore ?? e,
    o = r._$litPart$;
  if (o === void 0) {
    let n = t?.renderBefore ?? null;
    r._$litPart$ = o = new rf(e.insertBefore(Yp(), n), n, void 0, t ?? {});
  }
  return o._$AI(i), o;
};
var uc = class extends fl {
  constructor() {
    super(...arguments),
      (this.renderOptions = { host: this }),
      (this._$Do = void 0);
  }
  createRenderRoot() {
    let e = super.createRenderRoot();
    return (this.renderOptions.renderBefore ??= e.firstChild), e;
  }
  update(e) {
    let t = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected),
      super.update(e),
      (this._$Do = B8(t, this.renderRoot, this.renderOptions));
  }
  connectedCallback() {
    super.connectedCallback(), this._$Do?.setConnected(!0);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this._$Do?.setConnected(!1);
  }
  render() {
    return ml;
  }
};
(uc._$litElement$ = !0),
  (uc.finalized = !0),
  globalThis.litElementHydrateSupport?.({ LitElement: uc });
var qz = globalThis.litElementPolyfillSupport;
qz?.({ LitElement: uc });
(globalThis.litElementVersions ??= []).push("4.0.5");
var R8 = (i) => (e, t) => {
  t !== void 0
    ? t.addInitializer(() => {
        customElements.define(i, e);
      })
    : customElements.define(i, e);
};
var Qz = {
    attribute: !0,
    type: String,
    converter: Jp,
    reflect: !1,
    hasChanged: qm,
  },
  Gz = (i = Qz, e, t) => {
    let { kind: r, metadata: o } = t,
      n = globalThis.litPropertyMetadata.get(o);
    if (
      (n === void 0 && globalThis.litPropertyMetadata.set(o, (n = new Map())),
      n.set(t.name, i),
      r === "accessor")
    ) {
      let { name: u } = t;
      return {
        set(h) {
          let m = e.get.call(this);
          e.set.call(this, h), this.requestUpdate(u, m, i);
        },
        init(h) {
          return h !== void 0 && this.P(u, void 0, i), h;
        },
      };
    }
    if (r === "setter") {
      let { name: u } = t;
      return function (h) {
        let m = this[u];
        e.call(this, h), this.requestUpdate(u, m, i);
      };
    }
    throw Error("Unsupported decorator location: " + r);
  };
function Qm(i) {
  return (e, t) =>
    typeof t == "object"
      ? Gz(i, e, t)
      : ((r, o, n) => {
          let u = o.hasOwnProperty(n);
          return (
            o.constructor.createProperty(n, u ? { ...r, wrapped: !0 } : r),
            u ? Object.getOwnPropertyDescriptor(o, n) : void 0
          );
        })(i, e, t);
}
function U8(i) {
  return Qm({ ...i, state: !0, attribute: !1 });
}
var V8 = {
    ATTRIBUTE: 1,
    CHILD: 2,
    PROPERTY: 3,
    BOOLEAN_ATTRIBUTE: 4,
    EVENT: 5,
    ELEMENT: 6,
  },
  j8 =
    (i) =>
    (...e) => ({ _$litDirective$: i, values: e }),
  Wm = class {
    constructor(e) {}
    get _$AU() {
      return this._$AM._$AU;
    }
    _$AT(e, t, r) {
      (this._$Ct = e), (this._$AM = t), (this._$Ci = r);
    }
    _$AS(e, t) {
      return this.update(e, t);
    }
    update(e, t) {
      return this.render(...t);
    }
  };
var H8 = j8(
  class extends Wm {
    constructor(i) {
      if (
        (super(i),
        i.type !== V8.ATTRIBUTE || i.name !== "class" || i.strings?.length > 2)
      )
        throw Error(
          "`classMap()` can only be used in the `class` attribute and must be the only part in the attribute."
        );
    }
    render(i) {
      return (
        " " +
        Object.keys(i)
          .filter((e) => i[e])
          .join(" ") +
        " "
      );
    }
    update(i, [e]) {
      if (this.st === void 0) {
        (this.st = new Set()),
          i.strings !== void 0 &&
            (this.nt = new Set(
              i.strings
                .join(" ")
                .split(/\s/)
                .filter((r) => r !== "")
            ));
        for (let r in e) e[r] && !this.nt?.has(r) && this.st.add(r);
        return this.render(e);
      }
      let t = i.element.classList;
      for (let r of this.st) r in e || (t.remove(r), this.st.delete(r));
      for (let r in e) {
        let o = !!e[r];
        o === this.st.has(r) ||
          this.nt?.has(r) ||
          (o ? (t.add(r), this.st.add(r)) : (t.remove(r), this.st.delete(r)));
      }
      return ml;
    }
  }
);
var Qi = {
    d: (i, e) => {
      for (var t in e)
        Qi.o(e, t) &&
          !Qi.o(i, t) &&
          Object.defineProperty(i, t, { enumerable: !0, get: e[t] });
    },
    o: (i, e) => Object.prototype.hasOwnProperty.call(i, e),
    r: (i) => {
      typeof Symbol < "u" &&
        Symbol.toStringTag &&
        Object.defineProperty(i, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(i, "__esModule", { value: !0 });
    },
  },
  Z8 = {};
Qi.d(Z8, { k: () => ls });
var bv = {};
Qi.r(bv), Qi.d(bv, { templates: () => oN });
var vv = {};
Qi.r(vv), Qi.d(vv, { templates: () => sN });
var _v = {};
Qi.r(_v), Qi.d(_v, { templates: () => aN });
var xv = {};
Qi.r(xv), Qi.d(xv, { templates: () => lN });
var wv = {};
Qi.r(wv), Qi.d(wv, { templates: () => cN });
var kv = {};
Qi.r(kv), Qi.d(kv, { templates: () => uN });
var Sv = {};
Qi.r(Sv), Qi.d(Sv, { templates: () => dN });
var Cv = {};
Qi.r(Cv), Qi.d(Cv, { templates: () => hN });
var Ev = {};
Qi.r(Ev), Qi.d(Ev, { templates: () => pN });
var Tv = {};
Qi.r(Tv), Qi.d(Tv, { templates: () => fN });
var Mv = {};
Qi.r(Mv), Qi.d(Mv, { templates: () => mN });
var Av = {};
Qi.r(Av), Qi.d(Av, { templates: () => gN });
var Iv = {};
Qi.r(Iv), Qi.d(Iv, { templates: () => yN });
var Pv = {};
Qi.r(Pv), Qi.d(Pv, { templates: () => bN });
var Dv = {};
Qi.r(Dv), Qi.d(Dv, { templates: () => vN });
var Lv = {};
Qi.r(Lv), Qi.d(Lv, { templates: () => _N });
var Fv = {};
Qi.r(Fv), Qi.d(Fv, { templates: () => xN });
var rr = ((i) => {
    var e = {};
    return Qi.d(e, i), e;
  })({ LitElement: () => uc, css: () => sv, html: () => N8 }),
  K8 = (i, e, t) => {
    let r = i[0];
    for (let o = 1; o < i.length; o++)
      (r += e[t ? t[o - 1] : o - 1]), (r += i[o]);
    return r;
  },
  J8 = (i) => {
    return typeof (e = i) != "string" && "strTag" in e
      ? K8(i.strings, i.values)
      : i;
    var e;
  },
  zv = "lit-localize-status",
  Nv = class {
    constructor(e) {
      (this.__litLocalizeEventHandler = (t) => {
        t.detail.status === "ready" && this.host.requestUpdate();
      }),
        (this.host = e);
    }
    hostConnected() {
      window.addEventListener(zv, this.__litLocalizeEventHandler);
    }
    hostDisconnected() {
      window.removeEventListener(zv, this.__litLocalizeEventHandler);
    }
  },
  Kz = (i) => i.addController(new Nv(i)),
  Jm = class {
    constructor() {
      (this.settled = !1),
        (this.promise = new Promise((e, t) => {
          (this._resolve = e), (this._reject = t);
        }));
    }
    resolve(e) {
      (this.settled = !0), this._resolve(e);
    }
    reject(e) {
      (this.settled = !0), this._reject(e);
    }
  },
  gl = [];
for (let i = 0; i < 256; i++)
  gl[i] = ((i >> 4) & 15).toString(16) + (15 & i).toString(16);
var Jz = "",
  Xz = "h",
  Yz = "s";
function eN(i, e) {
  return (
    (e ? Xz : Yz) +
    (function (t) {
      let r = 0,
        o = 8997,
        n = 0,
        u = 33826,
        h = 0,
        m = 40164,
        b = 0,
        _ = 52210;
      for (let S = 0; S < t.length; S++)
        (o ^= t.charCodeAt(S)),
          (r = 435 * o),
          (n = 435 * u),
          (h = 435 * m),
          (b = 435 * _),
          (h += o << 8),
          (b += u << 8),
          (n += r >>> 16),
          (o = 65535 & r),
          (h += n >>> 16),
          (u = 65535 & n),
          (_ = (b + (h >>> 16)) & 65535),
          (m = 65535 & h);
      return (
        gl[_ >> 8] +
        gl[255 & _] +
        gl[m >> 8] +
        gl[255 & m] +
        gl[u >> 8] +
        gl[255 & u] +
        gl[o >> 8] +
        gl[255 & o]
      );
    })(typeof i == "string" ? i : i.join(Jz))
  );
}
var q8 = new WeakMap(),
  $8 = new Map();
function tN(i, e, t) {
  if (i) {
    let r =
        t?.id ??
        (function (n) {
          let u = typeof n == "string" ? n : n.strings,
            h = $8.get(u);
          return (
            h === void 0 &&
              ((h = eN(u, typeof n != "string" && !("strTag" in n))),
              $8.set(u, h)),
            h
          );
        })(e),
      o = i[r];
    if (o) {
      if (typeof o == "string") return o;
      if ("strTag" in o) return K8(o.strings, e.values, o.values);
      {
        let n = q8.get(o);
        return (
          n === void 0 && ((n = o.values), q8.set(o, n)),
          { ...o, values: n.map((u) => e.values[u]) }
        );
      }
    }
  }
  return J8(e);
}
function mv(i) {
  window.dispatchEvent(new CustomEvent(zv, { detail: i }));
}
var gv,
  X8,
  Xm,
  Ov,
  Y8,
  Ym = "",
  gu = new Jm();
gu.resolve();
var Zm = 0,
  iN = () => Ym,
  rN = (i) => {
    if (i === (gv ?? Ym)) return gu.promise;
    if (!Xm || !Ov) throw Error("Internal error");
    if (!Xm.has(i)) throw Error("Invalid locale code");
    Zm++;
    let e = Zm;
    return (
      (gv = i),
      gu.settled && (gu = new Jm()),
      mv({ status: "loading", loadingLocale: i }),
      (i === X8 ? Promise.resolve({ templates: void 0 }) : Ov(i)).then(
        (t) => {
          Zm === e &&
            ((Ym = i),
            (gv = void 0),
            (Y8 = t.templates),
            mv({ status: "ready", readyLocale: i }),
            gu.resolve());
        },
        (t) => {
          Zm === e &&
            (mv({
              status: "error",
              errorLocale: i,
              errorMessage: t.toString(),
            }),
            gu.reject(t));
        }
      ),
      gu.promise
    );
  },
  Cs = J8,
  Q8 = !1,
  Mn = ((i) => {
    var e = {};
    return Qi.d(e, i), e;
  })({ customElement: () => R8, property: () => Qm, state: () => U8 }),
  nN = [
    "cs",
    "de",
    "el",
    "es",
    "fr",
    "it",
    "ja",
    "nl",
    "no",
    "pl",
    "pt",
    "ru",
    "sr",
    "tr",
    "uk",
    "zh",
    "zh-CN",
  ],
  oN = {
    s182ab2d6c997515f:
      "\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0435\u0433\u043E \u043D\u0430 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u044D\u043A\u0440\u0430\u043D \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438 \u0443\u0434\u043E\u0431\u0441\u0442\u0432\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F.",
    s1b9047d53d9f9d22:
      '2) \u041D\u0430\u0436\u0430\u0442\u044C "\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"',
    s37a9e8aec5713460: "\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",
    s5c6aad7a7e4a1437:
      '3) \u041D\u0430\u0436\u0430\u0442\u044C "\u041D\u0430 \u044D\u043A\u0440\u0430\u043D \xAB\u0414\u043E\u043C\u043E\u0439\xBB"',
    s6196153c4b0c1ea0:
      "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C",
    s922329d6f6213590:
      "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 Dock",
    sa5ef80b4bb9b39f8: "\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C",
    sa7551383d1897fcc:
      '2) \u041D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 Dock"',
    sba52286c21552a4e:
      "\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u044D\u0442\u043E \u043D\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438 \u0443\u0434\u043E\u0431\u0441\u0442\u0432\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F.",
    sc79fd7641eb9a975:
      "\u0421\u043F\u0440\u044F\u0442\u0430\u0442\u044C \u0418\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u044E",
    scdaf4bbff76674c8:
      "\u041D\u0430 \u044D\u043A\u0440\u0430\u043D \xAB\u0414\u043E\u043C\u043E\u0439\xBB",
    sdfe23506a3b0cdc8:
      "1) \u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 Safari \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435",
    se740f75b95a51807:
      "\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0435\u0433\u043E \u0432 Dock \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438 \u0443\u0434\u043E\u0431\u0441\u0442\u0432\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F.",
    sfea652f6580ff086:
      "\u042D\u0442\u043E\u0442 \u0432\u0435\u0431-\u0441\u0430\u0439\u0442 \u0438\u043C\u0435\u0435\u0442 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F.",
  },
  sN = {
    s182ab2d6c997515f:
      "Daha iyi bir deneyim ve kolay eri\u015Fim i\xE7in Ana Ekran\u0131n\u0131za ekleyin.",
    s1b9047d53d9f9d22: "2) Gezinme \xE7ubu\u011Funda Payla\u015F'a bas\u0131n",
    s37a9e8aec5713460: "Daha Fazla",
    s5c6aad7a7e4a1437: "3) Ana Ekrana Ekle'ye bas\u0131n",
    s6196153c4b0c1ea0: "Y\xFCkle",
    s922329d6f6213590: "Dock\u2019a Ekle",
    sa5ef80b4bb9b39f8: "K\xFC\xE7\xFClt",
    sa7551383d1897fcc: "2) Dock\u2019a ekleye bas\u0131n",
    sba52286c21552a4e:
      "Daha iyi bir deneyim ve kolay eri\u015Fim i\xE7in cihaz\u0131n\u0131za y\xFCkleyin.",
    sc79fd7641eb9a975: "Talimatlar\u0131 gizle",
    scdaf4bbff76674c8: "Ana Ekrana Ekle",
    sdfe23506a3b0cdc8: "1) Safari taray\u0131c\u0131s\u0131nda a\xE7\u0131n",
    se740f75b95a51807:
      "Daha iyi bir deneyim ve kolay eri\u015Fim i\xE7in Dock\u2019a ekleyin.",
    sfea652f6580ff086: "Bu site uygulama i\u015Flevselli\u011Fine sahiptir.",
  },
  aN = {
    s182ab2d6c997515f:
      "F\xFCgen Sie es zu Ihrem Startbildschirm hinzu, um eine umfassende Erfahrung und einen leichten Zugriff zu erhalten.",
    s1b9047d53d9f9d22: "2) Dr\xFCcken Sie auf Teilen in der Navigationsleiste",
    s37a9e8aec5713460: "Mehr",
    s5c6aad7a7e4a1437: "3) Dr\xFCcken Sie Hinzuf\xFCgen zum Startbildschirm",
    s6196153c4b0c1ea0: "Installieren",
    s922329d6f6213590: "Zum Dock hinzuf\xFCgen",
    sa5ef80b4bb9b39f8: "Weniger",
    sa7551383d1897fcc: "2) Dr\xFCcken Sie auf Zum Dock hinzuf\xFCgen",
    sba52286c21552a4e:
      "Installieren Sie es auf Ihrem Ger\xE4t f\xFCr eine umfassende Erfahrung und einen leichten Zugriff.",
    sc79fd7641eb9a975: "Anleitung ausblenden",
    scdaf4bbff76674c8: "Hinzuf\xFCgen zum Startbildschirm",
    sdfe23506a3b0cdc8: "1) In Safari-Browser \xF6ffnen",
    se740f75b95a51807:
      "F\xFCgen Sie es zu Ihrem Dock hinzu, um eine umfassende Erfahrung und einen leichten Zugriff zu erhalten.",
    sfea652f6580ff086:
      "Diese Website verf\xFCgt \xFCber App-Funktionalit\xE4t.",
  },
  lN = {
    s182ab2d6c997515f:
      "A\xF1\xE1delo a tu pantalla de inicio para una experiencia amplia y acceso f\xE1cil.",
    s1b9047d53d9f9d22: "2) Presionar Compartir en la barra de direcciones",
    s37a9e8aec5713460: "M\xE1s",
    s5c6aad7a7e4a1437: "3) Presionar A\xF1adir a pantalla de inicio",
    s6196153c4b0c1ea0: "Instalar",
    s922329d6f6213590: "A\xF1adir al Dock",
    sa5ef80b4bb9b39f8: "Menos",
    sa7551383d1897fcc: "2) Presionar A\xF1adir al Dock",
    sba52286c21552a4e:
      "Inst\xE1lalo en tu dispositivo para una experiencia amplia y acceso f\xE1cil.",
    sc79fd7641eb9a975: "Esconder instrucciones",
    scdaf4bbff76674c8: "A\xF1adir a pantalla de inicio",
    sdfe23506a3b0cdc8: "1) Abrir en el navegador web Safari",
    se740f75b95a51807:
      "A\xF1\xE1delo a tu Dock para una experiencia amplia y acceso f\xE1cil.",
    sfea652f6580ff086: "Este sitio tiene funcionalidad de aplicaci\xF3n.",
  },
  cN = {
    s182ab2d6c997515f:
      "Voeg het toe aan je startscherm voor een uitgebreide ervaring en gemakkelijke toegang.",
    s1b9047d53d9f9d22: "2) Druk op delen in de navigatiebalk",
    s37a9e8aec5713460: "Meer",
    s5c6aad7a7e4a1437: "3) Druk op Toevoegen aan het startscherm",
    s6196153c4b0c1ea0: "Installeren",
    s922329d6f6213590: "Toevoegen aan Dock",
    sa5ef80b4bb9b39f8: "Minder",
    sa7551383d1897fcc: "2) Druk op Toevoegen aan Dock",
    sba52286c21552a4e:
      "Installeer het op je apparaat voor een uitgebreide ervaring en gemakkelijke toegang.",
    sc79fd7641eb9a975: "Instructie verbergen",
    scdaf4bbff76674c8: "Toevoegen aan het startscherm",
    sdfe23506a3b0cdc8: "1) Open in Safari-browser",
    se740f75b95a51807:
      "Voeg het toe aan je Dock voor een uitgebreide ervaring en makkelijke toegang.",
    sfea652f6580ff086: "Deze site heeft app-functionaliteit.",
  },
  uN = {
    s182ab2d6c997515f:
      "\u03A0\u03C1\u03BF\u03C3\u03B8\u03AD\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03B7\u03BD \u03BF\u03B8\u03CC\u03BD\u03B7 \u0391\u03C6\u03B5\u03C4\u03B7\u03C1\u03AF\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03B5\u03BA\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03BA\u03B1\u03B9 \u03B5\u03CD\u03BA\u03BF\u03BB\u03B7 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7.",
    s1b9047d53d9f9d22:
      "2) \u03A0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 \u039A\u03BF\u03B9\u03BD\u03BF\u03C0\u03BF\u03AF\u03B7\u03C3\u03B7 \u03C3\u03C4\u03B7 \u03B3\u03C1\u03B1\u03BC\u03BC\u03AE \u03C0\u03BB\u03BF\u03AE\u03B3\u03B7\u03C3\u03B7\u03C2",
    s37a9e8aec5713460:
      "\u03A0\u03B5\u03C1\u03B9\u03C3\u03C3\u03CC\u03C4\u03B5\u03C1\u03B1",
    s5c6aad7a7e4a1437:
      "3) \u03A0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 \u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u03BF\u03B8\u03CC\u03BD\u03B7 \u0391\u03C6\u03B5\u03C4\u03B7\u03C1\u03AF\u03B1\u03C2",
    s6196153c4b0c1ea0:
      "\u0395\u03B3\u03BA\u03B1\u03C4\u03AC\u03C3\u03C4\u03B1\u03C3\u03B7",
    s922329d6f6213590:
      "\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u03A0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7",
    sa5ef80b4bb9b39f8: "\u039B\u03B9\u03B3\u03CC\u03C4\u03B5\u03C1\u03B1",
    sa7551383d1897fcc:
      "2) \u03A0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 \u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u03A0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7",
    sba52286c21552a4e:
      "\u0395\u03B3\u03BA\u03B1\u03C4\u03B1\u03C3\u03C4\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03B7 \u03C3\u03C5\u03C3\u03BA\u03B5\u03C5\u03AE \u03C3\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03B5\u03BA\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03BA\u03B1\u03B9 \u03B5\u03CD\u03BA\u03BF\u03BB\u03B7 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7.",
    sc79fd7641eb9a975:
      "\u0391\u03C0\u03CC\u03BA\u03C1\u03C5\u03C8\u03B7 \u039F\u03B4\u03B7\u03B3\u03B9\u03CE\u03BD",
    scdaf4bbff76674c8:
      "\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u039F\u03B8\u03CC\u03BD\u03B7 \u0391\u03C6\u03B5\u03C4\u03B7\u03C1\u03AF\u03B1\u03C2",
    sdfe23506a3b0cdc8:
      "1) \u0391\u03BD\u03BF\u03AF\u03BE\u03C4\u03B5 \u03C4\u03BF\u03BD \u03C0\u03B5\u03C1\u03B9\u03B7\u03B3\u03B7\u03C4\u03AE Safari",
    se740f75b95a51807:
      "\u03A0\u03C1\u03BF\u03C3\u03B8\u03AD\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03B7\u03BD \u03A0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7 \u03B3\u03B9\u03B1 \u03B5\u03BA\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03BA\u03B1\u03B9 \u03B5\u03CD\u03BA\u03BF\u03BB\u03B7 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7.",
    sfea652f6580ff086:
      "\u0391\u03C5\u03C4\u03CC\u03C2 \u03BF \u03B9\u03C3\u03C4\u03CC\u03C4\u03BF\u03C0\u03BF\u03C2 \u03AD\u03C7\u03B5\u03B9 \u03BB\u03B5\u03B9\u03C4\u03BF\u03C5\u03C1\u03B3\u03B9\u03BA\u03AE \u03B5\u03C6\u03B1\u03C1\u03BC\u03BF\u03B3\u03AE\u03C2.",
  },
  dN = {
    s182ab2d6c997515f:
      "Ajoutez-le \xE0 votre \xE9cran d'accueil pour une exp\xE9rience \xE9tendue et un acc\xE8s facile.",
    s1b9047d53d9f9d22: "2) Appuyez sur Partager dans la barre de navigation",
    s37a9e8aec5713460: "Plus",
    s5c6aad7a7e4a1437: "3) Appuyez sur Ajouter \xE0 l'\xE9cran d'accueil",
    s6196153c4b0c1ea0: "Installer",
    s922329d6f6213590: "Ajouter au Dock",
    sa5ef80b4bb9b39f8: "Moins",
    sa7551383d1897fcc: "2) Appuyez sur Ajouter au Dock",
    sba52286c21552a4e:
      "Installez-le sur votre appareil pour une exp\xE9rience compl\xE8te et un acc\xE8s facile.",
    sc79fd7641eb9a975: "Masquer les instructions",
    scdaf4bbff76674c8: "Ajouter \xE0 l'\xE9cran d'accueil",
    sdfe23506a3b0cdc8: "1) Ouvrir dans le navigateur Safari",
    se740f75b95a51807:
      "Ajoutez-le \xE0 votre Dock pour une exp\xE9rience \xE9tendue et un acc\xE8s facile.",
    sfea652f6580ff086:
      "Ce site poss\xE8de des fonctionnalit\xE9s d'application.",
  },
  hN = {
    s182ab2d6c997515f:
      "\u0414\u043E\u0434\u0430\u0458\u0442\u0435 \u0433\u0430 \u043D\u0430 Home Screen \u0437\u0430 \u0448\u0438\u0440\u043E\u043A\u0435 \u043C\u043E\u0433\u0443\u045B\u043D\u043E\u0441\u0442\u0438 \u0438 \u043B\u0430\u043A \u043F\u0440\u0438\u0441\u0442\u0443\u043F.",
    s1b9047d53d9f9d22:
      "2) \u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 Share \u0443 \u043D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043E\u043D\u043E\u0458 \u0442\u0440\u0430\u0446\u0438",
    s37a9e8aec5713460: "\u0412\u0438\u0448\u0435",
    s5c6aad7a7e4a1437:
      "3) \u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 Add to Home Screen",
    s6196153c4b0c1ea0:
      "\u0418\u043D\u0441\u0442\u0430\u043B\u0438\u0440\u0430\u0458",
    sa5ef80b4bb9b39f8: "\u041C\u0430\u045A\u0435",
    sa7551383d1897fcc:
      "3) \u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 Add to Dock",
    sba52286c21552a4e:
      "\u0418\u043D\u0441\u0442\u0430\u043B\u0438\u0440\u0430\u0458\u0442\u0435 \u0433\u0430 \u043D\u0430 \u0432\u0430\u0448\u0435\u043C \u0443\u0440\u0435\u0452\u0430\u0458\u0443 \u0437\u0430 \u0448\u0438\u0440\u043E\u043A\u0435 \u043C\u043E\u0433\u0443\u045B\u043D\u043E\u0441\u0442\u0438 \u0438 \u043B\u0430\u043A \u043F\u0440\u0438\u0441\u0442\u0443\u043F.",
    sc79fd7641eb9a975:
      "\u0421\u0430\u043A\u0440\u0438\u0458 \u0443\u043F\u0443\u0442\u0441\u0442\u0432\u043E",
    sdfe23506a3b0cdc8:
      "1) \u041E\u0442\u0432\u043E\u0440\u0438\u0442\u0435 \u0443 Safari \u043F\u0440\u0435\u0433\u043B\u0435\u0434\u0430\u0447\u0443",
    se740f75b95a51807:
      "\u0414\u043E\u0434\u0430\u0458\u0442\u0435 \u0433\u0430 \u0443 \u0432\u0430\u0448\u0443 Dock \u0437\u0430 \u0448\u0438\u0440\u043E\u043A\u0435 \u043C\u043E\u0433\u0443\u045B\u043D\u043E\u0441\u0442\u0438 \u0438 \u043B\u0430\u043A \u043F\u0440\u0438\u0441\u0442\u0443\u043F.",
    sfea652f6580ff086:
      "\u041E\u0432\u0430\u0458 \u0441\u0430\u0458\u0442 \u0438\u043C\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u043D\u043E\u0441\u0442 \u0430\u043F\u043B\u0438\u043A\u0430\u0446\u0438\u0458\u0435.",
    s922329d6f6213590: "Add to Dock",
    scdaf4bbff76674c8: "Add to Home Screen",
  },
  pN = {
    s182ab2d6c997515f:
      "Dodaj do swojego Ekranu G\u0142\xF3wnego, aby uzyska\u0107 bogate do\u015Bwiadczenie i \u0142atwy dost\u0119p.",
    s1b9047d53d9f9d22: '2) Wybierz "Udost\u0119pnij"',
    s37a9e8aec5713460: "Wi\u0119cej",
    s5c6aad7a7e4a1437: '3) Wybierz "Dodaj do Ekranu G\u0142\xF3wnego"',
    s6196153c4b0c1ea0: "Zainstaluj",
    s922329d6f6213590: "Dodaj do Docka",
    sa5ef80b4bb9b39f8: "Mniej",
    sa7551383d1897fcc: '2) Wybierz "Dodaj do Docka"',
    sba52286c21552a4e:
      "Zainstaluj na swoim urz\u0105dzeniu, aby uzyska\u0107 bogate do\u015Bwiadczenie i \u0142atwy dost\u0119p.",
    sc79fd7641eb9a975: "Ukryj instrukcj\u0119",
    scdaf4bbff76674c8: "Dodaj do Ekranu G\u0142\xF3wnego",
    sdfe23506a3b0cdc8: "1) Otw\xF3rz przegl\u0105dark\u0119 Safari",
    se740f75b95a51807:
      "Dodaj do swojego Docka, aby uzyska\u0107 bogate do\u015Bwiadczenie i \u0142atwy dost\u0119p.",
    sfea652f6580ff086: "Ta strona posiada funkcje aplikacji.",
  },
  fN = {
    s182ab2d6c997515f:
      "\u0414\u043E\u0434\u0430\u0439\u0442\u0435 \u043D\u0430 \u0414\u043E\u043C\u0430\u0448\u043D\u0456\u0439 \u0435\u043A\u0440\u0430\u043D \u0434\u043B\u044F \u0437\u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 \u0442\u0430 \u0448\u0438\u0440\u0448\u0438\u0445 \u043C\u043E\u0436\u043B\u0438\u0432\u043E\u0441\u0442\u0435\u0439.",
    s1b9047d53d9f9d22:
      "2) \u041D\u0430\u0442\u0438\u0441\u043D\u0443\u0442\u0438 \xAB\u041F\u043E\u0434\u0456\u043B\u0438\u0442\u0438\u0441\u044F\xBB",
    s37a9e8aec5713460:
      "\u0414\u0435\u0442\u0430\u043B\u044C\u043D\u0456\u0448\u0435",
    s5c6aad7a7e4a1437:
      "3) \u041D\u0430\u0442\u0438\u0441\u043D\u0443\u0442\u0438 \xAB\u041D\u0430 \u041F\u043E\u0447\u0430\u0442\u043A\u043E\u0432\u0438\u0439 \u0435\u043A\u0440\u0430\u043D\xBB",
    s6196153c4b0c1ea0:
      "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0438",
    s922329d6f6213590: "\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u0430 Dock",
    sa5ef80b4bb9b39f8: "\u0417\u0433\u043E\u0440\u043D\u0443\u0442\u0438",
    sa7551383d1897fcc:
      "2) \u041D\u0430\u0442\u0438\u0441\u043D\u0443\u0442\u0438 \xAB\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u0430 Dock\xBB",
    sba52286c21552a4e:
      "\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043D\u0430 \u0432\u0430\u0448 \u043F\u0440\u0438\u0441\u0442\u0440\u0456\u0439 \u0434\u043B\u044F \u0437\u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 \u0442\u0430 \u0448\u0438\u0440\u0448\u0438\u0445 \u043C\u043E\u0436\u043B\u0438\u0432\u043E\u0441\u0442\u0435\u0439.",
    sc79fd7641eb9a975:
      "\u0421\u0445\u043E\u0432\u0430\u0442\u0438 \u0406\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0456\u044E",
    scdaf4bbff76674c8:
      "\u041D\u0430 \u041F\u043E\u0447\u0430\u0442\u043A\u043E\u0432\u0438\u0439 \u044D\u043A\u0440\u0430\u043D",
    sdfe23506a3b0cdc8:
      "1) \u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 Safari \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0456",
    se740f75b95a51807:
      "\u0414\u043E\u0434\u0430\u0439\u0442\u0435 \u043D\u0430 \u043F\u0430\u043D\u0435\u043B\u044C Dock \u0434\u043B\u044F \u0437\u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 \u0442\u0430 \u0448\u0438\u0440\u0448\u0438\u0445 \u043C\u043E\u0436\u043B\u0438\u0432\u043E\u0441\u0442\u0435\u0439.",
    sfea652f6580ff086:
      "\u0426\u0435\u0439 \u0441\u0430\u0439\u0442 \u043C\u0430\u0454 \u0444\u0443\u043D\u043A\u0446\u0456\u0457 \u0434\u043E\u0434\u0430\u0442\u043A\u0443.",
  },
  mN = {
    s182ab2d6c997515f:
      "\u5C07\u5176\u52A0\u5165\u4E3B\u5C4F\u5E55\uFF0C\u4EE5\u7372\u5F97\u66F4\u8C50\u5BCC\u7684\u9AD4\u9A57\u548C\u4FBF\u6377\u8A2A\u554F\u3002",
    s1b9047d53d9f9d22:
      "2) \u9EDE\u64CA\u5217\u8868\u4E0A\u7684\u5206\u4EAB\u6309\u9215",
    s37a9e8aec5713460: "\u8A73\u7D30\u8CC7\u8A0A",
    s5c6aad7a7e4a1437: "3) \u9EDE\u64CA\u52A0\u5165\u4E3B\u756B\u9762",
    s6196153c4b0c1ea0: "\u5B89\u88DD",
    s922329d6f6213590: "\u6DFB\u52A0\u5230Dock\u6B04",
    sa5ef80b4bb9b39f8: "\u7C21\u77ED\u8CC7\u8A0A",
    sa7551383d1897fcc: "2) \u9EDE\u9078\u6DFB\u52A0\u5230Dock\u6B04",
    sba52286c21552a4e:
      "\u5728\u60A8\u7684\u88DD\u7F6E\u4E0A\u5B89\u88DD\u5B83\uFF0C\u4EE5\u7372\u5F97\u66F4\u8C50\u5BCC\u7684\u9AD4\u9A57\u548C\u4FBF\u6377\u8A2A\u554F\u3002",
    sc79fd7641eb9a975: "\u96B1\u85CF\u5B89\u88DD\u6D41\u7A0B",
    scdaf4bbff76674c8: "\u5C07App\u52A0\u5165\u4E3B\u756B\u9762",
    sdfe23506a3b0cdc8: "1) \u5728Safari\u4E0A\u700F\u89BD\u6B64\u7DB2\u9801",
    se740f75b95a51807:
      "\u5C07\u5176\u52A0\u5165\u4F60\u7684Dock\u6B04\uFF0C\u4EE5\u7372\u5F97\u66F4\u8C50\u5BCC\u7684\u9AD4\u9A57\u548C\u4FBF\u6377\u8A2A\u554F\u3002",
    sfea652f6580ff086:
      "\u6B64\u7DB2\u7AD9\u5177\u6709\u61C9\u7528\u7A0B\u5F0F\u529F\u80FD\u3002",
  },
  gN = {
    s182ab2d6c997515f:
      "\u5C06\u5176\u6DFB\u52A0\u5230\u4E3B\u5C4F\u5E55\uFF0C\u4EE5\u4EAB\u53D7\u66F4\u5168\u9762\u7684\u4F53\u9A8C\u5E76\u4FBF\u4E8E\u8BBF\u95EE\u3002",
    s1b9047d53d9f9d22:
      "2) \u70B9\u51FB\u5217\u8868\u4E0A\u7684\u5206\u4EAB\u6309\u94AE",
    s37a9e8aec5713460: "\u8BE6\u7EC6\u8D44\u8BAF",
    s5c6aad7a7e4a1437: "3) \u70B9\u51FB\u52A0\u5165\u4E3B\u753B\u9762",
    s6196153c4b0c1ea0: "\u5B89\u88C5",
    s922329d6f6213590: "\u6DFB\u52A0\u5230Dock",
    sa5ef80b4bb9b39f8: "\u7B80\u77ED\u8D44\u8BAF",
    sa7551383d1897fcc: "2) \u6309\u4E0B\u6DFB\u52A0\u5230Dock",
    sba52286c21552a4e:
      "\u5728\u60A8\u7684\u8BBE\u5907\u4E0A\u5B89\u88C5\uFF0C\u4EE5\u4EAB\u6709\u66F4\u5168\u9762\u7684\u4F53\u9A8C\u548C\u4FBF\u6377\u7684\u8BBF\u95EE\u3002",
    sc79fd7641eb9a975: "\u9690\u85CF\u5B89\u88C5\u6D41\u7A0B",
    scdaf4bbff76674c8: "\u5C06App\u52A0\u5165\u4E3B\u753B\u9762",
    sdfe23506a3b0cdc8: "1) \u5728Safari\u4E0A\u6D4F\u89C8\u6B64\u7F51\u9875",
    se740f75b95a51807:
      "\u5C06\u5176\u6DFB\u52A0\u5230\u60A8\u7684Dock\uFF0C\u4EE5\u4EAB\u53D7\u66F4\u5168\u9762\u7684\u4F53\u9A8C\u5E76\u4FBF\u4E8E\u8BBF\u95EE\u3002",
    sfea652f6580ff086:
      "\u6B64\u7F51\u7AD9\u5177\u5907app\u7684\u529F\u80FD\u6027\u3002",
  },
  yN = {
    s182ab2d6c997515f:
      "Aggiungilo alla schermata principale per un'esperienza pi\xF9 completa e un accesso facile.",
    s1b9047d53d9f9d22: "2) Premi Condividi nella barra di navigazione",
    s37a9e8aec5713460: "Pi\xF9",
    s5c6aad7a7e4a1437: "3) Premi Aggiungi alla schermata principale",
    s6196153c4b0c1ea0: "Installa",
    s922329d6f6213590: "Aggiungi al Dock",
    sa5ef80b4bb9b39f8: "Meno",
    sa7551383d1897fcc: "2) Premi Aggiungi al Dock",
    sba52286c21552a4e:
      "Installalo sul tuo dispositivo per un'esperienza pi\xF9 completa e un accesso facile.",
    sc79fd7641eb9a975: "Nascondi istruzioni",
    scdaf4bbff76674c8: "Aggiungi alla schermata principale",
    sdfe23506a3b0cdc8: "1) Apri nel browser Safari",
    se740f75b95a51807:
      "Aggiungilo al Dock per un'esperienza pi\xF9 completa e un accesso facile.",
    sfea652f6580ff086: "Questo sito ha funzionalit\xE0 di app.",
  },
  bN = {
    s182ab2d6c997515f:
      "P\u0159idejte jej na plochu pro roz\u0161\xED\u0159en\xE9 vyu\u017Eit\xED a snadn\xFD p\u0159\xEDstup.",
    s1b9047d53d9f9d22:
      "2) Stiskn\u011Bte tla\u010D\xEDtko Sd\xEDlet na naviga\u010Dn\xEDm panelu",
    s37a9e8aec5713460: "Vice",
    s5c6aad7a7e4a1437:
      "3) Stiskn\u011Bte tla\u010D\xEDtko P\u0159idat na plochu",
    s6196153c4b0c1ea0: "Nainstalovat",
    s922329d6f6213590: "P\u0159idat do Docku",
    sa5ef80b4bb9b39f8: "M\xE9n\u011B",
    sa7551383d1897fcc: "2) Stiskn\u011Bte P\u0159idat do Docku",
    sba52286c21552a4e:
      "Nainstalujte si jej na sv\xE9 za\u0159\xEDzen\xED pro roz\u0161\xED\u0159en\xE9 vyu\u017Eit\xED a snadn\xFD p\u0159\xEDstup.",
    sc79fd7641eb9a975: "Skr\xFDt instrukce",
    scdaf4bbff76674c8: "P\u0159idat na plochu",
    sdfe23506a3b0cdc8: "1) Otev\u0159ete v prohl\xED\u017Ee\u010Di Safari",
    se740f75b95a51807:
      "P\u0159idejte jej do sv\xE9ho Docku pro roz\u0161\xED\u0159en\xE9 vyu\u017Eit\xED a snadn\xFD p\u0159\xEDstup.",
    sfea652f6580ff086: "Tento web m\xE1 funkce aplikace.",
  },
  vN = {
    s182ab2d6c997515f:
      "Legg den til p\xE5 Hjem-skjermen din for \xE5 f\xE5 en bedre brukeropplevelse og raskere tilgang.",
    s1b9047d53d9f9d22: "2) Trykk p\xE5 Del-knappen i navigasjonslinjen",
    s37a9e8aec5713460: "Mer",
    s5c6aad7a7e4a1437: "3) Velg Legg til p\xE5 Hjem-skjerm",
    s6196153c4b0c1ea0: "Installer",
    s922329d6f6213590: "Legg til i Dock",
    sa5ef80b4bb9b39f8: "Mindre",
    sa7551383d1897fcc: "2) Velg Legg til i Dock",
    sba52286c21552a4e:
      "Installer den p\xE5 enheten din for \xE5 f\xE5 en bedre brukeropplevelse og raskere tilgang.",
    sc79fd7641eb9a975: "Skjul instruksjoner",
    scdaf4bbff76674c8: "Legg til p\xE5 Hjem-skjerm",
    sdfe23506a3b0cdc8: "1) \xC5pne i Safari",
    se740f75b95a51807:
      "Legg den til i Docken din for \xE5 f\xE5 en bedre brukeropplevelse og raskere tilgang.",
    sfea652f6580ff086: "Denne siden har app-funksjonalitet.",
  },
  _N = {
    s182ab2d6c997515f:
      "Adicione \xE0 Tela de In\xEDcio para uma melhor experi\xEAncia e mais f\xE1cil acesso.",
    s1b9047d53d9f9d22: "2) Pressione Compartilhar na barra de endere\xE7o",
    s37a9e8aec5713460: "Mais",
    s5c6aad7a7e4a1437: "3) Pressione Adicionar \xE0 Tela de In\xEDcio",
    s6196153c4b0c1ea0: "Instalar",
    s922329d6f6213590: "Adicionar ao Dock",
    sa5ef80b4bb9b39f8: "Menos",
    sa7551383d1897fcc: "2) Pressione Adicionar ao Dock",
    sba52286c21552a4e:
      "Instale no dispositivo para uma melhor experi\xEAncia e mais f\xE1cil acesso.",
    sc79fd7641eb9a975: "Ocultar Instru\xE7\xF5es",
    scdaf4bbff76674c8: "Adicionar \xE0 Tela de In\xEDcio",
    sdfe23506a3b0cdc8: "1) Abra no navegador Safari",
    se740f75b95a51807:
      "Adicione ao Dock para uma melhor experi\xEAncia e mais f\xE1cil acesso.",
    sfea652f6580ff086: "Este site possui funcionalidade de aplicativo.",
  },
  xN = {
    s182ab2d6c997515f:
      "\u30DB\u30FC\u30E0\u753B\u9762\u306B\u8FFD\u52A0\u3057\u3066\u3001\u5E45\u5E83\u3044\u4F53\u9A13\u3068\u7C21\u5358\u306A\u30A2\u30AF\u30BB\u30B9\u3092\u5B9F\u73FE\u3057\u3066\u304F\u3060\u3055\u3044\u3002",
    s1b9047d53d9f9d22:
      "2) \u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3\u30D0\u30FC\u3067\u5171\u6709\u3092\u62BC\u3059",
    s37a9e8aec5713460: "\u5C55\u958B",
    s5c6aad7a7e4a1437:
      "3) \u300C\u30DB\u30FC\u30E0\u753B\u9762\u306B\u8FFD\u52A0\u300D\u3092\u62BC\u3059",
    s6196153c4b0c1ea0: "\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",
    s922329d6f6213590: "Dock\u306B\u8FFD\u52A0",
    sa5ef80b4bb9b39f8: "\u6298\u308A\u305F\u305F\u3080",
    sa7551383d1897fcc:
      "2) \u300CDock\u306B\u8FFD\u52A0\u300D\u3092\u62BC\u3059",
    sba52286c21552a4e:
      "\u30C7\u30D0\u30A4\u30B9\u306B\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B\u3053\u3068\u3067\u3001\u3088\u308A\u5145\u5B9F\u3057\u305F\u4F53\u9A13\u3068\u7C21\u5358\u306A\u30A2\u30AF\u30BB\u30B9\u3092\u5B9F\u73FE\u3067\u304D\u307E\u3059\u3002",
    sc79fd7641eb9a975: "\u8AAC\u660E\u3092\u975E\u8868\u793A",
    scdaf4bbff76674c8: "\u30DB\u30FC\u30E0\u753B\u9762\u306B\u8FFD\u52A0",
    sdfe23506a3b0cdc8: "1) Safari\u3067\u958B\u304F",
    se740f75b95a51807:
      "\u30C9\u30C3\u30AF\u306B\u8FFD\u52A0\u3057\u3066\u3001\u5E45\u5E83\u3044\u4F53\u9A13\u3068\u7C21\u5358\u306A\u30A2\u30AF\u30BB\u30B9\u3092\u5B9F\u73FE\u3057\u3066\u304F\u3060\u3055\u3044\u3002",
    sfea652f6580ff086:
      "\u3053\u306E\u30B5\u30A4\u30C8\u306F\u30A2\u30D7\u30EA\u6A5F\u80FD\u304C\u3042\u308A\u307E\u3059\u3002",
  },
  e7 = new Map([
    ["ru", bv],
    ["tr", vv],
    ["de", _v],
    ["es", xv],
    ["nl", wv],
    ["el", kv],
    ["fr", Sv],
    ["sr", Cv],
    ["pl", Ev],
    ["uk", Tv],
    ["zh", Mv],
    ["zh-CN", Av],
    ["it", Iv],
    ["cs", Pv],
    ["no", Dv],
    ["pt", Lv],
    ["ja", Fv],
  ]),
  { getLocale: noe, setLocale: G8 } =
    ((nf = {
      sourceLocale: "en",
      targetLocales: nN,
      loadLocale: async (i) => e7.get(i),
    }),
    (function (i) {
      if (Q8) throw Error("lit-localize can only be configured once");
      (Cs = i), (Q8 = !0);
    })((i, e) => tN(Y8, i, e)),
    (Ym = X8 = nf.sourceLocale),
    (Xm = new Set(nf.targetLocales)),
    Xm.add(nf.sourceLocale),
    (Ov = nf.loadLocale),
    { getLocale: iN, setLocale: rN }),
  nf,
  Bv = class {
    constructor() {
      (this.icons = [{ src: "" }]),
        (this.screenshots = void 0),
        (this.short_name = "PWA"),
        (this.name = "Progressive web application"),
        (this.description = "Progressive web application");
    }
  },
  wN = rr.css`.gallery{position:relative;--scrollbar-background-color:#fff;--scrollbar-thumb-color:rgb(146, 146, 146);--scrollbar-thumb-hover-color:rgb(100, 100, 100);--nav-btn-background-color:#fff;--nav-btn-fill-color:#141414}.gallery .gallery_scroller{scroll-snap-type:x mandatory;overflow-x:auto;overflow-y:hidden;display:flex;align-items:center;padding:10px 13px;padding-bottom:10px;margin:0 10px;-webkit-overflow-scrolling:touch}.gallery .gallery_scroller img{border-radius:6px;max-height:min(45vh,500px);box-shadow:0 3px 10px 0 rgba(0,0,0,.15);scroll-snap-align:center;scroll-snap-stop:always;position:relative}.gallery .gallery_scroller img+img{margin-left:15px}.gallery .gallery_scroller::-webkit-scrollbar{width:4px;height:2px}.gallery .gallery_scroller::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb-color);border-radius:4px}.gallery .gallery_scroller::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover-color)}.gallery .gallery_scroller::-webkit-scrollbar-track{background:var(--scrollbar-background-color);border-radius:4px}.gallery .gallery_scroller .scroller_wrap{display:flex;flex-direction:row;padding-right:13px}.gallery .btn{position:absolute;display:flex;align-items:center;-webkit-user-select:none;user-select:none;top:50%;transform:translateY(-50%);height:30px;width:30px;border-radius:50%;background-color:var(--nav-btn-background-color);box-shadow:rgba(0,0,0,.3) 2px 4px 4px 1px;background-repeat:no-repeat;opacity:.8;z-index:1}.gallery .btn.prev{left:5px}.gallery .btn.prev svg{margin-left:4px}.gallery .btn.next{right:5px}.gallery .btn.next svg{transform:rotate(180deg);margin-left:6px}.gallery .btn:hover{box-shadow:rgba(0,0,0,.5) 2px 4px 4px 1px;cursor:pointer;opacity:1}.gallery .btn svg{width:20px;height:20px}.gallery .btn svg path{fill:var(--nav-btn-fill-color)}.gallery.apple_desktop{--scrollbar-background-color:rgba(0, 0, 0, 0.1);--scrollbar-thumb-color:rgb(100, 100, 100);--scrollbar-thumb-hover-color:rgba(0, 0, 0, 0.85)}.gallery.apple_desktop .gallery_scroller{margin:0;padding-top:15px}.gallery.apple_desktop .btn{height:26px;width:26px;box-shadow:rgba(0,0,0,.3) 0 2px 2px 1px}.gallery.apple_desktop .btn:hover{box-shadow:rgba(0,0,0,.3) 0 2px 2px 1px}.gallery.apple_desktop .btn:active{filter:brightness(95%)}.gallery.apple_desktop .btn:active .svg{filter:brightness(110%)}.gallery.apple_desktop .btn svg{width:12px;height:auto;opacity:1}.gallery.apple_desktop .btn svg{margin-left:7px}.gallery.apple_mobile .btn.prev svg{margin-left:7px}.gallery.apple_mobile .btn svg{width:16px;height:auto}.gallery.apple_desktop .btn,.gallery.apple_mobile .btn{opacity:1}@media(hover:none)and (pointer:coarse){.gallery .btn.next,.gallery .btn.prev{display:none}.gallery_scroller::-webkit-scrollbar{display:none}}@media(prefers-color-scheme:dark){.gallery{--scrollbar-background-color:#424242;--nav-btn-background-color:#555555;--nav-btn-fill-color:#fff}.gallery.apple_desktop{--scrollbar-thumb-color:var(--nav-btn-fill-color);--scrollbar-background-color:var(--nav-btn-background-color);--scrollbar-thumb-hover-color:var(--nav-btn-fill-color)}.gallery.apple_desktop .btn:active{filter:brightness(110%)}.gallery.apple_desktop .btn:active .svg{filter:brightness(90%)}}`,
  kN = (i, e, t, r) =>
    rr.html`${
      i
        ? rr.html`<div id="paginated_gallery" class="gallery ${e}"><div class="gallery_scroller"><div class="scroller_wrap">${i.map(
            (o) => rr.html`<img draggable="false" src='${o.src}'>`
          )}</div></div><span class="btn prev" @click="${r}">${
            e != "default"
              ? rr.html`<svg id="arrow-left" viewBox="0 0 23.023 18.518"><path fill="currentColor" d="M0 9.253c0 .305.134.586.378.818l8.106 8.093c.244.232.5.342.793.342.598 0 1.075-.44 1.075-1.05 0-.293-.11-.586-.306-.769l-2.734-2.783-4.834-4.407-.256.598 3.93.244h15.442c.635 0 1.075-.451 1.075-1.086s-.44-1.087-1.075-1.087H6.152l-3.93.245.256.61 4.834-4.419 2.734-2.783a1.09 1.09 0 0 0 .306-.77C10.352.44 9.875 0 9.277 0c-.293 0-.549.098-.818.366L.38 8.436c-.247.23-.38.511-.38.816Z"/></svg>`
              : rr.html`<svg id="arrow-left" viewBox="0 0 96 96"><path d="M39.3756,48.0022l30.47-25.39a6.0035,6.0035,0,0,0-7.6878-9.223L26.1563,43.3906a6.0092,6.0092,0,0,0,0,9.2231L62.1578,82.615a6.0035,6.0035,0,0,0,7.6878-9.2231Z" fill="%23999" fill-rule="evenodd"/></svg>`
          } </span><span class="btn next" @click="${t}">${
            e != "default"
              ? rr.html`<svg height="15" width="15"><use href="#arrow-left"></use></svg>`
              : rr.html` <svg height="15" width="15"><use href="#arrow-left"></use></svg> `
          }</span></div>`
        : ""
    }`,
  yv = function (i, e, t, r) {
    var o,
      n = arguments.length,
      u =
        n < 3
          ? e
          : r === null
          ? (r = Object.getOwnPropertyDescriptor(e, t))
          : r;
    if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
      u = Reflect.decorate(i, e, t, r);
    else
      for (var h = i.length - 1; h >= 0; h--)
        (o = i[h]) && (u = (n < 3 ? o(u) : n > 3 ? o(e, t, u) : o(e, t)) || u);
    return n > 3 && u && Object.defineProperty(e, t, u), u;
  },
  W8 = function (i, e) {
    if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
      return Reflect.metadata(i, e);
  },
  sf = class extends rr.LitElement {
    constructor() {
      super(...arguments),
        (this.screenshots = []),
        (this.theme = "default"),
        (this.calcScrollSize = () => {
          let i = this.shadowRoot.querySelector("#paginated_gallery");
          if (!i) return;
          let e = i.querySelector(".gallery_scroller");
          if (!e) return;
          let t = Array.from(e.querySelectorAll("img"));
          if (!t) return;
          let r = t.find((o) => o.offsetWidth + o.offsetLeft >= e.scrollLeft);
          return r ? { scroller: e, item: r } : void 0;
        }),
        (this.scrollToNextPage = () => {
          let i = this.calcScrollSize();
          i &&
            i.item.nextElementSibling &&
            i.scroller.scrollTo({
              top: 0,
              left:
                i.scroller.scrollLeft +
                i.scroller.clientWidth +
                i.item.nextElementSibling.clientWidth / 2,
              behavior: "smooth",
            });
        }),
        (this.scrollToPrevPage = () => {
          let i = this.calcScrollSize();
          i &&
            i.item.previousElementSibling &&
            i.scroller.scrollTo({
              top: 0,
              left:
                i.scroller.scrollLeft -
                i.scroller.clientWidth -
                i.item.previousElementSibling.clientWidth / 2,
              behavior: "smooth",
            });
        }),
        (this._init = () => {});
    }
    static get styles() {
      return wN;
    }
    firstUpdated() {
      let i = this.calcScrollSize();
      i &&
        setTimeout(() => {
          i.scroller.scrollTo({ top: 0, left: 0 });
        }, 300);
    }
    connectedCallback() {
      super.connectedCallback(), this._init();
    }
    render() {
      return rr.html`${kN(
        this.screenshots,
        this.theme,
        this.scrollToNextPage,
        this.scrollToPrevPage
      )}`;
    }
  };
yv(
  [(0, Mn.property)(), W8("design:type", Object)],
  sf.prototype,
  "screenshots",
  void 0
),
  yv(
    [(0, Mn.property)(), W8("design:type", String)],
    sf.prototype,
    "theme",
    void 0
  ),
  (sf = yv([(0, Mn.customElement)("pwa-gallery")], sf));
var SN = sf,
  CN = (i, e, t, r) =>
    rr.html`<div class="touch-header" id="touch-header"></div><div class="body-header"><div class="icon"><img src="${t}" alt="icon" class="icon-image"></div><div class="about"><div class="name"><label>${i}</label></div><div class="hostname">${
      location.hostname
    }</div></div><button class="material-button primary install" @click='${r}'>${Cs(
      "Install"
    )}</button></div>${e ? rr.html`<div class="description">${e}</div>` : ""}`,
  Dd = (i, e, t) => {
    let r = new CustomEvent(e, { detail: { message: t } });
    i.dispatchEvent(r);
  },
  wo = class {
    static isAppleMobile() {
      return !(
        !(
          ["iPhone", "iPad", "iPod"].includes(navigator.platform) ||
          (navigator.userAgent.match(/Mac/) &&
            navigator.maxTouchPoints &&
            navigator.maxTouchPoints > 2)
        ) || !("serviceWorker" in navigator)
      );
    }
    static isAppleDesktop() {
      let e = navigator.userAgent.toLowerCase();
      if (navigator.maxTouchPoints || !e.match(/macintosh/)) return !1;
      let t = /version\/(\d{2})\./.exec(e);
      if (!(t && t[1] && parseInt(t[1]) >= 17)) return !1;
      let r = !!document
          .createElement("audio")
          .canPlayType('audio/wav; codecs="1"'),
        o = !!new OffscreenCanvas(1, 1).getContext("webgl");
      return r && o;
    }
    static isStandalone() {
      return !!(
        window.matchMedia("(display-mode: standalone)").matches ||
        ("standalone" in navigator && navigator.standalone === !0)
      );
    }
    static async getInstalledRelatedApps() {
      if ("getInstalledRelatedApps" in navigator)
        try {
          await navigator.getInstalledRelatedApps().then((e) => e);
        } catch {}
      return [];
    }
    static async isRelatedAppsInstalled() {
      return !!(await this.getInstalledRelatedApps()).length;
    }
    static eventInstalledSuccess(e) {
      Dd(
        e,
        "pwa-install-success-event",
        "App install success (Chromium/Android only)"
      );
    }
    static eventInstalledFail(e) {
      Dd(
        e,
        "pwa-install-fail-event",
        "App install failed (Chromium/Android only)"
      );
    }
    static eventUserChoiceResult(e, t) {
      Dd(e, "pwa-user-choice-result-event", t);
    }
    static eventInstallAvailable(e) {
      Dd(e, "pwa-install-available-event", "App install available");
    }
    static eventInstallHowTo(e) {
      Dd(e, "pwa-install-how-to-event", "App install instruction showed");
    }
    static eventGallery(e) {
      Dd(e, "pwa-install-gallery-event", "App install gallery showed");
    }
  },
  of = function (i, e, t, r) {
    var o,
      n = arguments.length,
      u =
        n < 3
          ? e
          : r === null
          ? (r = Object.getOwnPropertyDescriptor(e, t))
          : r;
    if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
      u = Reflect.decorate(i, e, t, r);
    else
      for (var h = i.length - 1; h >= 0; h--)
        (o = i[h]) && (u = (n < 3 ? o(u) : n > 3 ? o(e, t, u) : o(e, t)) || u);
    return n > 3 && u && Object.defineProperty(e, t, u), u;
  },
  Km = function (i, e) {
    if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
      return Reflect.metadata(i, e);
  },
  yu = class extends rr.LitElement {
    constructor() {
      super(...arguments),
        (this.props = { name: "", description: "", icon: "" }),
        (this.install = { handleEvent: () => {} }),
        (this.hideDialog = () => {}),
        (this.disableClose = !1),
        (this._callInstall = () => {
          this.install.handleEvent();
        }),
        (this._callHide = () => {
          this.hideDialog(), this.setupAppearence();
        }),
        (this.bindedElement = null),
        (this._saveBodyStyle = document.body.style.overscrollBehaviorY),
        (this.dragMobileSheet = (i, e, t) => {
          if (!i || !e || !t) return null;
          let r = 0,
            o = e.clientHeight + t.clientHeight,
            n = (_) =>
              _.clientY ||
              (_.changedTouches && _.changedTouches.length
                ? _.changedTouches[0].clientY
                : 0),
            u = (_) => {
              window.addEventListener("mouseup", h),
                window.addEventListener("mousemove", m),
                window.addEventListener("touchend", h),
                window.addEventListener("touchmove", m),
                (r = n(_) - e.getBoundingClientRect().top),
                (document.body.style.overscrollBehaviorY = "none");
            },
            h = (_) => {
              if (
                ((document.body.style.overscrollBehaviorY =
                  this._saveBodyStyle),
                !this.disableClose && n(_) >= window.innerHeight - 25)
              )
                b(_, window.innerHeight + 50, !0);
              else if (window.innerHeight - n(_) > i.clientHeight / 2.5) {
                b(_, window.innerHeight - i.clientHeight);
                try {
                  wo.eventGallery(this.getRootNode().host);
                } catch {}
              } else b(_, window.innerHeight - o - 35);
            },
            m = (_) => {
              let S = n(_);
              (this.disableClose && window.innerHeight - S < 70) ||
                S <= window.innerHeight - i.clientHeight + r ||
                (i.style.setProperty("transition", "none"),
                i.style.setProperty("--translateY", `translateY(${S - r}px)`));
            },
            b = (_, S, T) => {
              window.removeEventListener("mouseup", h),
                window.removeEventListener("mousemove", m),
                window.removeEventListener("touchend", h),
                window.removeEventListener("touchmove", m),
                window.innerWidth >= 768 ||
                  (!S && n(_) >= window.innerHeight - o
                    ? i.style.setProperty(
                        "--translateY",
                        `translateY(calc(100vh - ${o}px))`
                      )
                    : i.style.setProperty(
                        "--translateY",
                        `translateY(${(S || n(_)) + 35}px)`
                      ),
                  i.style.setProperty(
                    "transition",
                    "transform 500ms cubic-bezier(0.4, 0, 0, 1) 0s"
                  ),
                  T &&
                    (e.removeEventListener("mousedown", u),
                    e.removeEventListener("touchstart", u),
                    setTimeout(this._callHide, 250)));
            };
          return (
            e.addEventListener("mousedown", u),
            e.addEventListener("touchstart", u, { passive: !0 }),
            b(new MouseEvent("mouseup"), window.innerHeight - o - 35),
            { touchElement: e, listener: u }
          );
        }),
        (this.setupAppearence = () => {
          this.bindedElement &&
            (this.bindedElement.touchElement.removeEventListener(
              "mousedown",
              this.bindedElement.listener
            ),
            this.bindedElement.touchElement.removeEventListener(
              "touchstart",
              this.bindedElement.listener
            )),
            (this.bindedElement = this.dragMobileSheet(
              this.parentElement?.parentElement,
              this.parentElement?.getElementsByClassName("touch-header")[0],
              this.parentElement?.getElementsByClassName("body-header")[0]
            ));
        }),
        (this._init = () => {
          this.setupAppearence(),
            window.addEventListener("resize", this.setupAppearence);
        });
    }
    firstUpdated() {
      this._init();
    }
    createRenderRoot() {
      return this;
    }
    connectedCallback() {
      super.connectedCallback();
    }
    render() {
      return rr.html`${CN(
        this.props.name,
        this.props.description,
        this.props.icon,
        this._callInstall
      )}`;
    }
  };
of(
  [(0, Mn.property)({ type: Object }), Km("design:type", Object)],
  yu.prototype,
  "props",
  void 0
),
  of(
    [(0, Mn.property)({ type: Object }), Km("design:type", Object)],
    yu.prototype,
    "install",
    void 0
  ),
  of(
    [(0, Mn.property)(), Km("design:type", Object)],
    yu.prototype,
    "hideDialog",
    void 0
  ),
  of(
    [(0, Mn.property)(), Km("design:type", Object)],
    yu.prototype,
    "disableClose",
    void 0
  ),
  (yu = of([(0, Mn.customElement)("pwa-bottom-sheet")], yu));
var EN = yu,
  TN = rr.css`#pwa-install-element{-webkit-user-select:none;user-select:none}#pwa-install-element .install-dialog{--text-color-normal:#212121;--background-color:#fff;--border-bottom-color:#DBDCDE;--scrollbar-background-color:#fff;font-family:Roboto,"Segoe UI",system-ui;position:fixed;display:inline-block;opacity:0;visibility:hidden;z-index:2147483001}#pwa-install-element .install-dialog.chrome{max-width:380px;width:90%;min-height:90px;margin:0 auto;right:150px;left:auto;background-color:var(--background-color);filter:drop-shadow(0 5px 15px rgba(0, 0, 0, .3));font-size:15px;color:var(--text-color-normal);border-radius:8px;top:-100px;transition:top .5s ease-in-out,opacity .8s ease-in-out,max-height .35s ease-in-out}#pwa-install-element .install-dialog.chrome.available{opacity:1;top:28px;visibility:visible}#pwa-install-element .install-dialog.chrome .dialog-body{display:grid;grid-template-columns:70px 1fr}#pwa-install-element .install-dialog.chrome .dialog-body .icon{display:flex;align-items:flex-start}#pwa-install-element .install-dialog.chrome .dialog-body .icon .icon-image{width:48px;height:48px;margin:0 auto;margin-top:10px;border-radius:6px}#pwa-install-element .install-dialog.chrome .dialog-body .about{display:grid;grid-template-rows:30px auto}#pwa-install-element .install-dialog.chrome .dialog-body .about .hostname,#pwa-install-element .install-dialog.chrome .dialog-body .about .name{padding:0 5px;overflow:hidden}#pwa-install-element .install-dialog.chrome .dialog-body .about .name{font-weight:500;font-size:18px;line-height:24px;margin-top:5px;align-items:flex-start;display:flex}#pwa-install-element .install-dialog.chrome .dialog-body .about .name label{text-overflow:ellipsis;word-break:break-all;white-space:nowrap;overflow:hidden}#pwa-install-element .install-dialog.chrome .dialog-body .about .hostname{font-size:13px;font-weight:400;opacity:.7;line-height:14px;overflow-x:hidden;text-overflow:ellipsis;text-align:left;word-break:break-all;white-space:nowrap}#pwa-install-element .install-dialog.chrome .dialog-body .about+hr{margin-top:10px}#pwa-install-element .install-dialog.chrome .dialog-body .description{font-weight:400;line-height:20px;grid-column:1/3;padding:0 6px;margin:10px 5px 5px;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;max-height:115px;overflow:hidden;overflow-y:auto;text-overflow:ellipsis;text-align:left}#pwa-install-element .install-dialog.chrome .dialog-body .app-description{font-size:13px;margin-bottom:10px}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar{width:4px;height:4px}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar-thumb{background:#929292;border-radius:4px}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar-thumb:hover{background:#646464}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar-track{background:var(--scrollbar-background-color);border-radius:4px}#pwa-install-element .install-dialog.chrome .dialog-body .install-description{font-size:14px}#pwa-install-element .install-dialog.chrome .dialog-body hr{height:1px;width:100%;grid-column:1/3;background-color:var(--border-bottom-color);border:none;margin:0}#pwa-install-element .install-dialog.chrome .dialog-body .action-buttons{display:grid;grid-template-columns:50% auto;grid-column-start:1;grid-column-end:3;gap:10px;padding:10px 10px}#pwa-install-element .install-dialog.chrome .dialog-body .action-buttons .primary{grid-column-start:2}#pwa-install-element .install-dialog.chrome .dialog-body pwa-gallery{grid-column:1/3;max-height:0;opacity:0;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;overflow:hidden}#pwa-install-element .install-dialog.chrome.gallery pwa-gallery{transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out;max-height:70vh;opacity:1}#pwa-install-element .install-dialog.mobile{--touch-header-color:#DBDCE0;top:0;max-width:414px;width:100%;bottom:auto;left:0;right:0;transition:none;transform:translateY(100vh);border-radius:0;border-top-left-radius:15px;border-top-right-radius:15px;padding-bottom:35px}#pwa-install-element .install-dialog.mobile .dialog-body{grid-template-columns:1fr}#pwa-install-element .install-dialog.mobile .dialog-body .touch-header{height:30px;width:100%;padding-top:10px;box-sizing:border-box;cursor:grab}#pwa-install-element .install-dialog.mobile .dialog-body .touch-header:active{cursor:grabbing}#pwa-install-element .install-dialog.mobile .dialog-body .touch-header::before{content:"";width:40px;height:5px;border-radius:3px;background:var(--touch-header-color);margin:0 auto;display:block}#pwa-install-element .install-dialog.mobile .dialog-body .body-header{display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:15px;padding:18px 20px;padding-top:0;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .install{text-transform:capitalize;height:40px;padding:0 23px}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .about{grid-template-rows:auto auto;grid-gap:6px}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .about .name{padding:0;line-height:20px;font-size:16px}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .about .hostname{font-size:14px;font-weight:400;opacity:.7;line-height:14px;overflow-x:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap;padding:0}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .icon .icon-image{margin:0;width:45px;height:45px}#pwa-install-element .install-dialog.mobile .dialog-body .description{padding:15px 20px 0;margin:0;margin-bottom:15px;-webkit-line-clamp:6;max-height:150px}#pwa-install-element .install-dialog.mobile .dialog-body pwa-gallery{max-height:100%;padding-bottom:15px;opacity:1}#pwa-install-element .install-dialog.mobile .material-button{border-radius:20px}#pwa-install-element .install-dialog.mobile.available{--translateY:translateY(calc(100vh - 85px));opacity:1;top:0;visibility:visible;transform:var(--translateY)}#pwa-install-element .material-button{--text-color-primary:#fff;--text-color-secondary:#374fc6;--background-color-primary:#374fc6;--background-color-ripple:#fff;position:relative;display:inline-block;box-sizing:border-box;border:none;border-radius:6px;padding:0 16px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;text-transform:uppercase;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:Roboto,"Segoe UI",BlinkMacSystemFont,system-ui,-apple-system;font-size:14px;font-weight:500;line-height:37px;overflow:hidden;outline:0;cursor:pointer;transition:box-shadow .2s}#pwa-install-element .material-button.primary{color:var(--text-color-primary);background-color:var(--background-color-primary)}#pwa-install-element .material-button.secondary{background-color:rgba(0,0,0,0);color:var(--text-color-secondary);box-shadow:none}#pwa-install-element .material-button.secondary::after,#pwa-install-element .material-button.secondary::before{background-color:var(--background-color-primary)}#pwa-install-element .material-button.secondary:active,#pwa-install-element .material-button.secondary:hover{box-shadow:none}#pwa-install-element .material-button.secondary.close{height:26px;min-width:26px;line-height:0;margin-right:0;margin-left:auto;padding:0;border-radius:50%}#pwa-install-element .material-button.secondary.close svg{width:16px;fill:var(--text-color-secondary)}#pwa-install-element .material-button.secondary.close::after{width:25px;height:25px;border-radius:50%}#pwa-install-element .material-button.secondary.close::before{border-radius:50%}#pwa-install-element .material-button::before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:var(--background-color-ripple);opacity:0;transition:opacity .2s}#pwa-install-element .material-button::after{content:"";position:absolute;left:50%;top:50%;border-radius:50%;padding:50%;width:32px;height:32px;background-color:var(--background-color-ripple);opacity:0;transform:translate(-50%,-50%) scale(1);transition:opacity 1s,transform .5s}#pwa-install-element .material-button:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}#pwa-install-element .material-button:hover::before{opacity:.08}#pwa-install-element .material-button:hover:focus::before{opacity:.3}#pwa-install-element .material-button:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}#pwa-install-element .material-button:active::after{opacity:.32;transform:translate(-50%,-50%) scale(0);transition:transform 0s}@media(prefers-color-scheme:dark){#pwa-install-element .install-dialog{--text-color-normal:#fff;--background-color:#1e1e1e;--border-bottom-color:#404140;--scrollbar-background-color:#424242}#pwa-install-element .install-dialog.mobile{--touch-header-color:#3f403f}#pwa-install-element .install-dialog .material-button{--text-color-primary:#1B222C;--text-color-secondary:#a7c7fa;--background-color-primary:#a7c7fa}}@media(max-width:767px)and (min-height:495px){#pwa-install-element .install-dialog.chrome.mobile{display:inline-block}#pwa-install-element .install-dialog.chrome{display:none}}@media(min-width:768px),(max-height:495px){#pwa-install-element .install-dialog.chrome.mobile{display:none}#pwa-install-element .install-dialog.chrome{display:inline-block}}@media(max-height:420px){#pwa-install-element .install-dialog.chrome .dialog-body .description{-webkit-line-clamp:3;max-height:70px}}@media(hover:none)and (pointer:coarse){#pwa-install-element .install-dialog.chrome .dialog-body .description::-webkit-scrollbar{display:none}}`,
  MN = rr.css`#pwa-install-element .install-dialog.apple{--text-color-normal:#333;--text-color-description:#333;--background-color:rgba(255, 255, 255, 0.8);--text-color-button:#fff;--background-color-button:#fff;--background-color-button-active:#DBDAE0;--border-bottom-color:rgba(0, 0, 0, 0.1);--icon-how-to-color:#527AFB;font-family:system-ui,-apple-system,HelveticaNeue,BlinkMacSystemFont,Roboto,"Segoe UI";max-width:380px;width:auto;margin:0 auto;right:0;left:0;font-size:15px;color:var(--text-color-normal);bottom:0;transition:transform .4s cubic-bezier(.33,1,.66,1),opacity .5s cubic-bezier(1,0,1,-2),border .35s ease-in-out;overflow:hidden;pointer-events:none;opacity:0;visibility:visible;transform:translateY(100%);will-change:opacity,transform}#pwa-install-element .install-dialog.apple.dialog-body{display:grid;grid-template-columns:95px 1fr;grid-template-rows:1fr auto;grid-template-areas:"icon description" "welcome welcome" "how-to how-to" "gallery gallery" "button button";border-radius:10px;border-bottom:1px solid transparent;background-color:var(--background-color);filter:drop-shadow(0 5px 15px rgba(0, 0, 0, .5));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}#pwa-install-element .install-dialog.apple.dialog-body .icon{display:flex;align-items:center;grid-area:icon;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple.dialog-body .icon .icon-image{width:64px;height:64px;margin:0 auto;border-radius:6px}#pwa-install-element .install-dialog.apple.dialog-body .close{height:26px;min-width:26px;line-height:0;margin-right:7px;margin-top:7px;margin-left:auto;padding:0;border-radius:50%;opacity:.5;outline:0;color:var(--text-color-normal);border:none;background-color:rgba(0,0,0,0);cursor:pointer;transition:opacity .2s ease-in-out,background-color .2s ease-in-out;grid-area:description}#pwa-install-element .install-dialog.apple.dialog-body .close svg{fill:var(--text-color-normal);width:18px}#pwa-install-element .install-dialog.apple.dialog-body .close:active,#pwa-install-element .install-dialog.apple.dialog-body .close:hover{opacity:1;background-color:var(--background-color-button)}#pwa-install-element .install-dialog.apple.dialog-body .about{display:grid;grid-template-rows:35px 60px;border-bottom:1px solid var(--border-bottom-color);grid-area:description}#pwa-install-element .install-dialog.apple.dialog-body .about .description,#pwa-install-element .install-dialog.apple.dialog-body .about .name{padding-right:15px;overflow:hidden}#pwa-install-element .install-dialog.apple.dialog-body .about .name{font-weight:600;padding-top:10px;padding-right:10px;line-height:22px;align-items:flex-start;display:flex}#pwa-install-element .install-dialog.apple.dialog-body .about .description{font-size:12px;line-height:15px;margin-bottom:15px;overflow-y:auto;color:var(--text-color-description)}#pwa-install-element .install-dialog.apple.dialog-body .welcome-to-install{font-size:15px;grid-area:welcome;text-align:left;font-weight:400;padding:15px;width:auto;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple .action-buttons{grid-area:button;grid-column-start:1;grid-column-end:3;padding:15px}#pwa-install-element .install-dialog.apple .dialog-button{display:grid;height:50px;width:100%;line-height:50px;border-radius:8px;color:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .dialog-button.button{border:none;outline:0;font-family:system-ui,-apple-system,HelveticaNeue,BlinkMacSystemFont;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400;font-size:17px;padding:0;margin:0;background-color:var(--background-color-button)}#pwa-install-element .install-dialog.apple .dialog-button.button.install{padding:0 15px;text-align:left}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text{opacity:0;display:flex;align-items:center;justify-content:space-between;transition:opacity .4s ease-in-out .1s;overflow:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text>span{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text>svg{flex-shrink:0;width:20px}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text.show{opacity:1;visibility:visible;width:auto;height:auto}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text.hide{opacity:0;position:absolute;width:0;height:0;visibility:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.gallery{display:flex;align-items:center;min-width:50px;width:auto;margin-right:15px}#pwa-install-element .install-dialog.apple .dialog-button.button.gallery #pwa-gallery{margin:0 auto;width:23px;fill:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .dialog-button.button:active{background-color:var(--background-color-button-active)}#pwa-install-element .install-dialog.apple .how-to-body{opacity:0;max-height:0;overflow:hidden;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;grid-area:how-to}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description{display:grid;-webkit-user-select:none;user-select:none;grid-auto-columns:1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;padding:15px;padding-bottom:0}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step{display:inline-flex;flex-direction:row;gap:15px;align-items:center;font-size:14px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap{position:relative;display:inline-flex;flex-shrink:0;color:var(--icon-how-to-color);width:50px;height:50px;align-items:center;border-radius:6px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-add,#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-safari,#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{margin:0 auto}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{margin-bottom:4px;transform:scale(.9)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-add{transform:scale(.8);fill:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-safari{transform:scale(.92)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap .step-count{position:absolute;line-height:12px;top:3px;left:4px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .step-text{font-weight:600;text-align:left}#pwa-install-element .install-dialog.apple pwa-gallery{grid-column:1/3;max-height:0;opacity:0;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;overflow:hidden}#pwa-install-element .install-dialog.apple pwa-gallery+.action-buttons{display:flex}#pwa-install-element .install-dialog.apple.available{opacity:1;pointer-events:unset;transform:translateY(0);transition:transform .5s cubic-bezier(.33,1,.66,1),border .35s ease-in-out}#pwa-install-element .install-dialog.apple.gallery pwa-gallery{transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out;max-height:70vh;opacity:1}#pwa-install-element .install-dialog.apple.how-to .dialog-body{border-bottom:1px solid #e0e0e0}#pwa-install-element .install-dialog.apple.how-to .how-to-body{opacity:1;max-height:400px;overflow-y:auto;transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out}#pwa-install-element .install-dialog.apple.desktop{--text-color-normal:rgba(0, 0, 0, 0.85);--text-color-description:rgba(0, 0, 0, 0.85);--icon-how-to-color:rgba(0, 0, 0, 0.50);--background-color:rgb(246 246 246 / 85%);--background-color-button:#c6c1c6;--background-color-button-active:linear-gradient(0deg, rgba(64,121,250,1) 0%, rgba(84,144,251,1) 100%);--border-bottom-color:rgb(185 185 185);grid-template-columns:1fr;grid-template-rows:1fr auto;grid-template-areas:"icon" "description" "welcome" "how-to" "gallery" "button";gap:0;column-gap:0;padding:16px;max-width:260px;background:var(--background-color);border:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple.desktop .icon{height:64px;padding-bottom:16px}#pwa-install-element .install-dialog.apple.desktop .icon .icon-image{border-radius:10px;width:52px;height:52px;filter:drop-shadow(0 1px 1px rgba(0, 0, 0, .15))}#pwa-install-element .install-dialog.apple.desktop .close{grid-area:icon;background:var(--background-color-button);opacity:1;height:20px;min-width:20px;margin-right:-5px;margin-top:-5px}#pwa-install-element .install-dialog.apple.desktop .close svg{width:14px}#pwa-install-element .install-dialog.apple.desktop .about{display:flex;flex-direction:column;align-items:center}#pwa-install-element .install-dialog.apple.desktop .about .name{font-size:13px;line-height:16px;font-weight:700;padding:0}#pwa-install-element .install-dialog.apple.desktop .about .description{padding:16px 0;margin:0;padding-top:10px;border-bottom:1px solid var(--border-bottom-color);min-width:100%}#pwa-install-element .install-dialog.apple.desktop .about .description,#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{text-align:center;font-size:11px;line-height:14px}#pwa-install-element .install-dialog.apple.desktop .about,#pwa-install-element .install-dialog.apple.desktop .icon,#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{border:none}#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{padding:0;padding-top:16px}#pwa-install-element .install-dialog.apple.desktop .action-buttons{padding:0;padding-top:16px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button{font-size:13px;font-weight:400;padding:6px 8px;border-radius:6px;height:auto;line-height:18px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.install{color:#fff;background:var(--background-color-button-active);transition:background .3s ease-in-out .1s,color .3s ease-in-out}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.install svg{transform:none;width:18px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.gallery{width:30px;min-width:30px;margin-right:10px;background:var(--background-color-button)}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.gallery #pwa-gallery{width:14px;transition:transform .4s ease-in-out}#pwa-install-element .install-dialog.apple.desktop .close:active,#pwa-install-element .install-dialog.apple.desktop .dialog-button.button:active{filter:brightness(105%)}#pwa-install-element .install-dialog.apple.desktop .close:active .button-text,#pwa-install-element .install-dialog.apple.desktop .dialog-button.button:active .button-text{filter:brightness(90%)}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description{padding:0;padding-top:16px;grid-template-rows:1fr 1fr}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step{font-size:12px;gap:16px}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap{width:32px;height:32px;color:var(--icon-how-to-color)}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{width:16px;margin-bottom:2px;transform:none}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap #pwa-add{width:18px;transform:none}#pwa-install-element .install-dialog.apple.desktop.gallery #pwa-gallery{transform:rotate(180deg)}#pwa-install-element .install-dialog.apple.desktop.how-to .action-buttons .dialog-button.button.install{color:var(--text-color-normal);background:var(--background-color-button)}@media(min-width:667px){#pwa-install-element .install-dialog.apple{top:0;bottom:unset;transform:translateY(calc(-100% - 40px));right:28px;left:auto}#pwa-install-element .install-dialog.apple.available{top:28px;bottom:auto;max-height:calc(95vh - 28px)}}@media(min-width:667px)and (max-width:1366px){#pwa-install-element .install-dialog.apple{right:max(28px,env(safe-area-inset-right,28px));left:auto}}@media(max-width:666px){#pwa-install-element .install-dialog.apple .description-step .step-text{font-size:13px}#pwa-install-element .install-dialog.apple.available{bottom:20px;max-height:calc(85vh - 20px)}#pwa-install-element .install-dialog.apple.dialog-body{filter:drop-shadow(rgba(0, 0, 0, .5) 0 0 15px)}}@media(max-width:428px){#pwa-install-element .install-dialog.apple.dialog-body{max-width:100vw;filter:drop-shadow(rgba(0, 0, 0, .5) 0 -5px 10px);border-bottom-left-radius:0;border-bottom-right-radius:0}#pwa-install-element .install-dialog.apple.dialog-body .action-buttons{padding-bottom:max(15px,env(safe-area-inset-bottom))}#pwa-install-element .install-dialog.apple.dialog-body.available{bottom:0;max-height:85vh}}@media(max-height:548px){#pwa-install-element .install-dialog.apple.dialog-body.available{overflow-y:auto;max-height:calc(90vh - 28px - env(safe-area-inset-bottom,0px))}}@media(max-height:600px){#pwa-install-element .install-dialog.apple pwa-gallery{overflow-y:auto}}@media(prefers-color-scheme:dark){#pwa-install-element .install-dialog.apple.dialog-body{--text-color-normal:#fff;--text-color-description:#9E9AA1;--background-color:rgb(25 25 25 / 90%);--background-color-button:#353535;--background-color-button-active:#454545;--border-bottom-color:#353535}#pwa-install-element .install-dialog.apple.dialog-body .close:active,#pwa-install-element .install-dialog.apple.dialog-body .dialog-button.button:active{filter:brightness(105%)}#pwa-install-element .install-dialog.apple.dialog-body .close:active .button-text,#pwa-install-element .install-dialog.apple.dialog-body .dialog-button.button:active .button-text{filter:brightness(90%)}#pwa-install-element .install-dialog.apple.dialog-body.desktop{--text-color-description:var(--text-color-normal);--icon-how-to-color:#bcb8b6;--background-color:rgb(45 45 45 / 90%);--border-bottom-color:#5b5b5b;--background-color-button:#6d6765;--background-color-button-active:linear-gradient(0deg, rgba(59,108,200,1) 0%, rgba(66,123,250,1) 100%);outline:1px solid #1c1c1c;color-scheme:dark}}`,
  Rv = ((i) => {
    var e = {};
    return Qi.d(e, i), e;
  })({ classMap: () => H8 }),
  AN = (i, e, t, r, o, n, u, h, m, b, _, S, T) => {
    let D = () => ({ available: m, gallery: T }),
      F = !o && h.screenshots && h.screenshots.length;
    return rr.html`<div id="pwa-install-element"><div class="install-dialog chrome ${(0,
    Rv.classMap)(
      D()
    )}"><div class="dialog-body"><div class="icon"><img src="${u}" alt="icon" class="icon-image" draggable="false"></div><div class="about"><div class="name"><label>${i}</label> ${
      n
        ? ""
        : rr.html`<button class="material-button secondary close" @click='${b}'><svg viewBox="0 0 24 24"><path d="M5.3 18.7c.2.2.4.3.7.3s.5-.1.7-.3l5.3-5.3 5.3 5.3a1.08 1.08 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3c.4-.4.4-1 0-1.4L13.4 12l5.3-5.3c.4-.4.4-1 0-1.4s-1-.4-1.4 0L12 10.6 6.7 5.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l5.3 5.3-5.3 5.3c-.4.4-.4 1 0 1.4z"/></svg></button>`
    }</div><div class="hostname">${location.hostname}</div></div>${
      e ? rr.html`<div class="description app-description">${e}</div>` : ""
    } ${
      r
        ? ""
        : rr.html`<hr><div class="description install-description">${
            t ||
            `${Cs("This site has app functionality.")} ${Cs(
              "Install it on your device for extensive experience and easy access."
            )}`
          }</div>`
    } ${
      F
        ? rr.html`<pwa-gallery .screenshots=${h.screenshots}></pwa-gallery>`
        : ""
    }<div class="action-buttons">${
      F
        ? rr.html`<button class="material-button secondary" @click='${S}'>${Cs(
            T ? "Less" : "More"
          )}</button>`
        : ""
    } <button class="material-button primary install" @click='${_}'>${Cs(
      "Install"
    )}</button></div></div></div><div class="install-dialog chrome mobile ${(0,
    Rv.classMap)(D())}"><div class="dialog-body"><pwa-bottom-sheet .props=${{
      name: i,
      icon: u,
      description: e,
    }} .disableClose=${n} .install=${_} .hideDialog=${b}></pwa-bottom-sheet>${
      F
        ? rr.html`<pwa-gallery .screenshots=${h.screenshots}></pwa-gallery>`
        : ""
    }</div></div></div>`;
  },
  IN = (i, e, t, r, o, n, u, h, m, b, _, S, T, D, F) => {
    let q = !o && h.screenshots && h.screenshots.length;
    return rr.html`<aside id="pwa-install-element"><article class="install-dialog apple ${(0,
    Rv.classMap)({
      available: m,
      "how-to": T,
      gallery: F,
      desktop: S,
    })} dialog-body"><div class="icon"><img src="${u}" alt="icon" class="icon-image" draggable="false"></div>${
      n
        ? ""
        : rr.html`<button type="button" title="close" class="close" @click='${b}'><svg viewBox="0 0 24 24"><path d="M5.3 18.7c.2.2.4.3.7.3s.5-.1.7-.3l5.3-5.3 5.3 5.3a1.08 1.08 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3c.4-.4.4-1 0-1.4L13.4 12l5.3-5.3c.4-.4.4-1 0-1.4s-1-.4-1.4 0L12 10.6 6.7 5.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l5.3 5.3-5.3 5.3c-.4.4-.4 1 0 1.4z"/></svg></button>`
    }<div class="about"><div class="name">${i}</div><div class="description">${
      e || location.hostname
    }</div></div>${
      r
        ? ""
        : rr.html`<div class="welcome-to-install">${
            t ||
            `${Cs("This site has app functionality.")} ${Cs(
              S
                ? "Add it to your Dock for extensive experience and easy access."
                : "Add it to your Home Screen for extensive experience and easy access."
            )}`
          }</div>`
    }<div class="how-to-body"><div class="how-to-description">${
      S
        ? ""
        : rr.html`<div class="description-step"><div class="svg-wrap"><svg id="pwa-safari" viewBox="0 0 20.283 19.932" width="24" height="24"><g fill="currentColor"><path d="M9.96 19.922c5.45 0 9.962-4.522 9.962-9.961C19.922 4.51 15.4 0 9.952 0 4.511 0 0 4.512 0 9.96c0 5.44 4.521 9.962 9.96 9.962Zm0-1.66A8.26 8.26 0 0 1 1.67 9.96c0-4.61 3.672-8.3 8.281-8.3 4.61 0 8.31 3.69 8.31 8.3 0 4.61-3.69 8.3-8.3 8.3Z"/><path d="m5.87 14.883 5.605-2.735a1.47 1.47 0 0 0 .683-.673l2.725-5.596c.312-.664-.166-1.182-.85-.84L8.447 7.764c-.302.136-.508.341-.674.673L5.03 14.043c-.312.645.196 1.152.84.84Zm4.09-3.72A1.19 1.19 0 0 1 8.77 9.97c0-.664.527-1.201 1.19-1.201a1.2 1.2 0 0 1 1.202 1.2c0 .655-.537 1.192-1.201 1.192Z"/></g></svg></div><div class="step-text">${Cs(
            "1) Open in Safari browser"
          )}</div></div>`
    }<div class="description-step"><div class="svg-wrap"><svg id="pwa-share" width="25" height="32" viewBox="0 0 17.695 26.475"><g fill="currentColor"><path d="M17.334 10.762v9.746c0 2.012-1.025 3.027-3.066 3.027H3.066C1.026 23.535 0 22.52 0 20.508v-9.746C0 8.75 1.025 7.734 3.066 7.734h2.94v1.573h-2.92c-.977 0-1.514.527-1.514 1.543v9.57c0 1.015.537 1.543 1.514 1.543h11.152c.967 0 1.524-.527 1.524-1.543v-9.57c0-1.016-.557-1.543-1.524-1.543h-2.91V7.734h2.94c2.04 0 3.066 1.016 3.066 3.028Z"/><path d="M8.662 15.889c.42 0 .781-.352.781-.762V5.097l-.058-1.464.654.693 1.484 1.582a.698.698 0 0 0 .528.235c.4 0 .713-.293.713-.694 0-.205-.088-.361-.235-.508l-3.3-3.183c-.196-.196-.362-.264-.567-.264-.195 0-.361.069-.566.264L4.795 4.94a.681.681 0 0 0-.225.508c0 .4.293.694.703.694.186 0 .4-.079.538-.235l1.474-1.582.664-.693-.058 1.465v10.029c0 .41.351.762.771.762Z"/></g></svg></div><div class="step-text">${Cs(
      "2) Press Share in Navigation bar"
    ).replace(
      S ? "2)" : "0)",
      "1)"
    )}</div></div><div class="description-step"><div class="svg-wrap">${
      S
        ? rr.html`<svg id="pwa-add" viewBox="0 0 23.389 17.979" width="25" height="25"><g fill="currentColor"><path d="M1.045 3.291v1.377h20.937V3.291Zm2.021 14.688h16.895c2.05 0 3.066-1.006 3.066-3.018V3.027C23.027 1.016 22.012 0 19.961 0H3.066C1.026 0 0 1.016 0 3.027v11.934c0 2.012 1.025 3.018 3.066 3.018Zm.02-1.573c-.977 0-1.514-.517-1.514-1.533V3.115c0-1.015.537-1.543 1.514-1.543H19.94c.967 0 1.514.528 1.514 1.543v11.758c0 1.016-.547 1.533-1.514 1.533Z"/><path d="M4.2 14.014c0 .508.35.85.868.85h12.92c.518 0 .87-.343.87-.85v-1.465c0-.508-.352-.85-.87-.85H5.068c-.517 0-.869.342-.869.85Z"/></g></svg>`
        : rr.html`<svg id="pwa-add" width="25" height="25"><g><path d="m23.40492,1.60784c-1.32504,-1.32504 -3.19052,-1.56912 -5.59644,-1.56912l-10.65243,0c-2.33622,0 -4.2017,0.24408 -5.5267,1.56912c-1.32504,1.34243 -1.56911,3.17306 -1.56911,5.50924l0,10.5827c0,2.40596 0.22665,4.254 1.55165,5.57902c1.34246,1.32501 3.19052,1.5691 5.59647,1.5691l10.60013,0c2.40592,0 4.2714,-0.24408 5.59644,-1.5691c1.325,-1.34245 1.55166,-3.17306 1.55166,-5.57902l0,-10.51293c0,-2.40596 -0.22666,-4.25401 -1.55166,-5.57901zm-0.38355,5.21289l0,11.24518c0,1.51681 -0.20924,2.94643 -1.02865,3.78327c-0.83683,0.83685 -2.30134,1.0635 -3.81815,1.0635l-11.33234,0c-1.51681,0 -2.96386,-0.22665 -3.80073,-1.0635c-0.83683,-0.83684 -1.04607,-2.26646 -1.04607,-3.78327l0,-11.19288c0,-1.5517 0.20924,-3.01617 1.02865,-3.85304c0.83687,-0.83683 2.31876,-1.04607 3.87042,-1.04607l11.28007,0c1.51681,0 2.98132,0.22666 3.81815,1.06353c0.81941,0.81941 1.02865,2.26645 1.02865,3.78327zm-10.53039,12.08205c0.64506,0 1.02861,-0.43586 1.02861,-1.13326l0,-4.34117l4.53294,0c0.66252,0 1.13326,-0.36613 1.13326,-0.99376c0,-0.64506 -0.43586,-1.02861 -1.13326,-1.02861l-4.53294,0l0,-4.53294c0,-0.6974 -0.38355,-1.13326 -1.02861,-1.13326c-0.62763,0 -0.99376,0.45332 -0.99376,1.13326l0,4.53294l-4.51552,0c-0.69737,0 -1.15069,0.38355 -1.15069,1.02861c0,0.62763 0.48817,0.99376 1.15069,0.99376l4.51552,0l0,4.34117c0,0.66252 0.36613,1.13326 0.99376,1.13326z"/></g></svg>`
    }</div><div class="step-text">${Cs(
      S ? "2) Press Add to Dock" : "3) Press Add to Home Screen"
    )}</div></div></div></div>${
      q
        ? rr.html`<pwa-gallery .screenshots=${h.screenshots} .theme="${
            S ? "apple_desktop" : "apple_mobile"
          }"></pwa-gallery>`
        : ""
    }<div class="action-buttons">${
      q
        ? rr.html`<button class="dialog-button button gallery" @click=${D}>${
            S
              ? rr.html`<svg id="pwa-gallery" viewBox="0 0 10 6"><path d="m1.102 2.21 3.169 3.24c.22.222.462.333.729.333a.94.94 0 0 0 .378-.083 1.19 1.19 0 0 0 .347-.25L8.89 2.21a.8.8 0 0 0 .246-.593.838.838 0 0 0-.118-.44.884.884 0 0 0-.312-.311.84.84 0 0 0-1.063.167L4.854 3.92h.299L2.359 1.033a.868.868 0 0 0-.642-.286.822.822 0 0 0-.43.119.935.935 0 0 0-.312.312.863.863 0 0 0-.115.44c0 .116.02.223.057.32a.898.898 0 0 0 .185.272Z"/></svg>`
              : rr.html`<svg id="pwa-gallery" width="26" height="26" viewBox="0 0 23.538 18.022"><path d="M2.79 18.022h17.958c1.834 0 2.79-.969 2.79-2.778V2.791C23.538.969 22.582 0 20.748 0H2.791C.956 0 0 .956 0 2.79v12.454c0 1.835.956 2.778 2.79 2.778zM.879 2.83C.878 1.55 1.55.88 2.816.88h17.906c1.228 0 1.938.671 1.938 1.95v12.067L16.756 9.47c-.517-.414-.995-.685-1.615-.685-.607 0-1.085.22-1.576.672L8.927 13.59l-1.938-1.796c-.426-.387-.853-.607-1.382-.607-.504 0-.879.207-1.305.594L.878 14.986zm6.46 6.356a2.39 2.39 0 002.377-2.39c0-1.304-1.072-2.39-2.377-2.39a2.401 2.401 0 00-2.39 2.39 2.393 2.393 0 002.39 2.39z"/></svg>`
          }</button>`
        : ""
    } <button class="dialog-button button install" @click=${_}><span class="button-text ${
      T ? "show" : "hide"
    }">${Cs("Hide Instruction")}</span> <span class="button-text ${
      T ? "hide" : "show"
    }"><span>${Cs(
      S ? "Add to Dock" : "Add to Home Screen"
    )}</span> <svg viewBox="0 0 25 25"><use href="#pwa-add"></use></svg></span></button></div></article></aside>`;
  },
  Ss = function (i, e, t, r) {
    var o,
      n = arguments.length,
      u =
        n < 3
          ? e
          : r === null
          ? (r = Object.getOwnPropertyDescriptor(e, t))
          : r;
    if (typeof Reflect == "object" && typeof Reflect.decorate == "function")
      u = Reflect.decorate(i, e, t, r);
    else
      for (var h = i.length - 1; h >= 0; h--)
        (o = i[h]) && (u = (n < 3 ? o(u) : n > 3 ? o(e, t, u) : o(e, t)) || u);
    return n > 3 && u && Object.defineProperty(e, t, u), u;
  },
  qs = function (i, e) {
    if (typeof Reflect == "object" && typeof Reflect.metadata == "function")
      return Reflect.metadata(i, e);
  },
  ls = class extends rr.LitElement {
    constructor() {
      super(...arguments),
        (this.manifestUrl = "/manifest.json"),
        (this.icon = ""),
        (this.name = ""),
        (this.description = ""),
        (this.installDescription = ""),
        (this.disableDescription = !1),
        (this.disableScreenshots = !1),
        (this.manualApple = !1),
        (this.manualChrome = !1),
        (this.disableChrome = !1),
        (this.disableClose = !1),
        (this.externalPromptEvent = null),
        (this.platforms = []),
        (this.userChoiceResult = ""),
        (this.isDialogHidden = JSON.parse(
          window.sessionStorage.getItem("pwa-hide-install") || "false"
        )),
        (this.isInstallAvailable = !1),
        (this.isAppleMobilePlatform = !1),
        (this.isAppleDesktopPlatform = !1),
        (this.isUnderStandaloneMode = !1),
        (this.isRelatedAppsInstalled = !1),
        (this._manifest = new Bv()),
        (this._howToRequested = !1),
        (this._galleryRequested = !1),
        (this._install = {
          handleEvent: () => {
            window.defferedPromptEvent &&
              (this.hideDialog(),
              window.defferedPromptEvent.prompt(),
              window.defferedPromptEvent.userChoice
                .then((i) => {
                  (this.userChoiceResult = i.outcome),
                    wo.eventUserChoiceResult(this, this.userChoiceResult);
                })
                .catch((i) => {
                  wo.eventInstalledFail(this);
                }),
              (window.defferedPromptEvent = null));
          },
          passive: !0,
        }),
        (this.install = () => {
          this.isAppleMobilePlatform || this.isAppleDesktopPlatform
            ? ((this._howToRequested = !0), this.requestUpdate())
            : this._install.handleEvent();
        }),
        (this._hideDialog = {
          handleEvent: () => {
            (this.isDialogHidden = !0),
              window.sessionStorage.setItem("pwa-hide-install", "true"),
              this.requestUpdate();
          },
          passive: !0,
        }),
        (this._hideDialogUser = () => {
          wo.eventUserChoiceResult(this, "dismissed"),
            (this.userChoiceResult = "dismissed"),
            this.hideDialog();
        }),
        (this.hideDialog = () => {
          this._hideDialog.handleEvent();
        }),
        (this.showDialog = (i = !1) => {
          (this.isDialogHidden = !1),
            i && (this.isInstallAvailable = !0),
            window.sessionStorage.setItem("pwa-hide-install", "false"),
            this.requestUpdate();
        }),
        (this.getInstalledRelatedApps = async () =>
          await wo.getInstalledRelatedApps()),
        (this._howToForApple = {
          handleEvent: () => {
            (this._howToRequested = !this._howToRequested),
              this._howToRequested &&
                this._galleryRequested &&
                (this._galleryRequested = !1),
              this.requestUpdate(),
              this._howToRequested && wo.eventInstallHowTo(this);
          },
          passive: !0,
        }),
        (this._toggleGallery = {
          handleEvent: () => {
            (this._galleryRequested = !this._galleryRequested),
              this._howToRequested &&
                this._galleryRequested &&
                (this._howToRequested = !1),
              this._galleryRequested && wo.eventGallery(this),
              this.requestUpdate();
          },
          passive: !0,
        }),
        (this._init = async () => {
          if (
            ((window.defferedPromptEvent = null),
            this._checkInstalled(),
            !this.disableChrome)
          ) {
            let i = (e) => {
              (window.defferedPromptEvent = e),
                e.preventDefault(),
                (this.platforms = e.platforms),
                this.isRelatedAppsInstalled || this.isUnderStandaloneMode
                  ? (this.isInstallAvailable = !1)
                  : ((this.isInstallAvailable = !0),
                    wo.eventInstallAvailable(this)),
                this.userChoiceResult === "accepted" &&
                  ((this.isDialogHidden = !0), wo.eventInstalledSuccess(this)),
                this.requestUpdate();
            };
            this.externalPromptEvent != null
              ? setTimeout(() => i(this.externalPromptEvent), 300)
              : window.addEventListener("beforeinstallprompt", i);
          }
          window.addEventListener("appinstalled", (i) => {
            (window.defferedPromptEvent = null),
              (this.isInstallAvailable = !1),
              this.requestUpdate(),
              wo.eventInstalledSuccess(this);
          });
          try {
            let i = await fetch(this.manifestUrl),
              e = await i.json();
            if (!i.ok || !e || !Object.keys(e))
              throw Error("Manifest not found");
            (this.icon = this.icon || e.icons?.length ? e.icons[0].src : ""),
              (this.name = this.name || e.short_name || e.name || ""),
              (this.description = this.description || e.description || ""),
              (this._manifest = e);
          } catch {
            (this.icon = this.icon || this._manifest.icons?.[0].src || ""),
              (this.name = this.name || this._manifest.short_name || ""),
              (this.description =
                this.description || this._manifest.description || "");
          }
        }),
        (this._requestUpdate = () => {
          this.requestUpdate();
        });
    }
    static get styles() {
      return [TN, MN];
    }
    async _checkInstalled() {
      (this.isUnderStandaloneMode = wo.isStandalone()),
        (this.isRelatedAppsInstalled = await wo.isRelatedAppsInstalled()),
        (this.isAppleMobilePlatform = wo.isAppleMobile()),
        (this.isAppleDesktopPlatform = wo.isAppleDesktop()),
        this.isAppleMobilePlatform || this.isAppleDesktopPlatform
          ? this.isUnderStandaloneMode ||
            (this.manualApple && this.hideDialog(),
            setTimeout(() => {
              (this.isInstallAvailable = !0),
                this.requestUpdate(),
                wo.eventInstallAvailable(this);
            }, 1e3))
          : this.manualChrome && this.hideDialog();
    }
    connectedCallback() {
      ((i) => {
        try {
          e7.get(i) ? G8(i) : G8(i.slice(0, 2));
        } catch {}
      })(navigator.language),
        this._init(),
        SN.finalized,
        EN.finalized,
        super.connectedCallback();
    }
    willUpdate(i) {
      this.externalPromptEvent &&
        i.has("externalPromptEvent") &&
        typeof this.externalPromptEvent == "object" &&
        this._init();
    }
    render() {
      return this.isAppleMobilePlatform || this.isAppleDesktopPlatform
        ? rr.html`${IN(
            this.name,
            this.description,
            this.installDescription,
            this.disableDescription,
            this.disableScreenshots,
            this.disableClose,
            this.icon,
            this._manifest,
            this.isInstallAvailable && !this.isDialogHidden,
            this._hideDialogUser,
            this._howToForApple,
            this.isAppleDesktopPlatform,
            this._howToRequested,
            this._toggleGallery,
            this._galleryRequested
          )}`
        : rr.html`${AN(
            this.name,
            this.description,
            this.installDescription,
            this.disableDescription,
            this.disableScreenshots,
            this.disableClose,
            this.icon,
            this._manifest,
            this.isInstallAvailable && !this.isDialogHidden,
            this._hideDialogUser,
            this._install,
            this._toggleGallery,
            this._galleryRequested
          )}`;
    }
  };
Ss(
  [(0, Mn.property)({ attribute: "manifest-url" }), qs("design:type", Object)],
  ls.prototype,
  "manifestUrl",
  void 0
),
  Ss(
    [(0, Mn.property)(), qs("design:type", Object)],
    ls.prototype,
    "icon",
    void 0
  ),
  Ss(
    [(0, Mn.property)(), qs("design:type", Object)],
    ls.prototype,
    "name",
    void 0
  ),
  Ss(
    [(0, Mn.property)(), qs("design:type", Object)],
    ls.prototype,
    "description",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({ attribute: "install-description" }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "installDescription",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({
        attribute: "disable-install-description",
        type: Boolean,
      }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "disableDescription",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({ attribute: "disable-screenshots", type: Boolean }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "disableScreenshots",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({ attribute: "manual-apple", type: Boolean }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "manualApple",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({ attribute: "manual-chrome", type: Boolean }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "manualChrome",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({ attribute: "disable-chrome", type: Boolean }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "disableChrome",
    void 0
  ),
  Ss(
    [
      (0, Mn.property)({ attribute: "disable-close", type: Boolean }),
      qs("design:type", Object),
    ],
    ls.prototype,
    "disableClose",
    void 0
  ),
  Ss(
    [(0, Mn.state)(), qs("design:type", Object)],
    ls.prototype,
    "externalPromptEvent",
    void 0
  ),
  (ls = Ss(
    [(i, e) => (i.addInitializer(Kz), i), (0, Mn.customElement)("pwa-install")],
    ls
  ));
var ooe = Z8.k;
function t7(i) {
  let e, t, r, o, n, u, h;
  return {
    c() {
      (e = Je("button")),
        (t = mi("svg")),
        (r = mi("path")),
        (o = Ot()),
        (n = Je("div")),
        (n.textContent = "Click to Install"),
        J(r, "fill-rule", "evenodd"),
        J(
          r,
          "d",
          "M5.5 17a4.5 4.5 0 0 1-1.44-8.765 4.5 4.5 0 0 1 8.302-3.046 3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm5.25-9.25a.75.75 0 0 0-1.5 0v4.59l-1.95-2.1a.75.75 0 1 0-1.1 1.02l3.25 3.5a.75.75 0 0 0 1.1 0l3.25-3.5a.75.75 0 1 0-1.1-1.02l-1.95 2.1V7.75Z"
        ),
        J(r, "clip-rule", "evenodd"),
        J(t, "xmlns", "http://www.w3.org/2000/svg"),
        J(t, "viewBox", "0 0 20 20"),
        J(t, "fill", "currentColor"),
        J(t, "class", "w-5 h-5 mr-1 sm:mr-2"),
        J(e, "class", i[0]);
    },
    m(m, b) {
      Ne(m, e, b),
        He(e, t),
        He(t, r),
        He(e, o),
        He(e, n),
        u || ((h = Mt(e, "click", i[4])), (u = !0));
    },
    p(m, b) {
      b & 1 && J(e, "class", m[0]);
    },
    d(m) {
      m && ze(e), (u = !1), h();
    },
  };
}
function PN(i) {
  let e,
    t,
    r = i[1] && t7(i);
  return {
    c() {
      r && r.c(),
        (e = Ot()),
        (t = Je("pwa-install")),
        Ic(t, "class", "z-50"),
        Ic(t, "name", "Ch\xE9rie"),
        Ic(t, "description", "Your Relationship Conversation Assist."),
        Ic(t, "manifest-url", "/files/manifest.json"),
        Ic(
          t,
          "icon",
          "https://chatbond-static.s3.us-west-002.backblazeb2.com/cherie/pwa/manifest-icon-192.maskable.png"
        ),
        Ic(t, "id", i[2]);
    },
    m(o, n) {
      r && r.m(o, n), Ne(o, e, n), Ne(o, t, n);
    },
    p(o, [n]) {
      o[1]
        ? r
          ? r.p(o, n)
          : ((r = t7(o)), r.c(), r.m(e.parentNode, e))
        : r && (r.d(1), (r = null));
    },
    i: yt,
    o: yt,
    d(o) {
      o && (ze(e), ze(t)), r && r.d(o);
    },
  };
}
function DN() {
  return crypto.randomUUID();
}
function LN() {
  var i = window.navigator.userAgent,
    e = !!i.match(/iPad/i) || !!i.match(/iPhone/i),
    t = !!i.match(/WebKit/i),
    r = !!i.match(/Safari/i) && !i.match(/CriOS/i);
  return e && t && !r;
}
function Uv() {
  let i = window.navigator.userAgent;
  var e = window.navigator.userAgent,
    t = !!e.match(/iPad/i) || !!e.match(/iPhone/i),
    r = !!e.match(/WebKit/i),
    o = t && r && !e.match(/CriOS/i);
  return o
    ? "mobile-safari"
    : /Android/.test(i)
    ? "android"
    : r
    ? "desktop-safari"
    : "not-safari";
}
function FN(i, e, t) {
  let r,
    { position: o = "navbar" } = e,
    n,
    u = `pwa-install-${DN()}`,
    h = cn(!1);
  Di(i, h, (S) => t(1, (r = S))),
    Ur(() => {
      (n = document.getElementById(u)),
        n.isUnderStandaloneMode
          ? h.set(!1)
          : (console.log("PWA install is available."), h.set(!0));
    });
  let m = (S) => {
    switch (S) {
      case "apple-mobile":
        (n.isAppleDesktopPlatform = !1), (n.isAppleMobilePlatform = !0);
        break;
      case "apple-desktop":
        (n.isAppleMobilePlatform = !1), (n.isAppleDesktopPlatform = !0);
        break;
      case "chrome":
        (n.isAppleMobilePlatform = !1), (n.isAppleDesktopPlatform = !1);
        break;
    }
    n.hideDialog();
  };
  function b() {
    if (LN()) {
      Swal.fire({
        icon: "error",
        title: "Oops...",
        text: "Unfortunately, this app can only be installed using the Safari browser on iOS due to platform restrictions \u{1F625}.",
      });
      return;
    }
    n
      ? (Uv() == "mobile-safari"
          ? (console.log("opening safari pwa install dialogue window"),
            m("apple-mobile"))
          : Uv() == "android"
          ? (console.log("opening desktop safari pwa install dialogue window"),
            m("chrome"))
          : Uv() == "desktop-safari"
          ? (console.log("opening chrome pwa install dialogue window"),
            m("apple-desktop"))
          : (console.log("opening chrome pwa install dialogue window"),
            m("chrome")),
        n.showDialog(!0))
      : console.error(
          "PWA Install element is not ready or showDialog is not a function."
        );
  }
  let _ =
    "bg-gradient-to-r from-purple-500 to-purple-900 text-white font-medium rounded-full flex justify-center items-center m-1";
  return (
    o === "navbar"
      ? (_ += " w-32 p-1")
      : o === "landing-page"
      ? (_ += " w-48 sm:w-64 p-2 sm:p-3")
      : o === "mobile" && (_ += " w-full p-2"),
    (i.$$set = (S) => {
      "position" in S && t(5, (o = S.position));
    }),
    [_, r, u, h, b, o]
  );
}
var Vv = class extends dt {
    constructor(e) {
      super(), gt(this, e, FN, PN, ut, { position: 5 });
    }
  },
  i7 = Vv;
function zN(i) {
  let e, t, r, o, n, u, h, m, b, _, S, T;
  return {
    c() {
      (e = Je("div")),
        (t = Je("div")),
        (r = Je("span")),
        (o = Xi(i[1])),
        (n = Ot()),
        (u = Je("label")),
        (h = Xi(i[0])),
        (m = Ot()),
        (b = Je("span")),
        (_ = Xi(i[2])),
        (S = Ot()),
        (T = Je("input")),
        J(u, "for", "minmax-range"),
        J(
          u,
          "class",
          "block mb-2 text-sm font-medium text-gray-900 dark:text-white"
        ),
        J(t, "class", "flex justify-between items-center"),
        J(T, "id", "minmax-range"),
        J(T, "type", "range"),
        J(T, "min", "0"),
        J(T, "max", "100"),
        (T.value = i[3]),
        J(T, "step", "1"),
        J(
          T,
          "class",
          "w-full h-2 bg-gray-400 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"
        ),
        J(
          e,
          "class",
          "bg-slate-200 dark:bg-slate-600 rounded-lg m-3 sm:m-5 p-2 sm:p-4"
        );
    },
    m(D, F) {
      Ne(D, e, F),
        He(e, t),
        He(t, r),
        He(r, o),
        He(t, n),
        He(t, u),
        He(u, h),
        He(t, m),
        He(t, b),
        He(b, _),
        He(e, S),
        He(e, T);
    },
    p(D, [F]) {
      F & 2 && fn(o, D[1]),
        F & 1 && fn(h, D[0]),
        F & 4 && fn(_, D[2]),
        F & 8 && (T.value = D[3]);
    },
    i: yt,
    o: yt,
    d(D) {
      D && ze(e);
    },
  };
}
function NN(i, e, t) {
  let { sliderName: r = "Name" } = e,
    { startScaleName: o = "Low" } = e,
    { endScaleName: n = "High" } = e,
    { value: u = "50" } = e;
  return (
    (i.$$set = (h) => {
      "sliderName" in h && t(0, (r = h.sliderName)),
        "startScaleName" in h && t(1, (o = h.startScaleName)),
        "endScaleName" in h && t(2, (n = h.endScaleName)),
        "value" in h && t(3, (u = h.value));
    }),
    [r, o, n, u]
  );
}
var jv = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, NN, zN, ut, {
          sliderName: 0,
          startScaleName: 1,
          endScaleName: 2,
          value: 3,
        });
    }
  },
  e1 = jv;
function r7(i) {
  let e, t, r, o, n, u, h, m, b, _, S, T, D, F, q, Q, te, ce, be, Y;
  function Ie(qe) {
    i[9](qe);
  }
  let Te = {
    sliderName: "\u{1F4AA} Effort",
    startScaleName: "Lazy",
    endScaleName: "Effortful",
  };
  i[0] !== void 0 && (Te.value = i[0]),
    (h = new e1({ props: Te })),
    Bi.push(() => Gr(h, "value", Ie));
  function fe(qe) {
    i[10](qe);
  }
  let Le = {
    sliderName: "\u{1F48E} Clarity",
    startScaleName: "Low",
    endScaleName: "High",
  };
  i[1] !== void 0 && (Le.value = i[1]),
    (_ = new e1({ props: Le })),
    Bi.push(() => Gr(_, "value", fe));
  function De(qe) {
    i[11](qe);
  }
  let st = {
    sliderName: "\u2705 Truthfulness",
    startScaleName: "Low",
    endScaleName: "High",
  };
  return (
    i[2] !== void 0 && (st.value = i[2]),
    (D = new e1({ props: st })),
    Bi.push(() => Gr(D, "value", De)),
    {
      c() {
        (e = Je("div")),
          (t = Je("div")),
          (r = Je("button")),
          (r.innerHTML =
            '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z" clip-rule="evenodd"></path></svg>'),
          (o = Ot()),
          (n = Je("div")),
          (n.innerHTML =
            '<h1 class="text-xl sm:text-2xl md:text-3xl">\u{1F91F} Rate Answer</h1>'),
          (u = Ot()),
          Yt(h.$$.fragment),
          (b = Ot()),
          Yt(_.$$.fragment),
          (T = Ot()),
          Yt(D.$$.fragment),
          (q = Ot()),
          (Q = Je("div")),
          (te = Je("button")),
          (te.textContent = "Submit"),
          J(
            r,
            "class",
            "absolute top-2 right-2 text-red-400 dark:text-red-300 hover:text-red-500 dark:hover:text-red-500"
          ),
          J(n, "class", "m-3 sm:m-4 md:m-5"),
          J(te, "type", "button"),
          J(
            te,
            "class",
            "m-3 focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"
          ),
          J(Q, "class", "flex justify-center items-center"),
          J(
            t,
            "class",
            "bg-white dark:bg-slate-700 text-black dark:text-white p-6 rounded-lg w-full md:w-2/3 lg:w-1/2 relative m-5"
          ),
          J(
            e,
            "class",
            "fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-80 flex justify-center items-center z-50"
          );
      },
      m(qe, zt) {
        Ne(qe, e, zt),
          He(e, t),
          He(t, r),
          He(t, o),
          He(t, n),
          He(t, u),
          Jt(h, t, null),
          He(t, b),
          Jt(_, t, null),
          He(t, T),
          Jt(D, t, null),
          He(t, q),
          He(t, Q),
          He(Q, te),
          (ce = !0),
          be ||
            ((Y = [Mt(r, "click", i[4]), Mt(te, "click", i[5])]), (be = !0));
      },
      p(qe, zt) {
        let Rt = {};
        !m && zt & 1 && ((m = !0), (Rt.value = qe[0]), Qr(() => (m = !1))),
          h.$set(Rt);
        let Gt = {};
        !S && zt & 2 && ((S = !0), (Gt.value = qe[1]), Qr(() => (S = !1))),
          _.$set(Gt);
        let qt = {};
        !F && zt & 4 && ((F = !0), (qt.value = qe[2]), Qr(() => (F = !1))),
          D.$set(qt);
      },
      i(qe) {
        ce ||
          (Oe(h.$$.fragment, qe),
          Oe(_.$$.fragment, qe),
          Oe(D.$$.fragment, qe),
          (ce = !0));
      },
      o(qe) {
        $e(h.$$.fragment, qe),
          $e(_.$$.fragment, qe),
          $e(D.$$.fragment, qe),
          (ce = !1);
      },
      d(qe) {
        qe && ze(e), Xt(h), Xt(_), Xt(D), (be = !1), gr(Y);
      },
    }
  );
}
function ON(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h,
    m,
    b = i[3] && r7(i);
  return {
    c() {
      (e = Je("wc-toast")),
        (t = Ot()),
        (r = Je("button")),
        (r.textContent = "Rate"),
        (o = Ot()),
        b && b.c(),
        (n = Ji()),
        J(
          r,
          "class",
          "bg-blue-500 text-white py-2 px-2 sm:px-4 rounded-full text-sm"
        );
    },
    m(_, S) {
      Ne(_, e, S),
        Ne(_, t, S),
        Ne(_, r, S),
        Ne(_, o, S),
        b && b.m(_, S),
        Ne(_, n, S),
        (u = !0),
        h || ((m = Mt(r, "click", i[4])), (h = !0));
    },
    p(_, [S]) {
      _[3]
        ? b
          ? (b.p(_, S), S & 8 && Oe(b, 1))
          : ((b = r7(_)), b.c(), Oe(b, 1), b.m(n.parentNode, n))
        : b &&
          (Yi(),
          $e(b, 1, 1, () => {
            b = null;
          }),
          er());
    },
    i(_) {
      u || (Oe(b), (u = !0));
    },
    o(_) {
      $e(b), (u = !1);
    },
    d(_) {
      _ && (ze(e), ze(t), ze(r), ze(o), ze(n)), b && b.d(_), (h = !1), m();
    },
  };
}
function BN(i, e, t) {
  let { answerId: r } = e,
    { effortValue: o = 50 } = e,
    { clarityValue: n = 50 } = e,
    { truthfulnessValue: u = 50 } = e,
    { saveEndpoint: h = "/" } = e,
    { csrf: m = "" } = e,
    b = !1;
  function _() {
    t(3, (b = !b));
  }
  function S(Q) {
    Fn.error(Q);
  }
  async function T() {
    try {
      if (
        !(
          await fetch(h + "?csrf" + m, {
            method: "POST",
            headers: { "Content-Type": "application/json", "X-CSRF-Token": m },
            body: JSON.stringify({ effort: o, clarity: n, truthfulness: u }),
          })
        ).ok
      )
        throw new Error("Failed to save rating");
      t(3, (b = !1));
    } catch (Q) {
      console.error("Error saving rating:", Q),
        S(`${Q.message || "Unknown error"}`);
    }
  }
  function D(Q) {
    (o = Q), t(0, o);
  }
  function F(Q) {
    (n = Q), t(1, n);
  }
  function q(Q) {
    (u = Q), t(2, u);
  }
  return (
    (i.$$set = (Q) => {
      "answerId" in Q && t(6, (r = Q.answerId)),
        "effortValue" in Q && t(0, (o = Q.effortValue)),
        "clarityValue" in Q && t(1, (n = Q.clarityValue)),
        "truthfulnessValue" in Q && t(2, (u = Q.truthfulnessValue)),
        "saveEndpoint" in Q && t(7, (h = Q.saveEndpoint)),
        "csrf" in Q && t(8, (m = Q.csrf));
    }),
    [o, n, u, b, _, T, r, h, m, D, F, q]
  );
}
var Hv = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, BN, ON, ut, {
          answerId: 6,
          effortValue: 0,
          clarityValue: 1,
          truthfulnessValue: 2,
          saveEndpoint: 7,
          csrf: 8,
        });
    }
  },
  n7 = Hv;
var RN = Date.now();
function co(i) {
  return `${i}-${RN++}`;
}
var qv = Symbol.for("svelte-maplibre");
function jo() {
  return y0(qv);
}
function UN(i) {
  let e = new WeakMap();
  return (t) => {
    let r = e.get(t.originalEvent);
    if (r !== void 0) return r;
    let n = t.target
      .queryRenderedFeatures(t.point)
      .find((u) => i.get(u.layer.id)?.interactive)?.layer.id;
    return e.set(t.originalEvent, n), n;
  };
}
function s7() {
  let i = new Map();
  return g0(qv, {
    map: cn(null),
    source: Jc(null),
    layer: Jc(null),
    popupTarget: Jc(null),
    cluster: cn(),
    loadedImages: cn(new Set()),
    minzoom: cn(0),
    maxzoom: cn(24),
    layerEvent: cn(null),
    layerInfo: i,
    eventTopMost: UN(i),
  });
}
function o7(i) {
  return { subscribe: i.subscribe };
}
function $v({
  key: i,
  setPopupTarget: e = !1,
  setCluster: t = !1,
  setMouseEvent: r = !1,
}) {
  let o = jo(),
    n = cn(null),
    u = o7(n),
    h = { ...o, [i]: o7(n) };
  if ((e && (h.popupTarget = u), r)) {
    let m = cn(null);
    (h.layerEvent = m), (o.layerEvent = m);
  }
  return t && (h.cluster = cn()), g0(qv, h), { ...o, self: n };
}
function Ld() {
  return $v({ key: "source", setCluster: !0 });
}
function t1(i = !0) {
  return $v({ key: "layer", setPopupTarget: i, setMouseEvent: i });
}
function i1() {
  return $v({ key: "popupTarget", setPopupTarget: !0, setMouseEvent: !0 });
}
var VN = ws(da());
function Wv(i) {
  let e;
  return (t) => {
    if (t)
      for (let r in t) {
        let o = e?.[r],
          n = t[r];
        o !== n && i(r, n, o);
      }
    else if (e) for (let r in e) i(r, void 0, e[r]);
    e = t;
  };
}
function Zv(i, ...e) {
  let t = [i];
  for (let r of e)
    if (r) Array.isArray(r) && r[0] === i ? t.push(...r.slice(1)) : t.push(r);
    else continue;
  if (t.length !== 1) return t.length === 2 ? t[1] : t;
}
function Kv(i) {
  return i === !0
    ? ["has", "point_count"]
    : i === !1
    ? ["!", ["has", "point_count"]]
    : void 0;
}
var $s = jN;
function jN(i) {
  var e, t, r;
  if (i) {
    if (Array.isArray(i)) {
      for (e = [], t = i.length, r = 0; r < t; r++) {
        var o = i[r];
        o != null && e.push(o);
      }
      return e;
    }
    if (typeof i == "object") {
      e = {};
      var n = Object.keys(i);
      for (t = n.length, r = 0; r < t; r++) {
        var u = n[r],
          h = i[u];
        h != null && (e[u] = h);
      }
      return e;
    }
  }
}
function l7(i) {
  let e = i[0],
    t,
    r,
    o = c7(i);
  return {
    c() {
      o.c(), (t = Ji());
    },
    m(n, u) {
      o.m(n, u), Ne(n, t, u), (r = !0);
    },
    p(n, u) {
      u[0] & 1 && ut(e, (e = n[0]))
        ? (Yi(),
          $e(o, 1, 1, yt),
          er(),
          (o = c7(n)),
          o.c(),
          Oe(o, 1),
          o.m(t.parentNode, t))
        : o.p(n, u);
    },
    i(n) {
      r || (Oe(o), (r = !0));
    },
    o(n) {
      $e(o), (r = !1);
    },
    d(n) {
      n && ze(t), o.d(n);
    },
  };
}
function c7(i) {
  let e,
    t = i[36].default,
    r = bi(t, i, i[35], null);
  return {
    c() {
      r && r.c();
    },
    m(o, n) {
      r && r.m(o, n), (e = !0);
    },
    p(o, n) {
      r &&
        r.p &&
        (!e || n[1] & 16) &&
        _i(r, t, o, o[35], e ? vi(t, o[35], n, null) : xi(o[35]), null);
    },
    i(o) {
      e || (Oe(r, o), (e = !0));
    },
    o(o) {
      $e(r, o), (e = !1);
    },
    d(o) {
      r && r.d(o);
    },
  };
}
function HN(i) {
  let e,
    t,
    r = i[0] && l7(i);
  return {
    c() {
      r && r.c(), (e = Ji());
    },
    m(o, n) {
      r && r.m(o, n), Ne(o, e, n), (t = !0);
    },
    p(o, n) {
      o[0]
        ? r
          ? (r.p(o, n), n[0] & 1 && Oe(r, 1))
          : ((r = l7(o)), r.c(), Oe(r, 1), r.m(e.parentNode, e))
        : r &&
          (Yi(),
          $e(r, 1, 1, () => {
            r = null;
          }),
          er());
    },
    i(o) {
      t || (Oe(r), (t = !0));
    },
    o(o) {
      $e(r), (t = !1);
    },
    d(o) {
      o && ze(e), r && r.d(o);
    },
  };
}
function qN(i, e, t) {
  let r,
    o,
    n,
    u,
    h,
    m,
    b,
    _,
    S,
    T,
    D,
    F,
    { $$slots: q = {}, $$scope: Q } = e,
    { id: te = co("layer") } = e,
    { source: ce = void 0 } = e,
    { sourceLayer: be = void 0 } = e,
    { beforeId: Y = void 0 } = e,
    { beforeLayerType: Ie = void 0 } = e,
    { type: Te } = e,
    { paint: fe = void 0 } = e,
    { layout: Le = void 0 } = e,
    { filter: De = void 0 } = e,
    { applyToClusters: st = void 0 } = e,
    { minzoom: qe = void 0 } = e,
    { maxzoom: zt = void 0 } = e,
    { manageHoverState: Rt = !1 } = e,
    { hovered: Gt = null } = e,
    { interactive: qt = !0 } = e,
    { hoverCursor: ct = void 0 } = e,
    { eventsIfTopMost: vt = !1 } = e,
    ht = yo(),
    {
      map: Vt,
      source: hi,
      self: Pi,
      minzoom: Zt,
      maxzoom: Re,
      eventTopMost: Ce,
      layerInfo: Bt,
    } = t1();
  Di(i, Vt, (pt) => t(31, (S = pt))),
    Di(i, hi, (pt) => t(32, (T = pt))),
    Di(i, Pi, (pt) => t(0, (_ = pt))),
    Di(i, Zt, (pt) => t(34, (F = pt))),
    Di(i, Re, (pt) => t(33, (D = pt))),
    dr(() => {
      _ && S && (Bt.delete(_), S?.removeLayer(_));
    });
  let ei;
  function Li(pt) {
    if (!qt || !_ || !S || (vt && Ce(pt) !== _)) return;
    let Ai = pt.features ?? [],
      je = Ai[0]?.properties?.cluster_id,
      Si = {
        event: pt,
        map: S,
        clusterId: je,
        layer: _,
        source: h,
        features: Ai,
      };
    ht(pt.type, Si);
  }
  function it(pt) {
    if (!qt || !_ || !S || (vt && Ce(pt) !== _)) return;
    ct && (S.getCanvas().style.cursor = ct);
    let Ai = pt.features ?? [];
    t(6, (Gt = Ai[0] ?? null));
    let je = Ai[0]?.properties?.cluster_id;
    ht("mouseenter", {
      event: pt,
      map: S,
      clusterId: je,
      layer: _,
      source: h,
      features: Ai,
    });
  }
  function ii(pt) {
    if (!qt || !S) return;
    if (vt && Ce(pt) !== _) {
      t(6, (Gt = null)),
        Rt &&
          ei !== void 0 &&
          (S?.setFeatureState(
            { source: h, sourceLayer: be, id: ei },
            { hover: !1 }
          ),
          (ei = void 0));
      return;
    }
    S.getCanvas().style.cursor = ct;
    let Ai = pt.features ?? [],
      je = Ai[0]?.properties?.cluster_id,
      Si = Ai[0]?.id;
    Si !== ei &&
      (Rt &&
        (ei !== void 0 &&
          S?.setFeatureState(
            { source: h, id: ei, sourceLayer: be },
            { hover: !1 }
          ),
        S?.setFeatureState(
          { source: h, id: Si, sourceLayer: be },
          { hover: !0 }
        )),
      (ei = Si),
      t(6, (Gt = Ai[0] ?? null))),
      ht("mousemove", {
        event: pt,
        map: S,
        clusterId: je,
        layer: _,
        source: h,
        features: Ai,
      });
  }
  function wi(pt) {
    if (!(!qt || !_ || !S)) {
      if (
        (ct && (S.getCanvas().style.cursor = ""),
        t(6, (Gt = null)),
        Rt && ei !== void 0)
      ) {
        let Ai = { source: h, id: ei, sourceLayer: be };
        S?.setFeatureState(Ai, { hover: !1 }), (ei = void 0);
      }
      ht("mouseleave", { map: S, layer: _, source: h });
    }
  }
  let sr = !0;
  function Wr(pt) {
    S &&
      (S.off("click", pt, Li),
      S.off("dblclick", pt, Li),
      S.off("contextmenu", pt, Li),
      S.off("mouseenter", pt, it),
      S.off("mousemove", pt, ii),
      S.off("mouseleave", pt, wi));
  }
  return (
    dr(() => {
      S && _ && Wr(_);
    }),
    (i.$$set = (pt) => {
      "id" in pt && t(7, (te = pt.id)),
        "source" in pt && t(8, (ce = pt.source)),
        "sourceLayer" in pt && t(9, (be = pt.sourceLayer)),
        "beforeId" in pt && t(10, (Y = pt.beforeId)),
        "beforeLayerType" in pt && t(11, (Ie = pt.beforeLayerType)),
        "type" in pt && t(12, (Te = pt.type)),
        "paint" in pt && t(13, (fe = pt.paint)),
        "layout" in pt && t(14, (Le = pt.layout)),
        "filter" in pt && t(15, (De = pt.filter)),
        "applyToClusters" in pt && t(16, (st = pt.applyToClusters)),
        "minzoom" in pt && t(17, (qe = pt.minzoom)),
        "maxzoom" in pt && t(18, (zt = pt.maxzoom)),
        "manageHoverState" in pt && t(19, (Rt = pt.manageHoverState)),
        "hovered" in pt && t(6, (Gt = pt.hovered)),
        "interactive" in pt && t(20, (qt = pt.interactive)),
        "hoverCursor" in pt && t(21, (ct = pt.hoverCursor)),
        "eventsIfTopMost" in pt && t(22, (vt = pt.eventsIfTopMost)),
        "$$scope" in pt && t(35, (Q = pt.$$scope));
    }),
    (i.$$.update = () => {
      if (
        (i.$$.dirty[0] & 65536 && t(30, (r = Kv(st))),
        i.$$.dirty[0] & 1073774592 && t(24, (o = Zv("all", r, De))),
        (i.$$.dirty[0] & 131072) | (i.$$.dirty[1] & 8) && t(26, (n = qe ?? F)),
        (i.$$.dirty[0] & 262144) | (i.$$.dirty[1] & 4) && t(25, (u = zt ?? D)),
        (i.$$.dirty[0] & 256) | (i.$$.dirty[1] & 2) && t(29, (h = ce || T)),
        (i.$$.dirty[0] & 654343809) | (i.$$.dirty[1] & 1) && S && _ !== te && h)
      ) {
        _ && (Wr(_), Bt.delete(_));
        let pt = Y;
        if (!Y && Ie) {
          let Ai = S.getStyle().layers,
            je = typeof Ie == "function" ? Ie : (gi) => gi.type === Ie,
            Si = Ai?.find(je);
          Si && (pt = Si.id);
        }
        Cn(Pi, (_ = te), _),
          S.addLayer(
            $s({
              id: _,
              type: Te,
              source: h,
              "source-layer": be,
              filter: o,
              paint: fe,
              layout: Le,
              minzoom: n,
              maxzoom: u,
            }),
            pt
          ),
          t(23, (sr = !0)),
          S.on("click", _, Li),
          S.on("dblclick", _, Li),
          S.on("contextmenu", _, Li),
          S.on("mouseenter", _, it),
          S.on("mousemove", _, ii),
          S.on("mouseleave", _, wi);
      }
      i.$$.dirty[0] & 1048577 && _ && Bt.set(_, { interactive: qt }),
        (i.$$.dirty[0] & 1) | (i.$$.dirty[1] & 1) &&
          t(
            28,
            (m = _ ? Wv((pt, Ai) => S?.setPaintProperty(_, pt, Ai)) : void 0)
          ),
        (i.$$.dirty[0] & 1) | (i.$$.dirty[1] & 1) &&
          t(
            27,
            (b = _ ? Wv((pt, Ai) => S?.setLayoutProperty(_, pt, Ai)) : void 0)
          ),
        i.$$.dirty[0] & 268443648 && m?.(fe),
        i.$$.dirty[0] & 134234112 && b?.(Le),
        (i.$$.dirty[0] & 100663297) | (i.$$.dirty[1] & 1) &&
          _ &&
          S?.setLayerZoomRange(_, n, u),
        (i.$$.dirty[0] & 25165825) | (i.$$.dirty[1] & 1) &&
          _ &&
          (sr ? t(23, (sr = !1)) : S?.setFilter(_, o));
    }),
    [
      _,
      Vt,
      hi,
      Pi,
      Zt,
      Re,
      Gt,
      te,
      ce,
      be,
      Y,
      Ie,
      Te,
      fe,
      Le,
      De,
      st,
      qe,
      zt,
      Rt,
      qt,
      ct,
      vt,
      sr,
      o,
      u,
      n,
      b,
      m,
      h,
      r,
      S,
      T,
      D,
      F,
      Q,
      q,
    ]
  );
}
var Jv = class extends dt {
    constructor(e) {
      super(),
        gt(
          this,
          e,
          qN,
          HN,
          ut,
          {
            id: 7,
            source: 8,
            sourceLayer: 9,
            beforeId: 10,
            beforeLayerType: 11,
            type: 12,
            paint: 13,
            layout: 14,
            filter: 15,
            applyToClusters: 16,
            minzoom: 17,
            maxzoom: 18,
            manageHoverState: 19,
            hovered: 6,
            interactive: 20,
            hoverCursor: 21,
            eventsIfTopMost: 22,
          },
          null,
          [-1, -1]
        );
    }
  },
  yl = Jv;
var u7 = ws(da());
function QN(i) {
  let e,
    t = i[12].default,
    r = bi(t, i, i[11], null);
  return {
    c() {
      r && r.c();
    },
    m(o, n) {
      r && r.m(o, n), (e = !0);
    },
    p(o, [n]) {
      r &&
        r.p &&
        (!e || n & 2048) &&
        _i(r, t, o, o[11], e ? vi(t, o[11], n, null) : xi(o[11]), null);
    },
    i(o) {
      e || (Oe(r, o), (e = !0));
    },
    o(o) {
      $e(r, o), (e = !1);
    },
    d(o) {
      r && r.d(o);
    },
  };
}
function GN(i, e, t) {
  let r,
    o,
    n,
    { $$slots: u = {}, $$scope: h } = e,
    { lngLat: m } = e,
    { class: b = void 0 } = e,
    { draggable: _ = !1 } = e,
    { feature: S = null } = e,
    { offset: T = void 0 } = e,
    { rotation: D = 0 } = e,
    { opacity: F = 1 } = e,
    q = yo(),
    { map: Q, layerEvent: te, self: ce } = i1();
  Di(i, Q, (Le) => t(14, (n = Le))),
    Di(i, te, (Le) => t(13, (r = Le))),
    Di(i, ce, (Le) => t(10, (o = Le)));
  let be = () => fe("dragstart"),
    Y = () => {
      Te(), fe("drag");
    },
    Ie = () => {
      Te(), fe("dragend");
    };
  Cn(
    ce,
    (o = new u7.default.Marker(
      $s({
        draggable: _,
        rotation: D,
        className: b,
        offset: T,
        opacity: F.toString(),
      })
    )
      .setLngLat(m)
      .addTo(n)),
    o
  ),
    _ && (o.on("dragstart", be), o.on("drag", Y), o.on("dragend", Ie)),
    dr(() => o?.remove());
  function Te() {
    let Le = o?.getLngLat();
    Le &&
      (Array.isArray(m)
        ? t(3, (m = [Le.lng, Le.lat]))
        : m && "lon" in m
        ? t(3, (m = { lon: Le.lng, lat: Le.lat }))
        : t(3, (m = Le)));
  }
  function fe(Le) {
    let De = o?.getLngLat();
    if (!De) return;
    let st = [De.lng, De.lat],
      qe = {
        map: n,
        marker: o,
        lngLat: st,
        features: [
          {
            type: "Feature",
            properties: S?.properties ?? {},
            geometry: { type: "Point", coordinates: st },
          },
        ],
      };
    Cn(te, (r = { ...qe, layerType: "marker", type: Le }), r), q(Le, qe);
  }
  return (
    (i.$$set = (Le) => {
      "lngLat" in Le && t(3, (m = Le.lngLat)),
        "class" in Le && t(4, (b = Le.class)),
        "draggable" in Le && t(5, (_ = Le.draggable)),
        "feature" in Le && t(6, (S = Le.feature)),
        "offset" in Le && t(7, (T = Le.offset)),
        "rotation" in Le && t(8, (D = Le.rotation)),
        "opacity" in Le && t(9, (F = Le.opacity)),
        "$$scope" in Le && t(11, (h = Le.$$scope));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 1032 && o?.setLngLat(m),
        i.$$.dirty & 1152 && o?.setOffset(T ?? [0, 0]),
        i.$$.dirty & 1280 && o?.setRotation(D),
        i.$$.dirty & 1536 && o?.setOpacity(F.toString());
    }),
    [Q, te, ce, m, b, _, S, T, D, F, o, h, u]
  );
}
var Xv = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, GN, QN, ut, {
          lngLat: 3,
          class: 4,
          draggable: 5,
          feature: 6,
          offset: 7,
          rotation: 8,
          opacity: 9,
        });
    }
  },
  Yv = Xv;
function WN(i) {
  let e,
    t = i[15].default,
    r = bi(t, i, i[23], null);
  return {
    c() {
      r && r.c();
    },
    m(o, n) {
      r && r.m(o, n), (e = !0);
    },
    p(o, n) {
      r &&
        r.p &&
        (!e || n & 8388608) &&
        _i(r, t, o, o[23], e ? vi(t, o[23], n, null) : xi(o[23]), null);
    },
    i(o) {
      e || (Oe(r, o), (e = !0));
    },
    o(o) {
      $e(r, o), (e = !1);
    },
    d(o) {
      r && r.d(o);
    },
  };
}
function ZN(i) {
  let e, t, r;
  function o(u) {
    i[16](u);
  }
  let n = {
    id: i[1],
    type: "fill",
    source: i[2],
    sourceLayer: i[3],
    beforeId: i[4],
    beforeLayerType: i[5],
    paint: i[6],
    layout: i[7],
    filter: i[8],
    minzoom: i[9],
    maxzoom: i[10],
    hoverCursor: i[11],
    manageHoverState: i[12],
    eventsIfTopMost: i[13],
    interactive: i[14],
    $$slots: { default: [WN] },
    $$scope: { ctx: i },
  };
  return (
    i[0] !== void 0 && (n.hovered = i[0]),
    (e = new yl({ props: n })),
    Bi.push(() => Gr(e, "hovered", o)),
    e.$on("click", i[17]),
    e.$on("dblclick", i[18]),
    e.$on("contextmenu", i[19]),
    e.$on("mouseenter", i[20]),
    e.$on("mousemove", i[21]),
    e.$on("mouseleave", i[22]),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(u, h) {
        Jt(e, u, h), (r = !0);
      },
      p(u, [h]) {
        let m = {};
        h & 2 && (m.id = u[1]),
          h & 4 && (m.source = u[2]),
          h & 8 && (m.sourceLayer = u[3]),
          h & 16 && (m.beforeId = u[4]),
          h & 32 && (m.beforeLayerType = u[5]),
          h & 64 && (m.paint = u[6]),
          h & 128 && (m.layout = u[7]),
          h & 256 && (m.filter = u[8]),
          h & 512 && (m.minzoom = u[9]),
          h & 1024 && (m.maxzoom = u[10]),
          h & 2048 && (m.hoverCursor = u[11]),
          h & 4096 && (m.manageHoverState = u[12]),
          h & 8192 && (m.eventsIfTopMost = u[13]),
          h & 16384 && (m.interactive = u[14]),
          h & 8388608 && (m.$$scope = { dirty: h, ctx: u }),
          !t && h & 1 && ((t = !0), (m.hovered = u[0]), Qr(() => (t = !1))),
          e.$set(m);
      },
      i(u) {
        r || (Oe(e.$$.fragment, u), (r = !0));
      },
      o(u) {
        $e(e.$$.fragment, u), (r = !1);
      },
      d(u) {
        Xt(e, u);
      },
    }
  );
}
function KN(i, e, t) {
  let { $$slots: r = {}, $$scope: o } = e,
    { id: n = co("fill") } = e,
    { source: u = void 0 } = e,
    { sourceLayer: h = void 0 } = e,
    { beforeId: m = void 0 } = e,
    { beforeLayerType: b = void 0 } = e,
    { paint: _ } = e,
    { layout: S = void 0 } = e,
    { filter: T = void 0 } = e,
    { minzoom: D = void 0 } = e,
    { maxzoom: F = void 0 } = e,
    { hoverCursor: q = void 0 } = e,
    { manageHoverState: Q = !1 } = e,
    { hovered: te = null } = e,
    { eventsIfTopMost: ce = !1 } = e,
    { interactive: be = !0 } = e;
  function Y(qe) {
    (te = qe), t(0, te);
  }
  function Ie(qe) {
    Vi.call(this, i, qe);
  }
  function Te(qe) {
    Vi.call(this, i, qe);
  }
  function fe(qe) {
    Vi.call(this, i, qe);
  }
  function Le(qe) {
    Vi.call(this, i, qe);
  }
  function De(qe) {
    Vi.call(this, i, qe);
  }
  function st(qe) {
    Vi.call(this, i, qe);
  }
  return (
    (i.$$set = (qe) => {
      "id" in qe && t(1, (n = qe.id)),
        "source" in qe && t(2, (u = qe.source)),
        "sourceLayer" in qe && t(3, (h = qe.sourceLayer)),
        "beforeId" in qe && t(4, (m = qe.beforeId)),
        "beforeLayerType" in qe && t(5, (b = qe.beforeLayerType)),
        "paint" in qe && t(6, (_ = qe.paint)),
        "layout" in qe && t(7, (S = qe.layout)),
        "filter" in qe && t(8, (T = qe.filter)),
        "minzoom" in qe && t(9, (D = qe.minzoom)),
        "maxzoom" in qe && t(10, (F = qe.maxzoom)),
        "hoverCursor" in qe && t(11, (q = qe.hoverCursor)),
        "manageHoverState" in qe && t(12, (Q = qe.manageHoverState)),
        "hovered" in qe && t(0, (te = qe.hovered)),
        "eventsIfTopMost" in qe && t(13, (ce = qe.eventsIfTopMost)),
        "interactive" in qe && t(14, (be = qe.interactive)),
        "$$scope" in qe && t(23, (o = qe.$$scope));
    }),
    [
      te,
      n,
      u,
      h,
      m,
      b,
      _,
      S,
      T,
      D,
      F,
      q,
      Q,
      ce,
      be,
      r,
      Y,
      Ie,
      Te,
      fe,
      Le,
      De,
      st,
      o,
    ]
  );
}
var e_ = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, KN, ZN, ut, {
          id: 1,
          source: 2,
          sourceLayer: 3,
          beforeId: 4,
          beforeLayerType: 5,
          paint: 6,
          layout: 7,
          filter: 8,
          minzoom: 9,
          maxzoom: 10,
          hoverCursor: 11,
          manageHoverState: 12,
          hovered: 0,
          eventsIfTopMost: 13,
          interactive: 14,
        });
    }
  },
  r1 = e_;
var d7 = ws(da());
function JN(i, e, t) {
  let r,
    { map: o } = jo();
  Di(i, o, (m) => t(4, (r = m)));
  let { position: n = "top-left" } = e,
    { container: u = void 0 } = e,
    h = null;
  return (
    dr(() => {
      r?.loaded() && h && r.removeControl(h);
    }),
    (i.$$set = (m) => {
      "position" in m && t(1, (n = m.position)),
        "container" in m && t(2, (u = m.container));
    }),
    (i.$$.update = () => {
      if (i.$$.dirty & 30 && r && !h) {
        let m;
        typeof u == "string"
          ? (m = document.querySelector(u) ?? void 0)
          : (m = u),
          t(3, (h = new d7.default.FullscreenControl({ container: m }))),
          r.addControl(h, n);
      }
    }),
    [o, n, u, h, r]
  );
}
var t_ = class extends dt {
    constructor(e) {
      super(), gt(this, e, JN, null, ut, { position: 1, container: 2 });
    }
  },
  af = t_;
function Fd(i, e, t, r, o) {
  let n = !1;
  i.getSource(e) && ((n = !0), i.removeSource(e));
  let u = () => {
    r(e) && (i.addSource(e, t), o());
  };
  if (n) {
    let h = () => {
      e && (i.getSource(e) ? setTimeout(h, 1) : u());
    };
    h();
  } else u();
}
function zd(i, e, t) {
  Ns().then(() => {
    let r = rg(i);
    if (!r) return;
    r.getSource(e) === t && r.removeSource(e);
  });
}
function h7(i) {
  let e = i[0],
    t,
    r,
    o = p7(i);
  return {
    c() {
      o.c(), (t = Ji());
    },
    m(n, u) {
      o.m(n, u), Ne(n, t, u), (r = !0);
    },
    p(n, u) {
      u & 1 && ut(e, (e = n[0]))
        ? (Yi(),
          $e(o, 1, 1, yt),
          er(),
          (o = p7(n)),
          o.c(),
          Oe(o, 1),
          o.m(t.parentNode, t))
        : o.p(n, u);
    },
    i(n) {
      r || (Oe(o), (r = !0));
    },
    o(n) {
      $e(o), (r = !1);
    },
    d(n) {
      n && ze(t), o.d(n);
    },
  };
}
function p7(i) {
  let e,
    t = i[15].default,
    r = bi(t, i, i[14], null);
  return {
    c() {
      r && r.c();
    },
    m(o, n) {
      r && r.m(o, n), (e = !0);
    },
    p(o, n) {
      r &&
        r.p &&
        (!e || n & 16384) &&
        _i(r, t, o, o[14], e ? vi(t, o[14], n, null) : xi(o[14]), null);
    },
    i(o) {
      e || (Oe(r, o), (e = !0));
    },
    o(o) {
      $e(r, o), (e = !1);
    },
    d(o) {
      r && r.d(o);
    },
  };
}
function XN(i) {
  let e,
    t,
    r = i[0] && h7(i);
  return {
    c() {
      r && r.c(), (e = Ji());
    },
    m(o, n) {
      r && r.m(o, n), Ne(o, e, n), (t = !0);
    },
    p(o, [n]) {
      o[0]
        ? r
          ? (r.p(o, n), n & 1 && Oe(r, 1))
          : ((r = h7(o)), r.c(), Oe(r, 1), r.m(e.parentNode, e))
        : r &&
          (Yi(),
          $e(r, 1, 1, () => {
            r = null;
          }),
          er());
    },
    i(o) {
      t || (Oe(r), (t = !0));
    },
    o(o) {
      $e(r), (t = !1);
    },
    d(o) {
      o && ze(e), r && r.d(o);
    },
  };
}
function YN(i, e, t) {
  let r,
    o,
    n,
    { $$slots: u = {}, $$scope: h } = e,
    { id: m = co("geojson") } = e,
    { data: b } = e,
    { generateId: _ = !1 } = e,
    { promoteId: S = void 0 } = e,
    { filter: T = void 0 } = e,
    { lineMetrics: D = void 0 } = e,
    { cluster: F = void 0 } = e,
    { map: q, cluster: Q, self: te } = Ld();
  Di(i, q, (Y) => t(13, (o = Y))),
    Di(i, Q, (Y) => t(16, (n = Y))),
    Di(i, te, (Y) => t(0, (r = Y)));
  let ce,
    be = !0;
  return (
    dr(() => {
      r &&
        ce &&
        o &&
        (zd(q, r, ce), Cn(te, (r = null), r), t(11, (ce = void 0)));
    }),
    (i.$$set = (Y) => {
      "id" in Y && t(4, (m = Y.id)),
        "data" in Y && t(5, (b = Y.data)),
        "generateId" in Y && t(6, (_ = Y.generateId)),
        "promoteId" in Y && t(7, (S = Y.promoteId)),
        "filter" in Y && t(8, (T = Y.filter)),
        "lineMetrics" in Y && t(9, (D = Y.lineMetrics)),
        "cluster" in Y && t(10, (F = Y.cluster)),
        "$$scope" in Y && t(14, (h = Y.$$scope));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 1024 && Cn(Q, (n = F), n),
        i.$$.dirty & 12273 &&
          o &&
          r !== m &&
          (Cn(te, (r = m), r),
          Fd(
            o,
            r,
            $s({
              type: "geojson",
              data: b,
              filter: T,
              lineMetrics: D,
              generateId: _,
              promoteId: S,
              cluster: !!F,
              clusterMinPoints: F?.minPoints,
              clusterMaxZoom: F?.maxZoom,
              clusterRadius: F?.radius,
              clusterProperties: F?.properties,
            }),
            (Y) => o && Y === r,
            () => {
              r && (t(11, (ce = o?.getSource(r))), t(12, (be = !0)));
            }
          )),
        i.$$.dirty & 8208 &&
          o?.on("style.load", () => {
            t(11, (ce = o?.getSource(m)));
          }),
        i.$$.dirty & 6176 && ce && (be ? t(12, (be = !1)) : ce.setData(b)),
        i.$$.dirty & 3072 &&
          ce?.setClusterOptions(
            $s({
              cluster: !!F,
              clusterMaxZoom: F?.maxZoom,
              clusterRadius: F?.radius,
            })
          );
    }),
    [r, q, Q, te, m, b, _, S, T, D, F, ce, be, o, h, u]
  );
}
var i_ = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, YN, XN, ut, {
          id: 4,
          data: 5,
          generateId: 6,
          promoteId: 7,
          filter: 8,
          lineMetrics: 9,
          cluster: 10,
        });
    }
  },
  r_ = i_;
var f7 = ws(da());
function eO(i, e, t) {
  let r,
    { map: o } = jo();
  Di(i, o, (T) => t(8, (r = T)));
  let { position: n = "top-left" } = e,
    { positionOptions: u = void 0 } = e,
    { fitBoundsOptions: h = void 0 } = e,
    { trackUserLocation: m = !1 } = e,
    { showAccuracyCircle: b = !0 } = e,
    { showUserLocation: _ = !0 } = e,
    S = null;
  return (
    dr(() => {
      r?.loaded() && S && r.removeControl(S);
    }),
    (i.$$set = (T) => {
      "position" in T && t(1, (n = T.position)),
        "positionOptions" in T && t(2, (u = T.positionOptions)),
        "fitBoundsOptions" in T && t(3, (h = T.fitBoundsOptions)),
        "trackUserLocation" in T && t(4, (m = T.trackUserLocation)),
        "showAccuracyCircle" in T && t(5, (b = T.showAccuracyCircle)),
        "showUserLocation" in T && t(6, (_ = T.showUserLocation));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 510 &&
        r &&
        !S &&
        (t(
          7,
          (S = new f7.default.GeolocateControl({
            positionOptions: u,
            fitBoundsOptions: h,
            trackUserLocation: m,
            showAccuracyCircle: b,
            showUserLocation: _,
          }))
        ),
        r.addControl(S, n));
    }),
    [o, n, u, h, m, b, _, S, r]
  );
}
var n_ = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, eO, null, ut, {
          position: 1,
          positionOptions: 2,
          fitBoundsOptions: 3,
          trackUserLocation: 4,
          showAccuracyCircle: 5,
          showUserLocation: 6,
        });
    }
  },
  o_ = n_;
function m7(i) {
  let e = i.getCenter(),
    t = Math.round(i.getZoom() * 100) / 100,
    r = Math.ceil((t * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10),
    o = Math.pow(10, r),
    n = Math.round(e.lat * o) / o,
    u = Math.round(e.lng * o) / o,
    h = `${t}/${n}/${u}`,
    m = i.getBearing(),
    b = i.getPitch();
  return (
    (m || b) && (h += `/${Math.round(m * 10) / 10}`),
    b && (h += `/${Math.round(b)}`),
    `#${h}`
  );
}
function g7(i) {
  return i.replace("#", "").split("/").map(parseFloat);
}
var k7 = ws(da());
var lf = s_;
function s_(i, e) {
  return i === e || (i !== i && e !== e)
    ? !0
    : typeof i != typeof e ||
      {}.toString.call(i) != {}.toString.call(e) ||
      i !== Object(i) ||
      !i
    ? !1
    : Array.isArray(i)
    ? y7(i, e)
    : {}.toString.call(i) == "[object Set]"
    ? y7(Array.from(i), Array.from(e))
    : {}.toString.call(i) == "[object Object]"
    ? iO(i, e)
    : tO(i, e);
}
function tO(i, e) {
  return i.toString() === e.toString();
}
function y7(i, e) {
  var t = i.length;
  if (t != e.length) return !1;
  for (var r = 0; r < t; r++) if (!s_(i[r], e[r])) return !1;
  return !0;
}
function iO(i, e) {
  var t = Object.keys(i),
    r = t.length;
  if (r != Object.keys(e).length) return !1;
  for (var o = 0; o < r; o++) {
    var n = t[o];
    if (!(e.hasOwnProperty(n) && s_(i[n], e[n]))) return !1;
  }
  return !0;
}
var b7 = ws(da());
function rO(i, e, t) {
  let r,
    { map: o } = jo();
  Di(i, o, (_) => t(6, (r = _)));
  let { position: n = "top-left" } = e,
    { showCompass: u = !0 } = e,
    { showZoom: h = !0 } = e,
    { visualizePitch: m = !1 } = e,
    b = null;
  return (
    dr(() => {
      r?.loaded() && b && r.removeControl(b);
    }),
    (i.$$set = (_) => {
      "position" in _ && t(1, (n = _.position)),
        "showCompass" in _ && t(2, (u = _.showCompass)),
        "showZoom" in _ && t(3, (h = _.showZoom)),
        "visualizePitch" in _ && t(4, (m = _.visualizePitch));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 126 &&
        r &&
        !b &&
        (t(
          5,
          (b = new b7.default.NavigationControl({
            showCompass: u,
            showZoom: h,
            visualizePitch: m,
          }))
        ),
        r.addControl(b, n));
    }),
    [o, n, u, h, m, b, r]
  );
}
var a_ = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, rO, null, ut, {
          position: 1,
          showCompass: 2,
          showZoom: 3,
          visualizePitch: 4,
        });
    }
  },
  cf = a_;
var v7 = ws(da());
function nO(i, e, t) {
  let r,
    { map: o } = jo();
  Di(i, o, (b) => t(5, (r = b)));
  let { position: n = "bottom-left" } = e,
    { maxWidth: u = void 0 } = e,
    { unit: h = "metric" } = e,
    m = null;
  return (
    dr(() => {
      r?.loaded() && m && r.removeControl(m);
    }),
    (i.$$set = (b) => {
      "position" in b && t(1, (n = b.position)),
        "maxWidth" in b && t(2, (u = b.maxWidth)),
        "unit" in b && t(3, (h = b.unit));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 62 &&
        r &&
        !m &&
        (t(4, (m = new v7.default.ScaleControl({ maxWidth: u, unit: h }))),
        r.addControl(m, n));
    }),
    [o, n, u, h, m, r]
  );
}
var l_ = class extends dt {
    constructor(e) {
      super(), gt(this, e, nO, null, ut, { position: 1, maxWidth: 2, unit: 3 });
    }
  },
  uf = l_;
var oO = (i) => ({
    map: i[0] & 8,
    loadedImages: i[0] & 16,
    allImagesLoaded: i[0] & 32,
  }),
  _7 = (i) => ({ map: i[3], loadedImages: i[4], allImagesLoaded: i[5] });
function x7(i) {
  let e,
    t,
    r = i[2] && w7(i),
    o = i[36].default,
    n = bi(o, i, i[35], _7);
  return {
    c() {
      r && r.c(), (e = Ot()), n && n.c();
    },
    m(u, h) {
      r && r.m(u, h), Ne(u, e, h), n && n.m(u, h), (t = !0);
    },
    p(u, h) {
      u[2]
        ? r
          ? (r.p(u, h), h[0] & 4 && Oe(r, 1))
          : ((r = w7(u)), r.c(), Oe(r, 1), r.m(e.parentNode, e))
        : r &&
          (Yi(),
          $e(r, 1, 1, () => {
            r = null;
          }),
          er()),
        n &&
          n.p &&
          (!t || (h[0] & 56) | (h[1] & 16)) &&
          _i(n, o, u, u[35], t ? vi(o, u[35], h, oO) : xi(u[35]), _7);
    },
    i(u) {
      t || (Oe(r), Oe(n, u), (t = !0));
    },
    o(u) {
      $e(r), $e(n, u), (t = !1);
    },
    d(u) {
      u && ze(e), r && r.d(u), n && n.d(u);
    },
  };
}
function w7(i) {
  let e, t, r, o, n, u, h, m;
  return (
    (e = new cf({ props: { position: i[6] } })),
    (r = new o_({
      props: { position: i[6], fitBoundsOptions: { maxZoom: 12 } },
    })),
    (n = new af({ props: { position: i[6] } })),
    (h = new uf({ props: { position: i[6] } })),
    {
      c() {
        Yt(e.$$.fragment),
          (t = Ot()),
          Yt(r.$$.fragment),
          (o = Ot()),
          Yt(n.$$.fragment),
          (u = Ot()),
          Yt(h.$$.fragment);
      },
      m(b, _) {
        Jt(e, b, _),
          Ne(b, t, _),
          Jt(r, b, _),
          Ne(b, o, _),
          Jt(n, b, _),
          Ne(b, u, _),
          Jt(h, b, _),
          (m = !0);
      },
      p(b, _) {
        let S = {};
        _[0] & 64 && (S.position = b[6]), e.$set(S);
        let T = {};
        _[0] & 64 && (T.position = b[6]), r.$set(T);
        let D = {};
        _[0] & 64 && (D.position = b[6]), n.$set(D);
        let F = {};
        _[0] & 64 && (F.position = b[6]), h.$set(F);
      },
      i(b) {
        m ||
          (Oe(e.$$.fragment, b),
          Oe(r.$$.fragment, b),
          Oe(n.$$.fragment, b),
          Oe(h.$$.fragment, b),
          (m = !0));
      },
      o(b) {
        $e(e.$$.fragment, b),
          $e(r.$$.fragment, b),
          $e(n.$$.fragment, b),
          $e(h.$$.fragment, b),
          (m = !1);
      },
      d(b) {
        b && (ze(t), ze(o), ze(u)), Xt(e, b), Xt(r, b), Xt(n, b), Xt(h, b);
      },
    }
  );
}
function sO(i) {
  let e,
    t,
    r,
    o,
    n,
    u,
    h = i[3] && i[0] && x7(i);
  return {
    c() {
      (e = Je("div")),
        h && h.c(),
        J(e, "class", (t = Wa(i[1]) + " svelte-p00lfq")),
        or(e, "expand-map", !i[1]);
    },
    m(m, b) {
      Ne(m, e, b),
        h && h.m(e, null),
        (o = !0),
        n || ((u = Qh((r = i[9].call(null, e)))), (n = !0));
    },
    p(m, b) {
      m[3] && m[0]
        ? h
          ? (h.p(m, b), b[0] & 9 && Oe(h, 1))
          : ((h = x7(m)), h.c(), Oe(h, 1), h.m(e, null))
        : h &&
          (Yi(),
          $e(h, 1, 1, () => {
            h = null;
          }),
          er()),
        (!o || (b[0] & 2 && t !== (t = Wa(m[1]) + " svelte-p00lfq"))) &&
          J(e, "class", t),
        (!o || b[0] & 2) && or(e, "expand-map", !m[1]);
    },
    i(m) {
      o || (Oe(h), (o = !0));
    },
    o(m) {
      $e(h), (o = !1);
    },
    d(m) {
      m && ze(e), h && h.d(), (n = !1), u();
    },
  };
}
function aO(i, e, t) {
  let r,
    o,
    n,
    u,
    { $$slots: h = {}, $$scope: m } = e,
    { map: b = null } = e,
    { class: _ = void 0 } = e,
    { style: S } = e,
    { diffStyleUpdates: T = !1 } = e,
    { center: D = void 0 } = e,
    { zoom: F = void 0 } = e,
    { pitch: q = 0 } = e,
    { bearing: Q = 0 } = e,
    { bounds: te = void 0 } = e,
    { hash: ce = !1 } = e,
    { loaded: be = !1 } = e,
    { minZoom: Y = 0 } = e,
    { maxZoom: Ie = 22 } = e,
    { zoomOnDoubleClick: Te = !0 } = e,
    { locale: fe = void 0 } = e,
    { interactive: Le = !0 } = e,
    { attributionControl: De = !0 } = e,
    { cooperativeGestures: st = !1 } = e,
    { preserveDrawingBuffer: qe = !1 } = e,
    { maxBounds: zt = void 0 } = e,
    { images: Rt = [] } = e,
    { standardControls: Gt = !1 } = e,
    { filterLayers: qt = void 0 } = e,
    { transformRequest: ct = void 0 } = e,
    vt = yo(),
    { map: ht, loadedImages: Vt } = s7();
  Di(i, ht, (it) => t(3, (n = it))), Di(i, Vt, (it) => t(4, (u = it)));
  let hi = new Set();
  async function Pi(it, ii = !1) {
    if (n && !(!n.loaded() && !ii))
      if ("url" in it) {
        hi.add(it.id);
        try {
          let wi = await n.loadImage(it.url);
          n?.addImage(it.id, wi.data, it.options), u.add(it.id), Vt.set(u);
        } catch (wi) {
          vt("error", wi);
        } finally {
          hi.delete(it.id);
        }
      } else n.addImage(it.id, it.data, it.options), u.add(it.id), Vt.set(u);
  }
  let Zt, Re, Ce, Bt;
  function ei(it) {
    if (ce) {
      let ii = g7(window.location.hash);
      ii.length >= 3 && (t(11, (F = ii[0])), t(10, (D = [ii[2], ii[1]]))),
        ii.length == 5 && (t(15, (Q = ii[3])), t(14, (q = ii[4])));
    }
    return (
      Cn(
        ht,
        (n = new k7.default.Map(
          $s({
            container: it,
            style: S,
            locale: fe,
            center: D,
            zoom: F,
            pitch: q,
            bearing: Q,
            minZoom: Y,
            maxZoom: Ie,
            interactive: Le,
            preserveDrawingBuffer: qe,
            maxBounds: zt,
            bounds: te,
            attributionControl: De,
            transformRequest: ct,
            cooperativeGestures: st,
          })
        )),
        n
      ),
      n.on("load", (ii) => {
        t(0, (be = !0)), vt("load", n);
      }),
      n.on("error", (ii) => vt("error", { ...ii, map: n })),
      n.on("movestart", (ii) => vt("movestart", { ...ii, map: n })),
      n.on("moveend", (ii) => {
        if (
          (t(10, (D = ii.target.getCenter())),
          t(11, (F = ii.target.getZoom())),
          t(12, (te = ii.target.getBounds())),
          vt("moveend", { ...ii, map: n }),
          ce)
        ) {
          let wi = window.location.href.replace(/(#.+)?$/, m7(n));
          window.history.replaceState(window.history.state, "", wi);
        }
      }),
      n.on("zoomstart", (ii) => vt("zoomstart", { ...ii, map: n })),
      n.on("zoom", (ii) => {
        t(11, (F = ii.target.getZoom())), vt("zoom", { ...ii, map: n });
      }),
      n.on("zoomend", (ii) => {
        t(11, (F = ii.target.getZoom())), vt("zoomend", { ...ii, map: n });
      }),
      n.on("style.load", () => {
        if (n) {
          let ii = n.getStyle();
          if (
            (t(32, (Zt = ii.layers.map((wi) => wi.id))),
            t(33, (Re = Object.keys(ii.sources))),
            Bt)
          )
            for (let [wi, sr] of Object.entries(Bt)) n.addSource(wi, sr);
          if (Ce) for (let wi of Ce) n.addLayer(wi);
          for (let wi of Rt) Pi(wi, !0);
        }
      }),
      n.on("styledata", (ii) => {
        if (n && qt) {
          let wi = n.getStyle().layers;
          if (wi)
            for (let sr of wi)
              qt(sr) || n.setLayoutProperty(sr.id, "visibility", "none");
        }
        vt("styledata", { ...ii, map: n });
      }),
      {
        destroy() {
          t(0, (be = !1)), n?.remove(), Cn(ht, (n = null), n);
        },
      }
    );
  }
  let Li = S;
  return (
    (i.$$set = (it) => {
      "map" in it && t(13, (b = it.map)),
        "class" in it && t(1, (_ = it.class)),
        "style" in it && t(16, (S = it.style)),
        "diffStyleUpdates" in it && t(17, (T = it.diffStyleUpdates)),
        "center" in it && t(10, (D = it.center)),
        "zoom" in it && t(11, (F = it.zoom)),
        "pitch" in it && t(14, (q = it.pitch)),
        "bearing" in it && t(15, (Q = it.bearing)),
        "bounds" in it && t(12, (te = it.bounds)),
        "hash" in it && t(18, (ce = it.hash)),
        "loaded" in it && t(0, (be = it.loaded)),
        "minZoom" in it && t(19, (Y = it.minZoom)),
        "maxZoom" in it && t(20, (Ie = it.maxZoom)),
        "zoomOnDoubleClick" in it && t(21, (Te = it.zoomOnDoubleClick)),
        "locale" in it && t(22, (fe = it.locale)),
        "interactive" in it && t(23, (Le = it.interactive)),
        "attributionControl" in it && t(24, (De = it.attributionControl)),
        "cooperativeGestures" in it && t(25, (st = it.cooperativeGestures)),
        "preserveDrawingBuffer" in it && t(26, (qe = it.preserveDrawingBuffer)),
        "maxBounds" in it && t(27, (zt = it.maxBounds)),
        "images" in it && t(28, (Rt = it.images)),
        "standardControls" in it && t(2, (Gt = it.standardControls)),
        "filterLayers" in it && t(29, (qt = it.filterLayers)),
        "transformRequest" in it && t(30, (ct = it.transformRequest)),
        "$$scope" in it && t(35, (m = it.$$scope));
    }),
    (i.$$.update = () => {
      if (
        (i.$$.dirty[0] & 4 && t(6, (r = typeof Gt == "boolean" ? void 0 : Gt)),
        i.$$.dirty[0] & 8 && t(13, (b = n)),
        (i.$$.dirty[0] & 196616) | (i.$$.dirty[1] & 14) && n && !lf(S, Li))
      ) {
        let it = n.getStyle();
        if ((Zt && (Ce = it.layers.filter((ii) => !Zt.includes(ii.id))), Re)) {
          let ii = Object.keys(it.sources).filter((wi) => !Re.includes(wi));
          Bt = {};
          for (let wi of ii) Bt[wi] = it.sources[wi];
        }
        t(34, (Li = S)),
          n.setStyle(S, { diff: T }),
          Cn(Vt, (u = new Set()), u),
          t(31, (hi = new Set()));
      }
      if (
        (i.$$.dirty[0] & 268435481) | (i.$$.dirty[1] & 1) &&
        be &&
        n?.loaded()
      )
        for (let it of Rt)
          !u.has(it.id) && !hi.has(it.id) && !n.hasImage(it.id) && Pi(it);
      i.$$.dirty[0] & 268435472 && t(5, (o = Rt.every((it) => u.has(it.id)))),
        i.$$.dirty[0] & 1032 && D && !lf(D, n?.getCenter()) && n?.panTo(D),
        i.$$.dirty[0] & 2056 && F && !lf(F, n?.getZoom()) && n?.zoomTo(F),
        i.$$.dirty[0] & 4104 &&
          te &&
          !lf(te, n?.getBounds()) &&
          n?.fitBounds(te),
        i.$$.dirty[0] & 2097160 &&
          (Te ? n?.doubleClickZoom.enable() : n?.doubleClickZoom.disable());
    }),
    [
      be,
      _,
      Gt,
      n,
      u,
      o,
      r,
      ht,
      Vt,
      ei,
      D,
      F,
      te,
      b,
      q,
      Q,
      S,
      T,
      ce,
      Y,
      Ie,
      Te,
      fe,
      Le,
      De,
      st,
      qe,
      zt,
      Rt,
      qt,
      ct,
      hi,
      Zt,
      Re,
      Li,
      m,
      h,
    ]
  );
}
var c_ = class extends dt {
    constructor(e) {
      super(),
        gt(
          this,
          e,
          aO,
          sO,
          ut,
          {
            map: 13,
            class: 1,
            style: 16,
            diffStyleUpdates: 17,
            center: 10,
            zoom: 11,
            pitch: 14,
            bearing: 15,
            bounds: 12,
            hash: 18,
            loaded: 0,
            minZoom: 19,
            maxZoom: 20,
            zoomOnDoubleClick: 21,
            locale: 22,
            interactive: 23,
            attributionControl: 24,
            cooperativeGestures: 25,
            preserveDrawingBuffer: 26,
            maxBounds: 27,
            images: 28,
            standardControls: 2,
            filterLayers: 29,
            transformRequest: 30,
          },
          null,
          [-1, -1]
        );
    }
  },
  u_ = c_;
var lO = ws(da());
var { Map: kle } = Ac;
var uO = ws(da());
var Nd = Uint8Array,
  S7 = Uint16Array,
  dO = Int32Array,
  hO = new Nd([
    0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5,
    5, 5, 5, 0, 0, 0, 0,
  ]),
  pO = new Nd([
    0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10,
    11, 11, 12, 12, 13, 13, 0, 0,
  ]),
  tce = new Nd([
    16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15,
  ]),
  C7 = function (i, e) {
    for (var t = new S7(31), r = 0; r < 31; ++r) t[r] = e += 1 << i[r - 1];
    for (var o = new dO(t[30]), r = 1; r < 30; ++r)
      for (var n = t[r]; n < t[r + 1]; ++n) o[n] = ((n - t[r]) << 5) | r;
    return { b: t, r: o };
  },
  E7 = C7(hO, 2),
  fO = E7.b,
  mO = E7.r;
(fO[28] = 258), (mO[258] = 28);
var T7 = C7(pO, 0),
  ice = T7.b,
  rce = T7.r,
  gO = new S7(32768);
for (yr = 0; yr < 32768; ++yr)
  (bl = ((yr & 43690) >> 1) | ((yr & 21845) << 1)),
    (bl = ((bl & 52428) >> 2) | ((bl & 13107) << 2)),
    (bl = ((bl & 61680) >> 4) | ((bl & 3855) << 4)),
    (gO[yr] = (((bl & 65280) >> 8) | ((bl & 255) << 8)) >> 1);
var bl, yr;
var n1 = new Nd(288);
for (yr = 0; yr < 144; ++yr) n1[yr] = 8;
var yr;
for (yr = 144; yr < 256; ++yr) n1[yr] = 9;
var yr;
for (yr = 256; yr < 280; ++yr) n1[yr] = 7;
var yr;
for (yr = 280; yr < 288; ++yr) n1[yr] = 8;
var yr,
  yO = new Nd(32);
for (yr = 0; yr < 32; ++yr) yO[yr] = 5;
var yr;
var bO = new Nd(0);
var vO = typeof TextDecoder < "u" && new TextDecoder(),
  _O = 0;
try {
  vO.decode(bO, { stream: !0 }), (_O = 1);
} catch {}
var wO = ws(da());
function kO(i) {
  let e, t;
  return (
    (e = new r1({
      props: { paint: { "fill-color": "#008800", "fill-opacity": 0.5 } },
    })),
    {
      c() {
        Yt(e.$$.fragment);
      },
      m(r, o) {
        Jt(e, r, o), (t = !0);
      },
      p: yt,
      i(r) {
        t || (Oe(e.$$.fragment, r), (t = !0));
      },
      o(r) {
        $e(e.$$.fragment, r), (t = !1);
      },
      d(r) {
        Xt(e, r);
      },
    }
  );
}
function SO(i) {
  let e, t, r, o, n, u, h, m, b, _;
  return (
    (e = new cf({ props: { position: "top-left", showCompass: !1 } })),
    (r = new af({ props: { position: "top-left" } })),
    (n = new uf({})),
    (h = new Yv({ props: { lngLat: i[1], draggable: !0 } })),
    h.$on("dragend", i[6]),
    (b = new r_({
      props: {
        id: "states",
        data: i[2],
        $$slots: { default: [kO] },
        $$scope: { ctx: i },
      },
    })),
    {
      c() {
        Yt(e.$$.fragment),
          (t = Ot()),
          Yt(r.$$.fragment),
          (o = Ot()),
          Yt(n.$$.fragment),
          (u = Ot()),
          Yt(h.$$.fragment),
          (m = Ot()),
          Yt(b.$$.fragment);
      },
      m(S, T) {
        Jt(e, S, T),
          Ne(S, t, T),
          Jt(r, S, T),
          Ne(S, o, T),
          Jt(n, S, T),
          Ne(S, u, T),
          Jt(h, S, T),
          Ne(S, m, T),
          Jt(b, S, T),
          (_ = !0);
      },
      p(S, T) {
        let D = {};
        T & 2 && (D.lngLat = S[1]), h.$set(D);
        let F = {};
        T & 4 && (F.data = S[2]),
          T & 16384 && (F.$$scope = { dirty: T, ctx: S }),
          b.$set(F);
      },
      i(S) {
        _ ||
          (Oe(e.$$.fragment, S),
          Oe(r.$$.fragment, S),
          Oe(n.$$.fragment, S),
          Oe(h.$$.fragment, S),
          Oe(b.$$.fragment, S),
          (_ = !0));
      },
      o(S) {
        $e(e.$$.fragment, S),
          $e(r.$$.fragment, S),
          $e(n.$$.fragment, S),
          $e(h.$$.fragment, S),
          $e(b.$$.fragment, S),
          (_ = !1);
      },
      d(S) {
        S && (ze(t), ze(o), ze(u), ze(m)),
          Xt(e, S),
          Xt(r, S),
          Xt(n, S),
          Xt(h, S),
          Xt(b, S);
      },
    }
  );
}
function CO(i) {
  let e, t, r, o, n, u, h, m, b, _, S, T, D, F, q, Q, te, ce, be;
  return (
    (Q = new u_({
      props: {
        center: i[1],
        zoom: 3,
        class: "map rounded-lg w-full",
        style: "https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",
        $$slots: { default: [SO] },
        $$scope: { ctx: i },
      },
    })),
    {
      c() {
        (e = Je("div")),
          (t = Je("div")),
          (r = Je("button")),
          (r.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 mr-1"><path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd"></path></svg>

      Locate Me`),
          (o = Ot()),
          (n = Je("div")),
          (u = Je("label")),
          (h = Xi("Max distance: ")),
          (m = Xi(i[0])),
          (b = Xi(" km")),
          (_ = Ot()),
          (S = Je("div")),
          (T = Je("input")),
          (D = Ot()),
          (F = Je("div")),
          (F.innerHTML = `<svg class="flex-shrink-0 w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path></svg> <span class="sr-only">Info</span> <div class="ms-3 text-sm font-medium">You can also click and hold the map marker on the map and move it to your
      desired location.</div> <button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-green-400 dark:hover:bg-gray-700" data-dismiss-target="#alert-3" aria-label="Close"><span class="sr-only">Close</span> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg></button>`),
          (q = Ot()),
          Yt(Q.$$.fragment),
          J(
            r,
            "class",
            "bg-orange-500 text-white py-3 px-5 rounded-lg mb-5 md:mb-0 mr-2 md:mr-4 flex flex-row whitespace-nowrap"
          ),
          J(u, "for", "default-range"),
          J(
            u,
            "class",
            "block text-sm font-medium text-gray-900 dark:text-white"
          ),
          J(T, "id", "default-range"),
          J(T, "type", "range"),
          J(T, "min", "15"),
          J(T, "max", "4000"),
          J(
            T,
            "class",
            "w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"
          ),
          J(S, "class", "py-2 w-full grow"),
          J(
            n,
            "class",
            "flex-grow flex flex-col justify-center items-center w-full"
          ),
          J(
            t,
            "class",
            "flex flex-col md:flex-row justify-center items-center w-full my-1"
          ),
          J(F, "id", "alert-3"),
          J(
            F,
            "class",
            "flex items-center p-4 mb-4 text-green-800 rounded-lg bg-green-100 dark:bg-gray-800 dark:text-green-400"
          ),
          J(F, "role", "alert"),
          J(e, "class", "flex flex-col justify-center w-full");
      },
      m(Y, Ie) {
        Ne(Y, e, Ie),
          He(e, t),
          He(t, r),
          He(t, o),
          He(t, n),
          He(n, u),
          He(u, h),
          He(u, m),
          He(u, b),
          He(n, _),
          He(n, S),
          He(S, T),
          zs(T, i[0]),
          He(e, D),
          He(e, F),
          He(e, q),
          Jt(Q, e, null),
          (te = !0),
          ce ||
            ((be = [
              Mt(r, "click", i[5]),
              Mt(T, "change", i[11]),
              Mt(T, "input", i[11]),
            ]),
            (ce = !0));
      },
      p(Y, [Ie]) {
        (!te || Ie & 1) && fn(m, Y[0]), Ie & 1 && zs(T, Y[0]);
        let Te = {};
        Ie & 2 && (Te.center = Y[1]),
          Ie & 16390 && (Te.$$scope = { dirty: Ie, ctx: Y }),
          Q.$set(Te);
      },
      i(Y) {
        te || (Oe(Q.$$.fragment, Y), (te = !0));
      },
      o(Y) {
        $e(Q.$$.fragment, Y), (te = !1);
      },
      d(Y) {
        Y && ze(e), Xt(Q), (ce = !1), gr(be);
      },
    }
  );
}
function EO(i, e) {
  let t;
  return function (...r) {
    clearTimeout(t),
      (t = setTimeout(() => {
        i.apply(this, r);
      }, e));
  };
}
async function TO(i, e, t, r) {
  try {
    let o = await fetch(i, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ latitude: e, longitude: t, radius: r }),
    });
    o.ok
      ? console.log("Data posted successfully")
      : console.error("Error in posting data", o.statusText);
  } catch (o) {
    console.error("Error in posting data", o);
  }
}
function MO(i, e, t) {
  let r,
    o,
    n,
    { lat: u = 50 } = e,
    { lon: h = 50 } = e,
    { rad: m = 500 } = e,
    { postGeoDataURL: b = "/post-url" } = e,
    _ = cn(m);
  Di(i, _, (te) => t(0, (o = te)));
  let S = cn([h, u]);
  Di(i, S, (te) => t(1, (n = te)));
  function T() {
    "geolocation" in navigator
      ? navigator.geolocation.getCurrentPosition(
          (te) => {
            S.set([te.coords.longitude, te.coords.latitude]);
          },
          (te) => {
            console.error("Error getting location:", te),
              alert("Unable to retrieve your location.");
          }
        )
      : alert("Geolocation is not supported by your browser.");
  }
  function D(te) {
    S.set(te.detail.lngLat);
  }
  var F = function (te, ce, be) {
    be || (be = 64);
    for (
      var Y = { latitude: te[1], longitude: te[0] },
        Ie = ce,
        Te = [],
        fe = Ie / (111.32 * Math.cos((Y.latitude * Math.PI) / 180)),
        Le = Ie / 110.574,
        De,
        st,
        qe,
        zt = 0;
      zt < be;
      zt++
    )
      (De = (zt / be) * (2 * Math.PI)),
        (st = fe * Math.cos(De)),
        (qe = Le * Math.sin(De)),
        Te.push([Y.longitude + st, Y.latitude + qe]);
    return (
      Te.push(Te[0]),
      { type: "Feature", geometry: { type: "Polygon", coordinates: [Te] } }
    );
  };
  let q = EO(TO, 250);
  function Q() {
    (o = Y3(this.value)), _.set(o);
  }
  return (
    (i.$$set = (te) => {
      "lat" in te && t(7, (u = te.lat)),
        "lon" in te && t(8, (h = te.lon)),
        "rad" in te && t(9, (m = te.rad)),
        "postGeoDataURL" in te && t(10, (b = te.postGeoDataURL));
    }),
    (i.$$.update = () => {
      i.$$.dirty & 1027 && n && o && q(b, n[1], n[0], o),
        i.$$.dirty & 3 && t(2, (r = F(n, o)));
    }),
    [o, n, r, _, S, T, D, u, h, m, b, Q]
  );
}
var d_ = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, MO, CO, ut, { lat: 7, lon: 8, rad: 9, postGeoDataURL: 10 });
    }
  },
  M7 = d_;
function A7(i, e, t) {
  let r = i.slice();
  return (r[11] = e[t]), r;
}
function I7(i) {
  let e, t;
  return {
    c() {
      (e = Je("img")),
        J(e, "class", "w-10 h-10 rounded-full mr-3 md:mr-5"),
        ig(e.src, (t = i[11].photo)) || J(e, "src", t),
        J(e, "alt", "Rounded avatar");
    },
    m(r, o) {
      Ne(r, e, o);
    },
    p(r, o) {
      o & 2048 && !ig(e.src, (t = r[11].photo)) && J(e, "src", t);
    },
    d(r) {
      r && ze(e);
    },
  };
}
function AO(i) {
  let e,
    t,
    r,
    o = i[11].label + "",
    n,
    u,
    h = i[11].photo && I7(i);
  return {
    c() {
      (e = Je("div")),
        h && h.c(),
        (t = Ot()),
        (r = Je("span")),
        (n = Xi(o)),
        J(e, "option", (u = i[11])),
        J(e, "slot", "option"),
        J(e, "class", "flex flex-row items-center");
    },
    m(m, b) {
      Ne(m, e, b), h && h.m(e, null), He(e, t), He(e, r), He(r, n);
    },
    p(m, b) {
      m[11].photo
        ? h
          ? h.p(m, b)
          : ((h = I7(m)), h.c(), h.m(e, t))
        : h && (h.d(1), (h = null)),
        b & 2048 && o !== (o = m[11].label + "") && fn(n, o),
        b & 2048 && u !== (u = m[11]) && J(e, "option", u);
    },
    d(m) {
      m && ze(e), h && h.d();
    },
  };
}
function P7(i) {
  let e, t, r, o;
  return {
    c() {
      (e = Je("div")),
        (t = Je("button")),
        (r = Je("span")),
        (o = Xi(i[2])),
        J(r, "class", "m-2 font-semibold"),
        J(
          t,
          "class",
          "bg-blue-600 hover:bg-blue-500 text-white py-1 px-4 rounded-lg inline-flex items-center"
        ),
        J(t, "aria-label", "Finish onboarding"),
        J(e, "class", "flex justify-center mt-4 m-10");
    },
    m(n, u) {
      Ne(n, e, u), He(e, t), He(t, r), He(r, o);
    },
    p(n, u) {
      u & 4 && fn(o, n[2]);
    },
    d(n) {
      n && ze(e);
    },
  };
}
function D7(i) {
  let e, t;
  return {
    c() {
      (e = Je("input")),
        J(e, "type", "hidden"),
        J(e, "name", i[0]),
        (e.value = t = i[11].id);
    },
    m(r, o) {
      Ne(r, e, o);
    },
    p(r, o) {
      o & 1 && J(e, "name", r[0]),
        o & 8 && t !== (t = r[11].id) && (e.value = t);
    },
    d(r) {
      r && ze(e);
    },
  };
}
function IO(i) {
  let e, t, r, o, n, u;
  function h(T) {
    i[7](T);
  }
  let m = {
    options: i[4],
    placeholder: i[1],
    outerDivClass:
      "!w-full !input !input-bordered !border !border-gray-300 !rounded-md !p-2.5 !bg-white !text-gray-900 !text-sm md:!text-base focus:!ring-blue-500 focus:!border-blue-500 dark:!bg-gray-700 dark:!border-gray-600 dark:!placeholder-gray-400 dark:!text-white dark:focus:!ring-blue-500 dark:focus:!border-blue-500",
    liSelectedClass: "!bg-orange-500 dark:!bg-blue-600 !p-2 !text-white",
    ulOptionsClass:
      "!p-1 !m-1 !bg-white dark:!bg-gray-700 !text-slate-600 dark:!text-white",
    liUserMsgClass:
      "!p-1 !m-1 !bg-white dark:!bg-gray-700 !text-slate-600 dark:!text-white",
    liActiveOptionClass: "!bg-slate-200 dark:!bg-blue-700 !rounded-lg",
    maxSelect: 1,
    maxSelectMsg: DO,
    $$slots: {
      option: [
        AO,
        ({ option: T }) => ({ 11: T }),
        ({ option: T }) => (T ? 2048 : 0),
      ],
    },
    $$scope: { ctx: i },
  };
  i[3] !== void 0 && (m.selected = i[3]),
    (e = new au({ props: m })),
    Bi.push(() => Gr(e, "selected", h));
  let b = i[3].length > 0 && i[2] && P7(i),
    _ = On(i[3]),
    S = [];
  for (let T = 0; T < _.length; T += 1) S[T] = D7(A7(i, _, T));
  return {
    c() {
      Yt(e.$$.fragment), (r = Ot()), b && b.c(), (o = Ot());
      for (let T = 0; T < S.length; T += 1) S[T].c();
      n = Ji();
    },
    m(T, D) {
      Jt(e, T, D), Ne(T, r, D), b && b.m(T, D), Ne(T, o, D);
      for (let F = 0; F < S.length; F += 1) S[F] && S[F].m(T, D);
      Ne(T, n, D), (u = !0);
    },
    p(T, [D]) {
      let F = {};
      if (
        (D & 2 && (F.placeholder = T[1]),
        D & 18432 && (F.$$scope = { dirty: D, ctx: T }),
        !t && D & 8 && ((t = !0), (F.selected = T[3]), Qr(() => (t = !1))),
        e.$set(F),
        T[3].length > 0 && T[2]
          ? b
            ? b.p(T, D)
            : ((b = P7(T)), b.c(), b.m(o.parentNode, o))
          : b && (b.d(1), (b = null)),
        D & 9)
      ) {
        _ = On(T[3]);
        let q;
        for (q = 0; q < _.length; q += 1) {
          let Q = A7(T, _, q);
          S[q]
            ? S[q].p(Q, D)
            : ((S[q] = D7(Q)), S[q].c(), S[q].m(n.parentNode, n));
        }
        for (; q < S.length; q += 1) S[q].d(1);
        S.length = _.length;
      }
    },
    i(T) {
      u || (Oe(e.$$.fragment, T), (u = !0));
    },
    o(T) {
      $e(e.$$.fragment, T), (u = !1);
    },
    d(T) {
      T && (ze(r), ze(o), ze(n)), Xt(e, T), b && b.d(T), Gl(S, T);
    },
  };
}
var PO = 500,
  DO = (i, e) => `${i} of ${e} selected`;
function LO(i, e, t) {
  let {
      items: r = [
        {
          id: 2,
          object: {
            name: "Cherry",
            profileImage: { photo: "https://your-image-url.jpg" },
          },
        },
        {
          id: 3,
          object: {
            name: "Pear",
            profileImage: { photo: "https://another-image-url.jpg" },
          },
        },
      ],
    } = e,
    { formInputName: o = "input_name" } = e,
    { placeholder: n = "Select options..." } = e,
    { componentID: u = "searchable-dropdown" } = e,
    { submitButtonText: h = null } = e,
    m,
    b = !0,
    _ = [],
    S = r.map((F) => ({
      id: F.id,
      label: F.object.name,
      photo:
        (F.object.profileImage && F.object.profileImage.thumbnail_url) || null,
    }));
  Ka(() => {
    _.length > 0 &&
      b &&
      (T(_),
      (b = !1),
      clearTimeout(m),
      (m = setTimeout(() => {
        b = !0;
      }, PO)));
  });
  function T(F) {
    let q = document.getElementById(u);
    if (q) {
      let Q = new CustomEvent("dropdownSelectionChanged", {
        detail: { selected: F },
      });
      q.dispatchEvent(Q);
    }
  }
  function D(F) {
    (_ = F), t(3, _);
  }
  return (
    (i.$$set = (F) => {
      "items" in F && t(5, (r = F.items)),
        "formInputName" in F && t(0, (o = F.formInputName)),
        "placeholder" in F && t(1, (n = F.placeholder)),
        "componentID" in F && t(6, (u = F.componentID)),
        "submitButtonText" in F && t(2, (h = F.submitButtonText));
    }),
    [o, n, h, _, S, r, u, D]
  );
}
var h_ = class extends dt {
    constructor(e) {
      super(),
        gt(this, e, LO, IO, ut, {
          items: 5,
          formInputName: 0,
          placeholder: 1,
          componentID: 6,
          submitButtonText: 2,
        });
    }
  },
  L7 = h_;
function FO(i) {
  let e;
  return {
    c() {
      (e = Je("div")),
        (e.textContent = "\u{1F31A}"),
        J(e, "class", "theme-toggle-light-icon text-2xl");
    },
    m(t, r) {
      Ne(t, e, r);
    },
    d(t) {
      t && ze(e);
    },
  };
}
function zO(i) {
  let e;
  return {
    c() {
      (e = Je("div")),
        (e.textContent = "\u{1F31E}"),
        J(e, "class", "theme-toggle-dark-icon text-2xl");
    },
    m(t, r) {
      Ne(t, e, r);
    },
    d(t) {
      t && ze(e);
    },
  };
}
function NO(i) {
  let e, t, r;
  function o(h, m) {
    return h[0] === "darkmode" ? zO : FO;
  }
  let n = o(i, -1),
    u = n(i);
  return {
    c() {
      (e = Je("button")),
        u.c(),
        J(e, "type", "button"),
        J(
          e,
          "class",
          "theme-toggle text-primary-content w-10 h-10 bg-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600 dark:bg-slate-500 rounded-full mx-2 flex items-center justify-center relative"
        );
    },
    m(h, m) {
      Ne(h, e, m), u.m(e, null), t || ((r = Mt(e, "click", i[1])), (t = !0));
    },
    p(h, [m]) {
      n !== (n = o(h, m)) && (u.d(1), (u = n(h)), u && (u.c(), u.m(e, null)));
    },
    i: yt,
    o: yt,
    d(h) {
      h && ze(e), u.d(), (t = !1), r();
    },
  };
}
function OO(i, e, t) {
  let r =
    localStorage.getItem("color-theme") ||
    (window.matchMedia("(prefers-color-scheme: dark)").matches
      ? "darkmode"
      : "lightmode");
  Ur(async () => {
    await Ns(),
      document.documentElement.setAttribute("data-theme", r),
      document.documentElement.classList.toggle("dark", r === "darkmode"),
      n();
  });
  function o() {
    t(0, (r = r === "darkmode" ? "lightmode" : "darkmode")),
      localStorage.setItem("color-theme", r),
      document.documentElement.setAttribute("data-theme", r),
      document.documentElement.classList.toggle("dark", r === "darkmode"),
      n();
  }
  function n() {
    t(0, r);
  }
  return [r, o];
}
var p_ = class extends dt {
    constructor(e) {
      super(), gt(this, e, OO, NO, ut, {});
    }
  },
  F7 = p_;
var BO = {
  MultiSelectComponent: z9,
  PhotoUploader: _8,
  SelectLocationPrefsMap: M7,
  EmojiPicker: l9,
  AnswerWriter: r9,
  SingleSelect: L7,
  PhoneNumberPicker: Jw,
  PwaInstallButton: i7,
  PwaSubscribePush: Pp,
  ThemeToggle: F7,
  RateAnswer: n7,
  NotificationPermissions: V9,
};
window.svelteInstances = window.svelteInstances || {};
function RO(i, e, t = {}) {
  let r = BO[i];
  if (!r) throw new Error(`Component ${i} not found in registry`);
  let o = document.getElementById(e);
  if (!o) throw new Error(`Could not find element with id ${e}`);
  (o.innerHTML = ""),
    window.svelteInstances[e] &&
      (window.svelteInstances[e].$destroy(),
      (window.svelteInstances[e] = null)),
    (window.svelteInstances[e] = new r({ target: o, props: t }));
}
window.renderSvelteComponent = function (i, e, t = {}) {
  RO(i, e, t);
};
window.successToast = function (i, e = 1e3) {
  Fn.success(i, { duration: e });
};
window.errorToast = function (i, e = 1e3) {
  Fn.error(i, { duration: e });
};
/*! Bundled license information:

cropperjs/dist/cropper.js:
  (*!
   * Cropper.js v1.6.1
   * https://fengyuanchen.github.io/cropperjs
   *
   * Copyright 2015-present Chen Fengyuan
   * Released under the MIT license
   *
   * Date: 2023-09-17T03:44:19.860Z
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.2/LICENSE.txt
   *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=svelte_bundle.js.map
