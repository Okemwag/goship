var TS=Object.create;var Q3=Object.defineProperty;var MS=Object.getOwnPropertyDescriptor;var AS=Object.getOwnPropertyNames;var IS=Object.getPrototypeOf,PS=Object.prototype.hasOwnProperty;var Uh=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var DS=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of AS(e))!PS.call(i,o)&&o!==t&&Q3(i,o,{get:()=>e[o],enumerable:!(r=MS(e,o))||r.enumerable});return i};var ws=(i,e,t)=>(t=i!=null?TS(IS(i)):{},DS(e||!i||!i.__esModule?Q3(t,"default",{value:i,enumerable:!0}):t,i));var u8=Uh((Aee,c8)=>{var n8=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],Yb=n8.join(","),ev=typeof Element>"u"?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function tv(i,e){e=e||{};var t=[],r=[],o=i.querySelectorAll(Yb);e.includeContainer&&ev.call(i,Yb)&&(o=Array.prototype.slice.apply(o),o.unshift(i));var n,u,h;for(n=0;n<o.length;n++)u=o[n],o8(u)&&(h=a8(u),h===0?t.push(u):r.push({documentOrder:n,tabIndex:h,node:u}));var m=r.sort(Sz).map(function(b){return b.node}).concat(t);return m}tv.isTabbable=xz;tv.isFocusable=kz;function o8(i){return!(!s8(i)||Mz(i)||a8(i)<0)}function xz(i){if(!i)throw new Error("No node provided");return ev.call(i,Yb)===!1?!1:o8(i)}function s8(i){return!(i.disabled||Ez(i)||Pz(i))}var wz=n8.concat("iframe").join(",");function kz(i){if(!i)throw new Error("No node provided");return ev.call(i,wz)===!1?!1:s8(i)}function a8(i){var e=parseInt(i.getAttribute("tabindex"),10);return isNaN(e)?Cz(i)?0:i.tabIndex:e}function Sz(i,e){return i.tabIndex===e.tabIndex?i.documentOrder-e.documentOrder:i.tabIndex-e.tabIndex}function Cz(i){return i.contentEditable==="true"}function l8(i){return i.tagName==="INPUT"}function Ez(i){return l8(i)&&i.type==="hidden"}function Tz(i){return l8(i)&&i.type==="radio"}function Mz(i){return Tz(i)&&!Iz(i)}function Az(i){for(var e=0;e<i.length;e++)if(i[e].checked)return i[e]}function Iz(i){if(!i.name)return!0;var e=i.ownerDocument.querySelectorAll('input[type="radio"][name="'+i.name+'"]'),t=Az(e);return!t||t===i}function Pz(i){return i.offsetParent===null||getComputedStyle(i).visibility==="hidden"}c8.exports=tv});var h8=Uh((Iee,d8)=>{d8.exports=Lz;var Dz=Object.prototype.hasOwnProperty;function Lz(){for(var i={},e=0;e<arguments.length;e++){var t=arguments[e];for(var r in t)Dz.call(t,r)&&(i[r]=t[r])}return i}});var b8=Uh((Pee,y8)=>{var p8=u8(),Fz=h8(),f8,m8=function(){var i=[];return{activateTrap:function(e){if(i.length>0){var t=i[i.length-1];t!==e&&t.pause()}var r=i.indexOf(e);r===-1||i.splice(r,1),i.push(e)},deactivateTrap:function(e){var t=i.indexOf(e);t!==-1&&i.splice(t,1),i.length>0&&i[i.length-1].unpause()}}}();function zz(i,e){var t=document,r=typeof i=="string"?t.querySelector(i):i,o=Fz({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),n={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},u={activate:h,deactivate:m,pause:b,unpause:_};return u;function h(xe){if(!n.active){je(),n.active=!0,n.paused=!1,n.nodeFocusedBeforeActivation=t.activeElement;var Le=xe&&xe.onActivate?xe.onActivate:o.onActivate;return Le&&Le(),S(),u}}function m(xe){if(n.active){clearTimeout(f8),T(),n.active=!1,n.paused=!1,m8.deactivateTrap(u);var Le=xe&&xe.onDeactivate!==void 0?xe.onDeactivate:o.onDeactivate;Le&&Le();var we=xe&&xe.returnFocus!==void 0?xe.returnFocus:o.returnFocusOnDeactivate;return we&&g8(function(){Ce(G(n.nodeFocusedBeforeActivation))}),u}}function b(){n.paused||!n.active||(n.paused=!0,T())}function _(){!n.paused||!n.active||(n.paused=!1,je(),S())}function S(){if(n.active)return m8.activateTrap(u),f8=g8(function(){Ce(F())}),t.addEventListener("focusin",ee,!0),t.addEventListener("mousedown",$,{capture:!0,passive:!1}),t.addEventListener("touchstart",$,{capture:!0,passive:!1}),t.addEventListener("click",Y,{capture:!0,passive:!1}),t.addEventListener("keydown",ue,{capture:!0,passive:!1}),u}function T(){if(n.active)return t.removeEventListener("focusin",ee,!0),t.removeEventListener("mousedown",$,!0),t.removeEventListener("touchstart",$,!0),t.removeEventListener("click",Y,!0),t.removeEventListener("keydown",ue,!0),u}function P(xe){var Le=o[xe],we=Le;if(!Le)return null;if(typeof Le=="string"&&(we=t.querySelector(Le),!we))throw new Error("`"+xe+"` refers to no known node");if(typeof Le=="function"&&(we=Le(),!we))throw new Error("`"+xe+"` did not return a node");return we}function F(){var xe;if(P("initialFocus")!==null?xe=P("initialFocus"):r.contains(t.activeElement)?xe=t.activeElement:xe=n.firstTabbableNode||P("fallbackFocus"),!xe)throw new Error("Your focus-trap needs to have at least one focusable element");return xe}function G(xe){var Le=P("setReturnFocus");return Le||xe}function $(xe){if(!r.contains(xe.target)){if(o.clickOutsideDeactivates){m({returnFocus:!p8.isFocusable(xe.target)});return}o.allowOutsideClick&&o.allowOutsideClick(xe)||xe.preventDefault()}}function ee(xe){r.contains(xe.target)||xe.target instanceof Document||(xe.stopImmediatePropagation(),Ce(n.mostRecentlyFocusedNode||F()))}function ue(xe){if(o.escapeDeactivates!==!1&&Oz(xe)){xe.preventDefault(),m();return}if(Bz(xe)){fe(xe);return}}function fe(xe){if(je(),xe.shiftKey&&xe.target===n.firstTabbableNode){xe.preventDefault(),Ce(n.lastTabbableNode);return}if(!xe.shiftKey&&xe.target===n.lastTabbableNode){xe.preventDefault(),Ce(n.firstTabbableNode);return}}function Y(xe){o.clickOutsideDeactivates||r.contains(xe.target)||o.allowOutsideClick&&o.allowOutsideClick(xe)||(xe.preventDefault(),xe.stopImmediatePropagation())}function je(){var xe=p8(r);n.firstTabbableNode=xe[0]||F(),n.lastTabbableNode=xe[xe.length-1]||F()}function Ce(xe){if(xe!==t.activeElement){if(!xe||!xe.focus){Ce(F());return}xe.focus(),n.mostRecentlyFocusedNode=xe,Nz(xe)&&xe.select()}}}function Nz(i){return i.tagName&&i.tagName.toLowerCase()==="input"&&typeof i.select=="function"}function Oz(i){return i.key==="Escape"||i.key==="Esc"||i.keyCode===27}function Bz(i){return i.key==="Tab"||i.keyCode===9}function g8(i){return setTimeout(i,0)}y8.exports=zz});var sv=Uh((nv,ov)=>{(function(i,e){typeof nv=="object"&&typeof ov<"u"?ov.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self,i.Cropper=e())})(nv,function(){"use strict";function i(ce,R){var X=Object.keys(ce);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(ce);R&&(Q=Q.filter(function(Me){return Object.getOwnPropertyDescriptor(ce,Me).enumerable})),X.push.apply(X,Q)}return X}function e(ce){for(var R=1;R<arguments.length;R++){var X=arguments[R]!=null?arguments[R]:{};R%2?i(Object(X),!0).forEach(function(Q){u(ce,Q,X[Q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ce,Object.getOwnPropertyDescriptors(X)):i(Object(X)).forEach(function(Q){Object.defineProperty(ce,Q,Object.getOwnPropertyDescriptor(X,Q))})}return ce}function t(ce){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},t(ce)}function r(ce,R){if(!(ce instanceof R))throw new TypeError("Cannot call a class as a function")}function o(ce,R){for(var X=0;X<R.length;X++){var Q=R[X];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(ce,F(Q.key),Q)}}function n(ce,R,X){return R&&o(ce.prototype,R),X&&o(ce,X),Object.defineProperty(ce,"prototype",{writable:!1}),ce}function u(ce,R,X){return R=F(R),R in ce?Object.defineProperty(ce,R,{value:X,enumerable:!0,configurable:!0,writable:!0}):ce[R]=X,ce}function h(ce){return m(ce)||b(ce)||_(ce)||T()}function m(ce){if(Array.isArray(ce))return S(ce)}function b(ce){if(typeof Symbol<"u"&&ce[Symbol.iterator]!=null||ce["@@iterator"]!=null)return Array.from(ce)}function _(ce,R){if(ce){if(typeof ce=="string")return S(ce,R);var X=Object.prototype.toString.call(ce).slice(8,-1);if(X==="Object"&&ce.constructor&&(X=ce.constructor.name),X==="Map"||X==="Set")return Array.from(ce);if(X==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return S(ce,R)}}function S(ce,R){(R==null||R>ce.length)&&(R=ce.length);for(var X=0,Q=new Array(R);X<R;X++)Q[X]=ce[X];return Q}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P(ce,R){if(typeof ce!="object"||ce===null)return ce;var X=ce[Symbol.toPrimitive];if(X!==void 0){var Q=X.call(ce,R||"default");if(typeof Q!="object")return Q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(ce)}function F(ce){var R=P(ce,"string");return typeof R=="symbol"?R:String(R)}var G=typeof window<"u"&&typeof window.document<"u",$=G?window:{},ee=G&&$.document.documentElement?"ontouchstart"in $.document.documentElement:!1,ue=G?"PointerEvent"in $:!1,fe="cropper",Y="all",je="crop",Ce="move",xe="zoom",Le="e",we="w",st="s",He="n",zt="ne",rt="nw",jt="se",$t="sw",dt="".concat(fe,"-crop"),vt="".concat(fe,"-disabled"),bt="".concat(fe,"-hidden"),Qt="".concat(fe,"-hide"),Yt="".concat(fe,"-invisible"),ki="".concat(fe,"-modal"),oi="".concat(fe,"-move"),tt="".concat(fe,"Action"),Fe="".concat(fe,"Preview"),Kt="crop",ti="move",Xi="none",nt="crop",Wt="cropend",yi="cropmove",Rt="cropstart",vi="dblclick",lt=ee?"touchstart":"mousedown",_i=ee?"touchmove":"mousemove",Ue=ee?"touchend touchcancel":"mouseup",fi=ue?"pointerdown":lt,xi=ue?"pointermove":_i,hi=ue?"pointerup pointercancel":Ue,fr="ready",Mr="resize",en="wheel",tn="zoom",bn="image/jpeg",Vn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,In=/^data:/,Zr=/^data:image\/jpeg;base64,/,ct=/^img|canvas$/i,Lr=200,Fr=100,Kn={viewMode:0,dragMode:Kt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:Lr,minContainerHeight:Fr,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ko='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ft=Number.isNaN||$.isNaN;function Mt(ce){return typeof ce=="number"&&!ft(ce)}var De=function(R){return R>0&&R<1/0};function At(ce){return typeof ce>"u"}function Jt(ce){return t(ce)==="object"&&ce!==null}var Dt=Object.prototype.hasOwnProperty;function wi(ce){if(!Jt(ce))return!1;try{var R=ce.constructor,X=R.prototype;return R&&X&&Dt.call(X,"isPrototypeOf")}catch{return!1}}function zi(ce){return typeof ce=="function"}var re=Array.prototype.slice;function V(ce){return Array.from?Array.from(ce):re.call(ce)}function H(ce,R){return ce&&zi(R)&&(Array.isArray(ce)||Mt(ce.length)?V(ce).forEach(function(X,Q){R.call(ce,X,Q,ce)}):Jt(ce)&&Object.keys(ce).forEach(function(X){R.call(ce,ce[X],X,ce)})),ce}var q=Object.assign||function(R){for(var X=arguments.length,Q=new Array(X>1?X-1:0),Me=1;Me<X;Me++)Q[Me-1]=arguments[Me];return Jt(R)&&Q.length>0&&Q.forEach(function(ge){Jt(ge)&&Object.keys(ge).forEach(function(Ae){R[Ae]=ge[Ae]})}),R},ne=/\.\d*(?:0|9){12}\d*$/;function be(ce){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return ne.test(ce)?Math.round(ce*R)/R:ce}var _e=/^width|height|left|top|marginLeft|marginTop$/;function Se(ce,R){var X=ce.style;H(R,function(Q,Me){_e.test(Me)&&Mt(Q)&&(Q="".concat(Q,"px")),X[Me]=Q})}function me(ce,R){return ce.classList?ce.classList.contains(R):ce.className.indexOf(R)>-1}function ke(ce,R){if(R){if(Mt(ce.length)){H(ce,function(Q){ke(Q,R)});return}if(ce.classList){ce.classList.add(R);return}var X=ce.className.trim();X?X.indexOf(R)<0&&(ce.className="".concat(X," ").concat(R)):ce.className=R}}function We(ce,R){if(R){if(Mt(ce.length)){H(ce,function(X){We(X,R)});return}if(ce.classList){ce.classList.remove(R);return}ce.className.indexOf(R)>=0&&(ce.className=ce.className.replace(R,""))}}function $e(ce,R,X){if(R){if(Mt(ce.length)){H(ce,function(Q){$e(Q,R,X)});return}X?ke(ce,R):We(ce,R)}}var Je=/([a-z\d])([A-Z])/g;function Gt(ce){return ce.replace(Je,"$1-$2").toLowerCase()}function ai(ce,R){return Jt(ce[R])?ce[R]:ce.dataset?ce.dataset[R]:ce.getAttribute("data-".concat(Gt(R)))}function ri(ce,R,X){Jt(X)?ce[R]=X:ce.dataset?ce.dataset[R]=X:ce.setAttribute("data-".concat(Gt(R)),X)}function Ni(ce,R){if(Jt(ce[R]))try{delete ce[R]}catch{ce[R]=void 0}else if(ce.dataset)try{delete ce.dataset[R]}catch{ce.dataset[R]=void 0}else ce.removeAttribute("data-".concat(Gt(R)))}var pi=/\s\s*/,cr=function(){var ce=!1;if(G){var R=!1,X=function(){},Q=Object.defineProperty({},"once",{get:function(){return ce=!0,R},set:function(ge){R=ge}});$.addEventListener("test",X,Q),$.removeEventListener("test",X,Q)}return ce}();function Oi(ce,R,X){var Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Me=X;R.trim().split(pi).forEach(function(ge){if(!cr){var Ae=ce.listeners;Ae&&Ae[ge]&&Ae[ge][X]&&(Me=Ae[ge][X],delete Ae[ge][X],Object.keys(Ae[ge]).length===0&&delete Ae[ge],Object.keys(Ae).length===0&&delete ce.listeners)}ce.removeEventListener(ge,Me,Q)})}function Yi(ce,R,X){var Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Me=X;R.trim().split(pi).forEach(function(ge){if(Q.once&&!cr){var Ae=ce.listeners,Ze=Ae===void 0?{}:Ae;Me=function(){delete Ze[ge][X],ce.removeEventListener(ge,Me,Q);for(var ht=arguments.length,Xe=new Array(ht),Ye=0;Ye<ht;Ye++)Xe[Ye]=arguments[Ye];X.apply(ce,Xe)},Ze[ge]||(Ze[ge]={}),Ze[ge][X]&&ce.removeEventListener(ge,Ze[ge][X],Q),Ze[ge][X]=Me,ce.listeners=Ze}ce.addEventListener(ge,Me,Q)})}function di(ce,R,X){var Q;return zi(Event)&&zi(CustomEvent)?Q=new CustomEvent(R,{detail:X,bubbles:!0,cancelable:!0}):(Q=document.createEvent("CustomEvent"),Q.initCustomEvent(R,!0,!0,X)),ce.dispatchEvent(Q)}function br(ce){var R=ce.getBoundingClientRect();return{left:R.left+(window.pageXOffset-document.documentElement.clientLeft),top:R.top+(window.pageYOffset-document.documentElement.clientTop)}}var Rr=$.location,Pn=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function rn(ce){var R=ce.match(Pn);return R!==null&&(R[1]!==Rr.protocol||R[2]!==Rr.hostname||R[3]!==Rr.port)}function dn(ce){var R="timestamp=".concat(new Date().getTime());return ce+(ce.indexOf("?")===-1?"?":"&")+R}function nn(ce){var R=ce.rotate,X=ce.scaleX,Q=ce.scaleY,Me=ce.translateX,ge=ce.translateY,Ae=[];Mt(Me)&&Me!==0&&Ae.push("translateX(".concat(Me,"px)")),Mt(ge)&&ge!==0&&Ae.push("translateY(".concat(ge,"px)")),Mt(R)&&R!==0&&Ae.push("rotate(".concat(R,"deg)")),Mt(X)&&X!==1&&Ae.push("scaleX(".concat(X,")")),Mt(Q)&&Q!==1&&Ae.push("scaleY(".concat(Q,")"));var Ze=Ae.length?Ae.join(" "):"none";return{WebkitTransform:Ze,msTransform:Ze,transform:Ze}}function xl(ce){var R=e({},ce),X=0;return H(ce,function(Q,Me){delete R[Me],H(R,function(ge){var Ae=Math.abs(Q.startX-ge.startX),Ze=Math.abs(Q.startY-ge.startY),xt=Math.abs(Q.endX-ge.endX),ht=Math.abs(Q.endY-ge.endY),Xe=Math.sqrt(Ae*Ae+Ze*Ze),Ye=Math.sqrt(xt*xt+ht*ht),_t=(Ye-Xe)/Xe;Math.abs(_t)>Math.abs(X)&&(X=_t)})}),X}function fa(ce,R){var X=ce.pageX,Q=ce.pageY,Me={endX:X,endY:Q};return R?Me:e({startX:X,startY:Q},Me)}function ir(ce){var R=0,X=0,Q=0;return H(ce,function(Me){var ge=Me.startX,Ae=Me.startY;R+=ge,X+=Ae,Q+=1}),R/=Q,X/=Q,{pageX:R,pageY:X}}function So(ce){var R=ce.aspectRatio,X=ce.height,Q=ce.width,Me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",ge=De(Q),Ae=De(X);if(ge&&Ae){var Ze=X*R;Me==="contain"&&Ze>Q||Me==="cover"&&Ze<Q?X=Q/R:Q=X*R}else ge?X=Q/R:Ae&&(Q=X*R);return{width:Q,height:X}}function La(ce){var R=ce.width,X=ce.height,Q=ce.degree;if(Q=Math.abs(Q)%180,Q===90)return{width:X,height:R};var Me=Q%90*Math.PI/180,ge=Math.sin(Me),Ae=Math.cos(Me),Ze=R*Ae+X*ge,xt=R*ge+X*Ae;return Q>90?{width:xt,height:Ze}:{width:Ze,height:xt}}function jn(ce,R,X,Q){var Me=R.aspectRatio,ge=R.naturalWidth,Ae=R.naturalHeight,Ze=R.rotate,xt=Ze===void 0?0:Ze,ht=R.scaleX,Xe=ht===void 0?1:ht,Ye=R.scaleY,_t=Ye===void 0?1:Ye,er=X.aspectRatio,Ui=X.naturalWidth,vr=X.naturalHeight,sr=Q.fillColor,Kr=sr===void 0?"transparent":sr,qr=Q.imageSmoothingEnabled,_r=qr===void 0?!0:qr,Co=Q.imageSmoothingQuality,Ar=Co===void 0?"low":Co,kt=Q.maxWidth,tr=kt===void 0?1/0:kt,Nr=Q.maxHeight,qn=Nr===void 0?1/0:Nr,uo=Q.minWidth,Eo=uo===void 0?0:uo,Ws=Q.minHeight,Ts=Ws===void 0?0:Ws,qo=document.createElement("canvas"),Xn=qo.getContext("2d"),ho=So({aspectRatio:er,width:tr,height:qn}),Zs=So({aspectRatio:er,width:Eo,height:Ts},"cover"),$n=Math.min(ho.width,Math.max(Zs.width,Ui)),vn=Math.min(ho.height,Math.max(Zs.height,vr)),Ks=So({aspectRatio:Me,width:tr,height:qn}),Wi=So({aspectRatio:Me,width:Eo,height:Ts},"cover"),Fa=Math.min(Ks.width,Math.max(Wi.width,ge)),Sl=Math.min(Ks.height,Math.max(Wi.height,Ae)),dc=[-Fa/2,-Sl/2,Fa,Sl];return qo.width=be($n),qo.height=be(vn),Xn.fillStyle=Kr,Xn.fillRect(0,0,$n,vn),Xn.save(),Xn.translate($n/2,vn/2),Xn.rotate(xt*Math.PI/180),Xn.scale(Xe,_t),Xn.imageSmoothingEnabled=_r,Xn.imageSmoothingQuality=Ar,Xn.drawImage.apply(Xn,[ce].concat(h(dc.map(function(Cl){return Math.floor(be(Cl))})))),Xn.restore(),qo}var Dn=String.fromCharCode;function wl(ce,R,X){var Q="";X+=R;for(var Me=R;Me<X;Me+=1)Q+=Dn(ce.getUint8(Me));return Q}var hn=/^data:.*,/;function Jn(ce){var R=ce.replace(hn,""),X=atob(R),Q=new ArrayBuffer(X.length),Me=new Uint8Array(Q);return H(Me,function(ge,Ae){Me[Ae]=X.charCodeAt(Ae)}),Q}function kl(ce,R){for(var X=[],Q=8192,Me=new Uint8Array(ce);Me.length>0;)X.push(Dn.apply(null,V(Me.subarray(0,Q)))),Me=Me.subarray(Q);return"data:".concat(R,";base64,").concat(btoa(X.join("")))}function de(ce){var R=new DataView(ce),X;try{var Q,Me,ge;if(R.getUint8(0)===255&&R.getUint8(1)===216)for(var Ae=R.byteLength,Ze=2;Ze+1<Ae;){if(R.getUint8(Ze)===255&&R.getUint8(Ze+1)===225){Me=Ze;break}Ze+=1}if(Me){var xt=Me+4,ht=Me+10;if(wl(R,xt,4)==="Exif"){var Xe=R.getUint16(ht);if(Q=Xe===18761,(Q||Xe===19789)&&R.getUint16(ht+2,Q)===42){var Ye=R.getUint32(ht+4,Q);Ye>=8&&(ge=ht+Ye)}}}if(ge){var _t=R.getUint16(ge,Q),er,Ui;for(Ui=0;Ui<_t;Ui+=1)if(er=ge+Ui*12+2,R.getUint16(er,Q)===274){er+=8,X=R.getUint16(er,Q),R.setUint16(er,1,Q);break}}}catch{X=1}return X}function ci(ce){var R=0,X=1,Q=1;switch(ce){case 2:X=-1;break;case 3:R=-180;break;case 4:Q=-1;break;case 5:R=90,Q=-1;break;case 6:R=90;break;case 7:R=90,X=-1;break;case 8:R=-90;break}return{rotate:R,scaleX:X,scaleY:Q}}var mr={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var R=this.element,X=this.options,Q=this.container,Me=this.cropper,ge=Number(X.minContainerWidth),Ae=Number(X.minContainerHeight);ke(Me,bt),We(R,bt);var Ze={width:Math.max(Q.offsetWidth,ge>=0?ge:Lr),height:Math.max(Q.offsetHeight,Ae>=0?Ae:Fr)};this.containerData=Ze,Se(Me,{width:Ze.width,height:Ze.height}),ke(R,bt),We(Me,bt)},initCanvas:function(){var R=this.containerData,X=this.imageData,Q=this.options.viewMode,Me=Math.abs(X.rotate)%180===90,ge=Me?X.naturalHeight:X.naturalWidth,Ae=Me?X.naturalWidth:X.naturalHeight,Ze=ge/Ae,xt=R.width,ht=R.height;R.height*Ze>R.width?Q===3?xt=R.height*Ze:ht=R.width/Ze:Q===3?ht=R.width/Ze:xt=R.height*Ze;var Xe={aspectRatio:Ze,naturalWidth:ge,naturalHeight:Ae,width:xt,height:ht};this.canvasData=Xe,this.limited=Q===1||Q===2,this.limitCanvas(!0,!0),Xe.width=Math.min(Math.max(Xe.width,Xe.minWidth),Xe.maxWidth),Xe.height=Math.min(Math.max(Xe.height,Xe.minHeight),Xe.maxHeight),Xe.left=(R.width-Xe.width)/2,Xe.top=(R.height-Xe.height)/2,Xe.oldLeft=Xe.left,Xe.oldTop=Xe.top,this.initialCanvasData=q({},Xe)},limitCanvas:function(R,X){var Q=this.options,Me=this.containerData,ge=this.canvasData,Ae=this.cropBoxData,Ze=Q.viewMode,xt=ge.aspectRatio,ht=this.cropped&&Ae;if(R){var Xe=Number(Q.minCanvasWidth)||0,Ye=Number(Q.minCanvasHeight)||0;Ze>1?(Xe=Math.max(Xe,Me.width),Ye=Math.max(Ye,Me.height),Ze===3&&(Ye*xt>Xe?Xe=Ye*xt:Ye=Xe/xt)):Ze>0&&(Xe?Xe=Math.max(Xe,ht?Ae.width:0):Ye?Ye=Math.max(Ye,ht?Ae.height:0):ht&&(Xe=Ae.width,Ye=Ae.height,Ye*xt>Xe?Xe=Ye*xt:Ye=Xe/xt));var _t=So({aspectRatio:xt,width:Xe,height:Ye});Xe=_t.width,Ye=_t.height,ge.minWidth=Xe,ge.minHeight=Ye,ge.maxWidth=1/0,ge.maxHeight=1/0}if(X)if(Ze>(ht?0:1)){var er=Me.width-ge.width,Ui=Me.height-ge.height;ge.minLeft=Math.min(0,er),ge.minTop=Math.min(0,Ui),ge.maxLeft=Math.max(0,er),ge.maxTop=Math.max(0,Ui),ht&&this.limited&&(ge.minLeft=Math.min(Ae.left,Ae.left+(Ae.width-ge.width)),ge.minTop=Math.min(Ae.top,Ae.top+(Ae.height-ge.height)),ge.maxLeft=Ae.left,ge.maxTop=Ae.top,Ze===2&&(ge.width>=Me.width&&(ge.minLeft=Math.min(0,er),ge.maxLeft=Math.max(0,er)),ge.height>=Me.height&&(ge.minTop=Math.min(0,Ui),ge.maxTop=Math.max(0,Ui))))}else ge.minLeft=-ge.width,ge.minTop=-ge.height,ge.maxLeft=Me.width,ge.maxTop=Me.height},renderCanvas:function(R,X){var Q=this.canvasData,Me=this.imageData;if(X){var ge=La({width:Me.naturalWidth*Math.abs(Me.scaleX||1),height:Me.naturalHeight*Math.abs(Me.scaleY||1),degree:Me.rotate||0}),Ae=ge.width,Ze=ge.height,xt=Q.width*(Ae/Q.naturalWidth),ht=Q.height*(Ze/Q.naturalHeight);Q.left-=(xt-Q.width)/2,Q.top-=(ht-Q.height)/2,Q.width=xt,Q.height=ht,Q.aspectRatio=Ae/Ze,Q.naturalWidth=Ae,Q.naturalHeight=Ze,this.limitCanvas(!0,!1)}(Q.width>Q.maxWidth||Q.width<Q.minWidth)&&(Q.left=Q.oldLeft),(Q.height>Q.maxHeight||Q.height<Q.minHeight)&&(Q.top=Q.oldTop),Q.width=Math.min(Math.max(Q.width,Q.minWidth),Q.maxWidth),Q.height=Math.min(Math.max(Q.height,Q.minHeight),Q.maxHeight),this.limitCanvas(!1,!0),Q.left=Math.min(Math.max(Q.left,Q.minLeft),Q.maxLeft),Q.top=Math.min(Math.max(Q.top,Q.minTop),Q.maxTop),Q.oldLeft=Q.left,Q.oldTop=Q.top,Se(this.canvas,q({width:Q.width,height:Q.height},nn({translateX:Q.left,translateY:Q.top}))),this.renderImage(R),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(R){var X=this.canvasData,Q=this.imageData,Me=Q.naturalWidth*(X.width/X.naturalWidth),ge=Q.naturalHeight*(X.height/X.naturalHeight);q(Q,{width:Me,height:ge,left:(X.width-Me)/2,top:(X.height-ge)/2}),Se(this.image,q({width:Q.width,height:Q.height},nn(q({translateX:Q.left,translateY:Q.top},Q)))),R&&this.output()},initCropBox:function(){var R=this.options,X=this.canvasData,Q=R.aspectRatio||R.initialAspectRatio,Me=Number(R.autoCropArea)||.8,ge={width:X.width,height:X.height};Q&&(X.height*Q>X.width?ge.height=ge.width/Q:ge.width=ge.height*Q),this.cropBoxData=ge,this.limitCropBox(!0,!0),ge.width=Math.min(Math.max(ge.width,ge.minWidth),ge.maxWidth),ge.height=Math.min(Math.max(ge.height,ge.minHeight),ge.maxHeight),ge.width=Math.max(ge.minWidth,ge.width*Me),ge.height=Math.max(ge.minHeight,ge.height*Me),ge.left=X.left+(X.width-ge.width)/2,ge.top=X.top+(X.height-ge.height)/2,ge.oldLeft=ge.left,ge.oldTop=ge.top,this.initialCropBoxData=q({},ge)},limitCropBox:function(R,X){var Q=this.options,Me=this.containerData,ge=this.canvasData,Ae=this.cropBoxData,Ze=this.limited,xt=Q.aspectRatio;if(R){var ht=Number(Q.minCropBoxWidth)||0,Xe=Number(Q.minCropBoxHeight)||0,Ye=Ze?Math.min(Me.width,ge.width,ge.width+ge.left,Me.width-ge.left):Me.width,_t=Ze?Math.min(Me.height,ge.height,ge.height+ge.top,Me.height-ge.top):Me.height;ht=Math.min(ht,Me.width),Xe=Math.min(Xe,Me.height),xt&&(ht&&Xe?Xe*xt>ht?Xe=ht/xt:ht=Xe*xt:ht?Xe=ht/xt:Xe&&(ht=Xe*xt),_t*xt>Ye?_t=Ye/xt:Ye=_t*xt),Ae.minWidth=Math.min(ht,Ye),Ae.minHeight=Math.min(Xe,_t),Ae.maxWidth=Ye,Ae.maxHeight=_t}X&&(Ze?(Ae.minLeft=Math.max(0,ge.left),Ae.minTop=Math.max(0,ge.top),Ae.maxLeft=Math.min(Me.width,ge.left+ge.width)-Ae.width,Ae.maxTop=Math.min(Me.height,ge.top+ge.height)-Ae.height):(Ae.minLeft=0,Ae.minTop=0,Ae.maxLeft=Me.width-Ae.width,Ae.maxTop=Me.height-Ae.height))},renderCropBox:function(){var R=this.options,X=this.containerData,Q=this.cropBoxData;(Q.width>Q.maxWidth||Q.width<Q.minWidth)&&(Q.left=Q.oldLeft),(Q.height>Q.maxHeight||Q.height<Q.minHeight)&&(Q.top=Q.oldTop),Q.width=Math.min(Math.max(Q.width,Q.minWidth),Q.maxWidth),Q.height=Math.min(Math.max(Q.height,Q.minHeight),Q.maxHeight),this.limitCropBox(!1,!0),Q.left=Math.min(Math.max(Q.left,Q.minLeft),Q.maxLeft),Q.top=Math.min(Math.max(Q.top,Q.minTop),Q.maxTop),Q.oldLeft=Q.left,Q.oldTop=Q.top,R.movable&&R.cropBoxMovable&&ri(this.face,tt,Q.width>=X.width&&Q.height>=X.height?Ce:Y),Se(this.cropBox,q({width:Q.width,height:Q.height},nn({translateX:Q.left,translateY:Q.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),di(this.element,nt,this.getData())}},zr={initPreview:function(){var R=this.element,X=this.crossOrigin,Q=this.options.preview,Me=X?this.crossOriginUrl:this.url,ge=R.alt||"The image to preview",Ae=document.createElement("img");if(X&&(Ae.crossOrigin=X),Ae.src=Me,Ae.alt=ge,this.viewBox.appendChild(Ae),this.viewBoxImage=Ae,!!Q){var Ze=Q;typeof Q=="string"?Ze=R.ownerDocument.querySelectorAll(Q):Q.querySelector&&(Ze=[Q]),this.previews=Ze,H(Ze,function(xt){var ht=document.createElement("img");ri(xt,Fe,{width:xt.offsetWidth,height:xt.offsetHeight,html:xt.innerHTML}),X&&(ht.crossOrigin=X),ht.src=Me,ht.alt=ge,ht.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',xt.innerHTML="",xt.appendChild(ht)})}},resetPreview:function(){H(this.previews,function(R){var X=ai(R,Fe);Se(R,{width:X.width,height:X.height}),R.innerHTML=X.html,Ni(R,Fe)})},preview:function(){var R=this.imageData,X=this.canvasData,Q=this.cropBoxData,Me=Q.width,ge=Q.height,Ae=R.width,Ze=R.height,xt=Q.left-X.left-R.left,ht=Q.top-X.top-R.top;!this.cropped||this.disabled||(Se(this.viewBoxImage,q({width:Ae,height:Ze},nn(q({translateX:-xt,translateY:-ht},R)))),H(this.previews,function(Xe){var Ye=ai(Xe,Fe),_t=Ye.width,er=Ye.height,Ui=_t,vr=er,sr=1;Me&&(sr=_t/Me,vr=ge*sr),ge&&vr>er&&(sr=er/ge,Ui=Me*sr,vr=er),Se(Xe,{width:Ui,height:vr}),Se(Xe.getElementsByTagName("img")[0],q({width:Ae*sr,height:Ze*sr},nn(q({translateX:-xt*sr,translateY:-ht*sr},R))))}))}},ur={bind:function(){var R=this.element,X=this.options,Q=this.cropper;zi(X.cropstart)&&Yi(R,Rt,X.cropstart),zi(X.cropmove)&&Yi(R,yi,X.cropmove),zi(X.cropend)&&Yi(R,Wt,X.cropend),zi(X.crop)&&Yi(R,nt,X.crop),zi(X.zoom)&&Yi(R,tn,X.zoom),Yi(Q,fi,this.onCropStart=this.cropStart.bind(this)),X.zoomable&&X.zoomOnWheel&&Yi(Q,en,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),X.toggleDragModeOnDblclick&&Yi(Q,vi,this.onDblclick=this.dblclick.bind(this)),Yi(R.ownerDocument,xi,this.onCropMove=this.cropMove.bind(this)),Yi(R.ownerDocument,hi,this.onCropEnd=this.cropEnd.bind(this)),X.responsive&&Yi(window,Mr,this.onResize=this.resize.bind(this))},unbind:function(){var R=this.element,X=this.options,Q=this.cropper;zi(X.cropstart)&&Oi(R,Rt,X.cropstart),zi(X.cropmove)&&Oi(R,yi,X.cropmove),zi(X.cropend)&&Oi(R,Wt,X.cropend),zi(X.crop)&&Oi(R,nt,X.crop),zi(X.zoom)&&Oi(R,tn,X.zoom),Oi(Q,fi,this.onCropStart),X.zoomable&&X.zoomOnWheel&&Oi(Q,en,this.onWheel,{passive:!1,capture:!0}),X.toggleDragModeOnDblclick&&Oi(Q,vi,this.onDblclick),Oi(R.ownerDocument,xi,this.onCropMove),Oi(R.ownerDocument,hi,this.onCropEnd),X.responsive&&Oi(window,Mr,this.onResize)}},Ho={resize:function(){if(!this.disabled){var R=this.options,X=this.container,Q=this.containerData,Me=X.offsetWidth/Q.width,ge=X.offsetHeight/Q.height,Ae=Math.abs(Me-1)>Math.abs(ge-1)?Me:ge;if(Ae!==1){var Ze,xt;R.restore&&(Ze=this.getCanvasData(),xt=this.getCropBoxData()),this.render(),R.restore&&(this.setCanvasData(H(Ze,function(ht,Xe){Ze[Xe]=ht*Ae})),this.setCropBoxData(H(xt,function(ht,Xe){xt[Xe]=ht*Ae})))}}},dblclick:function(){this.disabled||this.options.dragMode===Xi||this.setDragMode(me(this.dragBox,dt)?ti:Kt)},wheel:function(R){var X=this,Q=Number(this.options.wheelZoomRatio)||.1,Me=1;this.disabled||(R.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){X.wheeling=!1},50),R.deltaY?Me=R.deltaY>0?1:-1:R.wheelDelta?Me=-R.wheelDelta/120:R.detail&&(Me=R.detail>0?1:-1),this.zoom(-Me*Q,R)))},cropStart:function(R){var X=R.buttons,Q=R.button;if(!(this.disabled||(R.type==="mousedown"||R.type==="pointerdown"&&R.pointerType==="mouse")&&(Mt(X)&&X!==1||Mt(Q)&&Q!==0||R.ctrlKey))){var Me=this.options,ge=this.pointers,Ae;R.changedTouches?H(R.changedTouches,function(Ze){ge[Ze.identifier]=fa(Ze)}):ge[R.pointerId||0]=fa(R),Object.keys(ge).length>1&&Me.zoomable&&Me.zoomOnTouch?Ae=xe:Ae=ai(R.target,tt),Vn.test(Ae)&&di(this.element,Rt,{originalEvent:R,action:Ae})!==!1&&(R.preventDefault(),this.action=Ae,this.cropping=!1,Ae===je&&(this.cropping=!0,ke(this.dragBox,ki)))}},cropMove:function(R){var X=this.action;if(!(this.disabled||!X)){var Q=this.pointers;R.preventDefault(),di(this.element,yi,{originalEvent:R,action:X})!==!1&&(R.changedTouches?H(R.changedTouches,function(Me){q(Q[Me.identifier]||{},fa(Me,!0))}):q(Q[R.pointerId||0]||{},fa(R,!0)),this.change(R))}},cropEnd:function(R){if(!this.disabled){var X=this.action,Q=this.pointers;R.changedTouches?H(R.changedTouches,function(Me){delete Q[Me.identifier]}):delete Q[R.pointerId||0],X&&(R.preventDefault(),Object.keys(Q).length||(this.action=""),this.cropping&&(this.cropping=!1,$e(this.dragBox,ki,this.cropped&&this.options.modal)),di(this.element,Wt,{originalEvent:R,action:X}))}}},on={change:function(R){var X=this.options,Q=this.canvasData,Me=this.containerData,ge=this.cropBoxData,Ae=this.pointers,Ze=this.action,xt=X.aspectRatio,ht=ge.left,Xe=ge.top,Ye=ge.width,_t=ge.height,er=ht+Ye,Ui=Xe+_t,vr=0,sr=0,Kr=Me.width,qr=Me.height,_r=!0,Co;!xt&&R.shiftKey&&(xt=Ye&&_t?Ye/_t:1),this.limited&&(vr=ge.minLeft,sr=ge.minTop,Kr=vr+Math.min(Me.width,Q.width,Q.left+Q.width),qr=sr+Math.min(Me.height,Q.height,Q.top+Q.height));var Ar=Ae[Object.keys(Ae)[0]],kt={x:Ar.endX-Ar.startX,y:Ar.endY-Ar.startY},tr=function(qn){switch(qn){case Le:er+kt.x>Kr&&(kt.x=Kr-er);break;case we:ht+kt.x<vr&&(kt.x=vr-ht);break;case He:Xe+kt.y<sr&&(kt.y=sr-Xe);break;case st:Ui+kt.y>qr&&(kt.y=qr-Ui);break}};switch(Ze){case Y:ht+=kt.x,Xe+=kt.y;break;case Le:if(kt.x>=0&&(er>=Kr||xt&&(Xe<=sr||Ui>=qr))){_r=!1;break}tr(Le),Ye+=kt.x,Ye<0&&(Ze=we,Ye=-Ye,ht-=Ye),xt&&(_t=Ye/xt,Xe+=(ge.height-_t)/2);break;case He:if(kt.y<=0&&(Xe<=sr||xt&&(ht<=vr||er>=Kr))){_r=!1;break}tr(He),_t-=kt.y,Xe+=kt.y,_t<0&&(Ze=st,_t=-_t,Xe-=_t),xt&&(Ye=_t*xt,ht+=(ge.width-Ye)/2);break;case we:if(kt.x<=0&&(ht<=vr||xt&&(Xe<=sr||Ui>=qr))){_r=!1;break}tr(we),Ye-=kt.x,ht+=kt.x,Ye<0&&(Ze=Le,Ye=-Ye,ht-=Ye),xt&&(_t=Ye/xt,Xe+=(ge.height-_t)/2);break;case st:if(kt.y>=0&&(Ui>=qr||xt&&(ht<=vr||er>=Kr))){_r=!1;break}tr(st),_t+=kt.y,_t<0&&(Ze=He,_t=-_t,Xe-=_t),xt&&(Ye=_t*xt,ht+=(ge.width-Ye)/2);break;case zt:if(xt){if(kt.y<=0&&(Xe<=sr||er>=Kr)){_r=!1;break}tr(He),_t-=kt.y,Xe+=kt.y,Ye=_t*xt}else tr(He),tr(Le),kt.x>=0?er<Kr?Ye+=kt.x:kt.y<=0&&Xe<=sr&&(_r=!1):Ye+=kt.x,kt.y<=0?Xe>sr&&(_t-=kt.y,Xe+=kt.y):(_t-=kt.y,Xe+=kt.y);Ye<0&&_t<0?(Ze=$t,_t=-_t,Ye=-Ye,Xe-=_t,ht-=Ye):Ye<0?(Ze=rt,Ye=-Ye,ht-=Ye):_t<0&&(Ze=jt,_t=-_t,Xe-=_t);break;case rt:if(xt){if(kt.y<=0&&(Xe<=sr||ht<=vr)){_r=!1;break}tr(He),_t-=kt.y,Xe+=kt.y,Ye=_t*xt,ht+=ge.width-Ye}else tr(He),tr(we),kt.x<=0?ht>vr?(Ye-=kt.x,ht+=kt.x):kt.y<=0&&Xe<=sr&&(_r=!1):(Ye-=kt.x,ht+=kt.x),kt.y<=0?Xe>sr&&(_t-=kt.y,Xe+=kt.y):(_t-=kt.y,Xe+=kt.y);Ye<0&&_t<0?(Ze=jt,_t=-_t,Ye=-Ye,Xe-=_t,ht-=Ye):Ye<0?(Ze=zt,Ye=-Ye,ht-=Ye):_t<0&&(Ze=$t,_t=-_t,Xe-=_t);break;case $t:if(xt){if(kt.x<=0&&(ht<=vr||Ui>=qr)){_r=!1;break}tr(we),Ye-=kt.x,ht+=kt.x,_t=Ye/xt}else tr(st),tr(we),kt.x<=0?ht>vr?(Ye-=kt.x,ht+=kt.x):kt.y>=0&&Ui>=qr&&(_r=!1):(Ye-=kt.x,ht+=kt.x),kt.y>=0?Ui<qr&&(_t+=kt.y):_t+=kt.y;Ye<0&&_t<0?(Ze=zt,_t=-_t,Ye=-Ye,Xe-=_t,ht-=Ye):Ye<0?(Ze=jt,Ye=-Ye,ht-=Ye):_t<0&&(Ze=rt,_t=-_t,Xe-=_t);break;case jt:if(xt){if(kt.x>=0&&(er>=Kr||Ui>=qr)){_r=!1;break}tr(Le),Ye+=kt.x,_t=Ye/xt}else tr(st),tr(Le),kt.x>=0?er<Kr?Ye+=kt.x:kt.y>=0&&Ui>=qr&&(_r=!1):Ye+=kt.x,kt.y>=0?Ui<qr&&(_t+=kt.y):_t+=kt.y;Ye<0&&_t<0?(Ze=rt,_t=-_t,Ye=-Ye,Xe-=_t,ht-=Ye):Ye<0?(Ze=$t,Ye=-Ye,ht-=Ye):_t<0&&(Ze=zt,_t=-_t,Xe-=_t);break;case Ce:this.move(kt.x,kt.y),_r=!1;break;case xe:this.zoom(xl(Ae),R),_r=!1;break;case je:if(!kt.x||!kt.y){_r=!1;break}Co=br(this.cropper),ht=Ar.startX-Co.left,Xe=Ar.startY-Co.top,Ye=ge.minWidth,_t=ge.minHeight,kt.x>0?Ze=kt.y>0?jt:zt:kt.x<0&&(ht-=Ye,Ze=kt.y>0?$t:rt),kt.y<0&&(Xe-=_t),this.cropped||(We(this.cropBox,bt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}_r&&(ge.width=Ye,ge.height=_t,ge.left=ht,ge.top=Xe,this.action=Ze,this.renderCropBox()),H(Ae,function(Nr){Nr.startX=Nr.endX,Nr.startY=Nr.endY})}},cs={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&ke(this.dragBox,ki),We(this.cropBox,bt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=q({},this.initialImageData),this.canvasData=q({},this.initialCanvasData),this.cropBoxData=q({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(q(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),We(this.dragBox,ki),ke(this.cropBox,bt)),this},replace:function(R){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&R&&(this.isImg&&(this.element.src=R),X?(this.url=R,this.image.src=R,this.ready&&(this.viewBoxImage.src=R,H(this.previews,function(Q){Q.getElementsByTagName("img")[0].src=R}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(R))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,We(this.cropper,vt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,ke(this.cropper,vt)),this},destroy:function(){var R=this.element;return R[fe]?(R[fe]=void 0,this.isImg&&this.replaced&&(R.src=this.originalUrl),this.uncreate(),this):this},move:function(R){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,Q=this.canvasData,Me=Q.left,ge=Q.top;return this.moveTo(At(R)?R:Me+Number(R),At(X)?X:ge+Number(X))},moveTo:function(R){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,Q=this.canvasData,Me=!1;return R=Number(R),X=Number(X),this.ready&&!this.disabled&&this.options.movable&&(Mt(R)&&(Q.left=R,Me=!0),Mt(X)&&(Q.top=X,Me=!0),Me&&this.renderCanvas(!0)),this},zoom:function(R,X){var Q=this.canvasData;return R=Number(R),R<0?R=1/(1-R):R=1+R,this.zoomTo(Q.width*R/Q.naturalWidth,null,X)},zoomTo:function(R,X,Q){var Me=this.options,ge=this.canvasData,Ae=ge.width,Ze=ge.height,xt=ge.naturalWidth,ht=ge.naturalHeight;if(R=Number(R),R>=0&&this.ready&&!this.disabled&&Me.zoomable){var Xe=xt*R,Ye=ht*R;if(di(this.element,tn,{ratio:R,oldRatio:Ae/xt,originalEvent:Q})===!1)return this;if(Q){var _t=this.pointers,er=br(this.cropper),Ui=_t&&Object.keys(_t).length?ir(_t):{pageX:Q.pageX,pageY:Q.pageY};ge.left-=(Xe-Ae)*((Ui.pageX-er.left-ge.left)/Ae),ge.top-=(Ye-Ze)*((Ui.pageY-er.top-ge.top)/Ze)}else wi(X)&&Mt(X.x)&&Mt(X.y)?(ge.left-=(Xe-Ae)*((X.x-ge.left)/Ae),ge.top-=(Ye-Ze)*((X.y-ge.top)/Ze)):(ge.left-=(Xe-Ae)/2,ge.top-=(Ye-Ze)/2);ge.width=Xe,ge.height=Ye,this.renderCanvas(!0)}return this},rotate:function(R){return this.rotateTo((this.imageData.rotate||0)+Number(R))},rotateTo:function(R){return R=Number(R),Mt(R)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=R%360,this.renderCanvas(!0,!0)),this},scaleX:function(R){var X=this.imageData.scaleY;return this.scale(R,Mt(X)?X:1)},scaleY:function(R){var X=this.imageData.scaleX;return this.scale(Mt(X)?X:1,R)},scale:function(R){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,Q=this.imageData,Me=!1;return R=Number(R),X=Number(X),this.ready&&!this.disabled&&this.options.scalable&&(Mt(R)&&(Q.scaleX=R,Me=!0),Mt(X)&&(Q.scaleY=X,Me=!0),Me&&this.renderCanvas(!0,!0)),this},getData:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,X=this.options,Q=this.imageData,Me=this.canvasData,ge=this.cropBoxData,Ae;if(this.ready&&this.cropped){Ae={x:ge.left-Me.left,y:ge.top-Me.top,width:ge.width,height:ge.height};var Ze=Q.width/Q.naturalWidth;if(H(Ae,function(Xe,Ye){Ae[Ye]=Xe/Ze}),R){var xt=Math.round(Ae.y+Ae.height),ht=Math.round(Ae.x+Ae.width);Ae.x=Math.round(Ae.x),Ae.y=Math.round(Ae.y),Ae.width=ht-Ae.x,Ae.height=xt-Ae.y}}else Ae={x:0,y:0,width:0,height:0};return X.rotatable&&(Ae.rotate=Q.rotate||0),X.scalable&&(Ae.scaleX=Q.scaleX||1,Ae.scaleY=Q.scaleY||1),Ae},setData:function(R){var X=this.options,Q=this.imageData,Me=this.canvasData,ge={};if(this.ready&&!this.disabled&&wi(R)){var Ae=!1;X.rotatable&&Mt(R.rotate)&&R.rotate!==Q.rotate&&(Q.rotate=R.rotate,Ae=!0),X.scalable&&(Mt(R.scaleX)&&R.scaleX!==Q.scaleX&&(Q.scaleX=R.scaleX,Ae=!0),Mt(R.scaleY)&&R.scaleY!==Q.scaleY&&(Q.scaleY=R.scaleY,Ae=!0)),Ae&&this.renderCanvas(!0,!0);var Ze=Q.width/Q.naturalWidth;Mt(R.x)&&(ge.left=R.x*Ze+Me.left),Mt(R.y)&&(ge.top=R.y*Ze+Me.top),Mt(R.width)&&(ge.width=R.width*Ze),Mt(R.height)&&(ge.height=R.height*Ze),this.setCropBoxData(ge)}return this},getContainerData:function(){return this.ready?q({},this.containerData):{}},getImageData:function(){return this.sized?q({},this.imageData):{}},getCanvasData:function(){var R=this.canvasData,X={};return this.ready&&H(["left","top","width","height","naturalWidth","naturalHeight"],function(Q){X[Q]=R[Q]}),X},setCanvasData:function(R){var X=this.canvasData,Q=X.aspectRatio;return this.ready&&!this.disabled&&wi(R)&&(Mt(R.left)&&(X.left=R.left),Mt(R.top)&&(X.top=R.top),Mt(R.width)?(X.width=R.width,X.height=R.width/Q):Mt(R.height)&&(X.height=R.height,X.width=R.height*Q),this.renderCanvas(!0)),this},getCropBoxData:function(){var R=this.cropBoxData,X;return this.ready&&this.cropped&&(X={left:R.left,top:R.top,width:R.width,height:R.height}),X||{}},setCropBoxData:function(R){var X=this.cropBoxData,Q=this.options.aspectRatio,Me,ge;return this.ready&&this.cropped&&!this.disabled&&wi(R)&&(Mt(R.left)&&(X.left=R.left),Mt(R.top)&&(X.top=R.top),Mt(R.width)&&R.width!==X.width&&(Me=!0,X.width=R.width),Mt(R.height)&&R.height!==X.height&&(ge=!0,X.height=R.height),Q&&(Me?X.height=X.width/Q:ge&&(X.width=X.height*Q)),this.renderCropBox()),this},getCroppedCanvas:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var X=this.canvasData,Q=jn(this.image,this.imageData,X,R);if(!this.cropped)return Q;var Me=this.getData(R.rounded),ge=Me.x,Ae=Me.y,Ze=Me.width,xt=Me.height,ht=Q.width/Math.floor(X.naturalWidth);ht!==1&&(ge*=ht,Ae*=ht,Ze*=ht,xt*=ht);var Xe=Ze/xt,Ye=So({aspectRatio:Xe,width:R.maxWidth||1/0,height:R.maxHeight||1/0}),_t=So({aspectRatio:Xe,width:R.minWidth||0,height:R.minHeight||0},"cover"),er=So({aspectRatio:Xe,width:R.width||(ht!==1?Q.width:Ze),height:R.height||(ht!==1?Q.height:xt)}),Ui=er.width,vr=er.height;Ui=Math.min(Ye.width,Math.max(_t.width,Ui)),vr=Math.min(Ye.height,Math.max(_t.height,vr));var sr=document.createElement("canvas"),Kr=sr.getContext("2d");sr.width=be(Ui),sr.height=be(vr),Kr.fillStyle=R.fillColor||"transparent",Kr.fillRect(0,0,Ui,vr);var qr=R.imageSmoothingEnabled,_r=qr===void 0?!0:qr,Co=R.imageSmoothingQuality;Kr.imageSmoothingEnabled=_r,Co&&(Kr.imageSmoothingQuality=Co);var Ar=Q.width,kt=Q.height,tr=ge,Nr=Ae,qn,uo,Eo,Ws,Ts,qo;tr<=-Ze||tr>Ar?(tr=0,qn=0,Eo=0,Ts=0):tr<=0?(Eo=-tr,tr=0,qn=Math.min(Ar,Ze+tr),Ts=qn):tr<=Ar&&(Eo=0,qn=Math.min(Ze,Ar-tr),Ts=qn),qn<=0||Nr<=-xt||Nr>kt?(Nr=0,uo=0,Ws=0,qo=0):Nr<=0?(Ws=-Nr,Nr=0,uo=Math.min(kt,xt+Nr),qo=uo):Nr<=kt&&(Ws=0,uo=Math.min(xt,kt-Nr),qo=uo);var Xn=[tr,Nr,qn,uo];if(Ts>0&&qo>0){var ho=Ui/Ze;Xn.push(Eo*ho,Ws*ho,Ts*ho,qo*ho)}return Kr.drawImage.apply(Kr,[Q].concat(h(Xn.map(function(Zs){return Math.floor(be(Zs))})))),sr},setAspectRatio:function(R){var X=this.options;return!this.disabled&&!At(R)&&(X.aspectRatio=Math.max(0,R)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(R){var X=this.options,Q=this.dragBox,Me=this.face;if(this.ready&&!this.disabled){var ge=R===Kt,Ae=X.movable&&R===ti;R=ge||Ae?R:Xi,X.dragMode=R,ri(Q,tt,R),$e(Q,dt,ge),$e(Q,oi,Ae),X.cropBoxMovable||(ri(Me,tt,R),$e(Me,dt,ge),$e(Me,oi,Ae))}return this}},Hn=$.Cropper,Es=function(){function ce(R){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r(this,ce),!R||!ct.test(R.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=R,this.options=q({},Kn,wi(X)&&X),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return n(ce,[{key:"init",value:function(){var X=this.element,Q=X.tagName.toLowerCase(),Me;if(!X[fe]){if(X[fe]=this,Q==="img"){if(this.isImg=!0,Me=X.getAttribute("src")||"",this.originalUrl=Me,!Me)return;Me=X.src}else Q==="canvas"&&window.HTMLCanvasElement&&(Me=X.toDataURL());this.load(Me)}}},{key:"load",value:function(X){var Q=this;if(X){this.url=X,this.imageData={};var Me=this.element,ge=this.options;if(!ge.rotatable&&!ge.scalable&&(ge.checkOrientation=!1),!ge.checkOrientation||!window.ArrayBuffer){this.clone();return}if(In.test(X)){Zr.test(X)?this.read(Jn(X)):this.clone();return}var Ae=new XMLHttpRequest,Ze=this.clone.bind(this);this.reloading=!0,this.xhr=Ae,Ae.onabort=Ze,Ae.onerror=Ze,Ae.ontimeout=Ze,Ae.onprogress=function(){Ae.getResponseHeader("content-type")!==bn&&Ae.abort()},Ae.onload=function(){Q.read(Ae.response)},Ae.onloadend=function(){Q.reloading=!1,Q.xhr=null},ge.checkCrossOrigin&&rn(X)&&Me.crossOrigin&&(X=dn(X)),Ae.open("GET",X,!0),Ae.responseType="arraybuffer",Ae.withCredentials=Me.crossOrigin==="use-credentials",Ae.send()}}},{key:"read",value:function(X){var Q=this.options,Me=this.imageData,ge=de(X),Ae=0,Ze=1,xt=1;if(ge>1){this.url=kl(X,bn);var ht=ci(ge);Ae=ht.rotate,Ze=ht.scaleX,xt=ht.scaleY}Q.rotatable&&(Me.rotate=Ae),Q.scalable&&(Me.scaleX=Ze,Me.scaleY=xt),this.clone()}},{key:"clone",value:function(){var X=this.element,Q=this.url,Me=X.crossOrigin,ge=Q;this.options.checkCrossOrigin&&rn(Q)&&(Me||(Me="anonymous"),ge=dn(Q)),this.crossOrigin=Me,this.crossOriginUrl=ge;var Ae=document.createElement("img");Me&&(Ae.crossOrigin=Me),Ae.src=ge||Q,Ae.alt=X.alt||"The image to crop",this.image=Ae,Ae.onload=this.start.bind(this),Ae.onerror=this.stop.bind(this),ke(Ae,Qt),X.parentNode.insertBefore(Ae,X.nextSibling)}},{key:"start",value:function(){var X=this,Q=this.image;Q.onload=null,Q.onerror=null,this.sizing=!0;var Me=$.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test($.navigator.userAgent),ge=function(ht,Xe){q(X.imageData,{naturalWidth:ht,naturalHeight:Xe,aspectRatio:ht/Xe}),X.initialImageData=q({},X.imageData),X.sizing=!1,X.sized=!0,X.build()};if(Q.naturalWidth&&!Me){ge(Q.naturalWidth,Q.naturalHeight);return}var Ae=document.createElement("img"),Ze=document.body||document.documentElement;this.sizingImage=Ae,Ae.onload=function(){ge(Ae.width,Ae.height),Me||Ze.removeChild(Ae)},Ae.src=Q.src,Me||(Ae.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",Ze.appendChild(Ae))}},{key:"stop",value:function(){var X=this.image;X.onload=null,X.onerror=null,X.parentNode.removeChild(X),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var X=this.element,Q=this.options,Me=this.image,ge=X.parentNode,Ae=document.createElement("div");Ae.innerHTML=ko;var Ze=Ae.querySelector(".".concat(fe,"-container")),xt=Ze.querySelector(".".concat(fe,"-canvas")),ht=Ze.querySelector(".".concat(fe,"-drag-box")),Xe=Ze.querySelector(".".concat(fe,"-crop-box")),Ye=Xe.querySelector(".".concat(fe,"-face"));this.container=ge,this.cropper=Ze,this.canvas=xt,this.dragBox=ht,this.cropBox=Xe,this.viewBox=Ze.querySelector(".".concat(fe,"-view-box")),this.face=Ye,xt.appendChild(Me),ke(X,bt),ge.insertBefore(Ze,X.nextSibling),We(Me,Qt),this.initPreview(),this.bind(),Q.initialAspectRatio=Math.max(0,Q.initialAspectRatio)||NaN,Q.aspectRatio=Math.max(0,Q.aspectRatio)||NaN,Q.viewMode=Math.max(0,Math.min(3,Math.round(Q.viewMode)))||0,ke(Xe,bt),Q.guides||ke(Xe.getElementsByClassName("".concat(fe,"-dashed")),bt),Q.center||ke(Xe.getElementsByClassName("".concat(fe,"-center")),bt),Q.background&&ke(Ze,"".concat(fe,"-bg")),Q.highlight||ke(Ye,Yt),Q.cropBoxMovable&&(ke(Ye,oi),ri(Ye,tt,Y)),Q.cropBoxResizable||(ke(Xe.getElementsByClassName("".concat(fe,"-line")),bt),ke(Xe.getElementsByClassName("".concat(fe,"-point")),bt)),this.render(),this.ready=!0,this.setDragMode(Q.dragMode),Q.autoCrop&&this.crop(),this.setData(Q.data),zi(Q.ready)&&Yi(X,fr,Q.ready,{once:!0}),di(X,fr)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var X=this.cropper.parentNode;X&&X.removeChild(this.cropper),We(this.element,bt)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Hn,ce}},{key:"setDefaults",value:function(X){q(Kn,wi(X)&&X)}}]),ce}();return q(Es.prototype,mr,zr,ur,Ho,on,cs),Es})});var pa=Uh((Zv,Kv)=>{(function(i,e){typeof Zv=="object"&&typeof Kv<"u"?Kv.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self,i.maplibregl=e())})(Zv,function(){"use strict";var i={},e={};function t(o,n,u){if(e[o]=u,o==="index"){var h="var sharedModule = {}; ("+e.shared+")(sharedModule); ("+e.worker+")(sharedModule);",m={};return e.shared(m),e.index(i,m),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([h],{type:"text/javascript"}))),i}}t("shared",["exports"],function(o){"use strict";function n(l,s,c,p){return new(c||(c=Promise))(function(y,w){function k(D){try{A(p.next(D))}catch(N){w(N)}}function C(D){try{A(p.throw(D))}catch(N){w(N)}}function A(D){var N;D.done?y(D.value):(N=D.value,N instanceof c?N:new c(function(O){O(N)})).then(k,C)}A((p=p.apply(l,s||[])).next())})}function u(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}typeof SuppressedError=="function"&&SuppressedError;var h=m;function m(l,s){this.x=l,this.y=s}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,s){return this.clone()._rotateAround(l,s)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var s=l.x-this.x,c=l.y-this.y;return s*s+c*c},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,s){return Math.atan2(this.x*s-this.y*l,this.x*l+this.y*s)},_matMult:function(l){var s=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=s,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var s=Math.cos(l),c=Math.sin(l),p=c*this.x+s*this.y;return this.x=s*this.x-c*this.y,this.y=p,this},_rotateAround:function(l,s){var c=Math.cos(l),p=Math.sin(l),y=s.y+p*(this.x-s.x)+c*(this.y-s.y);return this.x=s.x+c*(this.x-s.x)-p*(this.y-s.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(l){return l instanceof m?l:Array.isArray(l)?new m(l[0],l[1]):l};var b=u(h),_=S;function S(l,s,c,p){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=c,this.p2y=p}S.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(s===void 0&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,p=0;p<8;p++){var y=this.sampleCurveX(c)-l;if(Math.abs(y)<s)return c;var w=this.sampleCurveDerivativeX(c);if(Math.abs(w)<1e-6)break;c-=y/w}var k=0,C=1;for(c=l,p=0;p<20&&(y=this.sampleCurveX(c),!(Math.abs(y-l)<s));p++)l>y?k=c:C=c,c=.5*(C-k)+k;return c},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};var T=u(_);let P,F;function G(){return P==null&&(P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),P}function $(){if(F==null&&(F=!1,G())){let s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let p=0;p<5*5;p++){let y=4*p;s.fillStyle=`rgb(${y},${y+1},${y+2})`,s.fillRect(p%5,Math.floor(p/5),1,1)}let c=s.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&c[p]!==p){F=!0;break}}}return F||!1}function ee(l,s,c,p){let y=new T(l,s,c,p);return function(w){return y.solve(w)}}let ue=ee(.25,.1,.25,1);function fe(l,s,c){return Math.min(c,Math.max(s,l))}function Y(l,s,c){let p=c-s,y=((l-s)%p+p)%p+s;return y===s?c:y}function je(l,...s){for(let c of s)for(let p in c)l[p]=c[p];return l}let Ce=1;function xe(l,s,c){let p={};for(let y in l)p[y]=s.call(c||this,l[y],y,l);return p}function Le(l,s,c){let p={};for(let y in l)s.call(c||this,l[y],y,l)&&(p[y]=l[y]);return p}function we(l){return Array.isArray(l)?l.map(we):typeof l=="object"&&l?xe(l,we):l}let st={};function He(l){st[l]||(typeof console<"u"&&console.warn(l),st[l]=!0)}function zt(l,s,c){return(c.y-l.y)*(s.x-l.x)>(s.y-l.y)*(c.x-l.x)}function rt(l){let s=0;for(let c,p,y=0,w=l.length,k=w-1;y<w;k=y++)c=l[y],p=l[k],s+=(p.x-c.x)*(c.y+p.y);return s}function jt(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let $t=null;function dt(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}let vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function bt(l,s,c,p,y){return n(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let w=new VideoFrame(l,{timestamp:0});try{let k=w?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);let C=k.startsWith("BGR"),A=new Uint8ClampedArray(p*y*4);if(yield w.copyTo(A,function(D,N,O,j,W){let K=4*Math.max(-N,0),ie=(Math.max(0,O)-O)*j*4+K,ae=4*j,pe=Math.max(0,N),Ie=Math.max(0,O);return{rect:{x:pe,y:Ie,width:Math.min(D.width,N+j)-pe,height:Math.min(D.height,O+W)-Ie},layout:[{offset:ie,stride:ae}]}}(l,s,c,p,y)),C)for(let D=0;D<A.length;D+=4){let N=A[D];A[D]=A[D+2],A[D+2]=N}return A}finally{w.close()}})}let Qt,Yt,ki="AbortError";function oi(){return new Error(ki)}let tt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Fe(l){return tt.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}let Kt="global-dispatcher";class ti extends Error{constructor(s,c,p,y){super(`AJAXError: ${c} (${s}): ${p}`),this.status=s,this.statusText=c,this.url=p,this.body=y}}let Xi=()=>jt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,nt=function(l,s){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){let p=Fe(l.url);if(p)return p(l,s);if(jt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:l,targetMapId:Kt},s)}if(!(/^file:/.test(c=l.url)||/^file:/.test(Xi())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,y){return n(this,void 0,void 0,function*(){let w=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Xi(),signal:y.signal});p.type==="json"&&w.headers.set("Accept","application/json");let k=yield fetch(w);if(!k.ok){let D=yield k.blob();throw new ti(k.status,k.statusText,p.url,D)}let C;C=p.type==="arrayBuffer"||p.type==="image"?k.arrayBuffer():p.type==="json"?k.json():k.text();let A=yield C;if(y.signal.aborted)throw oi();return{data:A,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}})}(l,s);if(jt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:l,mustQueue:!0,targetMapId:Kt},s)}var c;return function(p,y){return new Promise((w,k)=>{let C=new XMLHttpRequest;C.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(C.responseType="arraybuffer");for(let A in p.headers)C.setRequestHeader(A,p.headers[A]);p.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=p.credentials==="include",C.onerror=()=>{k(new Error(C.statusText))},C.onload=()=>{if(!y.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let A=C.response;if(p.type==="json")try{A=JSON.parse(C.response)}catch(D){return void k(D)}w({data:A,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{let A=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});k(new ti(C.status,C.statusText,p.url,A))}},y.signal.addEventListener("abort",()=>{C.abort(),k(oi())}),C.send(p.body)})}(l,s)};function Wt(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;let s=new URL(l),c=window.location;return s.protocol===c.protocol&&s.host===c.host}function yi(l,s,c){c[l]&&c[l].indexOf(s)!==-1||(c[l]=c[l]||[],c[l].push(s))}function Rt(l,s,c){if(c&&c[l]){let p=c[l].indexOf(s);p!==-1&&c[l].splice(p,1)}}class vi{constructor(s,c={}){je(this,c),this.type=s}}class lt extends vi{constructor(s,c={}){super("error",je({error:s},c))}}class _i{on(s,c){return this._listeners=this._listeners||{},yi(s,c,this._listeners),this}off(s,c){return Rt(s,c,this._listeners),Rt(s,c,this._oneTimeListeners),this}once(s,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},yi(s,c,this._oneTimeListeners),this):new Promise(p=>this.once(s,p))}fire(s,c){typeof s=="string"&&(s=new vi(s,c||{}));let p=s.type;if(this.listens(p)){s.target=this;let y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(let C of y)C.call(this,s);let w=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(let C of w)Rt(p,C,this._oneTimeListeners),C.call(this,s);let k=this._eventedParent;k&&(je(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(s))}else s instanceof lt&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,c){return this._eventedParent=s,this._eventedParentData=c,this}}var Ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let fi=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xi(l,s){let c={};for(let p in l)p!=="ref"&&(c[p]=l[p]);return fi.forEach(p=>{p in s&&(c[p]=s[p])}),c}function hi(l,s){if(Array.isArray(l)){if(!Array.isArray(s)||l.length!==s.length)return!1;for(let c=0;c<l.length;c++)if(!hi(l[c],s[c]))return!1;return!0}if(typeof l=="object"&&l!==null&&s!==null){if(typeof s!="object"||Object.keys(l).length!==Object.keys(s).length)return!1;for(let c in l)if(!hi(l[c],s[c]))return!1;return!0}return l===s}function fr(l,s){l.push(s)}function Mr(l,s,c){fr(c,{command:"addSource",args:[l,s[l]]})}function en(l,s,c){fr(s,{command:"removeSource",args:[l]}),c[l]=!0}function tn(l,s,c,p){en(l,c,p),Mr(l,s,c)}function bn(l,s,c){let p;for(p in l[c])if(Object.prototype.hasOwnProperty.call(l[c],p)&&p!=="data"&&!hi(l[c][p],s[c][p]))return!1;for(p in s[c])if(Object.prototype.hasOwnProperty.call(s[c],p)&&p!=="data"&&!hi(l[c][p],s[c][p]))return!1;return!0}function Vn(l,s,c,p,y,w){l=l||{},s=s||{};for(let k in l)Object.prototype.hasOwnProperty.call(l,k)&&(hi(l[k],s[k])||c.push({command:w,args:[p,k,s[k],y]}));for(let k in s)Object.prototype.hasOwnProperty.call(s,k)&&!Object.prototype.hasOwnProperty.call(l,k)&&(hi(l[k],s[k])||c.push({command:w,args:[p,k,s[k],y]}))}function In(l){return l.id}function Zr(l,s){return l[s.id]=s,l}class ct{constructor(s,c,p,y){this.message=(s?`${s}: `:"")+p,y&&(this.identifier=y),c!=null&&c.__line__&&(this.line=c.__line__)}}function Lr(l,...s){for(let c of s)for(let p in c)l[p]=c[p];return l}class Fr extends Error{constructor(s,c){super(c),this.message=c,this.key=s}}class Kn{constructor(s,c=[]){this.parent=s,this.bindings={};for(let[p,y]of c)this.bindings[p]=y}concat(s){return new Kn(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}let ko={kind:"null"},ft={kind:"number"},Mt={kind:"string"},De={kind:"boolean"},At={kind:"color"},Jt={kind:"object"},Dt={kind:"value"},wi={kind:"collator"},zi={kind:"formatted"},re={kind:"padding"},V={kind:"resolvedImage"},H={kind:"variableAnchorOffsetCollection"};function q(l,s){return{kind:"array",itemType:l,N:s}}function ne(l){if(l.kind==="array"){let s=ne(l.itemType);return typeof l.N=="number"?`array<${s}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${s}>`}return l.kind}let be=[ko,ft,Mt,De,At,zi,Jt,q(Dt),re,V,H];function _e(l,s){if(s.kind==="error")return null;if(l.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!_e(l.itemType,s.itemType))&&(typeof l.N!="number"||l.N===s.N))return null}else{if(l.kind===s.kind)return null;if(l.kind==="value"){for(let c of be)if(!_e(c,s))return null}}return`Expected ${ne(l)} but found ${ne(s)} instead.`}function Se(l,s){return s.some(c=>c.kind===l.kind)}function me(l,s){return s.some(c=>c==="null"?l===null:c==="array"?Array.isArray(l):c==="object"?l&&!Array.isArray(l)&&typeof l=="object":c===typeof l)}function ke(l,s){return l.kind==="array"&&s.kind==="array"?l.itemType.kind===s.itemType.kind&&typeof l.N=="number":l.kind===s.kind}let We=.96422,$e=.82521,Je=4/29,Gt=6/29,ai=3*Gt*Gt,ri=Gt*Gt*Gt,Ni=Math.PI/180,pi=180/Math.PI;function cr(l){return(l%=360)<0&&(l+=360),l}function Oi([l,s,c,p]){let y,w,k=di((.2225045*(l=Yi(l))+.7168786*(s=Yi(s))+.0606169*(c=Yi(c)))/1);l===s&&s===c?y=w=k:(y=di((.4360747*l+.3850649*s+.1430804*c)/We),w=di((.0139322*l+.0971045*s+.7141733*c)/$e));let C=116*k-16;return[C<0?0:C,500*(y-k),200*(k-w),p]}function Yi(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function di(l){return l>ri?Math.pow(l,1/3):l/ai+Je}function br([l,s,c,p]){let y=(l+16)/116,w=isNaN(s)?y:y+s/500,k=isNaN(c)?y:y-c/200;return y=1*Pn(y),w=We*Pn(w),k=$e*Pn(k),[Rr(3.1338561*w-1.6168667*y-.4906146*k),Rr(-.9787684*w+1.9161415*y+.033454*k),Rr(.0719453*w-.2289914*y+1.4052427*k),p]}function Rr(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Pn(l){return l>Gt?l*l*l:ai*(l-Je)}function rn(l){return parseInt(l.padEnd(2,l),16)/255}function dn(l,s){return nn(s?l/100:l,0,1)}function nn(l,s,c){return Math.min(Math.max(s,l),c)}function xl(l){return!l.some(Number.isNaN)}let fa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ir{constructor(s,c,p,y=1,w=!0){this.r=s,this.g=c,this.b=p,this.a=y,w||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[s,c,p,y]))}static parse(s){if(s instanceof ir)return s;if(typeof s!="string")return;let c=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];let y=fa[p];if(y){let[k,C,A]=y;return[k/255,C/255,A/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){let k=p.length<6?1:2,C=1;return[rn(p.slice(C,C+=k)),rn(p.slice(C,C+=k)),rn(p.slice(C,C+=k)),rn(p.slice(C,C+k)||"ff")]}if(p.startsWith("rgb")){let k=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){let[C,A,D,N,O,j,W,K,ie,ae,pe,Ie]=k,ye=[N||" ",W||" ",ae].join("");if(ye==="  "||ye==="  /"||ye===",,"||ye===",,,"){let Ee=[D,j,ie].join(""),Ge=Ee==="%%%"?100:Ee===""?255:0;if(Ge){let et=[nn(+A/Ge,0,1),nn(+O/Ge,0,1),nn(+K/Ge,0,1),pe?dn(+pe,Ie):1];if(xl(et))return et}}return}}let w=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){let[k,C,A,D,N,O,j,W,K]=w,ie=[A||" ",N||" ",j].join("");if(ie==="  "||ie==="  /"||ie===",,"||ie===",,,"){let ae=[+C,nn(+D,0,100),nn(+O,0,100),W?dn(+W,K):1];if(xl(ae))return function([pe,Ie,ye,Ee]){function Ge(et){let Lt=(et+pe/30)%12,Xt=Ie*Math.min(ye,1-ye);return ye-Xt*Math.max(-1,Math.min(Lt-3,9-Lt,1))}return pe=cr(pe),Ie/=100,ye/=100,[Ge(0),Ge(8),Ge(4),Ee]}(ae)}}}(s);return c?new ir(...c,!1):void 0}get rgb(){let{r:s,g:c,b:p,a:y}=this,w=y||1/0;return this.overwriteGetter("rgb",[s/w,c/w,p/w,y])}get hcl(){return this.overwriteGetter("hcl",function(s){let[c,p,y,w]=Oi(s),k=Math.sqrt(p*p+y*y);return[Math.round(1e4*k)?cr(Math.atan2(y,p)*pi):NaN,k,c,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Oi(this.rgb))}overwriteGetter(s,c){return Object.defineProperty(this,s,{value:c}),c}toString(){let[s,c,p,y]=this.rgb;return`rgba(${[s,c,p].map(w=>Math.round(255*w)).join(",")},${y})`}}ir.black=new ir(0,0,0,1),ir.white=new ir(1,1,1,1),ir.transparent=new ir(0,0,0,0),ir.red=new ir(1,0,0,1);class So{constructor(s,c,p){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,c){return this.collator.compare(s,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class La{constructor(s,c,p,y,w){this.text=s,this.image=c,this.scale=p,this.fontStack=y,this.textColor=w}}class jn{constructor(s){this.sections=s}static fromString(s){return new jn([new La(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof jn?s:jn.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class Dn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Dn)return s;if(typeof s=="number")return new Dn([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(let c of s)if(typeof c!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Dn(s)}}toString(){return JSON.stringify(this.values)}}let wl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hn{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof hn)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let c=0;c<s.length;c+=2){let p=s[c],y=s[c+1];if(typeof p!="string"||!wl.has(p)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new hn(s)}}toString(){return JSON.stringify(this.values)}}class Jn{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Jn({name:s,available:!1}):null}}function kl(l,s,c,p){return typeof l=="number"&&l>=0&&l<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof c=="number"&&c>=0&&c<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[l,s,c,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[l,s,c,p]:[l,s,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function de(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof ir||l instanceof So||l instanceof jn||l instanceof Dn||l instanceof hn||l instanceof Jn)return!0;if(Array.isArray(l)){for(let s of l)if(!de(s))return!1;return!0}if(typeof l=="object"){for(let s in l)if(!de(l[s]))return!1;return!0}return!1}function ci(l){if(l===null)return ko;if(typeof l=="string")return Mt;if(typeof l=="boolean")return De;if(typeof l=="number")return ft;if(l instanceof ir)return At;if(l instanceof So)return wi;if(l instanceof jn)return zi;if(l instanceof Dn)return re;if(l instanceof hn)return H;if(l instanceof Jn)return V;if(Array.isArray(l)){let s=l.length,c;for(let p of l){let y=ci(p);if(c){if(c===y)continue;c=Dt;break}c=y}return q(c||Dt,s)}return Jt}function mr(l){let s=typeof l;return l===null?"":s==="string"||s==="number"||s==="boolean"?String(l):l instanceof ir||l instanceof jn||l instanceof Dn||l instanceof hn||l instanceof Jn?l.toString():JSON.stringify(l)}class zr{constructor(s,c){this.type=s,this.value=c}static parse(s,c){if(s.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!de(s[1]))return c.error("invalid value");let p=s[1],y=ci(p),w=c.expectedType;return y.kind!=="array"||y.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(y=w),new zr(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ur{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}let Ho={string:Mt,number:ft,boolean:De,object:Jt};class on{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let p,y=1,w=s[0];if(w==="array"){let C,A;if(s.length>2){let D=s[1];if(typeof D!="string"||!(D in Ho)||D==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);C=Ho[D],y++}else C=Dt;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);A=s[2],y++}p=q(C,A)}else{if(!Ho[w])throw new Error(`Types doesn't contain name = ${w}`);p=Ho[w]}let k=[];for(;y<s.length;y++){let C=c.parse(s[y],y,Dt);if(!C)return null;k.push(C)}return new on(p,k)}evaluate(s){for(let c=0;c<this.args.length;c++){let p=this.args[c].evaluate(s);if(!_e(this.type,ci(p)))return p;if(c===this.args.length-1)throw new ur(`Expected value to be of type ${ne(this.type)}, but found ${ne(ci(p))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let cs={"to-boolean":De,"to-color":At,"to-number":ft,"to-string":Mt};class Hn{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let p=s[0];if(!cs[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&s.length!==2)return c.error("Expected one argument.");let y=cs[p],w=[];for(let k=1;k<s.length;k++){let C=c.parse(s[k],k,Dt);if(!C)return null;w.push(C)}return new Hn(y,w)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let c,p;for(let y of this.args){if(c=y.evaluate(s),p=null,c instanceof ir)return c;if(typeof c=="string"){let w=s.parseColor(c);if(w)return w}else if(Array.isArray(c)&&(p=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:kl(c[0],c[1],c[2],c[3]),!p))return new ir(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new ur(p||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(let p of this.args){c=p.evaluate(s);let y=Dn.parse(c);if(y)return y}throw new ur(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(let p of this.args){c=p.evaluate(s);let y=hn.parse(c);if(y)return y}throw new ur(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(let p of this.args){if(c=p.evaluate(s),c===null)return 0;let y=Number(c);if(!isNaN(y))return y}throw new ur(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return jn.fromString(mr(this.args[0].evaluate(s)));case"resolvedImage":return Jn.fromString(mr(this.args[0].evaluate(s)));default:return mr(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}let Es=["Unknown","Point","LineString","Polygon"];class ce{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Es[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let c=this._parseColorCache[s];return c||(c=this._parseColorCache[s]=ir.parse(s)),c}}class R{constructor(s,c,p=[],y,w=new Kn,k=[]){this.registry=s,this.path=p,this.key=p.map(C=>`[${C}]`).join(""),this.scope=w,this.errors=k,this.expectedType=y,this._isConstant=c}parse(s,c,p,y,w={}){return c?this.concat(c,p,y)._parse(s,w):this._parse(s,w)}_parse(s,c){function p(y,w,k){return k==="assert"?new on(w,[y]):k==="coerce"?new Hn(w,[y]):y}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let y=s[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let w=this.registry[y];if(w){let k=w.parse(s,this);if(!k)return null;if(this.expectedType){let C=this.expectedType,A=k.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||A.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string")if(C.kind!=="padding"||A.kind!=="value"&&A.kind!=="number"&&A.kind!=="array")if(C.kind!=="variableAnchorOffsetCollection"||A.kind!=="value"&&A.kind!=="array"){if(this.checkSubtype(C,A))return null}else k=p(k,C,c.typeAnnotation||"coerce");else k=p(k,C,c.typeAnnotation||"coerce");else k=p(k,C,c.typeAnnotation||"coerce");else k=p(k,C,c.typeAnnotation||"assert")}if(!(k instanceof zr)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){let C=new ce;try{k=new zr(k.type,k.evaluate(C))}catch(A){return this.error(A.message),null}}return k}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,c,p){let y=typeof s=="number"?this.path.concat(s):this.path,w=p?this.scope.concat(p):this.scope;return new R(this.registry,this._isConstant,y,c||null,w,this.errors)}error(s,...c){let p=`${this.key}${c.map(y=>`[${y}]`).join("")}`;this.errors.push(new Fr(p,s))}checkSubtype(s,c){let p=_e(s,c);return p&&this.error(p),p}}class X{constructor(s,c,p){this.type=wi,this.locale=p,this.caseSensitive=s,this.diacriticSensitive=c}static parse(s,c){if(s.length!==2)return c.error("Expected one argument.");let p=s[1];if(typeof p!="object"||Array.isArray(p))return c.error("Collator options argument must be an object.");let y=c.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,De);if(!y)return null;let w=c.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,De);if(!w)return null;let k=null;return p.locale&&(k=c.parse(p.locale,1,Mt),!k)?null:new X(y,w,k)}evaluate(s){return new So(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}let Q=8192;function Me(l,s){l[0]=Math.min(l[0],s[0]),l[1]=Math.min(l[1],s[1]),l[2]=Math.max(l[2],s[0]),l[3]=Math.max(l[3],s[1])}function ge(l,s){return!(l[0]<=s[0]||l[2]>=s[2]||l[1]<=s[1]||l[3]>=s[3])}function Ae(l,s){let c=(180+l[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(c*y*Q),Math.round(p*y*Q)]}function Ze(l,s,c){let p=l[0]-s[0],y=l[1]-s[1],w=l[0]-c[0],k=l[1]-c[1];return p*k-w*y==0&&p*w<=0&&y*k<=0}function xt(l,s){let c=!1;for(let k=0,C=s.length;k<C;k++){let A=s[k];for(let D=0,N=A.length;D<N-1;D++){if(Ze(l,A[D],A[D+1]))return!1;(y=A[D])[1]>(p=l)[1]!=(w=A[D+1])[1]>p[1]&&p[0]<(w[0]-y[0])*(p[1]-y[1])/(w[1]-y[1])+y[0]&&(c=!c)}}var p,y,w;return c}function ht(l,s){for(let c=0;c<s.length;c++)if(xt(l,s[c]))return!0;return!1}function Xe(l,s,c,p){let y=p[0]-c[0],w=p[1]-c[1],k=(l[0]-c[0])*w-y*(l[1]-c[1]),C=(s[0]-c[0])*w-y*(s[1]-c[1]);return k>0&&C<0||k<0&&C>0}function Ye(l,s,c){for(let D of c)for(let N=0;N<D.length-1;++N)if((C=[(k=D[N+1])[0]-(w=D[N])[0],k[1]-w[1]])[0]*(A=[(y=s)[0]-(p=l)[0],y[1]-p[1]])[1]-C[1]*A[0]!=0&&Xe(p,y,w,k)&&Xe(w,k,p,y))return!0;var p,y,w,k,C,A;return!1}function _t(l,s){for(let c=0;c<l.length;++c)if(!xt(l[c],s))return!1;for(let c=0;c<l.length-1;++c)if(Ye(l[c],l[c+1],s))return!1;return!0}function er(l,s){for(let c=0;c<s.length;c++)if(_t(l,s[c]))return!0;return!1}function Ui(l,s,c){let p=[];for(let y=0;y<l.length;y++){let w=[];for(let k=0;k<l[y].length;k++){let C=Ae(l[y][k],c);Me(s,C),w.push(C)}p.push(w)}return p}function vr(l,s,c){let p=[];for(let y=0;y<l.length;y++){let w=Ui(l[y],s,c);p.push(w)}return p}function sr(l,s,c,p){if(l[0]<c[0]||l[0]>c[2]){let y=.5*p,w=l[0]-c[0]>y?-p:c[0]-l[0]>y?p:0;w===0&&(w=l[0]-c[2]>y?-p:c[2]-l[0]>y?p:0),l[0]+=w}Me(s,l)}function Kr(l,s,c,p){let y=Math.pow(2,p.z)*Q,w=[p.x*Q,p.y*Q],k=[];for(let C of l)for(let A of C){let D=[A.x+w[0],A.y+w[1]];sr(D,s,c,y),k.push(D)}return k}function qr(l,s,c,p){let y=Math.pow(2,p.z)*Q,w=[p.x*Q,p.y*Q],k=[];for(let A of l){let D=[];for(let N of A){let O=[N.x+w[0],N.y+w[1]];Me(s,O),D.push(O)}k.push(D)}if(s[2]-s[0]<=y/2){(C=s)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let A of k)for(let D of A)sr(D,s,c,y)}var C;return k}class _r{constructor(s,c){this.type=De,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(de(s[1])){let p=s[1];if(p.type==="FeatureCollection"){let y=[];for(let w of p.features){let{type:k,coordinates:C}=w.geometry;k==="Polygon"&&y.push(C),k==="MultiPolygon"&&y.push(...C)}if(y.length)return new _r(p,{type:"MultiPolygon",coordinates:y})}else if(p.type==="Feature"){let y=p.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new _r(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new _r(p,p)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(c,p){let y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],k=c.canonicalID();if(p.type==="Polygon"){let C=Ui(p.coordinates,w,k),A=Kr(c.geometry(),y,w,k);if(!ge(y,w))return!1;for(let D of A)if(!xt(D,C))return!1}if(p.type==="MultiPolygon"){let C=vr(p.coordinates,w,k),A=Kr(c.geometry(),y,w,k);if(!ge(y,w))return!1;for(let D of A)if(!ht(D,C))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(c,p){let y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],k=c.canonicalID();if(p.type==="Polygon"){let C=Ui(p.coordinates,w,k),A=qr(c.geometry(),y,w,k);if(!ge(y,w))return!1;for(let D of A)if(!_t(D,C))return!1}if(p.type==="MultiPolygon"){let C=vr(p.coordinates,w,k),A=qr(c.geometry(),y,w,k);if(!ge(y,w))return!1;for(let D of A)if(!er(D,C))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Co{constructor(s,c){this.type=c.type,this.name=s,this.boundExpression=c}static parse(s,c){if(s.length!==2||typeof s[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");let p=s[1];return c.scope.has(p)?new Co(p,c.scope.get(p)):c.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Ar{constructor(s,c,p,y){this.name=s,this.type=c,this._evaluate=p,this.args=y}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,c){let p=s[0],y=Ar.definitions[p];if(!y)return c.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);let w=Array.isArray(y)?y[0]:y.type,k=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,C=k.filter(([D])=>!Array.isArray(D)||D.length===s.length-1),A=null;for(let[D,N]of C){A=new R(c.registry,kt,c.path,null,c.scope);let O=[],j=!1;for(let W=1;W<s.length;W++){let K=s[W],ie=Array.isArray(D)?D[W-1]:D.type,ae=A.parse(K,1+O.length,ie);if(!ae){j=!0;break}O.push(ae)}if(!j)if(Array.isArray(D)&&D.length!==O.length)A.error(`Expected ${D.length} arguments, but found ${O.length} instead.`);else{for(let W=0;W<O.length;W++){let K=Array.isArray(D)?D[W]:D.type,ie=O[W];A.concat(W+1).checkSubtype(K,ie.type)}if(A.errors.length===0)return new Ar(p,w,N,O)}}if(C.length===1)c.errors.push(...A.errors);else{let D=(C.length?C:k).map(([O])=>{return j=O,Array.isArray(j)?`(${j.map(ne).join(", ")})`:`(${ne(j.type)}...)`;var j}).join(" | "),N=[];for(let O=1;O<s.length;O++){let j=c.parse(s[O],1+N.length);if(!j)return null;N.push(ne(j.type))}c.error(`Expected arguments of type ${D}, but found (${N.join(", ")}) instead.`)}return null}static register(s,c){Ar.definitions=c;for(let p in c)s[p]=Ar}}function kt(l){if(l instanceof Co)return kt(l.boundExpression);if(l instanceof Ar&&l.name==="error"||l instanceof X||l instanceof _r)return!1;let s=l instanceof Hn||l instanceof on,c=!0;return l.eachChild(p=>{c=s?c&&kt(p):c&&p instanceof zr}),!!c&&tr(l)&&qn(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tr(l){if(l instanceof Ar&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof _r)return!1;let s=!0;return l.eachChild(c=>{s&&!tr(c)&&(s=!1)}),s}function Nr(l){if(l instanceof Ar&&l.name==="feature-state")return!1;let s=!0;return l.eachChild(c=>{s&&!Nr(c)&&(s=!1)}),s}function qn(l,s){if(l instanceof Ar&&s.indexOf(l.name)>=0)return!1;let c=!0;return l.eachChild(p=>{c&&!qn(p,s)&&(c=!1)}),c}function uo(l,s){let c=l.length-1,p,y,w=0,k=c,C=0;for(;w<=k;)if(C=Math.floor((w+k)/2),p=l[C],y=l[C+1],p<=s){if(C===c||s<y)return C;w=C+1}else{if(!(p>s))throw new ur("Input is not a number.");k=C-1}return 0}class Eo{constructor(s,c,p){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(let[y,w]of p)this.labels.push(y),this.outputs.push(w)}static parse(s,c){if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");let p=c.parse(s[1],1,ft);if(!p)return null;let y=[],w=null;c.expectedType&&c.expectedType.kind!=="value"&&(w=c.expectedType);for(let k=1;k<s.length;k+=2){let C=k===1?-1/0:s[k],A=s[k+1],D=k,N=k+1;if(typeof C!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(y.length&&y[y.length-1][0]>=C)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);let O=c.parse(A,N,w);if(!O)return null;w=w||O.type,y.push([C,O])}return new Eo(w,p,y)}evaluate(s){let c=this.labels,p=this.outputs;if(c.length===1)return p[0].evaluate(s);let y=this.input.evaluate(s);if(y<=c[0])return p[0].evaluate(s);let w=c.length;return y>=c[w-1]?p[w-1].evaluate(s):p[uo(c,y)].evaluate(s)}eachChild(s){s(this.input);for(let c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Ws(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Ts=qo;function qo(l,s,c,p){this.cx=3*l,this.bx=3*(c-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=s,this.p2x=c,this.p2y=p}qo.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,s){if(s===void 0&&(s=1e-6),l<0)return 0;if(l>1)return 1;for(var c=l,p=0;p<8;p++){var y=this.sampleCurveX(c)-l;if(Math.abs(y)<s)return c;var w=this.sampleCurveDerivativeX(c);if(Math.abs(w)<1e-6)break;c-=y/w}var k=0,C=1;for(c=l,p=0;p<20&&(y=this.sampleCurveX(c),!(Math.abs(y-l)<s));p++)l>y?k=c:C=c,c=.5*(C-k)+k;return c},solve:function(l,s){return this.sampleCurveY(this.solveCurveX(l,s))}};var Xn=Ws(Ts);function ho(l,s,c){return l+c*(s-l)}function Zs(l,s,c){return l.map((p,y)=>ho(p,s[y],c))}let $n={number:ho,color:function(l,s,c,p="rgb"){switch(p){case"rgb":{let[y,w,k,C]=Zs(l.rgb,s.rgb,c);return new ir(y,w,k,C,!1)}case"hcl":{let[y,w,k,C]=l.hcl,[A,D,N,O]=s.hcl,j,W;if(isNaN(y)||isNaN(A))isNaN(y)?isNaN(A)?j=NaN:(j=A,k!==1&&k!==0||(W=D)):(j=y,N!==1&&N!==0||(W=w));else{let Ie=A-y;A>y&&Ie>180?Ie-=360:A<y&&y-A>180&&(Ie+=360),j=y+c*Ie}let[K,ie,ae,pe]=function([Ie,ye,Ee,Ge]){return Ie=isNaN(Ie)?0:Ie*Ni,br([Ee,Math.cos(Ie)*ye,Math.sin(Ie)*ye,Ge])}([j,W??ho(w,D,c),ho(k,N,c),ho(C,O,c)]);return new ir(K,ie,ae,pe,!1)}case"lab":{let[y,w,k,C]=br(Zs(l.lab,s.lab,c));return new ir(y,w,k,C,!1)}}},array:Zs,padding:function(l,s,c){return new Dn(Zs(l.values,s.values,c))},variableAnchorOffsetCollection:function(l,s,c){let p=l.values,y=s.values;if(p.length!==y.length)throw new ur(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${s.toString()}`);let w=[];for(let k=0;k<p.length;k+=2){if(p[k]!==y[k])throw new ur(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${p[k]}, to[${k}]: ${y[k]}`);w.push(p[k]);let[C,A]=p[k+1],[D,N]=y[k+1];w.push([ho(C,D,c),ho(A,N,c)])}return new hn(w)}};class vn{constructor(s,c,p,y,w){this.type=s,this.operator=c,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(let[k,C]of w)this.labels.push(k),this.outputs.push(C)}static interpolationFactor(s,c,p,y){let w=0;if(s.name==="exponential")w=Ks(c,s.base,p,y);else if(s.name==="linear")w=Ks(c,1,p,y);else if(s.name==="cubic-bezier"){let k=s.controlPoints;w=new Xn(k[0],k[1],k[2],k[3]).solve(Ks(c,1,p,y))}return w}static parse(s,c){let[p,y,w,...k]=s;if(!Array.isArray(y)||y.length===0)return c.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){let D=y[1];if(typeof D!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:D}}else{if(y[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(y[0])}`,1,0);{let D=y.slice(1);if(D.length!==4||D.some(N=>typeof N!="number"||N<0||N>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:D}}}if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(w=c.parse(w,2,ft),!w)return null;let C=[],A=null;p==="interpolate-hcl"||p==="interpolate-lab"?A=At:c.expectedType&&c.expectedType.kind!=="value"&&(A=c.expectedType);for(let D=0;D<k.length;D+=2){let N=k[D],O=k[D+1],j=D+3,W=D+4;if(typeof N!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(C.length&&C[C.length-1][0]>=N)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);let K=c.parse(O,W,A);if(!K)return null;A=A||K.type,C.push([N,K])}return ke(A,ft)||ke(A,At)||ke(A,re)||ke(A,H)||ke(A,q(ft))?new vn(A,p,y,w,C):c.error(`Type ${ne(A)} is not interpolatable.`)}evaluate(s){let c=this.labels,p=this.outputs;if(c.length===1)return p[0].evaluate(s);let y=this.input.evaluate(s);if(y<=c[0])return p[0].evaluate(s);let w=c.length;if(y>=c[w-1])return p[w-1].evaluate(s);let k=uo(c,y),C=vn.interpolationFactor(this.interpolation,y,c[k],c[k+1]),A=p[k].evaluate(s),D=p[k+1].evaluate(s);switch(this.operator){case"interpolate":return $n[this.type.kind](A,D,C);case"interpolate-hcl":return $n.color(A,D,C,"hcl");case"interpolate-lab":return $n.color(A,D,C,"lab")}}eachChild(s){s(this.input);for(let c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Ks(l,s,c,p){let y=p-c,w=l-c;return y===0?0:s===1?w/y:(Math.pow(s,w)-1)/(Math.pow(s,y)-1)}class Wi{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expectected at least one argument.");let p=null,y=c.expectedType;y&&y.kind!=="value"&&(p=y);let w=[];for(let C of s.slice(1)){let A=c.parse(C,1+w.length,p,void 0,{typeAnnotation:"omit"});if(!A)return null;p=p||A.type,w.push(A)}if(!p)throw new Error("No output type");let k=y&&w.some(C=>_e(y,C.type));return new Wi(k?Dt:p,w)}evaluate(s){let c,p=null,y=0;for(let w of this.args)if(y++,p=w.evaluate(s),p&&p instanceof Jn&&!p.available&&(c||(c=p.name),p=null,y===this.args.length&&(p=c)),p!==null)break;return p}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class Fa{constructor(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(let c of this.bindings)s(c[1]);s(this.result)}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);let p=[];for(let w=1;w<s.length-1;w+=2){let k=s[w];if(typeof k!="string")return c.error(`Expected string, but found ${typeof k} instead.`,w);if(/[^a-zA-Z0-9_]/.test(k))return c.error("Variable names must contain only alphanumeric characters or '_'.",w);let C=c.parse(s[w+1],w+1);if(!C)return null;p.push([k,C])}let y=c.parse(s[s.length-1],s.length-1,c.expectedType,p);return y?new Fa(p,y):null}outputDefined(){return this.result.outputDefined()}}class Sl{constructor(s,c,p){this.type=s,this.index=c,this.input=p}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let p=c.parse(s[1],1,ft),y=c.parse(s[2],2,q(c.expectedType||Dt));return p&&y?new Sl(y.type.itemType,p,y):null}evaluate(s){let c=this.index.evaluate(s),p=this.input.evaluate(s);if(c<0)throw new ur(`Array index out of bounds: ${c} < 0.`);if(c>=p.length)throw new ur(`Array index out of bounds: ${c} > ${p.length-1}.`);if(c!==Math.floor(c))throw new ur(`Array index must be an integer, but found ${c} instead.`);return p[c]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class dc{constructor(s,c){this.type=De,this.needle=s,this.haystack=c}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);let p=c.parse(s[1],1,Dt),y=c.parse(s[2],2,Dt);return p&&y?Se(p.type,[De,Mt,ft,ko,Dt])?new dc(p,y):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ne(p.type)} instead`):null}evaluate(s){let c=this.needle.evaluate(s),p=this.haystack.evaluate(s);if(!p)return!1;if(!me(c,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${ne(ci(c))} instead.`);if(!me(p,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${ne(ci(p))} instead.`);return p.indexOf(c)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class Cl{constructor(s,c,p){this.type=ft,this.needle=s,this.haystack=c,this.fromIndex=p}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let p=c.parse(s[1],1,Dt),y=c.parse(s[2],2,Dt);if(!p||!y)return null;if(!Se(p.type,[De,Mt,ft,ko,Dt]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ne(p.type)} instead`);if(s.length===4){let w=c.parse(s[3],3,ft);return w?new Cl(p,y,w):null}return new Cl(p,y)}evaluate(s){let c=this.needle.evaluate(s),p=this.haystack.evaluate(s);if(!me(c,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${ne(ci(c))} instead.`);if(!me(p,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${ne(ci(p))} instead.`);if(this.fromIndex){let y=this.fromIndex.evaluate(s);return p.indexOf(c,y)}return p.indexOf(c)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Bd{constructor(s,c,p,y,w,k){this.inputType=s,this.type=c,this.input=p,this.cases=y,this.outputs=w,this.otherwise=k}static parse(s,c){if(s.length<5)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return c.error("Expected an even number of arguments.");let p,y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);let w={},k=[];for(let D=2;D<s.length-1;D+=2){let N=s[D],O=s[D+1];Array.isArray(N)||(N=[N]);let j=c.concat(D);if(N.length===0)return j.error("Expected at least one branch label.");for(let K of N){if(typeof K!="number"&&typeof K!="string")return j.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return j.error("Numeric branch labels must be integer values.");if(p){if(j.checkSubtype(p,ci(K)))return null}else p=ci(K);if(w[String(K)]!==void 0)return j.error("Branch labels must be unique.");w[String(K)]=k.length}let W=c.parse(O,D,y);if(!W)return null;y=y||W.type,k.push(W)}let C=c.parse(s[1],1,Dt);if(!C)return null;let A=c.parse(s[s.length-1],s.length-1,y);return A?C.type.kind!=="value"&&c.concat(1).checkSubtype(p,C.type)?null:new Bd(p,y,C,w,k,A):null}evaluate(s){let c=this.input.evaluate(s);return(ci(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class Rd{constructor(s,c,p){this.type=s,this.branches=c,this.otherwise=p}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return c.error("Expected an odd number of arguments.");let p;c.expectedType&&c.expectedType.kind!=="value"&&(p=c.expectedType);let y=[];for(let k=1;k<s.length-1;k+=2){let C=c.parse(s[k],k,De);if(!C)return null;let A=c.parse(s[k+1],k+1,p);if(!A)return null;y.push([C,A]),p=p||A.type}let w=c.parse(s[s.length-1],s.length-1,p);if(!w)return null;if(!p)throw new Error("Can't infer output type");return new Rd(p,y,w)}evaluate(s){for(let[c,p]of this.branches)if(c.evaluate(s))return p.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(let[c,p]of this.branches)s(c),s(p);s(this.otherwise)}outputDefined(){return this.branches.every(([s,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class bu{constructor(s,c,p,y){this.type=s,this.input=c,this.beginIndex=p,this.endIndex=y}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);let p=c.parse(s[1],1,Dt),y=c.parse(s[2],2,ft);if(!p||!y)return null;if(!Se(p.type,[q(Dt),Mt,Dt]))return c.error(`Expected first argument to be of type array or string, but found ${ne(p.type)} instead`);if(s.length===4){let w=c.parse(s[3],3,ft);return w?new bu(p.type,p,y,w):null}return new bu(p.type,p,y)}evaluate(s){let c=this.input.evaluate(s),p=this.beginIndex.evaluate(s);if(!me(c,["string","array"]))throw new ur(`Expected first argument to be of type array or string, but found ${ne(ci(c))} instead.`);if(this.endIndex){let y=this.endIndex.evaluate(s);return c.slice(p,y)}return c.slice(p)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function df(l,s){return l==="=="||l==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function hf(l,s,c,p){return p.compare(s,c)===0}function El(l,s,c){let p=l!=="=="&&l!=="!=";return class c7{constructor(w,k,C){this.type=De,this.lhs=w,this.rhs=k,this.collator=C,this.hasUntypedArgument=w.type.kind==="value"||k.type.kind==="value"}static parse(w,k){if(w.length!==3&&w.length!==4)return k.error("Expected two or three arguments.");let C=w[0],A=k.parse(w[1],1,Dt);if(!A)return null;if(!df(C,A.type))return k.concat(1).error(`"${C}" comparisons are not supported for type '${ne(A.type)}'.`);let D=k.parse(w[2],2,Dt);if(!D)return null;if(!df(C,D.type))return k.concat(2).error(`"${C}" comparisons are not supported for type '${ne(D.type)}'.`);if(A.type.kind!==D.type.kind&&A.type.kind!=="value"&&D.type.kind!=="value")return k.error(`Cannot compare types '${ne(A.type)}' and '${ne(D.type)}'.`);p&&(A.type.kind==="value"&&D.type.kind!=="value"?A=new on(D.type,[A]):A.type.kind!=="value"&&D.type.kind==="value"&&(D=new on(A.type,[D])));let N=null;if(w.length===4){if(A.type.kind!=="string"&&D.type.kind!=="string"&&A.type.kind!=="value"&&D.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(N=k.parse(w[3],3,wi),!N)return null}return new c7(A,D,N)}evaluate(w){let k=this.lhs.evaluate(w),C=this.rhs.evaluate(w);if(p&&this.hasUntypedArgument){let A=ci(k),D=ci(C);if(A.kind!==D.kind||A.kind!=="string"&&A.kind!=="number")throw new ur(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${A.kind}, ${D.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){let A=ci(k),D=ci(C);if(A.kind!=="string"||D.kind!=="string")return s(w,k,C)}return this.collator?c(w,k,C,this.collator.evaluate(w)):s(w,k,C)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}let s1=El("==",function(l,s,c){return s===c},hf),a1=El("!=",function(l,s,c){return s!==c},function(l,s,c,p){return!hf(0,s,c,p)}),l1=El("<",function(l,s,c){return s<c},function(l,s,c,p){return p.compare(s,c)<0}),c1=El(">",function(l,s,c){return s>c},function(l,s,c,p){return p.compare(s,c)>0}),u1=El("<=",function(l,s,c){return s<=c},function(l,s,c,p){return p.compare(s,c)<=0}),d1=El(">=",function(l,s,c){return s>=c},function(l,s,c,p){return p.compare(s,c)>=0});class Ud{constructor(s,c,p,y,w){this.type=Mt,this.number=s,this.locale=c,this.currency=p,this.minFractionDigits=y,this.maxFractionDigits=w}static parse(s,c){if(s.length!==3)return c.error("Expected two arguments.");let p=c.parse(s[1],1,ft);if(!p)return null;let y=s[2];if(typeof y!="object"||Array.isArray(y))return c.error("NumberFormat options argument must be an object.");let w=null;if(y.locale&&(w=c.parse(y.locale,1,Mt),!w))return null;let k=null;if(y.currency&&(k=c.parse(y.currency,1,Mt),!k))return null;let C=null;if(y["min-fraction-digits"]&&(C=c.parse(y["min-fraction-digits"],1,ft),!C))return null;let A=null;return y["max-fraction-digits"]&&(A=c.parse(y["max-fraction-digits"],1,ft),!A)?null:new Ud(p,w,k,C,A)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class vu{constructor(s){this.type=zi,this.sections=s}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let p=s[1];if(!Array.isArray(p)&&typeof p=="object")return c.error("First argument must be an image or text section.");let y=[],w=!1;for(let k=1;k<=s.length-1;++k){let C=s[k];if(w&&typeof C=="object"&&!Array.isArray(C)){w=!1;let A=null;if(C["font-scale"]&&(A=c.parse(C["font-scale"],1,ft),!A))return null;let D=null;if(C["text-font"]&&(D=c.parse(C["text-font"],1,q(Mt)),!D))return null;let N=null;if(C["text-color"]&&(N=c.parse(C["text-color"],1,At),!N))return null;let O=y[y.length-1];O.scale=A,O.font=D,O.textColor=N}else{let A=c.parse(s[k],1,Dt);if(!A)return null;let D=A.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,y.push({content:A,scale:null,font:null,textColor:null})}}return new vu(y)}evaluate(s){return new jn(this.sections.map(c=>{let p=c.content.evaluate(s);return ci(p)===V?new La("",p,null,null,null):new La(mr(p),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null)}))}eachChild(s){for(let c of this.sections)s(c.content),c.scale&&s(c.scale),c.font&&s(c.font),c.textColor&&s(c.textColor)}outputDefined(){return!1}}class Vd{constructor(s){this.type=V,this.input=s}static parse(s,c){if(s.length!==2)return c.error("Expected two arguments.");let p=c.parse(s[1],1,Mt);return p?new Vd(p):c.error("No image name provided.")}evaluate(s){let c=this.input.evaluate(s),p=Jn.fromString(c);return p&&s.availableImages&&(p.available=s.availableImages.indexOf(c)>-1),p}eachChild(s){s(this.input)}outputDefined(){return!1}}class jd{constructor(s){this.type=ft,this.input=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);let p=c.parse(s[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${ne(p.type)} instead.`):new jd(p):null}evaluate(s){let c=this.input.evaluate(s);if(typeof c=="string"||Array.isArray(c))return c.length;throw new ur(`Expected value to be of type string or array, but found ${ne(ci(c))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}let Tl={"==":s1,"!=":a1,">":c1,"<":l1,">=":d1,"<=":u1,array:on,at:Sl,boolean:on,case:Rd,coalesce:Wi,collator:X,format:vu,image:Vd,in:dc,"index-of":Cl,interpolate:vn,"interpolate-hcl":vn,"interpolate-lab":vn,length:jd,let:Fa,literal:zr,match:Bd,number:on,"number-format":Ud,object:on,slice:bu,step:Eo,string:on,"to-boolean":Hn,"to-color":Hn,"to-number":Hn,"to-string":Hn,var:Co,within:_r};function pf(l,[s,c,p,y]){s=s.evaluate(l),c=c.evaluate(l),p=p.evaluate(l);let w=y?y.evaluate(l):1,k=kl(s,c,p,w);if(k)throw new ur(k);return new ir(s/255,c/255,p/255,w,!1)}function ff(l,s){return l in s}function Hd(l,s){let c=s[l];return c===void 0?null:c}function za(l){return{type:l}}function mf(l){return{result:"success",value:l}}function Ml(l){return{result:"error",value:l}}function Al(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function gf(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function qd(l){return!!l.expression&&l.expression.interpolated}function rr(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Il(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function h1(l){return l}function yf(l,s){let c=s.type==="color",p=l.stops&&typeof l.stops[0][0]=="object",y=p||!(p||l.property!==void 0),w=l.type||(qd(s)?"exponential":"interval");if(c||s.type==="padding"){let N=c?ir.parse:Dn.parse;(l=Lr({},l)).stops&&(l.stops=l.stops.map(O=>[O[0],N(O[1])])),l.default=N(l.default?l.default:s.default)}if(l.colorSpace&&(k=l.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var k;let C,A,D;if(w==="exponential")C=bf;else if(w==="interval")C=sn;else if(w==="categorical"){C=p1,A=Object.create(null);for(let N of l.stops)A[N[0]]=N[1];D=typeof l.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);C=Ji}if(p){let N={},O=[];for(let K=0;K<l.stops.length;K++){let ie=l.stops[K],ae=ie[0].zoom;N[ae]===void 0&&(N[ae]={zoom:ae,type:l.type,property:l.property,default:l.default,stops:[]},O.push(ae)),N[ae].stops.push([ie[0].value,ie[1]])}let j=[];for(let K of O)j.push([N[K].zoom,yf(N[K],s)]);let W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:vn.interpolationFactor.bind(void 0,W),zoomStops:j.map(K=>K[0]),evaluate:({zoom:K},ie)=>bf({stops:j,base:l.base},s,K).evaluate(K,ie)}}if(y){let N=w==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:vn.interpolationFactor.bind(void 0,N),zoomStops:l.stops.map(O=>O[0]),evaluate:({zoom:O})=>C(l,s,O,A,D)}}return{kind:"source",evaluate(N,O){let j=O&&O.properties?O.properties[l.property]:void 0;return j===void 0?hc(l.default,s.default):C(l,s,j,A,D)}}}function hc(l,s,c){return l!==void 0?l:s!==void 0?s:c!==void 0?c:void 0}function p1(l,s,c,p,y){return hc(typeof c===y?p[c]:void 0,l.default,s.default)}function sn(l,s,c){if(rr(c)!=="number")return hc(l.default,s.default);let p=l.stops.length;if(p===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[p-1][0])return l.stops[p-1][1];let y=uo(l.stops.map(w=>w[0]),c);return l.stops[y][1]}function bf(l,s,c){let p=l.base!==void 0?l.base:1;if(rr(c)!=="number")return hc(l.default,s.default);let y=l.stops.length;if(y===1||c<=l.stops[0][0])return l.stops[0][1];if(c>=l.stops[y-1][0])return l.stops[y-1][1];let w=uo(l.stops.map(N=>N[0]),c),k=function(N,O,j,W){let K=W-j,ie=N-j;return K===0?0:O===1?ie/K:(Math.pow(O,ie)-1)/(Math.pow(O,K)-1)}(c,p,l.stops[w][0],l.stops[w+1][0]),C=l.stops[w][1],A=l.stops[w+1][1],D=$n[s.type]||h1;return typeof C.evaluate=="function"?{evaluate(...N){let O=C.evaluate.apply(void 0,N),j=A.evaluate.apply(void 0,N);if(O!==void 0&&j!==void 0)return D(O,j,k,l.colorSpace)}}:D(C,A,k,l.colorSpace)}function Ji(l,s,c){switch(s.type){case"color":c=ir.parse(c);break;case"formatted":c=jn.fromString(c.toString());break;case"resolvedImage":c=Jn.fromString(c.toString());break;case"padding":c=Dn.parse(c);break;default:rr(c)===s.type||s.type==="enum"&&s.values[c]||(c=void 0)}return hc(c,l.default,s.default)}Ar.register(Tl,{error:[{kind:"error"},[Mt],(l,[s])=>{throw new ur(s.evaluate(l))}],typeof:[Mt,[Dt],(l,[s])=>ne(ci(s.evaluate(l)))],"to-rgba":[q(ft,4),[At],(l,[s])=>{let[c,p,y,w]=s.evaluate(l).rgb;return[255*c,255*p,255*y,w]}],rgb:[At,[ft,ft,ft],pf],rgba:[At,[ft,ft,ft,ft],pf],has:{type:De,overloads:[[[Mt],(l,[s])=>ff(s.evaluate(l),l.properties())],[[Mt,Jt],(l,[s,c])=>ff(s.evaluate(l),c.evaluate(l))]]},get:{type:Dt,overloads:[[[Mt],(l,[s])=>Hd(s.evaluate(l),l.properties())],[[Mt,Jt],(l,[s,c])=>Hd(s.evaluate(l),c.evaluate(l))]]},"feature-state":[Dt,[Mt],(l,[s])=>Hd(s.evaluate(l),l.featureState||{})],properties:[Jt,[],l=>l.properties()],"geometry-type":[Mt,[],l=>l.geometryType()],id:[Dt,[],l=>l.id()],zoom:[ft,[],l=>l.globals.zoom],"heatmap-density":[ft,[],l=>l.globals.heatmapDensity||0],"line-progress":[ft,[],l=>l.globals.lineProgress||0],accumulated:[Dt,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[ft,za(ft),(l,s)=>{let c=0;for(let p of s)c+=p.evaluate(l);return c}],"*":[ft,za(ft),(l,s)=>{let c=1;for(let p of s)c*=p.evaluate(l);return c}],"-":{type:ft,overloads:[[[ft,ft],(l,[s,c])=>s.evaluate(l)-c.evaluate(l)],[[ft],(l,[s])=>-s.evaluate(l)]]},"/":[ft,[ft,ft],(l,[s,c])=>s.evaluate(l)/c.evaluate(l)],"%":[ft,[ft,ft],(l,[s,c])=>s.evaluate(l)%c.evaluate(l)],ln2:[ft,[],()=>Math.LN2],pi:[ft,[],()=>Math.PI],e:[ft,[],()=>Math.E],"^":[ft,[ft,ft],(l,[s,c])=>Math.pow(s.evaluate(l),c.evaluate(l))],sqrt:[ft,[ft],(l,[s])=>Math.sqrt(s.evaluate(l))],log10:[ft,[ft],(l,[s])=>Math.log(s.evaluate(l))/Math.LN10],ln:[ft,[ft],(l,[s])=>Math.log(s.evaluate(l))],log2:[ft,[ft],(l,[s])=>Math.log(s.evaluate(l))/Math.LN2],sin:[ft,[ft],(l,[s])=>Math.sin(s.evaluate(l))],cos:[ft,[ft],(l,[s])=>Math.cos(s.evaluate(l))],tan:[ft,[ft],(l,[s])=>Math.tan(s.evaluate(l))],asin:[ft,[ft],(l,[s])=>Math.asin(s.evaluate(l))],acos:[ft,[ft],(l,[s])=>Math.acos(s.evaluate(l))],atan:[ft,[ft],(l,[s])=>Math.atan(s.evaluate(l))],min:[ft,za(ft),(l,s)=>Math.min(...s.map(c=>c.evaluate(l)))],max:[ft,za(ft),(l,s)=>Math.max(...s.map(c=>c.evaluate(l)))],abs:[ft,[ft],(l,[s])=>Math.abs(s.evaluate(l))],round:[ft,[ft],(l,[s])=>{let c=s.evaluate(l);return c<0?-Math.round(-c):Math.round(c)}],floor:[ft,[ft],(l,[s])=>Math.floor(s.evaluate(l))],ceil:[ft,[ft],(l,[s])=>Math.ceil(s.evaluate(l))],"filter-==":[De,[Mt,Dt],(l,[s,c])=>l.properties()[s.value]===c.value],"filter-id-==":[De,[Dt],(l,[s])=>l.id()===s.value],"filter-type-==":[De,[Mt],(l,[s])=>l.geometryType()===s.value],"filter-<":[De,[Mt,Dt],(l,[s,c])=>{let p=l.properties()[s.value],y=c.value;return typeof p==typeof y&&p<y}],"filter-id-<":[De,[Dt],(l,[s])=>{let c=l.id(),p=s.value;return typeof c==typeof p&&c<p}],"filter->":[De,[Mt,Dt],(l,[s,c])=>{let p=l.properties()[s.value],y=c.value;return typeof p==typeof y&&p>y}],"filter-id->":[De,[Dt],(l,[s])=>{let c=l.id(),p=s.value;return typeof c==typeof p&&c>p}],"filter-<=":[De,[Mt,Dt],(l,[s,c])=>{let p=l.properties()[s.value],y=c.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[De,[Dt],(l,[s])=>{let c=l.id(),p=s.value;return typeof c==typeof p&&c<=p}],"filter->=":[De,[Mt,Dt],(l,[s,c])=>{let p=l.properties()[s.value],y=c.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[De,[Dt],(l,[s])=>{let c=l.id(),p=s.value;return typeof c==typeof p&&c>=p}],"filter-has":[De,[Dt],(l,[s])=>s.value in l.properties()],"filter-has-id":[De,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[De,[q(Mt)],(l,[s])=>s.value.indexOf(l.geometryType())>=0],"filter-id-in":[De,[q(Dt)],(l,[s])=>s.value.indexOf(l.id())>=0],"filter-in-small":[De,[Mt,q(Dt)],(l,[s,c])=>c.value.indexOf(l.properties()[s.value])>=0],"filter-in-large":[De,[Mt,q(Dt)],(l,[s,c])=>function(p,y,w,k){for(;w<=k;){let C=w+k>>1;if(y[C]===p)return!0;y[C]>p?k=C-1:w=C+1}return!1}(l.properties()[s.value],c.value,0,c.value.length-1)],all:{type:De,overloads:[[[De,De],(l,[s,c])=>s.evaluate(l)&&c.evaluate(l)],[za(De),(l,s)=>{for(let c of s)if(!c.evaluate(l))return!1;return!0}]]},any:{type:De,overloads:[[[De,De],(l,[s,c])=>s.evaluate(l)||c.evaluate(l)],[za(De),(l,s)=>{for(let c of s)if(c.evaluate(l))return!0;return!1}]]},"!":[De,[De],(l,[s])=>!s.evaluate(l)],"is-supported-script":[De,[Mt],(l,[s])=>{let c=l.globals&&l.globals.isSupportedScript;return!c||c(s.evaluate(l))}],upcase:[Mt,[Mt],(l,[s])=>s.evaluate(l).toUpperCase()],downcase:[Mt,[Mt],(l,[s])=>s.evaluate(l).toLowerCase()],concat:[Mt,za(Dt),(l,s)=>s.map(c=>mr(c.evaluate(l))).join("")],"resolved-locale":[Mt,[wi],(l,[s])=>s.evaluate(l).resolvedLocale()]});class pc{constructor(s,c){var p;this.expression=s,this._warningHistory={},this._evaluator=new ce,this._defaultValue=c?(p=c).type==="color"&&Il(p.default)?new ir(0,0,0,0):p.type==="color"?ir.parse(p.default)||null:p.type==="padding"?Dn.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?hn.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(s,c,p,y,w,k){return this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=p,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(s,c,p,y,w,k){this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=k||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(A=>JSON.stringify(A)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Er(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Tl}function xr(l,s){let c=new R(Tl,kt,[],s?function(y){let w={color:At,string:Mt,number:ft,enum:Mt,boolean:De,formatted:zi,padding:re,resolvedImage:V,variableAnchorOffsetCollection:H};return y.type==="array"?q(w[y.value]||Dt,y.length):w[y.type]}(s):void 0),p=c.parse(l,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?mf(new pc(p,s)):Ml(c.errors)}class Pl{constructor(s,c){this.kind=s,this._styleExpression=c,this.isStateDependent=s!=="constant"&&!Nr(c.expression)}evaluateWithoutErrorHandling(s,c,p,y,w,k){return this._styleExpression.evaluateWithoutErrorHandling(s,c,p,y,w,k)}evaluate(s,c,p,y,w,k){return this._styleExpression.evaluate(s,c,p,y,w,k)}}class _u{constructor(s,c,p,y){this.kind=s,this.zoomStops=p,this._styleExpression=c,this.isStateDependent=s!=="camera"&&!Nr(c.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,c,p,y,w,k){return this._styleExpression.evaluateWithoutErrorHandling(s,c,p,y,w,k)}evaluate(s,c,p,y,w,k){return this._styleExpression.evaluate(s,c,p,y,w,k)}interpolationFactor(s,c,p){return this.interpolationType?vn.interpolationFactor(this.interpolationType,s,c,p):0}}function vf(l,s){let c=xr(l,s);if(c.result==="error")return c;let p=c.value.expression,y=tr(p);if(!y&&!Al(s))return Ml([new Fr("","data expressions not supported")]);let w=qn(p,["zoom"]);if(!w&&!gf(s))return Ml([new Fr("","zoom expressions not supported")]);let k=wu(p);return k||w?k instanceof Fr?Ml([k]):k instanceof vn&&!qd(s)?Ml([new Fr("",'"interpolate" expressions cannot be used with this property')]):mf(k?new _u(y?"camera":"composite",c.value,k.labels,k instanceof vn?k.interpolation:void 0):new Pl(y?"constant":"source",c.value)):Ml([new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class xu{constructor(s,c){this._parameters=s,this._specification=c,Lr(this,yf(this._parameters,this._specification))}static deserialize(s){return new xu(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function wu(l){let s=null;if(l instanceof Fa)s=wu(l.result);else if(l instanceof Wi){for(let c of l.args)if(s=wu(c),s)break}else(l instanceof Eo||l instanceof vn)&&l.input instanceof Ar&&l.input.name==="zoom"&&(s=l);return s instanceof Fr||l.eachChild(c=>{let p=wu(c);p instanceof Fr?s=p:!s&&p?s=new Fr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&p&&s!==p&&(s=new Fr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function $d(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(let s of l.slice(1))if(!$d(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}let _f={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ku(l){if(l==null)return{filter:()=>!0,needGeometry:!1};$d(l)||(l=Dl(l));let s=xr(l,_f);if(s.result==="error")throw new Error(s.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,p,y)=>s.value.evaluate(c,p,{},y),needGeometry:Qd(l)}}function xf(l,s){return l<s?-1:l>s?1:0}function Qd(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(let s=1;s<l.length;s++)if(Qd(l[s]))return!0;return!1}function Dl(l){if(!l)return!0;let s=l[0];return l.length<=1?s!=="any":s==="=="?Gd(l[1],l[2],"=="):s==="!="?Su(Gd(l[1],l[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Gd(l[1],l[2],s):s==="any"?(c=l.slice(1),["any"].concat(c.map(Dl))):s==="all"?["all"].concat(l.slice(1).map(Dl)):s==="none"?["all"].concat(l.slice(1).map(Dl).map(Su)):s==="in"?wf(l[1],l.slice(2)):s==="!in"?Su(wf(l[1],l.slice(2))):s==="has"?kf(l[1]):s==="!has"?Su(kf(l[1])):s!=="within"||l;var c}function Gd(l,s,c){switch(l){case"$type":return[`filter-type-${c}`,s];case"$id":return[`filter-id-${c}`,s];default:return[`filter-${c}`,l,s]}}function wf(l,s){if(s.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(c=>typeof c!=typeof s[0])?["filter-in-large",l,["literal",s.sort(xf)]]:["filter-in-small",l,["literal",s]]}}function kf(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function Su(l){return["!",l]}function Wd(l){let s=typeof l;if(s==="number"||s==="boolean"||s==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let y="[";for(let w of l)y+=`${Wd(w)},`;return`${y}]`}let c=Object.keys(l).sort(),p="{";for(let y=0;y<c.length;y++)p+=`${JSON.stringify(c[y])}:${Wd(l[c[y]])},`;return`${p}}`}function f1(l){let s="";for(let c of fi)s+=`/${Wd(l[c])}`;return s}function Sf(l){let s=l.value;return s?[new ct(l.key,s,"constants have been deprecated as of v8")]:[]}function Jr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function ma(l){if(Array.isArray(l))return l.map(ma);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){let s={};for(let c in l)s[c]=ma(l[c]);return s}return Jr(l)}function $o(l){let s=l.key,c=l.value,p=l.valueSpec||{},y=l.objectElementValidators||{},w=l.style,k=l.styleSpec,C=l.validateSpec,A=[],D=rr(c);if(D!=="object")return[new ct(s,c,`object expected, ${D} found`)];for(let N in c){let O=N.split(".")[0],j=p[O]||p["*"],W;if(y[O])W=y[O];else if(p[O])W=C;else if(y["*"])W=y["*"];else{if(!p["*"]){A.push(new ct(s,c[N],`unknown property "${N}"`));continue}W=C}A=A.concat(W({key:(s&&`${s}.`)+N,value:c[N],valueSpec:j,style:w,styleSpec:k,object:c,objectKey:N,validateSpec:C},c))}for(let N in p)y[N]||p[N].required&&p[N].default===void 0&&c[N]===void 0&&A.push(new ct(s,c,`missing required property "${N}"`));return A}function Ll(l){let s=l.value,c=l.valueSpec,p=l.style,y=l.styleSpec,w=l.key,k=l.arrayElementValidator||l.validateSpec;if(rr(s)!=="array")return[new ct(w,s,`array expected, ${rr(s)} found`)];if(c.length&&s.length!==c.length)return[new ct(w,s,`array length ${c.length} expected, length ${s.length} found`)];if(c["min-length"]&&s.length<c["min-length"])return[new ct(w,s,`array length at least ${c["min-length"]} expected, length ${s.length} found`)];let C={type:c.value,values:c.values};y.$version<7&&(C.function=c.function),rr(c.value)==="object"&&(C=c.value);let A=[];for(let D=0;D<s.length;D++)A=A.concat(k({array:s,arrayIndex:D,value:s[D],valueSpec:C,validateSpec:l.validateSpec,style:p,styleSpec:y,key:`${w}[${D}]`}));return A}function Zd(l){let s=l.key,c=l.value,p=l.valueSpec,y=rr(c);return y==="number"&&c!=c&&(y="NaN"),y!=="number"?[new ct(s,c,`number expected, ${y} found`)]:"minimum"in p&&c<p.minimum?[new ct(s,c,`${c} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&c>p.maximum?[new ct(s,c,`${c} is greater than the maximum value ${p.maximum}`)]:[]}function Kd(l){let s=l.valueSpec,c=Jr(l.value.type),p,y,w,k={},C=c!=="categorical"&&l.value.property===void 0,A=!C,D=rr(l.value.stops)==="array"&&rr(l.value.stops[0])==="array"&&rr(l.value.stops[0][0])==="object",N=$o({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(W){if(c==="identity")return[new ct(W.key,W.value,'identity function may not have a "stops" property')];let K=[],ie=W.value;return K=K.concat(Ll({key:W.key,value:ie,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:O})),rr(ie)==="array"&&ie.length===0&&K.push(new ct(W.key,ie,"array must have at least one stop")),K},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:s,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return c==="identity"&&C&&N.push(new ct(l.key,l.value,'missing required property "property"')),c==="identity"||l.value.stops||N.push(new ct(l.key,l.value,'missing required property "stops"')),c==="exponential"&&l.valueSpec.expression&&!qd(l.valueSpec)&&N.push(new ct(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(A&&!Al(l.valueSpec)?N.push(new ct(l.key,l.value,"property functions not supported")):C&&!gf(l.valueSpec)&&N.push(new ct(l.key,l.value,"zoom functions not supported"))),c!=="categorical"&&!D||l.value.property!==void 0||N.push(new ct(l.key,l.value,'"property" property is required')),N;function O(W){let K=[],ie=W.value,ae=W.key;if(rr(ie)!=="array")return[new ct(ae,ie,`array expected, ${rr(ie)} found`)];if(ie.length!==2)return[new ct(ae,ie,`array length 2 expected, length ${ie.length} found`)];if(D){if(rr(ie[0])!=="object")return[new ct(ae,ie,`object expected, ${rr(ie[0])} found`)];if(ie[0].zoom===void 0)return[new ct(ae,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new ct(ae,ie,"object stop key must have value")];if(w&&w>Jr(ie[0].zoom))return[new ct(ae,ie[0].zoom,"stop zoom values must appear in ascending order")];Jr(ie[0].zoom)!==w&&(w=Jr(ie[0].zoom),y=void 0,k={}),K=K.concat($o({key:`${ae}[0]`,value:ie[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:Zd,value:j}}))}else K=K.concat(j({key:`${ae}[0]`,value:ie[0],valueSpec:{},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},ie));return Er(ma(ie[1]))?K.concat([new ct(`${ae}[1]`,ie[1],"expressions are not allowed in function stops.")]):K.concat(W.validateSpec({key:`${ae}[1]`,value:ie[1],valueSpec:s,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function j(W,K){let ie=rr(W.value),ae=Jr(W.value),pe=W.value!==null?W.value:K;if(p){if(ie!==p)return[new ct(W.key,pe,`${ie} stop domain type must match previous stop domain type ${p}`)]}else p=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean")return[new ct(W.key,pe,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&c!=="categorical"){let Ie=`number expected, ${ie} found`;return Al(s)&&c===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ct(W.key,pe,Ie)]}return c!=="categorical"||ie!=="number"||isFinite(ae)&&Math.floor(ae)===ae?c!=="categorical"&&ie==="number"&&y!==void 0&&ae<y?[new ct(W.key,pe,"stop domain values must appear in ascending order")]:(y=ae,c==="categorical"&&ae in k?[new ct(W.key,pe,"stop domain values must be unique")]:(k[ae]=!0,[])):[new ct(W.key,pe,`integer expected, found ${ae}`)]}}function Fl(l){let s=(l.expressionContext==="property"?vf:xr)(ma(l.value),l.valueSpec);if(s.result==="error")return s.value.map(p=>new ct(`${l.key}${p.key}`,l.value,p.message));let c=s.value.expression||s.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!c.outputDefined())return[new ct(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Nr(c))return[new ct(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Nr(c))return[new ct(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!qn(c,["zoom","feature-state"]))return[new ct(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!tr(c))return[new ct(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Na(l){let s=l.key,c=l.value,p=l.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(Jr(c))===-1&&y.push(new ct(s,c,`expected one of [${p.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(p.values).indexOf(Jr(c))===-1&&y.push(new ct(s,c,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(c)} found`)),y}function zl(l){return $d(ma(l.value))?Fl(Lr({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fc(l)}function fc(l){let s=l.value,c=l.key;if(rr(s)!=="array")return[new ct(c,s,`array expected, ${rr(s)} found`)];let p=l.styleSpec,y,w=[];if(s.length<1)return[new ct(c,s,"filter array must have at least 1 element")];switch(w=w.concat(Na({key:`${c}[0]`,value:s[0],valueSpec:p.filter_operator,style:l.style,styleSpec:l.styleSpec})),Jr(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&Jr(s[1])==="$type"&&w.push(new ct(c,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&w.push(new ct(c,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(y=rr(s[1]),y!=="string"&&w.push(new ct(`${c}[1]`,s[1],`string expected, ${y} found`)));for(let k=2;k<s.length;k++)y=rr(s[k]),Jr(s[1])==="$type"?w=w.concat(Na({key:`${c}[${k}]`,value:s[k],valueSpec:p.geometry_type,style:l.style,styleSpec:l.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&w.push(new ct(`${c}[${k}]`,s[k],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let k=1;k<s.length;k++)w=w.concat(fc({key:`${c}[${k}]`,value:s[k],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":y=rr(s[1]),s.length!==2?w.push(new ct(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):y!=="string"&&w.push(new ct(`${c}[1]`,s[1],`string expected, ${y} found`));break;case"within":y=rr(s[1]),s.length!==2?w.push(new ct(c,s,`filter array for "${s[0]}" operator must have 2 elements`)):y!=="object"&&w.push(new ct(`${c}[1]`,s[1],`object expected, ${y} found`))}return w}function Jd(l,s){let c=l.key,p=l.validateSpec,y=l.style,w=l.styleSpec,k=l.value,C=l.objectKey,A=w[`${s}_${l.layerType}`];if(!A)return[];let D=C.match(/^(.*)-transition$/);if(s==="paint"&&D&&A[D[1]]&&A[D[1]].transition)return p({key:c,value:k,valueSpec:w.transition,style:y,styleSpec:w});let N=l.valueSpec||A[C];if(!N)return[new ct(c,k,`unknown property "${C}"`)];let O;if(rr(k)==="string"&&Al(N)&&!N.tokens&&(O=/^{([^}]+)}$/.exec(k)))return[new ct(c,k,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];let j=[];return l.layerType==="symbol"&&(C==="text-field"&&y&&!y.glyphs&&j.push(new ct(c,k,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Il(ma(k))&&Jr(k.type)==="identity"&&j.push(new ct(c,k,'"text-font" does not support identity functions'))),j.concat(p({key:l.key,value:k,valueSpec:N,style:y,styleSpec:w,expressionContext:"property",propertyType:s,propertyKey:C}))}function Cu(l){return Jd(l,"paint")}function Xd(l){return Jd(l,"layout")}function Yd(l){let s=[],c=l.value,p=l.key,y=l.style,w=l.styleSpec;c.type||c.ref||s.push(new ct(p,c,'either "type" or "ref" is required'));let k=Jr(c.type),C=Jr(c.ref);if(c.id){let A=Jr(c.id);for(let D=0;D<l.arrayIndex;D++){let N=y.layers[D];Jr(N.id)===A&&s.push(new ct(p,c.id,`duplicate layer id "${c.id}", previously used at line ${N.id.__line__}`))}}if("ref"in c){let A;["type","source","source-layer","filter","layout"].forEach(D=>{D in c&&s.push(new ct(p,c[D],`"${D}" is prohibited for ref layers`))}),y.layers.forEach(D=>{Jr(D.id)===C&&(A=D)}),A?A.ref?s.push(new ct(p,c.ref,"ref cannot reference another ref layer")):k=Jr(A.type):s.push(new ct(p,c.ref,`ref layer "${C}" not found`))}else if(k!=="background")if(c.source){let A=y.sources&&y.sources[c.source],D=A&&Jr(A.type);A?D==="vector"&&k==="raster"?s.push(new ct(p,c.source,`layer "${c.id}" requires a raster source`)):D!=="raster-dem"&&k==="hillshade"?s.push(new ct(p,c.source,`layer "${c.id}" requires a raster-dem source`)):D==="raster"&&k!=="raster"?s.push(new ct(p,c.source,`layer "${c.id}" requires a vector source`)):D!=="vector"||c["source-layer"]?D==="raster-dem"&&k!=="hillshade"?s.push(new ct(p,c.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!c.paint||!c.paint["line-gradient"]||D==="geojson"&&A.lineMetrics||s.push(new ct(p,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new ct(p,c,`layer "${c.id}" must specify a "source-layer"`)):s.push(new ct(p,c.source,`source "${c.source}" not found`))}else s.push(new ct(p,c,'missing required property "source"'));return s=s.concat($o({key:p,value:c,valueSpec:w.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${p}.type`,value:c.type,valueSpec:w.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:c,objectKey:"type"}),filter:zl,layout:A=>$o({layer:c,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":D=>Xd(Lr({layerType:k},D))}}),paint:A=>$o({layer:c,key:A.key,value:A.value,style:A.style,styleSpec:A.styleSpec,validateSpec:A.validateSpec,objectElementValidators:{"*":D=>Cu(Lr({layerType:k},D))}})}})),s}function Ms(l){let s=l.value,c=l.key,p=rr(s);return p!=="string"?[new ct(c,s,`string expected, ${p} found`)]:[]}let Cf={promoteId:function({key:l,value:s}){if(rr(s)==="string")return Ms({key:l,value:s});{let c=[];for(let p in s)c.push(...Ms({key:`${l}.${p}`,value:s[p]}));return c}}};function Ef(l){let s=l.value,c=l.key,p=l.styleSpec,y=l.style,w=l.validateSpec;if(!s.type)return[new ct(c,s,'"type" is required')];let k=Jr(s.type),C;switch(k){case"vector":case"raster":return C=$o({key:c,value:s,valueSpec:p[`source_${k.replace("-","_")}`],style:l.style,styleSpec:p,objectElementValidators:Cf,validateSpec:w}),C;case"raster-dem":return C=function(A){var D;let N=(D=A.sourceName)!==null&&D!==void 0?D:"",O=A.value,j=A.styleSpec,W=j.source_raster_dem,K=A.style,ie=[],ae=rr(O);if(O===void 0)return ie;if(ae!=="object")return ie.push(new ct("source_raster_dem",O,`object expected, ${ae} found`)),ie;let pe=Jr(O.encoding)==="custom",Ie=["redFactor","greenFactor","blueFactor","baseShift"],ye=A.value.encoding?`"${A.value.encoding}"`:"Default";for(let Ee in O)!pe&&Ie.includes(Ee)?ie.push(new ct(Ee,O[Ee],`In "${N}": "${Ee}" is only valid when "encoding" is set to "custom". ${ye} encoding found`)):W[Ee]?ie=ie.concat(A.validateSpec({key:Ee,value:O[Ee],valueSpec:W[Ee],validateSpec:A.validateSpec,style:K,styleSpec:j})):ie.push(new ct(Ee,O[Ee],`unknown property "${Ee}"`));return ie}({sourceName:c,value:s,style:l.style,styleSpec:p,validateSpec:w}),C;case"geojson":if(C=$o({key:c,value:s,valueSpec:p.source_geojson,style:y,styleSpec:p,validateSpec:w,objectElementValidators:Cf}),s.cluster)for(let A in s.clusterProperties){let[D,N]=s.clusterProperties[A],O=typeof D=="string"?[D,["accumulated"],["get",A]]:D;C.push(...Fl({key:`${c}.${A}.map`,value:N,validateSpec:w,expressionContext:"cluster-map"})),C.push(...Fl({key:`${c}.${A}.reduce`,value:O,validateSpec:w,expressionContext:"cluster-reduce"}))}return C;case"video":return $o({key:c,value:s,valueSpec:p.source_video,style:y,validateSpec:w,styleSpec:p});case"image":return $o({key:c,value:s,valueSpec:p.source_image,style:y,validateSpec:w,styleSpec:p});case"canvas":return[new ct(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Na({key:`${c}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:w,styleSpec:p})}}function Tf(l){let s=l.value,c=l.styleSpec,p=c.light,y=l.style,w=[],k=rr(s);if(s===void 0)return w;if(k!=="object")return w=w.concat([new ct("light",s,`object expected, ${k} found`)]),w;for(let C in s){let A=C.match(/^(.*)-transition$/);w=w.concat(A&&p[A[1]]&&p[A[1]].transition?l.validateSpec({key:C,value:s[C],valueSpec:c.transition,validateSpec:l.validateSpec,style:y,styleSpec:c}):p[C]?l.validateSpec({key:C,value:s[C],valueSpec:p[C],validateSpec:l.validateSpec,style:y,styleSpec:c}):[new ct(C,s[C],`unknown property "${C}"`)])}return w}function Mf(l){let s=l.value,c=l.styleSpec,p=c.sky,y=l.style,w=rr(s);if(s===void 0)return[];if(w!=="object")return[new ct("sky",s,`object expected, ${w} found`)];let k=[];for(let C in s)k=k.concat(p[C]?Ln({key:C,value:s[C],valueSpec:p[C],style:y,styleSpec:c}):[new ct(C,s[C],`unknown property "${C}"`)]);return k}function Af(l){let s=l.value,c=l.styleSpec,p=c.terrain,y=l.style,w=[],k=rr(s);if(s===void 0)return w;if(k!=="object")return w=w.concat([new ct("terrain",s,`object expected, ${k} found`)]),w;for(let C in s)w=w.concat(p[C]?l.validateSpec({key:C,value:s[C],valueSpec:p[C],validateSpec:l.validateSpec,style:y,styleSpec:c}):[new ct(C,s[C],`unknown property "${C}"`)]);return w}function mc(l){let s=[],c=l.value,p=l.key;if(Array.isArray(c)){let y=[],w=[];for(let k in c)c[k].id&&y.includes(c[k].id)&&s.push(new ct(p,c,`all the sprites' ids must be unique, but ${c[k].id} is duplicated`)),y.push(c[k].id),c[k].url&&w.includes(c[k].url)&&s.push(new ct(p,c,`all the sprites' URLs must be unique, but ${c[k].url} is duplicated`)),w.push(c[k].url),s=s.concat($o({key:`${p}[${k}]`,value:c[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return s}return Ms({key:p,value:c})}let gc={"*":()=>[],array:Ll,boolean:function(l){let s=l.value,c=l.key,p=rr(s);return p!=="boolean"?[new ct(c,s,`boolean expected, ${p} found`)]:[]},number:Zd,color:function(l){let s=l.key,c=l.value,p=rr(c);return p!=="string"?[new ct(s,c,`color expected, ${p} found`)]:ir.parse(String(c))?[]:[new ct(s,c,`color expected, "${c}" found`)]},constants:Sf,enum:Na,filter:zl,function:Kd,layer:Yd,object:$o,source:Ef,light:Tf,sky:Mf,terrain:Af,string:Ms,formatted:function(l){return Ms(l).length===0?[]:Fl(l)},resolvedImage:function(l){return Ms(l).length===0?[]:Fl(l)},padding:function(l){let s=l.key,c=l.value;if(rr(c)==="array"){if(c.length<1||c.length>4)return[new ct(s,c,`padding requires 1 to 4 values; ${c.length} values found`)];let p={type:"number"},y=[];for(let w=0;w<c.length;w++)y=y.concat(l.validateSpec({key:`${s}[${w}]`,value:c[w],validateSpec:l.validateSpec,valueSpec:p}));return y}return Zd({key:s,value:c,valueSpec:{}})},variableAnchorOffsetCollection:function(l){let s=l.key,c=l.value,p=rr(c),y=l.styleSpec;if(p!=="array"||c.length<1||c.length%2!=0)return[new ct(s,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let k=0;k<c.length;k+=2)w=w.concat(Na({key:`${s}[${k}]`,value:c[k],valueSpec:y.layout_symbol["text-anchor"]})),w=w.concat(Ll({key:`${s}[${k+1}]`,value:c[k+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:y}));return w},sprite:mc};function Ln(l){let s=l.value,c=l.valueSpec,p=l.styleSpec;return l.validateSpec=Ln,c.expression&&Il(Jr(s))?Kd(l):c.expression&&Er(ma(s))?Fl(l):c.type&&gc[c.type]?gc[c.type](l):$o(Lr({},l,{valueSpec:c.type?p[c.type]:c}))}function Nl(l){let s=l.value,c=l.key,p=Ms(l);return p.length||(s.indexOf("{fontstack}")===-1&&p.push(new ct(c,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&p.push(new ct(c,s,'"glyphs" url must include a "{range}" token'))),p}function us(l,s=Ue){let c=[];return c=c.concat(Ln({key:"",value:l,valueSpec:s.$root,styleSpec:s,style:l,validateSpec:Ln,objectElementValidators:{glyphs:Nl,"*":()=>[]}})),l.constants&&(c=c.concat(Sf({key:"constants",value:l.constants,style:l,styleSpec:s,validateSpec:Ln}))),If(c)}function As(l){return function(s){return l({...s,validateSpec:Ln})}}function If(l){return[].concat(l).sort((s,c)=>s.line-c.line)}function To(l){return function(...s){return If(l.apply(this,s))}}us.source=To(As(Ef)),us.sprite=To(As(mc)),us.glyphs=To(As(Nl)),us.light=To(As(Tf)),us.sky=To(As(Mf)),us.terrain=To(As(Af)),us.layer=To(As(Yd)),us.filter=To(As(zl)),us.paintProperty=To(As(Cu)),us.layoutProperty=To(As(Xd));let Ol=us,eh=Ol.light,m1=Ol.paintProperty,th=Ol.layoutProperty;function Pf(l,s){let c=!1;if(s&&s.length)for(let p of s)l.fire(new lt(new Error(p.message))),c=!0;return c}class Js{constructor(s,c,p){let y=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;let k=new Int32Array(this.arrayBuffer);s=k[0],this.d=(c=k[1])+2*(p=k[2]);for(let A=0;A<this.d*this.d;A++){let D=k[3+A],N=k[3+A+1];y.push(D===N?null:k.subarray(D,N))}let C=k[3+y.length+1];this.keys=k.subarray(k[3+y.length],C),this.bboxes=k.subarray(C),this.insert=this._insertReadonly}else{this.d=c+2*p;for(let k=0;k<this.d*this.d;k++)y.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=s,this.padding=p,this.scale=c/s,this.uid=0;let w=p/c*s;this.min=-w,this.max=s+w}insert(s,c,p,y,w){this._forEachCell(c,p,y,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,c,p,y,w,k){this.cells[w].push(k)}query(s,c,p,y,w){let k=this.min,C=this.max;if(s<=k&&c<=k&&C<=p&&C<=y&&!w)return Array.prototype.slice.call(this.keys);{let A=[];return this._forEachCell(s,c,p,y,this._queryCell,A,{},w),A}}_queryCell(s,c,p,y,w,k,C,A){let D=this.cells[w];if(D!==null){let N=this.keys,O=this.bboxes;for(let j=0;j<D.length;j++){let W=D[j];if(C[W]===void 0){let K=4*W;(A?A(O[K+0],O[K+1],O[K+2],O[K+3]):s<=O[K+2]&&c<=O[K+3]&&p>=O[K+0]&&y>=O[K+1])?(C[W]=!0,k.push(N[W])):C[W]=!1}}}}_forEachCell(s,c,p,y,w,k,C,A){let D=this._convertToCellCoord(s),N=this._convertToCellCoord(c),O=this._convertToCellCoord(p),j=this._convertToCellCoord(y);for(let W=D;W<=O;W++)for(let K=N;K<=j;K++){let ie=this.d*K+W;if((!A||A(this._convertFromCellCoord(W),this._convertFromCellCoord(K),this._convertFromCellCoord(W+1),this._convertFromCellCoord(K+1)))&&w.call(this,s,c,p,y,ie,k,C,A))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let s=this.cells,c=3+this.cells.length+1+1,p=0;for(let k=0;k<this.cells.length;k++)p+=this.cells[k].length;let y=new Int32Array(c+p+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let w=c;for(let k=0;k<s.length;k++){let C=s[k];y[3+k]=w,y.set(C,w),w+=C.length}return y[3+s.length]=w,y.set(this.keys,w),w+=this.keys.length,y[3+s.length+1]=w,y.set(this.bboxes,w),w+=this.bboxes.length,y.buffer}static serialize(s,c){let p=s.toArrayBuffer();return c&&c.push(p),{buffer:p}}static deserialize(s){return new Js(s.buffer)}}let ga={};function Bt(l,s,c={}){if(ga[l])throw new Error(`${l} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:l,writeable:!1}),ga[l]={klass:s,omit:c.omit||[],shallow:c.shallow||[]}}Bt("Object",Object),Bt("TransferableGridIndex",Js),Bt("Color",ir),Bt("Error",Error),Bt("AJAXError",ti),Bt("ResolvedImage",Jn),Bt("StylePropertyFunction",xu),Bt("StyleExpression",pc,{omit:["_evaluator"]}),Bt("ZoomDependentExpression",_u),Bt("ZoomConstantExpression",Pl),Bt("CompoundExpression",Ar,{omit:["_evaluate"]});for(let l in Tl)Tl[l]._classRegistryKey||Bt(`Expression_${l}`,Tl[l]);function ih(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Oa(l,s){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error)return l;if(ih(l)||dt(l))return s&&s.push(l),l;if(ArrayBuffer.isView(l)){let c=l;return s&&s.push(c.buffer),c}if(l instanceof ImageData)return s&&s.push(l.data.buffer),l;if(Array.isArray(l)){let c=[];for(let p of l)c.push(Oa(p,s));return c}if(typeof l=="object"){let c=l.constructor,p=c._classRegistryKey;if(!p)throw new Error(`can't serialize object of unregistered class ${c.name}`);if(!ga[p])throw new Error(`${p} is not registered.`);let y=c.serialize?c.serialize(l,s):{};if(c.serialize){if(s&&y===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let w in l){if(!l.hasOwnProperty(w)||ga[p].omit.indexOf(w)>=0)continue;let k=l[w];y[w]=ga[p].shallow.indexOf(w)>=0?k:Oa(k,s)}l instanceof Error&&(y.message=l.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(y.$name=p),y}throw new Error("can't serialize object of type "+typeof l)}function Bl(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||ih(l)||dt(l)||ArrayBuffer.isView(l)||l instanceof ImageData)return l;if(Array.isArray(l))return l.map(Bl);if(typeof l=="object"){let s=l.$name||"Object";if(!ga[s])throw new Error(`can't deserialize unregistered class ${s}`);let{klass:c}=ga[s];if(!c)throw new Error(`can't deserialize unregistered class ${s}`);if(c.deserialize)return c.deserialize(l);let p=Object.create(c.prototype);for(let y of Object.keys(l)){if(y==="$name")continue;let w=l[y];p[y]=ga[s].shallow.indexOf(y)>=0?w:Bl(w)}return p}throw new Error("can't deserialize object of type "+typeof l)}class rh{constructor(){this.first=!0}update(s,c){let p=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=c),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=p,!0))}}let Ft={"Latin-1 Supplement":l=>l>=128&&l<=255,Arabic:l=>l>=1536&&l<=1791,"Arabic Supplement":l=>l>=1872&&l<=1919,"Arabic Extended-A":l=>l>=2208&&l<=2303,"Hangul Jamo":l=>l>=4352&&l<=4607,"Unified Canadian Aboriginal Syllabics":l=>l>=5120&&l<=5759,Khmer:l=>l>=6016&&l<=6143,"Unified Canadian Aboriginal Syllabics Extended":l=>l>=6320&&l<=6399,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"CJK Radicals Supplement":l=>l>=11904&&l<=12031,"Kangxi Radicals":l=>l>=12032&&l<=12255,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Bopomofo:l=>l>=12544&&l<=12591,"Hangul Compatibility Jamo":l=>l>=12592&&l<=12687,Kanbun:l=>l>=12688&&l<=12703,"Bopomofo Extended":l=>l>=12704&&l<=12735,"CJK Strokes":l=>l>=12736&&l<=12783,"Katakana Phonetic Extensions":l=>l>=12784&&l<=12799,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"CJK Unified Ideographs Extension A":l=>l>=13312&&l<=19903,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Yi Syllables":l=>l>=40960&&l<=42127,"Yi Radicals":l=>l>=42128&&l<=42191,"Hangul Jamo Extended-A":l=>l>=43360&&l<=43391,"Hangul Syllables":l=>l>=44032&&l<=55215,"Hangul Jamo Extended-B":l=>l>=55216&&l<=55295,"Private Use Area":l=>l>=57344&&l<=63743,"CJK Compatibility Ideographs":l=>l>=63744&&l<=64255,"Arabic Presentation Forms-A":l=>l>=64336&&l<=65023,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Arabic Presentation Forms-B":l=>l>=65136&&l<=65279,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function yc(l){for(let s of l)if(Tu(s.charCodeAt(0)))return!0;return!1}function Eu(l){for(let s of l)if(!Df(s.charCodeAt(0)))return!1;return!0}function Df(l){return!(Ft.Arabic(l)||Ft["Arabic Supplement"](l)||Ft["Arabic Extended-A"](l)||Ft["Arabic Presentation Forms-A"](l)||Ft["Arabic Presentation Forms-B"](l))}function Tu(l){return!(l!==746&&l!==747&&(l<4352||!(Ft["Bopomofo Extended"](l)||Ft.Bopomofo(l)||Ft["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Ft["CJK Compatibility Ideographs"](l)||Ft["CJK Compatibility"](l)||Ft["CJK Radicals Supplement"](l)||Ft["CJK Strokes"](l)||!(!Ft["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Ft["CJK Unified Ideographs Extension A"](l)||Ft["CJK Unified Ideographs"](l)||Ft["Enclosed CJK Letters and Months"](l)||Ft["Hangul Compatibility Jamo"](l)||Ft["Hangul Jamo Extended-A"](l)||Ft["Hangul Jamo Extended-B"](l)||Ft["Hangul Jamo"](l)||Ft["Hangul Syllables"](l)||Ft.Hiragana(l)||Ft["Ideographic Description Characters"](l)||Ft.Kanbun(l)||Ft["Kangxi Radicals"](l)||Ft["Katakana Phonetic Extensions"](l)||Ft.Katakana(l)&&l!==12540||!(!Ft["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Ft["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Ft["Unified Canadian Aboriginal Syllabics"](l)||Ft["Unified Canadian Aboriginal Syllabics Extended"](l)||Ft["Vertical Forms"](l)||Ft["Yijing Hexagram Symbols"](l)||Ft["Yi Syllables"](l)||Ft["Yi Radicals"](l))))}function nh(l){return!(Tu(l)||function(s){return!!(Ft["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ft["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ft["Letterlike Symbols"](s)||Ft["Number Forms"](s)||Ft["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ft["Control Pictures"](s)&&s!==9251||Ft["Optical Character Recognition"](s)||Ft["Enclosed Alphanumerics"](s)||Ft["Geometric Shapes"](s)||Ft["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ft["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ft["CJK Symbols and Punctuation"](s)||Ft.Katakana(s)||Ft["Private Use Area"](s)||Ft["CJK Compatibility Forms"](s)||Ft["Small Form Variants"](s)||Ft["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(l))}function oh(l){return l>=1424&&l<=2303||Ft["Arabic Presentation Forms-A"](l)||Ft["Arabic Presentation Forms-B"](l)}function sh(l,s){return!(!s&&oh(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Ft.Khmer(l))}function Lf(l){for(let s of l)if(oh(s.charCodeAt(0)))return!0;return!1}let Ba=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ir{constructor(s,c){this.zoom=s,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.zoomHistory=c.zoomHistory,this.transition=c.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rh,this.transition={})}isSupportedScript(s){return function(c,p){for(let y of c)if(!sh(y.charCodeAt(0),p))return!1;return!0}(s,Ba.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let s=this.zoom,c=s-Math.floor(s),p=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*c}}}class Mu{constructor(s,c){this.property=s,this.value=c,this.expression=function(p,y){if(Il(p))return new xu(p,y);if(Er(p)){let w=vf(p,y);if(w.result==="error")throw new Error(w.value.map(k=>`${k.key}: ${k.message}`).join(", "));return w.value}{let w=p;return y.type==="color"&&typeof p=="string"?w=ir.parse(p):y.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(w=hn.parse(p)):w=Dn.parse(p),{kind:"constant",evaluate:()=>w}}}(c===void 0?s.specification.default:c,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,c,p){return this.property.possiblyEvaluate(this,s,c,p)}}class Au{constructor(s){this.property=s,this.value=new Mu(s,void 0)}transitioned(s,c){return new lh(this.property,this.value,c,je({},s.transition,this.transition),s.now)}untransitioned(){return new lh(this.property,this.value,null,{},0)}}class ah{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return we(this._values[s].value.value)}setValue(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Au(this._values[s].property)),this._values[s].value=new Mu(this._values[s].property,c===null?void 0:we(c))}getTransition(s){return we(this._values[s].transition)}setTransition(s,c){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Au(this._values[s].property)),this._values[s].transition=we(c)||void 0}serialize(){let s={};for(let c of Object.keys(this._values)){let p=this.getValue(c);p!==void 0&&(s[c]=p);let y=this.getTransition(c);y!==void 0&&(s[`${c}-transition`]=y)}return s}transitioned(s,c){let p=new Ff(this._properties);for(let y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(s,c._values[y]);return p}untransitioned(){let s=new Ff(this._properties);for(let c of Object.keys(this._values))s._values[c]=this._values[c].untransitioned();return s}}class lh{constructor(s,c,p,y,w){this.property=s,this.value=c,this.begin=w+y.delay||0,this.end=this.begin+y.duration||0,s.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(s,c,p){let y=s.now||0,w=this.value.possiblyEvaluate(s,c,p),k=this.prior;if(k){if(y>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(y<this.begin)return k.possiblyEvaluate(s,c,p);{let C=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(s,c,p),w,function(A){if(A<=0)return 0;if(A>=1)return 1;let D=A*A,N=D*A;return 4*(A<.5?N:3*(A-D)+N-.75)}(C))}}return w}}class Ff{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,c,p){let y=new bc(this._properties);for(let w of Object.keys(this._values))y._values[w]=this._values[w].possiblyEvaluate(s,c,p);return y}hasTransition(){for(let s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class g1{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return we(this._values[s].value)}setValue(s,c){this._values[s]=new Mu(this._values[s].property,c===null?void 0:we(c))}serialize(){let s={};for(let c of Object.keys(this._values)){let p=this.getValue(c);p!==void 0&&(s[c]=p)}return s}possiblyEvaluate(s,c,p){let y=new bc(this._properties);for(let w of Object.keys(this._values))y._values[w]=this._values[w].possiblyEvaluate(s,c,p);return y}}class fs{constructor(s,c,p){this.property=s,this.value=c,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,c,p,y){return this.property.evaluate(this.value,this.parameters,s,c,p,y)}}class bc{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class ii{constructor(s){this.specification=s}possiblyEvaluate(s,c){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(c)}interpolate(s,c,p){let y=$n[this.specification.type];return y?y(s,c,p):s}}class li{constructor(s,c){this.specification=s,this.overrides=c}possiblyEvaluate(s,c,p,y){return new fs(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(c,null,{},p,y)}:s.expression,c)}interpolate(s,c,p){if(s.value.kind!=="constant"||c.value.kind!=="constant")return s;if(s.value.value===void 0||c.value.value===void 0)return new fs(this,{kind:"constant",value:void 0},s.parameters);let y=$n[this.specification.type];if(y){let w=y(s.value.value,c.value.value,p);return new fs(this,{kind:"constant",value:w},s.parameters)}return s}evaluate(s,c,p,y,w,k){return s.kind==="constant"?s.value:s.evaluate(c,p,y,w,k)}}class Ra extends li{possiblyEvaluate(s,c,p,y){if(s.value===void 0)return new fs(this,{kind:"constant",value:void 0},c);if(s.expression.kind==="constant"){let w=s.expression.evaluate(c,null,{},p,y),k=s.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,C=this._calculate(k,k,k,c);return new fs(this,{kind:"constant",value:C},c)}if(s.expression.kind==="camera"){let w=this._calculate(s.expression.evaluate({zoom:c.zoom-1}),s.expression.evaluate({zoom:c.zoom}),s.expression.evaluate({zoom:c.zoom+1}),c);return new fs(this,{kind:"constant",value:w},c)}return new fs(this,s.expression,c)}evaluate(s,c,p,y,w,k){if(s.kind==="source"){let C=s.evaluate(c,p,y,w,k);return this._calculate(C,C,C,c)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(c.zoom)-1},p,y),s.evaluate({zoom:Math.floor(c.zoom)},p,y),s.evaluate({zoom:Math.floor(c.zoom)+1},p,y),c):s.value}_calculate(s,c,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:p,to:c}}interpolate(s){return s}}class ch{constructor(s){this.specification=s}possiblyEvaluate(s,c,p,y){if(s.value!==void 0){if(s.expression.kind==="constant"){let w=s.expression.evaluate(c,null,{},p,y);return this._calculate(w,w,w,c)}return this._calculate(s.expression.evaluate(new Ir(Math.floor(c.zoom-1),c)),s.expression.evaluate(new Ir(Math.floor(c.zoom),c)),s.expression.evaluate(new Ir(Math.floor(c.zoom+1),c)),c)}}_calculate(s,c,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:c}:{from:p,to:c}}interpolate(s){return s}}class vc{constructor(s){this.specification=s}possiblyEvaluate(s,c,p,y){return!!s.expression.evaluate(c,null,{},p,y)}interpolate(){return!1}}class Mo{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let c in s){let p=s[c];p.specification.overridable&&this.overridableProperties.push(c);let y=this.defaultPropertyValues[c]=new Mu(p,void 0),w=this.defaultTransitionablePropertyValues[c]=new Au(p);this.defaultTransitioningPropertyValues[c]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=y.possiblyEvaluate({})}}}Bt("DataDrivenProperty",li),Bt("DataConstantProperty",ii),Bt("CrossFadedDataDrivenProperty",Ra),Bt("CrossFadedProperty",ch),Bt("ColorRampProperty",vc);let zf="-transition";class ms extends _i{constructor(s,c){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),c.layout&&(this._unevaluatedLayout=new g1(c.layout)),c.paint)){this._transitionablePaint=new ah(c.paint);for(let p in s.paint)this.setPaintProperty(p,s.paint[p],{validate:!1});for(let p in s.layout)this.setLayoutProperty(p,s.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new bc(c.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,c,p={}){c!=null&&this._validate(th,`layers.${this.id}.layout.${s}`,s,c,p)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,c):this.visibility=c)}getPaintProperty(s){return s.endsWith(zf)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,c,p={}){if(c!=null&&this._validate(m1,`layers.${this.id}.paint.${s}`,s,c,p))return!1;if(s.endsWith(zf))return this._transitionablePaint.setTransition(s.slice(0,-11),c||void 0),!1;{let y=this._transitionablePaint._values[s],w=y.property.specification["property-type"]==="cross-faded-data-driven",k=y.value.isDataDriven(),C=y.value;this._transitionablePaint.setValue(s,c),this._handleSpecialPaintPropertyUpdate(s);let A=this._transitionablePaint._values[s].value;return A.isDataDriven()||k||w||this._handleOverridablePaintPropertyUpdate(s,C,A)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,c,p){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,c){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,c)}serialize(){let s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Le(s,(c,p)=>!(c===void 0||p==="layout"&&!Object.keys(c).length||p==="paint"&&!Object.keys(c).length))}_validate(s,c,p,y,w={}){return(!w||w.validate!==!1)&&Pf(this,s.call(Ol,{key:c,layerType:this.type,objectKey:p,value:y,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let s in this.paint._values){let c=this.paint.get(s);if(c instanceof fs&&Al(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}let Nf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Rl{constructor(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class $r{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,c){return s._trim(),c&&(s.isTransferred=!0,c.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){let c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function an(l,s=1){let c=0,p=0;return{members:l.map(y=>{let w=Nf[y.type].BYTES_PER_ELEMENT,k=c=Of(c,Math.max(s,w)),C=y.components||1;return p=Math.max(p,w),c+=w*C,{name:y.name,type:y.type,components:C,offset:k}}),size:Of(c,Math.max(p,s)),alignment:s}}function Of(l,s){return Math.ceil(l/s)*s}class _c extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c){let p=this.length;return this.resize(p+1),this.emplace(p,s,c)}emplace(s,c,p){let y=2*s;return this.int16[y+0]=c,this.int16[y+1]=p,s}}_c.prototype.bytesPerElement=4,Bt("StructArrayLayout2i4",_c);class Iu extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,p){let y=this.length;return this.resize(y+1),this.emplace(y,s,c,p)}emplace(s,c,p,y){let w=3*s;return this.int16[w+0]=c,this.int16[w+1]=p,this.int16[w+2]=y,s}}Iu.prototype.bytesPerElement=6,Bt("StructArrayLayout3i6",Iu);class ya extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,p,y){let w=this.length;return this.resize(w+1),this.emplace(w,s,c,p,y)}emplace(s,c,p,y,w){let k=4*s;return this.int16[k+0]=c,this.int16[k+1]=p,this.int16[k+2]=y,this.int16[k+3]=w,s}}ya.prototype.bytesPerElement=8,Bt("StructArrayLayout4i8",ya);class uh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k){let C=this.length;return this.resize(C+1),this.emplace(C,s,c,p,y,w,k)}emplace(s,c,p,y,w,k,C){let A=6*s;return this.int16[A+0]=c,this.int16[A+1]=p,this.int16[A+2]=y,this.int16[A+3]=w,this.int16[A+4]=k,this.int16[A+5]=C,s}}uh.prototype.bytesPerElement=12,Bt("StructArrayLayout2i4i12",uh);class dh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k){let C=this.length;return this.resize(C+1),this.emplace(C,s,c,p,y,w,k)}emplace(s,c,p,y,w,k,C){let A=4*s,D=8*s;return this.int16[A+0]=c,this.int16[A+1]=p,this.uint8[D+4]=y,this.uint8[D+5]=w,this.uint8[D+6]=k,this.uint8[D+7]=C,s}}dh.prototype.bytesPerElement=8,Bt("StructArrayLayout2i4ub8",dh);class xc extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c){let p=this.length;return this.resize(p+1),this.emplace(p,s,c)}emplace(s,c,p){let y=2*s;return this.float32[y+0]=c,this.float32[y+1]=p,s}}xc.prototype.bytesPerElement=8,Bt("StructArrayLayout2f8",xc);class hh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k,C,A,D,N){let O=this.length;return this.resize(O+1),this.emplace(O,s,c,p,y,w,k,C,A,D,N)}emplace(s,c,p,y,w,k,C,A,D,N,O){let j=10*s;return this.uint16[j+0]=c,this.uint16[j+1]=p,this.uint16[j+2]=y,this.uint16[j+3]=w,this.uint16[j+4]=k,this.uint16[j+5]=C,this.uint16[j+6]=A,this.uint16[j+7]=D,this.uint16[j+8]=N,this.uint16[j+9]=O,s}}hh.prototype.bytesPerElement=20,Bt("StructArrayLayout10ui20",hh);class Pu extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k,C,A,D,N,O,j){let W=this.length;return this.resize(W+1),this.emplace(W,s,c,p,y,w,k,C,A,D,N,O,j)}emplace(s,c,p,y,w,k,C,A,D,N,O,j,W){let K=12*s;return this.int16[K+0]=c,this.int16[K+1]=p,this.int16[K+2]=y,this.int16[K+3]=w,this.uint16[K+4]=k,this.uint16[K+5]=C,this.uint16[K+6]=A,this.uint16[K+7]=D,this.int16[K+8]=N,this.int16[K+9]=O,this.int16[K+10]=j,this.int16[K+11]=W,s}}Pu.prototype.bytesPerElement=24,Bt("StructArrayLayout4i4ui4i24",Pu);class ph extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,p){let y=this.length;return this.resize(y+1),this.emplace(y,s,c,p)}emplace(s,c,p,y){let w=3*s;return this.float32[w+0]=c,this.float32[w+1]=p,this.float32[w+2]=y,s}}ph.prototype.bytesPerElement=12,Bt("StructArrayLayout3f12",ph);class fh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){let c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint32[1*s+0]=c,s}}fh.prototype.bytesPerElement=4,Bt("StructArrayLayout1ul4",fh);class Xs extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k,C,A,D){let N=this.length;return this.resize(N+1),this.emplace(N,s,c,p,y,w,k,C,A,D)}emplace(s,c,p,y,w,k,C,A,D,N){let O=10*s,j=5*s;return this.int16[O+0]=c,this.int16[O+1]=p,this.int16[O+2]=y,this.int16[O+3]=w,this.int16[O+4]=k,this.int16[O+5]=C,this.uint32[j+3]=A,this.uint16[O+8]=D,this.uint16[O+9]=N,s}}Xs.prototype.bytesPerElement=20,Bt("StructArrayLayout6i1ul2ui20",Xs);class Du extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k){let C=this.length;return this.resize(C+1),this.emplace(C,s,c,p,y,w,k)}emplace(s,c,p,y,w,k,C){let A=6*s;return this.int16[A+0]=c,this.int16[A+1]=p,this.int16[A+2]=y,this.int16[A+3]=w,this.int16[A+4]=k,this.int16[A+5]=C,s}}Du.prototype.bytesPerElement=12,Bt("StructArrayLayout2i2i2i12",Du);class wc extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w){let k=this.length;return this.resize(k+1),this.emplace(k,s,c,p,y,w)}emplace(s,c,p,y,w,k){let C=4*s,A=8*s;return this.float32[C+0]=c,this.float32[C+1]=p,this.float32[C+2]=y,this.int16[A+6]=w,this.int16[A+7]=k,s}}wc.prototype.bytesPerElement=16,Bt("StructArrayLayout2f1f2i16",wc);class Lu extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,p,y){let w=this.length;return this.resize(w+1),this.emplace(w,s,c,p,y)}emplace(s,c,p,y,w){let k=12*s,C=3*s;return this.uint8[k+0]=c,this.uint8[k+1]=p,this.float32[C+1]=y,this.float32[C+2]=w,s}}Lu.prototype.bytesPerElement=12,Bt("StructArrayLayout2ub2f12",Lu);class Ul extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,p){let y=this.length;return this.resize(y+1),this.emplace(y,s,c,p)}emplace(s,c,p,y){let w=3*s;return this.uint16[w+0]=c,this.uint16[w+1]=p,this.uint16[w+2]=y,s}}Ul.prototype.bytesPerElement=6,Bt("StructArrayLayout3ui6",Ul);class mh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie,ae,pe){let Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie,ae,pe)}emplace(s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie,ae,pe,Ie){let ye=24*s,Ee=12*s,Ge=48*s;return this.int16[ye+0]=c,this.int16[ye+1]=p,this.uint16[ye+2]=y,this.uint16[ye+3]=w,this.uint32[Ee+2]=k,this.uint32[Ee+3]=C,this.uint32[Ee+4]=A,this.uint16[ye+10]=D,this.uint16[ye+11]=N,this.uint16[ye+12]=O,this.float32[Ee+7]=j,this.float32[Ee+8]=W,this.uint8[Ge+36]=K,this.uint8[Ge+37]=ie,this.uint8[Ge+38]=ae,this.uint32[Ee+10]=pe,this.int16[ye+22]=Ie,s}}mh.prototype.bytesPerElement=48,Bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",mh);class Vl extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie,ae,pe,Ie,ye,Ee,Ge,et,Lt,Xt,Pt,Tt,wt,Ht){let Ct=this.length;return this.resize(Ct+1),this.emplace(Ct,s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie,ae,pe,Ie,ye,Ee,Ge,et,Lt,Xt,Pt,Tt,wt,Ht)}emplace(s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie,ae,pe,Ie,ye,Ee,Ge,et,Lt,Xt,Pt,Tt,wt,Ht,Ct){let mt=32*s,si=16*s;return this.int16[mt+0]=c,this.int16[mt+1]=p,this.int16[mt+2]=y,this.int16[mt+3]=w,this.int16[mt+4]=k,this.int16[mt+5]=C,this.int16[mt+6]=A,this.int16[mt+7]=D,this.uint16[mt+8]=N,this.uint16[mt+9]=O,this.uint16[mt+10]=j,this.uint16[mt+11]=W,this.uint16[mt+12]=K,this.uint16[mt+13]=ie,this.uint16[mt+14]=ae,this.uint16[mt+15]=pe,this.uint16[mt+16]=Ie,this.uint16[mt+17]=ye,this.uint16[mt+18]=Ee,this.uint16[mt+19]=Ge,this.uint16[mt+20]=et,this.uint16[mt+21]=Lt,this.uint16[mt+22]=Xt,this.uint32[si+12]=Pt,this.float32[si+13]=Tt,this.float32[si+14]=wt,this.uint16[mt+30]=Ht,this.uint16[mt+31]=Ct,s}}Vl.prototype.bytesPerElement=64,Bt("StructArrayLayout8i15ui1ul2f2ui64",Vl);class ba extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){let c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.float32[1*s+0]=c,s}}ba.prototype.bytesPerElement=4,Bt("StructArrayLayout1f4",ba);class gh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,p){let y=this.length;return this.resize(y+1),this.emplace(y,s,c,p)}emplace(s,c,p,y){let w=3*s;return this.uint16[6*s+0]=c,this.float32[w+1]=p,this.float32[w+2]=y,s}}gh.prototype.bytesPerElement=12,Bt("StructArrayLayout1ui2f12",gh);class Fu extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,p){let y=this.length;return this.resize(y+1),this.emplace(y,s,c,p)}emplace(s,c,p,y){let w=4*s;return this.uint32[2*s+0]=c,this.uint16[w+2]=p,this.uint16[w+3]=y,s}}Fu.prototype.bytesPerElement=8,Bt("StructArrayLayout1ul2ui8",Fu);class Ua extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c){let p=this.length;return this.resize(p+1),this.emplace(p,s,c)}emplace(s,c,p){let y=2*s;return this.uint16[y+0]=c,this.uint16[y+1]=p,s}}Ua.prototype.bytesPerElement=4,Bt("StructArrayLayout2ui4",Ua);class yh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){let c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint16[1*s+0]=c,s}}yh.prototype.bytesPerElement=2,Bt("StructArrayLayout1ui2",yh);class bh extends $r{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,p,y){let w=this.length;return this.resize(w+1),this.emplace(w,s,c,p,y)}emplace(s,c,p,y,w){let k=4*s;return this.float32[k+0]=c,this.float32[k+1]=p,this.float32[k+2]=y,this.float32[k+3]=w,s}}bh.prototype.bytesPerElement=16,Bt("StructArrayLayout4f16",bh);class vh extends Rl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}vh.prototype.size=20;class Bf extends Xs{get(s){return new vh(this,s)}}Bt("CollisionBoxArray",Bf);class v extends Rl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}v.prototype.size=48;class a extends mh{get(s){return new v(this,s)}}Bt("PlacedSymbolArray",a);class d extends Rl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}d.prototype.size=64;class f extends Vl{get(s){return new d(this,s)}}Bt("SymbolInstanceArray",f);class g extends ba{getoffsetX(s){return this.float32[1*s+0]}}Bt("GlyphOffsetArray",g);class x extends Iu{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Bt("SymbolLineVertexArray",x);class E extends Rl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}E.prototype.size=12;class M extends gh{get(s){return new E(this,s)}}Bt("TextAnchorOffsetArray",M);class I extends Rl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}I.prototype.size=8;class z extends Fu{get(s){return new I(this,s)}}Bt("FeatureIndexArray",z);class B extends _c{}class U extends _c{}class Z extends _c{}class se extends uh{}class oe extends dh{}class le extends xc{}class te extends hh{}class ve extends Pu{}class Oe extends ph{}class he extends fh{}class Te extends Du{}class Re extends Lu{}class Ve extends Ul{}class Qe extends Ua{}let at=an([{name:"a_pos",components:2,type:"Int16"}],4),{members:it}=at;class ot{constructor(s=[]){this.segments=s}prepareSegment(s,c,p,y){let w=this.segments[this.segments.length-1];return s>ot.MAX_VERTEX_ARRAY_LENGTH&&He(`Max vertices per segment is ${ot.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!w||w.vertexLength+s>ot.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==y)&&(w={vertexOffset:c.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},y!==void 0&&(w.sortKey=y),this.segments.push(w)),w}get(){return this.segments}destroy(){for(let s of this.segments)for(let c in s.vaos)s.vaos[c].destroy()}static simpleSegment(s,c,p,y){return new ot([{vertexOffset:s,primitiveOffset:c,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}function Nt(l,s){return 256*(l=fe(Math.floor(l),0,255))+fe(Math.floor(s),0,255)}ot.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Bt("SegmentVector",ot);let Mi=an([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var St={exports:{}},ui={exports:{}};ui.exports=function(l,s){var c,p,y,w,k,C,A,D;for(p=l.length-(c=3&l.length),y=s,k=3432918353,C=461845907,D=0;D<p;)A=255&l.charCodeAt(D)|(255&l.charCodeAt(++D))<<8|(255&l.charCodeAt(++D))<<16|(255&l.charCodeAt(++D))<<24,++D,y=27492+(65535&(w=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*k+(((A>>>16)*k&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(A=0,c){case 3:A^=(255&l.charCodeAt(D+2))<<16;case 2:A^=(255&l.charCodeAt(D+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&l.charCodeAt(D)))*k+(((A>>>16)*k&65535)<<16)&4294967295)<<15|A>>>17))*C+(((A>>>16)*C&65535)<<16)&4294967295}return y^=l.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Ai=ui.exports,$i={exports:{}};$i.exports=function(l,s){for(var c,p=l.length,y=s^p,w=0;p>=4;)c=1540483477*(65535&(c=255&l.charCodeAt(w)|(255&l.charCodeAt(++w))<<8|(255&l.charCodeAt(++w))<<16|(255&l.charCodeAt(++w))<<24))+((1540483477*(c>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),p-=4,++w;switch(p){case 3:y^=(255&l.charCodeAt(w+2))<<16;case 2:y^=(255&l.charCodeAt(w+1))<<8;case 1:y=1540483477*(65535&(y^=255&l.charCodeAt(w)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var mi=Ai,Ii=$i.exports;St.exports=mi,St.exports.murmur3=mi,St.exports.murmur2=Ii;var Pi=u(St.exports);class Ur{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,c,p,y){this.ids.push(wr(s)),this.positions.push(c,p,y)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let c=wr(s),p=0,y=this.ids.length-1;for(;p<y;){let k=p+y>>1;this.ids[k]>=c?y=k:p=k+1}let w=[];for(;this.ids[p]===c;)w.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return w}static serialize(s,c){let p=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Ao(p,y,0,p.length-1),c&&c.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(s){let c=new Ur;return c.ids=s.ids,c.positions=s.positions,c.indexed=!0,c}}function wr(l){let s=+l;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Pi(String(l))}function Ao(l,s,c,p){for(;c<p;){let y=l[c+p>>1],w=c-1,k=p+1;for(;;){do w++;while(l[w]<y);do k--;while(l[k]>y);if(w>=k)break;pn(l,w,k),pn(s,3*w,3*k),pn(s,3*w+1,3*k+1),pn(s,3*w+2,3*k+2)}k-c<p-k?(Ao(l,s,c,k),c=k+1):(Ao(l,s,k+1,p),p=k)}}function pn(l,s,c){let p=l[s];l[s]=l[c],l[c]=p}Bt("FeaturePositionMap",Ur);class Tr{constructor(s,c){this.gl=s.gl,this.location=c}}class Yn extends Tr{constructor(s,c){super(s,c),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class gs extends Tr{constructor(s,c){super(s,c),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Is extends Tr{constructor(s,c){super(s,c),this.current=ir.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}let Va=new Float32Array(16);function ja(l){return[Nt(255*l.r,255*l.g),Nt(255*l.b,255*l.a)]}class Ps{constructor(s,c,p){this.value=s,this.uniformNames=c.map(y=>`u_${y}`),this.type=p}setUniform(s,c,p){s.set(p.constantOr(this.value))}getBinding(s,c,p){return this.type==="color"?new Is(s,c):new Yn(s,c)}}class ys{constructor(s,c){this.uniformNames=c.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=s.tlbr}setUniform(s,c,p,y){let w=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&s.set(w)}getBinding(s,c,p){return p.substr(0,9)==="u_pattern"?new gs(s,c):new Yn(s,c)}}class Qr{constructor(s,c,p,y){this.expression=s,this.type=p,this.maxValue=0,this.paintVertexAttributes=c.map(w=>({name:`a_${w}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,c,p,y,w){let k=this.paintVertexArray.length,C=this.expression.evaluate(new Ir(0),c,{},y,[],w);this.paintVertexArray.resize(s),this._setPaintValue(k,s,C)}updatePaintArray(s,c,p,y){let w=this.expression.evaluate({zoom:0},p,y);this._setPaintValue(s,c,w)}_setPaintValue(s,c,p){if(this.type==="color"){let y=ja(p);for(let w=s;w<c;w++)this.paintVertexArray.emplace(w,y[0],y[1])}else{for(let y=s;y<c;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Pr{constructor(s,c,p,y,w,k){this.expression=s,this.uniformNames=c.map(C=>`u_${C}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=c.map(C=>({name:`a_${C}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new k}populatePaintArray(s,c,p,y,w){let k=this.expression.evaluate(new Ir(this.zoom),c,{},y,[],w),C=this.expression.evaluate(new Ir(this.zoom+1),c,{},y,[],w),A=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(A,s,k,C)}updatePaintArray(s,c,p,y){let w=this.expression.evaluate({zoom:this.zoom},p,y),k=this.expression.evaluate({zoom:this.zoom+1},p,y);this._setPaintValue(s,c,w,k)}_setPaintValue(s,c,p,y){if(this.type==="color"){let w=ja(p),k=ja(y);for(let C=s;C<c;C++)this.paintVertexArray.emplace(C,w[0],w[1],k[0],k[1])}else{for(let w=s;w<c;w++)this.paintVertexArray.emplace(w,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,c){let p=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,y=fe(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);s.set(y)}getBinding(s,c,p){return new Yn(s,c)}}class Xr{constructor(s,c,p,y,w,k){this.expression=s,this.type=c,this.useIntegerZoom=p,this.zoom=y,this.layerId=k,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(s,c,p){let y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(y,s,c.patterns&&c.patterns[this.layerId],p)}updatePaintArray(s,c,p,y,w){this._setPaintValues(s,c,p.patterns&&p.patterns[this.layerId],w)}_setPaintValues(s,c,p,y){if(!y||!p)return;let{min:w,mid:k,max:C}=p,A=y[w],D=y[k],N=y[C];if(A&&D&&N)for(let O=s;O<c;O++)this.zoomInPaintVertexArray.emplace(O,D.tl[0],D.tl[1],D.br[0],D.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],D.pixelRatio,A.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,D.tl[0],D.tl[1],D.br[0],D.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],D.pixelRatio,N.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Mi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Mi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class jl{constructor(s,c,p){this.binders={},this._buffers=[];let y=[];for(let w in s.paint._values){if(!p(w))continue;let k=s.paint.get(w);if(!(k instanceof fs&&Al(k.property.specification)))continue;let C=Fn(w,s.type),A=k.value,D=k.property.specification.type,N=k.property.useIntegerZoom,O=k.property.specification["property-type"],j=O==="cross-faded"||O==="cross-faded-data-driven";if(A.kind==="constant")this.binders[w]=j?new ys(A.value,C):new Ps(A.value,C,D),y.push(`/u_${w}`);else if(A.kind==="source"||j){let W=Qo(w,D,"source");this.binders[w]=j?new Xr(A,D,N,c,W,s.id):new Qr(A,C,D,W),y.push(`/a_${w}`)}else{let W=Qo(w,D,"composite");this.binders[w]=new Pr(A,C,D,N,c,W),y.push(`/z_${w}`)}}this.cacheKey=y.sort().join("")}getMaxValue(s){let c=this.binders[s];return c instanceof Qr||c instanceof Pr?c.maxValue:0}populatePaintArrays(s,c,p,y,w){for(let k in this.binders){let C=this.binders[k];(C instanceof Qr||C instanceof Pr||C instanceof Xr)&&C.populatePaintArray(s,c,p,y,w)}}setConstantPatternPositions(s,c){for(let p in this.binders){let y=this.binders[p];y instanceof ys&&y.setConstantPatternPositions(s,c)}}updatePaintArrays(s,c,p,y,w){let k=!1;for(let C in s){let A=c.getPositions(C);for(let D of A){let N=p.feature(D.index);for(let O in this.binders){let j=this.binders[O];if((j instanceof Qr||j instanceof Pr||j instanceof Xr)&&j.expression.isStateDependent===!0){let W=y.paint.get(O);j.expression=W.value,j.updatePaintArray(D.start,D.end,N,s[C],w),k=!0}}}}return k}defines(){let s=[];for(let c in this.binders){let p=this.binders[c];(p instanceof Ps||p instanceof ys)&&s.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){let s=[];for(let c in this.binders){let p=this.binders[c];if(p instanceof Qr||p instanceof Pr)for(let y=0;y<p.paintVertexAttributes.length;y++)s.push(p.paintVertexAttributes[y].name);else if(p instanceof Xr)for(let y=0;y<Mi.members.length;y++)s.push(Mi.members[y].name)}return s}getBinderUniforms(){let s=[];for(let c in this.binders){let p=this.binders[c];if(p instanceof Ps||p instanceof ys||p instanceof Pr)for(let y of p.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,c){let p=[];for(let y in this.binders){let w=this.binders[y];if(w instanceof Ps||w instanceof ys||w instanceof Pr){for(let k of w.uniformNames)if(c[k]){let C=w.getBinding(s,c[k],k);p.push({name:k,property:y,binding:C})}}}return p}setUniforms(s,c,p,y){for(let{name:w,property:k,binding:C}of c)this.binders[k].setUniform(C,y,p.get(k),w)}updatePaintBuffers(s){this._buffers=[];for(let c in this.binders){let p=this.binders[c];if(s&&p instanceof Xr){let y=s.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(p instanceof Qr||p instanceof Pr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(s){for(let c in this.binders){let p=this.binders[c];(p instanceof Qr||p instanceof Pr||p instanceof Xr)&&p.upload(s)}this.updatePaintBuffers()}destroy(){for(let s in this.binders){let c=this.binders[s];(c instanceof Qr||c instanceof Pr||c instanceof Xr)&&c.destroy()}}}class Or{constructor(s,c,p=()=>!0){this.programConfigurations={};for(let y of s)this.programConfigurations[y.id]=new jl(y,c,p);this.needsUpload=!1,this._featureMap=new Ur,this._bufferOffset=0}populatePaintArrays(s,c,p,y,w,k){for(let C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(s,c,y,w,k);c.id!==void 0&&this._featureMap.add(c.id,p,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,c,p,y){for(let w of p)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(s,this._featureMap,c,w,y)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(let c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}}destroy(){for(let s in this.programConfigurations)this.programConfigurations[s].destroy()}}function Fn(l,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${s}-`,"").replace(/-/g,"_")]}function Qo(l,s,c){let p={color:{source:xc,composite:bh},number:{source:ba,composite:xc}},y=function(w){return{"line-pattern":{source:te,composite:te},"fill-pattern":{source:te,composite:te},"fill-extrusion-pattern":{source:te,composite:te}}[w]}(l);return y&&y[c]||p[s][c]}Bt("ConstantBinder",Ps),Bt("CrossFadedConstantBinder",ys),Bt("SourceExpressionBinder",Qr),Bt("CrossFadedCompositeBinder",Xr),Bt("CompositeExpressionBinder",Pr),Bt("ProgramConfiguration",jl,{omit:["_buffers"]}),Bt("ProgramConfigurationSet",Or);let Vi=8192,_h=Math.pow(2,14)-1,Rf=-_h-1;function Ha(l){let s=Vi/l.extent,c=l.loadGeometry();for(let p=0;p<c.length;p++){let y=c[p];for(let w=0;w<y.length;w++){let k=y[w],C=Math.round(k.x*s),A=Math.round(k.y*s);k.x=fe(C,Rf,_h),k.y=fe(A,Rf,_h),(C<k.x||C>k.x+1||A<k.y||A>k.y+1)&&He("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function qa(l,s){return{type:l.type,id:l.id,properties:l.properties,geometry:s?Ha(l):[]}}function zu(l,s,c,p,y){l.emplaceBack(2*s+(p+1)/2,2*c+(y+1)/2)}class xh{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new U,this.indexArray=new Ve,this.segments=new ot,this.programConfigurations=new Or(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,p){let y=this.layers[0],w=[],k=null,C=!1;y.type==="circle"&&(k=y.layout.get("circle-sort-key"),C=!k.isConstant());for(let{feature:A,id:D,index:N,sourceLayerIndex:O}of s){let j=this.layers[0]._featureFilter.needGeometry,W=qa(A,j);if(!this.layers[0]._featureFilter.filter(new Ir(this.zoom),W,p))continue;let K=C?k.evaluate(W,{},p):void 0,ie={id:D,properties:A.properties,type:A.type,sourceLayerIndex:O,index:N,geometry:j?W.geometry:Ha(A),patterns:{},sortKey:K};w.push(ie)}C&&w.sort((A,D)=>A.sortKey-D.sortKey);for(let A of w){let{geometry:D,index:N,sourceLayerIndex:O}=A,j=s[N].feature;this.addFeature(A,D,N,p),c.featureIndex.insert(j,D,N,O,this.index)}}update(s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,it),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,c,p,y){for(let w of c)for(let k of w){let C=k.x,A=k.y;if(C<0||C>=Vi||A<0||A>=Vi)continue;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),N=D.vertexLength;zu(this.layoutVertexArray,C,A,-1,-1),zu(this.layoutVertexArray,C,A,1,-1),zu(this.layoutVertexArray,C,A,1,1),zu(this.layoutVertexArray,C,A,-1,1),this.indexArray.emplaceBack(N,N+1,N+2),this.indexArray.emplaceBack(N,N+3,N+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,{},y)}}function $a(l,s){for(let c=0;c<l.length;c++)if(Nu(s,l[c]))return!0;for(let c=0;c<s.length;c++)if(Nu(l,s[c]))return!0;return!!kc(l,s)}function Uf(l,s,c){return!!Nu(l,s)||!!Sc(s,l,c)}function wh(l,s){if(l.length===1)return b_(s,l[0]);for(let c=0;c<s.length;c++){let p=s[c];for(let y=0;y<p.length;y++)if(Nu(l,p[y]))return!0}for(let c=0;c<l.length;c++)if(b_(s,l[c]))return!0;for(let c=0;c<s.length;c++)if(kc(l,s[c]))return!0;return!1}function Vf(l,s,c){if(l.length>1){if(kc(l,s))return!0;for(let p=0;p<s.length;p++)if(Sc(s[p],l,c))return!0}for(let p=0;p<l.length;p++)if(Sc(l[p],s,c))return!0;return!1}function kc(l,s){if(l.length===0||s.length===0)return!1;for(let c=0;c<l.length-1;c++){let p=l[c],y=l[c+1];for(let w=0;w<s.length-1;w++)if(jf(p,y,s[w],s[w+1]))return!0}return!1}function jf(l,s,c,p){return zt(l,c,p)!==zt(s,c,p)&&zt(l,s,c)!==zt(l,s,p)}function Sc(l,s,c){let p=c*c;if(s.length===1)return l.distSqr(s[0])<p;for(let y=1;y<s.length;y++)if(y_(l,s[y-1],s[y])<p)return!0;return!1}function y_(l,s,c){let p=s.distSqr(c);if(p===0)return l.distSqr(s);let y=((l.x-s.x)*(c.x-s.x)+(l.y-s.y)*(c.y-s.y))/p;return l.distSqr(y<0?s:y>1?c:c.sub(s)._mult(y)._add(s))}function b_(l,s){let c,p,y,w=!1;for(let k=0;k<l.length;k++){c=l[k];for(let C=0,A=c.length-1;C<c.length;A=C++)p=c[C],y=c[A],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(w=!w)}return w}function Nu(l,s){let c=!1;for(let p=0,y=l.length-1;p<l.length;y=p++){let w=l[p],k=l[y];w.y>s.y!=k.y>s.y&&s.x<(k.x-w.x)*(s.y-w.y)/(k.y-w.y)+w.x&&(c=!c)}return c}function O7(l,s,c){let p=c[0],y=c[2];if(l.x<p.x&&s.x<p.x||l.x>y.x&&s.x>y.x||l.y<p.y&&s.y<p.y||l.y>y.y&&s.y>y.y)return!1;let w=zt(l,s,c[0]);return w!==zt(l,s,c[1])||w!==zt(l,s,c[2])||w!==zt(l,s,c[3])}function kh(l,s,c){let p=s.paint.get(l).value;return p.kind==="constant"?p.value:c.programConfigurations.get(s.id).getMaxValue(l)}function Hf(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function qf(l,s,c,p,y){if(!s[0]&&!s[1])return l;let w=b.convert(s)._mult(y);c==="viewport"&&w._rotate(-p);let k=[];for(let C=0;C<l.length;C++)k.push(l[C].sub(w));return k}let v_,__;Bt("CircleBucket",xh,{omit:["layers"]});var B7={get paint(){return __=__||new Mo({"circle-radius":new li(Ue.paint_circle["circle-radius"]),"circle-color":new li(Ue.paint_circle["circle-color"]),"circle-blur":new li(Ue.paint_circle["circle-blur"]),"circle-opacity":new li(Ue.paint_circle["circle-opacity"]),"circle-translate":new ii(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new ii(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ii(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ii(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new li(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new li(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new li(Ue.paint_circle["circle-stroke-opacity"])})},get layout(){return v_=v_||new Mo({"circle-sort-key":new li(Ue.layout_circle["circle-sort-key"])})}},Io=1e-6,Ou=typeof Float32Array<"u"?Float32Array:Array;function y1(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function x_(l,s,c){var p=s[0],y=s[1],w=s[2],k=s[3],C=s[4],A=s[5],D=s[6],N=s[7],O=s[8],j=s[9],W=s[10],K=s[11],ie=s[12],ae=s[13],pe=s[14],Ie=s[15],ye=c[0],Ee=c[1],Ge=c[2],et=c[3];return l[0]=ye*p+Ee*C+Ge*O+et*ie,l[1]=ye*y+Ee*A+Ge*j+et*ae,l[2]=ye*w+Ee*D+Ge*W+et*pe,l[3]=ye*k+Ee*N+Ge*K+et*Ie,l[4]=(ye=c[4])*p+(Ee=c[5])*C+(Ge=c[6])*O+(et=c[7])*ie,l[5]=ye*y+Ee*A+Ge*j+et*ae,l[6]=ye*w+Ee*D+Ge*W+et*pe,l[7]=ye*k+Ee*N+Ge*K+et*Ie,l[8]=(ye=c[8])*p+(Ee=c[9])*C+(Ge=c[10])*O+(et=c[11])*ie,l[9]=ye*y+Ee*A+Ge*j+et*ae,l[10]=ye*w+Ee*D+Ge*W+et*pe,l[11]=ye*k+Ee*N+Ge*K+et*Ie,l[12]=(ye=c[12])*p+(Ee=c[13])*C+(Ge=c[14])*O+(et=c[15])*ie,l[13]=ye*y+Ee*A+Ge*j+et*ae,l[14]=ye*w+Ee*D+Ge*W+et*pe,l[15]=ye*k+Ee*N+Ge*K+et*Ie,l}Math.hypot||(Math.hypot=function(){for(var l=0,s=arguments.length;s--;)l+=arguments[s]*arguments[s];return Math.sqrt(l)});var Sh,R7=x_;function $f(l,s,c){var p=s[0],y=s[1],w=s[2],k=s[3];return l[0]=c[0]*p+c[4]*y+c[8]*w+c[12]*k,l[1]=c[1]*p+c[5]*y+c[9]*w+c[13]*k,l[2]=c[2]*p+c[6]*y+c[10]*w+c[14]*k,l[3]=c[3]*p+c[7]*y+c[11]*w+c[15]*k,l}Sh=new Ou(4),Ou!=Float32Array&&(Sh[0]=0,Sh[1]=0,Sh[2]=0,Sh[3]=0);class U7 extends ms{constructor(s){super(s,B7)}createBucket(s){return new xh(s)}queryRadius(s){let c=s;return kh("circle-radius",this,c)+kh("circle-stroke-width",this,c)+Hf(this.paint.get("circle-translate"))}queryIntersectsFeature(s,c,p,y,w,k,C,A){let D=qf(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,C),N=this.paint.get("circle-radius").evaluate(c,p)+this.paint.get("circle-stroke-width").evaluate(c,p),O=this.paint.get("circle-pitch-alignment")==="map",j=O?D:function(K,ie){return K.map(ae=>w_(ae,ie))}(D,A),W=O?N*C:N;for(let K of y)for(let ie of K){let ae=O?ie:w_(ie,A),pe=W,Ie=$f([],[ie.x,ie.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Ie[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=k.cameraToCenterDistance/Ie[3]),Uf(j,ae,pe))return!0}return!1}}function w_(l,s){let c=$f([],[l.x,l.y,0,1],s);return new b(c[0]/c[3],c[1]/c[3])}class k_ extends xh{}let S_;Bt("HeatmapBucket",k_,{omit:["layers"]});var V7={get paint(){return S_=S_||new Mo({"heatmap-radius":new li(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new li(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ii(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vc(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ii(Ue.paint_heatmap["heatmap-opacity"])})}};function b1(l,{width:s,height:c},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*c*p)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${s*c*p}`)}else y=new Uint8Array(s*c*p);return l.width=s,l.height=c,l.data=y,l}function C_(l,{width:s,height:c},p){if(s===l.width&&c===l.height)return;let y=b1({},{width:s,height:c},p);v1(l,y,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,s),height:Math.min(l.height,c)},p),l.width=s,l.height=c,l.data=y.data}function v1(l,s,c,p,y,w){if(y.width===0||y.height===0)return s;if(y.width>l.width||y.height>l.height||c.x>l.width-y.width||c.y>l.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||p.x>s.width-y.width||p.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");let k=l.data,C=s.data;if(k===C)throw new Error("srcData equals dstData, so image is already copied");for(let A=0;A<y.height;A++){let D=((c.y+A)*l.width+c.x)*w,N=((p.y+A)*s.width+p.x)*w;for(let O=0;O<y.width*w;O++)C[N+O]=k[D+O]}return s}class Ch{constructor(s,c){b1(this,s,1,c)}resize(s){C_(this,s,1)}clone(){return new Ch({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,p,y,w){v1(s,c,p,y,w,1)}}class bs{constructor(s,c){b1(this,s,4,c)}resize(s){C_(this,s,4)}replace(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new bs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,p,y,w){v1(s,c,p,y,w,4)}}function E_(l){let s={},c=l.resolution||256,p=l.clips?l.clips.length:1,y=l.image||new bs({width:c,height:p});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);let w=(k,C,A)=>{s[l.evaluationKey]=A;let D=l.expression.evaluate(s);y.data[k+C+0]=Math.floor(255*D.r/D.a),y.data[k+C+1]=Math.floor(255*D.g/D.a),y.data[k+C+2]=Math.floor(255*D.b/D.a),y.data[k+C+3]=Math.floor(255*D.a)};if(l.clips)for(let k=0,C=0;k<p;++k,C+=4*c)for(let A=0,D=0;A<c;A++,D+=4){let N=A/(c-1),{start:O,end:j}=l.clips[k];w(C,D,O*(1-N)+j*N)}else for(let k=0,C=0;k<c;k++,C+=4)w(0,C,k/(c-1));return y}Bt("AlphaImage",Ch),Bt("RGBAImage",bs);class j7 extends ms{createBucket(s){return new k_(s)}constructor(s){super(s,V7),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=E_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let T_;var H7={get paint(){return T_=T_||new Mo({"hillshade-illumination-direction":new ii(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ii(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ii(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ii(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ii(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ii(Ue.paint_hillshade["hillshade-accent-color"])})}};class q7 extends ms{constructor(s){super(s,H7)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let $7=an([{name:"a_pos",components:2,type:"Int16"}],4),{members:Q7}=$7;var _1={exports:{}};function Qf(l,s,c){c=c||2;var p,y,w,k,C,A,D,N=s&&s.length,O=N?s[0]*c:l.length,j=M_(l,0,O,c,!0),W=[];if(!j||j.next===j.prev)return W;if(N&&(j=function(ie,ae,pe,Ie){var ye,Ee,Ge,et=[];for(ye=0,Ee=ae.length;ye<Ee;ye++)(Ge=M_(ie,ae[ye]*Ie,ye<Ee-1?ae[ye+1]*Ie:ie.length,Ie,!1))===Ge.next&&(Ge.steiner=!0),et.push(ek(Ge));for(et.sort(J7),ye=0;ye<et.length;ye++)pe=X7(et[ye],pe);return pe}(l,s,j,c)),l.length>80*c){p=w=l[0],y=k=l[1];for(var K=c;K<O;K+=c)(C=l[K])<p&&(p=C),(A=l[K+1])<y&&(y=A),C>w&&(w=C),A>k&&(k=A);D=(D=Math.max(w-p,k-y))!==0?32767/D:0}return Eh(j,W,c,p,y,D,0),W}function M_(l,s,c,p,y){var w,k;if(y===k1(l,s,c,p)>0)for(w=s;w<c;w+=p)k=P_(w,l[w],l[w+1],k);else for(w=c-p;w>=s;w-=p)k=P_(w,l[w],l[w+1],k);return k&&Gf(k,k.next)&&(Mh(k),k=k.next),k}function Cc(l,s){if(!l)return l;s||(s=l);var c,p=l;do if(c=!1,p.steiner||!Gf(p,p.next)&&ln(p.prev,p,p.next)!==0)p=p.next;else{if(Mh(p),(p=s=p.prev)===p.next)break;c=!0}while(c||p!==s);return s}function Eh(l,s,c,p,y,w,k){if(l){!k&&w&&function(N,O,j,W){var K=N;do K.z===0&&(K.z=x1(K.x,K.y,O,j,W)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==N);K.prevZ.nextZ=null,K.prevZ=null,function(ie){var ae,pe,Ie,ye,Ee,Ge,et,Lt,Xt=1;do{for(pe=ie,ie=null,Ee=null,Ge=0;pe;){for(Ge++,Ie=pe,et=0,ae=0;ae<Xt&&(et++,Ie=Ie.nextZ);ae++);for(Lt=Xt;et>0||Lt>0&&Ie;)et!==0&&(Lt===0||!Ie||pe.z<=Ie.z)?(ye=pe,pe=pe.nextZ,et--):(ye=Ie,Ie=Ie.nextZ,Lt--),Ee?Ee.nextZ=ye:ie=ye,ye.prevZ=Ee,Ee=ye;pe=Ie}Ee.nextZ=null,Xt*=2}while(Ge>1)}(K)}(l,p,y,w);for(var C,A,D=l;l.prev!==l.next;)if(C=l.prev,A=l.next,w?W7(l,p,y,w):G7(l))s.push(C.i/c|0),s.push(l.i/c|0),s.push(A.i/c|0),Mh(l),l=A.next,D=A.next;else if((l=A)===D){k?k===1?Eh(l=Z7(Cc(l),s,c),s,c,p,y,w,2):k===2&&K7(l,s,c,p,y,w):Eh(Cc(l),s,c,p,y,w,1);break}}}function G7(l){var s=l.prev,c=l,p=l.next;if(ln(s,c,p)>=0)return!1;for(var y=s.x,w=c.x,k=p.x,C=s.y,A=c.y,D=p.y,N=y<w?y<k?y:k:w<k?w:k,O=C<A?C<D?C:D:A<D?A:D,j=y>w?y>k?y:k:w>k?w:k,W=C>A?C>D?C:D:A>D?A:D,K=p.next;K!==s;){if(K.x>=N&&K.x<=j&&K.y>=O&&K.y<=W&&Bu(y,C,w,A,k,D,K.x,K.y)&&ln(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function W7(l,s,c,p){var y=l.prev,w=l,k=l.next;if(ln(y,w,k)>=0)return!1;for(var C=y.x,A=w.x,D=k.x,N=y.y,O=w.y,j=k.y,W=C<A?C<D?C:D:A<D?A:D,K=N<O?N<j?N:j:O<j?O:j,ie=C>A?C>D?C:D:A>D?A:D,ae=N>O?N>j?N:j:O>j?O:j,pe=x1(W,K,s,c,p),Ie=x1(ie,ae,s,c,p),ye=l.prevZ,Ee=l.nextZ;ye&&ye.z>=pe&&Ee&&Ee.z<=Ie;){if(ye.x>=W&&ye.x<=ie&&ye.y>=K&&ye.y<=ae&&ye!==y&&ye!==k&&Bu(C,N,A,O,D,j,ye.x,ye.y)&&ln(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ee.x>=W&&Ee.x<=ie&&Ee.y>=K&&Ee.y<=ae&&Ee!==y&&Ee!==k&&Bu(C,N,A,O,D,j,Ee.x,Ee.y)&&ln(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;ye&&ye.z>=pe;){if(ye.x>=W&&ye.x<=ie&&ye.y>=K&&ye.y<=ae&&ye!==y&&ye!==k&&Bu(C,N,A,O,D,j,ye.x,ye.y)&&ln(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ee&&Ee.z<=Ie;){if(Ee.x>=W&&Ee.x<=ie&&Ee.y>=K&&Ee.y<=ae&&Ee!==y&&Ee!==k&&Bu(C,N,A,O,D,j,Ee.x,Ee.y)&&ln(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function Z7(l,s,c){var p=l;do{var y=p.prev,w=p.next.next;!Gf(y,w)&&A_(y,p,p.next,w)&&Th(y,w)&&Th(w,y)&&(s.push(y.i/c|0),s.push(p.i/c|0),s.push(w.i/c|0),Mh(p),Mh(p.next),p=l=w),p=p.next}while(p!==l);return Cc(p)}function K7(l,s,c,p,y,w){var k=l;do{for(var C=k.next.next;C!==k.prev;){if(k.i!==C.i&&tk(k,C)){var A=I_(k,C);return k=Cc(k,k.next),A=Cc(A,A.next),Eh(k,s,c,p,y,w,0),void Eh(A,s,c,p,y,w,0)}C=C.next}k=k.next}while(k!==l)}function J7(l,s){return l.x-s.x}function X7(l,s){var c=function(y,w){var k,C=w,A=y.x,D=y.y,N=-1/0;do{if(D<=C.y&&D>=C.next.y&&C.next.y!==C.y){var O=C.x+(D-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(O<=A&&O>N&&(N=O,k=C.x<C.next.x?C:C.next,O===A))return k}C=C.next}while(C!==w);if(!k)return null;var j,W=k,K=k.x,ie=k.y,ae=1/0;C=k;do A>=C.x&&C.x>=K&&A!==C.x&&Bu(D<ie?A:N,D,K,ie,D<ie?N:A,D,C.x,C.y)&&(j=Math.abs(D-C.y)/(A-C.x),Th(C,y)&&(j<ae||j===ae&&(C.x>k.x||C.x===k.x&&Y7(k,C)))&&(k=C,ae=j)),C=C.next;while(C!==W);return k}(l,s);if(!c)return s;var p=I_(c,l);return Cc(p,p.next),Cc(c,c.next)}function Y7(l,s){return ln(l.prev,l,s.prev)<0&&ln(s.next,l,l.next)<0}function x1(l,s,c,p,y){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-c)*y|0)|l<<8))|l<<4))|l<<2))|l<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-p)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function ek(l){var s=l,c=l;do(s.x<c.x||s.x===c.x&&s.y<c.y)&&(c=s),s=s.next;while(s!==l);return c}function Bu(l,s,c,p,y,w,k,C){return(y-k)*(s-C)>=(l-k)*(w-C)&&(l-k)*(p-C)>=(c-k)*(s-C)&&(c-k)*(w-C)>=(y-k)*(p-C)}function tk(l,s){return l.next.i!==s.i&&l.prev.i!==s.i&&!function(c,p){var y=c;do{if(y.i!==c.i&&y.next.i!==c.i&&y.i!==p.i&&y.next.i!==p.i&&A_(y,y.next,c,p))return!0;y=y.next}while(y!==c);return!1}(l,s)&&(Th(l,s)&&Th(s,l)&&function(c,p){var y=c,w=!1,k=(c.x+p.x)/2,C=(c.y+p.y)/2;do y.y>C!=y.next.y>C&&y.next.y!==y.y&&k<(y.next.x-y.x)*(C-y.y)/(y.next.y-y.y)+y.x&&(w=!w),y=y.next;while(y!==c);return w}(l,s)&&(ln(l.prev,l,s.prev)||ln(l,s.prev,s))||Gf(l,s)&&ln(l.prev,l,l.next)>0&&ln(s.prev,s,s.next)>0)}function ln(l,s,c){return(s.y-l.y)*(c.x-s.x)-(s.x-l.x)*(c.y-s.y)}function Gf(l,s){return l.x===s.x&&l.y===s.y}function A_(l,s,c,p){var y=Zf(ln(l,s,c)),w=Zf(ln(l,s,p)),k=Zf(ln(c,p,l)),C=Zf(ln(c,p,s));return y!==w&&k!==C||!(y!==0||!Wf(l,c,s))||!(w!==0||!Wf(l,p,s))||!(k!==0||!Wf(c,l,p))||!(C!==0||!Wf(c,s,p))}function Wf(l,s,c){return s.x<=Math.max(l.x,c.x)&&s.x>=Math.min(l.x,c.x)&&s.y<=Math.max(l.y,c.y)&&s.y>=Math.min(l.y,c.y)}function Zf(l){return l>0?1:l<0?-1:0}function Th(l,s){return ln(l.prev,l,l.next)<0?ln(l,s,l.next)>=0&&ln(l,l.prev,s)>=0:ln(l,s,l.prev)<0||ln(l,l.next,s)<0}function I_(l,s){var c=new w1(l.i,l.x,l.y),p=new w1(s.i,s.x,s.y),y=l.next,w=s.prev;return l.next=s,s.prev=l,c.next=y,y.prev=c,p.next=c,c.prev=p,w.next=p,p.prev=w,p}function P_(l,s,c,p){var y=new w1(l,s,c);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function Mh(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function w1(l,s,c){this.i=l,this.x=s,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k1(l,s,c,p){for(var y=0,w=s,k=c-p;w<c;w+=p)y+=(l[k]-l[w])*(l[w+1]+l[k+1]),k=w;return y}_1.exports=Qf,_1.exports.default=Qf,Qf.deviation=function(l,s,c,p){var y=s&&s.length,w=Math.abs(k1(l,0,y?s[0]*c:l.length,c));if(y)for(var k=0,C=s.length;k<C;k++)w-=Math.abs(k1(l,s[k]*c,k<C-1?s[k+1]*c:l.length,c));var A=0;for(k=0;k<p.length;k+=3){var D=p[k]*c,N=p[k+1]*c,O=p[k+2]*c;A+=Math.abs((l[D]-l[O])*(l[N+1]-l[D+1])-(l[D]-l[N])*(l[O+1]-l[D+1]))}return w===0&&A===0?0:Math.abs((A-w)/w)},Qf.flatten=function(l){for(var s=l[0][0].length,c={vertices:[],holes:[],dimensions:s},p=0,y=0;y<l.length;y++){for(var w=0;w<l[y].length;w++)for(var k=0;k<s;k++)c.vertices.push(l[y][w][k]);y>0&&c.holes.push(p+=l[y-1].length)}return c};var D_=u(_1.exports);function ik(l,s,c,p,y){L_(l,s,c||0,p||l.length-1,y||rk)}function L_(l,s,c,p,y){for(;p>c;){if(p-c>600){var w=p-c+1,k=s-c+1,C=Math.log(w),A=.5*Math.exp(2*C/3),D=.5*Math.sqrt(C*A*(w-A)/w)*(k-w/2<0?-1:1);L_(l,s,Math.max(c,Math.floor(s-k*A/w+D)),Math.min(p,Math.floor(s+(w-k)*A/w+D)),y)}var N=l[s],O=c,j=p;for(Ah(l,c,s),y(l[p],N)>0&&Ah(l,c,p);O<j;){for(Ah(l,O,j),O++,j--;y(l[O],N)<0;)O++;for(;y(l[j],N)>0;)j--}y(l[c],N)===0?Ah(l,c,j):Ah(l,++j,p),j<=s&&(c=j+1),s<=j&&(p=j-1)}}function Ah(l,s,c){var p=l[s];l[s]=l[c],l[c]=p}function rk(l,s){return l<s?-1:l>s?1:0}function S1(l,s){let c=l.length;if(c<=1)return[l];let p=[],y,w;for(let k=0;k<c;k++){let C=rt(l[k]);C!==0&&(l[k].area=Math.abs(C),w===void 0&&(w=C<0),w===C<0?(y&&p.push(y),y=[l[k]]):y.push(l[k]))}if(y&&p.push(y),s>1)for(let k=0;k<p.length;k++)p[k].length<=s||(ik(p[k],s,1,p[k].length-1,nk),p[k]=p[k].slice(0,s));return p}function nk(l,s){return s.area-l.area}function C1(l,s,c){let p=c.patternDependencies,y=!1;for(let w of s){let k=w.paint.get(`${l}-pattern`);k.isConstant()||(y=!0);let C=k.constantOr(null);C&&(y=!0,p[C.to]=!0,p[C.from]=!0)}return y}function E1(l,s,c,p,y){let w=y.patternDependencies;for(let k of s){let C=k.paint.get(`${l}-pattern`).value;if(C.kind!=="constant"){let A=C.evaluate({zoom:p-1},c,{},y.availableImages),D=C.evaluate({zoom:p},c,{},y.availableImages),N=C.evaluate({zoom:p+1},c,{},y.availableImages);A=A&&A.name?A.name:A,D=D&&D.name?D.name:D,N=N&&N.name?N.name:N,w[A]=!0,w[D]=!0,w[N]=!0,c.patterns[k.id]={min:A,mid:D,max:N}}}return c}class T1{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Z,this.indexArray=new Ve,this.indexArray2=new Qe,this.programConfigurations=new Or(s.layers,s.zoom),this.segments=new ot,this.segments2=new ot,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,p){this.hasPattern=C1("fill",this.layers,c);let y=this.layers[0].layout.get("fill-sort-key"),w=!y.isConstant(),k=[];for(let{feature:C,id:A,index:D,sourceLayerIndex:N}of s){let O=this.layers[0]._featureFilter.needGeometry,j=qa(C,O);if(!this.layers[0]._featureFilter.filter(new Ir(this.zoom),j,p))continue;let W=w?y.evaluate(j,{},p,c.availableImages):void 0,K={id:A,properties:C.properties,type:C.type,sourceLayerIndex:N,index:D,geometry:O?j.geometry:Ha(C),patterns:{},sortKey:W};k.push(K)}w&&k.sort((C,A)=>C.sortKey-A.sortKey);for(let C of k){let{geometry:A,index:D,sourceLayerIndex:N}=C;if(this.hasPattern){let O=E1("fill",this.layers,C,this.zoom,c);this.patternFeatures.push(O)}else this.addFeature(C,A,D,p,{});c.featureIndex.insert(s[D].feature,A,D,N,this.index)}}update(s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,p)}addFeatures(s,c,p){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,c,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Q7),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,c,p,y,w){for(let k of S1(c,500)){let C=0;for(let W of k)C+=W.length;let A=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),D=A.vertexLength,N=[],O=[];for(let W of k){if(W.length===0)continue;W!==k[0]&&O.push(N.length/2);let K=this.segments2.prepareSegment(W.length,this.layoutVertexArray,this.indexArray2),ie=K.vertexLength;this.layoutVertexArray.emplaceBack(W[0].x,W[0].y),this.indexArray2.emplaceBack(ie+W.length-1,ie),N.push(W[0].x),N.push(W[0].y);for(let ae=1;ae<W.length;ae++)this.layoutVertexArray.emplaceBack(W[ae].x,W[ae].y),this.indexArray2.emplaceBack(ie+ae-1,ie+ae),N.push(W[ae].x),N.push(W[ae].y);K.vertexLength+=W.length,K.primitiveLength+=W.length}let j=D_(N,O);for(let W=0;W<j.length;W+=3)this.indexArray.emplaceBack(D+j[W],D+j[W+1],D+j[W+2]);A.vertexLength+=C,A.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,w,y)}}let F_,z_;Bt("FillBucket",T1,{omit:["layers","patternFeatures"]});var ok={get paint(){return z_=z_||new Mo({"fill-antialias":new ii(Ue.paint_fill["fill-antialias"]),"fill-opacity":new li(Ue.paint_fill["fill-opacity"]),"fill-color":new li(Ue.paint_fill["fill-color"]),"fill-outline-color":new li(Ue.paint_fill["fill-outline-color"]),"fill-translate":new ii(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new ii(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ra(Ue.paint_fill["fill-pattern"])})},get layout(){return F_=F_||new Mo({"fill-sort-key":new li(Ue.layout_fill["fill-sort-key"])})}};class sk extends ms{constructor(s){super(s,ok)}recalculate(s,c){super.recalculate(s,c);let p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new T1(s)}queryRadius(){return Hf(this.paint.get("fill-translate"))}queryIntersectsFeature(s,c,p,y,w,k,C){return wh(qf(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,C),y)}isTileClipped(){return!0}}let ak=an([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),lk=an([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ck}=ak;var Hl={},uk=h,N_=Ru;function Ru(l,s,c,p,y){this.properties={},this.extent=c,this.type=0,this._pbf=l,this._geometry=-1,this._keys=p,this._values=y,l.readFields(dk,this,s)}function dk(l,s,c){l==1?s.id=c.readVarint():l==2?function(p,y){for(var w=p.readVarint()+p.pos;p.pos<w;){var k=y._keys[p.readVarint()],C=y._values[p.readVarint()];y.properties[k]=C}}(c,s):l==3?s.type=c.readVarint():l==4&&(s._geometry=c.pos)}function hk(l){for(var s,c,p=0,y=0,w=l.length,k=w-1;y<w;k=y++)p+=((c=l[k]).x-(s=l[y]).x)*(s.y+c.y);return p}Ru.types=["Unknown","Point","LineString","Polygon"],Ru.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var s,c=l.readVarint()+l.pos,p=1,y=0,w=0,k=0,C=[];l.pos<c;){if(y<=0){var A=l.readVarint();p=7&A,y=A>>3}if(y--,p===1||p===2)w+=l.readSVarint(),k+=l.readSVarint(),p===1&&(s&&C.push(s),s=[]),s.push(new uk(w,k));else{if(p!==7)throw new Error("unknown command "+p);s&&s.push(s[0].clone())}}return s&&C.push(s),C},Ru.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var s=l.readVarint()+l.pos,c=1,p=0,y=0,w=0,k=1/0,C=-1/0,A=1/0,D=-1/0;l.pos<s;){if(p<=0){var N=l.readVarint();c=7&N,p=N>>3}if(p--,c===1||c===2)(y+=l.readSVarint())<k&&(k=y),y>C&&(C=y),(w+=l.readSVarint())<A&&(A=w),w>D&&(D=w);else if(c!==7)throw new Error("unknown command "+c)}return[k,A,C,D]},Ru.prototype.toGeoJSON=function(l,s,c){var p,y,w=this.extent*Math.pow(2,c),k=this.extent*l,C=this.extent*s,A=this.loadGeometry(),D=Ru.types[this.type];function N(W){for(var K=0;K<W.length;K++){var ie=W[K];W[K]=[360*(ie.x+k)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(ie.y+C)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(p=0;p<A.length;p++)O[p]=A[p][0];N(A=O);break;case 2:for(p=0;p<A.length;p++)N(A[p]);break;case 3:for(A=function(W){var K=W.length;if(K<=1)return[W];for(var ie,ae,pe=[],Ie=0;Ie<K;Ie++){var ye=hk(W[Ie]);ye!==0&&(ae===void 0&&(ae=ye<0),ae===ye<0?(ie&&pe.push(ie),ie=[W[Ie]]):ie.push(W[Ie]))}return ie&&pe.push(ie),pe}(A),p=0;p<A.length;p++)for(y=0;y<A[p].length;y++)N(A[p][y])}A.length===1?A=A[0]:D="Multi"+D;var j={type:"Feature",geometry:{type:D,coordinates:A},properties:this.properties};return"id"in this&&(j.id=this.id),j};var pk=N_,O_=B_;function B_(l,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(fk,this,s),this.length=this._features.length}function fk(l,s,c){l===15?s.version=c.readVarint():l===1?s.name=c.readString():l===5?s.extent=c.readVarint():l===2?s._features.push(c.pos):l===3?s._keys.push(c.readString()):l===4&&s._values.push(function(p){for(var y=null,w=p.readVarint()+p.pos;p.pos<w;){var k=p.readVarint()>>3;y=k===1?p.readString():k===2?p.readFloat():k===3?p.readDouble():k===4?p.readVarint64():k===5?p.readVarint():k===6?p.readSVarint():k===7?p.readBoolean():null}return y}(c))}B_.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var s=this._pbf.readVarint()+this._pbf.pos;return new pk(this._pbf,s,this.extent,this._keys,this._values)};var mk=O_;function gk(l,s,c){if(l===3){var p=new mk(c,c.readVarint()+c.pos);p.length&&(s[p.name]=p)}}Hl.VectorTile=function(l,s){this.layers=l.readFields(gk,{},s)},Hl.VectorTileFeature=N_,Hl.VectorTileLayer=O_;let yk=Hl.VectorTileFeature.types,M1=Math.pow(2,13);function Ih(l,s,c,p,y,w,k,C){l.emplaceBack(s,c,2*Math.floor(p*M1)+k,y*M1*2,w*M1*2,Math.round(C))}class A1{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new se,this.centroidVertexArray=new B,this.indexArray=new Ve,this.programConfigurations=new Or(s.layers,s.zoom),this.segments=new ot,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,p){this.features=[],this.hasPattern=C1("fill-extrusion",this.layers,c);for(let{feature:y,id:w,index:k,sourceLayerIndex:C}of s){let A=this.layers[0]._featureFilter.needGeometry,D=qa(y,A);if(!this.layers[0]._featureFilter.filter(new Ir(this.zoom),D,p))continue;let N={id:w,sourceLayerIndex:C,index:k,geometry:A?D.geometry:Ha(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(E1("fill-extrusion",this.layers,N,this.zoom,c)):this.addFeature(N,N.geometry,k,p,{}),c.featureIndex.insert(y,N.geometry,k,C,this.index,!0)}}addFeatures(s,c,p){for(let y of this.features){let{geometry:w}=y;this.addFeature(y,w,y.index,c,p)}}update(s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,ck),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,lk.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,c,p,y,w){let k={x:0,y:0,vertexCount:0};for(let C of S1(c,500)){let A=0;for(let K of C)A+=K.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let K of C){if(K.length===0||vk(K))continue;let ie=0;for(let ae=0;ae<K.length;ae++){let pe=K[ae];if(ae>=1){let Ie=K[ae-1];if(!bk(pe,Ie)){D.vertexLength+4>ot.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let ye=pe.sub(Ie)._perp()._unit(),Ee=Ie.dist(pe);ie+Ee>32768&&(ie=0),Ih(this.layoutVertexArray,pe.x,pe.y,ye.x,ye.y,0,0,ie),Ih(this.layoutVertexArray,pe.x,pe.y,ye.x,ye.y,0,1,ie),k.x+=2*pe.x,k.y+=2*pe.y,k.vertexCount+=2,ie+=Ee,Ih(this.layoutVertexArray,Ie.x,Ie.y,ye.x,ye.y,0,0,ie),Ih(this.layoutVertexArray,Ie.x,Ie.y,ye.x,ye.y,0,1,ie),k.x+=2*Ie.x,k.y+=2*Ie.y,k.vertexCount+=2;let Ge=D.vertexLength;this.indexArray.emplaceBack(Ge,Ge+2,Ge+1),this.indexArray.emplaceBack(Ge+1,Ge+2,Ge+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+A>ot.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray)),yk[s.type]!=="Polygon")continue;let N=[],O=[],j=D.vertexLength;for(let K of C)if(K.length!==0){K!==C[0]&&O.push(N.length/2);for(let ie=0;ie<K.length;ie++){let ae=K[ie];Ih(this.layoutVertexArray,ae.x,ae.y,0,0,1,1,0),k.x+=ae.x,k.y+=ae.y,k.vertexCount+=1,N.push(ae.x),N.push(ae.y)}}let W=D_(N,O);for(let K=0;K<W.length;K+=3)this.indexArray.emplaceBack(j+W[K],j+W[K+2],j+W[K+1]);D.primitiveLength+=W.length/3,D.vertexLength+=A}for(let C=0;C<k.vertexCount;C++)this.centroidVertexArray.emplaceBack(Math.floor(k.x/k.vertexCount),Math.floor(k.y/k.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,w,y)}}function bk(l,s){return l.x===s.x&&(l.x<0||l.x>Vi)||l.y===s.y&&(l.y<0||l.y>Vi)}function vk(l){return l.every(s=>s.x<0)||l.every(s=>s.x>Vi)||l.every(s=>s.y<0)||l.every(s=>s.y>Vi)}let R_;Bt("FillExtrusionBucket",A1,{omit:["layers","features"]});var _k={get paint(){return R_=R_||new Mo({"fill-extrusion-opacity":new ii(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new li(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ii(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ii(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ra(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new li(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new li(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ii(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class xk extends ms{constructor(s){super(s,_k)}createBucket(s){return new A1(s)}queryRadius(){return Hf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(s,c,p,y,w,k,C,A){let D=qf(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,C),N=this.paint.get("fill-extrusion-height").evaluate(c,p),O=this.paint.get("fill-extrusion-base").evaluate(c,p),j=function(K,ie,ae,pe){let Ie=[];for(let ye of K){let Ee=[ye.x,ye.y,0,1];$f(Ee,Ee,ie),Ie.push(new b(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return Ie}(D,A),W=function(K,ie,ae,pe){let Ie=[],ye=[],Ee=pe[8]*ie,Ge=pe[9]*ie,et=pe[10]*ie,Lt=pe[11]*ie,Xt=pe[8]*ae,Pt=pe[9]*ae,Tt=pe[10]*ae,wt=pe[11]*ae;for(let Ht of K){let Ct=[],mt=[];for(let si of Ht){let ei=si.x,Bi=si.y,Dr=pe[0]*ei+pe[4]*Bi+pe[12],Br=pe[1]*ei+pe[5]*Bi+pe[13],xn=pe[2]*ei+pe[6]*Bi+pe[14],ds=pe[3]*ei+pe[7]*Bi+pe[15],Po=xn+et,fn=ds+Lt,Qn=Dr+Xt,to=Br+Pt,Do=xn+Tt,Lo=ds+wt,wn=new b((Dr+Ee)/fn,(Br+Ge)/fn);wn.z=Po/fn,Ct.push(wn);let kn=new b(Qn/Lo,to/Lo);kn.z=Do/Lo,mt.push(kn)}Ie.push(Ct),ye.push(mt)}return[Ie,ye]}(y,O,N,A);return function(K,ie,ae){let pe=1/0;wh(ae,ie)&&(pe=U_(ae,ie[0]));for(let Ie=0;Ie<ie.length;Ie++){let ye=ie[Ie],Ee=K[Ie];for(let Ge=0;Ge<ye.length-1;Ge++){let et=ye[Ge],Lt=[et,ye[Ge+1],Ee[Ge+1],Ee[Ge],et];$a(ae,Lt)&&(pe=Math.min(pe,U_(ae,Lt)))}}return pe!==1/0&&pe}(W[0],W[1],j)}}function Ph(l,s){return l.x*s.x+l.y*s.y}function U_(l,s){if(l.length===1){let c=0,p=s[c++],y;for(;!y||p.equals(y);)if(y=s[c++],!y)return 1/0;for(;c<s.length;c++){let w=s[c],k=l[0],C=y.sub(p),A=w.sub(p),D=k.sub(p),N=Ph(C,C),O=Ph(C,A),j=Ph(A,A),W=Ph(D,C),K=Ph(D,A),ie=N*j-O*O,ae=(j*W-O*K)/ie,pe=(N*K-O*W)/ie,Ie=p.z*(1-ae-pe)+y.z*ae+w.z*pe;if(isFinite(Ie))return Ie}return 1/0}{let c=1/0;for(let p of s)c=Math.min(c,p.z);return c}}let wk=an([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:kk}=wk,Sk=an([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Ck}=Sk,Ek=Hl.VectorTileFeature.types,Tk=Math.cos(Math.PI/180*37.5),V_=Math.pow(2,14)/.5;class I1{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new oe,this.layoutVertexArray2=new le,this.indexArray=new Ve,this.programConfigurations=new Or(s.layers,s.zoom),this.segments=new ot,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(s,c,p){this.hasPattern=C1("line",this.layers,c);let y=this.layers[0].layout.get("line-sort-key"),w=!y.isConstant(),k=[];for(let{feature:C,id:A,index:D,sourceLayerIndex:N}of s){let O=this.layers[0]._featureFilter.needGeometry,j=qa(C,O);if(!this.layers[0]._featureFilter.filter(new Ir(this.zoom),j,p))continue;let W=w?y.evaluate(j,{},p):void 0,K={id:A,properties:C.properties,type:C.type,sourceLayerIndex:N,index:D,geometry:O?j.geometry:Ha(C),patterns:{},sortKey:W};k.push(K)}w&&k.sort((C,A)=>C.sortKey-A.sortKey);for(let C of k){let{geometry:A,index:D,sourceLayerIndex:N}=C;if(this.hasPattern){let O=E1("line",this.layers,C,this.zoom,c);this.patternFeatures.push(O)}else this.addFeature(C,A,D,p,{});c.featureIndex.insert(s[D].feature,A,D,N,this.index)}}update(s,c,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,c,this.stateDependentLayers,p)}addFeatures(s,c,p){for(let y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,c,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Ck)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,kk),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,c,p,y,w){let k=this.layers[0].layout,C=k.get("line-join").evaluate(s,{}),A=k.get("line-cap"),D=k.get("line-miter-limit"),N=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(let O of c)this.addLine(O,s,C,A,D,N);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,p,w,y)}addLine(s,c,p,y,w,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<s.length-1;pe++)this.totalDistance+=s[pe].dist(s[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=Ek[c.type]==="Polygon",A=s.length;for(;A>=2&&s[A-1].equals(s[A-2]);)A--;let D=0;for(;D<A-1&&s[D].equals(s[D+1]);)D++;if(A<(C?3:2))return;p==="bevel"&&(w=1.05);let N=this.overscaling<=16?15*Vi/(512*this.overscaling):0,O=this.segments.prepareSegment(10*A,this.layoutVertexArray,this.indexArray),j,W,K,ie,ae;this.e1=this.e2=-1,C&&(j=s[A-2],ae=s[D].sub(j)._unit()._perp());for(let pe=D;pe<A;pe++){if(K=pe===A-1?C?s[D+1]:void 0:s[pe+1],K&&s[pe].equals(K))continue;ae&&(ie=ae),j&&(W=j),j=s[pe],ae=K?K.sub(j)._unit()._perp():ie,ie=ie||ae;let Ie=ie.add(ae);Ie.x===0&&Ie.y===0||Ie._unit();let ye=ie.x*ae.x+ie.y*ae.y,Ee=Ie.x*ae.x+Ie.y*ae.y,Ge=Ee!==0?1/Ee:1/0,et=2*Math.sqrt(2-2*Ee),Lt=Ee<Tk&&W&&K,Xt=ie.x*ae.y-ie.y*ae.x>0;if(Lt&&pe>D){let wt=j.dist(W);if(wt>2*N){let Ht=j.sub(j.sub(W)._mult(N/wt)._round());this.updateDistance(W,Ht),this.addCurrentVertex(Ht,ie,0,0,O),W=Ht}}let Pt=W&&K,Tt=Pt?p:C?"butt":y;if(Pt&&Tt==="round"&&(Ge<k?Tt="miter":Ge<=2&&(Tt="fakeround")),Tt==="miter"&&Ge>w&&(Tt="bevel"),Tt==="bevel"&&(Ge>2&&(Tt="flipbevel"),Ge<w&&(Tt="miter")),W&&this.updateDistance(W,j),Tt==="miter")Ie._mult(Ge),this.addCurrentVertex(j,Ie,0,0,O);else if(Tt==="flipbevel"){if(Ge>100)Ie=ae.mult(-1);else{let wt=Ge*ie.add(ae).mag()/ie.sub(ae).mag();Ie._perp()._mult(wt*(Xt?-1:1))}this.addCurrentVertex(j,Ie,0,0,O),this.addCurrentVertex(j,Ie.mult(-1),0,0,O)}else if(Tt==="bevel"||Tt==="fakeround"){let wt=-Math.sqrt(Ge*Ge-1),Ht=Xt?wt:0,Ct=Xt?0:wt;if(W&&this.addCurrentVertex(j,ie,Ht,Ct,O),Tt==="fakeround"){let mt=Math.round(180*et/Math.PI/20);for(let si=1;si<mt;si++){let ei=si/mt;if(ei!==.5){let Dr=ei-.5;ei+=ei*Dr*(ei-1)*((1.0904+ye*(ye*(3.55645-1.43519*ye)-3.2452))*Dr*Dr+(.848013+ye*(.215638*ye-1.06021)))}let Bi=ae.sub(ie)._mult(ei)._add(ie)._unit()._mult(Xt?-1:1);this.addHalfVertex(j,Bi.x,Bi.y,!1,Xt,0,O)}}K&&this.addCurrentVertex(j,ae,-Ht,-Ct,O)}else if(Tt==="butt")this.addCurrentVertex(j,Ie,0,0,O);else if(Tt==="square"){let wt=W?1:-1;this.addCurrentVertex(j,Ie,wt,wt,O)}else Tt==="round"&&(W&&(this.addCurrentVertex(j,ie,0,0,O),this.addCurrentVertex(j,ie,1,1,O,!0)),K&&(this.addCurrentVertex(j,ae,-1,-1,O,!0),this.addCurrentVertex(j,ae,0,0,O)));if(Lt&&pe<A-1){let wt=j.dist(K);if(wt>2*N){let Ht=j.add(K.sub(j)._mult(N/wt)._round());this.updateDistance(j,Ht),this.addCurrentVertex(Ht,ae,0,0,O),j=Ht}}}}addCurrentVertex(s,c,p,y,w,k=!1){let C=c.y*y-c.x,A=-c.y-c.x*y;this.addHalfVertex(s,c.x+c.y*p,c.y-c.x*p,k,!1,p,w),this.addHalfVertex(s,C,A,k,!0,-y,w),this.distance>V_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,c,p,y,w,k))}addHalfVertex({x:s,y:c},p,y,w,k,C,A){let D=.5*(this.lineClips?this.scaledDistance*(V_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(w?1:0),(c<<1)+(k?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(C===0?0:C<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let N=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,N),A.primitiveLength++),k?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,c){this.distance+=s.dist(c),this.updateScaledDistance()}}let j_,H_;Bt("LineBucket",I1,{omit:["layers","patternFeatures"]});var q_={get paint(){return H_=H_||new Mo({"line-opacity":new li(Ue.paint_line["line-opacity"]),"line-color":new li(Ue.paint_line["line-color"]),"line-translate":new ii(Ue.paint_line["line-translate"]),"line-translate-anchor":new ii(Ue.paint_line["line-translate-anchor"]),"line-width":new li(Ue.paint_line["line-width"]),"line-gap-width":new li(Ue.paint_line["line-gap-width"]),"line-offset":new li(Ue.paint_line["line-offset"]),"line-blur":new li(Ue.paint_line["line-blur"]),"line-dasharray":new ch(Ue.paint_line["line-dasharray"]),"line-pattern":new Ra(Ue.paint_line["line-pattern"]),"line-gradient":new vc(Ue.paint_line["line-gradient"])})},get layout(){return j_=j_||new Mo({"line-cap":new ii(Ue.layout_line["line-cap"]),"line-join":new li(Ue.layout_line["line-join"]),"line-miter-limit":new ii(Ue.layout_line["line-miter-limit"]),"line-round-limit":new ii(Ue.layout_line["line-round-limit"]),"line-sort-key":new li(Ue.layout_line["line-sort-key"])})}};class Mk extends li{possiblyEvaluate(s,c){return c=new Ir(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(s,c)}evaluate(s,c,p,y){return c=je({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(s,c,p,y)}}let Kf;class Ak extends ms{constructor(s){super(s,q_),this.gradientVersion=0,Kf||(Kf=new Mk(q_.paint.properties["line-width"].specification),Kf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){let c=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Eo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,c){super.recalculate(s,c),this.paint._values["line-floorwidth"]=Kf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new I1(s)}queryRadius(s){let c=s,p=$_(kh("line-width",this,c),kh("line-gap-width",this,c)),y=kh("line-offset",this,c);return p/2+Math.abs(y)+Hf(this.paint.get("line-translate"))}queryIntersectsFeature(s,c,p,y,w,k,C){let A=qf(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,C),D=C/2*$_(this.paint.get("line-width").evaluate(c,p),this.paint.get("line-gap-width").evaluate(c,p)),N=this.paint.get("line-offset").evaluate(c,p);return N&&(y=function(O,j){let W=[];for(let K=0;K<O.length;K++){let ie=O[K],ae=[];for(let pe=0;pe<ie.length;pe++){let Ie=ie[pe-1],ye=ie[pe],Ee=ie[pe+1],Ge=pe===0?new b(0,0):ye.sub(Ie)._unit()._perp(),et=pe===ie.length-1?new b(0,0):Ee.sub(ye)._unit()._perp(),Lt=Ge._add(et)._unit(),Xt=Lt.x*et.x+Lt.y*et.y;Xt!==0&&Lt._mult(1/Xt),ae.push(Lt._mult(j)._add(ye))}W.push(ae)}return W}(y,N*C)),function(O,j,W){for(let K=0;K<j.length;K++){let ie=j[K];if(O.length>=3){for(let ae=0;ae<ie.length;ae++)if(Nu(O,ie[ae]))return!0}if(Vf(O,ie,W))return!0}return!1}(A,y,D)}isTileClipped(){return!0}}function $_(l,s){return s>0?s+2*l:l}let Ik=an([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Pk=an([{name:"a_projected_pos",components:3,type:"Float32"}],4);an([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Dk=an([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);an([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Q_=an([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Lk=an([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Fk(l,s,c){return l.sections.forEach(p=>{p.text=function(y,w,k){let C=w.layout.get("text-transform").evaluate(k,{});return C==="uppercase"?y=y.toLocaleUpperCase():C==="lowercase"&&(y=y.toLocaleLowerCase()),Ba.applyArabicShaping&&(y=Ba.applyArabicShaping(y)),y}(p.text,s,c)}),l}an([{name:"triangle",components:3,type:"Uint16"}]),an([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),an([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),an([{type:"Float32",name:"offsetX"}]),an([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),an([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Dh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var _n=24,G_=gr,W_=function(l,s,c,p,y){var w,k,C=8*y-p-1,A=(1<<C)-1,D=A>>1,N=-7,O=c?y-1:0,j=c?-1:1,W=l[s+O];for(O+=j,w=W&(1<<-N)-1,W>>=-N,N+=C;N>0;w=256*w+l[s+O],O+=j,N-=8);for(k=w&(1<<-N)-1,w>>=-N,N+=p;N>0;k=256*k+l[s+O],O+=j,N-=8);if(w===0)w=1-D;else{if(w===A)return k?NaN:1/0*(W?-1:1);k+=Math.pow(2,p),w-=D}return(W?-1:1)*k*Math.pow(2,w-p)},Z_=function(l,s,c,p,y,w){var k,C,A,D=8*w-y-1,N=(1<<D)-1,O=N>>1,j=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,W=p?0:w-1,K=p?1:-1,ie=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(C=isNaN(s)?1:0,k=N):(k=Math.floor(Math.log(s)/Math.LN2),s*(A=Math.pow(2,-k))<1&&(k--,A*=2),(s+=k+O>=1?j/A:j*Math.pow(2,1-O))*A>=2&&(k++,A/=2),k+O>=N?(C=0,k=N):k+O>=1?(C=(s*A-1)*Math.pow(2,y),k+=O):(C=s*Math.pow(2,O-1)*Math.pow(2,y),k=0));y>=8;l[c+W]=255&C,W+=K,C/=256,y-=8);for(k=k<<y|C,D+=y;D>0;l[c+W]=255&k,W+=K,k/=256,D-=8);l[c+W-K]|=128*ie};function gr(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}gr.Varint=0,gr.Fixed64=1,gr.Bytes=2,gr.Fixed32=5;var P1=4294967296,K_=1/P1,J_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Qa(l){return l.type===gr.Bytes?l.readVarint()+l.pos:l.pos+1}function Uu(l,s,c){return c?4294967296*s+(l>>>0):4294967296*(s>>>0)+(l>>>0)}function X_(l,s,c){var p=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));c.realloc(p);for(var y=c.pos-1;y>=l;y--)c.buf[y+p]=c.buf[y]}function zk(l,s){for(var c=0;c<l.length;c++)s.writeVarint(l[c])}function Nk(l,s){for(var c=0;c<l.length;c++)s.writeSVarint(l[c])}function Ok(l,s){for(var c=0;c<l.length;c++)s.writeFloat(l[c])}function Bk(l,s){for(var c=0;c<l.length;c++)s.writeDouble(l[c])}function Rk(l,s){for(var c=0;c<l.length;c++)s.writeBoolean(l[c])}function Uk(l,s){for(var c=0;c<l.length;c++)s.writeFixed32(l[c])}function Vk(l,s){for(var c=0;c<l.length;c++)s.writeSFixed32(l[c])}function jk(l,s){for(var c=0;c<l.length;c++)s.writeFixed64(l[c])}function Hk(l,s){for(var c=0;c<l.length;c++)s.writeSFixed64(l[c])}function Jf(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+16777216*l[s+3]}function Vu(l,s,c){l[c]=s,l[c+1]=s>>>8,l[c+2]=s>>>16,l[c+3]=s>>>24}function Y_(l,s){return(l[s]|l[s+1]<<8|l[s+2]<<16)+(l[s+3]<<24)}gr.prototype={destroy:function(){this.buf=null},readFields:function(l,s,c){for(c=c||this.length;this.pos<c;){var p=this.readVarint(),y=p>>3,w=this.pos;this.type=7&p,l(y,s,this),this.pos===w&&this.skip(p)}return s},readMessage:function(l,s){return this.readFields(l,s,this.readVarint()+this.pos)},readFixed32:function(){var l=Jf(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=Y_(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=Jf(this.buf,this.pos)+Jf(this.buf,this.pos+4)*P1;return this.pos+=8,l},readSFixed64:function(){var l=Jf(this.buf,this.pos)+Y_(this.buf,this.pos+4)*P1;return this.pos+=8,l},readFloat:function(){var l=W_(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=W_(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var s,c,p=this.buf;return s=127&(c=p[this.pos++]),c<128?s:(s|=(127&(c=p[this.pos++]))<<7,c<128?s:(s|=(127&(c=p[this.pos++]))<<14,c<128?s:(s|=(127&(c=p[this.pos++]))<<21,c<128?s:function(y,w,k){var C,A,D=k.buf;if(C=(112&(A=D[k.pos++]))>>4,A<128||(C|=(127&(A=D[k.pos++]))<<3,A<128)||(C|=(127&(A=D[k.pos++]))<<10,A<128)||(C|=(127&(A=D[k.pos++]))<<17,A<128)||(C|=(127&(A=D[k.pos++]))<<24,A<128)||(C|=(1&(A=D[k.pos++]))<<31,A<128))return Uu(y,C,w);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(c=p[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var l=this.readVarint()+this.pos,s=this.pos;return this.pos=l,l-s>=12&&J_?function(c,p,y){return J_.decode(c.subarray(p,y))}(this.buf,s,l):function(c,p,y){for(var w="",k=p;k<y;){var C,A,D,N=c[k],O=null,j=N>239?4:N>223?3:N>191?2:1;if(k+j>y)break;j===1?N<128&&(O=N):j===2?(192&(C=c[k+1]))==128&&(O=(31&N)<<6|63&C)<=127&&(O=null):j===3?(A=c[k+2],(192&(C=c[k+1]))==128&&(192&A)==128&&((O=(15&N)<<12|(63&C)<<6|63&A)<=2047||O>=55296&&O<=57343)&&(O=null)):j===4&&(A=c[k+2],D=c[k+3],(192&(C=c[k+1]))==128&&(192&A)==128&&(192&D)==128&&((O=(15&N)<<18|(63&C)<<12|(63&A)<<6|63&D)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,j=1):O>65535&&(O-=65536,w+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),w+=String.fromCharCode(O),k+=j}return w}(this.buf,s,l)},readBytes:function(){var l=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,l);return this.pos=l,s},readPackedVarint:function(l,s){if(this.type!==gr.Bytes)return l.push(this.readVarint(s));var c=Qa(this);for(l=l||[];this.pos<c;)l.push(this.readVarint(s));return l},readPackedSVarint:function(l){if(this.type!==gr.Bytes)return l.push(this.readSVarint());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==gr.Bytes)return l.push(this.readBoolean());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==gr.Bytes)return l.push(this.readFloat());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==gr.Bytes)return l.push(this.readDouble());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==gr.Bytes)return l.push(this.readFixed32());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==gr.Bytes)return l.push(this.readSFixed32());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==gr.Bytes)return l.push(this.readFixed64());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==gr.Bytes)return l.push(this.readSFixed64());var s=Qa(this);for(l=l||[];this.pos<s;)l.push(this.readSFixed64());return l},skip:function(l){var s=7&l;if(s===gr.Varint)for(;this.buf[this.pos++]>127;);else if(s===gr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===gr.Fixed32)this.pos+=4;else{if(s!==gr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(l,s){this.writeVarint(l<<3|s)},realloc:function(l){for(var s=this.length||16;s<this.pos+l;)s*=2;if(s!==this.length){var c=new Uint8Array(s);c.set(this.buf),this.buf=c,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Vu(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Vu(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Vu(this.buf,-1&l,this.pos),Vu(this.buf,Math.floor(l*K_),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Vu(this.buf,-1&l,this.pos),Vu(this.buf,Math.floor(l*K_),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(s,c){var p,y;if(s>=0?(p=s%4294967296|0,y=s/4294967296|0):(y=~(-s/4294967296),4294967295^(p=~(-s%4294967296))?p=p+1|0:(p=0,y=y+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");c.realloc(10),function(w,k,C){C.buf[C.pos++]=127&w|128,w>>>=7,C.buf[C.pos++]=127&w|128,w>>>=7,C.buf[C.pos++]=127&w|128,w>>>=7,C.buf[C.pos++]=127&w|128,C.buf[C.pos]=127&(w>>>=7)}(p,0,c),function(w,k){var C=(7&w)<<4;k.buf[k.pos++]|=C|((w>>>=3)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w)))))}(y,c)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(!!l)},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var s=this.pos;this.pos=function(p,y,w){for(var k,C,A=0;A<y.length;A++){if((k=y.charCodeAt(A))>55295&&k<57344){if(!C){k>56319||A+1===y.length?(p[w++]=239,p[w++]=191,p[w++]=189):C=k;continue}if(k<56320){p[w++]=239,p[w++]=191,p[w++]=189,C=k;continue}k=C-55296<<10|k-56320|65536,C=null}else C&&(p[w++]=239,p[w++]=191,p[w++]=189,C=null);k<128?p[w++]=k:(k<2048?p[w++]=k>>6|192:(k<65536?p[w++]=k>>12|224:(p[w++]=k>>18|240,p[w++]=k>>12&63|128),p[w++]=k>>6&63|128),p[w++]=63&k|128)}return w}(this.buf,l,this.pos);var c=this.pos-s;c>=128&&X_(s,c,this),this.pos=s-1,this.writeVarint(c),this.pos+=c},writeFloat:function(l){this.realloc(4),Z_(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),Z_(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var s=l.length;this.writeVarint(s),this.realloc(s);for(var c=0;c<s;c++)this.buf[this.pos++]=l[c]},writeRawMessage:function(l,s){this.pos++;var c=this.pos;l(s,this);var p=this.pos-c;p>=128&&X_(c,p,this),this.pos=c-1,this.writeVarint(p),this.pos+=p},writeMessage:function(l,s,c){this.writeTag(l,gr.Bytes),this.writeRawMessage(s,c)},writePackedVarint:function(l,s){s.length&&this.writeMessage(l,zk,s)},writePackedSVarint:function(l,s){s.length&&this.writeMessage(l,Nk,s)},writePackedBoolean:function(l,s){s.length&&this.writeMessage(l,Rk,s)},writePackedFloat:function(l,s){s.length&&this.writeMessage(l,Ok,s)},writePackedDouble:function(l,s){s.length&&this.writeMessage(l,Bk,s)},writePackedFixed32:function(l,s){s.length&&this.writeMessage(l,Uk,s)},writePackedSFixed32:function(l,s){s.length&&this.writeMessage(l,Vk,s)},writePackedFixed64:function(l,s){s.length&&this.writeMessage(l,jk,s)},writePackedSFixed64:function(l,s){s.length&&this.writeMessage(l,Hk,s)},writeBytesField:function(l,s){this.writeTag(l,gr.Bytes),this.writeBytes(s)},writeFixed32Field:function(l,s){this.writeTag(l,gr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(l,s){this.writeTag(l,gr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(l,s){this.writeTag(l,gr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(l,s){this.writeTag(l,gr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(l,s){this.writeTag(l,gr.Varint),this.writeVarint(s)},writeSVarintField:function(l,s){this.writeTag(l,gr.Varint),this.writeSVarint(s)},writeStringField:function(l,s){this.writeTag(l,gr.Bytes),this.writeString(s)},writeFloatField:function(l,s){this.writeTag(l,gr.Fixed32),this.writeFloat(s)},writeDoubleField:function(l,s){this.writeTag(l,gr.Fixed64),this.writeDouble(s)},writeBooleanField:function(l,s){this.writeVarintField(l,!!s)}};var D1=u(G_);let L1=3;function qk(l,s,c){l===1&&c.readMessage($k,s)}function $k(l,s,c){if(l===3){let{id:p,bitmap:y,width:w,height:k,left:C,top:A,advance:D}=c.readMessage(Qk,{});s.push({id:p,bitmap:new Ch({width:w+2*L1,height:k+2*L1},y),metrics:{width:w,height:k,left:C,top:A,advance:D}})}}function Qk(l,s,c){l===1?s.id=c.readVarint():l===2?s.bitmap=c.readBytes():l===3?s.width=c.readVarint():l===4?s.height=c.readVarint():l===5?s.left=c.readSVarint():l===6?s.top=c.readSVarint():l===7&&(s.advance=c.readVarint())}let e3=L1;function t3(l){let s=0,c=0;for(let k of l)s+=k.w*k.h,c=Math.max(c,k.w);l.sort((k,C)=>C.h-k.h);let p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),c),h:1/0}],y=0,w=0;for(let k of l)for(let C=p.length-1;C>=0;C--){let A=p[C];if(!(k.w>A.w||k.h>A.h)){if(k.x=A.x,k.y=A.y,w=Math.max(w,k.y+k.h),y=Math.max(y,k.x+k.w),k.w===A.w&&k.h===A.h){let D=p.pop();C<p.length&&(p[C]=D)}else k.h===A.h?(A.x+=k.w,A.w-=k.w):k.w===A.w?(A.y+=k.h,A.h-=k.h):(p.push({x:A.x+k.w,y:A.y,w:A.w-k.w,h:k.h}),A.y+=k.h,A.h-=k.h);break}}return{w:y,h:w,fill:s/(y*w)||0}}let Go=1;class F1{constructor(s,{pixelRatio:c,version:p,stretchX:y,stretchY:w,content:k}){this.paddedRect=s,this.pixelRatio=c,this.stretchX=y,this.stretchY=w,this.content=k,this.version=p}get tl(){return[this.paddedRect.x+Go,this.paddedRect.y+Go]}get br(){return[this.paddedRect.x+this.paddedRect.w-Go,this.paddedRect.y+this.paddedRect.h-Go]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Go)/this.pixelRatio,(this.paddedRect.h-2*Go)/this.pixelRatio]}}class i3{constructor(s,c){let p={},y={};this.haveRenderCallbacks=[];let w=[];this.addImages(s,p,w),this.addImages(c,y,w);let{w:k,h:C}=t3(w),A=new bs({width:k||1,height:C||1});for(let D in s){let N=s[D],O=p[D].paddedRect;bs.copy(N.data,A,{x:0,y:0},{x:O.x+Go,y:O.y+Go},N.data)}for(let D in c){let N=c[D],O=y[D].paddedRect,j=O.x+Go,W=O.y+Go,K=N.data.width,ie=N.data.height;bs.copy(N.data,A,{x:0,y:0},{x:j,y:W},N.data),bs.copy(N.data,A,{x:0,y:ie-1},{x:j,y:W-1},{width:K,height:1}),bs.copy(N.data,A,{x:0,y:0},{x:j,y:W+ie},{width:K,height:1}),bs.copy(N.data,A,{x:K-1,y:0},{x:j-1,y:W},{width:1,height:ie}),bs.copy(N.data,A,{x:0,y:0},{x:j+K,y:W},{width:1,height:ie})}this.image=A,this.iconPositions=p,this.patternPositions=y}addImages(s,c,p){for(let y in s){let w=s[y],k={x:0,y:0,w:w.data.width+2*Go,h:w.data.height+2*Go};p.push(k),c[y]=new F1(k,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(s,c){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let p in s.updatedImages)this.patchUpdatedImage(this.iconPositions[p],s.getImage(p),c),this.patchUpdatedImage(this.patternPositions[p],s.getImage(p),c)}patchUpdatedImage(s,c,p){if(!s||!c||s.version===c.version)return;s.version=c.version;let[y,w]=s.tl;p.update(c.data,void 0,{x:y,y:w})}}var ql;Bt("ImagePosition",F1),Bt("ImageAtlas",i3),o.ah=void 0,(ql=o.ah||(o.ah={}))[ql.none=0]="none",ql[ql.horizontal=1]="horizontal",ql[ql.vertical=2]="vertical",ql[ql.horizontalOnly=3]="horizontalOnly";let Lh=-17;class Fh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,c){let p=new Fh;return p.scale=s||1,p.fontStack=c,p}static forImage(s){let c=new Fh;return c.imageName=s,c}}class ju{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,c){let p=new ju;for(let y=0;y<s.sections.length;y++){let w=s.sections[y];w.image?p.addImageSection(w):p.addTextSection(w,c)}return p}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let c="";for(let p=0;p<s.length;p++){let y=s.charCodeAt(p+1)||null,w=s.charCodeAt(p-1)||null;c+=y&&nh(y)&&!Dh[s[p+1]]||w&&nh(w)&&!Dh[s[p-1]]||!Dh[s[p]]?s[p]:Dh[s[p]]}return c}(this.text)}trim(){let s=0;for(let p=0;p<this.text.length&&Yf[this.text.charCodeAt(p)];p++)s++;let c=this.text.length;for(let p=this.text.length-1;p>=0&&p>=s&&Yf[this.text.charCodeAt(p)];p--)c--;this.text=this.text.substring(s,c),this.sectionIndex=this.sectionIndex.slice(s,c)}substring(s,c){let p=new ju;return p.text=this.text.substring(s,c),p.sectionIndex=this.sectionIndex.slice(s,c),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,c)=>Math.max(s,this.sections[c].scale),0)}addTextSection(s,c){this.text+=s.text,this.sections.push(Fh.forText(s.scale,s.fontStack||c));let p=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(p)}addImageSection(s){let c=s.image?s.image.name:"";if(c.length===0)return void He("Can't add FormattedSection with an empty image.");let p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Fh.forImage(c)),this.sectionIndex.push(this.sections.length-1)):He("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Xf(l,s,c,p,y,w,k,C,A,D,N,O,j,W,K,ie){let ae=ju.fromFeature(l,y),pe;O===o.ah.vertical&&ae.verticalizePunctuation();let{processBidirectionalText:Ie,processStyledBidirectionalText:ye}=Ba;if(Ie&&ae.sections.length===1){pe=[];let et=Ie(ae.toString(),z1(ae,D,w,s,p,W,K));for(let Lt of et){let Xt=new ju;Xt.text=Lt,Xt.sections=ae.sections;for(let Pt=0;Pt<Lt.length;Pt++)Xt.sectionIndex.push(0);pe.push(Xt)}}else if(ye){pe=[];let et=ye(ae.text,ae.sectionIndex,z1(ae,D,w,s,p,W,K));for(let Lt of et){let Xt=new ju;Xt.text=Lt[0],Xt.sectionIndex=Lt[1],Xt.sections=ae.sections,pe.push(Xt)}}else pe=function(et,Lt){let Xt=[],Pt=et.text,Tt=0;for(let wt of Lt)Xt.push(et.substring(Tt,wt)),Tt=wt;return Tt<Pt.length&&Xt.push(et.substring(Tt,Pt.length)),Xt}(ae,z1(ae,D,w,s,p,W,K));let Ee=[],Ge={positionedLines:Ee,text:ae.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(et,Lt,Xt,Pt,Tt,wt,Ht,Ct,mt,si,ei,Bi){let Dr=0,Br=Lh,xn=0,ds=0,Po=Ct==="right"?1:Ct==="left"?0:.5,fn=0;for(let wn of Tt){wn.trim();let kn=wn.getMaxScale(),po=(kn-1)*_n,Fo={positionedGlyphs:[],lineOffset:0};et.positionedLines[fn]=Fo;let fo=Fo.positionedGlyphs,Wo=0;if(!wn.length()){Br+=wt,++fn;continue}for(let Sn=0;Sn<wn.length();Sn++){let Qi=wn.getSection(Sn),mo=wn.getSectionIndex(Sn),io=wn.getCharCode(Sn),Cn=0,Ds=null,Ys=null,ea=null,Ga=_n,Ls=!(mt===o.ah.horizontal||!ei&&!Tu(io)||ei&&(Yf[io]||(Qn=io,Ft.Arabic(Qn)||Ft["Arabic Supplement"](Qn)||Ft["Arabic Extended-A"](Qn)||Ft["Arabic Presentation Forms-A"](Qn)||Ft["Arabic Presentation Forms-B"](Qn))));if(Qi.imageName){let _s=Pt[Qi.imageName];if(!_s)continue;ea=Qi.imageName,et.iconsInText=et.iconsInText||!0,Ys=_s.paddedRect;let Ko=_s.displaySize;Qi.scale=Qi.scale*_n/Bi,Ds={width:Ko[0],height:Ko[1],left:Go,top:-e3,advance:Ls?Ko[1]:Ko[0]},Cn=po+(_n-Ko[1]*Qi.scale),Ga=Ds.advance;let Wa=Ls?Ko[0]*Qi.scale-_n*kn:Ko[1]*Qi.scale-_n*kn;Wa>0&&Wa>Wo&&(Wo=Wa)}else{let _s=Xt[Qi.fontStack],Ko=_s&&_s[io];if(Ko&&Ko.rect)Ys=Ko.rect,Ds=Ko.metrics;else{let Wa=Lt[Qi.fontStack],Rh=Wa&&Wa[io];if(!Rh)continue;Ds=Rh.metrics}Cn=(kn-Qi.scale)*_n}Ls?(et.verticalizable=!0,fo.push({glyph:io,imageName:ea,x:Dr,y:Br+Cn,vertical:Ls,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:mo,metrics:Ds,rect:Ys}),Dr+=Ga*Qi.scale+si):(fo.push({glyph:io,imageName:ea,x:Dr,y:Br+Cn,vertical:Ls,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:mo,metrics:Ds,rect:Ys}),Dr+=Ds.advance*Qi.scale+si)}fo.length!==0&&(xn=Math.max(Dr-si,xn),Zk(fo,0,fo.length-1,Po,Wo)),Dr=0;let Zo=wt*kn+Wo;Fo.lineOffset=Math.max(Wo,po),Br+=Zo,ds=Math.max(Zo,ds),++fn}var Qn;let to=Br-Lh,{horizontalAlign:Do,verticalAlign:Lo}=N1(Ht);(function(wn,kn,po,Fo,fo,Wo,Zo,Sn,Qi){let mo=(kn-po)*fo,io=0;io=Wo!==Zo?-Sn*Fo-Lh:(-Fo*Qi+.5)*Zo;for(let Cn of wn)for(let Ds of Cn.positionedGlyphs)Ds.x+=mo,Ds.y+=io})(et.positionedLines,Po,Do,Lo,xn,ds,wt,to,Tt.length),et.top+=-Lo*to,et.bottom=et.top+to,et.left+=-Do*xn,et.right=et.left+xn}(Ge,s,c,p,pe,k,C,A,O,D,j,ie),!function(et){for(let Lt of et)if(Lt.positionedGlyphs.length!==0)return!1;return!0}(Ee)&&Ge}let Yf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Gk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function r3(l,s,c,p,y,w){if(s.imageName){let k=p[s.imageName];return k?k.displaySize[0]*s.scale*_n/w+y:0}{let k=c[s.fontStack],C=k&&k[l];return C?C.metrics.advance*s.scale+y:0}}function n3(l,s,c,p){let y=Math.pow(l-s,2);return p?l<s?y/2:2*y:y+Math.abs(c)*c}function Wk(l,s,c){let p=0;return l===10&&(p-=1e4),c&&(p+=150),l!==40&&l!==65288||(p+=50),s!==41&&s!==65289||(p+=50),p}function o3(l,s,c,p,y,w){let k=null,C=n3(s,c,y,w);for(let A of p){let D=n3(s-A.x,c,y,w)+A.badness;D<=C&&(k=A,C=D)}return{index:l,x:s,priorBreak:k,badness:C}}function s3(l){return l?s3(l.priorBreak).concat(l.index):[]}function z1(l,s,c,p,y,w,k){if(w!=="point")return[];if(!l)return[];let C=[],A=function(j,W,K,ie,ae,pe){let Ie=0;for(let ye=0;ye<j.length();ye++){let Ee=j.getSection(ye);Ie+=r3(j.getCharCode(ye),Ee,ie,ae,W,pe)}return Ie/Math.max(1,Math.ceil(Ie/K))}(l,s,c,p,y,k),D=l.text.indexOf("\u200B")>=0,N=0;for(let j=0;j<l.length();j++){let W=l.getSection(j),K=l.getCharCode(j);if(Yf[K]||(N+=r3(K,W,p,y,s,k)),j<l.length()-1){let ie=!((O=K)<11904||!(Ft["Bopomofo Extended"](O)||Ft.Bopomofo(O)||Ft["CJK Compatibility Forms"](O)||Ft["CJK Compatibility Ideographs"](O)||Ft["CJK Compatibility"](O)||Ft["CJK Radicals Supplement"](O)||Ft["CJK Strokes"](O)||Ft["CJK Symbols and Punctuation"](O)||Ft["CJK Unified Ideographs Extension A"](O)||Ft["CJK Unified Ideographs"](O)||Ft["Enclosed CJK Letters and Months"](O)||Ft["Halfwidth and Fullwidth Forms"](O)||Ft.Hiragana(O)||Ft["Ideographic Description Characters"](O)||Ft["Kangxi Radicals"](O)||Ft["Katakana Phonetic Extensions"](O)||Ft.Katakana(O)||Ft["Vertical Forms"](O)||Ft["Yi Radicals"](O)||Ft["Yi Syllables"](O)));(Gk[K]||ie||W.imageName)&&C.push(o3(j+1,N,A,C,Wk(K,l.getCharCode(j+1),ie&&D),!1))}}var O;return s3(o3(l.length(),N,A,C,0,!0))}function N1(l){let s=.5,c=.5;switch(l){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:s,verticalAlign:c}}function Zk(l,s,c,p,y){if(!p&&!y)return;let w=l[c],k=(l[c].x+w.metrics.advance*w.scale)*p;for(let C=s;C<=c;C++)l[C].x-=k,l[C].y+=y}function Kk(l,s,c){let{horizontalAlign:p,verticalAlign:y}=N1(c),w=s[0]-l.displaySize[0]*p,k=s[1]-l.displaySize[1]*y;return{image:l,top:k,bottom:k+l.displaySize[1],left:w,right:w+l.displaySize[0]}}function a3(l,s,c,p,y,w){let k=l.image,C;if(k.content){let ae=k.content,pe=k.pixelRatio||1;C=[ae[0]/pe,ae[1]/pe,k.displaySize[0]-ae[2]/pe,k.displaySize[1]-ae[3]/pe]}let A=s.left*w,D=s.right*w,N,O,j,W;c==="width"||c==="both"?(W=y[0]+A-p[3],O=y[0]+D+p[1]):(W=y[0]+(A+D-k.displaySize[0])/2,O=W+k.displaySize[0]);let K=s.top*w,ie=s.bottom*w;return c==="height"||c==="both"?(N=y[1]+K-p[0],j=y[1]+ie+p[2]):(N=y[1]+(K+ie-k.displaySize[1])/2,j=N+k.displaySize[1]),{image:k,top:N,right:O,bottom:j,left:W,collisionPadding:C}}let zh=255,va=128,$l=zh*va;function l3(l,s){let{expression:c}=s;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Ir(l+1))};if(c.kind==="source")return{kind:"source"};{let{zoomStops:p,interpolationType:y}=c,w=0;for(;w<p.length&&p[w]<=l;)w++;w=Math.max(0,w-1);let k=w;for(;k<p.length&&p[k]<l+1;)k++;k=Math.min(p.length-1,k);let C=p[w],A=p[k];return c.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:A,interpolationType:y}:{kind:"camera",minZoom:C,maxZoom:A,minSize:c.evaluate(new Ir(C)),maxSize:c.evaluate(new Ir(A)),interpolationType:y}}}function O1(l,s,c){let p="never",y=l.get(s);return y?p=y:l.get(c)&&(p="always"),p}let Jk=Hl.VectorTileFeature.types,Xk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function e0(l,s,c,p,y,w,k,C,A,D,N,O,j){let W=C?Math.min($l,Math.round(C[0])):0,K=C?Math.min($l,Math.round(C[1])):0;l.emplaceBack(s,c,Math.round(32*p),Math.round(32*y),w,k,(W<<1)+(A?1:0),K,16*D,16*N,256*O,256*j)}function B1(l,s,c){l.emplaceBack(s.x,s.y,c),l.emplaceBack(s.x,s.y,c),l.emplaceBack(s.x,s.y,c),l.emplaceBack(s.x,s.y,c)}function Yk(l){for(let s of l.sections)if(Lf(s.text))return!0;return!1}class R1{constructor(s){this.layoutVertexArray=new ve,this.indexArray=new Ve,this.programConfigurations=s,this.segments=new ot,this.dynamicLayoutVertexArray=new Oe,this.opacityVertexArray=new he,this.hasVisibleVertices=!1,this.placedSymbolArray=new a}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,c,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ik.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,Pk.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Xk,!0),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Bt("SymbolBuffers",R1);class U1{constructor(s,c,p){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new p,this.segments=new ot,this.collisionVertexArray=new Re}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Dk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Bt("CollisionBuffers",U1);class Hu{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(k=>k.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=y1([]),this.placementViewportMatrix=y1([]);let c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=l3(this.zoom,c["text-size"]),this.iconSizeData=l3(this.zoom,c["icon-size"]);let p=this.layers[0].layout,y=p.get("symbol-sort-key"),w=p.get("symbol-z-order");this.canOverlap=O1(p,"text-overlap","text-allow-overlap")!=="never"||O1(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(k=>o.ah[k])),this.stateDependentLayerIds=this.layers.filter(k=>k.isStateDependent()).map(k=>k.id),this.sourceID=s.sourceID}createArrays(){this.text=new R1(new Or(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new R1(new Or(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new g,this.lineVertexArray=new x,this.symbolInstances=new f,this.textAnchorOffsets=new M}calculateGlyphDependencies(s,c,p,y,w){for(let k=0;k<s.length;k++)if(c[s.charCodeAt(k)]=!0,(p||y)&&w){let C=Dh[s.charAt(k)];C&&(c[C.charCodeAt(0)]=!0)}}populate(s,c,p){let y=this.layers[0],w=y.layout,k=w.get("text-font"),C=w.get("text-field"),A=w.get("icon-image"),D=(C.value.kind!=="constant"||C.value.value instanceof jn&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),N=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,O=w.get("symbol-sort-key");if(this.features=[],!D&&!N)return;let j=c.iconDependencies,W=c.glyphDependencies,K=c.availableImages,ie=new Ir(this.zoom);for(let{feature:ae,id:pe,index:Ie,sourceLayerIndex:ye}of s){let Ee=y._featureFilter.needGeometry,Ge=qa(ae,Ee);if(!y._featureFilter.filter(ie,Ge,p))continue;let et,Lt;if(Ee||(Ge.geometry=Ha(ae)),D){let Pt=y.getValueAndResolveTokens("text-field",Ge,p,K),Tt=jn.factory(Pt),wt=this.hasRTLText=this.hasRTLText||Yk(Tt);(!wt||Ba.getRTLTextPluginStatus()==="unavailable"||wt&&Ba.isParsed())&&(et=Fk(Tt,y,Ge))}if(N){let Pt=y.getValueAndResolveTokens("icon-image",Ge,p,K);Lt=Pt instanceof Jn?Pt:Jn.fromString(Pt)}if(!et&&!Lt)continue;let Xt=this.sortFeaturesByKey?O.evaluate(Ge,{},p):void 0;if(this.features.push({id:pe,text:et,icon:Lt,index:Ie,sourceLayerIndex:ye,geometry:Ge.geometry,properties:ae.properties,type:Jk[ae.type],sortKey:Xt}),Lt&&(j[Lt.name]=!0),et){let Pt=k.evaluate(Ge,{},p).join(","),Tt=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(let wt of et.sections)if(wt.image)j[wt.image.name]=!0;else{let Ht=yc(et.toString()),Ct=wt.fontStack||Pt,mt=W[Ct]=W[Ct]||{};this.calculateGlyphDependencies(wt.text,mt,Tt,this.allowVerticalPlacement,Ht)}}}w.get("symbol-placement")==="line"&&(this.features=function(ae){let pe={},Ie={},ye=[],Ee=0;function Ge(Pt){ye.push(ae[Pt]),Ee++}function et(Pt,Tt,wt){let Ht=Ie[Pt];return delete Ie[Pt],Ie[Tt]=Ht,ye[Ht].geometry[0].pop(),ye[Ht].geometry[0]=ye[Ht].geometry[0].concat(wt[0]),Ht}function Lt(Pt,Tt,wt){let Ht=pe[Tt];return delete pe[Tt],pe[Pt]=Ht,ye[Ht].geometry[0].shift(),ye[Ht].geometry[0]=wt[0].concat(ye[Ht].geometry[0]),Ht}function Xt(Pt,Tt,wt){let Ht=wt?Tt[0][Tt[0].length-1]:Tt[0][0];return`${Pt}:${Ht.x}:${Ht.y}`}for(let Pt=0;Pt<ae.length;Pt++){let Tt=ae[Pt],wt=Tt.geometry,Ht=Tt.text?Tt.text.toString():null;if(!Ht){Ge(Pt);continue}let Ct=Xt(Ht,wt),mt=Xt(Ht,wt,!0);if(Ct in Ie&&mt in pe&&Ie[Ct]!==pe[mt]){let si=Lt(Ct,mt,wt),ei=et(Ct,mt,ye[si].geometry);delete pe[Ct],delete Ie[mt],Ie[Xt(Ht,ye[ei].geometry,!0)]=ei,ye[si].geometry=null}else Ct in Ie?et(Ct,mt,wt):mt in pe?Lt(Ct,mt,wt):(Ge(Pt),pe[Ct]=Ee-1,Ie[mt]=Ee-1)}return ye.filter(Pt=>Pt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ae,pe)=>ae.sortKey-pe.sortKey)}update(s,c,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,c,this.layers,p),this.icon.programConfigurations.updatePaintArrays(s,c,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,c){let p=this.lineVertexArray.length;if(s.segment!==void 0){let y=s.dist(c[s.segment+1]),w=s.dist(c[s.segment]),k={};for(let C=s.segment+1;C<c.length;C++)k[C]={x:c[C].x,y:c[C].y,tileUnitDistanceFromAnchor:y},C<c.length-1&&(y+=c[C+1].dist(c[C]));for(let C=s.segment||0;C>=0;C--)k[C]={x:c[C].x,y:c[C].y,tileUnitDistanceFromAnchor:w},C>0&&(w+=c[C-1].dist(c[C]));for(let C=0;C<c.length;C++){let A=k[C];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(s,c,p,y,w,k,C,A,D,N,O,j){let W=s.indexArray,K=s.layoutVertexArray,ie=s.segments.prepareSegment(4*c.length,K,W,this.canOverlap?k.sortKey:void 0),ae=this.glyphOffsetArray.length,pe=ie.vertexLength,Ie=this.allowVerticalPlacement&&C===o.ah.vertical?Math.PI/2:0,ye=k.text&&k.text.sections;for(let Ee=0;Ee<c.length;Ee++){let{tl:Ge,tr:et,bl:Lt,br:Xt,tex:Pt,pixelOffsetTL:Tt,pixelOffsetBR:wt,minFontScaleX:Ht,minFontScaleY:Ct,glyphOffset:mt,isSDF:si,sectionIndex:ei}=c[Ee],Bi=ie.vertexLength,Dr=mt[1];e0(K,A.x,A.y,Ge.x,Dr+Ge.y,Pt.x,Pt.y,p,si,Tt.x,Tt.y,Ht,Ct),e0(K,A.x,A.y,et.x,Dr+et.y,Pt.x+Pt.w,Pt.y,p,si,wt.x,Tt.y,Ht,Ct),e0(K,A.x,A.y,Lt.x,Dr+Lt.y,Pt.x,Pt.y+Pt.h,p,si,Tt.x,wt.y,Ht,Ct),e0(K,A.x,A.y,Xt.x,Dr+Xt.y,Pt.x+Pt.w,Pt.y+Pt.h,p,si,wt.x,wt.y,Ht,Ct),B1(s.dynamicLayoutVertexArray,A,Ie),W.emplaceBack(Bi,Bi+1,Bi+2),W.emplaceBack(Bi+1,Bi+2,Bi+3),ie.vertexLength+=4,ie.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mt[0]),Ee!==c.length-1&&ei===c[Ee+1].sectionIndex||s.programConfigurations.populatePaintArrays(K.length,k,k.index,{},j,ye&&ye[ei])}s.placedSymbolArray.emplaceBack(A.x,A.y,ae,this.glyphOffsetArray.length-ae,pe,D,N,A.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],C,0,!1,0,O)}_addCollisionDebugVertex(s,c,p,y,w,k){return c.emplaceBack(0,0),s.emplaceBack(p.x,p.y,y,w,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(s,c,p,y,w,k,C){let A=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),D=A.vertexLength,N=w.layoutVertexArray,O=w.collisionVertexArray,j=C.anchorX,W=C.anchorY;this._addCollisionDebugVertex(N,O,k,j,W,new b(s,c)),this._addCollisionDebugVertex(N,O,k,j,W,new b(p,c)),this._addCollisionDebugVertex(N,O,k,j,W,new b(p,y)),this._addCollisionDebugVertex(N,O,k,j,W,new b(s,y)),A.vertexLength+=4;let K=w.indexArray;K.emplaceBack(D,D+1),K.emplaceBack(D+1,D+2),K.emplaceBack(D+2,D+3),K.emplaceBack(D+3,D),A.primitiveLength+=4}addDebugCollisionBoxes(s,c,p,y){for(let w=s;w<c;w++){let k=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,y?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new U1(Te,Q_.members,Qe),this.iconCollisionBox=new U1(Te,Q_.members,Qe);for(let s=0;s<this.symbolInstances.length;s++){let c=this.symbolInstances.get(s);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(s,c,p,y,w,k,C,A,D){let N={};for(let O=c;O<p;O++){let j=s.get(O);N.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},N.textFeatureIndex=j.featureIndex;break}for(let O=y;O<w;O++){let j=s.get(O);N.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},N.verticalTextFeatureIndex=j.featureIndex;break}for(let O=k;O<C;O++){let j=s.get(O);N.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},N.iconFeatureIndex=j.featureIndex;break}for(let O=A;O<D;O++){let j=s.get(O);N.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},N.verticalIconFeatureIndex=j.featureIndex;break}return N}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){let p=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,c){let p=s.placedSymbolArray.get(c),y=p.vertexStartIndex+4*p.numGlyphs;for(let w=p.vertexStartIndex;w<y;w+=4)s.indexArray.emplaceBack(w,w+1,w+2),s.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let c=Math.sin(s),p=Math.cos(s),y=[],w=[],k=[];for(let C=0;C<this.symbolInstances.length;++C){k.push(C);let A=this.symbolInstances.get(C);y.push(0|Math.round(c*A.anchorX+p*A.anchorY)),w.push(A.featureIndex)}return k.sort((C,A)=>y[C]-y[A]||w[A]-w[C]),k}addToSortKeyRanges(s,c){let p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===c?p.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let c of this.symbolInstanceIndexes){let p=this.symbolInstances.get(c);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((y,w,k)=>{y>=0&&k.indexOf(y)===w&&this.addIndicesForPlacedSymbol(this.text,y)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let c3,u3;Bt("SymbolBucket",Hu,{omit:["layers","collisionBoxArray","features","compareText"]}),Hu.MAX_GLYPHS=65535,Hu.addDynamicAttributes=B1;var V1={get paint(){return u3=u3||new Mo({"icon-opacity":new li(Ue.paint_symbol["icon-opacity"]),"icon-color":new li(Ue.paint_symbol["icon-color"]),"icon-halo-color":new li(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new li(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new li(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new ii(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new ii(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new li(Ue.paint_symbol["text-opacity"]),"text-color":new li(Ue.paint_symbol["text-color"],{runtimeType:At,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new li(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new li(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new li(Ue.paint_symbol["text-halo-blur"]),"text-translate":new ii(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new ii(Ue.paint_symbol["text-translate-anchor"])})},get layout(){return c3=c3||new Mo({"symbol-placement":new ii(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new ii(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ii(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new li(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ii(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ii(Ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new ii(Ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new ii(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new ii(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ii(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new li(Ue.layout_symbol["icon-size"]),"icon-text-fit":new ii(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ii(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new li(Ue.layout_symbol["icon-image"]),"icon-rotate":new li(Ue.layout_symbol["icon-rotate"]),"icon-padding":new li(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new ii(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new li(Ue.layout_symbol["icon-offset"]),"icon-anchor":new li(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ii(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ii(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ii(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new li(Ue.layout_symbol["text-field"]),"text-font":new li(Ue.layout_symbol["text-font"]),"text-size":new li(Ue.layout_symbol["text-size"]),"text-max-width":new li(Ue.layout_symbol["text-max-width"]),"text-line-height":new ii(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new li(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new li(Ue.layout_symbol["text-justify"]),"text-radial-offset":new li(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ii(Ue.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new li(Ue.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new li(Ue.layout_symbol["text-anchor"]),"text-max-angle":new ii(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new ii(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new li(Ue.layout_symbol["text-rotate"]),"text-padding":new ii(Ue.layout_symbol["text-padding"]),"text-keep-upright":new ii(Ue.layout_symbol["text-keep-upright"]),"text-transform":new li(Ue.layout_symbol["text-transform"]),"text-offset":new li(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new ii(Ue.layout_symbol["text-allow-overlap"]),"text-overlap":new ii(Ue.layout_symbol["text-overlap"]),"text-ignore-placement":new ii(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new ii(Ue.layout_symbol["text-optional"])})}};class d3{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:ko,this.defaultValue=s}evaluate(s){if(s.formattedSection){let c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Bt("FormatSectionOverride",d3,{omit:["defaultValue"]});class t0 extends ms{constructor(s){super(s,V1)}recalculate(s,c){if(super.recalculate(s,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let p=this.layout.get("text-writing-mode");if(p){let y=[];for(let w of p)y.indexOf(w)<0&&y.push(w);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,c,p,y){let w=this.layout.get(s).evaluate(c,{},p,y),k=this._unevaluatedLayout._values[s];return k.isDataDriven()||Er(k.value)||!w?w:function(C,A){return A.replace(/{([^{}]+)}/g,(D,N)=>C&&N in C?String(C[N]):"")}(c.properties,w)}createBucket(s){return new Hu(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let s of V1.paint.overridableProperties){if(!t0.hasPaintOverride(this.layout,s))continue;let c=this.paint.get(s),p=new d3(c),y=new pc(p,c.property.specification),w=null;w=c.value.kind==="constant"||c.value.kind==="source"?new Pl("source",y):new _u("composite",y,c.value.zoomStops),this.paint._values[s]=new fs(c.property,w,c.parameters)}}_handleOverridablePaintPropertyUpdate(s,c,p){return!(!this.layout||c.isDataDriven()||p.isDataDriven())&&t0.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,c){let p=s.get("text-field"),y=V1.paint.properties[c],w=!1,k=C=>{for(let A of C)if(y.overrides&&y.overrides.hasOverride(A))return void(w=!0)};if(p.value.kind==="constant"&&p.value.value instanceof jn)k(p.value.value.sections);else if(p.value.kind==="source"){let C=D=>{w||(D instanceof zr&&ci(D.value)===zi?k(D.value.sections):D instanceof vu?k(D.sections):D.eachChild(C))},A=p.value;A._styleExpression&&C(A._styleExpression.expression)}return w}}let h3;var eS={get paint(){return h3=h3||new Mo({"background-color":new ii(Ue.paint_background["background-color"]),"background-pattern":new ch(Ue.paint_background["background-pattern"]),"background-opacity":new ii(Ue.paint_background["background-opacity"])})}};class tS extends ms{constructor(s){super(s,eS)}}let p3;var iS={get paint(){return p3=p3||new Mo({"raster-opacity":new ii(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new ii(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ii(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ii(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new ii(Ue.paint_raster["raster-saturation"]),"raster-contrast":new ii(Ue.paint_raster["raster-contrast"]),"raster-resampling":new ii(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new ii(Ue.paint_raster["raster-fade-duration"])})}};class rS extends ms{constructor(s){super(s,iS)}}class nS extends ms{constructor(s){super(s,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class oS{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let j1=63710088e-1;class Ql{constructor(s,c){if(isNaN(s)||isNaN(c))throw new Error(`Invalid LngLat object: (${s}, ${c})`);if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ql(Y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){let c=Math.PI/180,p=this.lat*c,y=s.lat*c,w=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((s.lng-this.lng)*c);return j1*Math.acos(Math.min(w,1))}static convert(s){if(s instanceof Ql)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Ql(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Ql(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let f3=2*Math.PI*j1;function m3(l){return f3*Math.cos(l*Math.PI/180)}function g3(l){return(180+l)/360}function y3(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function b3(l,s){return l/m3(s)}function H1(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}class i0{constructor(s,c,p=0){this.x=+s,this.y=+c,this.z=+p}static fromLngLat(s,c=0){let p=Ql.convert(s);return new i0(g3(p.lng),y3(p.lat),b3(c,p.lat))}toLngLat(){return new Ql(360*this.x-180,H1(this.y))}toAltitude(){return this.z*m3(H1(this.y))}meterInMercatorCoordinateUnits(){return 1/f3*(s=H1(this.y),1/Math.cos(s*Math.PI/180));var s}}function v3(l,s,c){var p=2*Math.PI*6378137/256/Math.pow(2,c);return[l*p-2*Math.PI*6378137/2,s*p-2*Math.PI*6378137/2]}class q1{constructor(s,c,p){if(s<0||s>25||p<0||p>=Math.pow(2,s)||c<0||c>=Math.pow(2,s))throw new Error(`x=${c}, y=${p}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=c,this.y=p,this.key=Nh(0,s,s,c,p)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,c,p){let y=(k=this.y,C=this.z,A=v3(256*(w=this.x),256*(k=Math.pow(2,C)-k-1),C),D=v3(256*(w+1),256*(k+1),C),A[0]+","+A[1]+","+D[0]+","+D[1]);var w,k,C,A,D;let N=function(O,j,W){let K,ie="";for(let ae=O;ae>0;ae--)K=1<<ae-1,ie+=(j&K?1:0)+(W&K?2:0);return ie}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,y)}isChildOf(s){let c=this.z-s.z;return c>0&&s.x===this.x>>c&&s.y===this.y>>c}getTilePoint(s){let c=Math.pow(2,this.z);return new b((s.x*c-this.x)*Vi,(s.y*c-this.y)*Vi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class _3{constructor(s,c){this.wrap=s,this.canonical=c,this.key=Nh(s,c.z,c.z,c.x,c.y)}}class vs{constructor(s,c,p,y,w){if(s<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${p}`);this.overscaledZ=s,this.wrap=c,this.canonical=new q1(p,+y,+w),this.key=Nh(c,s,p,y,w)}clone(){return new vs(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let c=this.canonical.z-s;return s>this.canonical.z?new vs(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new vs(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(s,c){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);let p=this.canonical.z-s;return s>this.canonical.z?Nh(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y):Nh(this.wrap*+c,s,s,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(s){if(s.wrap!==this.wrap)return!1;let c=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c}children(s){if(this.overscaledZ>=s)return[new vs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let c=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new vs(c,this.wrap,c,p,y),new vs(c,this.wrap,c,p+1,y),new vs(c,this.wrap,c,p,y+1),new vs(c,this.wrap,c,p+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new vs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new vs(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new _3(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new i0(s.x-this.wrap,s.y))}}function Nh(l,s,c,p,y){(l*=2)<0&&(l=-1*l-1);let w=1<<c;return(w*w*l+w*y+p).toString(36)+c.toString(36)+s.toString(36)}Bt("CanonicalTileID",q1),Bt("OverscaledTileID",vs,{omit:["posMatrix"]});class x3{constructor(s,c,p,y=1,w=1,k=1,C=0){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void He(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;let A=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=w,this.blueFactor=k,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<A;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(A,D)]=this.data[this._idx(A-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,A)]=this.data[this._idx(D,A-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(A,-1)]=this.data[this._idx(A-1,0)],this.data[this._idx(-1,A)]=this.data[this._idx(0,A-1)],this.data[this._idx(A,A)]=this.data[this._idx(A-1,A-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<A;D++)for(let N=0;N<A;N++){let O=this.get(D,N);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(s,c){let p=new Uint8Array(this.data.buffer),y=4*this._idx(s,c);return this.unpack(p[y],p[y+1],p[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(s+1)}unpack(s,c,p){return s*this.redFactor+c*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new bs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,c,p){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=c*this.dim,w=c*this.dim+this.dim,k=p*this.dim,C=p*this.dim+this.dim;switch(c){case-1:y=w-1;break;case 1:w=y+1}switch(p){case-1:k=C-1;break;case 1:C=k+1}let A=-c*this.dim,D=-p*this.dim;for(let N=k;N<C;N++)for(let O=y;O<w;O++)this.data[this._idx(O,N)]=s.data[this._idx(O+A,N+D)]}}Bt("DEMData",x3);class w3{constructor(s){this._stringToNumber={},this._numberToString=[];for(let c=0;c<s.length;c++){let p=s[c];this._stringToNumber[p]=c,this._numberToString[c]=p}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class k3{constructor(s,c,p,y,w){this.type="Feature",this._vectorTileFeature=s,s._z=c,s._x=p,s._y=y,this.properties=s.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){let s={geometry:this.geometry};for(let c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(s[c]=this[c]);return s}}class S3{constructor(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Js(Vi,16,0),this.grid3D=new Js(Vi,16,0),this.featureIndexArray=new z,this.promoteId=c}insert(s,c,p,y,w,k){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,w);let A=k?this.grid3D:this.grid;for(let D=0;D<c.length;D++){let N=c[D],O=[1/0,1/0,-1/0,-1/0];for(let j=0;j<N.length;j++){let W=N[j];O[0]=Math.min(O[0],W.x),O[1]=Math.min(O[1],W.y),O[2]=Math.max(O[2],W.x),O[3]=Math.max(O[3],W.y)}O[0]<Vi&&O[1]<Vi&&O[2]>=0&&O[3]>=0&&A.insert(C,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Hl.VectorTile(new D1(this.rawTileData)).layers,this.sourceLayerCoder=new w3(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,c,p,y){this.loadVTLayers();let w=s.params||{},k=Vi/s.tileSize/s.scale,C=ku(w.filter),A=s.queryGeometry,D=s.queryPadding*k,N=E3(A),O=this.grid.query(N.minX-D,N.minY-D,N.maxX+D,N.maxY+D),j=E3(s.cameraQueryGeometry),W=this.grid3D.query(j.minX-D,j.minY-D,j.maxX+D,j.maxY+D,(ae,pe,Ie,ye)=>function(Ee,Ge,et,Lt,Xt){for(let Tt of Ee)if(Ge<=Tt.x&&et<=Tt.y&&Lt>=Tt.x&&Xt>=Tt.y)return!0;let Pt=[new b(Ge,et),new b(Ge,Xt),new b(Lt,Xt),new b(Lt,et)];if(Ee.length>2){for(let Tt of Pt)if(Nu(Ee,Tt))return!0}for(let Tt=0;Tt<Ee.length-1;Tt++)if(O7(Ee[Tt],Ee[Tt+1],Pt))return!0;return!1}(s.cameraQueryGeometry,ae-D,pe-D,Ie+D,ye+D));for(let ae of W)O.push(ae);O.sort(sS);let K={},ie;for(let ae=0;ae<O.length;ae++){let pe=O[ae];if(pe===ie)continue;ie=pe;let Ie=this.featureIndexArray.get(pe),ye=null;this.loadMatchingFeature(K,Ie.bucketIndex,Ie.sourceLayerIndex,Ie.featureIndex,C,w.layers,w.availableImages,c,p,y,(Ee,Ge,et)=>(ye||(ye=Ha(Ee)),Ge.queryIntersectsFeature(A,Ee,et,ye,this.z,s.transform,k,s.pixelPosMatrix)))}return K}loadMatchingFeature(s,c,p,y,w,k,C,A,D,N,O){let j=this.bucketLayerIDs[c];if(k&&!function(ae,pe){for(let Ie=0;Ie<ae.length;Ie++)if(pe.indexOf(ae[Ie])>=0)return!0;return!1}(k,j))return;let W=this.sourceLayerCoder.decode(p),K=this.vtLayers[W].feature(y);if(w.needGeometry){let ae=qa(K,!0);if(!w.filter(new Ir(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!w.filter(new Ir(this.tileID.overscaledZ),K))return;let ie=this.getId(K,W);for(let ae=0;ae<j.length;ae++){let pe=j[ae];if(k&&k.indexOf(pe)<0)continue;let Ie=A[pe];if(!Ie)continue;let ye={};ie&&N&&(ye=N.getState(Ie.sourceLayer||"_geojsonTileLayer",ie));let Ee=je({},D[pe]);Ee.paint=C3(Ee.paint,Ie.paint,K,ye,C),Ee.layout=C3(Ee.layout,Ie.layout,K,ye,C);let Ge=!O||O(K,Ie,ye);if(!Ge)continue;let et=new k3(K,this.z,this.x,this.y,ie);et.layer=Ee;let Lt=s[pe];Lt===void 0&&(Lt=s[pe]=[]),Lt.push({featureIndex:y,feature:et,intersectionZ:Ge})}}lookupSymbolFeatures(s,c,p,y,w,k,C,A){let D={};this.loadVTLayers();let N=ku(w);for(let O of s)this.loadMatchingFeature(D,p,y,O,N,k,C,A,c);return D}hasLayer(s){for(let c of this.bucketLayerIDs)for(let p of c)if(s===p)return!0;return!1}getId(s,c){let p=s.id;return this.promoteId&&(p=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof p=="boolean"&&(p=Number(p))),p}}function C3(l,s,c,p,y){return xe(l,(w,k)=>{let C=s instanceof bc?s.get(k):null;return C&&C.evaluate?C.evaluate(c,p,y):C})}function E3(l){let s=1/0,c=1/0,p=-1/0,y=-1/0;for(let w of l)s=Math.min(s,w.x),c=Math.min(c,w.y),p=Math.max(p,w.x),y=Math.max(y,w.y);return{minX:s,minY:c,maxX:p,maxY:y}}function sS(l,s){return s-l}function T3(l,s,c,p,y){let w=[];for(let k=0;k<l.length;k++){let C=l[k],A;for(let D=0;D<C.length-1;D++){let N=C[D],O=C[D+1];N.x<s&&O.x<s||(N.x<s?N=new b(s,N.y+(s-N.x)/(O.x-N.x)*(O.y-N.y))._round():O.x<s&&(O=new b(s,N.y+(s-N.x)/(O.x-N.x)*(O.y-N.y))._round()),N.y<c&&O.y<c||(N.y<c?N=new b(N.x+(c-N.y)/(O.y-N.y)*(O.x-N.x),c)._round():O.y<c&&(O=new b(N.x+(c-N.y)/(O.y-N.y)*(O.x-N.x),c)._round()),N.x>=p&&O.x>=p||(N.x>=p?N=new b(p,N.y+(p-N.x)/(O.x-N.x)*(O.y-N.y))._round():O.x>=p&&(O=new b(p,N.y+(p-N.x)/(O.x-N.x)*(O.y-N.y))._round()),N.y>=y&&O.y>=y||(N.y>=y?N=new b(N.x+(y-N.y)/(O.y-N.y)*(O.x-N.x),y)._round():O.y>=y&&(O=new b(N.x+(y-N.y)/(O.y-N.y)*(O.x-N.x),y)._round()),A&&N.equals(A[A.length-1])||(A=[N],w.push(A)),A.push(O)))))}}return w}Bt("FeatureIndex",S3,{omit:["rawTileData","sourceLayerCoder"]});class Gl extends b{constructor(s,c,p,y){super(s,c),this.angle=p,y!==void 0&&(this.segment=y)}clone(){return new Gl(this.x,this.y,this.angle,this.segment)}}function M3(l,s,c,p,y){if(s.segment===void 0||c===0)return!0;let w=s,k=s.segment+1,C=0;for(;C>-c/2;){if(k--,k<0)return!1;C-=l[k].dist(w),w=l[k]}C+=l[k].dist(l[k+1]),k++;let A=[],D=0;for(;C<c/2;){let N=l[k],O=l[k+1];if(!O)return!1;let j=l[k-1].angleTo(N)-N.angleTo(O);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),A.push({distance:C,angleDelta:j}),D+=j;C-A[0].distance>p;)D-=A.shift().angleDelta;if(D>y)return!1;k++,C+=N.dist(O)}return!0}function A3(l){let s=0;for(let c=0;c<l.length-1;c++)s+=l[c].dist(l[c+1]);return s}function I3(l,s,c){return l?.6*s*c:0}function P3(l,s){return Math.max(l?l.right-l.left:0,s?s.right-s.left:0)}function aS(l,s,c,p,y,w){let k=I3(c,y,w),C=P3(c,p)*w,A=0,D=A3(l)/2;for(let N=0;N<l.length-1;N++){let O=l[N],j=l[N+1],W=O.dist(j);if(A+W>D){let K=(D-A)/W,ie=$n.number(O.x,j.x,K),ae=$n.number(O.y,j.y,K),pe=new Gl(ie,ae,j.angleTo(O),N);return pe._round(),!k||M3(l,pe,C,k,s)?pe:void 0}A+=W}}function lS(l,s,c,p,y,w,k,C,A){let D=I3(p,w,k),N=P3(p,y),O=N*k,j=l[0].x===0||l[0].x===A||l[0].y===0||l[0].y===A;return s-O<s/4&&(s=O+s/4),D3(l,j?s/2*C%s:(N/2+2*w)*k*C%s,s,D,c,O,j,!1,A)}function D3(l,s,c,p,y,w,k,C,A){let D=w/2,N=A3(l),O=0,j=s-c,W=[];for(let K=0;K<l.length-1;K++){let ie=l[K],ae=l[K+1],pe=ie.dist(ae),Ie=ae.angleTo(ie);for(;j+c<O+pe;){j+=c;let ye=(j-O)/pe,Ee=$n.number(ie.x,ae.x,ye),Ge=$n.number(ie.y,ae.y,ye);if(Ee>=0&&Ee<A&&Ge>=0&&Ge<A&&j-D>=0&&j+D<=N){let et=new Gl(Ee,Ge,Ie,K);et._round(),p&&!M3(l,et,w,p,y)||W.push(et)}}O+=pe}return C||W.length||k||(W=D3(l,O/2,c,p,y,w,k,!0,A)),W}Bt("Anchor",Gl);let qu=Go;function L3(l,s,c,p){let y=[],w=l.image,k=w.pixelRatio,C=w.paddedRect.w-2*qu,A=w.paddedRect.h-2*qu,D=l.right-l.left,N=l.bottom-l.top,O=w.stretchX||[[0,C]],j=w.stretchY||[[0,A]],W=(wt,Ht)=>wt+Ht[1]-Ht[0],K=O.reduce(W,0),ie=j.reduce(W,0),ae=C-K,pe=A-ie,Ie=0,ye=K,Ee=0,Ge=ie,et=0,Lt=ae,Xt=0,Pt=pe;if(w.content&&p){let wt=w.content;Ie=r0(O,0,wt[0]),Ee=r0(j,0,wt[1]),ye=r0(O,wt[0],wt[2]),Ge=r0(j,wt[1],wt[3]),et=wt[0]-Ie,Xt=wt[1]-Ee,Lt=wt[2]-wt[0]-ye,Pt=wt[3]-wt[1]-Ge}let Tt=(wt,Ht,Ct,mt)=>{let si=n0(wt.stretch-Ie,ye,D,l.left),ei=o0(wt.fixed-et,Lt,wt.stretch,K),Bi=n0(Ht.stretch-Ee,Ge,N,l.top),Dr=o0(Ht.fixed-Xt,Pt,Ht.stretch,ie),Br=n0(Ct.stretch-Ie,ye,D,l.left),xn=o0(Ct.fixed-et,Lt,Ct.stretch,K),ds=n0(mt.stretch-Ee,Ge,N,l.top),Po=o0(mt.fixed-Xt,Pt,mt.stretch,ie),fn=new b(si,Bi),Qn=new b(Br,Bi),to=new b(Br,ds),Do=new b(si,ds),Lo=new b(ei/k,Dr/k),wn=new b(xn/k,Po/k),kn=s*Math.PI/180;if(kn){let fo=Math.sin(kn),Wo=Math.cos(kn),Zo=[Wo,-fo,fo,Wo];fn._matMult(Zo),Qn._matMult(Zo),Do._matMult(Zo),to._matMult(Zo)}let po=wt.stretch+wt.fixed,Fo=Ht.stretch+Ht.fixed;return{tl:fn,tr:Qn,bl:Do,br:to,tex:{x:w.paddedRect.x+qu+po,y:w.paddedRect.y+qu+Fo,w:Ct.stretch+Ct.fixed-po,h:mt.stretch+mt.fixed-Fo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Lo,pixelOffsetBR:wn,minFontScaleX:Lt/k/D,minFontScaleY:Pt/k/N,isSDF:c}};if(p&&(w.stretchX||w.stretchY)){let wt=F3(O,ae,K),Ht=F3(j,pe,ie);for(let Ct=0;Ct<wt.length-1;Ct++){let mt=wt[Ct],si=wt[Ct+1];for(let ei=0;ei<Ht.length-1;ei++)y.push(Tt(mt,Ht[ei],si,Ht[ei+1]))}}else y.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:A+1}));return y}function r0(l,s,c){let p=0;for(let y of l)p+=Math.max(s,Math.min(c,y[1]))-Math.max(s,Math.min(c,y[0]));return p}function F3(l,s,c){let p=[{fixed:-qu,stretch:0}];for(let[y,w]of l){let k=p[p.length-1];p.push({fixed:y-k.stretch,stretch:k.stretch}),p.push({fixed:y-k.stretch,stretch:k.stretch+(w-y)})}return p.push({fixed:s+qu,stretch:c}),p}function n0(l,s,c,p){return l/s*c+p}function o0(l,s,c,p){return l-s*c/p}class s0{constructor(s,c,p,y,w,k,C,A,D,N){if(this.boxStartIndex=s.length,D){let O=k.top,j=k.bottom,W=k.collisionPadding;W&&(O-=W[1],j+=W[3]);let K=j-O;K>0&&(K=Math.max(10,K),this.circleDiameter=K)}else{let O=k.top*C-A[0],j=k.bottom*C+A[2],W=k.left*C-A[3],K=k.right*C+A[1],ie=k.collisionPadding;if(ie&&(W-=ie[0]*C,O-=ie[1]*C,K+=ie[2]*C,j+=ie[3]*C),N){let ae=new b(W,O),pe=new b(K,O),Ie=new b(W,j),ye=new b(K,j),Ee=N*Math.PI/180;ae._rotate(Ee),pe._rotate(Ee),Ie._rotate(Ee),ye._rotate(Ee),W=Math.min(ae.x,pe.x,Ie.x,ye.x),K=Math.max(ae.x,pe.x,Ie.x,ye.x),O=Math.min(ae.y,pe.y,Ie.y,ye.y),j=Math.max(ae.y,pe.y,Ie.y,ye.y)}s.emplaceBack(c.x,c.y,W,O,K,j,p,y,w)}this.boxEndIndex=s.length}}class cS{constructor(s=[],c=uS){if(this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;let s=this.data[0],c=this.data.pop();return this.length--,this.length>0&&(this.data[0]=c,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:c,compare:p}=this,y=c[s];for(;s>0;){let w=s-1>>1,k=c[w];if(p(y,k)>=0)break;c[s]=k,s=w}c[s]=y}_down(s){let{data:c,compare:p}=this,y=this.length>>1,w=c[s];for(;s<y;){let k=1+(s<<1),C=c[k],A=k+1;if(A<this.length&&p(c[A],C)<0&&(k=A,C=c[A]),p(C,w)>=0)break;c[s]=C,s=k}c[s]=w}}function uS(l,s){return l<s?-1:l>s?1:0}function dS(l,s=1,c=!1){let p=1/0,y=1/0,w=-1/0,k=-1/0,C=l[0];for(let W=0;W<C.length;W++){let K=C[W];(!W||K.x<p)&&(p=K.x),(!W||K.y<y)&&(y=K.y),(!W||K.x>w)&&(w=K.x),(!W||K.y>k)&&(k=K.y)}let A=Math.min(w-p,k-y),D=A/2,N=new cS([],hS);if(A===0)return new b(p,y);for(let W=p;W<w;W+=A)for(let K=y;K<k;K+=A)N.push(new $u(W+D,K+D,D,l));let O=function(W){let K=0,ie=0,ae=0,pe=W[0];for(let Ie=0,ye=pe.length,Ee=ye-1;Ie<ye;Ee=Ie++){let Ge=pe[Ie],et=pe[Ee],Lt=Ge.x*et.y-et.x*Ge.y;ie+=(Ge.x+et.x)*Lt,ae+=(Ge.y+et.y)*Lt,K+=3*Lt}return new $u(ie/K,ae/K,0,W)}(l),j=N.length;for(;N.length;){let W=N.pop();(W.d>O.d||!O.d)&&(O=W,c&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,j)),W.max-O.d<=s||(D=W.h/2,N.push(new $u(W.p.x-D,W.p.y-D,D,l)),N.push(new $u(W.p.x+D,W.p.y-D,D,l)),N.push(new $u(W.p.x-D,W.p.y+D,D,l)),N.push(new $u(W.p.x+D,W.p.y+D,D,l)),j+=4)}return c&&(console.log(`num probes: ${j}`),console.log(`best distance: ${O.d}`)),O.p}function hS(l,s){return s.max-l.max}function $u(l,s,c,p){this.p=new b(l,s),this.h=c,this.d=function(y,w){let k=!1,C=1/0;for(let A=0;A<w.length;A++){let D=w[A];for(let N=0,O=D.length,j=O-1;N<O;j=N++){let W=D[N],K=D[j];W.y>y.y!=K.y>y.y&&y.x<(K.x-W.x)*(y.y-W.y)/(K.y-W.y)+W.x&&(k=!k),C=Math.min(C,y_(y,W,K))}}return(k?1:-1)*Math.sqrt(C)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var eo;o.ap=void 0,(eo=o.ap||(o.ap={}))[eo.center=1]="center",eo[eo.left=2]="left",eo[eo.right=3]="right",eo[eo.top=4]="top",eo[eo.bottom=5]="bottom",eo[eo["top-left"]=6]="top-left",eo[eo["top-right"]=7]="top-right",eo[eo["bottom-left"]=8]="bottom-left",eo[eo["bottom-right"]=9]="bottom-right";let Wl=7,$1=Number.POSITIVE_INFINITY;function z3(l,s){return s[1]!==$1?function(c,p,y){let w=0,k=0;switch(p=Math.abs(p),y=Math.abs(y),c){case"top-right":case"top-left":case"top":k=y-Wl;break;case"bottom-right":case"bottom-left":case"bottom":k=-y+Wl}switch(c){case"top-right":case"bottom-right":case"right":w=-p;break;case"top-left":case"bottom-left":case"left":w=p}return[w,k]}(l,s[0],s[1]):function(c,p){let y=0,w=0;p<0&&(p=0);let k=p/Math.SQRT2;switch(c){case"top-right":case"top-left":w=k-Wl;break;case"bottom-right":case"bottom-left":w=-k+Wl;break;case"bottom":w=-p+Wl;break;case"top":w=p-Wl}switch(c){case"top-right":case"bottom-right":y=-k;break;case"top-left":case"bottom-left":y=k;break;case"left":y=p;break;case"right":y=-p}return[y,w]}(l,s[0])}function N3(l,s,c){var p;let y=l.layout,w=(p=y.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(s,{},c);if(w){let C=w.values,A=[];for(let D=0;D<C.length;D+=2){let N=A[D]=C[D],O=C[D+1].map(j=>j*_n);N.startsWith("top")?O[1]-=Wl:N.startsWith("bottom")&&(O[1]+=Wl),A[D+1]=O}return new hn(A)}let k=y.get("text-variable-anchor");if(k){let C;C=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(s,{},c)*_n,$1]:y.get("text-offset").evaluate(s,{},c).map(D=>D*_n);let A=[];for(let D of k)A.push(D,z3(D,C));return new hn(A)}return null}function Q1(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function pS(l,s,c,p,y,w,k,C,A,D,N){let O=w.textMaxSize.evaluate(s,{});O===void 0&&(O=k);let j=l.layers[0].layout,W=j.get("icon-offset").evaluate(s,{},N),K=B3(c.horizontal),ie=k/24,ae=l.tilePixelRatio*ie,pe=l.tilePixelRatio*O/24,Ie=l.tilePixelRatio*C,ye=l.tilePixelRatio*j.get("symbol-spacing"),Ee=j.get("text-padding")*l.tilePixelRatio,Ge=function(mt,si,ei,Bi=1){let Dr=mt.get("icon-padding").evaluate(si,{},ei),Br=Dr&&Dr.values;return[Br[0]*Bi,Br[1]*Bi,Br[2]*Bi,Br[3]*Bi]}(j,s,N,l.tilePixelRatio),et=j.get("text-max-angle")/180*Math.PI,Lt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Xt=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",Pt=j.get("symbol-placement"),Tt=ye/2,wt=j.get("icon-text-fit"),Ht;p&&wt!=="none"&&(l.allowVerticalPlacement&&c.vertical&&(Ht=a3(p,c.vertical,wt,j.get("icon-text-fit-padding"),W,ie)),K&&(p=a3(p,K,wt,j.get("icon-text-fit-padding"),W,ie)));let Ct=(mt,si)=>{si.x<0||si.x>=Vi||si.y<0||si.y>=Vi||function(ei,Bi,Dr,Br,xn,ds,Po,fn,Qn,to,Do,Lo,wn,kn,po,Fo,fo,Wo,Zo,Sn,Qi,mo,io,Cn,Ds){let Ys=ei.addToLineVertexArray(Bi,Dr),ea,Ga,Ls,_s,Ko=0,Wa=0,Rh=0,j3=0,eg=-1,tg=-1,Za={},H3=Pi("");if(ei.allowVerticalPlacement&&Br.vertical){let go=fn.layout.get("text-rotate").evaluate(Qi,{},Cn)+90;Ls=new s0(Qn,Bi,to,Do,Lo,Br.vertical,wn,kn,po,go),Po&&(_s=new s0(Qn,Bi,to,Do,Lo,Po,fo,Wo,po,go))}if(xn){let go=fn.layout.get("icon-rotate").evaluate(Qi,{}),xs=fn.layout.get("icon-text-fit")!=="none",Ec=L3(xn,go,io,xs),ia=Po?L3(Po,go,io,xs):void 0;Ga=new s0(Qn,Bi,to,Do,Lo,xn,fo,Wo,!1,go),Ko=4*Ec.length;let Tc=ei.iconSizeData,_a=null;Tc.kind==="source"?(_a=[va*fn.layout.get("icon-size").evaluate(Qi,{})],_a[0]>$l&&He(`${ei.layerIds[0]}: Value for "icon-size" is >= ${zh}. Reduce your "icon-size".`)):Tc.kind==="composite"&&(_a=[va*mo.compositeIconSizes[0].evaluate(Qi,{},Cn),va*mo.compositeIconSizes[1].evaluate(Qi,{},Cn)],(_a[0]>$l||_a[1]>$l)&&He(`${ei.layerIds[0]}: Value for "icon-size" is >= ${zh}. Reduce your "icon-size".`)),ei.addSymbols(ei.icon,Ec,_a,Sn,Zo,Qi,o.ah.none,Bi,Ys.lineStartIndex,Ys.lineLength,-1,Cn),eg=ei.icon.placedSymbolArray.length-1,ia&&(Wa=4*ia.length,ei.addSymbols(ei.icon,ia,_a,Sn,Zo,Qi,o.ah.vertical,Bi,Ys.lineStartIndex,Ys.lineLength,-1,Cn),tg=ei.icon.placedSymbolArray.length-1)}let q3=Object.keys(Br.horizontal);for(let go of q3){let xs=Br.horizontal[go];if(!ea){H3=Pi(xs.text);let ia=fn.layout.get("text-rotate").evaluate(Qi,{},Cn);ea=new s0(Qn,Bi,to,Do,Lo,xs,wn,kn,po,ia)}let Ec=xs.positionedLines.length===1;if(Rh+=O3(ei,Bi,xs,ds,fn,po,Qi,Fo,Ys,Br.vertical?o.ah.horizontal:o.ah.horizontalOnly,Ec?q3:[go],Za,eg,mo,Cn),Ec)break}Br.vertical&&(j3+=O3(ei,Bi,Br.vertical,ds,fn,po,Qi,Fo,Ys,o.ah.vertical,["vertical"],Za,tg,mo,Cn));let gS=ea?ea.boxStartIndex:ei.collisionBoxArray.length,yS=ea?ea.boxEndIndex:ei.collisionBoxArray.length,bS=Ls?Ls.boxStartIndex:ei.collisionBoxArray.length,vS=Ls?Ls.boxEndIndex:ei.collisionBoxArray.length,_S=Ga?Ga.boxStartIndex:ei.collisionBoxArray.length,xS=Ga?Ga.boxEndIndex:ei.collisionBoxArray.length,wS=_s?_s.boxStartIndex:ei.collisionBoxArray.length,kS=_s?_s.boxEndIndex:ei.collisionBoxArray.length,ta=-1,l0=(go,xs)=>go&&go.circleDiameter?Math.max(go.circleDiameter,xs):xs;ta=l0(ea,ta),ta=l0(Ls,ta),ta=l0(Ga,ta),ta=l0(_s,ta);let $3=ta>-1?1:0;$3&&(ta*=Ds/_n),ei.glyphOffsetArray.length>=Hu.MAX_GLYPHS&&He("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Qi.sortKey!==void 0&&ei.addToSortKeyRanges(ei.symbolInstances.length,Qi.sortKey);let SS=N3(fn,Qi,Cn),[CS,ES]=function(go,xs){let Ec=go.length,ia=xs?.values;if(ia?.length>0)for(let Tc=0;Tc<ia.length;Tc+=2){let _a=ia[Tc+1];go.emplaceBack(o.ap[ia[Tc]],_a[0],_a[1])}return[Ec,go.length]}(ei.textAnchorOffsets,SS);ei.symbolInstances.emplaceBack(Bi.x,Bi.y,Za.right>=0?Za.right:-1,Za.center>=0?Za.center:-1,Za.left>=0?Za.left:-1,Za.vertical||-1,eg,tg,H3,gS,yS,bS,vS,_S,xS,wS,kS,to,Rh,j3,Ko,Wa,$3,0,wn,ta,CS,ES)}(l,si,mt,c,p,y,Ht,l.layers[0],l.collisionBoxArray,s.index,s.sourceLayerIndex,l.index,ae,[Ee,Ee,Ee,Ee],Lt,A,Ie,Ge,Xt,W,s,w,D,N,k)};if(Pt==="line")for(let mt of T3(s.geometry,0,0,Vi,Vi)){let si=lS(mt,ye,et,c.vertical||K,p,24,pe,l.overscaling,Vi);for(let ei of si)K&&fS(l,K.text,Tt,ei)||Ct(mt,ei)}else if(Pt==="line-center"){for(let mt of s.geometry)if(mt.length>1){let si=aS(mt,et,c.vertical||K,p,24,pe);si&&Ct(mt,si)}}else if(s.type==="Polygon")for(let mt of S1(s.geometry,0)){let si=dS(mt,16);Ct(mt[0],new Gl(si.x,si.y,0))}else if(s.type==="LineString")for(let mt of s.geometry)Ct(mt,new Gl(mt[0].x,mt[0].y,0));else if(s.type==="Point")for(let mt of s.geometry)for(let si of mt)Ct([si],new Gl(si.x,si.y,0))}function O3(l,s,c,p,y,w,k,C,A,D,N,O,j,W,K){let ie=function(Ie,ye,Ee,Ge,et,Lt,Xt,Pt){let Tt=Ge.layout.get("text-rotate").evaluate(Lt,{})*Math.PI/180,wt=[];for(let Ht of ye.positionedLines)for(let Ct of Ht.positionedGlyphs){if(!Ct.rect)continue;let mt=Ct.rect||{},si=e3+1,ei=!0,Bi=1,Dr=0,Br=(et||Pt)&&Ct.vertical,xn=Ct.metrics.advance*Ct.scale/2;if(Pt&&ye.verticalizable&&(Dr=Ht.lineOffset/2-(Ct.imageName?-(_n-Ct.metrics.width*Ct.scale)/2:(Ct.scale-1)*_n)),Ct.imageName){let Sn=Xt[Ct.imageName];ei=Sn.sdf,Bi=Sn.pixelRatio,si=Go/Bi}let ds=et?[Ct.x+xn,Ct.y]:[0,0],Po=et?[0,0]:[Ct.x+xn+Ee[0],Ct.y+Ee[1]-Dr],fn=[0,0];Br&&(fn=Po,Po=[0,0]);let Qn=Ct.metrics.isDoubleResolution?2:1,to=(Ct.metrics.left-si)*Ct.scale-xn+Po[0],Do=(-Ct.metrics.top-si)*Ct.scale+Po[1],Lo=to+mt.w/Qn*Ct.scale/Bi,wn=Do+mt.h/Qn*Ct.scale/Bi,kn=new b(to,Do),po=new b(Lo,Do),Fo=new b(to,wn),fo=new b(Lo,wn);if(Br){let Sn=new b(-xn,xn-Lh),Qi=-Math.PI/2,mo=_n/2-xn,io=new b(5-Lh-mo,-(Ct.imageName?mo:0)),Cn=new b(...fn);kn._rotateAround(Qi,Sn)._add(io)._add(Cn),po._rotateAround(Qi,Sn)._add(io)._add(Cn),Fo._rotateAround(Qi,Sn)._add(io)._add(Cn),fo._rotateAround(Qi,Sn)._add(io)._add(Cn)}if(Tt){let Sn=Math.sin(Tt),Qi=Math.cos(Tt),mo=[Qi,-Sn,Sn,Qi];kn._matMult(mo),po._matMult(mo),Fo._matMult(mo),fo._matMult(mo)}let Wo=new b(0,0),Zo=new b(0,0);wt.push({tl:kn,tr:po,bl:Fo,br:fo,tex:mt,writingMode:ye.writingMode,glyphOffset:ds,sectionIndex:Ct.sectionIndex,isSDF:ei,pixelOffsetTL:Wo,pixelOffsetBR:Zo,minFontScaleX:0,minFontScaleY:0})}return wt}(0,c,C,y,w,k,p,l.allowVerticalPlacement),ae=l.textSizeData,pe=null;ae.kind==="source"?(pe=[va*y.layout.get("text-size").evaluate(k,{})],pe[0]>$l&&He(`${l.layerIds[0]}: Value for "text-size" is >= ${zh}. Reduce your "text-size".`)):ae.kind==="composite"&&(pe=[va*W.compositeTextSizes[0].evaluate(k,{},K),va*W.compositeTextSizes[1].evaluate(k,{},K)],(pe[0]>$l||pe[1]>$l)&&He(`${l.layerIds[0]}: Value for "text-size" is >= ${zh}. Reduce your "text-size".`)),l.addSymbols(l.text,ie,pe,C,w,k,D,s,A.lineStartIndex,A.lineLength,j,K);for(let Ie of N)O[Ie]=l.text.placedSymbolArray.length-1;return 4*ie.length}function B3(l){for(let s in l)return l[s];return null}function fS(l,s,c,p){let y=l.compareText;if(s in y){let w=y[s];for(let k=w.length-1;k>=0;k--)if(p.dist(w[k])<c)return!0}else y[s]=[];return y[s].push(p),!1}let R3=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class G1{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[c,p]=new Uint8Array(s,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");let y=p>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);let w=R3[15&p];if(!w)throw new Error("Unrecognized array type.");let[k]=new Uint16Array(s,2,1),[C]=new Uint32Array(s,4,1);return new G1(C,k,w,s)}constructor(s,c=64,p=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=p,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;let w=R3.indexOf(this.ArrayType),k=2*s*this.ArrayType.BYTES_PER_ELEMENT,C=s*this.IndexArrayType.BYTES_PER_ELEMENT,A=(8-C%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+A,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+k+C+A),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+A,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=s)}add(s,c){let p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=s,this.coords[this._pos++]=c,p}finish(){let s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return W1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,c,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:w,coords:k,nodeSize:C}=this,A=[0,w.length-1,0],D=[];for(;A.length;){let N=A.pop()||0,O=A.pop()||0,j=A.pop()||0;if(O-j<=C){for(let ae=j;ae<=O;ae++){let pe=k[2*ae],Ie=k[2*ae+1];pe>=s&&pe<=p&&Ie>=c&&Ie<=y&&D.push(w[ae])}continue}let W=j+O>>1,K=k[2*W],ie=k[2*W+1];K>=s&&K<=p&&ie>=c&&ie<=y&&D.push(w[W]),(N===0?s<=K:c<=ie)&&(A.push(j),A.push(W-1),A.push(1-N)),(N===0?p>=K:y>=ie)&&(A.push(W+1),A.push(O),A.push(1-N))}return D}within(s,c,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:w,nodeSize:k}=this,C=[0,y.length-1,0],A=[],D=p*p;for(;C.length;){let N=C.pop()||0,O=C.pop()||0,j=C.pop()||0;if(O-j<=k){for(let ae=j;ae<=O;ae++)V3(w[2*ae],w[2*ae+1],s,c)<=D&&A.push(y[ae]);continue}let W=j+O>>1,K=w[2*W],ie=w[2*W+1];V3(K,ie,s,c)<=D&&A.push(y[W]),(N===0?s-p<=K:c-p<=ie)&&(C.push(j),C.push(W-1),C.push(1-N)),(N===0?s+p>=K:c+p>=ie)&&(C.push(W+1),C.push(O),C.push(1-N))}return A}}function W1(l,s,c,p,y,w){if(y-p<=c)return;let k=p+y>>1;U3(l,s,k,p,y,w),W1(l,s,c,p,k-1,1-w),W1(l,s,c,k+1,y,1-w)}function U3(l,s,c,p,y,w){for(;y>p;){if(y-p>600){let D=y-p+1,N=c-p+1,O=Math.log(D),j=.5*Math.exp(2*O/3),W=.5*Math.sqrt(O*j*(D-j)/D)*(N-D/2<0?-1:1);U3(l,s,c,Math.max(p,Math.floor(c-N*j/D+W)),Math.min(y,Math.floor(c+(D-N)*j/D+W)),w)}let k=s[2*c+w],C=p,A=y;for(Oh(l,s,p,c),s[2*y+w]>k&&Oh(l,s,p,y);C<A;){for(Oh(l,s,C,A),C++,A--;s[2*C+w]<k;)C++;for(;s[2*A+w]>k;)A--}s[2*p+w]===k?Oh(l,s,p,A):(A++,Oh(l,s,A,y)),A<=c&&(p=A+1),c<=A&&(y=A-1)}}function Oh(l,s,c,p){Z1(l,c,p),Z1(s,2*c,2*p),Z1(s,2*c+1,2*p+1)}function Z1(l,s,c){let p=l[s];l[s]=l[c],l[c]=p}function V3(l,s,c,p){let y=l-c,w=s-p;return y*y+w*w}var K1;o.bd=void 0,(K1=o.bd||(o.bd={})).create="create",K1.load="load",K1.fullLoad="fullLoad";let a0=null,Bh=[],J1=1e3/60,X1="loadTime",Y1="fullLoadTime",mS={mark(l){performance.mark(l)},frame(l){let s=l;a0!=null&&Bh.push(s-a0),a0=s},clearMetrics(){a0=null,Bh=[],performance.clearMeasures(X1),performance.clearMeasures(Y1);for(let l in o.bd)performance.clearMarks(o.bd[l])},getPerformanceMetrics(){performance.measure(X1,o.bd.create,o.bd.load),performance.measure(Y1,o.bd.create,o.bd.fullLoad);let l=performance.getEntriesByName(X1)[0].duration,s=performance.getEntriesByName(Y1)[0].duration,c=Bh.length,p=1/(Bh.reduce((w,k)=>w+k,0)/c/1e3),y=Bh.filter(w=>w>J1).reduce((w,k)=>w+(k-J1)/J1,0);return{loadTime:l,fullLoadTime:s,fps:p,percentDroppedFrames:y/(c+y)*100,totalFrames:c}}};o.$=ot,o.A=Ou,o.B=function(l){if($t==null){let s=l.navigator?l.navigator.userAgent:null;$t=!!l.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return $t},o.C=class{constructor(l,s){this.target=l,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new oS(()=>this.process()),this.subscription=function(c,p,y,w){return c.addEventListener(p,y,!1),{unsubscribe:()=>{c.removeEventListener(p,y,!1)}}}(this.target,"message",c=>this.receive(c)),this.globalScope=jt(self)?l:window}registerMessageHandler(l,s){this.messageHandlers[l]=s}sendAsync(l,s){return new Promise((c,p)=>{let y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:c,reject:p},s&&s.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];let C={id:y,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},{once:!0});let w=[],k=Object.assign(Object.assign({},l),{id:y,sourceMapId:this.mapId,origin:location.origin,data:Oa(l.data,w)});this.target.postMessage(k,{transfer:w})})}receive(l){let s=l.data,c=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[c];let p=this.abortControllers[c];return delete this.abortControllers[c],void(p&&p.abort())}if(jt(self)||s.mustQueue)return this.tasks[c]=s,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,s)}}process(){if(this.taskQueue.length===0)return;let l=this.taskQueue.shift(),s=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(l,s)}processTask(l,s){return n(this,void 0,void 0,function*(){if(s.type==="<response>"){let y=this.resolveRejects[l];return delete this.resolveRejects[l],y?void(s.error?y.reject(Bl(s.error)):y.resolve(Bl(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let c=Bl(s.data),p=new AbortController;this.abortControllers[l]=p;try{let y=yield this.messageHandlers[s.type](s.sourceMapId,c,p);this.completeTask(l,null,y)}catch(y){this.completeTask(l,y)}})}completeTask(l,s,c){let p=[];delete this.abortControllers[l];let y={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Oa(s):null,data:Oa(c,p)};this.target.postMessage(y,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.D=ii,o.E=_i,o.F=function(){var l=new Ou(16);return Ou!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},o.G=Kt,o.H=function(l,s,c){var p,y,w,k,C,A,D,N,O,j,W,K,ie=c[0],ae=c[1],pe=c[2];return s===l?(l[12]=s[0]*ie+s[4]*ae+s[8]*pe+s[12],l[13]=s[1]*ie+s[5]*ae+s[9]*pe+s[13],l[14]=s[2]*ie+s[6]*ae+s[10]*pe+s[14],l[15]=s[3]*ie+s[7]*ae+s[11]*pe+s[15]):(y=s[1],w=s[2],k=s[3],C=s[4],A=s[5],D=s[6],N=s[7],O=s[8],j=s[9],W=s[10],K=s[11],l[0]=p=s[0],l[1]=y,l[2]=w,l[3]=k,l[4]=C,l[5]=A,l[6]=D,l[7]=N,l[8]=O,l[9]=j,l[10]=W,l[11]=K,l[12]=p*ie+C*ae+O*pe+s[12],l[13]=y*ie+A*ae+j*pe+s[13],l[14]=w*ie+D*ae+W*pe+s[14],l[15]=k*ie+N*ae+K*pe+s[15]),l},o.I=F1,o.J=function(l,s,c){var p=c[0],y=c[1],w=c[2];return l[0]=s[0]*p,l[1]=s[1]*p,l[2]=s[2]*p,l[3]=s[3]*p,l[4]=s[4]*y,l[5]=s[5]*y,l[6]=s[6]*y,l[7]=s[7]*y,l[8]=s[8]*w,l[9]=s[9]*w,l[10]=s[10]*w,l[11]=s[11]*w,l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},o.K=x_,o.L=function(l,s){let c={};for(let p=0;p<s.length;p++){let y=s[p];y in l&&(c[y]=l[y])}return c},o.M=Ql,o.N=g3,o.O=y3,o.P=b,o.Q=vs,o.R=bs,o.S=G,o.T=ah,o.U=$,o.V=bt,o.W=Vi,o.X=an,o.Y=i0,o.Z=class extends ya{},o._=n,o.a=tt,o.a$=function(l,s,c){return l[0]=s[0]*c[0],l[1]=s[1]*c[1],l[2]=s[2]*c[2],l[3]=s[3]*c[3],l},o.a0=q1,o.a1=ct,o.a2=l=>{let s=window.document.createElement("video");return s.muted=!0,new Promise(c=>{s.onloadstart=()=>{c(s)};for(let p of l){let y=window.document.createElement("source");Wt(p)||(s.crossOrigin="Anonymous"),y.src=p,s.appendChild(y)}})},o.a3=function(){return Ce++},o.a4=Bf,o.a5=Hu,o.a6=ku,o.a7=qa,o.a8=Ir,o.a9=k3,o.aA=we,o.aB=function(l,s){if(!l)return[{command:"setStyle",args:[s]}];let c=[];try{if(!hi(l.version,s.version))return[{command:"setStyle",args:[s]}];hi(l.center,s.center)||c.push({command:"setCenter",args:[s.center]}),hi(l.zoom,s.zoom)||c.push({command:"setZoom",args:[s.zoom]}),hi(l.bearing,s.bearing)||c.push({command:"setBearing",args:[s.bearing]}),hi(l.pitch,s.pitch)||c.push({command:"setPitch",args:[s.pitch]}),hi(l.sprite,s.sprite)||c.push({command:"setSprite",args:[s.sprite]}),hi(l.glyphs,s.glyphs)||c.push({command:"setGlyphs",args:[s.glyphs]}),hi(l.transition,s.transition)||c.push({command:"setTransition",args:[s.transition]}),hi(l.light,s.light)||c.push({command:"setLight",args:[s.light]}),hi(l.terrain,s.terrain)||c.push({command:"setTerrain",args:[s.terrain]}),hi(l.sky,s.sky)||c.push({command:"setSky",args:[s.sky]});let p={},y=[];(function(k,C,A,D){let N;for(N in C=C||{},k=k||{})Object.prototype.hasOwnProperty.call(k,N)&&(Object.prototype.hasOwnProperty.call(C,N)||en(N,A,D));for(N in C)Object.prototype.hasOwnProperty.call(C,N)&&(Object.prototype.hasOwnProperty.call(k,N)?hi(k[N],C[N])||(k[N].type==="geojson"&&C[N].type==="geojson"&&bn(k,C,N)?fr(A,{command:"setGeoJSONSourceData",args:[N,C[N].data]}):tn(N,C,A,D)):Mr(N,C,A))})(l.sources,s.sources,y,p);let w=[];l.layers&&l.layers.forEach(k=>{"source"in k&&p[k.source]?c.push({command:"removeLayer",args:[k.id]}):w.push(k)}),c=c.concat(y),function(k,C,A){C=C||[];let D=(k=k||[]).map(In),N=C.map(In),O=k.reduce(Zr,{}),j=C.reduce(Zr,{}),W=D.slice(),K=Object.create(null),ie,ae,pe,Ie,ye;for(let Ee=0,Ge=0;Ee<D.length;Ee++)ie=D[Ee],Object.prototype.hasOwnProperty.call(j,ie)?Ge++:(fr(A,{command:"removeLayer",args:[ie]}),W.splice(W.indexOf(ie,Ge),1));for(let Ee=0,Ge=0;Ee<N.length;Ee++)ie=N[N.length-1-Ee],W[W.length-1-Ee]!==ie&&(Object.prototype.hasOwnProperty.call(O,ie)?(fr(A,{command:"removeLayer",args:[ie]}),W.splice(W.lastIndexOf(ie,W.length-Ge),1)):Ge++,Ie=W[W.length-Ee],fr(A,{command:"addLayer",args:[j[ie],Ie]}),W.splice(W.length-Ee,0,ie),K[ie]=!0);for(let Ee=0;Ee<N.length;Ee++)if(ie=N[Ee],ae=O[ie],pe=j[ie],!K[ie]&&!hi(ae,pe))if(hi(ae.source,pe.source)&&hi(ae["source-layer"],pe["source-layer"])&&hi(ae.type,pe.type)){for(ye in Vn(ae.layout,pe.layout,A,ie,null,"setLayoutProperty"),Vn(ae.paint,pe.paint,A,ie,null,"setPaintProperty"),hi(ae.filter,pe.filter)||fr(A,{command:"setFilter",args:[ie,pe.filter]}),hi(ae.minzoom,pe.minzoom)&&hi(ae.maxzoom,pe.maxzoom)||fr(A,{command:"setLayerZoomRange",args:[ie,pe.minzoom,pe.maxzoom]}),ae)Object.prototype.hasOwnProperty.call(ae,ye)&&ye!=="layout"&&ye!=="paint"&&ye!=="filter"&&ye!=="metadata"&&ye!=="minzoom"&&ye!=="maxzoom"&&(ye.indexOf("paint.")===0?Vn(ae[ye],pe[ye],A,ie,ye.slice(6),"setPaintProperty"):hi(ae[ye],pe[ye])||fr(A,{command:"setLayerProperty",args:[ie,ye,pe[ye]]}));for(ye in pe)Object.prototype.hasOwnProperty.call(pe,ye)&&!Object.prototype.hasOwnProperty.call(ae,ye)&&ye!=="layout"&&ye!=="paint"&&ye!=="filter"&&ye!=="metadata"&&ye!=="minzoom"&&ye!=="maxzoom"&&(ye.indexOf("paint.")===0?Vn(ae[ye],pe[ye],A,ie,ye.slice(6),"setPaintProperty"):hi(ae[ye],pe[ye])||fr(A,{command:"setLayerProperty",args:[ie,ye,pe[ye]]}))}else fr(A,{command:"removeLayer",args:[ie]}),Ie=W[W.lastIndexOf(ie)+1],fr(A,{command:"addLayer",args:[pe,Ie]})}(w,s.layers,c)}catch(p){console.warn("Unable to compute style diff:",p),c=[{command:"setStyle",args:[s]}]}return c},o.aC=function(l){let s=[],c=l.id;return c===void 0&&s.push({message:`layers.${c}: missing required property "id"`}),l.render===void 0&&s.push({message:`layers.${c}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&s.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),s},o.aD=function l(s,c){if(Array.isArray(s)){if(!Array.isArray(c)||s.length!==c.length)return!1;for(let p=0;p<s.length;p++)if(!l(s[p],c[p]))return!1;return!0}if(typeof s=="object"&&s!==null&&c!==null){if(typeof c!="object"||Object.keys(s).length!==Object.keys(c).length)return!1;for(let p in s)if(!l(s[p],c[p]))return!1;return!0}return s===c},o.aE=xe,o.aF=Le,o.aG=class extends Tr{constructor(l,s){super(l,s),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},o.aH=Yn,o.aI=class extends Tr{constructor(l,s){super(l,s),this.current=Va}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let s=1;s<16;s++)if(l[s]!==this.current[s]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},o.aJ=gs,o.aK=class extends Tr{constructor(l,s){super(l,s),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},o.aL=class extends Tr{constructor(l,s){super(l,s),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},o.aM=Is,o.aN=function(l,s,c,p,y,w,k){var C=1/(s-c),A=1/(p-y),D=1/(w-k);return l[0]=-2*C,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*A,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*D,l[11]=0,l[12]=(s+c)*C,l[13]=(y+p)*A,l[14]=(k+w)*D,l[15]=1,l},o.aO=ir,o.aP=R7,o.aQ=class extends wc{},o.aR=Lk,o.aS=class extends Ul{},o.aT=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},o.aU=E_,o.aV=B,o.aW=class extends yh{},o.aX=Ve,o.aY=function(l,s){return l[0]===s[0]&&l[1]===s[1]&&l[2]===s[2]&&l[3]===s[3]&&l[4]===s[4]&&l[5]===s[5]&&l[6]===s[6]&&l[7]===s[7]&&l[8]===s[8]&&l[9]===s[9]&&l[10]===s[10]&&l[11]===s[11]&&l[12]===s[12]&&l[13]===s[13]&&l[14]===s[14]&&l[15]===s[15]},o.aZ=function(l,s){var c=l[0],p=l[1],y=l[2],w=l[3],k=l[4],C=l[5],A=l[6],D=l[7],N=l[8],O=l[9],j=l[10],W=l[11],K=l[12],ie=l[13],ae=l[14],pe=l[15],Ie=s[0],ye=s[1],Ee=s[2],Ge=s[3],et=s[4],Lt=s[5],Xt=s[6],Pt=s[7],Tt=s[8],wt=s[9],Ht=s[10],Ct=s[11],mt=s[12],si=s[13],ei=s[14],Bi=s[15];return Math.abs(c-Ie)<=Io*Math.max(1,Math.abs(c),Math.abs(Ie))&&Math.abs(p-ye)<=Io*Math.max(1,Math.abs(p),Math.abs(ye))&&Math.abs(y-Ee)<=Io*Math.max(1,Math.abs(y),Math.abs(Ee))&&Math.abs(w-Ge)<=Io*Math.max(1,Math.abs(w),Math.abs(Ge))&&Math.abs(k-et)<=Io*Math.max(1,Math.abs(k),Math.abs(et))&&Math.abs(C-Lt)<=Io*Math.max(1,Math.abs(C),Math.abs(Lt))&&Math.abs(A-Xt)<=Io*Math.max(1,Math.abs(A),Math.abs(Xt))&&Math.abs(D-Pt)<=Io*Math.max(1,Math.abs(D),Math.abs(Pt))&&Math.abs(N-Tt)<=Io*Math.max(1,Math.abs(N),Math.abs(Tt))&&Math.abs(O-wt)<=Io*Math.max(1,Math.abs(O),Math.abs(wt))&&Math.abs(j-Ht)<=Io*Math.max(1,Math.abs(j),Math.abs(Ht))&&Math.abs(W-Ct)<=Io*Math.max(1,Math.abs(W),Math.abs(Ct))&&Math.abs(K-mt)<=Io*Math.max(1,Math.abs(K),Math.abs(mt))&&Math.abs(ie-si)<=Io*Math.max(1,Math.abs(ie),Math.abs(si))&&Math.abs(ae-ei)<=Io*Math.max(1,Math.abs(ae),Math.abs(ei))&&Math.abs(pe-Bi)<=Io*Math.max(1,Math.abs(pe),Math.abs(Bi))},o.a_=function(l,s){return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[4]=s[4],l[5]=s[5],l[6]=s[6],l[7]=s[7],l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15],l},o.aa=function(l){let s={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,p,y,w)=>{let k=y||w;return s[p]=!k||k.toLowerCase(),""}),s["max-age"]){let c=parseInt(s["max-age"],10);isNaN(c)?delete s["max-age"]:s["max-age"]=c}return s},o.ab=function(l,s){let c=[];for(let p in l)p in s||c.push(p);return c},o.ac=fe,o.ad=function(l,s,c){var p=Math.sin(c),y=Math.cos(c),w=s[0],k=s[1],C=s[2],A=s[3],D=s[4],N=s[5],O=s[6],j=s[7];return s!==l&&(l[8]=s[8],l[9]=s[9],l[10]=s[10],l[11]=s[11],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[0]=w*y+D*p,l[1]=k*y+N*p,l[2]=C*y+O*p,l[3]=A*y+j*p,l[4]=D*y-w*p,l[5]=N*y-k*p,l[6]=O*y-C*p,l[7]=j*y-A*p,l},o.ae=function(l){var s=new Ou(16);return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],s[9]=l[9],s[10]=l[10],s[11]=l[11],s[12]=l[12],s[13]=l[13],s[14]=l[14],s[15]=l[15],s},o.af=$f,o.ag=function(l,s){let c=0,p=0;if(l.kind==="constant")p=l.layoutSize;else if(l.kind!=="source"){let{interpolationType:y,minZoom:w,maxZoom:k}=l,C=y?fe(vn.interpolationFactor(y,s,w,k),0,1):0;l.kind==="camera"?p=$n.number(l.minSize,l.maxSize,C):c=C}return{uSizeT:c,uSize:p}},o.ai=function(l,{uSize:s,uSizeT:c},{lowerSize:p,upperSize:y}){return l.kind==="source"?p/va:l.kind==="composite"?$n.number(p/va,y/va,c):s},o.aj=B1,o.ak=function(l,s,c,p){let y=s.y-l.y,w=s.x-l.x,k=p.y-c.y,C=p.x-c.x,A=k*w-C*y;if(A===0)return null;let D=(C*(l.y-c.y)-k*(l.x-c.x))/A;return new b(l.x+D*w,l.y+D*y)},o.al=T3,o.am=$a,o.an=y1,o.ao=_n,o.aq=O1,o.ar=function(l,s){var c=s[0],p=s[1],y=s[2],w=s[3],k=s[4],C=s[5],A=s[6],D=s[7],N=s[8],O=s[9],j=s[10],W=s[11],K=s[12],ie=s[13],ae=s[14],pe=s[15],Ie=c*C-p*k,ye=c*A-y*k,Ee=c*D-w*k,Ge=p*A-y*C,et=p*D-w*C,Lt=y*D-w*A,Xt=N*ie-O*K,Pt=N*ae-j*K,Tt=N*pe-W*K,wt=O*ae-j*ie,Ht=O*pe-W*ie,Ct=j*pe-W*ae,mt=Ie*Ct-ye*Ht+Ee*wt+Ge*Tt-et*Pt+Lt*Xt;return mt?(l[0]=(C*Ct-A*Ht+D*wt)*(mt=1/mt),l[1]=(y*Ht-p*Ct-w*wt)*mt,l[2]=(ie*Lt-ae*et+pe*Ge)*mt,l[3]=(j*et-O*Lt-W*Ge)*mt,l[4]=(A*Tt-k*Ct-D*Pt)*mt,l[5]=(c*Ct-y*Tt+w*Pt)*mt,l[6]=(ae*Ee-K*Lt-pe*ye)*mt,l[7]=(N*Lt-j*Ee+W*ye)*mt,l[8]=(k*Ht-C*Tt+D*Xt)*mt,l[9]=(p*Tt-c*Ht-w*Xt)*mt,l[10]=(K*et-ie*Ee+pe*Ie)*mt,l[11]=(O*Ee-N*et-W*Ie)*mt,l[12]=(C*Pt-k*wt-A*Xt)*mt,l[13]=(c*wt-p*Pt+y*Xt)*mt,l[14]=(ie*ye-K*Ge-ae*Ie)*mt,l[15]=(N*Ge-O*ye+j*Ie)*mt,l):null},o.as=Q1,o.at=N1,o.au=G1,o.av=function(){let l={},s=Ue.$version;for(let c in Ue.$root){let p=Ue.$root[c];if(p.required){let y=null;y=c==="version"?s:p.type==="array"?[]:{},y!=null&&(l[c]=y)}}return l},o.aw=rh,o.ax=Xi,o.ay=function(l){l=l.slice();let s=Object.create(null);for(let c=0;c<l.length;c++)s[l[c].id]=l[c];for(let c=0;c<l.length;c++)"ref"in l[c]&&(l[c]=xi(l[c],s[l[c].ref]));return l},o.az=function(l){if(l.type==="custom")return new nS(l);switch(l.type){case"background":return new tS(l);case"circle":return new U7(l);case"fill":return new sk(l);case"fill-extrusion":return new xk(l);case"heatmap":return new j7(l);case"hillshade":return new q7(l);case"line":return new Ak(l);case"raster":return new rS(l);case"symbol":return new t0(l)}},o.b=dt,o.b0=function(l,s){return l[0]*s[0]+l[1]*s[1]+l[2]*s[2]+l[3]*s[3]},o.b1=Y,o.b2=_3,o.b3=b3,o.b4=function(l,s,c,p,y){var w,k=1/Math.tan(s/2);return l[0]=k/c,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=k,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,y!=null&&y!==1/0?(l[10]=(y+p)*(w=1/(p-y)),l[14]=2*y*p*w):(l[10]=-1,l[14]=-2*p),l},o.b5=function(l,s,c){var p=Math.sin(c),y=Math.cos(c),w=s[4],k=s[5],C=s[6],A=s[7],D=s[8],N=s[9],O=s[10],j=s[11];return s!==l&&(l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[3],l[12]=s[12],l[13]=s[13],l[14]=s[14],l[15]=s[15]),l[4]=w*y+D*p,l[5]=k*y+N*p,l[6]=C*y+O*p,l[7]=A*y+j*p,l[8]=D*y-w*p,l[9]=N*y-k*p,l[10]=O*y-C*p,l[11]=j*y-A*p,l},o.b6=ee,o.b7=ue,o.b8=function(l){return l*Math.PI/180},o.b9=function(l,s){return l[0]=s[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=s[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=s[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},o.bA=Ba,o.ba=class extends Iu{},o.bb=j1,o.bc=mS,o.be=ti,o.bf=function(l,s){tt.REGISTERED_PROTOCOLS[l]=s},o.bg=function(l){delete tt.REGISTERED_PROTOCOLS[l]},o.bh=function(l,s){let c={};for(let y=0;y<l.length;y++){let w=s&&s[l[y].id]||f1(l[y]);s&&(s[l[y].id]=w);let k=c[w];k||(k=c[w]=[]),k.push(l[y])}let p=[];for(let y in c)p.push(c[y]);return p},o.bi=Bt,o.bj=w3,o.bk=S3,o.bl=i3,o.bm=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Vi/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;let s=l.bucket.layers[0],c=s.layout,p=s._unevaluatedLayout._values,y={layoutIconSize:p["icon-size"].possiblyEvaluate(new Ir(l.bucket.zoom+1),l.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Ir(l.bucket.zoom+1),l.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Ir(18))};if(l.bucket.textSizeData.kind==="composite"){let{minZoom:D,maxZoom:N}=l.bucket.textSizeData;y.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Ir(D),l.canonical),p["text-size"].possiblyEvaluate(new Ir(N),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){let{minZoom:D,maxZoom:N}=l.bucket.iconSizeData;y.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Ir(D),l.canonical),p["icon-size"].possiblyEvaluate(new Ir(N),l.canonical)]}let w=c.get("text-line-height")*_n,k=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",C=c.get("text-keep-upright"),A=c.get("text-size");for(let D of l.bucket.features){let N=c.get("text-font").evaluate(D,{},l.canonical).join(","),O=A.evaluate(D,{},l.canonical),j=y.layoutTextSize.evaluate(D,{},l.canonical),W=y.layoutIconSize.evaluate(D,{},l.canonical),K={horizontal:{},vertical:void 0},ie=D.text,ae,pe=[0,0];if(ie){let Ee=ie.toString(),Ge=c.get("text-letter-spacing").evaluate(D,{},l.canonical)*_n,et=Eu(Ee)?Ge:0,Lt=c.get("text-anchor").evaluate(D,{},l.canonical),Xt=N3(s,D,l.canonical);if(!Xt){let Ct=c.get("text-radial-offset").evaluate(D,{},l.canonical);pe=Ct?z3(Lt,[Ct*_n,$1]):c.get("text-offset").evaluate(D,{},l.canonical).map(mt=>mt*_n)}let Pt=k?"center":c.get("text-justify").evaluate(D,{},l.canonical),Tt=c.get("symbol-placement"),wt=Tt==="point"?c.get("text-max-width").evaluate(D,{},l.canonical)*_n:0,Ht=()=>{l.bucket.allowVerticalPlacement&&yc(Ee)&&(K.vertical=Xf(ie,l.glyphMap,l.glyphPositions,l.imagePositions,N,wt,w,Lt,"left",et,pe,o.ah.vertical,!0,Tt,j,O))};if(!k&&Xt){let Ct=new Set;if(Pt==="auto")for(let si=0;si<Xt.values.length;si+=2)Ct.add(Q1(Xt.values[si]));else Ct.add(Pt);let mt=!1;for(let si of Ct)if(!K.horizontal[si])if(mt)K.horizontal[si]=K.horizontal[0];else{let ei=Xf(ie,l.glyphMap,l.glyphPositions,l.imagePositions,N,wt,w,"center",si,et,pe,o.ah.horizontal,!1,Tt,j,O);ei&&(K.horizontal[si]=ei,mt=ei.positionedLines.length===1)}Ht()}else{Pt==="auto"&&(Pt=Q1(Lt));let Ct=Xf(ie,l.glyphMap,l.glyphPositions,l.imagePositions,N,wt,w,Lt,Pt,et,pe,o.ah.horizontal,!1,Tt,j,O);Ct&&(K.horizontal[Pt]=Ct),Ht(),yc(Ee)&&k&&C&&(K.vertical=Xf(ie,l.glyphMap,l.glyphPositions,l.imagePositions,N,wt,w,Lt,Pt,et,pe,o.ah.vertical,!1,Tt,j,O))}}let Ie=!1;if(D.icon&&D.icon.name){let Ee=l.imageMap[D.icon.name];Ee&&(ae=Kk(l.imagePositions[D.icon.name],c.get("icon-offset").evaluate(D,{},l.canonical),c.get("icon-anchor").evaluate(D,{},l.canonical)),Ie=!!Ee.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=Ie:l.bucket.sdfIcons!==Ie&&He("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==l.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}let ye=B3(K.horizontal)||K.vertical;l.bucket.iconsInText=!!ye&&ye.iconsInText,(ye||ae)&&pS(l.bucket,D,K,ae,l.imageMap,y,j,W,pe,Ie,l.canonical)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},o.bn=I1,o.bo=T1,o.bp=A1,o.bq=Hl,o.br=D1,o.bs=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},o.bt=function(l,s,c,p,y){return n(this,void 0,void 0,function*(){if($())try{return yield bt(l,s,c,p,y)}catch{}return function(w,k,C,A,D){let N=w.width,O=w.height;Qt&&Yt||(Qt=new OffscreenCanvas(N,O),Yt=Qt.getContext("2d",{willReadFrequently:!0})),Qt.width=N,Qt.height=O,Yt.drawImage(w,0,0,N,O);let j=Yt.getImageData(k,C,A,D);return Yt.clearRect(0,0,N,O),j.data}(l,s,c,p,y)})},o.bu=x3,o.bv=u,o.bw=h,o.bx=G_,o.by=xr,o.bz=function(l){return l.message===ki},o.c=oi,o.d=l=>n(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));let s=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(s)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.e=je,o.f=l=>new Promise((s,c)=>{let p=new Image;p.onload=()=>{s(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=vt})},p.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let y=new Blob([new Uint8Array(l)],{type:"image/png"});p.src=l.byteLength?URL.createObjectURL(y):vt}),o.g=Fe,o.h=(l,s)=>nt(je(l,{type:"json"}),s),o.i=jt,o.j=lt,o.k=vi,o.l=(l,s)=>nt(je(l,{type:"arrayBuffer"}),s),o.m=nt,o.n=function(l){return new D1(l).readFields(qk,[])},o.o=Ch,o.p=t3,o.q=Mo,o.r=eh,o.s=Wt,o.t=Pf,o.u=Ft,o.v=Ue,o.w=He,o.x=Ol,o.y=function([l,s,c]){return s+=90,s*=Math.PI/180,c*=Math.PI/180,{x:l*Math.cos(s)*Math.sin(c),y:l*Math.sin(s)*Math.sin(c),z:l*Math.cos(c)}},o.z=$n}),t("worker",["./shared"],function(o){"use strict";class n{constructor(V){this.keyCache={},V&&this.replace(V)}replace(V){this._layerConfigs={},this._layers={},this.update(V,[])}update(V,H){for(let ne of V){this._layerConfigs[ne.id]=ne;let be=this._layers[ne.id]=o.az(ne);be._featureFilter=o.a6(be.filter),this.keyCache[ne.id]&&delete this.keyCache[ne.id]}for(let ne of H)delete this.keyCache[ne],delete this._layerConfigs[ne],delete this._layers[ne];this.familiesBySource={};let q=o.bh(Object.values(this._layerConfigs),this.keyCache);for(let ne of q){let be=ne.map($e=>this._layers[$e.id]),_e=be[0];if(_e.visibility==="none")continue;let Se=_e.source||"",me=this.familiesBySource[Se];me||(me=this.familiesBySource[Se]={});let ke=_e.sourceLayer||"_geojsonTileLayer",We=me[ke];We||(We=me[ke]=[]),We.push(be)}}}class u{constructor(V){let H={},q=[];for(let Se in V){let me=V[Se],ke=H[Se]={};for(let We in me){let $e=me[+We];if(!$e||$e.bitmap.width===0||$e.bitmap.height===0)continue;let Je={x:0,y:0,w:$e.bitmap.width+2,h:$e.bitmap.height+2};q.push(Je),ke[We]={rect:Je,metrics:$e.metrics}}}let{w:ne,h:be}=o.p(q),_e=new o.o({width:ne||1,height:be||1});for(let Se in V){let me=V[Se];for(let ke in me){let We=me[+ke];if(!We||We.bitmap.width===0||We.bitmap.height===0)continue;let $e=H[Se][ke].rect;o.o.copy(We.bitmap,_e,{x:0,y:0},{x:$e.x+1,y:$e.y+1},We.bitmap)}}this.image=_e,this.positions=H}}o.bi("GlyphAtlas",u);class h{constructor(V){this.tileID=new o.Q(V.tileID.overscaledZ,V.tileID.wrap,V.tileID.canonical.z,V.tileID.canonical.x,V.tileID.canonical.y),this.uid=V.uid,this.zoom=V.zoom,this.pixelRatio=V.pixelRatio,this.tileSize=V.tileSize,this.source=V.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=V.showCollisionBoxes,this.collectResourceTiming=!!V.collectResourceTiming,this.returnDependencies=!!V.returnDependencies,this.promoteId=V.promoteId,this.inFlightDependencies=[]}parse(V,H,q,ne){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=V,this.collisionBoxArray=new o.a4;let be=new o.bj(Object.keys(V.layers).sort()),_e=new o.bk(this.tileID,this.promoteId);_e.bucketLayerIDs=[];let Se={},me={featureIndex:_e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},ke=H.familiesBySource[this.source];for(let di in ke){let br=V.layers[di];if(!br)continue;br.version===1&&o.w(`Vector tile source "${this.source}" layer "${di}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Rr=be.encode(di),Pn=[];for(let rn=0;rn<br.length;rn++){let dn=br.feature(rn),nn=_e.getId(dn,di);Pn.push({feature:dn,id:nn,index:rn,sourceLayerIndex:Rr})}for(let rn of ke[di]){let dn=rn[0];dn.source!==this.source&&o.w(`layer.source = ${dn.source} does not equal this.source = ${this.source}`),dn.minzoom&&this.zoom<Math.floor(dn.minzoom)||dn.maxzoom&&this.zoom>=dn.maxzoom||dn.visibility!=="none"&&(m(rn,this.zoom,q),(Se[dn.id]=dn.createBucket({index:_e.bucketLayerIDs.length,layers:rn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rr,sourceID:this.source})).populate(Pn,me,this.tileID.canonical),_e.bucketLayerIDs.push(rn.map(nn=>nn.id)))}}let We=o.aE(me.glyphDependencies,di=>Object.keys(di).map(Number));this.inFlightDependencies.forEach(di=>di?.abort()),this.inFlightDependencies=[];let $e=Promise.resolve({});if(Object.keys(We).length){let di=new AbortController;this.inFlightDependencies.push(di),$e=ne.sendAsync({type:"getGlyphs",data:{stacks:We,source:this.source,tileID:this.tileID,type:"glyphs"}},di)}let Je=Object.keys(me.iconDependencies),Gt=Promise.resolve({});if(Je.length){let di=new AbortController;this.inFlightDependencies.push(di),Gt=ne.sendAsync({type:"getImages",data:{icons:Je,source:this.source,tileID:this.tileID,type:"icons"}},di)}let ai=Object.keys(me.patternDependencies),ri=Promise.resolve({});if(ai.length){let di=new AbortController;this.inFlightDependencies.push(di),ri=ne.sendAsync({type:"getImages",data:{icons:ai,source:this.source,tileID:this.tileID,type:"patterns"}},di)}let[Ni,pi,cr]=yield Promise.all([$e,Gt,ri]),Oi=new u(Ni),Yi=new o.bl(pi,cr);for(let di in Se){let br=Se[di];br instanceof o.a5?(m(br.layers,this.zoom,q),o.bm({bucket:br,glyphMap:Ni,glyphPositions:Oi.positions,imageMap:pi,imagePositions:Yi.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):br.hasPattern&&(br instanceof o.bn||br instanceof o.bo||br instanceof o.bp)&&(m(br.layers,this.zoom,q),br.addFeatures(me,this.tileID.canonical,Yi.patternPositions))}return this.status="done",{buckets:Object.values(Se).filter(di=>!di.isEmpty()),featureIndex:_e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Oi.image,imageAtlas:Yi,glyphMap:this.returnDependencies?Ni:null,iconMap:this.returnDependencies?pi:null,glyphPositions:this.returnDependencies?Oi.positions:null}})}}function m(re,V,H){let q=new o.a8(V);for(let ne of re)ne.recalculate(q,H)}class b{constructor(V,H,q){this.actor=V,this.layerIndex=H,this.availableImages=q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(V,H){return o._(this,void 0,void 0,function*(){let q=yield o.l(V.request,H);try{return{vectorTile:new o.bq.VectorTile(new o.br(q.data)),rawData:q.data,cacheControl:q.cacheControl,expires:q.expires}}catch(ne){let be=new Uint8Array(q.data),_e=`Unable to parse the tile at ${V.request.url}, `;throw _e+=be[0]===31&&be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ne.messge}`,new Error(_e)}})}loadTile(V){return o._(this,void 0,void 0,function*(){let H=V.uid,q=!!(V&&V.request&&V.request.collectResourceTiming)&&new o.bs(V.request),ne=new h(V);this.loading[H]=ne;let be=new AbortController;ne.abort=be;try{let _e=yield this.loadVectorTile(V,be);if(delete this.loading[H],!_e)return null;let Se=_e.rawData,me={};_e.expires&&(me.expires=_e.expires),_e.cacheControl&&(me.cacheControl=_e.cacheControl);let ke={};if(q){let $e=q.finish();$e&&(ke.resourceTiming=JSON.parse(JSON.stringify($e)))}ne.vectorTile=_e.vectorTile;let We=ne.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[H]=ne,this.fetching[H]={rawTileData:Se,cacheControl:me,resourceTiming:ke};try{let $e=yield We;return o.e({rawTileData:Se.slice(0)},$e,me,ke)}finally{delete this.fetching[H]}}catch(_e){throw delete this.loading[H],ne.status="done",this.loaded[H]=ne,_e}})}reloadTile(V){return o._(this,void 0,void 0,function*(){let H=V.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let q=this.loaded[H];if(q.showCollisionBoxes=V.showCollisionBoxes,q.status==="parsing"){let ne=yield q.parse(q.vectorTile,this.layerIndex,this.availableImages,this.actor),be;if(this.fetching[H]){let{rawTileData:_e,cacheControl:Se,resourceTiming:me}=this.fetching[H];delete this.fetching[H],be=o.e({rawTileData:_e.slice(0)},ne,Se,me)}else be=ne;return be}if(q.status==="done"&&q.vectorTile)return q.parse(q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(V){return o._(this,void 0,void 0,function*(){let H=this.loading,q=V.uid;H&&H[q]&&H[q].abort&&(H[q].abort.abort(),delete H[q])})}removeTile(V){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[V.uid]&&delete this.loaded[V.uid]})}}class _{constructor(){this.loaded={}}loadTile(V){return o._(this,void 0,void 0,function*(){let{uid:H,encoding:q,rawImageData:ne,redFactor:be,greenFactor:_e,blueFactor:Se,baseShift:me}=V,ke=ne.width+2,We=ne.height+2,$e=o.b(ne)?new o.R({width:ke,height:We},yield o.bt(ne,-1,-1,ke,We)):ne,Je=new o.bu(H,$e,q,be,_e,Se,me);return this.loaded=this.loaded||{},this.loaded[H]=Je,Je})}removeTile(V){let H=this.loaded,q=V.uid;H&&H[q]&&delete H[q]}}function S(re,V){if(re.length!==0){T(re[0],V);for(var H=1;H<re.length;H++)T(re[H],!V)}}function T(re,V){for(var H=0,q=0,ne=0,be=re.length,_e=be-1;ne<be;_e=ne++){var Se=(re[ne][0]-re[_e][0])*(re[_e][1]+re[ne][1]),me=H+Se;q+=Math.abs(H)>=Math.abs(Se)?H-me+Se:Se-me+H,H=me}H+q>=0!=!!V&&re.reverse()}var P=o.bv(function re(V,H){var q,ne=V&&V.type;if(ne==="FeatureCollection")for(q=0;q<V.features.length;q++)re(V.features[q],H);else if(ne==="GeometryCollection")for(q=0;q<V.geometries.length;q++)re(V.geometries[q],H);else if(ne==="Feature")re(V.geometry,H);else if(ne==="Polygon")S(V.coordinates,H);else if(ne==="MultiPolygon")for(q=0;q<V.coordinates.length;q++)S(V.coordinates[q],H);return V});let F=o.bq.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},$=o.bw,ee=o.bq.VectorTileFeature,ue=fe;function fe(re,V){this.options=V||{},this.features=re,this.length=re.length}function Y(re,V){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=V||4096}fe.prototype.feature=function(re){return new Y(this.features[re],this.options.extent)},Y.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var V=0;V<re.length;V++){for(var H=re[V],q=[],ne=0;ne<H.length;ne++)q.push(new $(H[ne][0],H[ne][1]));this.geometry.push(q)}return this.geometry},Y.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,V=1/0,H=-1/0,q=1/0,ne=-1/0,be=0;be<re.length;be++)for(var _e=re[be],Se=0;Se<_e.length;Se++){var me=_e[Se];V=Math.min(V,me.x),H=Math.max(H,me.x),q=Math.min(q,me.y),ne=Math.max(ne,me.y)}return[V,q,H,ne]},Y.prototype.toGeoJSON=ee.prototype.toGeoJSON;var je=o.bx,Ce=ue;function xe(re){var V=new je;return function(H,q){for(var ne in H.layers)q.writeMessage(3,Le,H.layers[ne])}(re,V),V.finish()}function Le(re,V){var H;V.writeVarintField(15,re.version||1),V.writeStringField(1,re.name||""),V.writeVarintField(5,re.extent||4096);var q={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<re.length;H++)q.feature=re.feature(H),V.writeMessage(2,we,q);var ne=q.keys;for(H=0;H<ne.length;H++)V.writeStringField(3,ne[H]);var be=q.values;for(H=0;H<be.length;H++)V.writeMessage(4,jt,be[H])}function we(re,V){var H=re.feature;H.id!==void 0&&V.writeVarintField(1,H.id),V.writeMessage(2,st,re),V.writeVarintField(3,H.type),V.writeMessage(4,rt,H)}function st(re,V){var H=re.feature,q=re.keys,ne=re.values,be=re.keycache,_e=re.valuecache;for(var Se in H.properties){var me=H.properties[Se],ke=be[Se];if(me!==null){ke===void 0&&(q.push(Se),be[Se]=ke=q.length-1),V.writeVarint(ke);var We=typeof me;We!=="string"&&We!=="boolean"&&We!=="number"&&(me=JSON.stringify(me));var $e=We+":"+me,Je=_e[$e];Je===void 0&&(ne.push(me),_e[$e]=Je=ne.length-1),V.writeVarint(Je)}}}function He(re,V){return(V<<3)+(7&re)}function zt(re){return re<<1^re>>31}function rt(re,V){for(var H=re.loadGeometry(),q=re.type,ne=0,be=0,_e=H.length,Se=0;Se<_e;Se++){var me=H[Se],ke=1;q===1&&(ke=me.length),V.writeVarint(He(1,ke));for(var We=q===3?me.length-1:me.length,$e=0;$e<We;$e++){$e===1&&q!==1&&V.writeVarint(He(2,We-1));var Je=me[$e].x-ne,Gt=me[$e].y-be;V.writeVarint(zt(Je)),V.writeVarint(zt(Gt)),ne+=Je,be+=Gt}q===3&&V.writeVarint(He(7,1))}}function jt(re,V){var H=typeof re;H==="string"?V.writeStringField(1,re):H==="boolean"?V.writeBooleanField(7,re):H==="number"&&(re%1!=0?V.writeDoubleField(3,re):re<0?V.writeSVarintField(6,re):V.writeVarintField(5,re))}G.exports=xe,G.exports.fromVectorTileJs=xe,G.exports.fromGeojsonVt=function(re,V){V=V||{};var H={};for(var q in re)H[q]=new Ce(re[q].features,V),H[q].name=q,H[q].version=V.version,H[q].extent=V.extent;return xe({layers:H})},G.exports.GeoJSONWrapper=Ce;var $t=o.bv(G.exports);let dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},vt=Math.fround||(bt=new Float32Array(1),re=>(bt[0]=+re,bt[0]));var bt;let Qt=3,Yt=5,ki=6;class oi{constructor(V){this.options=Object.assign(Object.create(dt),V),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(V){let{log:H,minZoom:q,maxZoom:ne}=this.options;H&&console.time("total time");let be=`prepare ${V.length} points`;H&&console.time(be),this.points=V;let _e=[];for(let me=0;me<V.length;me++){let ke=V[me];if(!ke.geometry)continue;let[We,$e]=ke.geometry.coordinates,Je=vt(Kt(We)),Gt=vt(ti($e));_e.push(Je,Gt,1/0,me,-1,1),this.options.reduce&&_e.push(0)}let Se=this.trees[ne+1]=this._createTree(_e);H&&console.timeEnd(be);for(let me=ne;me>=q;me--){let ke=+Date.now();Se=this.trees[me]=this._createTree(this._cluster(Se,me)),H&&console.log("z%d: %d clusters in %dms",me,Se.numItems,+Date.now()-ke)}return H&&console.timeEnd("total time"),this}getClusters(V,H){let q=((V[0]+180)%360+360)%360-180,ne=Math.max(-90,Math.min(90,V[1])),be=V[2]===180?180:((V[2]+180)%360+360)%360-180,_e=Math.max(-90,Math.min(90,V[3]));if(V[2]-V[0]>=360)q=-180,be=180;else if(q>be){let $e=this.getClusters([q,ne,180,_e],H),Je=this.getClusters([-180,ne,be,_e],H);return $e.concat(Je)}let Se=this.trees[this._limitZoom(H)],me=Se.range(Kt(q),ti(_e),Kt(be),ti(ne)),ke=Se.data,We=[];for(let $e of me){let Je=this.stride*$e;We.push(ke[Je+Yt]>1?tt(ke,Je,this.clusterProps):this.points[ke[Je+Qt]])}return We}getChildren(V){let H=this._getOriginId(V),q=this._getOriginZoom(V),ne="No cluster with the specified id.",be=this.trees[q];if(!be)throw new Error(ne);let _e=be.data;if(H*this.stride>=_e.length)throw new Error(ne);let Se=this.options.radius/(this.options.extent*Math.pow(2,q-1)),me=be.within(_e[H*this.stride],_e[H*this.stride+1],Se),ke=[];for(let We of me){let $e=We*this.stride;_e[$e+4]===V&&ke.push(_e[$e+Yt]>1?tt(_e,$e,this.clusterProps):this.points[_e[$e+Qt]])}if(ke.length===0)throw new Error(ne);return ke}getLeaves(V,H,q){let ne=[];return this._appendLeaves(ne,V,H=H||10,q=q||0,0),ne}getTile(V,H,q){let ne=this.trees[this._limitZoom(V)],be=Math.pow(2,V),{extent:_e,radius:Se}=this.options,me=Se/_e,ke=(q-me)/be,We=(q+1+me)/be,$e={features:[]};return this._addTileFeatures(ne.range((H-me)/be,ke,(H+1+me)/be,We),ne.data,H,q,be,$e),H===0&&this._addTileFeatures(ne.range(1-me/be,ke,1,We),ne.data,be,q,be,$e),H===be-1&&this._addTileFeatures(ne.range(0,ke,me/be,We),ne.data,-1,q,be,$e),$e.features.length?$e:null}getClusterExpansionZoom(V){let H=this._getOriginZoom(V)-1;for(;H<=this.options.maxZoom;){let q=this.getChildren(V);if(H++,q.length!==1)break;V=q[0].properties.cluster_id}return H}_appendLeaves(V,H,q,ne,be){let _e=this.getChildren(H);for(let Se of _e){let me=Se.properties;if(me&&me.cluster?be+me.point_count<=ne?be+=me.point_count:be=this._appendLeaves(V,me.cluster_id,q,ne,be):be<ne?be++:V.push(Se),V.length===q)break}return be}_createTree(V){let H=new o.au(V.length/this.stride|0,this.options.nodeSize,Float32Array);for(let q=0;q<V.length;q+=this.stride)H.add(V[q],V[q+1]);return H.finish(),H.data=V,H}_addTileFeatures(V,H,q,ne,be,_e){for(let Se of V){let me=Se*this.stride,ke=H[me+Yt]>1,We,$e,Je;if(ke)We=Fe(H,me,this.clusterProps),$e=H[me],Je=H[me+1];else{let ri=this.points[H[me+Qt]];We=ri.properties;let[Ni,pi]=ri.geometry.coordinates;$e=Kt(Ni),Je=ti(pi)}let Gt={type:1,geometry:[[Math.round(this.options.extent*($e*be-q)),Math.round(this.options.extent*(Je*be-ne))]],tags:We},ai;ai=ke||this.options.generateId?H[me+Qt]:this.points[H[me+Qt]].id,ai!==void 0&&(Gt.id=ai),_e.features.push(Gt)}}_limitZoom(V){return Math.max(this.options.minZoom,Math.min(Math.floor(+V),this.options.maxZoom+1))}_cluster(V,H){let{radius:q,extent:ne,reduce:be,minPoints:_e}=this.options,Se=q/(ne*Math.pow(2,H)),me=V.data,ke=[],We=this.stride;for(let $e=0;$e<me.length;$e+=We){if(me[$e+2]<=H)continue;me[$e+2]=H;let Je=me[$e],Gt=me[$e+1],ai=V.within(me[$e],me[$e+1],Se),ri=me[$e+Yt],Ni=ri;for(let pi of ai){let cr=pi*We;me[cr+2]>H&&(Ni+=me[cr+Yt])}if(Ni>ri&&Ni>=_e){let pi,cr=Je*ri,Oi=Gt*ri,Yi=-1,di=(($e/We|0)<<5)+(H+1)+this.points.length;for(let br of ai){let Rr=br*We;if(me[Rr+2]<=H)continue;me[Rr+2]=H;let Pn=me[Rr+Yt];cr+=me[Rr]*Pn,Oi+=me[Rr+1]*Pn,me[Rr+4]=di,be&&(pi||(pi=this._map(me,$e,!0),Yi=this.clusterProps.length,this.clusterProps.push(pi)),be(pi,this._map(me,Rr)))}me[$e+4]=di,ke.push(cr/Ni,Oi/Ni,1/0,di,-1,Ni),be&&ke.push(Yi)}else{for(let pi=0;pi<We;pi++)ke.push(me[$e+pi]);if(Ni>1)for(let pi of ai){let cr=pi*We;if(!(me[cr+2]<=H)){me[cr+2]=H;for(let Oi=0;Oi<We;Oi++)ke.push(me[cr+Oi])}}}}return ke}_getOriginId(V){return V-this.points.length>>5}_getOriginZoom(V){return(V-this.points.length)%32}_map(V,H,q){if(V[H+Yt]>1){let _e=this.clusterProps[V[H+ki]];return q?Object.assign({},_e):_e}let ne=this.points[V[H+Qt]].properties,be=this.options.map(ne);return q&&be===ne?Object.assign({},be):be}}function tt(re,V,H){return{type:"Feature",id:re[V+Qt],properties:Fe(re,V,H),geometry:{type:"Point",coordinates:[(q=re[V],360*(q-.5)),Xi(re[V+1])]}};var q}function Fe(re,V,H){let q=re[V+Yt],ne=q>=1e4?`${Math.round(q/1e3)}k`:q>=1e3?Math.round(q/100)/10+"k":q,be=re[V+ki],_e=be===-1?{}:Object.assign({},H[be]);return Object.assign(_e,{cluster:!0,cluster_id:re[V+Qt],point_count:q,point_count_abbreviated:ne})}function Kt(re){return re/360+.5}function ti(re){let V=Math.sin(re*Math.PI/180),H=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return H<0?0:H>1?1:H}function Xi(re){let V=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(V))/Math.PI-90}function nt(re,V,H,q){for(var ne,be=q,_e=H-V>>1,Se=H-V,me=re[V],ke=re[V+1],We=re[H],$e=re[H+1],Je=V+3;Je<H;Je+=3){var Gt=Wt(re[Je],re[Je+1],me,ke,We,$e);if(Gt>be)ne=Je,be=Gt;else if(Gt===be){var ai=Math.abs(Je-_e);ai<Se&&(ne=Je,Se=ai)}}be>q&&(ne-V>3&&nt(re,V,ne,q),re[ne+2]=be,H-ne>3&&nt(re,ne,H,q))}function Wt(re,V,H,q,ne,be){var _e=ne-H,Se=be-q;if(_e!==0||Se!==0){var me=((re-H)*_e+(V-q)*Se)/(_e*_e+Se*Se);me>1?(H=ne,q=be):me>0&&(H+=_e*me,q+=Se*me)}return(_e=re-H)*_e+(Se=V-q)*Se}function yi(re,V,H,q){var ne={id:re===void 0?null:re,type:V,geometry:H,tags:q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(be){var _e=be.geometry,Se=be.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Rt(be,_e);else if(Se==="Polygon"||Se==="MultiLineString")for(var me=0;me<_e.length;me++)Rt(be,_e[me]);else if(Se==="MultiPolygon")for(me=0;me<_e.length;me++)for(var ke=0;ke<_e[me].length;ke++)Rt(be,_e[me][ke])}(ne),ne}function Rt(re,V){for(var H=0;H<V.length;H+=3)re.minX=Math.min(re.minX,V[H]),re.minY=Math.min(re.minY,V[H+1]),re.maxX=Math.max(re.maxX,V[H]),re.maxY=Math.max(re.maxY,V[H+1])}function vi(re,V,H,q){if(V.geometry){var ne=V.geometry.coordinates,be=V.geometry.type,_e=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),Se=[],me=V.id;if(H.promoteId?me=V.properties[H.promoteId]:H.generateId&&(me=q||0),be==="Point")lt(ne,Se);else if(be==="MultiPoint")for(var ke=0;ke<ne.length;ke++)lt(ne[ke],Se);else if(be==="LineString")_i(ne,Se,_e,!1);else if(be==="MultiLineString"){if(H.lineMetrics){for(ke=0;ke<ne.length;ke++)_i(ne[ke],Se=[],_e,!1),re.push(yi(me,"LineString",Se,V.properties));return}Ue(ne,Se,_e,!1)}else if(be==="Polygon")Ue(ne,Se,_e,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(ke=0;ke<V.geometry.geometries.length;ke++)vi(re,{id:me,geometry:V.geometry.geometries[ke],properties:V.properties},H,q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ke=0;ke<ne.length;ke++){var We=[];Ue(ne[ke],We,_e,!0),Se.push(We)}}re.push(yi(me,be,Se,V.properties))}}function lt(re,V){V.push(fi(re[0])),V.push(xi(re[1])),V.push(0)}function _i(re,V,H,q){for(var ne,be,_e=0,Se=0;Se<re.length;Se++){var me=fi(re[Se][0]),ke=xi(re[Se][1]);V.push(me),V.push(ke),V.push(0),Se>0&&(_e+=q?(ne*ke-me*be)/2:Math.sqrt(Math.pow(me-ne,2)+Math.pow(ke-be,2))),ne=me,be=ke}var We=V.length-3;V[2]=1,nt(V,0,We,H),V[We+2]=1,V.size=Math.abs(_e),V.start=0,V.end=V.size}function Ue(re,V,H,q){for(var ne=0;ne<re.length;ne++){var be=[];_i(re[ne],be,H,q),V.push(be)}}function fi(re){return re/360+.5}function xi(re){var V=Math.sin(re*Math.PI/180),H=.5-.25*Math.log((1+V)/(1-V))/Math.PI;return H<0?0:H>1?1:H}function hi(re,V,H,q,ne,be,_e,Se){if(q/=V,be>=(H/=V)&&_e<q)return re;if(_e<H||be>=q)return null;for(var me=[],ke=0;ke<re.length;ke++){var We=re[ke],$e=We.geometry,Je=We.type,Gt=ne===0?We.minX:We.minY,ai=ne===0?We.maxX:We.maxY;if(Gt>=H&&ai<q)me.push(We);else if(!(ai<H||Gt>=q)){var ri=[];if(Je==="Point"||Je==="MultiPoint")fr($e,ri,H,q,ne);else if(Je==="LineString")Mr($e,ri,H,q,ne,!1,Se.lineMetrics);else if(Je==="MultiLineString")tn($e,ri,H,q,ne,!1);else if(Je==="Polygon")tn($e,ri,H,q,ne,!0);else if(Je==="MultiPolygon")for(var Ni=0;Ni<$e.length;Ni++){var pi=[];tn($e[Ni],pi,H,q,ne,!0),pi.length&&ri.push(pi)}if(ri.length){if(Se.lineMetrics&&Je==="LineString"){for(Ni=0;Ni<ri.length;Ni++)me.push(yi(We.id,Je,ri[Ni],We.tags));continue}Je!=="LineString"&&Je!=="MultiLineString"||(ri.length===1?(Je="LineString",ri=ri[0]):Je="MultiLineString"),Je!=="Point"&&Je!=="MultiPoint"||(Je=ri.length===3?"Point":"MultiPoint"),me.push(yi(We.id,Je,ri,We.tags))}}}return me.length?me:null}function fr(re,V,H,q,ne){for(var be=0;be<re.length;be+=3){var _e=re[be+ne];_e>=H&&_e<=q&&(V.push(re[be]),V.push(re[be+1]),V.push(re[be+2]))}}function Mr(re,V,H,q,ne,be,_e){for(var Se,me,ke=en(re),We=ne===0?Vn:In,$e=re.start,Je=0;Je<re.length-3;Je+=3){var Gt=re[Je],ai=re[Je+1],ri=re[Je+2],Ni=re[Je+3],pi=re[Je+4],cr=ne===0?Gt:ai,Oi=ne===0?Ni:pi,Yi=!1;_e&&(Se=Math.sqrt(Math.pow(Gt-Ni,2)+Math.pow(ai-pi,2))),cr<H?Oi>H&&(me=We(ke,Gt,ai,Ni,pi,H),_e&&(ke.start=$e+Se*me)):cr>q?Oi<q&&(me=We(ke,Gt,ai,Ni,pi,q),_e&&(ke.start=$e+Se*me)):bn(ke,Gt,ai,ri),Oi<H&&cr>=H&&(me=We(ke,Gt,ai,Ni,pi,H),Yi=!0),Oi>q&&cr<=q&&(me=We(ke,Gt,ai,Ni,pi,q),Yi=!0),!be&&Yi&&(_e&&(ke.end=$e+Se*me),V.push(ke),ke=en(re)),_e&&($e+=Se)}var di=re.length-3;Gt=re[di],ai=re[di+1],ri=re[di+2],(cr=ne===0?Gt:ai)>=H&&cr<=q&&bn(ke,Gt,ai,ri),di=ke.length-3,be&&di>=3&&(ke[di]!==ke[0]||ke[di+1]!==ke[1])&&bn(ke,ke[0],ke[1],ke[2]),ke.length&&V.push(ke)}function en(re){var V=[];return V.size=re.size,V.start=re.start,V.end=re.end,V}function tn(re,V,H,q,ne,be){for(var _e=0;_e<re.length;_e++)Mr(re[_e],V,H,q,ne,be,!1)}function bn(re,V,H,q){re.push(V),re.push(H),re.push(q)}function Vn(re,V,H,q,ne,be){var _e=(be-V)/(q-V);return re.push(be),re.push(H+(ne-H)*_e),re.push(1),_e}function In(re,V,H,q,ne,be){var _e=(be-H)/(ne-H);return re.push(V+(q-V)*_e),re.push(be),re.push(1),_e}function Zr(re,V){for(var H=[],q=0;q<re.length;q++){var ne,be=re[q],_e=be.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")ne=ct(be.geometry,V);else if(_e==="MultiLineString"||_e==="Polygon"){ne=[];for(var Se=0;Se<be.geometry.length;Se++)ne.push(ct(be.geometry[Se],V))}else if(_e==="MultiPolygon")for(ne=[],Se=0;Se<be.geometry.length;Se++){for(var me=[],ke=0;ke<be.geometry[Se].length;ke++)me.push(ct(be.geometry[Se][ke],V));ne.push(me)}H.push(yi(be.id,_e,ne,be.tags))}return H}function ct(re,V){var H=[];H.size=re.size,re.start!==void 0&&(H.start=re.start,H.end=re.end);for(var q=0;q<re.length;q+=3)H.push(re[q]+V,re[q+1],re[q+2]);return H}function Lr(re,V){if(re.transformed)return re;var H,q,ne,be=1<<re.z,_e=re.x,Se=re.y;for(H=0;H<re.features.length;H++){var me=re.features[H],ke=me.geometry,We=me.type;if(me.geometry=[],We===1)for(q=0;q<ke.length;q+=2)me.geometry.push(Fr(ke[q],ke[q+1],V,be,_e,Se));else for(q=0;q<ke.length;q++){var $e=[];for(ne=0;ne<ke[q].length;ne+=2)$e.push(Fr(ke[q][ne],ke[q][ne+1],V,be,_e,Se));me.geometry.push($e)}}return re.transformed=!0,re}function Fr(re,V,H,q,ne,be){return[Math.round(H*(re*q-ne)),Math.round(H*(V*q-be))]}function Kn(re,V,H,q,ne){for(var be=V===ne.maxZoom?0:ne.tolerance/((1<<V)*ne.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:H,y:q,z:V,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Se=0;Se<re.length;Se++){_e.numFeatures++,ko(_e,re[Se],be,ne);var me=re[Se].minX,ke=re[Se].minY,We=re[Se].maxX,$e=re[Se].maxY;me<_e.minX&&(_e.minX=me),ke<_e.minY&&(_e.minY=ke),We>_e.maxX&&(_e.maxX=We),$e>_e.maxY&&(_e.maxY=$e)}return _e}function ko(re,V,H,q){var ne=V.geometry,be=V.type,_e=[];if(be==="Point"||be==="MultiPoint")for(var Se=0;Se<ne.length;Se+=3)_e.push(ne[Se]),_e.push(ne[Se+1]),re.numPoints++,re.numSimplified++;else if(be==="LineString")ft(_e,ne,re,H,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(Se=0;Se<ne.length;Se++)ft(_e,ne[Se],re,H,be==="Polygon",Se===0);else if(be==="MultiPolygon")for(var me=0;me<ne.length;me++){var ke=ne[me];for(Se=0;Se<ke.length;Se++)ft(_e,ke[Se],re,H,!0,Se===0)}if(_e.length){var We=V.tags||null;if(be==="LineString"&&q.lineMetrics){for(var $e in We={},V.tags)We[$e]=V.tags[$e];We.mapbox_clip_start=ne.start/ne.size,We.mapbox_clip_end=ne.end/ne.size}var Je={geometry:_e,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:We};V.id!==null&&(Je.id=V.id),re.features.push(Je)}}function ft(re,V,H,q,ne,be){var _e=q*q;if(q>0&&V.size<(ne?_e:q))H.numPoints+=V.length/3;else{for(var Se=[],me=0;me<V.length;me+=3)(q===0||V[me+2]>_e)&&(H.numSimplified++,Se.push(V[me]),Se.push(V[me+1])),H.numPoints++;ne&&function(ke,We){for(var $e=0,Je=0,Gt=ke.length,ai=Gt-2;Je<Gt;ai=Je,Je+=2)$e+=(ke[Je]-ke[ai])*(ke[Je+1]+ke[ai+1]);if($e>0===We)for(Je=0,Gt=ke.length;Je<Gt/2;Je+=2){var ri=ke[Je],Ni=ke[Je+1];ke[Je]=ke[Gt-2-Je],ke[Je+1]=ke[Gt-1-Je],ke[Gt-2-Je]=ri,ke[Gt-1-Je]=Ni}}(Se,be),re.push(Se)}}function Mt(re,V){var H=(V=this.options=function(ne,be){for(var _e in be)ne[_e]=be[_e];return ne}(Object.create(this.options),V)).debug;if(H&&console.time("preprocess data"),V.maxZoom<0||V.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(V.promoteId&&V.generateId)throw new Error("promoteId and generateId cannot be used together.");var q=function(ne,be){var _e=[];if(ne.type==="FeatureCollection")for(var Se=0;Se<ne.features.length;Se++)vi(_e,ne.features[Se],be,Se);else vi(_e,ne.type==="Feature"?ne:{geometry:ne},be);return _e}(re,V);this.tiles={},this.tileCoords=[],H&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",V.indexMaxZoom,V.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),q=function(ne,be){var _e=be.buffer/be.extent,Se=ne,me=hi(ne,1,-1-_e,_e,0,-1,2,be),ke=hi(ne,1,1-_e,2+_e,0,-1,2,be);return(me||ke)&&(Se=hi(ne,1,-_e,1+_e,0,-1,2,be)||[],me&&(Se=Zr(me,1).concat(Se)),ke&&(Se=Se.concat(Zr(ke,-1)))),Se}(q,V),q.length&&this.splitTile(q,0,0,0),H&&(q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function De(re,V,H){return 32*((1<<re)*H+V)+re}function At(re,V){return V?re.properties[V]:re.id}function Jt(re,V){if(re==null)return!0;if(re.type==="Feature")return At(re,V)!=null;if(re.type==="FeatureCollection"){let H=new Set;for(let q of re.features){let ne=At(q,V);if(ne==null||H.has(ne))return!1;H.add(ne)}return!0}return!1}function Dt(re,V){let H=new Map;if(re!=null)if(re.type==="Feature")H.set(At(re,V),re);else for(let q of re.features)H.set(At(q,V),q);return H}Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(re,V,H,q,ne,be,_e){for(var Se=[re,V,H,q],me=this.options,ke=me.debug;Se.length;){q=Se.pop(),H=Se.pop(),V=Se.pop(),re=Se.pop();var We=1<<V,$e=De(V,H,q),Je=this.tiles[$e];if(!Je&&(ke>1&&console.time("creation"),Je=this.tiles[$e]=Kn(re,V,H,q,me),this.tileCoords.push({z:V,x:H,y:q}),ke)){ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",V,H,q,Je.numFeatures,Je.numPoints,Je.numSimplified),console.timeEnd("creation"));var Gt="z"+V;this.stats[Gt]=(this.stats[Gt]||0)+1,this.total++}if(Je.source=re,ne){if(V===me.maxZoom||V===ne)continue;var ai=1<<ne-V;if(H!==Math.floor(be/ai)||q!==Math.floor(_e/ai))continue}else if(V===me.indexMaxZoom||Je.numPoints<=me.indexMaxPoints)continue;if(Je.source=null,re.length!==0){ke>1&&console.time("clipping");var ri,Ni,pi,cr,Oi,Yi,di=.5*me.buffer/me.extent,br=.5-di,Rr=.5+di,Pn=1+di;ri=Ni=pi=cr=null,Oi=hi(re,We,H-di,H+Rr,0,Je.minX,Je.maxX,me),Yi=hi(re,We,H+br,H+Pn,0,Je.minX,Je.maxX,me),re=null,Oi&&(ri=hi(Oi,We,q-di,q+Rr,1,Je.minY,Je.maxY,me),Ni=hi(Oi,We,q+br,q+Pn,1,Je.minY,Je.maxY,me),Oi=null),Yi&&(pi=hi(Yi,We,q-di,q+Rr,1,Je.minY,Je.maxY,me),cr=hi(Yi,We,q+br,q+Pn,1,Je.minY,Je.maxY,me),Yi=null),ke>1&&console.timeEnd("clipping"),Se.push(ri||[],V+1,2*H,2*q),Se.push(Ni||[],V+1,2*H,2*q+1),Se.push(pi||[],V+1,2*H+1,2*q),Se.push(cr||[],V+1,2*H+1,2*q+1)}}},Mt.prototype.getTile=function(re,V,H){var q=this.options,ne=q.extent,be=q.debug;if(re<0||re>24)return null;var _e=1<<re,Se=De(re,V=(V%_e+_e)%_e,H);if(this.tiles[Se])return Lr(this.tiles[Se],ne);be>1&&console.log("drilling down to z%d-%d-%d",re,V,H);for(var me,ke=re,We=V,$e=H;!me&&ke>0;)ke--,We=Math.floor(We/2),$e=Math.floor($e/2),me=this.tiles[De(ke,We,$e)];return me&&me.source?(be>1&&console.log("found parent tile z%d-%d-%d",ke,We,$e),be>1&&console.time("drilling down"),this.splitTile(me.source,ke,We,$e,re,V,H),be>1&&console.timeEnd("drilling down"),this.tiles[Se]?Lr(this.tiles[Se],ne):null):null};class wi extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(V,H){return o._(this,void 0,void 0,function*(){let q=V.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ne=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!ne)return null;let be=new class{constructor(Se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.W,this.length=Se.length,this._features=Se}feature(Se){return new class{constructor(me){this._feature=me,this.extent=o.W,this.type=me.type,this.properties=me.tags,"id"in me&&!isNaN(me.id)&&(this.id=parseInt(me.id,10))}loadGeometry(){if(this._feature.type===1){let me=[];for(let ke of this._feature.geometry)me.push([new o.P(ke[0],ke[1])]);return me}{let me=[];for(let ke of this._feature.geometry){let We=[];for(let $e of ke)We.push(new o.P($e[0],$e[1]));me.push(We)}return me}}toGeoJSON(me,ke,We){return F.call(this,me,ke,We)}}(this._features[Se])}}(ne.features),_e=$t(be);return _e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),{vectorTile:be,rawData:_e.buffer}})}loadData(V){return o._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();let q=!!(V&&V.request&&V.request.collectResourceTiming)&&new o.bs(V.request);this._pendingRequest=new AbortController;try{let ne=yield this.loadGeoJSON(V,this._pendingRequest);if(delete this._pendingRequest,typeof ne!="object")throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(P(ne,!0),V.filter){let _e=o.by(V.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(me=>`${me.key}: ${me.message}`).join(", "));ne={type:"FeatureCollection",features:ne.features.filter(me=>_e.value.evaluate({zoom:0},me))}}this._geoJSONIndex=V.cluster?new oi(function({superclusterOptions:_e,clusterProperties:Se}){if(!Se||!_e)return _e;let me={},ke={},We={accumulated:null,zoom:0},$e={properties:null},Je=Object.keys(Se);for(let Gt of Je){let[ai,ri]=Se[Gt],Ni=o.by(ri),pi=o.by(typeof ai=="string"?[ai,["accumulated"],["get",Gt]]:ai);me[Gt]=Ni.value,ke[Gt]=pi.value}return _e.map=Gt=>{$e.properties=Gt;let ai={};for(let ri of Je)ai[ri]=me[ri].evaluate(We,$e);return ai},_e.reduce=(Gt,ai)=>{$e.properties=ai;for(let ri of Je)We.accumulated=Gt[ri],Gt[ri]=ke[ri].evaluate(We,$e)},_e}(V)).load(ne.features):function(_e,Se){return new Mt(_e,Se)}(ne,V.geojsonVtOptions),this.loaded={};let be={};if(q){let _e=q.finish();_e&&(be.resourceTiming={},be.resourceTiming[V.source]=JSON.parse(JSON.stringify(_e)))}return be}catch(ne){if(delete this._pendingRequest,o.bz(ne))return{abandoned:!0};throw ne}})}reloadTile(V){let H=this.loaded;return H&&H[V.uid]?super.reloadTile(V):this.loadTile(V)}loadGeoJSON(V,H){return o._(this,void 0,void 0,function*(){let{promoteId:q}=V;if(V.request){let ne=yield o.h(V.request,H);return this._dataUpdateable=Jt(ne.data,q)?Dt(ne.data,q):void 0,ne.data}if(typeof V.data=="string")try{let ne=JSON.parse(V.data);return this._dataUpdateable=Jt(ne,q)?Dt(ne,q):void 0,ne}catch{throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`)}if(!V.dataDiff)throw new Error(`Input data given to '${V.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${V.source}`);return function(ne,be,_e){var Se,me,ke,We;if(be.removeAll&&ne.clear(),be.remove)for(let $e of be.remove)ne.delete($e);if(be.add)for(let $e of be.add){let Je=At($e,_e);Je!=null&&ne.set(Je,$e)}if(be.update)for(let $e of be.update){let Je=ne.get($e.id);if(Je==null)continue;let Gt=!$e.removeAllProperties&&(((Se=$e.removeProperties)===null||Se===void 0?void 0:Se.length)>0||((me=$e.addOrUpdateProperties)===null||me===void 0?void 0:me.length)>0);if(($e.newGeometry||$e.removeAllProperties||Gt)&&(Je=Object.assign({},Je),ne.set($e.id,Je),Gt&&(Je.properties=Object.assign({},Je.properties))),$e.newGeometry&&(Je.geometry=$e.newGeometry),$e.removeAllProperties)Je.properties={};else if(((ke=$e.removeProperties)===null||ke===void 0?void 0:ke.length)>0)for(let ai of $e.removeProperties)Object.prototype.hasOwnProperty.call(Je.properties,ai)&&delete Je.properties[ai];if(((We=$e.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0)for(let{key:ai,value:ri}of $e.addOrUpdateProperties)Je.properties[ai]=ri}}(this._dataUpdateable,V.dataDiff,q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(V){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(V){return this._geoJSONIndex.getClusterExpansionZoom(V.clusterId)}getClusterChildren(V){return this._geoJSONIndex.getChildren(V.clusterId)}getClusterLeaves(V){return this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset)}}class zi{constructor(V){this.self=V,this.actor=new o.C(V),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,q)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=q},this.self.addProtocol=o.bf,this.self.removeProtocol=o.bg,this.self.registerRTLTextPlugin=H=>{if(o.bA.isParsed())throw new Error("RTL text plugin already registered.");o.bA.setMethods(H)},this.actor.registerMessageHandler("loadDEMTile",(H,q)=>this._getDEMWorkerSource(H,q.source).loadTile(q)),this.actor.registerMessageHandler("removeDEMTile",(H,q)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,q.source).removeTile(q)})),this.actor.registerMessageHandler("getClusterExpansionZoom",(H,q)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(H,q.type,q.source).getClusterExpansionZoom(q)})),this.actor.registerMessageHandler("getClusterChildren",(H,q)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(H,q.type,q.source).getClusterChildren(q)})),this.actor.registerMessageHandler("getClusterLeaves",(H,q)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(H,q.type,q.source).getClusterLeaves(q)})),this.actor.registerMessageHandler("loadData",(H,q)=>this._getWorkerSource(H,q.type,q.source).loadData(q)),this.actor.registerMessageHandler("loadTile",(H,q)=>this._getWorkerSource(H,q.type,q.source).loadTile(q)),this.actor.registerMessageHandler("reloadTile",(H,q)=>this._getWorkerSource(H,q.type,q.source).reloadTile(q)),this.actor.registerMessageHandler("abortTile",(H,q)=>this._getWorkerSource(H,q.type,q.source).abortTile(q)),this.actor.registerMessageHandler("removeTile",(H,q)=>this._getWorkerSource(H,q.type,q.source).removeTile(q)),this.actor.registerMessageHandler("removeSource",(H,q)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][q.type]||!this.workerSources[H][q.type][q.source])return;let ne=this.workerSources[H][q.type][q.source];delete this.workerSources[H][q.type][q.source],ne.removeSource!==void 0&&ne.removeSource(q)})),this.actor.registerMessageHandler("removeMap",H=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("setReferrer",(H,q)=>o._(this,void 0,void 0,function*(){this.referrer=q})),this.actor.registerMessageHandler("syncRTLPluginState",(H,q)=>this._syncRTLPluginState(H,q)),this.actor.registerMessageHandler("importScript",(H,q)=>o._(this,void 0,void 0,function*(){this.self.importScripts(q)})),this.actor.registerMessageHandler("setImages",(H,q)=>this._setImages(H,q)),this.actor.registerMessageHandler("updateLayers",(H,q)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(q.layers,q.removedIds)})),this.actor.registerMessageHandler("setLayers",(H,q)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(q)}))}_setImages(V,H){return o._(this,void 0,void 0,function*(){this.availableImages[V]=H;for(let q in this.workerSources[V]){let ne=this.workerSources[V][q];for(let be in ne)ne[be].availableImages=H}})}_syncRTLPluginState(V,H){return o._(this,void 0,void 0,function*(){if(o.bA.isParsed())return o.bA.getState();if(H.pluginStatus!=="loading")return o.bA.setState(H),H;let q=H.pluginURL;if(this.self.importScripts(q),o.bA.isParsed()){let ne={pluginStatus:"loaded",pluginURL:q};return o.bA.setState(ne),ne}throw o.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${q}`)})}_getAvailableImages(V){let H=this.availableImages[V];return H||(H=[]),H}_getLayerIndex(V){let H=this.layerIndexes[V];return H||(H=this.layerIndexes[V]=new n),H}_getWorkerSource(V,H,q){if(this.workerSources[V]||(this.workerSources[V]={}),this.workerSources[V][H]||(this.workerSources[V][H]={}),!this.workerSources[V][H][q]){let ne={sendAsync:(be,_e)=>(be.targetMapId=V,this.actor.sendAsync(be,_e))};switch(H){case"vector":this.workerSources[V][H][q]=new b(ne,this._getLayerIndex(V),this._getAvailableImages(V));break;case"geojson":this.workerSources[V][H][q]=new wi(ne,this._getLayerIndex(V),this._getAvailableImages(V));break;default:this.workerSources[V][H][q]=new this.externalWorkerSourceTypes[H](ne,this._getLayerIndex(V),this._getAvailableImages(V))}}return this.workerSources[V][H][q]}_getDEMWorkerSource(V,H){return this.demWorkerSources[V]||(this.demWorkerSources[V]={}),this.demWorkerSources[V][H]||(this.demWorkerSources[V][H]=new _),this.demWorkerSources[V][H]}}return o.i(self)&&(self.worker=new zi(self)),zi}),t("index",["exports","./shared"],function(o,n){"use strict";var u="4.1.2";let h,m,b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((a,d)=>{let f=requestAnimationFrame(a);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),d(n.c())})}),getImageData(v,a=0){return this.getImageCanvasContext(v).getImageData(-a,-a,v.width+2*a,v.height+2*a)},getImageCanvasContext(v){let a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=v.width,a.height=v.height,d.drawImage(v,0,0,v.width,v.height),d},resolveURL:v=>(h||(h=document.createElement("a")),h.href=v,h.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(m==null&&(m=matchMedia("(prefers-reduced-motion: reduce)")),m.matches)}};class _{static testProp(a){if(!_.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in _.docStyle)return a[d];return a[0]}static create(a,d,f){let g=window.document.createElement(a);return d!==void 0&&(g.className=d),f&&f.appendChild(g),g}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(a,d){a.style[_.transformProp]=d}static addEventListener(a,d,f,g={}){a.addEventListener(d,f,"passive"in g?g:g.capture)}static removeEventListener(a,d,f,g={}){a.removeEventListener(d,f,"passive"in g?g:g.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static getScale(a){let d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,f){let g=d.boundingClientRect;return new n.P((f.clientX-g.left)/d.x-a.clientLeft,(f.clientY-g.top)/d.y-a.clientTop)}static mousePos(a,d){let f=_.getScale(a);return _.getPoint(a,f,d)}static touchPos(a,d){let f=[],g=_.getScale(a);for(let x=0;x<d.length;x++)f.push(_.getPoint(a,g,d[x]));return f}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);let S={supported:!1,testSupport:function(v){!F&&P&&(G?$(v):T=v)}},T,P,F=!1,G=!1;function $(v){let a=v.createTexture();v.bindTexture(v.TEXTURE_2D,a);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,P),v.isContextLost())return;S.supported=!0}catch{}v.deleteTexture(a),F=!0}var ee,ue;typeof document<"u"&&(P=document.createElement("img"),P.onload=function(){T&&$(T),T=null,G=!0},P.onerror=function(){F=!0,T=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let a,d,f,g;v.resetRequestQueue=()=>{a=[],d=0,f=0,g={}},v.addThrottleControl=I=>{let z=f++;return g[z]=I,z},v.removeThrottleControl=I=>{delete g[I],E()},v.getImage=(I,z,B=!0)=>new Promise((U,Z)=>{S.supported&&(I.headers||(I.headers={}),I.headers.accept="image/webp,*/*"),n.e(I,{type:"image"}),a.push({abortController:z,requestParameters:I,supportImageRefresh:B,state:"queued",onError:se=>{Z(se)},onSuccess:se=>{U(se)}}),E()});let x=I=>n._(this,void 0,void 0,function*(){I.state="running";let{requestParameters:z,supportImageRefresh:B,onError:U,onSuccess:Z,abortController:se}=I,oe=B===!1&&!n.i(self)&&!n.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((ve,Oe)=>ve&&Oe==="accept",!0));d++;let le=oe?M(z,se):n.m(z,se);try{let ve=yield le;delete I.abortController,I.state="completed",ve.data instanceof HTMLImageElement||n.b(ve.data)?Z(ve):ve.data&&Z({data:yield(te=ve.data,typeof createImageBitmap=="function"?n.d(te):n.f(te)),cacheControl:ve.cacheControl,expires:ve.expires})}catch(ve){delete I.abortController,U(ve)}finally{d--,E()}var te}),E=()=>{let I=(()=>{for(let z of Object.keys(g))if(g[z]())return!0;return!1})()?n.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:n.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=d;z<I&&a.length>0;z++){let B=a.shift();B.abortController.signal.aborted?z--:x(B)}},M=(I,z)=>new Promise((B,U)=>{let Z=new Image,se=I.url,oe=I.credentials;oe&&oe==="include"?Z.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!n.s(se))&&(Z.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{Z.src="",U(n.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,B({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,z.signal.aborted||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=se})}(ee||(ee={})),ee.resetRequestQueue(),function(v){v.Glyphs="Glyphs",v.Image="Image",v.Source="Source",v.SpriteImage="SpriteImage",v.SpriteJSON="SpriteJSON",v.Style="Style",v.Tile="Tile",v.Unknown="Unknown"}(ue||(ue={}));class fe{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}normalizeSpriteURL(a,d,f){let g=function(x){let E=x.match(Y);if(!E)throw new Error(`Unable to parse URL "${x}"`);return{protocol:E[1],authority:E[2],path:E[3]||"/",params:E[4]?E[4].split("&"):[]}}(a);return g.path+=`${d}${f}`,function(x){let E=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${E}`}(g)}setTransformRequest(a){this._transformRequestFn=a}}let Y=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function je(v){var a=new n.A(3);return a[0]=v[0],a[1]=v[1],a[2]=v[2],a}var Ce,xe=function(v,a,d){return v[0]=a[0]-d[0],v[1]=a[1]-d[1],v[2]=a[2]-d[2],v};Ce=new n.A(3),n.A!=Float32Array&&(Ce[0]=0,Ce[1]=0,Ce[2]=0);var Le=function(v){var a=v[0],d=v[1];return a*a+d*d};function we(v){let a=[];if(typeof v=="string")a.push({id:"default",url:v});else if(v&&v.length>0){let d=[];for(let{id:f,url:g}of v){let x=`${f}${g}`;d.indexOf(x)===-1&&(d.push(x),a.push({id:f,url:g}))}}return a}(function(){var v=new n.A(2);n.A!=Float32Array&&(v[0]=0,v[1]=0)})();class st{constructor(a,d,f,g){this.context=a,this.format=f,this.texture=a.gl.createTexture(),this.update(d,g)}update(a,d,f){let{width:g,height:x}=a,E=!(this.size&&this.size[0]===g&&this.size[1]===x||f),{context:M}=this,{gl:I}=M;if(this.useMipmap=!!(d&&d.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!d||d.premultiply!==!1)),E)this.size=[g,x],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||n.b(a)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,a):I.texImage2D(I.TEXTURE_2D,0,this.format,g,x,0,this.format,I.UNSIGNED_BYTE,a.data);else{let{x:z,y:B}=f||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||n.b(a)?I.texSubImage2D(I.TEXTURE_2D,0,z,B,I.RGBA,I.UNSIGNED_BYTE,a):I.texSubImage2D(I.TEXTURE_2D,0,z,B,g,x,I.RGBA,I.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(a,d,f){let{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),a!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||a),this.filter=a),d!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,d),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function He(v){let{userImage:a}=v;return!!(a&&a.render&&a.render())&&(v.data.replace(new Uint8Array(a.data.buffer)),!0)}class zt extends n.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new n.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(let{ids:d,promiseResolve:f}of this.requestors)f(this._getImagesForIds(d));this.requestors=[]}}getImage(a){let d=this.images[a];if(d&&!d.data&&d.spriteData){let f=d.spriteData;d.data=new n.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let f=!0,g=d.data||d.spriteData;return this._validateStretch(d.stretchX,g&&g.width)||(this.fire(new n.j(new Error(`Image "${a}" has invalid "stretchX" value`))),f=!1),this._validateStretch(d.stretchY,g&&g.height)||(this.fire(new n.j(new Error(`Image "${a}" has invalid "stretchY" value`))),f=!1),this._validateContent(d.content,d)||(this.fire(new n.j(new Error(`Image "${a}" has invalid "content" value`))),f=!1),f}_validateStretch(a,d){if(!a)return!0;let f=0;for(let g of a){if(g[0]<f||g[1]<g[0]||d<g[1])return!1;f=g[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;let f=d.spriteData,g=f&&f.width||d.data.width,x=f&&f.height||d.data.height;return!(a[0]<0||g<a[0]||a[1]<0||x<a[1]||a[2]<0||g<a[2]||a[3]<0||x<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,f=!0){let g=this.getImage(a);if(f&&(g.data.width!==d.data.width||g.data.height!==d.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=g.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){let d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise((d,f)=>{let g=!0;if(!this.isLoaded())for(let x of a)this.images[x]||(g=!1);this.isLoaded()||g?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})})}_getImagesForIds(a){let d={};for(let f of a){let g=this.getImage(f);g||(this.fire(new n.k("styleimagemissing",{id:f})),g=this.getImage(f)),g?d[f]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:n.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){let{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){let d=this.patterns[a],f=this.getImage(a);if(!f)return null;if(d&&d.position.version===f.version)return d.position;if(d)d.position.version=f.version;else{let g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},x=new n.I(g,f);this.patterns[a]={bin:g,position:x}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){let d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new st(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){let a=[];for(let x in this.patterns)a.push(this.patterns[x].bin);let{w:d,h:f}=n.p(a),g=this.atlasImage;g.resize({width:d||1,height:f||1});for(let x in this.patterns){let{bin:E}=this.patterns[x],M=E.x+1,I=E.y+1,z=this.getImage(x).data,B=z.width,U=z.height;n.R.copy(z,g,{x:0,y:0},{x:M,y:I},{width:B,height:U}),n.R.copy(z,g,{x:0,y:U-1},{x:M,y:I-1},{width:B,height:1}),n.R.copy(z,g,{x:0,y:0},{x:M,y:I+U},{width:B,height:1}),n.R.copy(z,g,{x:B-1,y:0},{x:M-1,y:I},{width:1,height:U}),n.R.copy(z,g,{x:0,y:0},{x:M+B,y:I},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(let d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;let f=this.getImage(d);f||n.w(`Image with ID: "${d}" was not found`),He(f)&&this.updateImage(d,f)}}}let rt=1e20;function jt(v,a,d,f,g,x,E,M,I){for(let z=a;z<a+f;z++)$t(v,d*x+z,x,g,E,M,I);for(let z=d;z<d+g;z++)$t(v,z*x+a,1,f,E,M,I)}function $t(v,a,d,f,g,x,E){x[0]=0,E[0]=-rt,E[1]=rt,g[0]=v[a];for(let M=1,I=0,z=0;M<f;M++){g[M]=v[a+M*d];let B=M*M;do{let U=x[I];z=(g[M]-g[U]+B-U*U)/(M-U)/2}while(z<=E[I]&&--I>-1);I++,x[I]=M,E[I]=z,E[I+1]=rt}for(let M=0,I=0;M<f;M++){for(;E[I+1]<M;)I++;let z=x[I],B=M-z;v[a+M*d]=g[z]+B*B}}class dt{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return n._(this,void 0,void 0,function*(){let d=[];for(let x in a)for(let E of a[x])d.push(this._getAndCacheGlyphsPromise(x,E));let f=yield Promise.all(d),g={};for(let{stack:x,id:E,glyph:M}of f)g[x]||(g[x]={}),g[x][E]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return g})}_getAndCacheGlyphsPromise(a,d){return n._(this,void 0,void 0,function*(){let f=this.entries[a];f||(f=this.entries[a]={glyphs:{},requests:{},ranges:{}});let g=f.glyphs[d];if(g!==void 0)return{stack:a,id:d,glyph:g};if(g=this._tinySDF(f,a,d),g)return f.glyphs[d]=g,{stack:a,id:d,glyph:g};let x=Math.floor(d/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[x])return{stack:a,id:d,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[x]){let M=dt.loadGlyphRange(a,x,this.url,this.requestManager);f.requests[x]=M}let E=yield f.requests[x];for(let M in E)this._doesCharSupportLocalGlyph(+M)||(f.glyphs[+M]=E[+M]);return f.ranges[x]=!0,{stack:a,id:d,glyph:E[d]||null}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(n.u["CJK Unified Ideographs"](a)||n.u["Hangul Syllables"](a)||n.u.Hiragana(a)||n.u.Katakana(a))}_tinySDF(a,d,f){let g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let x=a.tinySDF;if(!x){let M="400";/bold/i.test(d)?M="900":/medium/i.test(d)?M="500":/light/i.test(d)&&(M="200"),x=a.tinySDF=new dt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:M})}let E=x.draw(String.fromCharCode(f));return{id:f,bitmap:new n.o({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}dt.loadGlyphRange=function(v,a,d,f){return n._(this,void 0,void 0,function*(){let g=256*a,x=g+255,E=f.transformRequest(d.replace("{fontstack}",v).replace("{range}",`${g}-${x}`),ue.Glyphs),M=yield n.l(E,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${a}, ${g}-${x}`);let I={};for(let z of n.n(M.data))I[z.id]=z;return I})},dt.TinySDF=class{constructor({fontSize:v=24,buffer:a=3,radius:d=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:x="normal",fontStyle:E="normal"}={}){this.buffer=a,this.cutoff=f,this.radius=d;let M=this.size=v+4*a,I=this._createCanvas(M),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${E} ${x} ${v}px ${g}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(v){let a=document.createElement("canvas");return a.width=a.height=v,a}draw(v){let{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:x}=this.ctx.measureText(v),E=Math.ceil(d),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-g))),I=Math.min(this.size-this.buffer,E+Math.ceil(f)),z=M+2*this.buffer,B=I+2*this.buffer,U=Math.max(z*B,0),Z=new Uint8ClampedArray(U),se={data:Z,width:z,height:B,glyphWidth:M,glyphHeight:I,glyphTop:E,glyphLeft:0,glyphAdvance:a};if(M===0||I===0)return se;let{ctx:oe,buffer:le,gridInner:te,gridOuter:ve}=this;oe.clearRect(le,le,M,I),oe.fillText(v,le,le+E);let Oe=oe.getImageData(le,le,M,I);ve.fill(rt,0,U),te.fill(0,0,U);for(let he=0;he<I;he++)for(let Te=0;Te<M;Te++){let Re=Oe.data[4*(he*M+Te)+3]/255;if(Re===0)continue;let Ve=(he+le)*z+Te+le;if(Re===1)ve[Ve]=0,te[Ve]=rt;else{let Qe=.5-Re;ve[Ve]=Qe>0?Qe*Qe:0,te[Ve]=Qe<0?Qe*Qe:0}}jt(ve,0,0,z,B,z,this.f,this.v,this.z),jt(te,le,le,M,I,z,this.f,this.v,this.z);for(let he=0;he<U;he++){let Te=Math.sqrt(ve[he])-Math.sqrt(te[he]);Z[he]=Math.round(255-255*(Te/this.radius+this.cutoff))}return se}};class vt{constructor(){this.specification=n.v.light.position}possiblyEvaluate(a,d){return n.y(a.expression.evaluate(d))}interpolate(a,d,f){return{x:n.z.number(a.x,d.x,f),y:n.z.number(a.y,d.y,f),z:n.z.number(a.z,d.z,f)}}}let bt;class Qt extends n.E{constructor(a){super(),bt=bt||new n.q({anchor:new n.D(n.v.light.anchor),position:new vt,color:new n.D(n.v.light.color),intensity:new n.D(n.v.light.intensity)}),this._transitionable=new n.T(bt),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(n.r,a,d))for(let f in a){let g=a[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,f){return(!f||f.validate!==!1)&&n.t(this,a.call(n.x,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:n.v}))}}class Yt{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){let f=a.join(",")+String(d);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(a,d)),this.dashEntry[f]}getDashRanges(a,d,f){let g=[],x=a.length%2==1?-a[a.length-1]*f:0,E=a[0]*f,M=!0;g.push({left:x,right:E,isDash:M,zeroLength:a[0]===0});let I=a[0];for(let z=1;z<a.length;z++){M=!M;let B=a[z];x=I*f,I+=B,E=I*f,g.push({left:x,right:E,isDash:M,zeroLength:B===0})}return g}addRoundDash(a,d,f){let g=d/2;for(let x=-f;x<=f;x++){let E=this.width*(this.nextRow+f+x),M=0,I=a[M];for(let z=0;z<this.width;z++){z/I.right>1&&(I=a[++M]);let B=Math.abs(z-I.left),U=Math.abs(z-I.right),Z=Math.min(B,U),se,oe=x/f*(g+1);if(I.isDash){let le=g-Math.abs(oe);se=Math.sqrt(Z*Z+le*le)}else se=g-Math.sqrt(Z*Z+oe*oe);this.data[E+z]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(a){for(let M=a.length-1;M>=0;--M){let I=a[M],z=a[M+1];I.zeroLength?a.splice(M,1):z&&z.isDash===I.isDash&&(z.left=I.left,a.splice(M,1))}let d=a[0],f=a[a.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);let g=this.width*this.nextRow,x=0,E=a[x];for(let M=0;M<this.width;M++){M/E.right>1&&(E=a[++x]);let I=Math.abs(M-E.left),z=Math.abs(M-E.right),B=Math.min(I,z);this.data[g+M]=Math.max(0,Math.min(255,(E.isDash?B:-B)+128))}}addDash(a,d){let f=d?7:0,g=2*f+1;if(this.nextRow+g>this.height)return n.w("LineAtlas out of space"),null;let x=0;for(let M=0;M<a.length;M++)x+=a[M];if(x!==0){let M=this.width/x,I=this.getDashRanges(a,this.width,M);d?this.addRoundDash(I,M,f):this.addRegularDash(I)}let E={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:x};return this.nextRow+=g,this.dirty=!0,E}bind(a){let d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}let ki="maplibre_preloaded_worker_pool";class oi{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<oi.workerCount;)this.workers.push(new Worker(n.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ki]}numActive(){return Object.keys(this.active).length}}let tt=Math.floor(b.hardwareConcurrency/2),Fe,Kt;function ti(){return Fe||(Fe=new oi),Fe}oi.workerCount=n.B(globalThis)?Math.max(Math.min(tt,3),1):1;class Xi{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;let f=this.workerPool.acquire(d);for(let g=0;g<f.length;g++){let x=new n.C(f[g],d);x.name=`Worker ${g}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){let f=[];for(let g of this.actors)f.push(g.sendAsync({type:a,data:d}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(let f of this.actors)f.registerMessageHandler(a,d)}}function nt(){return Kt||(Kt=new Xi(ti(),n.G),Kt.registerMessageHandler("getResource",(v,a,d)=>n.m(a,d))),Kt}function Wt(v,a){let d=n.F();return n.H(d,d,[1,1,0]),n.J(d,d,[.5*v.width,.5*v.height,1]),n.K(d,d,v.calculatePosMatrix(a.toUnwrapped()))}function yi(v,a,d,f,g,x){let E=function(U,Z,se){if(U)for(let oe of U){let le=Z[oe];if(le&&le.source===se&&le.type==="fill-extrusion")return!0}else for(let oe in Z){let le=Z[oe];if(le.source===se&&le.type==="fill-extrusion")return!0}return!1}(g&&g.layers,a,v.id),M=x.maxPitchScaleFactor(),I=v.tilesIn(f,M,E);I.sort(Rt);let z=[];for(let U of I)z.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(a,d,v._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,g,x,M,Wt(v.transform,U.tileID))});let B=function(U){let Z={},se={};for(let oe of U){let le=oe.queryResults,te=oe.wrappedTileID,ve=se[te]=se[te]||{};for(let Oe in le){let he=le[Oe],Te=ve[Oe]=ve[Oe]||{},Re=Z[Oe]=Z[Oe]||[];for(let Ve of he)Te[Ve.featureIndex]||(Te[Ve.featureIndex]=!0,Re.push(Ve))}}return Z}(z);for(let U in B)B[U].forEach(Z=>{let se=Z.feature,oe=v.getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=oe});return B}function Rt(v,a){let d=v.tileID,f=a.tileID;return d.overscaledZ-f.overscaledZ||d.canonical.y-f.canonical.y||d.wrap-f.wrap||d.canonical.x-f.canonical.x}function vi(v,a,d){return n._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield n.h(a.transformRequest(v.url,ue.Source),d)).data:yield b.frameAsync(d),!f)return null;let g=n.L(n.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(g.vectorLayerIds=f.vector_layers.map(x=>x.id)),g})}class lt{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof n.M?new n.M(a.lng,a.lat):n.M.convert(a),this}setSouthWest(a){return this._sw=a instanceof n.M?new n.M(a.lng,a.lat):n.M.convert(a),this}extend(a){let d=this._sw,f=this._ne,g,x;if(a instanceof n.M)g=a,x=a;else{if(!(a instanceof lt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(lt.convert(a)):this.extend(n.M.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(n.M.convert(a)):this;if(g=a._sw,x=a._ne,!g||!x)return this}return d||f?(d.lng=Math.min(g.lng,d.lng),d.lat=Math.min(g.lat,d.lat),f.lng=Math.max(x.lng,f.lng),f.lat=Math.max(x.lat,f.lat)):(this._sw=new n.M(g.lng,g.lat),this._ne=new n.M(x.lng,x.lat)),this}getCenter(){return new n.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new n.M(this.getWest(),this.getNorth())}getSouthEast(){return new n.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){let{lng:d,lat:f}=n.M.convert(a),g=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(a){return a instanceof lt?a:a&&new lt(a)}static fromLngLat(a,d=0){let f=360*d/40075017,g=f/Math.cos(Math.PI/180*a.lat);return new lt(new n.M(a.lng-g,a.lat-f),new n.M(a.lng+g,a.lat+f))}}class _i{constructor(a,d,f){this.bounds=lt.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=f||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){let d=Math.pow(2,a.z),f=Math.floor(n.N(this.bounds.getWest())*d),g=Math.floor(n.O(this.bounds.getNorth())*d),x=Math.ceil(n.N(this.bounds.getEast())*d),E=Math.ceil(n.O(this.bounds.getSouth())*d);return a.x>=f&&a.x<x&&a.y>=g&&a.y<E}}class Ue extends n.E{constructor(a,d,f,g){if(super(),this.id=a,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,n.e(this,n.L(d,["url","scheme","tileSize","promoteId"])),this._options=n.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return n._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new n.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let a=yield vi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(n.e(this,a),a.bounds&&(this.tileBounds=new _i(a.bounds,this.minzoom,this.maxzoom)),this.fire(new n.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new n.j(a))}})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return n.e({},this._options)}loadTile(a){return n._(this,void 0,void 0,function*(){let d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(d,ue.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let g="reloadTile";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise((x,E)=>{a.reloadPromise={resolve:x,reject:E}})}else a.actor=this.dispatcher.getActor(),g="loadTile";a.abortController=new AbortController;try{let x=yield a.actor.sendAsync({type:g,data:f},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,x)}catch(x){if(delete a.abortController,a.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(a,null)}})}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){let f=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(f.resolve).catch(f.reject)}}abortTile(a){return n._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"abortTile",data:{uid:a.uid,type:this.type,source:this.id}}))})}unloadTile(a){return n._(this,void 0,void 0,function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"removeTile",data:{uid:a.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class fi extends n.E{constructor(a,d,f,g){super(),this.id=a,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.e({type:"raster"},d),n.e(this,n.L(d,["url","scheme","tileSize"]))}load(){return n._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new n.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let a=yield vi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(n.e(this,a),a.bounds&&(this.tileBounds=new _i(a.bounds,this.minzoom,this.maxzoom)),this.fire(new n.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new n.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new n.j(a))}})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}serialize(){return n.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return n._(this,void 0,void 0,function*(){let d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{let f=yield ee.getImage(this.map._requestManager.transformRequest(d,ue.Tile),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&a.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let g=this.map.painter.context,x=g.gl,E=f.data;a.texture=this.map.painter.getTileTexture(E.width),a.texture?a.texture.update(E,{useMipmap:!0}):(a.texture=new st(g,E,x.RGBA,{useMipmap:!0}),a.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),g.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,g.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,g.extTextureFilterAnisotropicMax)),a.state="loaded"}}catch(f){if(delete a.abortController,a.aborted)a.state="unloaded";else if(f)throw a.state="errored",f}})}abortTile(a){return n._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)})}unloadTile(a){return n._(this,void 0,void 0,function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)})}hasTransition(){return!1}}class xi extends fi{constructor(a,d,f,g){super(a,d,f,g),this.type="raster-dem",this.maxzoom=22,this._options=n.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return n._(this,void 0,void 0,function*(){let d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(d,ue.Tile);a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{let g=yield ee.getImage(f,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(g&&g.data){let x=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&a.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let E=n.b(x)&&n.S()?x:yield this.readImageNow(x),M={type:this.type,uid:a.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();let I=yield a.actor.sendAsync({type:"loadDEMTile",data:M});a.dem=I,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(g){if(delete a.abortController,a.aborted)a.state="unloaded";else if(g)throw a.state="errored",g}})}readImageNow(a){return n._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&n.U()){let d=a.width+2,f=a.height+2;try{return new n.R({width:d,height:f},yield n.V(a,-1,-1,d,f))}catch{}}return b.getImageData(a,1)})}_getNeighboringTiles(a){let d=a.canonical,f=Math.pow(2,d.z),g=(d.x-1+f)%f,x=d.x===0?a.wrap-1:a.wrap,E=(d.x+1+f)%f,M=d.x+1===f?a.wrap+1:a.wrap,I={};return I[new n.Q(a.overscaledZ,x,d.z,g,d.y).key]={backfilled:!1},I[new n.Q(a.overscaledZ,M,d.z,E,d.y).key]={backfilled:!1},d.y>0&&(I[new n.Q(a.overscaledZ,x,d.z,g,d.y-1).key]={backfilled:!1},I[new n.Q(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},I[new n.Q(a.overscaledZ,M,d.z,E,d.y-1).key]={backfilled:!1}),d.y+1<f&&(I[new n.Q(a.overscaledZ,x,d.z,g,d.y+1).key]={backfilled:!1},I[new n.Q(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},I[new n.Q(a.overscaledZ,M,d.z,E,d.y+1).key]={backfilled:!1}),I}unloadTile(a){return n._(this,void 0,void 0,function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:a.uid,source:this.id}}))})}}class hi extends n.E{constructor(a,d,f,g){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=d.data,this._options=n.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;let x=n.W/this.tileSize;this.workerOptions=n.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*x,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*x,extent:n.W,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:n.W,radius:(d.clusterRadius||50)*x,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return n._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,f){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:f}})}_updateWorkerData(a){return n._(this,void 0,void 0,function*(){let d=n.e({type:this.type},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),ue.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new n.k("dataloading",{dataType:"source"}));try{let f=yield this.actor.sendAsync({type:"loadData",data:d});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new n.k("dataabort",{dataType:"source"}));let g=null;f.resourceTiming&&f.resourceTiming[this.id]&&(g=f.resourceTiming[this.id].slice(0));let x={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&n.e(x,{resourceTiming:g}),this.fire(new n.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new n.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new n.k("dataabort",{dataType:"source"}));this.fire(new n.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(a){return n._(this,void 0,void 0,function*(){let d=a.actor?"reloadTile":"loadTile";a.actor=this.actor;let f={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;let g=yield this.actor.sendAsync({type:d,data:f},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(g,this.map.painter,d==="reloadTile")})}abortTile(a){return n._(this,void 0,void 0,function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0})}unloadTile(a){return n._(this,void 0,void 0,function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:a.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return n.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var fr=n.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Mr extends n.E{constructor(a,d,f,g){super(),this.id=a,this.dispatcher=f,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=d}load(a){return n._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new n.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let d=yield ee.getImage(this.map._requestManager.transformRequest(this.url,ue.Image),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this.fire(new n.j(d))}})}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new n.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;let d=a.map(n.Y.fromLngLat);this.tileID=function(g){let x=1/0,E=1/0,M=-1/0,I=-1/0;for(let Z of g)x=Math.min(x,Z.x),E=Math.min(E,Z.y),M=Math.max(M,Z.x),I=Math.max(I,Z.y);let z=Math.max(M-x,I-E),B=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),U=Math.pow(2,B);return new n.a0(B,Math.floor((x+M)/2*U),Math.floor((E+I)/2*U))}(d),this.minzoom=this.maxzoom=this.tileID.z;let f=d.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new n.Z,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,n.W,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,n.W),this._boundsArray.emplaceBack(f[2].x,f[2].y,n.W,n.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new n.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,fr.members)),this.boundsSegments||(this.boundsSegments=n.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new st(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let f=!1;for(let g in this.tiles){let x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new n.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return n._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class en extends Mr{constructor(a,d,f,g){super(a,d,f,g),this.roundZoom=!0,this.type="video",this.options=d}load(){return n._(this,void 0,void 0,function*(){this._loaded=!1;let a=this.options;this.urls=[];for(let d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,ue.Source).url);try{let d=yield n.a2(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new n.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){let d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new n.j(new n.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,fr.members)),this.boundsSegments||(this.boundsSegments=n.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new st(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let f=!1;for(let g in this.tiles){let x=this.tiles[g];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,f=!0)}f&&this.fire(new n.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tn extends Mr{constructor(a,d,f,g){super(a,d,f,g),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(E=>typeof E!="number"))||this.fire(new n.j(new n.a1(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new n.j(new n.a1(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new n.j(new n.a1(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new n.j(new n.a1(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new n.j(new n.a1(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return n._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new n.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let d=this.map.painter.context,f=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,fr.members)),this.boundsSegments||(this.boundsSegments=n.$.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new st(d,this.canvas,f.RGBA,{premultiply:!0});let g=!1;for(let x in this.tiles){let E=this.tiles[x];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new n.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}let bn={},Vn=v=>{switch(v){case"geojson":return hi;case"image":return Mr;case"raster":return fi;case"raster-dem":return xi;case"vector":return Ue;case"video":return en;case"canvas":return tn}return bn[v]},In="RTLPluginLoaded";class Zr extends n.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=nt()}_syncState(a){return this.status=a,this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:a,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return n._(this,arguments,void 0,function*(d,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return n._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new n.k(In))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ct=null;function Lr(){return ct||(ct=new Zr),ct}class Fr{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=n.a3(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){let d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(g,x){let E={};if(!x)return E;for(let M of g){let I=M.layerIds.map(z=>x.getLayer(z)).filter(Boolean);if(I.length!==0){M.layers=I,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(z=>I.filter(B=>B.id===z)[0]));for(let z of I)E[z.id]=M}}return E}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(let g in this.buckets){let x=this.buckets[g];if(x instanceof n.a5){if(this.hasSymbolBuckets=!0,!f)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let g in this.buckets){let x=this.buckets[g];if(x instanceof n.a5&&x.hasRTLText){this.hasRTLText=!0,Lr().lazyLoad();break}}this.queryPadding=0;for(let g in this.buckets){let x=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(g).queryRadius(x))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new n.a4}unloadVectorData(){for(let a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(let f in this.buckets){let g=this.buckets[f];g.uploadPending()&&g.upload(a)}let d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new st(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new st(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,f,g,x,E,M,I,z,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:x,scale:E,tileSize:this.tileSize,pixelPosMatrix:B,transform:I,params:M,queryPadding:this.queryPadding*z},a,d,f):{}}querySourceFeatures(a,d){let f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;let g=f.loadVTLayers(),x=d&&d.sourceLayer?d.sourceLayer:"",E=g._geojsonTileLayer||g[x];if(!E)return;let M=n.a6(d&&d.filter),{z:I,x:z,y:B}=this.tileID.canonical,U={z:I,x:z,y:B};for(let Z=0;Z<E.length;Z++){let se=E.feature(Z);if(M.needGeometry){let te=n.a7(se,!0);if(!M.filter(new n.a8(this.tileID.overscaledZ),te,this.tileID.canonical))continue}else if(!M.filter(new n.a8(this.tileID.overscaledZ),se))continue;let oe=f.getId(se,x),le=new n.a9(se,I,z,B,oe);le.tile=U,a.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){let d=this.expirationTime;if(a.cacheControl){let f=n.aa(a.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){let f=Date.now(),g=!1;if(this.expirationTime>f)g=!1;else if(d)if(this.expirationTime<d)g=!0;else{let x=this.expirationTime-d;x?this.expirationTime=f+Math.max(x,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;let f=this.latestFeatureIndex.loadVTLayers();for(let g in this.buckets){if(!d.style.hasLayer(g))continue;let x=this.buckets[g],E=x.layers[0].sourceLayer||"_geojsonTileLayer",M=f[E],I=a[E];if(!M||!I||Object.keys(I).length===0)continue;x.update(I,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});let z=d&&d.style&&d.style.getLayer(g);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=b.now()+a}setDependencies(a,d){let f={};for(let g of d)f[g]=!0;this.dependencies[a]=f}hasDependency(a,d){for(let f of a){let g=this.dependencies[f];if(g){for(let x of d)if(g[x])return!0}}return!1}}class Kn{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(let a in this.data)for(let d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,f){let g=a.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);let x={value:d,timeout:void 0};if(f!==void 0&&(x.timeout=setTimeout(()=>{this.remove(a,x)},f)),this.data[g].push(x),this.order.push(g),this.order.length>this.max){let E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){let d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){let d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;let f=a.wrapped().key,g=d===void 0?0:this.data[f].indexOf(d),x=this.data[f][g];return this.data[f].splice(g,1),x.timeout&&clearTimeout(x.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(x.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){let d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){let d=[];for(let f in this.data)for(let g of this.data[f])a(g.value)||d.push(g);for(let f of d)this.remove(f.value.tileID,f)}}class ko{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,f){let g=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][g]=this.stateChanges[a][g]||{},n.e(this.stateChanges[a][g],f),this.deletedStates[a]===null){this.deletedStates[a]={};for(let x in this.state[a])x!==g&&(this.deletedStates[a][x]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][g]===null){this.deletedStates[a][g]={};for(let x in this.state[a][g])f[x]||(this.deletedStates[a][g][x]=null)}else for(let x in f)this.deletedStates[a]&&this.deletedStates[a][g]&&this.deletedStates[a][g][x]===null&&delete this.deletedStates[a][g][x]}removeFeatureState(a,d,f){if(this.deletedStates[a]===null)return;let g=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},f&&d!==void 0)this.deletedStates[a][g]!==null&&(this.deletedStates[a][g]=this.deletedStates[a][g]||{},this.deletedStates[a][g][f]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][g])for(f in this.deletedStates[a][g]={},this.stateChanges[a][g])this.deletedStates[a][g][f]=null;else this.deletedStates[a][g]=null;else this.deletedStates[a]=null}getState(a,d){let f=String(d),g=n.e({},(this.state[a]||{})[f],(this.stateChanges[a]||{})[f]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){let x=this.deletedStates[a][d];if(x===null)return{};for(let E in x)delete g[E]}return g}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){let f={};for(let g in this.stateChanges){this.state[g]=this.state[g]||{};let x={};for(let E in this.stateChanges[g])this.state[g][E]||(this.state[g][E]={}),n.e(this.state[g][E],this.stateChanges[g][E]),x[E]=this.state[g][E];f[g]=x}for(let g in this.deletedStates){this.state[g]=this.state[g]||{};let x={};if(this.deletedStates[g]===null)for(let E in this.state[g])x[E]={},this.state[g][E]={};else for(let E in this.deletedStates[g]){if(this.deletedStates[g][E]===null)this.state[g][E]={};else for(let M of Object.keys(this.deletedStates[g][E]))delete this.state[g][E][M];x[E]=this.state[g][E]}f[g]=f[g]||{},n.e(f[g],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(let g in a)a[g].setFeatureState(f,d)}}class ft extends n.E{constructor(a,d,f){super(),this.id=a,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,x,E,M)=>{let I=new(Vn(x.type))(g,x,E,M);if(I.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${I.id}`);return I})(a,d,f,this),this._tiles={},this._cache=new Kn(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ko,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let a in this._tiles){let d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,f){return n._(this,void 0,void 0,function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,f)}catch(g){a.state="errored",g.status!==404?this._source.fire(new n.j(g,{tile:a})):this.update(this.transform,this.terrain)}})}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new n.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let d in this._tiles){let f=this._tiles[d];f.upload(a),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Mt).map(a=>a.key)}getRenderableIds(a){let d=[];for(let f in this._tiles)this._isIdRenderable(f,a)&&d.push(this._tiles[f]);return a?d.sort((f,g)=>{let x=f.tileID,E=g.tileID,M=new n.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),I=new n.P(E.canonical.x,E.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-E.overscaledZ||I.y-M.y||I.x-M.x}).map(f=>f.tileID.key):d.map(f=>f.tileID).sort(Mt).map(f=>f.key)}hasRenderableParent(a){let d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){return n._(this,void 0,void 0,function*(){let f=this._tiles[a];f&&(f.state!=="loading"&&(f.state=d),yield this._loadTile(f,a,d))})}_tileLoaded(a,d,f){a.timeAdded=b.now(),f==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new n.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){let d=this.getRenderableIds();for(let g=0;g<d.length;g++){let x=d[g];if(a.neighboringTiles&&a.neighboringTiles[x]){let E=this.getTileByID(x);f(a,E),f(E,a)}}function f(g,x){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let E=x.tileID.canonical.x-g.tileID.canonical.x,M=x.tileID.canonical.y-g.tileID.canonical.y,I=Math.pow(2,g.tileID.canonical.z),z=x.tileID.key;E===0&&M===0||Math.abs(M)>1||(Math.abs(E)>1&&(Math.abs(E+I)===1?E+=I:Math.abs(E-I)===1&&(E-=I)),x.dem&&g.dem&&(g.dem.backfillBorder(x.dem,E,M),g.neighboringTiles&&g.neighboringTiles[z]&&(g.neighboringTiles[z].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,f,g){for(let x in this._tiles){let E=this._tiles[x];if(g[x]||!E.hasData()||E.tileID.overscaledZ<=d||E.tileID.overscaledZ>f)continue;let M=E.tileID;for(;E&&E.tileID.overscaledZ>d+1;){let z=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[z.key],E&&E.hasData()&&(M=z)}let I=M;for(;I.overscaledZ>d;)if(I=I.scaledTo(I.overscaledZ-1),a[I.key]){g[M.key]=M;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){let f=this._loadedParentTiles[a.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=a.overscaledZ-1;f>=d;f--){let g=a.scaledTo(f),x=this._getLoadedTile(g);if(x)return x}}_getLoadedTile(a){let d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){let d=Math.ceil(a.width/this._source.tileSize)+1,f=Math.ceil(a.height/this._source.tileSize)+1,g=Math.floor(d*f*(this._maxTileCacheZoomLevels===null?n.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(x)}handleWrapJump(a){let d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){let f={};for(let g in this._tiles){let x=this._tiles[g];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+d),f[x.tileID.key]=x}this._tiles=f;for(let g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(let g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(a,d){if(this.transform=a,this.terrain=d,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new n.Q(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(f=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(f=f.filter(B=>this._source.hasTile(B)))):f=[];let g=a.coveringZoomLevel(this._source),x=Math.max(g-ft.maxOverzooming,this._source.minzoom),E=Math.max(g+ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let B={};for(let U of f)if(U.canonical.z>this._source.minzoom){let Z=U.scaledTo(U.canonical.z-1);B[Z.key]=Z;let se=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));B[se.key]=se}f=f.concat(Object.values(B))}let M=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new n.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let I=this._updateRetainedTiles(f,g);if(De(this._source.type)){let B={},U={},Z=Object.keys(I),se=b.now();for(let oe of Z){let le=I[oe],te=this._tiles[oe];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=se)continue;let ve=this.findLoadedParent(le,x);ve&&(this._addTile(ve.tileID),B[ve.tileID.key]=ve.tileID),U[oe]=le}this._retainLoadedChildren(U,g,E,I);for(let oe in B)I[oe]||(this._coveredTiles[oe]=!0,I[oe]=B[oe]);if(d){let oe={},le={};for(let te of f)this._tiles[te.key].hasData()?oe[te.key]=te:le[te.key]=te;for(let te in le){let ve=le[te].children(this._source.maxzoom);this._tiles[ve[0].key]&&this._tiles[ve[1].key]&&this._tiles[ve[2].key]&&this._tiles[ve[3].key]&&(oe[ve[0].key]=I[ve[0].key]=ve[0],oe[ve[1].key]=I[ve[1].key]=ve[1],oe[ve[2].key]=I[ve[2].key]=ve[2],oe[ve[3].key]=I[ve[3].key]=ve[3],delete le[te])}for(let te in le){let ve=this.findLoadedParent(le[te],this._source.minzoom);if(ve){oe[ve.tileID.key]=I[ve.tileID.key]=ve.tileID;for(let Oe in oe)oe[Oe].isChildOf(ve.tileID)&&delete oe[Oe]}}for(let te in this._tiles)oe[te]||(this._coveredTiles[te]=!0)}}for(let B in I)this._tiles[B].clearFadeHold();let z=n.ab(this._tiles,I);for(let B of z){let U=this._tiles[B];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(let a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){let f={},g={},x=Math.max(d-ft.maxOverzooming,this._source.minzoom),E=Math.max(d+ft.maxUnderzooming,this._source.minzoom),M={};for(let I of a){let z=this._addTile(I);f[I.key]=I,z.hasData()||d<this._source.maxzoom&&(M[I.key]=I)}this._retainLoadedChildren(M,d,E,f);for(let I of a){let z=this._tiles[I.key];if(z.hasData())continue;if(d+1>this._source.maxzoom){let U=I.children(this._source.maxzoom)[0],Z=this.getTile(U);if(Z&&Z.hasData()){f[U.key]=U;continue}}else{let U=I.children(this._source.maxzoom);if(f[U[0].key]&&f[U[1].key]&&f[U[2].key]&&f[U[3].key])continue}let B=z.wasRequested();for(let U=I.overscaledZ-1;U>=x;--U){let Z=I.scaledTo(U);if(g[Z.key])break;if(g[Z.key]=!0,z=this.getTile(Z),!z&&B&&(z=this._addTile(Z)),z){let se=z.hasData();if((B||se)&&(f[Z.key]=Z),B=z.wasRequested(),se)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let a in this._tiles){let d=[],f,g=this._tiles[a].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}d.push(g.key);let x=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(x),f)break;g=x}for(let x of d)this._loadedParentTiles[x]=f}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));let f=d;return d||(d=new Fr(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,f||this._source.fire(new n.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);let f=d.getExpiryTimeout();f&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},f))}_removeTile(a){let d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,f){let g=[],x=this.transform;if(!x)return g;let E=f?x.getCameraQueryGeometry(a):a,M=a.map(oe=>x.pointCoordinate(oe,this.terrain)),I=E.map(oe=>x.pointCoordinate(oe,this.terrain)),z=this.getIds(),B=1/0,U=1/0,Z=-1/0,se=-1/0;for(let oe of I)B=Math.min(B,oe.x),U=Math.min(U,oe.y),Z=Math.max(Z,oe.x),se=Math.max(se,oe.y);for(let oe=0;oe<z.length;oe++){let le=this._tiles[z[oe]];if(le.holdingForFade())continue;let te=le.tileID,ve=Math.pow(2,x.zoom-le.tileID.overscaledZ),Oe=d*le.queryPadding*n.W/le.tileSize/ve,he=[te.getTilePoint(new n.Y(B,U)),te.getTilePoint(new n.Y(Z,se))];if(he[0].x-Oe<n.W&&he[0].y-Oe<n.W&&he[1].x+Oe>=0&&he[1].y+Oe>=0){let Te=M.map(Ve=>te.getTilePoint(Ve)),Re=I.map(Ve=>te.getTilePoint(Ve));g.push({tile:le,tileID:te,queryGeometry:Te,cameraQueryGeometry:Re,scale:ve})}}return g}getVisibleCoordinates(a){let d=this.getRenderableIds(a).map(f=>this._tiles[f].tileID);for(let f of d)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(De(this._source.type)){let a=b.now();for(let d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,f){this._state.updateState(a=a||"_geojsonTileLayer",d,f)}removeFeatureState(a,d,f){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,f)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,f){let g=this._tiles[a];g&&g.setDependencies(d,f)}reloadTilesForDependencies(a,d){for(let f in this._tiles)this._tiles[f].hasDependency(a,d)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(a,d))}}function Mt(v,a){let d=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*a.wrap)-+(a.wrap<0);return v.overscaledZ-a.overscaledZ||f-d||a.canonical.y-v.canonical.y||a.canonical.x-v.canonical.x}function De(v){return v==="raster"||v==="image"||v==="video"}ft.maxOverzooming=10,ft.maxUnderzooming=3;class At{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=n.ac(a,0,1);let d=1,f=this._distances[d],g=a*this.paddedLength+this.padding;for(;f<g&&d<this._distances.length;)f=this._distances[++d];let x=d-1,E=this._distances[x],M=f-E,I=M>0?(g-E)/M:0;return this.points[x].mult(1-I).add(this.points[d].mult(I))}}function Jt(v,a){let d=!0;return v==="always"||v!=="never"&&a!=="never"||(d=!1),d}class Dt{constructor(a,d,f){let g=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(a/f),this.yCellCount=Math.ceil(d/f);for(let E=0;E<this.xCellCount*this.yCellCount;E++)g.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,f,g,x){this._forEachCell(d,f,g,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}insertCircle(a,d,f,g){this._forEachCell(d-g,f-g,d+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(f),this.circles.push(g)}_insertBoxCell(a,d,f,g,x,E){this.boxCells[x].push(E)}_insertCircleCell(a,d,f,g,x,E){this.circleCells[x].push(E)}_query(a,d,f,g,x,E,M){if(f<0||a>this.width||g<0||d>this.height)return[];let I=[];if(a<=0&&d<=0&&this.width<=f&&this.height<=g){if(x)return[{key:null,x1:a,y1:d,x2:f,y2:g}];for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){let B=this.circles[3*z],U=this.circles[3*z+1],Z=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:B-Z,y1:U-Z,x2:B+Z,y2:U+Z})}}else this._forEachCell(a,d,f,g,this._queryCell,I,{hitTest:x,overlapMode:E,seenUids:{box:{},circle:{}}},M);return I}query(a,d,f,g){return this._query(a,d,f,g,!1,null)}hitTest(a,d,f,g,x,E){return this._query(a,d,f,g,!0,x,E).length>0}hitTestCircle(a,d,f,g,x){let E=a-f,M=a+f,I=d-f,z=d+f;if(M<0||E>this.width||z<0||I>this.height)return!1;let B=[];return this._forEachCell(E,I,M,z,this._queryCellCircle,B,{hitTest:!0,overlapMode:g,circle:{x:a,y:d,radius:f},seenUids:{box:{},circle:{}}},x),B.length>0}_queryCell(a,d,f,g,x,E,M,I){let{seenUids:z,hitTest:B,overlapMode:U}=M,Z=this.boxCells[x];if(Z!==null){let oe=this.bboxes;for(let le of Z)if(!z.box[le]){z.box[le]=!0;let te=4*le,ve=this.boxKeys[le];if(a<=oe[te+2]&&d<=oe[te+3]&&f>=oe[te+0]&&g>=oe[te+1]&&(!I||I(ve))&&(!B||!Jt(U,ve.overlapMode))&&(E.push({key:ve,x1:oe[te],y1:oe[te+1],x2:oe[te+2],y2:oe[te+3]}),B))return!0}}let se=this.circleCells[x];if(se!==null){let oe=this.circles;for(let le of se)if(!z.circle[le]){z.circle[le]=!0;let te=3*le,ve=this.circleKeys[le];if(this._circleAndRectCollide(oe[te],oe[te+1],oe[te+2],a,d,f,g)&&(!I||I(ve))&&(!B||!Jt(U,ve.overlapMode))){let Oe=oe[te],he=oe[te+1],Te=oe[te+2];if(E.push({key:ve,x1:Oe-Te,y1:he-Te,x2:Oe+Te,y2:he+Te}),B)return!0}}}return!1}_queryCellCircle(a,d,f,g,x,E,M,I){let{circle:z,seenUids:B,overlapMode:U}=M,Z=this.boxCells[x];if(Z!==null){let oe=this.bboxes;for(let le of Z)if(!B.box[le]){B.box[le]=!0;let te=4*le,ve=this.boxKeys[le];if(this._circleAndRectCollide(z.x,z.y,z.radius,oe[te+0],oe[te+1],oe[te+2],oe[te+3])&&(!I||I(ve))&&!Jt(U,ve.overlapMode))return E.push(!0),!0}}let se=this.circleCells[x];if(se!==null){let oe=this.circles;for(let le of se)if(!B.circle[le]){B.circle[le]=!0;let te=3*le,ve=this.circleKeys[le];if(this._circlesCollide(oe[te],oe[te+1],oe[te+2],z.x,z.y,z.radius)&&(!I||I(ve))&&!Jt(U,ve.overlapMode))return E.push(!0),!0}}}_forEachCell(a,d,f,g,x,E,M,I){let z=this._convertToXCellCoord(a),B=this._convertToYCellCoord(d),U=this._convertToXCellCoord(f),Z=this._convertToYCellCoord(g);for(let se=z;se<=U;se++)for(let oe=B;oe<=Z;oe++)if(x.call(this,a,d,f,g,this.xCellCount*oe+se,E,M,I))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,f,g,x,E){let M=g-a,I=x-d,z=f+E;return z*z>M*M+I*I}_circleAndRectCollide(a,d,f,g,x,E,M){let I=(E-g)/2,z=Math.abs(a-(g+I));if(z>I+f)return!1;let B=(M-x)/2,U=Math.abs(d-(x+B));if(U>B+f)return!1;if(z<=I||U<=B)return!0;let Z=z-I,se=U-B;return Z*Z+se*se<=f*f}}function wi(v,a,d,f,g){let x=n.F();return a?(n.J(x,x,[1/g,1/g,1]),d||n.ad(x,x,f.angle)):n.K(x,f.labelPlaneMatrix,v),x}function zi(v,a,d,f,g){if(a){let x=n.ae(v);return n.J(x,x,[g,g,1]),d||n.ad(x,x,-f.angle),x}return f.glCoordMatrix}function re(v,a,d){let f;d?(f=[v.x,v.y,d(v.x,v.y),1],n.af(f,f,a)):(f=[v.x,v.y,0,1],ai(f,f,a));let g=f[3];return{point:new n.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function V(v,a){return .5+v/a*.5}function H(v,a){let d=v[0]/v[3],f=v[1]/v[3];return d>=-a[0]&&d<=a[0]&&f>=-a[1]&&f<=a[1]}function q(v,a,d,f,g,x,E,M,I,z){let B=f?v.textSizeData:v.iconSizeData,U=n.ag(B,d.transform.zoom),Z=[256/d.width*2+1,256/d.height*2+1],se=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;se.clear();let oe=v.lineVertexArray,le=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,te=d.transform.width/d.transform.height,ve=!1;for(let Oe=0;Oe<le.length;Oe++){let he=le.get(Oe);if(he.hidden||he.writingMode===n.ah.vertical&&!ve){Gt(he.numGlyphs,se);continue}let Te;if(ve=!1,z?(Te=[he.anchorX,he.anchorY,z(he.anchorX,he.anchorY),1],n.af(Te,Te,a)):(Te=[he.anchorX,he.anchorY,0,1],ai(Te,Te,a)),!H(Te,Z)){Gt(he.numGlyphs,se);continue}let Re=V(d.transform.cameraToCenterDistance,Te[3]),Ve=n.ai(B,U,he),Qe=E?Ve/Re:Ve*Re,at=new n.P(he.anchorX,he.anchorY),it=re(at,g,z).point,ot={projections:{},offsets:{}},Nt=_e(he,Qe,!1,M,a,g,x,v.glyphOffsetArray,oe,se,it,at,ot,te,I,z);ve=Nt.useVertical,(Nt.notEnoughRoom||ve||Nt.needsFlipping&&_e(he,Qe,!0,M,a,g,x,v.glyphOffsetArray,oe,se,it,at,ot,te,I,z).notEnoughRoom)&&Gt(he.numGlyphs,se)}f?v.text.dynamicLayoutVertexBuffer.updateData(se):v.icon.dynamicLayoutVertexBuffer.updateData(se)}function ne(v,a,d,f,g,x,E,M,I,z,B,U,Z){let se=M.glyphStartIndex+M.numGlyphs,oe=M.lineStartIndex,le=M.lineStartIndex+M.lineLength,te=a.getoffsetX(M.glyphStartIndex),ve=a.getoffsetX(se-1),Oe=$e(v*te,d,f,g,x,E,M.segment,oe,le,I,z,B,U,Z);if(!Oe)return null;let he=$e(v*ve,d,f,g,x,E,M.segment,oe,le,I,z,B,U,Z);return he?{first:Oe,last:he}:null}function be(v,a,d,f){return v===n.ah.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*f?{useVertical:!0}:(v===n.ah.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function _e(v,a,d,f,g,x,E,M,I,z,B,U,Z,se,oe,le){let te=a/24,ve=v.lineOffsetX*te,Oe=v.lineOffsetY*te,he;if(v.numGlyphs>1){let Te=v.glyphStartIndex+v.numGlyphs,Re=v.lineStartIndex,Ve=v.lineStartIndex+v.lineLength,Qe=ne(te,M,ve,Oe,d,B,U,v,I,x,Z,oe,le);if(!Qe)return{notEnoughRoom:!0};let at=re(Qe.first.point,E,le).point,it=re(Qe.last.point,E,le).point;if(f&&!d){let ot=be(v.writingMode,at,it,se);if(ot)return ot}he=[Qe.first];for(let ot=v.glyphStartIndex+1;ot<Te-1;ot++)he.push($e(te*M.getoffsetX(ot),ve,Oe,d,B,U,v.segment,Re,Ve,I,x,Z,oe,le));he.push(Qe.last)}else{if(f&&!d){let Re=re(U,g,le).point,Ve=v.lineStartIndex+v.segment+1,Qe=new n.P(I.getx(Ve),I.gety(Ve)),at=re(Qe,g,le),it=at.signedDistanceFromCamera>0?at.point:Se(U,Qe,Re,1,g,le),ot=be(v.writingMode,Re,it,se);if(ot)return ot}let Te=$e(te*M.getoffsetX(v.glyphStartIndex),ve,Oe,d,B,U,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,I,x,Z,oe,le);if(!Te)return{notEnoughRoom:!0};he=[Te]}for(let Te of he)n.aj(z,Te.point,Te.angle);return{}}function Se(v,a,d,f,g,x){let E=re(v.add(v.sub(a)._unit()),g,x).point,M=d.sub(E);return d.add(M._mult(f/M.mag()))}function me(v,a){let{projectionCache:d,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:x,distanceFromAnchor:E,getElevation:M,previousVertex:I,direction:z,absOffsetX:B}=a;if(d.projections[v])return d.projections[v];let U=new n.P(f.getx(v),f.gety(v)),Z=re(U,g,M);if(Z.signedDistanceFromCamera>0)return d.projections[v]=Z.point,Z.point;let se=v-z;return Se(E===0?x:new n.P(f.getx(se),f.gety(se)),U,I,B-E+1,g,M)}function ke(v,a,d){return v._unit()._perp()._mult(a*d)}function We(v,a,d,f,g,x,E,M){let{projectionCache:I,direction:z}=M;if(I.offsets[v])return I.offsets[v];let B=d.add(a);if(v+z<f||v+z>=g)return I.offsets[v]=B,B;let U=me(v+z,M),Z=ke(U.sub(d),E,z),se=d.add(Z),oe=U.add(Z);return I.offsets[v]=n.ak(x,B,se,oe)||B,I.offsets[v]}function $e(v,a,d,f,g,x,E,M,I,z,B,U,Z,se){let oe=f?v-a:v+a,le=oe>0?1:-1,te=0;f&&(le*=-1,te=Math.PI),le<0&&(te+=Math.PI);let ve,Oe,he=le>0?M+E:M+E+1,Te=g,Re=g,Ve=0,Qe=0,at=Math.abs(oe),it=[],ot;for(;Ve+Qe<=at;){if(he+=le,he<M||he>=I)return null;Ve+=Qe,Re=Te,Oe=ve;let St={projectionCache:U,lineVertexArray:z,labelPlaneMatrix:B,tileAnchorPoint:x,distanceFromAnchor:Ve,getElevation:se,previousVertex:Re,direction:le,absOffsetX:at};if(Te=me(he,St),d===0)it.push(Re),ot=Te.sub(Re);else{let ui,Ai=Te.sub(Re);ui=Ai.mag()===0?ke(me(he+le,St).sub(Te),d,le):ke(Ai,d,le),Oe||(Oe=Re.add(ui)),ve=We(he,ui,Te,M,I,Oe,d,St),it.push(Oe),ot=ve.sub(Oe)}Qe=ot.mag()}let Nt=ot._mult((at-Ve)/Qe)._add(Oe||Re),Mi=te+Math.atan2(Te.y-Re.y,Te.x-Re.x);return it.push(Nt),{point:Nt,angle:Z?Mi:0,path:it}}let Je=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gt(v,a){for(let d=0;d<v;d++){let f=a.length;a.resize(f+4),a.float32.set(Je,3*f)}}function ai(v,a,d){let f=a[0],g=a[1];return v[0]=d[0]*f+d[4]*g+d[12],v[1]=d[1]*f+d[5]*g+d[13],v[3]=d[3]*f+d[7]*g+d[15],v}let ri=100;class Ni{constructor(a,d=new Dt(a.width+200,a.height+200,25),f=new Dt(a.width+200,a.height+200,25)){this.transform=a,this.grid=d,this.ignoredGrid=f,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+ri,this.screenBottomBoundary=a.height+ri,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,f,g,x,E){let M=this.projectAndGetPerspectiveRatio(g,a.anchorPointX,a.anchorPointY,E),I=f*M.perspectiveRatio,z=a.x1*I+M.point.x,B=a.y1*I+M.point.y,U=a.x2*I+M.point.x,Z=a.y2*I+M.point.y;return!this.isInsideGrid(z,B,U,Z)||d!=="always"&&this.grid.hitTest(z,B,U,Z,d,x)||M.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,B,U,Z],offscreen:this.isOffscreen(z,B,U,Z)}}placeCollisionCircles(a,d,f,g,x,E,M,I,z,B,U,Z,se,oe){let le=[],te=new n.P(d.anchorX,d.anchorY),ve=re(te,E,oe),Oe=V(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),he=(B?x/Oe:x*Oe)/n.ao,Te=re(te,M,oe).point,Re=ne(he,g,d.lineOffsetX*he,d.lineOffsetY*he,!1,Te,te,d,f,M,{projections:{},offsets:{}},!1,oe),Ve=!1,Qe=!1,at=!0;if(Re){let it=.5*Z*Oe+se,ot=new n.P(-100,-100),Nt=new n.P(this.screenRightBoundary,this.screenBottomBoundary),Mi=new At,St=Re.first,ui=Re.last,Ai=[];for(let Ii=St.path.length-1;Ii>=1;Ii--)Ai.push(St.path[Ii]);for(let Ii=1;Ii<ui.path.length;Ii++)Ai.push(ui.path[Ii]);let $i=2.5*it;if(I){let Ii=Ai.map(Pi=>re(Pi,I,oe));Ai=Ii.some(Pi=>Pi.signedDistanceFromCamera<=0)?[]:Ii.map(Pi=>Pi.point)}let mi=[];if(Ai.length>0){let Ii=Ai[0].clone(),Pi=Ai[0].clone();for(let Ur=1;Ur<Ai.length;Ur++)Ii.x=Math.min(Ii.x,Ai[Ur].x),Ii.y=Math.min(Ii.y,Ai[Ur].y),Pi.x=Math.max(Pi.x,Ai[Ur].x),Pi.y=Math.max(Pi.y,Ai[Ur].y);mi=Ii.x>=ot.x&&Pi.x<=Nt.x&&Ii.y>=ot.y&&Pi.y<=Nt.y?[Ai]:Pi.x<ot.x||Ii.x>Nt.x||Pi.y<ot.y||Ii.y>Nt.y?[]:n.al([Ai],ot.x,ot.y,Nt.x,Nt.y)}for(let Ii of mi){Mi.reset(Ii,.25*it);let Pi=0;Pi=Mi.length<=.5*it?1:Math.ceil(Mi.paddedLength/$i)+1;for(let Ur=0;Ur<Pi;Ur++){let wr=Ur/Math.max(Pi-1,1),Ao=Mi.lerp(wr),pn=Ao.x+ri,Tr=Ao.y+ri;le.push(pn,Tr,it,0);let Yn=pn-it,gs=Tr-it,Is=pn+it,Va=Tr+it;if(at=at&&this.isOffscreen(Yn,gs,Is,Va),Qe=Qe||this.isInsideGrid(Yn,gs,Is,Va),a!=="always"&&this.grid.hitTestCircle(pn,Tr,it,a,U)&&(Ve=!0,!z))return{circles:[],offscreen:!1,collisionDetected:Ve}}}}return{circles:!z&&Ve||!Qe||Oe<this.perspectiveRatioCutoff?[]:le,offscreen:at,collisionDetected:Ve}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let d=[],f=1/0,g=1/0,x=-1/0,E=-1/0;for(let B of a){let U=new n.P(B.x+ri,B.y+ri);f=Math.min(f,U.x),g=Math.min(g,U.y),x=Math.max(x,U.x),E=Math.max(E,U.y),d.push(U)}let M=this.grid.query(f,g,x,E).concat(this.ignoredGrid.query(f,g,x,E)),I={},z={};for(let B of M){let U=B.key;if(I[U.bucketInstanceId]===void 0&&(I[U.bucketInstanceId]={}),I[U.bucketInstanceId][U.featureIndex])continue;let Z=[new n.P(B.x1,B.y1),new n.P(B.x2,B.y1),new n.P(B.x2,B.y2),new n.P(B.x1,B.y2)];n.am(d,Z)&&(I[U.bucketInstanceId][U.featureIndex]=!0,z[U.bucketInstanceId]===void 0&&(z[U.bucketInstanceId]=[]),z[U.bucketInstanceId].push(U.featureIndex))}return z}insertCollisionBox(a,d,f,g,x,E){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:E,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,f,g,x,E){let M=f?this.ignoredGrid:this.grid,I={bucketInstanceId:g,featureIndex:x,collisionGroupID:E,overlapMode:d};for(let z=0;z<a.length;z+=4)M.insertCircle(I,a[z],a[z+1],a[z+2])}projectAndGetPerspectiveRatio(a,d,f,g){let x;return g?(x=[d,f,g(d,f),1],n.af(x,x,a)):(x=[d,f,0,1],ai(x,x,a)),{point:new n.P((x[0]/x[3]+1)/2*this.transform.width+ri,(-x[1]/x[3]+1)/2*this.transform.height+ri),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(a,d,f,g){return f<ri||a>=this.screenRightBoundary||g<ri||d>this.screenBottomBoundary}isInsideGrid(a,d,f,g){return f>=0&&a<this.gridRightBoundary&&g>=0&&d<this.gridBottomBoundary}getViewportMatrix(){let a=n.an([]);return n.H(a,a,[-100,-100,0]),a}}function pi(v,a,d){return a*(n.W/(v.tileSize*Math.pow(2,d-v.tileID.overscaledZ)))}class cr{constructor(a,d,f,g){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Oi{constructor(a,d,f,g,x){this.text=new cr(a?a.text:null,d,f,x),this.icon=new cr(a?a.icon:null,d,g,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yi{constructor(a,d,f){this.text=a,this.icon=d,this.skipFade=f}}class di{constructor(){this.invProjMatrix=n.F(),this.viewportMatrix=n.F(),this.circles=[]}}class br{constructor(a,d,f,g,x){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=x}}class Rr{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){let d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:f=>f.collisionGroupID===d}}return this.collisionGroups[a]}}function Pn(v,a,d,f,g){let{horizontalAlign:x,verticalAlign:E}=n.at(v);return new n.P(-(x-.5)*a+f[0]*g,-(E-.5)*d+f[1]*g)}function rn(v,a,d,f,g,x){let{x1:E,x2:M,y1:I,y2:z,anchorPointX:B,anchorPointY:U}=v,Z=new n.P(a,d);return f&&Z._rotate(g?x:-x),{x1:E+Z.x,y1:I+Z.y,x2:M+Z.x,y2:z+Z.y,anchorPointX:B,anchorPointY:U}}class dn{constructor(a,d,f,g,x){this.transform=a.clone(),this.terrain=d,this.collisionIndex=new Ni(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Rr(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,d,f,g){let x=f.getBucket(d),E=f.latestFeatureIndex;if(!x||!E||d.id!==x.layerIds[0])return;let M=f.collisionBoxArray,I=x.layers[0].layout,z=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),B=f.tileSize/n.W,U=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),Z=I.get("text-pitch-alignment")==="map",se=I.get("text-rotation-alignment")==="map",oe=pi(f,1,this.transform.zoom),le=wi(U,Z,se,this.transform,oe),te=null;if(Z){let Oe=zi(U,Z,se,this.transform,oe);te=n.K([],this.transform.labelPlaneMatrix,Oe)}this.retainedQueryData[x.bucketInstanceId]=new br(x.bucketInstanceId,E,x.sourceLayerIndex,x.index,f.tileID);let ve={bucket:x,layout:I,posMatrix:U,textLabelPlaneMatrix:le,labelToScreenMatrix:te,scale:z,textPixelRatio:B,holdingForFade:f.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:n.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(g)for(let Oe of x.sortKeyRanges){let{sortKey:he,symbolInstanceStart:Te,symbolInstanceEnd:Re}=Oe;a.push({sortKey:he,symbolInstanceStart:Te,symbolInstanceEnd:Re,parameters:ve})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(a,d,f,g,x,E,M,I,z,B,U,Z,se,oe,le,te){let ve=n.ap[a.textAnchor],Oe=[a.textOffset0,a.textOffset1],he=Pn(ve,f,g,Oe,x),Te=this.collisionIndex.placeCollisionBox(rn(d,he.x,he.y,E,M,this.transform.angle),U,I,z,B.predicate,te);if((!le||this.collisionIndex.placeCollisionBox(rn(le,he.x,he.y,E,M,this.transform.angle),U,I,z,B.predicate,te).box.length!==0)&&Te.box.length>0){let Re;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(Re=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),Z.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Z.crossTileID]={textOffset:Oe,width:f,height:g,anchor:ve,textBoxScale:x,prevAnchor:Re},this.markUsedJustification(se,ve,Z,oe),se.allowVerticalPlacement&&(this.markUsedOrientation(se,oe,Z),this.placedOrientations[Z.crossTileID]=oe),{shift:he,placedGlyphBoxes:Te}}}placeLayerBucketPart(a,d,f){let{bucket:g,layout:x,posMatrix:E,textLabelPlaneMatrix:M,labelToScreenMatrix:I,textPixelRatio:z,holdingForFade:B,collisionBoxArray:U,partiallyEvaluatedTextSize:Z,collisionGroup:se}=a.parameters,oe=x.get("text-optional"),le=x.get("icon-optional"),te=n.aq(x,"text-overlap","text-allow-overlap"),ve=te==="always",Oe=n.aq(x,"icon-overlap","icon-allow-overlap"),he=Oe==="always",Te=x.get("text-rotation-alignment")==="map",Re=x.get("text-pitch-alignment")==="map",Ve=x.get("icon-text-fit")!=="none",Qe=x.get("symbol-z-order")==="viewport-y",at=ve&&(he||!g.hasIconData()||le),it=he&&(ve||!g.hasTextData()||oe);!g.collisionArrays&&U&&g.deserializeCollisionBoxes(U);let ot=this.retainedQueryData[g.bucketInstanceId].tileID,Nt=this.terrain?(St,ui)=>this.terrain.getElevation(ot,St,ui):null,Mi=(St,ui)=>{var Ai,$i;if(d[St.crossTileID])return;if(B)return void(this.placements[St.crossTileID]=new Yi(!1,!1,!1));let mi=!1,Ii=!1,Pi=!0,Ur=null,wr={box:null,offscreen:null},Ao={box:null,offscreen:null},pn=null,Tr=null,Yn=null,gs=0,Is=0,Va=0;ui.textFeatureIndex?gs=ui.textFeatureIndex:St.useRuntimeCollisionCircles&&(gs=St.featureIndex),ui.verticalTextFeatureIndex&&(Is=ui.verticalTextFeatureIndex);let ja=ui.textBox;if(ja){let Qr=Or=>{let Fn=n.ah.horizontal;if(g.allowVerticalPlacement&&!Or&&this.prevPlacement){let Qo=this.prevPlacement.placedOrientations[St.crossTileID];Qo&&(this.placedOrientations[St.crossTileID]=Qo,Fn=Qo,this.markUsedOrientation(g,Fn,St))}return Fn},Pr=(Or,Fn)=>{if(g.allowVerticalPlacement&&St.numVerticalGlyphVertices>0&&ui.verticalTextBox){for(let Qo of g.writingModes)if(Qo===n.ah.vertical?(wr=Fn(),Ao=wr):wr=Or(),wr&&wr.box&&wr.box.length)break}else wr=Or()},Xr=St.textAnchorOffsetStartIndex,jl=St.textAnchorOffsetEndIndex;if(jl===Xr){let Or=(Fn,Qo)=>{let Vi=this.collisionIndex.placeCollisionBox(Fn,te,z,E,se.predicate,Nt);return Vi&&Vi.box&&Vi.box.length&&(this.markUsedOrientation(g,Qo,St),this.placedOrientations[St.crossTileID]=Qo),Vi};Pr(()=>Or(ja,n.ah.horizontal),()=>{let Fn=ui.verticalTextBox;return g.allowVerticalPlacement&&St.numVerticalGlyphVertices>0&&Fn?Or(Fn,n.ah.vertical):{box:null,offscreen:null}}),Qr(wr&&wr.box&&wr.box.length)}else{let Or=n.ap[($i=(Ai=this.prevPlacement)===null||Ai===void 0?void 0:Ai.variableOffsets[St.crossTileID])===null||$i===void 0?void 0:$i.anchor],Fn=(Vi,_h,Rf)=>{let Ha=Vi.x2-Vi.x1,qa=Vi.y2-Vi.y1,zu=St.textBoxScale,xh=Ve&&Oe==="never"?_h:null,$a={box:[],offscreen:!1},Uf=te==="never"?1:2,wh="never";Or&&Uf++;for(let Vf=0;Vf<Uf;Vf++){for(let kc=Xr;kc<jl;kc++){let jf=g.textAnchorOffsets.get(kc);if(Or&&jf.textAnchor!==Or)continue;let Sc=this.attemptAnchorPlacement(jf,Vi,Ha,qa,zu,Te,Re,z,E,se,wh,St,g,Rf,xh,Nt);if(Sc&&($a=Sc.placedGlyphBoxes,$a&&$a.box&&$a.box.length))return mi=!0,Ur=Sc.shift,$a}Or?Or=null:wh=te}return $a};Pr(()=>Fn(ja,ui.iconBox,n.ah.horizontal),()=>{let Vi=ui.verticalTextBox;return g.allowVerticalPlacement&&!(wr&&wr.box&&wr.box.length)&&St.numVerticalGlyphVertices>0&&Vi?Fn(Vi,ui.verticalIconBox,n.ah.vertical):{box:null,offscreen:null}}),wr&&(mi=wr.box,Pi=wr.offscreen);let Qo=Qr(wr&&wr.box);if(!mi&&this.prevPlacement){let Vi=this.prevPlacement.variableOffsets[St.crossTileID];Vi&&(this.variableOffsets[St.crossTileID]=Vi,this.markUsedJustification(g,Vi.anchor,St,Qo))}}}if(pn=wr,mi=pn&&pn.box&&pn.box.length>0,Pi=pn&&pn.offscreen,St.useRuntimeCollisionCircles){let Qr=g.text.placedSymbolArray.get(St.centerJustifiedTextSymbolIndex),Pr=n.ai(g.textSizeData,Z,Qr),Xr=x.get("text-padding");Tr=this.collisionIndex.placeCollisionCircles(te,Qr,g.lineVertexArray,g.glyphOffsetArray,Pr,E,M,I,f,Re,se.predicate,St.collisionCircleDiameter,Xr,Nt),Tr.circles.length&&Tr.collisionDetected&&!f&&n.w("Collisions detected, but collision boxes are not shown"),mi=ve||Tr.circles.length>0&&!Tr.collisionDetected,Pi=Pi&&Tr.offscreen}if(ui.iconFeatureIndex&&(Va=ui.iconFeatureIndex),ui.iconBox){let Qr=Pr=>{let Xr=Ve&&Ur?rn(Pr,Ur.x,Ur.y,Te,Re,this.transform.angle):Pr;return this.collisionIndex.placeCollisionBox(Xr,Oe,z,E,se.predicate,Nt)};Ao&&Ao.box&&Ao.box.length&&ui.verticalIconBox?(Yn=Qr(ui.verticalIconBox),Ii=Yn.box.length>0):(Yn=Qr(ui.iconBox),Ii=Yn.box.length>0),Pi=Pi&&Yn.offscreen}let Ps=oe||St.numHorizontalGlyphVertices===0&&St.numVerticalGlyphVertices===0,ys=le||St.numIconVertices===0;if(Ps||ys?ys?Ps||(Ii=Ii&&mi):mi=Ii&&mi:Ii=mi=Ii&&mi,mi&&pn&&pn.box&&this.collisionIndex.insertCollisionBox(pn.box,te,x.get("text-ignore-placement"),g.bucketInstanceId,Ao&&Ao.box&&Is?Is:gs,se.ID),Ii&&Yn&&this.collisionIndex.insertCollisionBox(Yn.box,Oe,x.get("icon-ignore-placement"),g.bucketInstanceId,Va,se.ID),Tr&&(mi&&this.collisionIndex.insertCollisionCircles(Tr.circles,te,x.get("text-ignore-placement"),g.bucketInstanceId,gs,se.ID),f)){let Qr=g.bucketInstanceId,Pr=this.collisionCircleArrays[Qr];Pr===void 0&&(Pr=this.collisionCircleArrays[Qr]=new di);for(let Xr=0;Xr<Tr.circles.length;Xr+=4)Pr.circles.push(Tr.circles[Xr+0]),Pr.circles.push(Tr.circles[Xr+1]),Pr.circles.push(Tr.circles[Xr+2]),Pr.circles.push(Tr.collisionDetected?1:0)}if(St.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[St.crossTileID]=new Yi(mi||at,Ii||it,Pi||g.justReloaded),d[St.crossTileID]=!0};if(Qe){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let St=g.getSortedSymbolIndexes(this.transform.angle);for(let ui=St.length-1;ui>=0;--ui){let Ai=St[ui];Mi(g.symbolInstances.get(Ai),g.collisionArrays[Ai])}}else for(let St=a.symbolInstanceStart;St<a.symbolInstanceEnd;St++)Mi(g.symbolInstances.get(St),g.collisionArrays[St]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){let St=this.collisionCircleArrays[g.bucketInstanceId];n.ar(St.invProjMatrix,E),St.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(a,d,f,g){let x;x=g===n.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[n.as(d)];let E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(let M of E)M>=0&&(a.text.placedSymbolArray.get(M).crossTileID=x>=0&&M!==x?0:f.crossTileID)}markUsedOrientation(a,d,f){let g=d===n.ah.horizontal||d===n.ah.horizontalOnly?d:0,x=d===n.ah.vertical?d:0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(let M of E)a.text.placedSymbolArray.get(M).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;let d=this.prevPlacement,f=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;let g=d?d.symbolFadeChange(a):1,x=d?d.opacities:{},E=d?d.variableOffsets:{},M=d?d.placedOrientations:{};for(let I in this.placements){let z=this.placements[I],B=x[I];B?(this.opacities[I]=new Oi(B,g,z.text,z.icon),f=f||z.text!==B.text.placed||z.icon!==B.icon.placed):(this.opacities[I]=new Oi(null,g,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(let I in x){let z=x[I];if(!this.opacities[I]){let B=new Oi(z,g,!1,!1);B.isHidden()||(this.opacities[I]=B,f=f||z.text.placed||z.icon.placed)}}for(let I in E)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=E[I]);for(let I in M)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=M[I]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){let f={};for(let g of d){let x=g.getBucket(a);x&&g.latestFeatureIndex&&a.id===x.layerIds[0]&&this.updateBucketOpacities(x,f,g.collisionBoxArray)}}updateBucketOpacities(a,d,f){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();let g=a.layers[0],x=g.layout,E=new Oi(null,0,!1,!1,!0),M=x.get("text-allow-overlap"),I=x.get("icon-allow-overlap"),z=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=x.get("text-rotation-alignment")==="map",U=x.get("text-pitch-alignment")==="map",Z=x.get("icon-text-fit")!=="none",se=new Oi(null,0,M&&(I||!a.hasIconData()||x.get("icon-optional")),I&&(M||!a.hasTextData()||x.get("text-optional")),!0);!a.collisionArrays&&f&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(f);let oe=(le,te,ve)=>{for(let Oe=0;Oe<te/4;Oe++)le.opacityVertexArray.emplaceBack(ve);le.hasVisibleVertices=le.hasVisibleVertices||ve!==hn};for(let le=0;le<a.symbolInstances.length;le++){let te=a.symbolInstances.get(le),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:Oe,crossTileID:he}=te,Te=this.opacities[he];d[he]?Te=E:Te||(Te=se,this.opacities[he]=Te),d[he]=!0;let Re=te.numIconVertices>0,Ve=this.placedOrientations[te.crossTileID],Qe=Ve===n.ah.vertical,at=Ve===n.ah.horizontal||Ve===n.ah.horizontalOnly;if(ve>0||Oe>0){let it=wl(Te.text);oe(a.text,ve,Qe?hn:it),oe(a.text,Oe,at?hn:it);let ot=Te.text.isHidden();[te.rightJustifiedTextSymbolIndex,te.centerJustifiedTextSymbolIndex,te.leftJustifiedTextSymbolIndex].forEach(St=>{St>=0&&(a.text.placedSymbolArray.get(St).hidden=ot||Qe?1:0)}),te.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(te.verticalPlacedTextSymbolIndex).hidden=ot||at?1:0);let Nt=this.variableOffsets[te.crossTileID];Nt&&this.markUsedJustification(a,Nt.anchor,te,Ve);let Mi=this.placedOrientations[te.crossTileID];Mi&&(this.markUsedJustification(a,"left",te,Mi),this.markUsedOrientation(a,Mi,te))}if(Re){let it=wl(Te.icon),ot=!(Z&&te.verticalPlacedIconSymbolIndex&&Qe);te.placedIconSymbolIndex>=0&&(oe(a.icon,te.numIconVertices,ot?it:hn),a.icon.placedSymbolArray.get(te.placedIconSymbolIndex).hidden=Te.icon.isHidden()),te.verticalPlacedIconSymbolIndex>=0&&(oe(a.icon,te.numVerticalIconVertices,ot?hn:it),a.icon.placedSymbolArray.get(te.verticalPlacedIconSymbolIndex).hidden=Te.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){let it=a.collisionArrays[le];if(it){let ot=new n.P(0,0);if(it.textBox||it.verticalTextBox){let Mi=!0;if(z){let St=this.variableOffsets[he];St?(ot=Pn(St.anchor,St.width,St.height,St.textOffset,St.textBoxScale),B&&ot._rotate(U?this.transform.angle:-this.transform.angle)):Mi=!1}it.textBox&&nn(a.textCollisionBox.collisionVertexArray,Te.text.placed,!Mi||Qe,ot.x,ot.y),it.verticalTextBox&&nn(a.textCollisionBox.collisionVertexArray,Te.text.placed,!Mi||at,ot.x,ot.y)}let Nt=!!(!at&&it.verticalIconBox);it.iconBox&&nn(a.iconCollisionBox.collisionVertexArray,Te.icon.placed,Nt,Z?ot.x:0,Z?ot.y:0),it.verticalIconBox&&nn(a.iconCollisionBox.collisionVertexArray,Te.icon.placed,!Nt,Z?ot.x:0,Z?ot.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){let le=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=le.invProjMatrix,a.placementViewportMatrix=le.viewportMatrix,a.collisionCircleArray=le.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){let f=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*f>a}setStale(){this.stale=!0}}function nn(v,a,d,f,g){v.emplaceBack(a?1:0,d?1:0,f||0,g||0),v.emplaceBack(a?1:0,d?1:0,f||0,g||0),v.emplaceBack(a?1:0,d?1:0,f||0,g||0),v.emplaceBack(a?1:0,d?1:0,f||0,g||0)}let xl=Math.pow(2,25),fa=Math.pow(2,24),ir=Math.pow(2,17),So=Math.pow(2,16),La=Math.pow(2,9),jn=Math.pow(2,8),Dn=Math.pow(2,1);function wl(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;let a=v.placed?1:0,d=Math.floor(127*v.opacity);return d*xl+a*fa+d*ir+a*So+d*La+a*jn+d*Dn+a}let hn=0;class Jn{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,f,g,x){let E=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(E,g,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((M,I)=>M.sortKey-I.sortKey));this._currentPartIndex<E.length;)if(d.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,x())return!0;return!1}}class kl{constructor(a,d,f,g,x,E,M,I){this.placement=new dn(a,d,E,M,I),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(a,d,f){let g=b.now(),x=()=>!this._forceFullPlacement&&b.now()-g>2;for(;this._currentPlacementIndex>=0;){let E=d[a[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=M)&&(!E.maxzoom||E.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new Jn(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}let de=512/n.W/2;class ci{constructor(a,d,f){this.tileID=a,this.bucketInstanceId=f,this._symbolsByKey={};let g=new Map;for(let x=0;x<d.length;x++){let E=d.get(x),M=E.key,I=g.get(M);I?I.push(E):g.set(M,[E])}for(let[x,E]of g){let M={positions:E.map(I=>({x:Math.floor(I.anchorX*de),y:Math.floor(I.anchorY*de)})),crossTileIDs:E.map(I=>I.crossTileID)};if(M.positions.length>128){let I=new n.au(M.positions.length,16,Uint16Array);for(let{x:z,y:B}of M.positions)I.add(z,B);I.finish(),delete M.positions,M.index=I}this._symbolsByKey[x]=M}}getScaledCoordinates(a,d){let{x:f,y:g,z:x}=this.tileID.canonical,{x:E,y:M,z:I}=d.canonical,z=de/Math.pow(2,I-x),B=(M*n.W+a.anchorY)*z,U=g*n.W*de;return{x:Math.floor((E*n.W+a.anchorX)*z-f*n.W*de),y:Math.floor(B-U)}}findMatches(a,d,f){let g=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let x=0;x<a.length;x++){let E=a.get(x);if(E.crossTileID)continue;let M=this._symbolsByKey[E.key];if(!M)continue;let I=this.getScaledCoordinates(E,d);if(M.index){let z=M.index.range(I.x-g,I.y-g,I.x+g,I.y+g).sort();for(let B of z){let U=M.crossTileIDs[B];if(!f[U]){f[U]=!0,E.crossTileID=U;break}}}else if(M.positions)for(let z=0;z<M.positions.length;z++){let B=M.positions[z],U=M.crossTileIDs[z];if(Math.abs(B.x-I.x)<=g&&Math.abs(B.y-I.y)<=g&&!f[U]){f[U]=!0,E.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class mr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class zr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){let d=Math.round((a-this.lng)/360);if(d!==0)for(let f in this.indexes){let g=this.indexes[f],x={};for(let E in g){let M=g[E];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+d),x[M.tileID.key]=M}this.indexes[f]=x}this.lng=a}addBucket(a,d,f){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let x=0;x<d.symbolInstances.length;x++)d.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});let g=this.usedCrossTileIDs[a.overscaledZ];for(let x in this.indexes){let E=this.indexes[x];if(Number(x)>a.overscaledZ)for(let M in E){let I=E[M];I.tileID.isChildOf(a)&&I.findMatches(d.symbolInstances,a,g)}else{let M=E[a.scaledTo(Number(x)).key];M&&M.findMatches(d.symbolInstances,a,g)}}for(let x=0;x<d.symbolInstances.length;x++){let E=d.symbolInstances.get(x);E.crossTileID||(E.crossTileID=f.generate(),g[E.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new ci(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(let f of d.getCrossTileIDsLists())for(let g of f)delete this.usedCrossTileIDs[a][g]}removeStaleBuckets(a){let d=!1;for(let f in this.indexes){let g=this.indexes[f];for(let x in g)a[g[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[x]),delete g[x],d=!0)}return d}}class ur{constructor(){this.layerIndexes={},this.crossTileIDs=new mr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,f){let g=this.layerIndexes[a.id];g===void 0&&(g=this.layerIndexes[a.id]=new zr);let x=!1,E={};g.handleWrapJump(f);for(let M of d){let I=M.getBucket(a);I&&a.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(M.tileID,I,this.crossTileIDs)&&(x=!0),E[I.bucketInstanceId]=!0)}return g.removeStaleBuckets(E)&&(x=!0),x}pruneUnusedLayers(a){let d={};a.forEach(f=>{d[f]=!0});for(let f in this.layerIndexes)d[f]||delete this.layerIndexes[f]}}let Ho=(v,a)=>n.t(v,a&&a.filter(d=>d.identifier!=="source.canvas")),on=n.av();class cs extends n.E{constructor(a,d={}){super(),this._rtlPluginLoaded=()=>{for(let f in this.sourceCaches){let g=this.sourceCaches[f].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[f].reload()}},this.map=a,this.dispatcher=new Xi(ti(),a._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(f,g)=>this.getGlyphs(f,g)),this.dispatcher.registerMessageHandler("getImages",(f,g)=>this.getImages(f,g)),this.imageManager=new zt,this.imageManager.setEventedParent(this),this.glyphManager=new dt(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Yt(256,512),this.crossTileSymbolIndex=new ur,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new n.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",n.ax()),Lr().on(In,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;let g=this.sourceCaches[f.sourceId];if(!g)return;let x=g.getSource();if(x&&x.vectorLayerIds)for(let E in this._layers){let M=this._layers[E];M.source===x.id&&this._validateLayer(M)}})}loadURL(a,d={},f){this.fire(new n.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;let g=this.map._requestManager.transformRequest(a,ue.Style);this._loadStyleRequest=new AbortController,n.h(g,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,d,f)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new n.j(x))})}loadJSON(a,d={},f){this.fire(new n.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(a,d,f)}).catch(()=>{})}loadEmpty(){this.fire(new n.k("dataloading",{dataType:"style"})),this._load(on,{validate:!1})}_load(a,d,f){var g;let x=d.transformStyle?d.transformStyle(f,a):a;if(!d.validate||!Ho(this,n.x(x))){this._loaded=!0,this.stylesheet=x;for(let E in x.sources)this.addSource(E,x.sources[E],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new Qt(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new n.k("data",{dataType:"style"})),this.fire(new n.k("style.load"))}}_createLayers(){let a=n.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(let d of a){let f=n.az(d);f.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=f}}_loadSprite(a,d=!1,f=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,E,M,I){return n._(this,void 0,void 0,function*(){let z=we(x),B=M>1?"@2x":"",U={},Z={};for(let{id:se,url:oe}of z){let le=E.transformRequest(E.normalizeSpriteURL(oe,B,".json"),ue.SpriteJSON);U[se]=n.h(le,I);let te=E.transformRequest(E.normalizeSpriteURL(oe,B,".png"),ue.SpriteImage);Z[se]=ee.getImage(te,I)}return yield Promise.all([...Object.values(U),...Object.values(Z)]),function(se,oe){return n._(this,void 0,void 0,function*(){let le={};for(let te in se){le[te]={};let ve=b.getImageCanvasContext((yield oe[te]).data),Oe=(yield se[te]).data;for(let he in Oe){let{width:Te,height:Re,x:Ve,y:Qe,sdf:at,pixelRatio:it,stretchX:ot,stretchY:Nt,content:Mi}=Oe[he];le[te][he]={data:null,pixelRatio:it,sdf:at,stretchX:ot,stretchY:Nt,content:Mi,spriteData:{width:Te,height:Re,x:Ve,y:Qe,context:ve}}}}return le})}(U,Z)})}(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(let E in x){this._spritesImagesIds[E]=[];let M=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(I=>!(I in x)):[];for(let I of M)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(let I in x[E]){let z=E==="default"?I:`${E}:${I}`;this._spritesImagesIds[E].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,x[E][I],!1):this.imageManager.addImage(z,x[E][I]),d&&(this._changedImages[z]=!0)}}}).catch(x=>{this._spriteRequest=null,g=x,this.fire(new n.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.k("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(let a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.k("data",{dataType:"style"}))}_validateLayer(a){let d=this.sourceCaches[a.source];if(!d)return;let f=a.sourceLayer;if(!f)return;let g=d.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new n.j(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){let d=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d);let f=[];for(let g of a)d[g]&&f.push(d[g]);return f}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};let d=Object.keys(this._layers);for(let f of d){let g=this._layers[f];g.type!=="custom"&&(a[f]=g.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(let a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(let a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;let d=this._changed;if(this._changed){let g=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(g.length||x.length)&&this._updateWorkerLayers(g,x);for(let E in this._updatedSources){let M=this._updatedSources[E];if(M==="reload")this._reloadSource(E);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let E in this._updatedPaintProps)this._layers[E].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}let f={};for(let g in this.sourceCaches){let x=this.sourceCaches[g];f[g]=x.used,x.used=!1}for(let g of this._order){let x=this._layers[g];x.recalculate(a,this._availableImages),!x.isHidden(a.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(let g in f){let x=this.sourceCaches[g];f[g]!==x.used&&x.fire(new n.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(a),this.z=a.zoom,d&&this.fire(new n.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let a=Object.keys(this._changedImages);if(a.length){for(let d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(a),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var f;this._checkLoaded();let g=this.serialize();if(a=d.transformStyle?d.transformStyle(g,a):a,((f=d.validate)===null||f===void 0||f)&&Ho(this,n.x(a)))return!1;(a=n.aA(a)).layers=n.ay(a.layers);let x=n.aB(g,a),E=this._getOperationsToPerform(x);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(let M of E.operations)M();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){let d=[],f=[];for(let g of a)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":d.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":d.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,g.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":d.push(()=>{});break;default:f.push(g.command)}return{operations:d,unimplemented:f}}addImage(a,d){if(this.getImage(a))return this.fire(new n.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new n.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,f={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(n.x.source,`sources.${a}`,d,null,f))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);let g=this.sourceCaches[a]=new ft(a,d,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:a})),g.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(let f in this._layers)if(this._layers[f].source===a)return this.fire(new n.j(new Error(`Source "${a}" cannot be removed while layer "${f}" is using it.`)));let d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new n.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);let f=this.sourceCaches[a].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,f={}){this._checkLoaded();let g=a.id;if(this.getLayer(g))return void this.fire(new n.j(new Error(`Layer "${g}" already exists on this map.`)));let x;if(a.type==="custom"){if(Ho(this,n.aC(a)))return;x=n.az(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(g,a.source),a=n.aA(a),a=n.e(a,{source:g})),this._validate(n.x.layer,`layers.${g}`,a,{arrayIndex:-1},f))return;x=n.az(a),this._validateLayer(x),x.setEventedParent(this,{layer:{id:g}})}let E=d?this._order.indexOf(d):this._order.length;if(d&&E===-1)this.fire(new n.j(new Error(`Cannot add layer "${g}" before non-existing layer "${d}".`)));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=x,this._removedLayers[g]&&x.source&&x.type!=="custom"){let M=this._removedLayers[g];delete this._removedLayers[g],M.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new n.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;let f=this._order.indexOf(a);this._order.splice(f,1);let g=d?this._order.indexOf(d):this._order.length;d&&g===-1?this.fire(new n.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(g,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();let d=this._layers[a];if(!d)return void this.fire(new n.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);let f=this._order.indexOf(a);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,f){this._checkLoaded();let g=this.getLayer(a);g?g.minzoom===d&&g.maxzoom===f||(d!=null&&(g.minzoom=d),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new n.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,f={}){this._checkLoaded();let g=this.getLayer(a);if(g){if(!n.aD(g.filter,d))return d==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(n.x.filter,`layers.${g.id}.filter`,d,null,f)||(g.filter=n.aA(d),this._updateLayer(g)))}else this.fire(new n.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return n.aA(this.getLayer(a).filter)}setLayoutProperty(a,d,f,g={}){this._checkLoaded();let x=this.getLayer(a);x?n.aD(x.getLayoutProperty(d),f)||(x.setLayoutProperty(d,f,g),this._updateLayer(x)):this.fire(new n.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){let f=this.getLayer(a);if(f)return f.getLayoutProperty(d);this.fire(new n.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,f,g={}){this._checkLoaded();let x=this.getLayer(a);x?n.aD(x.getPaintProperty(d),f)||(x.setPaintProperty(d,f,g)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new n.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();let f=a.source,g=a.sourceLayer,x=this.sourceCaches[f];if(x===void 0)return void this.fire(new n.j(new Error(`The source '${f}' does not exist in the map's style.`)));let E=x.getSource().type;E==="geojson"&&g?this.fire(new n.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(a.id===void 0&&this.fire(new n.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(g,a.id,d)):this.fire(new n.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();let f=a.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new n.j(new Error(`The source '${f}' does not exist in the map's style.`)));let x=g.getSource().type,E=x==="vector"?a.sourceLayer:void 0;x!=="vector"||E?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new n.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,a.id,d):this.fire(new n.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();let d=a.source,f=a.sourceLayer,g=this.sourceCaches[d];if(g!==void 0)return g.getSource().type!=="vector"||f?(a.id===void 0&&this.fire(new n.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,a.id)):void this.fire(new n.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new n.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return n.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let a=n.aE(this.sourceCaches,x=>x.serialize()),d=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,g=this.stylesheet;return n.aF({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:a,layers:d,terrain:f},x=>x!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){let d=E=>this._layers[E].type==="fill-extrusion",f={},g=[];for(let E=this._order.length-1;E>=0;E--){let M=this._order[E];if(d(M)){f[M]=E;for(let I of a){let z=I[M];if(z)for(let B of z)g.push(B)}}}g.sort((E,M)=>M.intersectionZ-E.intersectionZ);let x=[];for(let E=this._order.length-1;E>=0;E--){let M=this._order[E];if(d(M))for(let I=g.length-1;I>=0;I--){let z=g[I].feature;if(f[z.layer.id]<E)break;x.push(z),g.pop()}else for(let I of a){let z=I[M];if(z)for(let B of z)x.push(B.feature)}}return x}queryRenderedFeatures(a,d,f){d&&d.filter&&this._validate(n.x.filter,"queryRenderedFeatures.filter",d.filter,null,d);let g={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new n.j(new Error("parameters.layers must be an Array."))),[];for(let M of d.layers){let I=this._layers[M];if(!I)return this.fire(new n.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];g[I.source]=!0}}let x=[];d.availableImages=this._availableImages;let E=this._serializedAllLayers();for(let M in this.sourceCaches)d.layers&&!g[M]||x.push(yi(this.sourceCaches[M],this._layers,E,a,d,f));return this.placement&&x.push(function(M,I,z,B,U,Z,se){let oe={},le=Z.queryRenderedSymbols(B),te=[];for(let ve of Object.keys(le).map(Number))te.push(se[ve]);te.sort(Rt);for(let ve of te){let Oe=ve.featureIndex.lookupSymbolFeatures(le[ve.bucketInstanceId],I,ve.bucketIndex,ve.sourceLayerIndex,U.filter,U.layers,U.availableImages,M);for(let he in Oe){let Te=oe[he]=oe[he]||[],Re=Oe[he];Re.sort((Ve,Qe)=>{let at=ve.featureSortOrder;if(at){let it=at.indexOf(Ve.featureIndex);return at.indexOf(Qe.featureIndex)-it}return Qe.featureIndex-Ve.featureIndex});for(let Ve of Re)Te.push(Ve)}}for(let ve in oe)oe[ve].forEach(Oe=>{let he=Oe.feature,Te=z[M[ve].source].getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=Te});return oe}(this._layers,E,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(a,d){d&&d.filter&&this._validate(n.x.filter,"querySourceFeatures.filter",d.filter,null,d);let f=this.sourceCaches[a];return f?function(g,x){let E=g.getRenderableIds().map(z=>g.getTileByID(z)),M=[],I={};for(let z=0;z<E.length;z++){let B=E[z],U=B.tileID.canonical.key;I[U]||(I[U]=!0,B.querySourceFeatures(M,x))}return M}(f,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();let f=this.light.getLight(),g=!1;for(let E in a)if(!n.aD(a[E],f[E])){g=!0;break}if(!g)return;let x={now:b.now(),transition:n.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(x)}_validate(a,d,f,g,x={}){return(!x||x.validate!==!1)&&Ho(this,a.call(n.x,n.e({key:d,style:this.serialize(),value:f,styleSpec:n.v},g)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Lr().off(In,this._rtlPluginLoaded);for(let d in this._layers)this._layers[d].setEventedParent(null);for(let d in this.sourceCaches){let f=this.sourceCaches[d];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("removeMap",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(let d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(let a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,f,g,x=!1){let E=!1,M=!1,I={};for(let z of this._order){let B=this._layers[z];if(B.type!=="symbol")continue;if(!I[B.source]){let Z=this.sourceCaches[B.source];I[B.source]=Z.getRenderableIds(!0).map(se=>Z.getTileByID(se)).sort((se,oe)=>oe.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(oe.tileID)?-1:1))}let U=this.crossTileSymbolIndex.addLayer(B,I[B.source],a.center.lng);E=E||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),a.zoom))&&(this.pauseablePlacement=new kl(a,this.map.terrain,this._order,x,d,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),M=!0),E&&this.pauseablePlacement.placement.setStale()),M||E)for(let z of this._order){let B=this._layers[z];B.type==="symbol"&&this.placement.updateLayerOpacities(B,I[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(let a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return n._(this,void 0,void 0,function*(){let f=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();let g=this.sourceCaches[d.source];return g&&g.setDependencies(d.tileID.key,d.type,d.icons),f})}getGlyphs(a,d){return n._(this,void 0,void 0,function*(){let f=yield this.glyphManager.getGlyphs(d.stacks),g=this.sourceCaches[d.source];return g&&g.setDependencies(d.tileID.key,d.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(n.x.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,f={},g){this._checkLoaded();let x=[{id:a,url:d}],E=[...we(this.stylesheet.sprite),...x];this._validate(n.x.sprite,"sprite",E,null,f)||(this.stylesheet.sprite=E,this._loadSprite(x,!0,g))}removeSprite(a){this._checkLoaded();let d=we(this.stylesheet.sprite);if(d.find(f=>f.id===a)){if(this._spritesImagesIds[a])for(let f of this._spritesImagesIds[a])this.imageManager.removeImage(f),this._changedImages[f]=!0;d.splice(d.findIndex(f=>f.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new n.k("data",{dataType:"style"}))}else this.fire(new n.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return we(this.stylesheet.sprite)}setSprite(a,d={},f){this._checkLoaded(),a&&this._validate(n.x.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,f):(this._unloadSprite(),f&&f(null)))}}var Hn=n.X([{name:"a_pos",type:"Int16",components:2}]),Es="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";let ce={prelude:R(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:R(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:R(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:R(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:R("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:R(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:R(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:R("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:R("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:R("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:R(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:R(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:R(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:R(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:R(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:R(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:R(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:R(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:R(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:R(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:R(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:R(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:R(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:R(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:R(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:R(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:R("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Es),terrainDepth:R("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Es),terrainCoords:R("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Es)};function R(v,a){let d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=a.match(/attribute ([\w]+) ([\w]+)/g),g=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=x?x.concat(g):g,M={};return{fragmentSource:v=v.replace(d,(I,z,B,U,Z)=>(M[Z]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
varying ${B} ${U} ${Z};
#else
uniform ${B} ${U} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${B} ${U} ${Z} = u_${Z};
#endif
`)),vertexSource:a=a.replace(d,(I,z,B,U,Z)=>{let se=U==="float"?"vec2":"vec4",oe=Z.match(/color/)?"color":se;return M[Z]?z==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${B} ${se} a_${Z};
varying ${B} ${U} ${Z};
#else
uniform ${B} ${U} u_${Z};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${oe}(a_${Z}, u_${Z}_t);
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${B} ${se} a_${Z};
#else
uniform ${B} ${U} u_${Z};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${B} ${U} ${Z} = a_${Z};
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${B} ${U} ${Z} = unpack_mix_${oe}(a_${Z}, u_${Z}_t);
#else
    ${B} ${U} ${Z} = u_${Z};
#endif
`}),staticAttributes:f,staticUniforms:E}}class X{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,f,g,x,E,M,I,z){this.context=a;let B=this.boundPaintVertexBuffers.length!==g.length;for(let U=0;!B&&U<g.length;U++)this.boundPaintVertexBuffers[U]!==g[U]&&(B=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==f||B||this.boundIndexBuffer!==x||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==z?this.freshBind(d,f,g,x,E,M,I,z):(a.bindVertexArray.set(this.vao),M&&M.bind(),x&&x.dynamicDraw&&x.bind(),I&&I.bind(),z&&z.bind())}freshBind(a,d,f,g,x,E,M,I){let z=a.numAttributes,B=this.context,U=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=I,d.enableAttributes(U,a);for(let Z of f)Z.enableAttributes(U,a);E&&E.enableAttributes(U,a),M&&M.enableAttributes(U,a),I&&I.enableAttributes(U,a),d.bind(),d.setVertexAttribPointers(U,a,x);for(let Z of f)Z.bind(),Z.setVertexAttribPointers(U,a,x);E&&(E.bind(),E.setVertexAttribPointers(U,a,x)),g&&g.bind(),M&&(M.bind(),M.setVertexAttribPointers(U,a,x)),I&&(I.bind(),I.setVertexAttribPointers(U,a,x)),B.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Q(v){let a=[];for(let d=0;d<v.length;d++){if(v[d]===null)continue;let f=v[d].split(" ");a.push(f.pop())}return a}class Me{constructor(a,d,f,g,x,E){let M=a.gl;this.program=M.createProgram();let I=Q(d.staticAttributes),z=f?f.getBinderAttributes():[],B=I.concat(z),U=ce.prelude.staticUniforms?Q(ce.prelude.staticUniforms):[],Z=d.staticUniforms?Q(d.staticUniforms):[],se=f?f.getBinderUniforms():[],oe=U.concat(Z).concat(se),le=[];for(let Ve of oe)le.indexOf(Ve)<0&&le.push(Ve);let te=f?f.defines():[];x&&te.push("#define OVERDRAW_INSPECTOR;"),E&&te.push("#define TERRAIN3D;");let ve=te.concat(ce.prelude.fragmentSource,d.fragmentSource).join(`
`),Oe=te.concat(ce.prelude.vertexSource,d.vertexSource).join(`
`),he=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(he,ve),M.compileShader(he),!M.getShaderParameter(he,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(he)}`);M.attachShader(this.program,he);let Te=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Te,Oe),M.compileShader(Te),!M.getShaderParameter(Te,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(Te)}`);M.attachShader(this.program,Te),this.attributes={};let Re={};this.numAttributes=B.length;for(let Ve=0;Ve<this.numAttributes;Ve++)B[Ve]&&(M.bindAttribLocation(this.program,Ve,B[Ve]),this.attributes[B[Ve]]=Ve);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(Te),M.deleteShader(he);for(let Ve=0;Ve<le.length;Ve++){let Qe=le[Ve];if(Qe&&!Re[Qe]){let at=M.getUniformLocation(this.program,Qe);at&&(Re[Qe]=at)}}this.fixedUniforms=g(a,Re),this.terrainUniforms=((Ve,Qe)=>({u_depth:new n.aG(Ve,Qe.u_depth),u_terrain:new n.aG(Ve,Qe.u_terrain),u_terrain_dim:new n.aH(Ve,Qe.u_terrain_dim),u_terrain_matrix:new n.aI(Ve,Qe.u_terrain_matrix),u_terrain_unpack:new n.aJ(Ve,Qe.u_terrain_unpack),u_terrain_exaggeration:new n.aH(Ve,Qe.u_terrain_exaggeration)}))(a,Re),this.binderUniforms=f?f.getUniforms(a,Re):[]}draw(a,d,f,g,x,E,M,I,z,B,U,Z,se,oe,le,te,ve,Oe){let he=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(f),a.setStencilMode(g),a.setColorMode(x),a.setCullFace(E),I){a.activeTexture.set(he.TEXTURE2),he.bindTexture(he.TEXTURE_2D,I.depthTexture),a.activeTexture.set(he.TEXTURE3),he.bindTexture(he.TEXTURE_2D,I.texture);for(let Re in this.terrainUniforms)this.terrainUniforms[Re].set(I[Re])}for(let Re in this.fixedUniforms)this.fixedUniforms[Re].set(M[Re]);le&&le.setUniforms(a,this.binderUniforms,se,{zoom:oe});let Te=0;switch(d){case he.LINES:Te=2;break;case he.TRIANGLES:Te=3;break;case he.LINE_STRIP:Te=1}for(let Re of Z.get()){let Ve=Re.vaos||(Re.vaos={});(Ve[z]||(Ve[z]=new X)).bind(a,this,B,le?le.getPaintVertexBuffers():[],U,Re.vertexOffset,te,ve,Oe),he.drawElements(d,Re.primitiveLength*Te,he.UNSIGNED_SHORT,Re.primitiveOffset*Te*2)}}}function ge(v,a,d){let f=1/pi(d,1,a.transform.tileZoom),g=Math.pow(2,d.tileID.overscaledZ),x=d.tileSize*Math.pow(2,a.transform.tileZoom)/g,E=x*(d.tileID.canonical.x+d.tileID.wrap*g),M=x*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[E>>16,M>>16],u_pixel_coord_lower:[65535&E,65535&M]}}let Ae=(v,a,d,f)=>{let g=a.style.light,x=g.properties.get("position"),E=[x.x,x.y,x.z],M=function(){var z=new n.A(9);return n.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();g.properties.get("anchor")==="viewport"&&function(z,B){var U=Math.sin(B),Z=Math.cos(B);z[0]=Z,z[1]=U,z[2]=0,z[3]=-U,z[4]=Z,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(M,-a.transform.angle),function(z,B,U){var Z=B[0],se=B[1],oe=B[2];z[0]=Z*U[0]+se*U[3]+oe*U[6],z[1]=Z*U[1]+se*U[4]+oe*U[7],z[2]=Z*U[2]+se*U[5]+oe*U[8]}(E,E,M);let I=g.properties.get("color");return{u_matrix:v,u_lightpos:E,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+d,u_opacity:f}},Ze=(v,a,d,f,g,x,E)=>n.e(Ae(v,a,d,f),ge(x,a,E),{u_height_factor:-Math.pow(2,g.overscaledZ)/E.tileSize/8}),xt=v=>({u_matrix:v}),ht=(v,a,d,f)=>n.e(xt(v),ge(d,a,f)),Xe=(v,a)=>({u_matrix:v,u_world:a}),Ye=(v,a,d,f,g)=>n.e(ht(v,a,d,f),{u_world:g}),_t=(v,a,d,f)=>{let g=v.transform,x,E;if(f.paint.get("circle-pitch-alignment")==="map"){let M=pi(d,1,g.zoom);x=!0,E=[M,M]}else x=!1,E=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(a.posMatrix,d,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:E}},er=(v,a,d)=>{let f=pi(d,1,a.zoom),g=Math.pow(2,a.zoom-d.tileID.overscaledZ),x=d.tileID.overscaleFactor();return{u_matrix:v,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[a.pixelsToGLUnits[0]/(f*g),a.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:x}},Ui=(v,a,d=1)=>({u_matrix:v,u_color:a,u_overlay:0,u_overlay_scale:d}),vr=v=>({u_matrix:v}),sr=(v,a,d,f)=>({u_matrix:v,u_extrude_scale:pi(a,1,d),u_intensity:f});function Kr(v,a){let d=Math.pow(2,a.canonical.z),f=a.canonical.y;return[new n.Y(0,f/d).toLngLat().lat,new n.Y(0,(f+1)/d).toLngLat().lat]}let qr=(v,a,d,f)=>{let g=v.transform;return{u_matrix:tr(v,a,d,f),u_ratio:1/pi(a,1,g.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},_r=(v,a,d,f,g)=>n.e(qr(v,a,d,g),{u_image:0,u_image_height:f}),Co=(v,a,d,f,g)=>{let x=v.transform,E=kt(a,x);return{u_matrix:tr(v,a,d,g),u_texsize:a.imageAtlasTexture.size,u_ratio:1/pi(a,1,x.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[E,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Ar=(v,a,d,f,g,x)=>{let E=v.lineAtlas,M=kt(a,v.transform),I=d.layout.get("line-cap")==="round",z=E.getDash(f.from,I),B=E.getDash(f.to,I),U=z.width*g.fromScale,Z=B.width*g.toScale;return n.e(qr(v,a,d,x),{u_patternscale_a:[M/U,-z.height/2],u_patternscale_b:[M/Z,-B.height/2],u_sdfgamma:E.width/(256*Math.min(U,Z)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:B.y,u_mix:g.t})};function kt(v,a){return 1/pi(v,1,a.tileZoom)}function tr(v,a,d,f){return v.translatePosMatrix(f?f.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}let Nr=(v,a,d,f,g)=>{return{u_matrix:v,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(E=g.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(x=g.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:qn(g.paint.get("raster-hue-rotate"))};var x,E};function qn(v){v*=Math.PI/180;let a=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}let uo=(v,a,d,f,g,x,E,M,I,z)=>{let B=g.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:B.cameraToCenterDistance,u_pitch:B.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:B.width/B.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:E,u_coord_matrix:M,u_is_text:+I,u_pitch_with_map:+f,u_texsize:z,u_texture:0}},Eo=(v,a,d,f,g,x,E,M,I,z,B)=>{let U=g.transform;return n.e(uo(v,a,d,f,g,x,E,M,I,z),{u_gamma_scale:f?Math.cos(U._pitch)*U.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+B})},Ws=(v,a,d,f,g,x,E,M,I,z)=>n.e(Eo(v,a,d,f,g,x,E,M,!0,I,!0),{u_texsize_icon:z,u_texture_icon:1}),Ts=(v,a,d)=>({u_matrix:v,u_opacity:a,u_color:d}),qo=(v,a,d,f,g,x)=>n.e(function(E,M,I,z){let B=I.imageManager.getPattern(E.from.toString()),U=I.imageManager.getPattern(E.to.toString()),{width:Z,height:se}=I.imageManager.getPixelSize(),oe=Math.pow(2,z.tileID.overscaledZ),le=z.tileSize*Math.pow(2,I.transform.tileZoom)/oe,te=le*(z.tileID.canonical.x+z.tileID.wrap*oe),ve=le*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[Z,se],u_mix:M.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/pi(z,1,I.transform.tileZoom),u_pixel_coord_upper:[te>>16,ve>>16],u_pixel_coord_lower:[65535&te,65535&ve]}}(f,x,d,g),{u_matrix:v,u_opacity:a}),Xn={fillExtrusion:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_lightpos:new n.aK(v,a.u_lightpos),u_lightintensity:new n.aH(v,a.u_lightintensity),u_lightcolor:new n.aK(v,a.u_lightcolor),u_vertical_gradient:new n.aH(v,a.u_vertical_gradient),u_opacity:new n.aH(v,a.u_opacity)}),fillExtrusionPattern:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_lightpos:new n.aK(v,a.u_lightpos),u_lightintensity:new n.aH(v,a.u_lightintensity),u_lightcolor:new n.aK(v,a.u_lightcolor),u_vertical_gradient:new n.aH(v,a.u_vertical_gradient),u_height_factor:new n.aH(v,a.u_height_factor),u_image:new n.aG(v,a.u_image),u_texsize:new n.aL(v,a.u_texsize),u_pixel_coord_upper:new n.aL(v,a.u_pixel_coord_upper),u_pixel_coord_lower:new n.aL(v,a.u_pixel_coord_lower),u_scale:new n.aK(v,a.u_scale),u_fade:new n.aH(v,a.u_fade),u_opacity:new n.aH(v,a.u_opacity)}),fill:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix)}),fillPattern:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_image:new n.aG(v,a.u_image),u_texsize:new n.aL(v,a.u_texsize),u_pixel_coord_upper:new n.aL(v,a.u_pixel_coord_upper),u_pixel_coord_lower:new n.aL(v,a.u_pixel_coord_lower),u_scale:new n.aK(v,a.u_scale),u_fade:new n.aH(v,a.u_fade)}),fillOutline:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_world:new n.aL(v,a.u_world)}),fillOutlinePattern:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_world:new n.aL(v,a.u_world),u_image:new n.aG(v,a.u_image),u_texsize:new n.aL(v,a.u_texsize),u_pixel_coord_upper:new n.aL(v,a.u_pixel_coord_upper),u_pixel_coord_lower:new n.aL(v,a.u_pixel_coord_lower),u_scale:new n.aK(v,a.u_scale),u_fade:new n.aH(v,a.u_fade)}),circle:(v,a)=>({u_camera_to_center_distance:new n.aH(v,a.u_camera_to_center_distance),u_scale_with_map:new n.aG(v,a.u_scale_with_map),u_pitch_with_map:new n.aG(v,a.u_pitch_with_map),u_extrude_scale:new n.aL(v,a.u_extrude_scale),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_matrix:new n.aI(v,a.u_matrix)}),collisionBox:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_camera_to_center_distance:new n.aH(v,a.u_camera_to_center_distance),u_pixels_to_tile_units:new n.aH(v,a.u_pixels_to_tile_units),u_extrude_scale:new n.aL(v,a.u_extrude_scale),u_overscale_factor:new n.aH(v,a.u_overscale_factor)}),collisionCircle:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_inv_matrix:new n.aI(v,a.u_inv_matrix),u_camera_to_center_distance:new n.aH(v,a.u_camera_to_center_distance),u_viewport_size:new n.aL(v,a.u_viewport_size)}),debug:(v,a)=>({u_color:new n.aM(v,a.u_color),u_matrix:new n.aI(v,a.u_matrix),u_overlay:new n.aG(v,a.u_overlay),u_overlay_scale:new n.aH(v,a.u_overlay_scale)}),clippingMask:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix)}),heatmap:(v,a)=>({u_extrude_scale:new n.aH(v,a.u_extrude_scale),u_intensity:new n.aH(v,a.u_intensity),u_matrix:new n.aI(v,a.u_matrix)}),heatmapTexture:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_world:new n.aL(v,a.u_world),u_image:new n.aG(v,a.u_image),u_color_ramp:new n.aG(v,a.u_color_ramp),u_opacity:new n.aH(v,a.u_opacity)}),hillshade:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_image:new n.aG(v,a.u_image),u_latrange:new n.aL(v,a.u_latrange),u_light:new n.aL(v,a.u_light),u_shadow:new n.aM(v,a.u_shadow),u_highlight:new n.aM(v,a.u_highlight),u_accent:new n.aM(v,a.u_accent)}),hillshadePrepare:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_image:new n.aG(v,a.u_image),u_dimension:new n.aL(v,a.u_dimension),u_zoom:new n.aH(v,a.u_zoom),u_unpack:new n.aJ(v,a.u_unpack)}),line:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_ratio:new n.aH(v,a.u_ratio),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_units_to_pixels:new n.aL(v,a.u_units_to_pixels)}),lineGradient:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_ratio:new n.aH(v,a.u_ratio),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_units_to_pixels:new n.aL(v,a.u_units_to_pixels),u_image:new n.aG(v,a.u_image),u_image_height:new n.aH(v,a.u_image_height)}),linePattern:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_texsize:new n.aL(v,a.u_texsize),u_ratio:new n.aH(v,a.u_ratio),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_image:new n.aG(v,a.u_image),u_units_to_pixels:new n.aL(v,a.u_units_to_pixels),u_scale:new n.aK(v,a.u_scale),u_fade:new n.aH(v,a.u_fade)}),lineSDF:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_ratio:new n.aH(v,a.u_ratio),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_units_to_pixels:new n.aL(v,a.u_units_to_pixels),u_patternscale_a:new n.aL(v,a.u_patternscale_a),u_patternscale_b:new n.aL(v,a.u_patternscale_b),u_sdfgamma:new n.aH(v,a.u_sdfgamma),u_image:new n.aG(v,a.u_image),u_tex_y_a:new n.aH(v,a.u_tex_y_a),u_tex_y_b:new n.aH(v,a.u_tex_y_b),u_mix:new n.aH(v,a.u_mix)}),raster:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_tl_parent:new n.aL(v,a.u_tl_parent),u_scale_parent:new n.aH(v,a.u_scale_parent),u_buffer_scale:new n.aH(v,a.u_buffer_scale),u_fade_t:new n.aH(v,a.u_fade_t),u_opacity:new n.aH(v,a.u_opacity),u_image0:new n.aG(v,a.u_image0),u_image1:new n.aG(v,a.u_image1),u_brightness_low:new n.aH(v,a.u_brightness_low),u_brightness_high:new n.aH(v,a.u_brightness_high),u_saturation_factor:new n.aH(v,a.u_saturation_factor),u_contrast_factor:new n.aH(v,a.u_contrast_factor),u_spin_weights:new n.aK(v,a.u_spin_weights)}),symbolIcon:(v,a)=>({u_is_size_zoom_constant:new n.aG(v,a.u_is_size_zoom_constant),u_is_size_feature_constant:new n.aG(v,a.u_is_size_feature_constant),u_size_t:new n.aH(v,a.u_size_t),u_size:new n.aH(v,a.u_size),u_camera_to_center_distance:new n.aH(v,a.u_camera_to_center_distance),u_pitch:new n.aH(v,a.u_pitch),u_rotate_symbol:new n.aG(v,a.u_rotate_symbol),u_aspect_ratio:new n.aH(v,a.u_aspect_ratio),u_fade_change:new n.aH(v,a.u_fade_change),u_matrix:new n.aI(v,a.u_matrix),u_label_plane_matrix:new n.aI(v,a.u_label_plane_matrix),u_coord_matrix:new n.aI(v,a.u_coord_matrix),u_is_text:new n.aG(v,a.u_is_text),u_pitch_with_map:new n.aG(v,a.u_pitch_with_map),u_texsize:new n.aL(v,a.u_texsize),u_texture:new n.aG(v,a.u_texture)}),symbolSDF:(v,a)=>({u_is_size_zoom_constant:new n.aG(v,a.u_is_size_zoom_constant),u_is_size_feature_constant:new n.aG(v,a.u_is_size_feature_constant),u_size_t:new n.aH(v,a.u_size_t),u_size:new n.aH(v,a.u_size),u_camera_to_center_distance:new n.aH(v,a.u_camera_to_center_distance),u_pitch:new n.aH(v,a.u_pitch),u_rotate_symbol:new n.aG(v,a.u_rotate_symbol),u_aspect_ratio:new n.aH(v,a.u_aspect_ratio),u_fade_change:new n.aH(v,a.u_fade_change),u_matrix:new n.aI(v,a.u_matrix),u_label_plane_matrix:new n.aI(v,a.u_label_plane_matrix),u_coord_matrix:new n.aI(v,a.u_coord_matrix),u_is_text:new n.aG(v,a.u_is_text),u_pitch_with_map:new n.aG(v,a.u_pitch_with_map),u_texsize:new n.aL(v,a.u_texsize),u_texture:new n.aG(v,a.u_texture),u_gamma_scale:new n.aH(v,a.u_gamma_scale),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_is_halo:new n.aG(v,a.u_is_halo)}),symbolTextAndIcon:(v,a)=>({u_is_size_zoom_constant:new n.aG(v,a.u_is_size_zoom_constant),u_is_size_feature_constant:new n.aG(v,a.u_is_size_feature_constant),u_size_t:new n.aH(v,a.u_size_t),u_size:new n.aH(v,a.u_size),u_camera_to_center_distance:new n.aH(v,a.u_camera_to_center_distance),u_pitch:new n.aH(v,a.u_pitch),u_rotate_symbol:new n.aG(v,a.u_rotate_symbol),u_aspect_ratio:new n.aH(v,a.u_aspect_ratio),u_fade_change:new n.aH(v,a.u_fade_change),u_matrix:new n.aI(v,a.u_matrix),u_label_plane_matrix:new n.aI(v,a.u_label_plane_matrix),u_coord_matrix:new n.aI(v,a.u_coord_matrix),u_is_text:new n.aG(v,a.u_is_text),u_pitch_with_map:new n.aG(v,a.u_pitch_with_map),u_texsize:new n.aL(v,a.u_texsize),u_texsize_icon:new n.aL(v,a.u_texsize_icon),u_texture:new n.aG(v,a.u_texture),u_texture_icon:new n.aG(v,a.u_texture_icon),u_gamma_scale:new n.aH(v,a.u_gamma_scale),u_device_pixel_ratio:new n.aH(v,a.u_device_pixel_ratio),u_is_halo:new n.aG(v,a.u_is_halo)}),background:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_opacity:new n.aH(v,a.u_opacity),u_color:new n.aM(v,a.u_color)}),backgroundPattern:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_opacity:new n.aH(v,a.u_opacity),u_image:new n.aG(v,a.u_image),u_pattern_tl_a:new n.aL(v,a.u_pattern_tl_a),u_pattern_br_a:new n.aL(v,a.u_pattern_br_a),u_pattern_tl_b:new n.aL(v,a.u_pattern_tl_b),u_pattern_br_b:new n.aL(v,a.u_pattern_br_b),u_texsize:new n.aL(v,a.u_texsize),u_mix:new n.aH(v,a.u_mix),u_pattern_size_a:new n.aL(v,a.u_pattern_size_a),u_pattern_size_b:new n.aL(v,a.u_pattern_size_b),u_scale_a:new n.aH(v,a.u_scale_a),u_scale_b:new n.aH(v,a.u_scale_b),u_pixel_coord_upper:new n.aL(v,a.u_pixel_coord_upper),u_pixel_coord_lower:new n.aL(v,a.u_pixel_coord_lower),u_tile_units_to_pixels:new n.aH(v,a.u_tile_units_to_pixels)}),terrain:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_texture:new n.aG(v,a.u_texture),u_ele_delta:new n.aH(v,a.u_ele_delta)}),terrainDepth:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_ele_delta:new n.aH(v,a.u_ele_delta)}),terrainCoords:(v,a)=>({u_matrix:new n.aI(v,a.u_matrix),u_texture:new n.aG(v,a.u_texture),u_terrain_coords_id:new n.aH(v,a.u_terrain_coords_id),u_ele_delta:new n.aH(v,a.u_ele_delta)})};class ho{constructor(a,d,f){this.context=a;let g=a.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){let d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Zs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $n{constructor(a,d,f,g){this.length=d.length,this.attributes=f,this.itemSize=d.bytesPerElement,this.dynamicDraw=g,this.context=a;let x=a.gl;this.buffer=x.createBuffer(),a.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);let d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let f=0;f<this.attributes.length;f++){let g=d.attributes[this.attributes[f].name];g!==void 0&&a.enableVertexAttribArray(g)}}setVertexAttribPointers(a,d,f){for(let g=0;g<this.attributes.length;g++){let x=this.attributes[g],E=d.attributes[x.name];E!==void 0&&a.vertexAttribPointer(E,x.components,a[Zs[x.type]],!1,this.itemSize,x.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let vn=new WeakMap;function Ks(v){var a;if(vn.has(v))return vn.get(v);{let d=(a=v.getParameter(v.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return vn.set(v,d),d}}class Wi{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Fa extends Wi{getDefault(){return n.aO.transparent}set(a){let d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Sl extends Wi{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class dc extends Wi{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class Cl extends Wi{getDefault(){return[!0,!0,!0,!0]}set(a){let d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Bd extends Wi{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Rd extends Wi{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class bu extends Wi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){let d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class df extends Wi{getDefault(){let a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){let d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class hf extends Wi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class El extends Wi{getDefault(){return[0,1]}set(a){let d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class s1 extends Wi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class a1 extends Wi{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class l1 extends Wi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class c1 extends Wi{getDefault(){let a=this.gl;return[a.ONE,a.ZERO]}set(a){let d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class u1 extends Wi{getDefault(){return n.aO.transparent}set(a){let d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class d1 extends Wi{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Ud extends Wi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class vu extends Wi{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Vd extends Wi{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class jd extends Wi{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Tl extends Wi{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class pf extends Wi{getDefault(){let a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){let d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class ff extends Wi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Hd extends Wi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class za extends Wi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class mf extends Wi{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ml extends Wi{getDefault(){return null}set(a){let d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Al extends Wi{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;let f=this.gl;Ks(f)?f.bindVertexArray(a):(d=f.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class gf extends Wi{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class qd extends Wi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class rr extends Wi{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Il extends Wi{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class h1 extends Il{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class yf extends Il{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class hc extends Il{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class p1{constructor(a,d,f,g,x){this.context=a,this.width=d,this.height=f;let E=a.gl,M=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new h1(a,M),g)this.depthAttachment=x?new hc(a,M):new yf(a,M);else if(x)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){let f=this.depthAttachment.get();f&&a.deleteRenderbuffer(f)}a.deleteFramebuffer(this.framebuffer)}}class sn{constructor(a,d,f){this.blendFunction=a,this.blendColor=d,this.mask=f}}sn.Replace=[1,0],sn.disabled=new sn(sn.Replace,n.aO.transparent,[!1,!1,!1,!1]),sn.unblended=new sn(sn.Replace,n.aO.transparent,[!0,!0,!0,!0]),sn.alphaBlended=new sn([1,771],n.aO.transparent,[!0,!0,!0,!0]);class bf{constructor(a){var d,f;if(this.gl=a,this.clearColor=new Fa(this),this.clearDepth=new Sl(this),this.clearStencil=new dc(this),this.colorMask=new Cl(this),this.depthMask=new Bd(this),this.stencilMask=new Rd(this),this.stencilFunc=new bu(this),this.stencilOp=new df(this),this.stencilTest=new hf(this),this.depthRange=new El(this),this.depthTest=new s1(this),this.depthFunc=new a1(this),this.blend=new l1(this),this.blendFunc=new c1(this),this.blendColor=new u1(this),this.blendEquation=new d1(this),this.cullFace=new Ud(this),this.cullFaceSide=new vu(this),this.frontFace=new Vd(this),this.program=new jd(this),this.activeTexture=new Tl(this),this.viewport=new pf(this),this.bindFramebuffer=new ff(this),this.bindRenderbuffer=new Hd(this),this.bindTexture=new za(this),this.bindVertexBuffer=new mf(this),this.bindElementBuffer=new Ml(this),this.bindVertexArray=new Al(this),this.pixelStoreUnpack=new gf(this),this.pixelStoreUnpackPremultiplyAlpha=new qd(this),this.pixelStoreUnpackFlipY=new rr(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Ks(a)){this.HALF_FLOAT=a.HALF_FLOAT;let g=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:g?.RGBA16F_EXT,this.RGB16F=(f=a.RGB16F)!==null&&f!==void 0?f:g?.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");let g=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new ho(this,a,d)}createVertexBuffer(a,d,f){return new $n(this,a,d,f)}createRenderbuffer(a,d,f){let g=this.gl,x=g.createRenderbuffer();return this.bindRenderbuffer.set(x),g.renderbufferStorage(g.RENDERBUFFER,a,d,f),this.bindRenderbuffer.set(null),x}createFramebuffer(a,d,f,g){return new p1(this,a,d,f,g)}clear({color:a,depth:d,stencil:f}){let g=this.gl,x=0;a&&(x|=g.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(x|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),f!==void 0&&(x|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(x)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){n.aD(a.blendFunction,sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Ks(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return Ks(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Ji{constructor(a,d,f){this.func=a,this.mask=d,this.range=f}}Ji.ReadOnly=!1,Ji.ReadWrite=!0,Ji.disabled=new Ji(519,Ji.ReadOnly,[0,1]);let pc=7680;class Er{constructor(a,d,f,g,x,E){this.test=a,this.ref=d,this.mask=f,this.fail=g,this.depthFail=x,this.pass=E}}Er.disabled=new Er({func:519,mask:0},0,0,pc,pc,pc);class xr{constructor(a,d,f){this.enable=a,this.mode=d,this.frontFace=f}}let Pl;function _u(v,a,d,f,g,x,E){let M=v.context,I=M.gl,z=v.useProgram("collisionBox"),B=[],U=0,Z=0;for(let he=0;he<f.length;he++){let Te=f[he],Re=a.getTile(Te),Ve=Re.getBucket(d);if(!Ve)continue;let Qe=Te.posMatrix;g[0]===0&&g[1]===0||(Qe=v.translatePosMatrix(Te.posMatrix,Re,g,x));let at=E?Ve.textCollisionBox:Ve.iconCollisionBox,it=Ve.collisionCircleArray;if(it.length>0){let ot=n.F(),Nt=Qe;n.aP(ot,Ve.placementInvProjMatrix,v.transform.glCoordMatrix),n.aP(ot,ot,Ve.placementViewportMatrix),B.push({circleArray:it,circleOffset:Z,transform:Nt,invTransform:ot,coord:Te}),U+=it.length/4,Z=U}at&&z.draw(M,I.LINES,Ji.disabled,Er.disabled,v.colorModeForRenderPass(),xr.disabled,er(Qe,v.transform,Re),v.style.map.terrain&&v.style.map.terrain.getTerrainData(Te),d.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,null,v.transform.zoom,null,null,at.collisionVertexBuffer)}if(!E||!B.length)return;let se=v.useProgram("collisionCircle"),oe=new n.aQ;oe.resize(4*U),oe._trim();let le=0;for(let he of B)for(let Te=0;Te<he.circleArray.length/4;Te++){let Re=4*Te,Ve=he.circleArray[Re+0],Qe=he.circleArray[Re+1],at=he.circleArray[Re+2],it=he.circleArray[Re+3];oe.emplace(le++,Ve,Qe,at,it,0),oe.emplace(le++,Ve,Qe,at,it,1),oe.emplace(le++,Ve,Qe,at,it,2),oe.emplace(le++,Ve,Qe,at,it,3)}(!Pl||Pl.length<2*U)&&(Pl=function(he){let Te=2*he,Re=new n.aS;Re.resize(Te),Re._trim();for(let Ve=0;Ve<Te;Ve++){let Qe=6*Ve;Re.uint16[Qe+0]=4*Ve+0,Re.uint16[Qe+1]=4*Ve+1,Re.uint16[Qe+2]=4*Ve+2,Re.uint16[Qe+3]=4*Ve+2,Re.uint16[Qe+4]=4*Ve+3,Re.uint16[Qe+5]=4*Ve+0}return Re}(U));let te=M.createIndexBuffer(Pl,!0),ve=M.createVertexBuffer(oe,n.aR.members,!0);for(let he of B){let Te={u_matrix:he.transform,u_inv_matrix:he.invTransform,u_camera_to_center_distance:(Oe=v.transform).cameraToCenterDistance,u_viewport_size:[Oe.width,Oe.height]};se.draw(M,I.TRIANGLES,Ji.disabled,Er.disabled,v.colorModeForRenderPass(),xr.disabled,Te,v.style.map.terrain&&v.style.map.terrain.getTerrainData(he.coord),d.id,ve,te,n.$.simpleSegment(0,2*he.circleOffset,he.circleArray.length,he.circleArray.length/2),null,v.transform.zoom,null,null,null)}var Oe;ve.destroy(),te.destroy()}xr.disabled=new xr(!1,1029,2305),xr.backCCW=new xr(!0,1029,2305);let vf=n.an(new Float32Array(16));function xu(v,a,d,f,g,x){let{horizontalAlign:E,verticalAlign:M}=n.at(v);return new n.P((-(E-.5)*a/g+f[0])*x,(-(M-.5)*d/g+f[1])*x)}function wu(v,a,d,f,g,x,E,M,I,z,B){let U=v.text.placedSymbolArray,Z=v.text.dynamicLayoutVertexArray,se=v.icon.dynamicLayoutVertexArray,oe={};Z.clear();for(let le=0;le<U.length;le++){let te=U.get(le),ve=te.hidden||!te.crossTileID||v.allowVerticalPlacement&&!te.placedOrientation?null:f[te.crossTileID];if(ve){let Oe=new n.P(te.anchorX,te.anchorY),he=re(Oe,d?E:x,B),Te=V(g.cameraToCenterDistance,he.signedDistanceFromCamera),Re=n.ai(v.textSizeData,I,te)*Te/n.ao;d&&(Re*=v.tilePixelRatio/M);let{width:Ve,height:Qe,anchor:at,textOffset:it,textBoxScale:ot}=ve,Nt=xu(at,Ve,Qe,it,ot,Re),Mi=d?re(Oe.add(Nt),x,B).point:he.point.add(a?Nt.rotate(-g.angle):Nt),St=v.allowVerticalPlacement&&te.placedOrientation===n.ah.vertical?Math.PI/2:0;for(let ui=0;ui<te.numGlyphs;ui++)n.aj(Z,Mi,St);z&&te.associatedIconIndex>=0&&(oe[te.associatedIconIndex]={shiftedAnchor:Mi,angle:St})}else Gt(te.numGlyphs,Z)}if(z){se.clear();let le=v.icon.placedSymbolArray;for(let te=0;te<le.length;te++){let ve=le.get(te);if(ve.hidden)Gt(ve.numGlyphs,se);else{let Oe=oe[te];if(Oe)for(let he=0;he<ve.numGlyphs;he++)n.aj(se,Oe.shiftedAnchor,Oe.angle);else Gt(ve.numGlyphs,se)}}v.icon.dynamicLayoutVertexBuffer.updateData(se)}v.text.dynamicLayoutVertexBuffer.updateData(Z)}function $d(v,a,d){return d.iconsInText&&a?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function _f(v,a,d,f,g,x,E,M,I,z,B,U){let Z=v.context,se=Z.gl,oe=v.transform,le=M==="map",te=I==="map",ve=M!=="viewport"&&d.layout.get("symbol-placement")!=="point",Oe=le&&!te&&!ve,he=!d.layout.get("symbol-sort-key").isConstant(),Te=!1,Re=v.depthModeForSublayer(0,Ji.ReadOnly),Ve=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Qe=[];for(let at of f){let it=a.getTile(at),ot=it.getBucket(d);if(!ot)continue;let Nt=g?ot.text:ot.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;let Mi=Nt.programConfigurations.get(d.id),St=g||ot.sdfIcons,ui=g?ot.textSizeData:ot.iconSizeData,Ai=te||oe.pitch!==0,$i=v.useProgram($d(St,g,ot),Mi),mi=n.ag(ui,oe.zoom),Ii=v.style.map.terrain&&v.style.map.terrain.getTerrainData(at),Pi,Ur,wr,Ao,pn=[0,0],Tr=null;if(g)Ur=it.glyphAtlasTexture,wr=se.LINEAR,Pi=it.glyphAtlasTexture.size,ot.iconsInText&&(pn=it.imageAtlasTexture.size,Tr=it.imageAtlasTexture,Ao=Ai||v.options.rotating||v.options.zooming||ui.kind==="composite"||ui.kind==="camera"?se.LINEAR:se.NEAREST);else{let Or=d.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;Ur=it.imageAtlasTexture,wr=St||v.options.rotating||v.options.zooming||Or||Ai?se.LINEAR:se.NEAREST,Pi=it.imageAtlasTexture.size}let Yn=pi(it,1,v.transform.zoom),gs=wi(at.posMatrix,te,le,v.transform,Yn),Is=zi(at.posMatrix,te,le,v.transform,Yn),Va=Ve&&ot.hasTextData(),ja=d.layout.get("icon-text-fit")!=="none"&&Va&&ot.hasIconData();if(ve){let Or=v.style.map.terrain?(Qo,Vi)=>v.style.map.terrain.getElevation(at,Qo,Vi):null,Fn=d.layout.get("text-rotation-alignment")==="map";q(ot,at.posMatrix,v,g,gs,Is,te,z,Fn,Or)}let Ps=v.translatePosMatrix(at.posMatrix,it,x,E),ys=ve||g&&Ve||ja?vf:gs,Qr=v.translatePosMatrix(Is,it,x,E,!0),Pr=St&&d.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Xr;Xr=St?ot.iconsInText?Ws(ui.kind,mi,Oe,te,v,Ps,ys,Qr,Pi,pn):Eo(ui.kind,mi,Oe,te,v,Ps,ys,Qr,g,Pi,!0):uo(ui.kind,mi,Oe,te,v,Ps,ys,Qr,g,Pi);let jl={program:$i,buffers:Nt,uniformValues:Xr,atlasTexture:Ur,atlasTextureIcon:Tr,atlasInterpolation:wr,atlasInterpolationIcon:Ao,isSDF:St,hasHalo:Pr};if(he&&ot.canOverlap){Te=!0;let Or=Nt.segments.get();for(let Fn of Or)Qe.push({segments:new n.$([Fn]),sortKey:Fn.sortKey,state:jl,terrainData:Ii})}else Qe.push({segments:Nt.segments,sortKey:0,state:jl,terrainData:Ii})}Te&&Qe.sort((at,it)=>at.sortKey-it.sortKey);for(let at of Qe){let it=at.state;if(Z.activeTexture.set(se.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,se.CLAMP_TO_EDGE),it.atlasTextureIcon&&(Z.activeTexture.set(se.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),it.isSDF){let ot=it.uniformValues;it.hasHalo&&(ot.u_is_halo=1,ku(it.buffers,at.segments,d,v,it.program,Re,B,U,ot,at.terrainData)),ot.u_is_halo=0}ku(it.buffers,at.segments,d,v,it.program,Re,B,U,it.uniformValues,at.terrainData)}}function ku(v,a,d,f,g,x,E,M,I,z){let B=f.context;g.draw(B,B.gl.TRIANGLES,x,E,M,xr.disabled,I,z,d.id,v.layoutVertexBuffer,v.indexBuffer,a,d.paint,f.transform.zoom,v.programConfigurations.get(d.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function xf(v,a,d,f,g){if(!d||!f||!f.imageAtlas)return;let x=f.imageAtlas.patternPositions,E=x[d.to.toString()],M=x[d.from.toString()];if(!E&&M&&(E=M),!M&&E&&(M=E),!E||!M){let I=g.getPaintProperty(a);E=x[I],M=x[I]}E&&M&&v.setConstantPatternPositions(E,M)}function Qd(v,a,d,f,g,x,E){let M=v.context.gl,I="fill-pattern",z=d.paint.get(I),B=z&&z.constantOr(1),U=d.getCrossfadeParameters(),Z,se,oe,le,te;E?(se=B&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=M.LINES):(se=B?"fillPattern":"fill",Z=M.TRIANGLES);let ve=z.constantOr(null);for(let Oe of f){let he=a.getTile(Oe);if(B&&!he.patternsLoaded())continue;let Te=he.getBucket(d);if(!Te)continue;let Re=Te.programConfigurations.get(d.id),Ve=v.useProgram(se,Re),Qe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Oe);B&&(v.context.activeTexture.set(M.TEXTURE0),he.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Re.updatePaintBuffers(U)),xf(Re,I,ve,he,d);let at=Qe?Oe:null,it=v.translatePosMatrix(at?at.posMatrix:Oe.posMatrix,he,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(E){le=Te.indexBuffer2,te=Te.segments2;let ot=[M.drawingBufferWidth,M.drawingBufferHeight];oe=se==="fillOutlinePattern"&&B?Ye(it,v,U,he,ot):Xe(it,ot)}else le=Te.indexBuffer,te=Te.segments,oe=B?ht(it,v,U,he):xt(it);Ve.draw(v.context,Z,g,v.stencilModeForClipping(Oe),x,xr.disabled,oe,Qe,d.id,Te.layoutVertexBuffer,le,te,d.paint,v.transform.zoom,Re)}}function Dl(v,a,d,f,g,x,E){let M=v.context,I=M.gl,z="fill-extrusion-pattern",B=d.paint.get(z),U=B.constantOr(1),Z=d.getCrossfadeParameters(),se=d.paint.get("fill-extrusion-opacity"),oe=B.constantOr(null);for(let le of f){let te=a.getTile(le),ve=te.getBucket(d);if(!ve)continue;let Oe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(le),he=ve.programConfigurations.get(d.id),Te=v.useProgram(U?"fillExtrusionPattern":"fillExtrusion",he);U&&(v.context.activeTexture.set(I.TEXTURE0),te.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),he.updatePaintBuffers(Z)),xf(he,z,oe,te,d);let Re=v.translatePosMatrix(le.posMatrix,te,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ve=d.paint.get("fill-extrusion-vertical-gradient"),Qe=U?Ze(Re,v,Ve,se,le,Z,te):Ae(Re,v,Ve,se);Te.draw(M,M.gl.TRIANGLES,g,x,E,xr.backCCW,Qe,Oe,d.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,d.paint,v.transform.zoom,he,v.style.map.terrain&&ve.centroidVertexBuffer)}}function Gd(v,a,d,f,g,x,E){let M=v.context,I=M.gl,z=d.fbo;if(!z)return;let B=v.useProgram("hillshade"),U=v.style.map.terrain&&v.style.map.terrain.getTerrainData(a);M.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),B.draw(M,I.TRIANGLES,g,x,E,xr.disabled,((Z,se,oe,le)=>{let te=oe.paint.get("hillshade-shadow-color"),ve=oe.paint.get("hillshade-highlight-color"),Oe=oe.paint.get("hillshade-accent-color"),he=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(he-=Z.transform.angle);let Te=!Z.options.moving;return{u_matrix:le?le.posMatrix:Z.transform.calculatePosMatrix(se.tileID.toUnwrapped(),Te),u_image:0,u_latrange:Kr(0,se.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),he],u_shadow:te,u_highlight:ve,u_accent:Oe}})(v,d,f,U?a:null),U,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function wf(v,a,d,f,g,x){let E=v.context,M=E.gl,I=a.dem;if(I&&I.data){let z=I.dim,B=I.stride,U=I.getPixels();if(E.activeTexture.set(M.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||v.getTileTexture(B),a.demTexture){let se=a.demTexture;se.update(U,{premultiply:!1}),se.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else a.demTexture=new st(E,U,M.RGBA,{premultiply:!1}),a.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);E.activeTexture.set(M.TEXTURE0);let Z=a.fbo;if(!Z){let se=new st(E,{width:z,height:z,data:null},M.RGBA);se.bind(M.LINEAR,M.CLAMP_TO_EDGE),Z=a.fbo=E.createFramebuffer(z,z,!0,!1),Z.colorAttachment.set(se.texture)}E.bindFramebuffer.set(Z.framebuffer),E.viewport.set([0,0,z,z]),v.useProgram("hillshadePrepare").draw(E,M.TRIANGLES,f,g,x,xr.disabled,((se,oe)=>{let le=oe.stride,te=n.F();return n.aN(te,0,n.W,-n.W,0,0,1),n.H(te,te,[0,-n.W,0]),{u_matrix:te,u_image:1,u_dimension:[le,le],u_zoom:se.overscaledZ,u_unpack:oe.getUnpackVector()}})(a.tileID,I),null,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function kf(v,a,d,f,g,x){let E=f.paint.get("raster-fade-duration");if(!x&&E>0){let M=b.now(),I=(M-v.timeAdded)/E,z=a?(M-a.timeAdded)/E:-1,B=d.getSource(),U=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),Z=!a||Math.abs(a.tileID.overscaledZ-U)>Math.abs(v.tileID.overscaledZ-U),se=Z&&v.refreshedUponExpiration?1:n.ac(Z?I:1-z,0,1);return v.refreshedUponExpiration&&I>=1&&(v.refreshedUponExpiration=!1),a?{opacity:1,mix:1-se}:{opacity:se,mix:0}}return{opacity:1,mix:0}}let Su=new n.aO(1,0,0,1),Wd=new n.aO(0,1,0,1),f1=new n.aO(0,0,1,1),Sf=new n.aO(1,0,1,1),Jr=new n.aO(0,1,1,1);function ma(v,a,d,f){Ll(v,0,a+d/2,v.transform.width,d,f)}function $o(v,a,d,f){Ll(v,a-d/2,0,d,v.transform.height,f)}function Ll(v,a,d,f,g,x){let E=v.context,M=E.gl;M.enable(M.SCISSOR_TEST),M.scissor(a*v.pixelRatio,d*v.pixelRatio,f*v.pixelRatio,g*v.pixelRatio),E.clear({color:x}),M.disable(M.SCISSOR_TEST)}function Zd(v,a,d){let f=v.context,g=f.gl,x=d.posMatrix,E=v.useProgram("debug"),M=Ji.disabled,I=Er.disabled,z=v.colorModeForRenderPass(),B="$debug",U=v.style.map.terrain&&v.style.map.terrain.getTerrainData(d);f.activeTexture.set(g.TEXTURE0);let Z=a.getTileByID(d.key).latestRawTileData,se=Math.floor((Z&&Z.byteLength||0)/1024),oe=a.getTile(d).tileSize,le=512/Math.min(oe,512)*(d.overscaledZ/v.transform.zoom)*.5,te=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(te+=` => ${d.overscaledZ}`),function(ve,Oe){ve.initDebugOverlayCanvas();let he=ve.debugOverlayCanvas,Te=ve.context.gl,Re=ve.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,he.width,he.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(Oe,5,5),Re.strokeText(Oe,5,5),ve.debugOverlayTexture.update(he),ve.debugOverlayTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE)}(v,`${te} ${se}kB`),E.draw(f,g.TRIANGLES,M,I,sn.alphaBlended,xr.disabled,Ui(x,n.aO.transparent,le),null,B,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),E.draw(f,g.LINE_STRIP,M,I,z,xr.disabled,Ui(x,n.aO.red),U,B,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Kd(v,a,d){let f=v.context,g=f.gl,x=v.colorModeForRenderPass(),E=new Ji(g.LEQUAL,Ji.ReadWrite,v.depthRangeFor3D),M=v.useProgram("terrain"),I=a.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(let z of d){let B=v.renderToTexture.getTexture(z),U=a.getTerrainData(z.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.texture);let Z={u_matrix:v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(v.transform.zoom)};M.draw(f,g.TRIANGLES,E,Er.disabled,x,xr.backCCW,Z,U,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class Fl{constructor(a,d){this.context=new bf(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:n.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ft.maxUnderzooming+ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ur}resize(a,d,f){if(this.width=Math.floor(a*f),this.height=Math.floor(d*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let g of this.style._order)this.style._layers[g].resize()}setup(){let a=this.context,d=new n.aV;d.emplaceBack(0,0),d.emplaceBack(n.W,0),d.emplaceBack(0,n.W),d.emplaceBack(n.W,n.W),this.tileExtentBuffer=a.createVertexBuffer(d,Hn.members),this.tileExtentSegments=n.$.simpleSegment(0,0,4,2);let f=new n.aV;f.emplaceBack(0,0),f.emplaceBack(n.W,0),f.emplaceBack(0,n.W),f.emplaceBack(n.W,n.W),this.debugBuffer=a.createVertexBuffer(f,Hn.members),this.debugSegments=n.$.simpleSegment(0,0,4,5);let g=new n.Z;g.emplaceBack(0,0,0,0),g.emplaceBack(n.W,0,n.W,0),g.emplaceBack(0,n.W,0,n.W),g.emplaceBack(n.W,n.W,n.W,n.W),this.rasterBoundsBuffer=a.createVertexBuffer(g,fr.members),this.rasterBoundsSegments=n.$.simpleSegment(0,0,4,2);let x=new n.aV;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(x,Hn.members),this.viewportSegments=n.$.simpleSegment(0,0,4,2);let E=new n.aW;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(E);let M=new n.aX;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(M);let I=this.context.gl;this.stencilClearMode=new Er({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){let a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let f=n.F();n.aN(f,0,this.width,this.height,0,0,1),n.J(f,f,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,Ji.disabled,this.stencilClearMode,sn.disabled,xr.disabled,vr(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;let f=this.context,g=f.gl;this.nextStencilID+d.length>256&&this.clearStencil(),f.setColorMode(sn.disabled),f.setDepthMode(Ji.disabled);let x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let E of d){let M=this._tileClippingMaskIDs[E.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E);x.draw(f,g.TRIANGLES,Ji.disabled,new Er({func:g.ALWAYS,mask:0},M,255,g.KEEP,g.KEEP,g.REPLACE),sn.disabled,xr.disabled,vr(E.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let a=this.nextStencilID++,d=this.context.gl;return new Er({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){let d=this.context.gl;return new Er({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){let d=this.context.gl,f=a.sort((E,M)=>M.overscaledZ-E.overscaledZ),g=f[f.length-1].overscaledZ,x=f[0].overscaledZ-g+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();let E={};for(let M=0;M<x;M++)E[M+g]=new Er({func:d.GEQUAL,mask:255},M+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=x,[E,f]}return[{[g]:Er.disabled},f]}colorModeForRenderPass(){let a=this.context.gl;return this._showOverdrawInspector?new sn([a.CONSTANT_COLOR,a.ONE],new n.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?sn.unblended:sn.alphaBlended}depthModeForSublayer(a,d,f){if(!this.opaquePassEnabledForLayer())return Ji.disabled;let g=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Ji(f||this.context.gl.LEQUAL,d,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();let f=this.style._order,g=this.style.sourceCaches,x={},E={},M={};for(let I in g){let z=g[I];z.used&&z.prepare(this.context),x[I]=z.getVisibleCoordinates(),E[I]=x[I].slice().reverse(),M[I]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<f.length;I++)if(this.style._layers[f[I]].is3D()){this.opaquePassCutoff=I;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let I of f){let z=this.style._layers[I];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;let B=E[z.source];(z.type==="custom"||B.length)&&this.renderLayer(this,g[z.source],z,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?n.aO.black:n.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){let I=this.style._layers[f[this.currentLayer]],z=g[I.source],B=x[I.source];this._renderTileClippingMasks(I,B),this.renderLayer(this,z,I,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){let I=this.style._layers[f[this.currentLayer]],z=g[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;let B=(I.type==="symbol"?M:E)[I.source];this._renderTileClippingMasks(I,x[I.source]),this.renderLayer(this,z,I,B)}if(this.options.showTileBoundaries){let I=function(z,B){let U=null,Z=Object.values(z._layers).flatMap(te=>te.source&&!te.isHidden(B)?[z.sourceCaches[te.source]]:[]),se=Z.filter(te=>te.getSource().type==="vector"),oe=Z.filter(te=>te.getSource().type!=="vector"),le=te=>{(!U||U.getSource().maxzoom<te.getSource().maxzoom)&&(U=te)};return se.forEach(te=>le(te)),U||oe.forEach(te=>le(te)),U}(this.style,this.transform.zoom);I&&function(z,B,U){for(let Z=0;Z<U.length;Z++)Zd(z,B,U[Z])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){let z=I.transform.padding;ma(I,I.transform.height-(z.top||0),3,Su),ma(I,z.bottom||0,3,Wd),$o(I,z.left||0,3,f1),$o(I,I.transform.width-(z.right||0),3,Sf);let B=I.transform.centerPoint;(function(U,Z,se,oe){Ll(U,Z-1,se-10,2,20,oe),Ll(U,Z-10,se-1,20,2,oe)})(I,B.x,I.transform.height-B.y,Jr)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;let d=this.terrainFacilitator.matrix,f=this.transform.projMatrix,g=this.terrainFacilitator.dirty;g||(g=a?!n.aY(d,f):!n.aZ(d,f)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(n.a_(d,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,E){let M=x.context,I=M.gl,z=sn.unblended,B=new Ji(I.LEQUAL,Ji.ReadWrite,[0,1]),U=E.getTerrainMesh(),Z=E.sourceCache.getRenderableTiles(),se=x.useProgram("terrainDepth");M.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),M.clear({color:n.aO.transparent,depth:1});for(let oe of Z){let le=E.getTerrainData(oe.tileID),te={u_matrix:x.transform.calculatePosMatrix(oe.tileID.toUnwrapped()),u_ele_delta:E.getMeshFrameDelta(x.transform.zoom)};se.draw(M,I.TRIANGLES,B,Er.disabled,z,xr.backCCW,te,le,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,E){let M=x.context,I=M.gl,z=sn.unblended,B=new Ji(I.LEQUAL,Ji.ReadWrite,[0,1]),U=E.getTerrainMesh(),Z=E.getCoordsTexture(),se=E.sourceCache.getRenderableTiles(),oe=x.useProgram("terrainCoords");M.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),M.clear({color:n.aO.transparent,depth:1}),E.coordsIndex=[];for(let le of se){let te=E.getTerrainData(le.tileID);M.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,Z.texture);let ve={u_matrix:x.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(x.transform.zoom)};oe.draw(M,I.TRIANGLES,B,Er.disabled,z,xr.backCCW,ve,te,"terrain",U.vertexBuffer,U.indexBuffer,U.segments),E.coordsIndex.push(le.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(a,d,f,g){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(g||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(x,E,M,I,z){if(x.renderPass!=="translucent")return;let B=Er.disabled,U=x.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Z,se,oe,le,te,ve,Oe){let he=se.transform,Te=te==="map",Re=ve==="map";for(let Ve of Z){let Qe=le.getTile(Ve),at=Qe.getBucket(oe);if(!at||!at.text||!at.text.segments.get().length)continue;let it=n.ag(at.textSizeData,he.zoom),ot=pi(Qe,1,se.transform.zoom),Nt=wi(Ve.posMatrix,Re,Te,se.transform,ot),Mi=oe.layout.get("icon-text-fit")!=="none"&&at.hasIconData();if(it){let St=Math.pow(2,he.zoom-Qe.tileID.overscaledZ);wu(at,Te,Re,Oe,he,Nt,Ve.posMatrix,St,it,Mi,se.style.map.terrain?(ui,Ai)=>se.style.map.terrain.getElevation(Ve,ui,Ai):null)}}}(I,x,M,E,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),z),M.paint.get("icon-opacity").constantOr(1)!==0&&_f(x,E,M,I,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),B,U),M.paint.get("text-opacity").constantOr(1)!==0&&_f(x,E,M,I,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),B,U),E.map.showCollisionBoxes&&(_u(x,E,M,I,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),!0),_u(x,E,M,I,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),!1))})(a,d,f,g,this.style.placement.variableOffsets);break;case"circle":(function(x,E,M,I){if(x.renderPass!=="translucent")return;let z=M.paint.get("circle-opacity"),B=M.paint.get("circle-stroke-width"),U=M.paint.get("circle-stroke-opacity"),Z=!M.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(B.constantOr(1)===0||U.constantOr(1)===0))return;let se=x.context,oe=se.gl,le=x.depthModeForSublayer(0,Ji.ReadOnly),te=Er.disabled,ve=x.colorModeForRenderPass(),Oe=[];for(let he=0;he<I.length;he++){let Te=I[he],Re=E.getTile(Te),Ve=Re.getBucket(M);if(!Ve)continue;let Qe=Ve.programConfigurations.get(M.id),at=x.useProgram("circle",Qe),it=Ve.layoutVertexBuffer,ot=Ve.indexBuffer,Nt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Te),Mi={programConfiguration:Qe,program:at,layoutVertexBuffer:it,indexBuffer:ot,uniformValues:_t(x,Te,Re,M),terrainData:Nt};if(Z){let St=Ve.segments.get();for(let ui of St)Oe.push({segments:new n.$([ui]),sortKey:ui.sortKey,state:Mi})}else Oe.push({segments:Ve.segments,sortKey:0,state:Mi})}Z&&Oe.sort((he,Te)=>he.sortKey-Te.sortKey);for(let he of Oe){let{programConfiguration:Te,program:Re,layoutVertexBuffer:Ve,indexBuffer:Qe,uniformValues:at,terrainData:it}=he.state;Re.draw(se,oe.TRIANGLES,le,te,ve,xr.disabled,at,it,M.id,Ve,Qe,he.segments,M.paint,x.transform.zoom,Te)}})(a,d,f,g);break;case"heatmap":(function(x,E,M,I){if(M.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){let z=x.context,B=z.gl,U=Er.disabled,Z=new sn([B.ONE,B.ONE],n.aO.transparent,[!0,!0,!0,!0]);(function(se,oe,le){let te=se.gl;se.activeTexture.set(te.TEXTURE1),se.viewport.set([0,0,oe.width/4,oe.height/4]);let ve=le.heatmapFbo;if(ve)te.bindTexture(te.TEXTURE_2D,ve.colorAttachment.get()),se.bindFramebuffer.set(ve.framebuffer);else{let Oe=te.createTexture();te.bindTexture(te.TEXTURE_2D,Oe),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_2D,te.TEXTURE_MAG_FILTER,te.LINEAR),ve=le.heatmapFbo=se.createFramebuffer(oe.width/4,oe.height/4,!1,!1),function(he,Te,Re,Ve){var Qe,at;let it=he.gl,ot=(Qe=he.HALF_FLOAT)!==null&&Qe!==void 0?Qe:it.UNSIGNED_BYTE,Nt=(at=he.RGBA16F)!==null&&at!==void 0?at:it.RGBA;it.texImage2D(it.TEXTURE_2D,0,Nt,Te.width/4,Te.height/4,0,it.RGBA,ot,null),Ve.colorAttachment.set(Re)}(se,oe,Oe,ve)}})(z,x,M),z.clear({color:n.aO.transparent});for(let se=0;se<I.length;se++){let oe=I[se];if(E.hasRenderableParent(oe))continue;let le=E.getTile(oe),te=le.getBucket(M);if(!te)continue;let ve=te.programConfigurations.get(M.id),Oe=x.useProgram("heatmap",ve),{zoom:he}=x.transform;Oe.draw(z,B.TRIANGLES,Ji.disabled,U,Z,xr.disabled,sr(oe.posMatrix,le,he,M.paint.get("heatmap-intensity")),null,M.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,M.paint,x.transform.zoom,ve)}z.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(z,B){let U=z.context,Z=U.gl,se=B.heatmapFbo;if(!se)return;U.activeTexture.set(Z.TEXTURE0),Z.bindTexture(Z.TEXTURE_2D,se.colorAttachment.get()),U.activeTexture.set(Z.TEXTURE1);let oe=B.colorRampTexture;oe||(oe=B.colorRampTexture=new st(U,B.colorRamp,Z.RGBA)),oe.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(U,Z.TRIANGLES,Ji.disabled,Er.disabled,z.colorModeForRenderPass(),xr.disabled,((le,te,ve,Oe)=>{let he=n.F();n.aN(he,0,le.width,le.height,0,0,1);let Te=le.context.gl;return{u_matrix:he,u_world:[Te.drawingBufferWidth,Te.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:te.paint.get("heatmap-opacity")}})(z,B),null,B.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,B.paint,z.transform.zoom)}(x,M))})(a,d,f,g);break;case"line":(function(x,E,M,I){if(x.renderPass!=="translucent")return;let z=M.paint.get("line-opacity"),B=M.paint.get("line-width");if(z.constantOr(1)===0||B.constantOr(1)===0)return;let U=x.depthModeForSublayer(0,Ji.ReadOnly),Z=x.colorModeForRenderPass(),se=M.paint.get("line-dasharray"),oe=M.paint.get("line-pattern"),le=oe.constantOr(1),te=M.paint.get("line-gradient"),ve=M.getCrossfadeParameters(),Oe=le?"linePattern":se?"lineSDF":te?"lineGradient":"line",he=x.context,Te=he.gl,Re=!0;for(let Ve of I){let Qe=E.getTile(Ve);if(le&&!Qe.patternsLoaded())continue;let at=Qe.getBucket(M);if(!at)continue;let it=at.programConfigurations.get(M.id),ot=x.context.program.get(),Nt=x.useProgram(Oe,it),Mi=Re||Nt.program!==ot,St=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ve),ui=oe.constantOr(null);if(ui&&Qe.imageAtlas){let mi=Qe.imageAtlas,Ii=mi.patternPositions[ui.to.toString()],Pi=mi.patternPositions[ui.from.toString()];Ii&&Pi&&it.setConstantPatternPositions(Ii,Pi)}let Ai=St?Ve:null,$i=le?Co(x,Qe,M,ve,Ai):se?Ar(x,Qe,M,se,ve,Ai):te?_r(x,Qe,M,at.lineClipsArray.length,Ai):qr(x,Qe,M,Ai);if(le)he.activeTexture.set(Te.TEXTURE0),Qe.imageAtlasTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE),it.updatePaintBuffers(ve);else if(se&&(Mi||x.lineAtlas.dirty))he.activeTexture.set(Te.TEXTURE0),x.lineAtlas.bind(he);else if(te){let mi=at.gradients[M.id],Ii=mi.texture;if(M.gradientVersion!==mi.version){let Pi=256;if(M.stepInterpolant){let Ur=E.getSource().maxzoom,wr=Ve.canonical.z===Ur?Math.ceil(1<<x.transform.maxZoom-Ve.canonical.z):1;Pi=n.ac(n.aT(at.maxLineLength/n.W*1024*wr),256,he.maxTextureSize)}mi.gradient=n.aU({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:Pi,image:mi.gradient||void 0,clips:at.lineClipsArray}),mi.texture?mi.texture.update(mi.gradient):mi.texture=new st(he,mi.gradient,Te.RGBA),mi.version=M.gradientVersion,Ii=mi.texture}he.activeTexture.set(Te.TEXTURE0),Ii.bind(M.stepInterpolant?Te.NEAREST:Te.LINEAR,Te.CLAMP_TO_EDGE)}Nt.draw(he,Te.TRIANGLES,U,x.stencilModeForClipping(Ve),Z,xr.disabled,$i,St,M.id,at.layoutVertexBuffer,at.indexBuffer,at.segments,M.paint,x.transform.zoom,it,at.layoutVertexBuffer2),Re=!1}})(a,d,f,g);break;case"fill":(function(x,E,M,I){let z=M.paint.get("fill-color"),B=M.paint.get("fill-opacity");if(B.constantOr(1)===0)return;let U=x.colorModeForRenderPass(),Z=M.paint.get("fill-pattern"),se=x.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&z.constantOr(n.aO.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===se){let oe=x.depthModeForSublayer(1,x.renderPass==="opaque"?Ji.ReadWrite:Ji.ReadOnly);Qd(x,E,M,I,oe,U,!1)}if(x.renderPass==="translucent"&&M.paint.get("fill-antialias")){let oe=x.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Ji.ReadOnly);Qd(x,E,M,I,oe,U,!0)}})(a,d,f,g);break;case"fill-extrusion":(function(x,E,M,I){let z=M.paint.get("fill-extrusion-opacity");if(z!==0&&x.renderPass==="translucent"){let B=new Ji(x.context.gl.LEQUAL,Ji.ReadWrite,x.depthRangeFor3D);if(z!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Dl(x,E,M,I,B,Er.disabled,sn.disabled),Dl(x,E,M,I,B,x.stencilModeFor3D(),x.colorModeForRenderPass());else{let U=x.colorModeForRenderPass();Dl(x,E,M,I,B,Er.disabled,U)}}})(a,d,f,g);break;case"hillshade":(function(x,E,M,I){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;let z=x.context,B=x.depthModeForSublayer(0,Ji.ReadOnly),U=x.colorModeForRenderPass(),[Z,se]=x.renderPass==="translucent"?x.stencilConfigForOverlap(I):[{},I];for(let oe of se){let le=E.getTile(oe);le.needsHillshadePrepare!==void 0&&le.needsHillshadePrepare&&x.renderPass==="offscreen"?wf(x,le,M,B,Er.disabled,U):x.renderPass==="translucent"&&Gd(x,oe,le,M,B,Z[oe.overscaledZ],U)}z.viewport.set([0,0,x.width,x.height])})(a,d,f,g);break;case"raster":(function(x,E,M,I){if(x.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!I.length)return;let z=x.context,B=z.gl,U=E.getSource(),Z=x.useProgram("raster"),se=x.colorModeForRenderPass(),[oe,le]=U instanceof Mr?[{},I]:x.stencilConfigForOverlap(I),te=le[le.length-1].overscaledZ,ve=!x.options.moving;for(let Oe of le){let he=x.depthModeForSublayer(Oe.overscaledZ-te,M.paint.get("raster-opacity")===1?Ji.ReadWrite:Ji.ReadOnly,B.LESS),Te=E.getTile(Oe);Te.registerFadeDuration(M.paint.get("raster-fade-duration"));let Re=E.findLoadedParent(Oe,0),Ve=kf(Te,Re,E,M,x.transform,x.style.map.terrain),Qe,at,it=M.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;z.activeTexture.set(B.TEXTURE0),Te.texture.bind(it,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(B.TEXTURE1),Re?(Re.texture.bind(it,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Qe=Math.pow(2,Re.tileID.overscaledZ-Te.tileID.overscaledZ),at=[Te.tileID.canonical.x*Qe%1,Te.tileID.canonical.y*Qe%1]):Te.texture.bind(it,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);let ot=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Oe),Nt=ot?Oe:null,Mi=Nt?Nt.posMatrix:x.transform.calculatePosMatrix(Oe.toUnwrapped(),ve),St=Nr(Mi,at||[0,0],Qe||1,Ve,M);U instanceof Mr?Z.draw(z,B.TRIANGLES,he,Er.disabled,se,xr.disabled,St,ot,M.id,U.boundsBuffer,x.quadTriangleIndexBuffer,U.boundsSegments):Z.draw(z,B.TRIANGLES,he,oe[Oe.overscaledZ],se,xr.disabled,St,ot,M.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(a,d,f,g);break;case"background":(function(x,E,M,I){let z=M.paint.get("background-color"),B=M.paint.get("background-opacity");if(B===0)return;let U=x.context,Z=U.gl,se=x.transform,oe=se.tileSize,le=M.paint.get("background-pattern");if(x.isPatternMissing(le))return;let te=!le&&z.a===1&&B===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==te)return;let ve=Er.disabled,Oe=x.depthModeForSublayer(0,te==="opaque"?Ji.ReadWrite:Ji.ReadOnly),he=x.colorModeForRenderPass(),Te=x.useProgram(le?"backgroundPattern":"background"),Re=I||se.coveringTiles({tileSize:oe,terrain:x.style.map.terrain});le&&(U.activeTexture.set(Z.TEXTURE0),x.imageManager.bind(x.context));let Ve=M.getCrossfadeParameters();for(let Qe of Re){let at=I?Qe.posMatrix:x.transform.calculatePosMatrix(Qe.toUnwrapped()),it=le?qo(at,B,x,le,{tileID:Qe,tileSize:oe},Ve):Ts(at,B,z),ot=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Qe);Te.draw(U,Z.TRIANGLES,Oe,ve,he,xr.disabled,it,ot,M.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(a,0,f,g);break;case"custom":(function(x,E,M){let I=x.context,z=M.implementation;if(x.renderPass==="offscreen"){let B=z.prerender;B&&(x.setCustomLayerDefaults(),I.setColorMode(x.colorModeForRenderPass()),B.call(z,I.gl,x.transform.customLayerMatrix()),I.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),I.setColorMode(x.colorModeForRenderPass()),I.setStencilMode(Er.disabled);let B=z.renderingMode==="3d"?new Ji(x.context.gl.LEQUAL,Ji.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Ji.ReadOnly);I.setDepthMode(B),z.render(I.gl,x.transform.customLayerMatrix()),I.setDirty(),x.setBaseState(),I.bindFramebuffer.set(null)}})(a,0,f)}}translatePosMatrix(a,d,f,g,x){if(!f[0]&&!f[1])return a;let E=x?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(E){let z=Math.sin(E),B=Math.cos(E);f=[f[0]*B-f[1]*z,f[0]*z+f[1]*B]}let M=[x?f[0]:pi(d,f[0],this.transform.zoom),x?f[1]:pi(d,f[1],this.transform.zoom),0],I=new Float32Array(16);return n.H(I,a,M),I}saveTileTexture(a){let d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){let d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;let d=this.imageManager.getPattern(a.from.toString()),f=this.imageManager.getPattern(a.to.toString());return!d||!f}useProgram(a,d){this.cache=this.cache||{};let f=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Me(this.context,ce[a],d,Xn[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new st(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class Na{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,f){let g=Math.pow(2,f),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{let I=1/(M=n.af([],M,a))[3]/d*g;return n.a$(M,M,[I,I,1/M[3],I])}),E=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{let I=function(Z,se){var oe=se[0],le=se[1],te=se[2],ve=oe*oe+le*le+te*te;return ve>0&&(ve=1/Math.sqrt(ve)),Z[0]=se[0]*ve,Z[1]=se[1]*ve,Z[2]=se[2]*ve,Z}([],function(Z,se,oe){var le=se[0],te=se[1],ve=se[2],Oe=oe[0],he=oe[1],Te=oe[2];return Z[0]=te*Te-ve*he,Z[1]=ve*Oe-le*Te,Z[2]=le*he-te*Oe,Z}([],xe([],x[M[0]],x[M[1]]),xe([],x[M[2]],x[M[1]]))),z=-((B=I)[0]*(U=x[M[1]])[0]+B[1]*U[1]+B[2]*U[2]);var B,U;return I.concat(z)});return new Na(x,E)}}class zl{constructor(a,d){this.min=a,this.max=d,this.center=function(f,g,x){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,x){return f[0]=g[0]+x[0],f[1]=g[1]+x[1],f[2]=g[2]+x[2],f}([],this.min,this.max))}quadrant(a){let d=[a%2==0,a<2],f=je(this.min),g=je(this.max);for(let x=0;x<d.length;x++)f[x]=d[x]?this.min[x]:this.center[x],g[x]=d[x]?this.center[x]:this.max[x];return g[2]=this.max[2],new zl(f,g)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){let d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],f=!0;for(let g=0;g<a.planes.length;g++){let x=a.planes[g],E=0;for(let M=0;M<d.length;M++)n.b0(x,d[M])>=0&&E++;if(E===0)return 0;E!==d.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let x=Number.MAX_VALUE,E=-Number.MAX_VALUE;for(let M=0;M<a.points.length;M++){let I=a.points[M][g]-this.min[g];x=Math.min(x,I),E=Math.max(E,I)}if(E<0||x>this.max[g]-this.min[g])return 0}return 1}}class fc{constructor(a=0,d=0,f=0,g=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=f,this.right=g}interpolate(a,d,f){return d.top!=null&&a.top!=null&&(this.top=n.z.number(a.top,d.top,f)),d.bottom!=null&&a.bottom!=null&&(this.bottom=n.z.number(a.bottom,d.bottom,f)),d.left!=null&&a.left!=null&&(this.left=n.z.number(a.left,d.left,f)),d.right!=null&&a.right!=null&&(this.right=n.z.number(a.right,d.right,f)),this}getCenter(a,d){let f=n.ac((this.left+a-this.right)/2,0,a),g=n.ac((this.top+d-this.bottom)/2,0,d);return new n.P(f,g)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new fc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let Jd=85.051129;class Cu{constructor(a,d,f,g,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new n.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fc,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){let a=new Cu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new n.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){let d=-n.b1(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var f=new n.A(4);return n.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,x){var E=g[0],M=g[1],I=g[2],z=g[3],B=Math.sin(x),U=Math.cos(x);f[0]=E*U+I*B,f[1]=M*U+z*B,f[2]=E*-B+I*U,f[3]=M*-B+z*U}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){let d=n.ac(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){let d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,f){this._unmodified=!1,this._edgeInsets.interpolate(a,d,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){let d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){let d=[new n.b2(0,a)];if(this._renderWorldCopies){let f=this.pointCoordinate(new n.P(0,0)),g=this.pointCoordinate(new n.P(this.width,0)),x=this.pointCoordinate(new n.P(this.width,this.height)),E=this.pointCoordinate(new n.P(0,this.height)),M=Math.floor(Math.min(f.x,g.x,x.x,E.x)),I=Math.floor(Math.max(f.x,g.x,x.x,E.x)),z=1;for(let B=M-z;B<=I+z;B++)B!==0&&d.push(new n.b2(B,a))}return d}coveringTiles(a){var d,f;let g=this.coveringZoomLevel(a),x=g;if(a.minzoom!==void 0&&g<a.minzoom)return[];a.maxzoom!==void 0&&g>a.maxzoom&&(g=a.maxzoom);let E=this.pointCoordinate(this.getCameraPoint()),M=n.Y.fromLngLat(this.center),I=Math.pow(2,g),z=[I*E.x,I*E.y,0],B=[I*M.x,I*M.y,0],U=Na.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g),Z=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Z=g);let se=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,oe=he=>({aabb:new zl([he*I,0,0],[(he+1)*I,I,0]),zoom:0,x:0,y:0,wrap:he,fullyVisible:!1}),le=[],te=[],ve=g,Oe=a.reparseOverscaled?x:g;if(this._renderWorldCopies)for(let he=1;he<=3;he++)le.push(oe(-he)),le.push(oe(he));for(le.push(oe(0));le.length>0;){let he=le.pop(),Te=he.x,Re=he.y,Ve=he.fullyVisible;if(!Ve){let Nt=he.aabb.intersects(U);if(Nt===0)continue;Ve=Nt===2}let Qe=a.terrain?z:B,at=he.aabb.distanceX(Qe),it=he.aabb.distanceY(Qe),ot=Math.max(Math.abs(at),Math.abs(it));if(he.zoom===ve||ot>se+(1<<ve-he.zoom)-2&&he.zoom>=Z){let Nt=ve-he.zoom,Mi=z[0]-.5-(Te<<Nt),St=z[1]-.5-(Re<<Nt);te.push({tileID:new n.Q(he.zoom===ve?Oe:he.zoom,he.wrap,he.zoom,Te,Re),distanceSq:Le([B[0]-.5-Te,B[1]-.5-Re]),tileDistanceToCamera:Math.sqrt(Mi*Mi+St*St)})}else for(let Nt=0;Nt<4;Nt++){let Mi=(Te<<1)+Nt%2,St=(Re<<1)+(Nt>>1),ui=he.zoom+1,Ai=he.aabb.quadrant(Nt);if(a.terrain){let $i=new n.Q(ui,he.wrap,ui,Mi,St),mi=a.terrain.getMinMaxElevation($i),Ii=(d=mi.minElevation)!==null&&d!==void 0?d:this.elevation,Pi=(f=mi.maxElevation)!==null&&f!==void 0?f:this.elevation;Ai=new zl([Ai.min[0],Ai.min[1],Ii],[Ai.max[0],Ai.max[1],Pi])}le.push({aabb:Ai,zoom:ui,x:Mi,y:St,wrap:he.wrap,fullyVisible:Ve})}}return te.sort((he,Te)=>he.distanceSq-Te.distanceSq).map(he=>he.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){let d=n.ac(a.lat,-85.051129,Jd);return new n.P(n.N(a.lng)*this.worldSize,n.O(d)*this.worldSize)}unproject(a){return new n.Y(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){let d=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,a),x=a.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-x))return;let E=f+d-x,M=Math.cos(this._pitch)*this.cameraToCenterDistance/E/n.b3(1,g.lat),I=this.scaleZoom(M/this.tileSize);this._elevation=x,this._center=g,this.zoom=I}setLocationAtPoint(a,d){let f=this.pointCoordinate(d),g=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(a),E=new n.Y(x.x-(f.x-g.x),x.y-(f.y-g.y));this.center=this.coordinateLocation(E),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return n.Y.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){let Z=d.pointCoordinate(a);if(Z!=null)return Z}let f=[a.x,a.y,0,1],g=[a.x,a.y,1,1];n.af(f,f,this.pixelMatrixInverse),n.af(g,g,this.pixelMatrixInverse);let x=f[3],E=g[3],M=f[1]/x,I=g[1]/E,z=f[2]/x,B=g[2]/E,U=z===B?0:(0-z)/(B-z);return new n.Y(n.z.number(f[0]/x,g[0]/E,U)/this.worldSize,n.z.number(M,I,U)/this.worldSize)}coordinatePoint(a,d=0,f=this.pixelMatrix){let g=[a.x*this.worldSize,a.y*this.worldSize,d,1];return n.af(g,g,f),new n.P(g[0]/g[3],g[1]/g[3])}getBounds(){let a=Math.max(0,this.height/2-this.getHorizon());return new lt().extend(this.pointLocation(new n.P(0,a))).extend(this.pointLocation(new n.P(this.width,a))).extend(this.pointLocation(new n.P(this.width,this.height))).extend(this.pointLocation(new n.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new lt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Jd])}calculatePosMatrix(a,d=!1){let f=a.key,g=d?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];let x=a.canonical,E=this.worldSize/this.zoomScale(x.z),M=x.x+Math.pow(2,x.z)*a.wrap,I=n.an(new Float64Array(16));return n.H(I,I,[M*E,x.y*E,0]),n.J(I,I,[E/n.W,E/n.W,1]),n.K(I,d?this.alignedProjMatrix:this.projMatrix,I),g[f]=new Float32Array(I),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,d){d=n.ac(+d,this.minZoom,this.maxZoom);let f={center:new n.M(a.lng,a.lat),zoom:d},g=this.lngRange;if(!this._renderWorldCopies&&g===null){let he=179.9999999999;g=[-he,he]}let x=this.tileSize*this.zoomScale(f.zoom),E=0,M=x,I=0,z=x,B=0,U=0,{x:Z,y:se}=this.size;if(this.latRange){let he=this.latRange;E=n.O(he[1])*x,M=n.O(he[0])*x,M-E<se&&(B=se/(M-E))}g&&(I=n.b1(n.N(g[0])*x,0,x),z=n.b1(n.N(g[1])*x,0,x),z<I&&(z+=x),z-I<Z&&(U=Z/(z-I)));let{x:oe,y:le}=this.project.call({worldSize:x},a),te,ve,Oe=Math.max(U||0,B||0);if(Oe){let he=new n.P(U?(z+I)/2:oe,B?(M+E)/2:le);return f.center=this.unproject.call({worldSize:x},he).wrap(),f.zoom+=this.scaleZoom(Oe),f}if(this.latRange){let he=se/2;le-he<E&&(ve=E+he),le+he>M&&(ve=M-he)}if(g){let he=(I+z)/2,Te=oe;this._renderWorldCopies&&(Te=n.b1(oe,he-x/2,he+x/2));let Re=Z/2;Te-Re<I&&(te=I+Re),Te+Re>z&&(te=z-Re)}if(te!==void 0||ve!==void 0){let he=new n.P(te??oe,ve??le);f.center=this.unproject.call({worldSize:x},he).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let a=this._unmodified,{center:d,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=f,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;let a=this.centerOffset,d=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=n.b3(1,this.center.lat)*this.worldSize;let g=n.an(new Float64Array(16));n.J(g,g,[this.width/2,-this.height/2,1]),n.H(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=n.an(new Float64Array(16)),n.J(g,g,[1,-1,1]),n.H(g,g,[-1,-1,0]),n.J(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;let x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),E=Math.min(this.elevation,this.minElevationForCurrentTile),M=x-E*this._pixelPerMeter/Math.cos(this._pitch),I=E<0?M:x,z=Math.PI/2+this._pitch,B=this._fov*(.5+a.y/this.height),U=Math.sin(B)*I/Math.sin(n.ac(Math.PI-z-B,.01,Math.PI-.01)),Z=this.getHorizon(),se=2*Math.atan(Z/this.cameraToCenterDistance)*(.5+a.y/(2*Z)),oe=Math.sin(se)*I/Math.sin(n.ac(Math.PI-z-se,.01,Math.PI-.01)),le=Math.min(U,oe),te=1.01*(Math.cos(Math.PI/2-this._pitch)*le+I),ve=this.height/50;g=new Float64Array(16),n.b4(g,this._fov,this.width/this.height,ve,te),g[8]=2*-a.x/this.width,g[9]=2*a.y/this.height,n.J(g,g,[1,-1,1]),n.H(g,g,[0,0,-this.cameraToCenterDistance]),n.b5(g,g,this._pitch),n.ad(g,g,this.angle),n.H(g,g,[-d,-f,0]),this.mercatorMatrix=n.J([],g,[this.worldSize,this.worldSize,this.worldSize]),n.J(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=n.K(new Float64Array(16),this.labelPlaneMatrix,g),n.H(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=n.ar([],g),this.pixelMatrix3D=n.K(new Float64Array(16),this.labelPlaneMatrix,g);let Oe=this.width%2/2,he=this.height%2/2,Te=Math.cos(this.angle),Re=Math.sin(this.angle),Ve=d-Math.round(d)+Te*Oe+Re*he,Qe=f-Math.round(f)+Te*he+Re*Oe,at=new Float64Array(g);if(n.H(at,at,[Ve>.5?Ve-1:Ve,Qe>.5?Qe-1:Qe,0]),this.alignedProjMatrix=at,g=n.ar(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let a=this.pointCoordinate(new n.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return n.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new n.P(0,a))}getCameraQueryGeometry(a){let d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let f=d.x,g=d.y,x=d.x,E=d.y;for(let M of a)f=Math.min(f,M.x),g=Math.min(g,M.y),x=Math.max(x,M.x),E=Math.max(E,M.y);return[new n.P(f,g),new n.P(x,g),new n.P(x,E),new n.P(f,E),new n.P(f,g)]}}lngLatToCameraDepth(a,d){let f=this.locationCoordinate(a),g=[f.x*this.worldSize,f.y*this.worldSize,d,1];return n.af(g,g,this.projMatrix),g[2]/g[3]}}function Xd(v,a){let d,f=!1,g=null,x=null,E=()=>{g=null,f&&(v.apply(x,d),g=setTimeout(E,a),f=!1)};return(...M)=>(f=!0,x=this,d=M,g||E(),g)}class Yd{constructor(a){this._getCurrentHash=()=>{let d=window.location.hash.replace("#","");if(this._hashName){let f;return d.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{let d=this._getCurrentHash();if(d.length>=3&&!d.some(f=>isNaN(f))){let f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:f,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Xd(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){let d=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,g),E=Math.round(d.lng*x)/x,M=Math.round(d.lat*x)/x,I=this._map.getBearing(),z=this._map.getPitch(),B="";if(B+=a?`/${E}/${M}/${f}`:`${f}/${M}/${E}`,(I||z)&&(B+="/"+Math.round(10*I)/10),z&&(B+=`/${Math.round(z)}`),this._hashName){let U=this._hashName,Z=!1,se=window.location.hash.slice(1).split("&").map(oe=>{let le=oe.split("=")[0];return le===U?(Z=!0,`${le}=${B}`):oe}).filter(oe=>oe);return Z||se.push(`${U}=${B}`),`#${se.join("&")}`}return`#${B}`}}let Ms={linearity:.3,easing:n.b6(0,0,.3,1)},Cf=n.e({deceleration:2500,maxSpeed:1400},Ms),Ef=n.e({deceleration:20,maxSpeed:1400},Ms),Tf=n.e({deceleration:1e3,maxSpeed:360},Ms),Mf=n.e({deceleration:1e3,maxSpeed:90},Ms);class Af{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:a})}_drainInertiaBuffer(){let a=this._inertiaBuffer,d=b.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let d={zoom:0,bearing:0,pitch:0,pan:new n.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:x}of this._inertiaBuffer)d.zoom+=x.zoomDelta||0,d.bearing+=x.bearingDelta||0,d.pitch+=x.pitchDelta||0,x.panDelta&&d.pan._add(x.panDelta),x.around&&(d.around=x.around),x.pinchAround&&(d.pinchAround=x.pinchAround);let f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(d.pan.mag()){let x=gc(d.pan.mag(),f,n.e({},Cf,a||{}));g.offset=d.pan.mult(x.amount/d.pan.mag()),g.center=this._map.transform.center,mc(g,x)}if(d.zoom){let x=gc(d.zoom,f,Ef);g.zoom=this._map.transform.zoom+x.amount,mc(g,x)}if(d.bearing){let x=gc(d.bearing,f,Tf);g.bearing=this._map.transform.bearing+n.ac(x.amount,-179,179),mc(g,x)}if(d.pitch){let x=gc(d.pitch,f,Mf);g.pitch=this._map.transform.pitch+x.amount,mc(g,x)}if(g.zoom||g.bearing){let x=d.pinchAround===void 0?d.around:d.pinchAround;g.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),n.e(g,{noMoveStart:!0})}}function mc(v,a){(!v.duration||v.duration<a.duration)&&(v.duration=a.duration,v.easing=a.easing)}function gc(v,a,d){let{maxSpeed:f,linearity:g,deceleration:x}=d,E=n.ac(v*g/(a/1e3),-f,f),M=Math.abs(E)/(x*g);return{easing:d.easing,duration:1e3*M,amount:E*(M/2)}}class Ln extends n.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,f,g={}){let x=_.mousePos(d.getCanvas(),f),E=d.unproject(x);super(a,n.e({point:x,lngLat:E,originalEvent:f},g)),this._defaultPrevented=!1,this.target=d}}class Nl extends n.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,f){let g=a==="touchend"?f.changedTouches:f.touches,x=_.touchPos(d.getCanvasContainer(),g),E=x.map(I=>d.unproject(I)),M=x.reduce((I,z,B,U)=>I.add(z.div(U.length)),new n.P(0,0));super(a,{points:x,point:M,lngLats:E,lngLat:d.unproject(M),originalEvent:f}),this._defaultPrevented=!1}}class us extends n.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,f){super(a,{originalEvent:f}),this._defaultPrevented=!1}}class As{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new us(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new Ln(a.type,this._map,a))}mouseup(a){this._map.fire(new Ln(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Ln(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ln(a.type,this._map,a))}mouseover(a){this._map.fire(new Ln(a.type,this._map,a))}mouseout(a){this._map.fire(new Ln(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Nl(a.type,this._map,a))}touchmove(a){this._map.fire(new Nl(a.type,this._map,a))}touchend(a){this._map.fire(new Nl(a.type,this._map,a))}touchcancel(a){this._map.fire(new Nl(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class If{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ln(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ln("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ln(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class To{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(n.P.convert(a),this._map.terrain)}}class Ol{constructor(a,d){this._map=a,this._tr=new To(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(_.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;let f=d;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;let g=this._startPos;this._lastPos=f,this._box||(this._box=_.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));let x=Math.min(g.x,f.x),E=Math.max(g.x,f.x),M=Math.min(g.y,f.y),I=Math.max(g.y,f.y);_.setTransform(this._box,`translate(${x}px,${M}px)`),this._box.style.width=E-x+"px",this._box.style.height=I-M+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;let f=this._startPos,g=d;if(this.reset(),_.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new n.k("boxzoomend",{originalEvent:a})),{cameraAnimation:x=>x.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new n.k(a,{originalEvent:d}))}}function eh(v,a){if(v.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${a.length}`);let d={};for(let f=0;f<v.length;f++)d[v[f].identifier]=a[f];return d}class m1{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){let x=new n.P(0,0);for(let E of g)x._add(E);return x.div(g.length)}(d),this.touches=eh(f,d)))}touchmove(a,d,f){if(this.aborted||!this.centroid)return;let g=eh(f,d);for(let x in this.touches){let E=g[x];(!E||E.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(a,d,f){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){let g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class th{constructor(a){this.singleTap=new m1(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,f){this.singleTap.touchstart(a,d,f)}touchmove(a,d,f){this.singleTap.touchmove(a,d,f)}touchend(a,d,f){let g=this.singleTap.touchend(a,d,f);if(g){let x=a.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(g)<30;if(x&&E||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Pf{constructor(a){this._tr=new To(a),this._zoomIn=new th({numTouches:1,numTaps:2}),this._zoomOut=new th({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,f){this._zoomIn.touchstart(a,d,f),this._zoomOut.touchstart(a,d,f)}touchmove(a,d,f){this._zoomIn.touchmove(a,d,f),this._zoomOut.touchmove(a,d,f)}touchend(a,d,f){let g=this._zoomIn.touchend(a,d,f),x=this._zoomOut.touchend(a,d,f),E=this._tr;return g?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(g)},{originalEvent:a})}):x?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(x)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Js{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){let d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;let f=this._lastPoint;if(!f)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);let g=d.length?d[0]:d;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&_.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let ga={0:1,2:2};class Bt{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){let d=_.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,f){let g=ga[f];return d.buttons===void 0||(d.buttons&g)!==g}(a,this._eventButton)}isValidEndEvent(a){return _.mouseButton(a)===this._eventButton}}class ih{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}let Oa=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=function(a){a.preventDefault()}},Bl=({enable:v,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{let f=new Bt({checkCorrectEvent:g=>_.mouseButton(g)===0&&g.ctrlKey||_.mouseButton(g)===2});return new Js({clickTolerance:a,move:(g,x)=>({bearingDelta:(x.x-g.x)*d}),moveStateManager:f,enable:v,assignEvents:Oa})},rh=({enable:v,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{let f=new Bt({checkCorrectEvent:g=>_.mouseButton(g)===0&&g.ctrlKey||_.mouseButton(g)===2});return new Js({clickTolerance:a,move:(g,x)=>({pitchDelta:(x.y-g.y)*d}),moveStateManager:f,enable:v,assignEvents:Oa})};class Ft{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new n.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(a,d,f){return this._calculateTransform(a,d,f)}touchmove(a,d,f){if(this._active&&!(f.length<this.minTouchs()))return a.preventDefault(),this._calculateTransform(a,d,f)}touchend(a,d,f){this._calculateTransform(a,d,f),this._active&&f.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,f){f.length>0&&(this._active=!0);let g=eh(f,d),x=new n.P(0,0),E=new n.P(0,0),M=0;for(let z in g){let B=g[z],U=this._touches[z];U&&(x._add(B),E._add(B.sub(U)),M++,g[z]=B)}if(this._touches=g,M<this.minTouchs()||!E.mag())return;let I=E.div(M);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(M),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,f){if(!this._firstTwoTouches)return;a.preventDefault();let[g,x]=this._firstTwoTouches,E=Eu(f,d,g),M=Eu(f,d,x);if(!E||!M)return;let I=this._aroundCenter?null:E.add(M).div(2);return this._move([E,M],I,a)}touchend(a,d,f){if(!this._firstTwoTouches)return;let[g,x]=this._firstTwoTouches,E=Eu(f,d,g),M=Eu(f,d,x);E&&M||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Eu(v,a,d){for(let f=0;f<v.length;f++)if(v[f].identifier===d)return a[f]}function Df(v,a){return Math.log(v/a)/Math.LN2}class Tu extends yc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){let f=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Df(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Df(this._distance,f),pinchAround:d}}}function nh(v,a){return 180*v.angleWith(a)/Math.PI}class oh extends yc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,f){let g=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nh(this._vector,g),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());let d=25/(Math.PI*this._minDiameter)*360,f=nh(a,this._startVector);return Math.abs(f)<d}}function sh(v){return Math.abs(v.y)>Math.abs(v.x)}class Lf extends yc{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,f){super.touchstart(a,d,f),this._currentTouchCount=f.length}_start(a){this._lastPoints=a,sh(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let g=a[0].sub(this._lastPoints[0]),x=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,x,f.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(g.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,f){if(this._valid!==void 0)return this._valid;let g=a.mag()>=2,x=d.mag()>=2;if(!g&&!x)return;if(!g||!x)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;let E=a.y>0==d.y>0;return sh(a)&&sh(d)&&E}}let Ba={panStep:100,bearingStep:15,pitchStep:10};class Ir{constructor(a){this._tr=new To(a);let d=Ba;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,f=0,g=0,x=0,E=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?f=-1:(a.preventDefault(),x=-1);break;case 39:a.shiftKey?f=1:(a.preventDefault(),x=1);break;case 38:a.shiftKey?g=1:(a.preventDefault(),E=-1);break;case 40:a.shiftKey?g=-1:(a.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:M=>{let I=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:Mu,zoom:d?Math.round(I.zoom)+d*(a.shiftKey?2:1):I.zoom,bearing:I.bearing+f*this._bearingStep,pitch:I.pitch+g*this._pitchStep,offset:[-x*this._panStep,-E*this._panStep],center:I.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Mu(v){return v*(2-v)}let Au=4.000244140625;class ah{constructor(a,d){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=a,this._tr=new To(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!a[this._map.cooperativeGestures._bypassKey])return;let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY,f=b.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,d!==0&&d%Au==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(g*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let d=_.mousePos(this._map.getCanvas(),a),f=this._tr;this._around=d.y>f.transform.height/2-f.transform.getHorizon()?n.M.convert(this._aroundCenter?f.center:f.unproject(d)):n.M.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let a=this._tr.transform;if(this._delta!==0){let M=this._type==="wheel"&&Math.abs(this._delta)>Au?this._wheelZoomRate:this._defaultZoomRate,I=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&I!==0&&(I=1/I);let z=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(z*I))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,f=this._startZoom,g=this._easing,x,E=!1;if(this._type==="wheel"&&f&&g){let M=Math.min((b.now()-this._lastWheelEventTime)/200,1),I=g(M);x=n.z.number(f,d,I),M<1?this._frameId||(this._frameId=!0):E=!0}else x=d,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!E,zoomDelta:x-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=n.b7;if(this._prevEase){let f=this._prevEase,g=(b.now()-f.start)/f.duration,x=f.easing(g+.01)-f.easing(g),E=.27/Math.sqrt(x*x+1e-4)*.01,M=Math.sqrt(.0729-E*E);d=n.b6(E,M,.25,1)}return this._prevEase={start:b.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class lh{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ff{constructor(a){this._tr=new To(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class g1{constructor(){this._tap=new th({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,f){if(!this._swipePoint)if(this._tapTime){let g=d[0],x=a.timeStamp-this._tapTime<500,E=this._tapPoint.dist(g)<30;x&&E?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(a,d,f)}touchmove(a,d,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;let g=d[0],x=g.y-this._swipePoint.y;return this._swipePoint=g,a.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(a,d,f)}touchend(a,d,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{let g=this._tap.touchend(a,d,f);g&&(this._tapTime=a.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fs{constructor(a,d,f){this._el=a,this._mousePan=d,this._touchPan=f}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class bc{constructor(a,d,f){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ii{constructor(a,d,f,g){this._el=a,this._touchZoom=d,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class li{constructor(a,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=_.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=d,this._container.appendChild(g);let x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=f,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(_.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(a){this._onCooperativeGesture(a.touches.length===1)}wheel(a){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!a[this._bypassKey])}_onCooperativeGesture(a){this._enabled&&a&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Ra=v=>v.zoom||v.drag||v.pitch||v.rotate;class ch extends n.k{}function vc(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Mo{constructor(a,d){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,x)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let E=g.type==="renderFrame"?void 0:g,M={needsRenderFrame:!1},I={},z={},B=g.touches,U=B?this._getMapTouches(B):void 0,Z=U?_.touchPos(this._map.getCanvas(),U):_.mousePos(this._map.getCanvas(),g);for(let{handlerName:le,handler:te,allowed:ve}of this._handlers){if(!te.isEnabled())continue;let Oe;this._blockedByActive(z,ve,le)?te.reset():te[x||g.type]&&(Oe=te[x||g.type](g,Z,U),this.mergeHandlerResult(M,I,Oe,le,E),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||te.isActive())&&(z[le]=te)}let se={};for(let le in this._previousActiveHandlers)z[le]||(se[le]=E);this._previousActiveHandlers=z,(Object.keys(se).length||vc(M))&&(this._changes.push([M,I,se]),this._triggerRenderFrame()),(Object.keys(z).length||vc(M))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:oe}=M;oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],oe(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Af(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);let f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(let[g,x,E]of this._listeners)_.addEventListener(g,x,g===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(let[a,d,f]of this._listeners)_.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(a){let d=this._map,f=d.getCanvasContainer();this._add("mapEvent",new As(d,a));let g=d.boxZoom=new Ol(d,a);this._add("boxZoom",g),a.interactive&&a.boxZoom&&g.enable();let x=d.cooperativeGestures=new li(d,a.cooperativeGestures);this._add("cooperativeGestures",x),a.cooperativeGestures&&x.enable();let E=new Pf(d),M=new Ff(d);d.doubleClickZoom=new lh(M,E),this._add("tapZoom",E),this._add("clickZoom",M),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();let I=new g1;this._add("tapDragZoom",I);let z=d.touchPitch=new Lf(d);this._add("touchPitch",z),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);let B=Bl(a),U=rh(a);d.dragRotate=new bc(a,B,U),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();let Z=(({enable:Oe,clickTolerance:he})=>{let Te=new Bt({checkCorrectEvent:Re=>_.mouseButton(Re)===0&&!Re.ctrlKey});return new Js({clickTolerance:he,move:(Re,Ve)=>({around:Ve,panDelta:Ve.sub(Re)}),activateOnStart:!0,moveStateManager:Te,enable:Oe,assignEvents:Oa})})(a),se=new Ft(a,d);d.dragPan=new fs(f,Z,se),this._add("mousePan",Z),this._add("touchPan",se,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);let oe=new oh,le=new Tu;d.touchZoomRotate=new ii(f,le,oe,I),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);let te=d.scrollZoom=new ah(d,()=>this._triggerRenderFrame());this._add("scrollZoom",te,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);let ve=d.keyboard=new Ir(d);this._add("keyboard",ve),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new If(d))}_add(a,d,f){this._handlers.push({handlerName:a,handler:d,allowed:f}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(let{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(let{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ra(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,f){for(let g in a)if(g!==f&&(!d||d.indexOf(g)<0))return!0;return!1}_getMapTouches(a){let d=[];for(let f of a)this._el.contains(f.target)&&d.push(f);return d}mergeHandlerResult(a,d,f,g,x){if(!f)return;n.e(a,f);let E={handlerName:g,originalEvent:f.originalEvent||x};f.zoomDelta!==void 0&&(d.zoom=E),f.panDelta!==void 0&&(d.drag=E),f.pitchDelta!==void 0&&(d.pitch=E),f.bearingDelta!==void 0&&(d.rotate=E)}_applyChanges(){let a={},d={},f={};for(let[g,x,E]of this._changes)g.panDelta&&(a.panDelta=(a.panDelta||new n.P(0,0))._add(g.panDelta)),g.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(a.around=g.around),g.pinchAround!==void 0&&(a.pinchAround=g.pinchAround),g.noInertia&&(a.noInertia=g.noInertia),n.e(d,x),n.e(f,E);this._updateMapTransform(a,d,f),this._changes=[]}_updateMapTransform(a,d,f){let g=this._map,x=g._getTransformForUpdate(),E=g.terrain;if(!(vc(a)||E&&this._terrainMovement))return this._fireEvents(d,f,!0);let{panDelta:M,zoomDelta:I,bearingDelta:z,pitchDelta:B,around:U,pinchAround:Z}=a;Z!==void 0&&(U=Z),g._stop(!0),U=U||g.transform.centerPoint;let se=x.pointLocation(M?U.sub(M):U);z&&(x.bearing+=z),B&&(x.pitch+=B),I&&(x.zoom+=I),E?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(M)):x.setLocationAtPoint(se,U):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(se,U),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(g.terrain)})):x.setLocationAtPoint(se,U),g._applyUpdatedTransform(x),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,f,!0)}_fireEvents(a,d,f){let g=Ra(this._eventsInProgress),x=Ra(a),E={};for(let B in a){let{originalEvent:U}=a[B];this._eventsInProgress[B]||(E[`${B}start`]=U),this._eventsInProgress[B]=a[B]}!g&&x&&this._fireEvent("movestart",x.originalEvent);for(let B in E)this._fireEvent(B,E[B]);x&&this._fireEvent("move",x.originalEvent);for(let B in a){let{originalEvent:U}=a[B];this._fireEvent(B,U)}let M={},I;for(let B in this._eventsInProgress){let{handlerName:U,originalEvent:Z}=this._eventsInProgress[B];this._handlersById[U].isActive()||(delete this._eventsInProgress[B],I=d[U]||Z,M[`${B}end`]=I)}for(let B in M)this._fireEvent(B,M[B]);let z=Ra(this._eventsInProgress);if(f&&(g||x)&&!z){this._updatingCamera=!0;let B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),U=Z=>Z!==0&&-this._bearingSnap<Z&&Z<this._bearingSnap;!B||!B.essential&&b.prefersReducedMotion?(this._map.fire(new n.k("moveend",{originalEvent:I})),U(this._map.getBearing())&&this._map.resetNorth()):(U(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new n.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new ch("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zf extends n.E{constructor(a,d){super(),this._renderFrameCallback=()=>{let f=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new n.M(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,f){return a=n.P.convert(a).mult(-1),this.panTo(this.transform.center,n.e({offset:a},d),f)}panTo(a,d,f){return this.easeTo(n.e({center:a},d),f)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,f){return this.easeTo(n.e({zoom:a},d),f)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,f){return this.easeTo(n.e({bearing:a},d),f)}resetNorth(a,d){return this.rotateTo(0,n.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(n.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=lt.convert(a);let f=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),f,d)}_cameraForBoxAndBearing(a,d,f,g){let x={top:0,bottom:0,right:0,left:0};if(typeof(g=n.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){let Nt=g.padding;g.padding={top:Nt,bottom:Nt,right:Nt,left:Nt}}g.padding=n.e(x,g.padding);let E=this.transform,M=E.padding,I=new lt(a,d),z=E.project(I.getNorthWest()),B=E.project(I.getNorthEast()),U=E.project(I.getSouthEast()),Z=E.project(I.getSouthWest()),se=n.b8(-f),oe=z.rotate(se),le=B.rotate(se),te=U.rotate(se),ve=Z.rotate(se),Oe=new n.P(Math.max(oe.x,le.x,ve.x,te.x),Math.max(oe.y,le.y,ve.y,te.y)),he=new n.P(Math.min(oe.x,le.x,ve.x,te.x),Math.min(oe.y,le.y,ve.y,te.y)),Te=Oe.sub(he),Re=(E.width-(M.left+M.right+g.padding.left+g.padding.right))/Te.x,Ve=(E.height-(M.top+M.bottom+g.padding.top+g.padding.bottom))/Te.y;if(Ve<0||Re<0)return void n.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Qe=Math.min(E.scaleZoom(E.scale*Math.min(Re,Ve)),g.maxZoom),at=n.P.convert(g.offset),it=new n.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(n.b8(f)),ot=at.add(it).mult(E.scale/E.zoomScale(Qe));return{center:E.unproject(z.add(U).div(2).sub(ot)),zoom:Qe,bearing:f}}fitBounds(a,d,f){return this._fitInternal(this.cameraForBounds(a,d),d,f)}fitScreenCoordinates(a,d,f,g,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(n.P.convert(a)),this.transform.pointLocation(n.P.convert(d)),f,g),g,x)}_fitInternal(a,d,f){return a?(delete(d=n.e(a,d)).padding,d.linear?this.easeTo(d,f):this.flyTo(d,f)):this}jumpTo(a,d){this.stop();let f=this._getTransformForUpdate(),g=!1,x=!1,E=!1;return"zoom"in a&&f.zoom!==+a.zoom&&(g=!0,f.zoom=+a.zoom),a.center!==void 0&&(f.center=n.M.convert(a.center)),"bearing"in a&&f.bearing!==+a.bearing&&(x=!0,f.bearing=+a.bearing),"pitch"in a&&f.pitch!==+a.pitch&&(E=!0,f.pitch=+a.pitch),a.padding==null||f.isPaddingEqual(a.padding)||(f.padding=a.padding),this._applyUpdatedTransform(f),this.fire(new n.k("movestart",d)).fire(new n.k("move",d)),g&&this.fire(new n.k("zoomstart",d)).fire(new n.k("zoom",d)).fire(new n.k("zoomend",d)),x&&this.fire(new n.k("rotatestart",d)).fire(new n.k("rotate",d)).fire(new n.k("rotateend",d)),E&&this.fire(new n.k("pitchstart",d)).fire(new n.k("pitch",d)).fire(new n.k("pitchend",d)),this.fire(new n.k("moveend",d))}calculateCameraOptionsFromTo(a,d,f,g=0){let x=n.Y.fromLngLat(a,d),E=n.Y.fromLngLat(f,g),M=E.x-x.x,I=E.y-x.y,z=E.z-x.z,B=Math.hypot(M,I,z);if(B===0)throw new Error("Can't calculate camera options with same From and To");let U=Math.hypot(M,I),Z=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),se=180*Math.atan2(M,-I)/Math.PI,oe=180*Math.acos(U/B)/Math.PI;return oe=z<0?90-oe:90+oe,{center:E.toLngLat(),zoom:Z,pitch:oe,bearing:se}}easeTo(a,d){var f;this._stop(!1,a.easeId),((a=n.e({offset:[0,0],duration:500,easing:n.b7},a)).animate===!1||!a.essential&&b.prefersReducedMotion)&&(a.duration=0);let g=this._getTransformForUpdate(),x=this.getZoom(),E=this.getBearing(),M=this.getPitch(),I=this.getPadding(),z="bearing"in a?this._normalizeBearing(a.bearing,E):E,B="pitch"in a?+a.pitch:M,U="padding"in a?a.padding:g.padding,Z=n.P.convert(a.offset),se=g.centerPoint.add(Z),oe=g.pointLocation(se),{center:le,zoom:te}=g.getConstrained(n.M.convert(a.center||oe),(f=a.zoom)!==null&&f!==void 0?f:x);this._normalizeCenter(le);let ve=g.project(oe),Oe=g.project(le).sub(ve),he=g.zoomScale(te-x),Te,Re;a.around&&(Te=n.M.convert(a.around),Re=g.locationPoint(Te));let Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||te!==x,this._rotating=this._rotating||E!==z,this._pitching=this._pitching||B!==M,this._padding=!g.isPaddingEqual(U),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,Ve),this.terrain&&this._prepareElevation(le),this._ease(Qe=>{if(this._zooming&&(g.zoom=n.z.number(x,te,Qe)),this._rotating&&(g.bearing=n.z.number(E,z,Qe)),this._pitching&&(g.pitch=n.z.number(M,B,Qe)),this._padding&&(g.interpolatePadding(I,U,Qe),se=g.centerPoint.add(Z)),this.terrain&&!a.freezeElevation&&this._updateElevation(Qe),Te)g.setLocationAtPoint(Te,Re);else{let at=g.zoomScale(g.zoom-x),it=te>x?Math.min(2,he):Math.max(.5,he),ot=Math.pow(it,1-Qe),Nt=g.unproject(ve.add(Oe.mult(Qe*ot)).mult(at));g.setLocationAtPoint(g.renderWorldCopies?Nt.wrap():Nt,se)}this._applyUpdatedTransform(g),this._fireMoveEvents(d)},Qe=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,Qe)},a),this}_prepareEase(a,d,f={}){this._moving=!0,d||f.moving||this.fire(new n.k("movestart",a)),this._zooming&&!f.zooming&&this.fire(new n.k("zoomstart",a)),this._rotating&&!f.rotating&&this.fire(new n.k("rotatestart",a)),this._pitching&&!f.pitching&&this.fire(new n.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){let f=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(f-(d-(f*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=n.z.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;let d=a.clone(),{center:f,zoom:g,pitch:x,bearing:E,elevation:M}=this.transformCameraUpdate(d);f&&(d.center=f),g!==void 0&&(d.zoom=g),x!==void 0&&(d.pitch=x),E!==void 0&&(d.bearing=E),M!==void 0&&(d.elevation=M),this.transform.apply(d)}_fireMoveEvents(a){this.fire(new n.k("move",a)),this._zooming&&this.fire(new n.k("zoom",a)),this._rotating&&this.fire(new n.k("rotate",a)),this._pitching&&this.fire(new n.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;let f=this._zooming,g=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new n.k("zoomend",a)),g&&this.fire(new n.k("rotateend",a)),x&&this.fire(new n.k("pitchend",a)),this.fire(new n.k("moveend",a))}flyTo(a,d){var f;if(!a.essential&&b.prefersReducedMotion){let $i=n.L(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo($i,d)}this.stop(),a=n.e({offset:[0,0],speed:1.2,curve:1.42,easing:n.b7},a);let g=this._getTransformForUpdate(),x=this.getZoom(),E=this.getBearing(),M=this.getPitch(),I=this.getPadding(),z="bearing"in a?this._normalizeBearing(a.bearing,E):E,B="pitch"in a?+a.pitch:M,U="padding"in a?a.padding:g.padding,Z=n.P.convert(a.offset),se=g.centerPoint.add(Z),oe=g.pointLocation(se),{center:le,zoom:te}=g.getConstrained(n.M.convert(a.center||oe),(f=a.zoom)!==null&&f!==void 0?f:x);this._normalizeCenter(le);let ve=g.zoomScale(te-x),Oe=g.project(oe),he=g.project(le).sub(Oe),Te=a.curve,Re=Math.max(g.width,g.height),Ve=Re/ve,Qe=he.mag();if("minZoom"in a){let $i=n.ac(Math.min(a.minZoom,x,te),g.minZoom,g.maxZoom),mi=Re/g.zoomScale($i-x);Te=Math.sqrt(mi/Qe*2)}let at=Te*Te;function it($i){let mi=(Ve*Ve-Re*Re+($i?-1:1)*at*at*Qe*Qe)/(2*($i?Ve:Re)*at*Qe);return Math.log(Math.sqrt(mi*mi+1)-mi)}function ot($i){return(Math.exp($i)-Math.exp(-$i))/2}function Nt($i){return(Math.exp($i)+Math.exp(-$i))/2}let Mi=it(!1),St=function($i){return Nt(Mi)/Nt(Mi+Te*$i)},ui=function($i){return Re*((Nt(Mi)*(ot(mi=Mi+Te*$i)/Nt(mi))-ot(Mi))/at)/Qe;var mi},Ai=(it(!0)-Mi)/Te;if(Math.abs(Qe)<1e-6||!isFinite(Ai)){if(Math.abs(Re-Ve)<1e-6)return this.easeTo(a,d);let $i=Ve<Re?-1:1;Ai=Math.abs(Math.log(Ve/Re))/Te,ui=function(){return 0},St=function(mi){return Math.exp($i*Te*mi)}}return a.duration="duration"in a?+a.duration:1e3*Ai/("screenSpeed"in a?+a.screenSpeed/Te:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=E!==z,this._pitching=B!==M,this._padding=!g.isPaddingEqual(U),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(le),this._ease($i=>{let mi=$i*Ai,Ii=1/St(mi);g.zoom=$i===1?te:x+g.scaleZoom(Ii),this._rotating&&(g.bearing=n.z.number(E,z,$i)),this._pitching&&(g.pitch=n.z.number(M,B,$i)),this._padding&&(g.interpolatePadding(I,U,$i),se=g.centerPoint.add(Z)),this.terrain&&!a.freezeElevation&&this._updateElevation($i);let Pi=$i===1?le:g.unproject(Oe.add(he.mult(ui(mi))).mult(Ii));g.setLocationAtPoint(g.renderWorldCopies?Pi.wrap():Pi,se),this._applyUpdatedTransform(g),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,d)}if(!a){let f=this.handlers;f&&f.stop(!1)}return this}_ease(a,d,f){f.animate===!1||f.duration===0?(a(1),d()):(this._easeStart=b.now(),this._easeOptions=f,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=n.b1(a,-180,180);let f=Math.abs(a-d);return Math.abs(a-360-d)<f&&(a-=360),Math.abs(a+360-d)<f&&(a+=360),a}_normalizeCenter(a){let d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;let f=a.lng-d.center.lng;a.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(n.M.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}let ms={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Nf{constructor(a=ms){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){let f=this._map._getUIString(`AttributionControl.${d}`);a.title=f,a.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){let g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}let d=this._map.style.sourceCaches;for(let g in d){let x=d[g];if(x.used||x.usedForTerrain){let E=x.getSource();E.attribution&&a.indexOf(E.attribution)<0&&a.push(E.attribution)}}a=a.filter(g=>String(g).trim()),a.sort((g,x)=>g.length-x.length),a=a.filter((g,x)=>{for(let E=x+1;E<a.length;E++)if(a[E].indexOf(g)>=0)return!1;return!0});let f=a.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,a.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Rl{constructor(a={}){this._updateCompact=()=>{let d=this._container.children;if(d.length){let f=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl");let d=_.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class $r{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){let d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){let d=this._currentlyRunning,f=d?this._queue.concat(d):this._queue;for(let g of f)if(g.id===a)return void(g.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let d=this._currentlyRunning=this._queue;this._queue=[];for(let f of d)if(!f.cancelled&&(f.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var an=n.X([{name:"a_pos3d",type:"Int16",components:3}]);class Of extends n.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];let f={};for(let g of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),n.aN(g.posMatrix,0,n.W,0,n.W,0,1),this._tiles[g.key]=new Fr(g,this.tileSize));for(let g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(a){for(let d in this._tiles){let f=this._tiles[d];(!a||f.tileID.equals(a)||f.tileID.isChildOf(a)||a.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){let d={};for(let f of this._renderableTilesKeys){let g=this._tiles[f].tileID;if(g.canonical.equals(a.canonical)){let x=a.clone();x.posMatrix=new Float64Array(16),n.aN(x.posMatrix,0,n.W,0,n.W,0,1),d[f]=x}else if(g.canonical.isChildOf(a.canonical)){let x=a.clone();x.posMatrix=new Float64Array(16);let E=g.canonical.z-a.canonical.z,M=g.canonical.x-(g.canonical.x>>E<<E),I=g.canonical.y-(g.canonical.y>>E<<E),z=n.W>>E;n.aN(x.posMatrix,0,z,0,z,0,1),n.H(x.posMatrix,x.posMatrix,[-M*z,-I*z,0]),d[f]=x}else if(a.canonical.isChildOf(g.canonical)){let x=a.clone();x.posMatrix=new Float64Array(16);let E=a.canonical.z-g.canonical.z,M=a.canonical.x-(a.canonical.x>>E<<E),I=a.canonical.y-(a.canonical.y>>E<<E),z=n.W>>E;n.aN(x.posMatrix,0,n.W,0,n.W,0,1),n.H(x.posMatrix,x.posMatrix,[M*z,I*z,0]),n.J(x.posMatrix,x.posMatrix,[1/2**E,1/2**E,0]),d[f]=x}}return d}getSourceTile(a,d){let f=this.sourceCache._source,g=a.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(g).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!x||!x.dem)&&d)for(;g>=f.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(a.scaledTo(g--).key);return x}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class _c{constructor(a,d,f){this.painter=a,this.sourceCache=new Of(d),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,f,g=n.W){var x;if(!(d>=0&&d<g&&f>=0&&f<g))return 0;let E=this.getTerrainData(a),M=(x=E.tile)===null||x===void 0?void 0:x.dem;if(!M)return 0;let I=function(oe,le,te){var ve=le[0],Oe=le[1];return oe[0]=te[0]*ve+te[4]*Oe+te[12],oe[1]=te[1]*ve+te[5]*Oe+te[13],oe}([],[d/g*n.W,f/g*n.W],E.u_terrain_matrix),z=[I[0]*M.dim,I[1]*M.dim],B=Math.floor(z[0]),U=Math.floor(z[1]),Z=z[0]-B,se=z[1]-U;return M.get(B,U)*(1-Z)*(1-se)+M.get(B+1,U)*Z*(1-se)+M.get(B,U+1)*(1-Z)*se+M.get(B+1,U+1)*Z*se}getElevationForLngLatZoom(a,d){let{tileID:f,mercatorX:g,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(f,g%n.W,x%n.W,n.W)}getElevation(a,d,f,g=n.W){return this.getDEMElevation(a,d,f,g)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){let g=this.painter.context,x=new n.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new st(g,x,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new st(g,new n.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=n.an([])}let d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){let g=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new st(g,d.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),d.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}let f=d&&d+d.tileID.key+a.key;if(f&&!this._demMatrixCache[f]){let g=this.sourceCache.sourceCache._source.maxzoom,x=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=g?x=a.canonical.z-g:n.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let E=a.canonical.x-(a.canonical.x>>x<<x),M=a.canonical.y-(a.canonical.y>>x<<x),I=n.b9(new Float64Array(16),[1/(n.W<<x),1/(n.W<<x),0]);n.H(I,I,[E*n.W,M*n.W,0]),this._demMatrixCache[a.key]={matrix:I,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){let d=this.painter,f=d.width/devicePixelRatio,g=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new st(d.context,{width:f,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new st(d.context,{width:f,height:g,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,E=0;x<this._coordsTextureSize;x++)for(let M=0;M<this._coordsTextureSize;M++,E+=4)d[E+0]=255&M,d[E+1]=255&x,d[E+2]=M>>8<<4|x>>8,d[E+3]=0;let f=new n.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),g=new st(a,f,a.gl.RGBA,{premultiply:!1});return g.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);let d=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,d),f.bindFramebuffer.set(null);let x=d[0]+(d[2]>>4<<8),E=d[1]+((15&d[2])<<8),M=this.coordsIndex[255-d[3]],I=M&&this.sourceCache.getTileByID(M);if(!I)return null;let z=this._coordsTextureSize,B=(1<<I.tileID.canonical.z)*z;return new n.Y((I.tileID.canonical.x*z+x)/B+I.tileID.wrap,(I.tileID.canonical.y*z+E)/B,this.getElevation(I.tileID,x,E,z))}depthAtPoint(a){let d=new Uint8Array(4),f=this.painter.context,g=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,d),f.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let a=this.painter.context,d=new n.ba,f=new n.aX,g=this.meshSize,x=n.W/g,E=g*g;for(let U=0;U<=g;U++)for(let Z=0;Z<=g;Z++)d.emplaceBack(Z*x,U*x,0);for(let U=0;U<E;U+=g+1)for(let Z=0;Z<g;Z++)f.emplaceBack(Z+U,g+Z+U+1,g+Z+U+2),f.emplaceBack(Z+U,g+Z+U+2,Z+U+1);let M=d.length,I=M+2*(g+1);for(let U of[0,1])for(let Z=0;Z<=g;Z++)for(let se of[0,1])d.emplaceBack(Z*x,U*n.W,se);for(let U=0;U<2*g;U+=2)f.emplaceBack(I+U,I+U+1,I+U+3),f.emplaceBack(I+U,I+U+3,I+U+2),f.emplaceBack(M+U,M+U+3,M+U+1),f.emplaceBack(M+U,M+U+2,M+U+3);let z=d.length,B=z+2*(g+1);for(let U of[0,1])for(let Z=0;Z<=g;Z++)for(let se of[0,1])d.emplaceBack(U*n.W,Z*x,se);for(let U=0;U<2*g;U+=2)f.emplaceBack(z+U,z+U+1,z+U+3),f.emplaceBack(z+U,z+U+3,z+U+2),f.emplaceBack(B+U,B+U+3,B+U+1),f.emplaceBack(B+U,B+U+2,B+U+3);return this._mesh={indexBuffer:a.createIndexBuffer(f),vertexBuffer:a.createVertexBuffer(d,an.members),segments:n.$.simpleSegment(0,0,d.length,f.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*n.bb/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var f;let{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(a){let d=this.getTerrainData(a).tile,f={minElevation:null,maxElevation:null};return d&&d.dem&&(f.minElevation=d.dem.min*this.exaggeration,f.maxElevation=d.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(a,d){let f=n.Y.fromLngLat(a.wrap()),g=(1<<d)*n.W,x=f.x*g,E=f.y*g,M=Math.floor(x/n.W),I=Math.floor(E/n.W);return{tileID:new n.Q(d,0,d,M,I),mercatorX:x,mercatorY:E}}}class Iu{constructor(a,d,f){this._context=a,this._size=d,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){let d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new st(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(f.texture),{id:a,fbo:d,texture:f,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(let d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(let a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}let ya={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class uh{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new Iu(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(f=>!a._layers[f].isHidden(d)),this._coordsDescendingInv={};for(let f in a.sourceCaches){this._coordsDescendingInv[f]={};let g=a.sourceCaches[f].getVisibleCoordinates();for(let x of g){let E=this.terrain.sourceCache.getTerrainCoords(x);for(let M in E)this._coordsDescendingInv[f][M]||(this._coordsDescendingInv[f][M]=[]),this._coordsDescendingInv[f][M].push(E[M])}}this._coordsDescendingInvStr={};for(let f of a._order){let g=a._layers[f],x=g.source;if(ya[g.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(let E in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][E]=this._coordsDescendingInv[x][E].map(M=>M.key).sort().join()}}for(let f of this._renderableTiles)for(let g in this._coordsDescendingInvStr){let x=this._coordsDescendingInvStr[g][f.tileID.key];x&&x!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;let d=a.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(ya[d]&&(this._prevType&&ya[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!g))return!0;if(ya[this._prevType]||ya[d]&&g){this._prevType=d;let x=this._stacks.length-1,E=this._stacks[x]||[];for(let M of this._renderableTiles){if(this.pool.isFull()&&(Kd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[x]){let z=this.pool.getObjectForId(M.rtt[x].id);if(z.stamp===M.rtt[x].stamp){this.pool.useObject(z);continue}}let I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),M.rtt[x]={id:I.id,stamp:I.stamp},f.context.bindFramebuffer.set(I.fbo.framebuffer),f.context.clear({color:n.aO.transparent,stencil:0}),f.currentStencilSource=void 0;for(let z=0;z<E.length;z++){let B=f.style._layers[E[z]],U=B.source?this._coordsDescendingInv[B.source][M.tileID.key]:[M.tileID];f.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),f._renderTileClippingMasks(B,U),f.renderLayer(f,f.style.sourceCaches[B.source],B,U),B.source&&(M.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][M.tileID.key])}}return Kd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ya[d]}return!1}}let dh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},xc=u,hh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:ms,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:n.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Pu=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},ph={showCompass:!0,showZoom:!0,visualizePitch:!1};class fh{constructor(a,d,f=!1){this.mousedown=E=>{this.startMouse(n.e({},E,{ctrlKey:!0,preventDefault:()=>E.preventDefault()}),_.mousePos(this.element,E)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.moveMouse(E,_.mousePos(this.element,E))},this.mouseup=E=>{this.mouseRotate.dragEnd(E),this.mousePitch&&this.mousePitch.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,E.targetTouches)[0],this.startTouch(E,this._startPos),_.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,E.targetTouches)[0],this.moveTouch(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let g=a.dragRotate._mouseRotate.getClickTolerance(),x=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Bl({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:E,clickTolerance:M,bearingDegreesPerPixelMoved:I=.8})=>{let z=new ih;return new Js({clickTolerance:M,move:(B,U)=>({bearingDelta:(U.x-B.x)*I}),moveStateManager:z,enable:E,assignEvents:Pu})})({clickTolerance:g,enable:!0}),this.map=a,f&&(this.mousePitch=rh({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:E,clickTolerance:M,pitchDegreesPerPixelMoved:I=-.5})=>{let z=new ih;return new Js({clickTolerance:M,move:(B,U)=>({pitchDelta:(U.y-B.y)*I}),moveStateManager:z,enable:E,assignEvents:Pu})})({clickTolerance:x,enable:!0})),_.addEventListener(d,"mousedown",this.mousedown),_.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),_.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),_.disableDrag()}moveMouse(a,d){let f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(a,d)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){let{pitchDelta:x}=this.mousePitch.dragMove(a,d)||{};x&&f.setPitch(f.getPitch()+x)}}moveTouch(a,d){let f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(a,d)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){let{pitchDelta:x}=this.touchPitch.dragMove(a,d)||{};x&&f.setPitch(f.getPitch()+x)}}off(){let a=this.element;_.removeEventListener(a,"mousedown",this.mousedown),_.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend),_.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup),_.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),_.removeEventListener(window,"touchend",this.touchend)}}let Xs;function Du(v,a,d){let f=new n.M(v.lng,v.lat);if(v=new n.M(v.lng,v.lat),a){let g=new n.M(v.lng-360,v.lat),x=new n.M(v.lng+360,v.lat),E=d.locationPoint(v).distSqr(a);d.locationPoint(g).distSqr(a)<E?v=g:d.locationPoint(x).distSqr(a)<E&&(v=x)}for(;Math.abs(v.lng-d.center.lng)>180;){let g=d.locationPoint(v);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&d.locationPoint(v).y>d.height/2-d.getHorizon()?v:f}let wc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Lu(v,a,d){let f=v.classList;for(let g in wc)f.remove(`maplibregl-${d}-anchor-${g}`);f.add(`maplibregl-${d}-anchor-${a}`)}class Ul extends n.E{constructor(a){if(super(),this._onKeyPress=d=>{let f=d.code,g=d.charCode||d.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=d=>{let f=d.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=d=>{var f;if(!this._map)return;let g=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Du(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${wc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${x}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){let f=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new n.k("dragstart"))),this.fire(new n.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new n.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=n.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");let d=_.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${f}px`),d.setAttributeNS(null,"width",`${g}px`),d.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);let x=_.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");let E=_.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");let M=_.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");let I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ve of I){let Oe=_.createNS("http://www.w3.org/2000/svg","ellipse");Oe.setAttributeNS(null,"opacity","0.04"),Oe.setAttributeNS(null,"cx","10.5"),Oe.setAttributeNS(null,"cy","5.80029008"),Oe.setAttributeNS(null,"rx",ve.rx),Oe.setAttributeNS(null,"ry",ve.ry),M.appendChild(Oe)}let z=_.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);let B=_.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(B);let U=_.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");let Z=_.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(Z);let se=_.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF");let oe=_.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");let le=_.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");let te=_.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#FFFFFF"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962"),oe.appendChild(le),oe.appendChild(te),E.appendChild(M),E.appendChild(z),E.appendChild(U),E.appendChild(se),E.appendChild(oe),d.appendChild(E),d.setAttributeNS(null,"height",f*this._scale+"px"),d.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(d),this._offset=n.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Lu(this._element,this._anchor,"marker"),a&&a.className)for(let d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=n.M.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){let g=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){let a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,f;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let g=this._map,x=g.terrain.depthAtPoint(this._pos),E=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,E)-x<.006)return void(this._element.style.opacity=this._opacity);let M=-this._offset.y/g.transform._pixelPerMeter,I=Math.sin(g.getPitch()*Math.PI/180)*M,z=g.terrain.depthAtPoint(new n.P(this._pos.x,this._pos.y-this._offset.y)),B=g.transform.lngLatToCameraDepth(this._lngLat,E+I)-z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&B&&this._popup.remove(),this._element.style.opacity=B?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=n.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return a===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}let mh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Vl=0,ba=!1,gh={maxWidth:100,unit:"metric"};function Fu(v,a,d){let f=d&&d.maxWidth||100,g=v._container.clientHeight/2,x=v.unproject([0,g]),E=v.unproject([f,g]),M=x.distanceTo(E);if(d&&d.unit==="imperial"){let I=3.2808*M;I>5280?Ua(a,f,I/5280,v._getUIString("ScaleControl.Miles")):Ua(a,f,I,v._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Ua(a,f,M/1852,v._getUIString("ScaleControl.NauticalMiles")):M>=1e3?Ua(a,f,M/1e3,v._getUIString("ScaleControl.Kilometers")):Ua(a,f,M,v._getUIString("ScaleControl.Meters"))}function Ua(v,a,d,f){let g=function(x){let E=Math.pow(10,`${Math.floor(x)}`.length-1),M=x/E;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(I){let z=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*z)/z}(M),E*M}(d);v.style.width=a*(g/d)+"px",v.innerHTML=`${g}&nbsp;${f}`}let yh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},bh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function vh(v){if(v){if(typeof v=="number"){let a=Math.round(Math.abs(v)/Math.SQRT2);return{center:new n.P(0,0),top:new n.P(0,v),"top-left":new n.P(a,a),"top-right":new n.P(-a,a),bottom:new n.P(0,-v),"bottom-left":new n.P(a,-a),"bottom-right":new n.P(-a,-a),left:new n.P(v,0),right:new n.P(-v,0)}}if(v instanceof n.P||Array.isArray(v)){let a=n.P.convert(v);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:n.P.convert(v.center||[0,0]),top:n.P.convert(v.top||[0,0]),"top-left":n.P.convert(v["top-left"]||[0,0]),"top-right":n.P.convert(v["top-right"]||[0,0]),bottom:n.P.convert(v.bottom||[0,0]),"bottom-left":n.P.convert(v["bottom-left"]||[0,0]),"bottom-right":n.P.convert(v["bottom-right"]||[0,0]),left:n.P.convert(v.left||[0,0]),right:n.P.convert(v.right||[0,0])}}return vh(new n.P(0,0))}let Bf=u;o.AJAXError=n.be,o.Evented=n.E,o.LngLat=n.M,o.MercatorCoordinate=n.Y,o.Point=n.P,o.addProtocol=n.bf,o.config=n.a,o.removeProtocol=n.bg,o.AttributionControl=Nf,o.BoxZoomHandler=Ol,o.CanvasSource=tn,o.CooperativeGesturesHandler=li,o.DoubleClickZoomHandler=lh,o.DragPanHandler=fs,o.DragRotateHandler=bc,o.EdgeInsets=fc,o.FullscreenControl=class extends n.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=d?.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:n.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let v=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new n.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new n.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=hi,o.GeolocateControl=class extends n.E{constructor(v){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new n.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new n.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{let d=new n.M(a.coords.longitude,a.coords.latitude),f=a.coords.accuracy,g=this._map.getBearing(),x=n.e({bearing:g},this.options.fitBoundsOptions),E=lt.fromLngLat(d,f);this._map.fitBounds(E,x,{geolocateSource:!0})},this._updateMarker=a=>{if(a){let d=new n.M(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&ba)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new n.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",a===!1){n.w("Geolocation support is not available so the GeolocateControl will be disabled.");let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{let d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ul({element:this._dotElement}),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ul({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new n.k("trackuserlocationend")))})}},this.options=n.e({},mh,v)}onAdd(v){return this._map=v,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return n._(this,arguments,void 0,function*(a=!1){if(Xs!==void 0&&!a)return Xs;if(window.navigator.permissions===void 0)return Xs=!!window.navigator.geolocation,Xs;try{Xs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Xs=!!window.navigator.geolocation}return Xs})}().then(a=>this._setupUI(a)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vl=0,ba=!1}_isOutOfMapMaxBounds(v){let a=this._map.getMaxBounds(),d=v.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let v=this._map.getBounds(),a=v.getSouthEast(),d=v.getNorthEast(),f=a.distanceTo(d),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return n.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new n.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vl--,ba=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new n.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new n.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vl++,Vl>1?(v={maximumAge:6e5,timeout:0},ba=!0):(v=this.options.positionOptions,ba=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=Yd,o.ImageSource=Mr,o.KeyboardHandler=Ir,o.LngLatBounds=lt,o.LogoControl=Rl,o.Map=class extends zf{constructor(v){if(n.bc.mark(n.bd.create),(v=n.e({},hh,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Cu(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),{bearingSnap:v.bearingSnap}),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new n.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new n.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=v.collectResourceTiming,this._renderTaskQueue=new $r,this._controls=[],this._mapId=n.a3(),this._locale=n.e({},dh,v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this._imageQueueHandle=ee.addThrottleControl(()=>this.isMoving()),this._requestManager=new fe(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1,d=Xd(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{a?d(f):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Mo(this,v),this._hash=v.hash&&new Yd(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,n.e({},v.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new Nf(typeof v.attributionControl=="boolean"?void 0:v.attributionControl)),v.maplibreLogo&&this.addControl(new Rl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new n.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new n.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new n.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(v,a){if(a===void 0&&(a=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new n.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let d=v.onAdd(this);this._controls.push(v);let f=this._controlPositions[a];return a.indexOf("bottom")!==-1?f.insertBefore(d,f.firstChild):f.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new n.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let a=this._controls.indexOf(v);return a>-1&&this._controls.splice(a,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,a,d,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,a,d,f)}resize(v){var a;let d=this._containerDimensions(),f=d[0],g=d[1],x=this._getClampedPixelRatio(f,g);if(this._resizeCanvas(f,g,x),this.painter.resize(f,g,x),this.painter.overLimit()){let M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];let I=this._getClampedPixelRatio(f,g);this._resizeCanvas(f,g,I),this.painter.resize(f,g,I)}this.transform.resize(f,g),(a=this._requestedCameraState)===null||a===void 0||a.resize(f,g);let E=!this._moving;return E&&(this.stop(),this.fire(new n.k("movestart",v)).fire(new n.k("move",v))),this.fire(new n.k("resize",v)),E&&this.fire(new n.k("moveend",v)),this}_getClampedPixelRatio(v,a){let{0:d,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),x=v*g,E=a*g;return Math.min(x>d?d/x:1,E>f?f/E:1)*g}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(lt.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(n.M.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(n.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,a,d){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layer:a,listener:d,delegates:{mousemove:x=>{let E=this.getLayer(a)?this.queryRenderedFeatures(x.point,{layers:[a]}):[];E.length?f||(f=!0,d.call(this,new Ln(v,this,x.originalEvent,{features:E}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layer:a,listener:d,delegates:{mousemove:E=>{(this.getLayer(a)?this.queryRenderedFeatures(E.point,{layers:[a]}):[]).length?f=!0:f&&(f=!1,d.call(this,new Ln(v,this,E.originalEvent)))},mouseout:E=>{f&&(f=!1,d.call(this,new Ln(v,this,E.originalEvent)))}}}}{let f=g=>{let x=this.getLayer(a)?this.queryRenderedFeatures(g.point,{layers:[a]}):[];x.length&&(g.features=x,d.call(this,g),delete g.features)};return{layer:a,listener:d,delegates:{[v]:f}}}}on(v,a,d){if(d===void 0)return super.on(v,a);let f=this._createDelegatedListener(v,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(f);for(let g in f.delegates)this.on(g,f.delegates[g]);return this}once(v,a,d){if(d===void 0)return super.once(v,a);let f=this._createDelegatedListener(v,a,d);for(let g in f.delegates)this.once(g,f.delegates[g]);return this}off(v,a,d){return d===void 0?super.off(v,a):(this._delegatedListeners&&this._delegatedListeners[v]&&(f=>{let g=this._delegatedListeners[v];for(let x=0;x<g.length;x++){let E=g[x];if(E.layer===a&&E.listener===d){for(let M in E.delegates)this.off(M,E.delegates[M]);return g.splice(x,1),this}}})(),this)}queryRenderedFeatures(v,a){if(!this.style)return[];let d,f=v instanceof n.P||Array.isArray(v),g=f?v:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(f?{}:v)||{},g instanceof n.P||typeof g[0]=="number")d=[n.P.convert(g)];else{let x=n.P.convert(g[0]),E=n.P.convert(g[1]);d=[x,new n.P(E.x,x.y),E,new n.P(x.x,E.y),x]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(v,a){return this.style.querySourceFeatures(v,a)}setStyle(v,a){return(a=n.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(v,a))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){let a=this._locale[v];if(a==null)throw new Error(`Missing UI string '${v}'`);return a}_updateStyle(v,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,a));let d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new cs(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,a,d):this.style.loadJSON(v,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new cs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,a){if(typeof v=="string"){let d=this._requestManager.transformRequest(v,ue.Style);n.h(d,new AbortController).then(f=>{this._updateDiff(f.data,a)}).catch(f=>{f&&this.fire(new n.j(f))})}else typeof v=="object"&&this._updateDiff(v,a)}_updateDiff(v,a){try{this.style.setState(v,a)&&this._update(!0)}catch(d){n.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(v,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():n.w("There is no style added to the map.")}addSource(v,a){return this._lazyInitEmptyStyle(),this.style.addSource(v,a),this._update(!0)}isSourceLoaded(v){let a=this.style&&this.style.sourceCaches[v];if(a!==void 0)return a.loaded();this.fire(new n.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){let a=this.style.sourceCaches[v.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&a.reload();for(let d in this.style._layers){let f=this.style._layers[d];f.type==="hillshade"&&f.source===v.source&&n.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new _c(this.painter,a,v),this.painter.renderToTexture=new uh(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new n.k("terrain",{terrain:v})),this}getTerrain(){var v,a;return(a=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&a!==void 0?a:null}areTilesLoaded(){let v=this.style&&this.style.sourceCaches;for(let a in v){let d=v[a]._tiles;for(let f in d){let g=d[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,a,d={}){let{pixelRatio:f=1,sdf:g=!1,stretchX:x,stretchY:E,content:M}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||n.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new n.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:I,height:z,data:B}=a,U=a;return this.style.addImage(v,{data:new n.R({width:I,height:z},new Uint8Array(B)),pixelRatio:f,stretchX:x,stretchY:E,content:M,sdf:g,version:0,userImage:U}),U.onAdd&&U.onAdd(this,v),this}}{let{width:I,height:z,data:B}=b.getImageData(a);this.style.addImage(v,{data:new n.R({width:I,height:z},B),pixelRatio:f,stretchX:x,stretchY:E,content:M,sdf:g,version:0})}}updateImage(v,a){let d=this.style.getImage(v);if(!d)return this.fire(new n.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let f=a instanceof HTMLImageElement||n.b(a)?b.getImageData(a):a,{width:g,height:x,data:E}=f;if(g===void 0||x===void 0)return this.fire(new n.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==d.data.width||x!==d.data.height)return this.fire(new n.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let M=!(a instanceof HTMLImageElement||n.b(a));return d.data.replace(E,M),this.style.updateImage(v,d),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new n.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return ee.getImage(this._requestManager.transformRequest(v,ue.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,a){return this._lazyInitEmptyStyle(),this.style.addLayer(v,a),this._update(!0)}moveLayer(v,a){return this.style.moveLayer(v,a),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,a,d){return this.style.setLayerZoomRange(v,a,d),this._update(!0)}setFilter(v,a,d={}){return this.style.setFilter(v,a,d),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,a,d,f={}){return this.style.setPaintProperty(v,a,d,f),this._update(!0)}getPaintProperty(v,a){return this.style.getPaintProperty(v,a)}setLayoutProperty(v,a,d,f={}){return this.style.setLayoutProperty(v,a,d,f),this._update(!0)}getLayoutProperty(v,a){return this.style.getLayoutProperty(v,a)}setGlyphs(v,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,a,d,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,a,d=>{d||this._update(!0)}),this}setLight(v,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(v,a){return this.style.setFeatureState(v,a),this._update()}removeFeatureState(v,a){return this.style.removeFeatureState(v,a),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,a=0;return this._container&&(v=this._container.clientWidth||400,a=this._container.clientHeight||300),[v,a]}_setupContainer(){let v=this._container;v.classList.add("maplibregl-map");let a=this._canvasContainer=_.create("div","maplibregl-canvas-container",v);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");let d=this._containerDimensions(),f=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],f);let g=this._controlContainer=_.create("div","maplibregl-control-container",v),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{x[E]=_.create("div",`maplibregl-ctrl-${E} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,a,d){this._canvas.width=Math.floor(d*v),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${a}px`}_setupPainter(){let v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},a=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{a={requestedAttributes:v},f&&(a.statusMessage=f.statusMessage,a.type=f.type)},{once:!0});let d=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!d){let f="Failed to initialize WebGL";throw a?(a.message=f,new Error(JSON.stringify(a))):new Error(f)}this.painter=new Fl(d,this.transform),S.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){let a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let g=this.transform.zoom,x=b.now();this.style.zoomHistory.update(g,x);let E=new n.a8(g,{now:x,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=E.crossFadingFactor();M===1&&M===this._crossFadingFactor||(d=!0,this._crossFadingFactor=M),this.style.update(E)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new n.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,n.bc.mark(n.bd.load),this.fire(new n.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new n.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,n.bc.mark(n.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(let d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ee.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();let a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),n.bc.clearMetrics(),this._removed=!0,this.fire(new n.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(v=>{n.bc.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return xc}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=Ln,o.MapTouchEvent=Nl,o.MapWheelEvent=us,o.Marker=Ul,o.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{let a=this._map.getZoom(),d=a===this._map.getMaxZoom(),f=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{let a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{let f=this._map._getUIString(`NavigationControl.${d}`);a.title=f,a.setAttribute("aria-label",f)},this.options=n.e({},ph,v),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),_.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new fh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,a){let d=_.create("button",v,this._container);return d.type="button",d.addEventListener("click",a),d}},o.Popup=class extends n.E{constructor(v){super(),this.remove=()=>(this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new n.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=_.create("div","maplibregl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let M of this.options.className.split(" "))this._container.classList.add(M);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Du(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!a)return;let f=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor,x=vh(this.options.offset);if(!g){let M=this._container.offsetWidth,I=this._container.offsetHeight,z;z=f.y+x.bottom.y<I?["top"]:f.y>this._map.transform.height-I?["bottom"]:[],f.x<M/2?z.push("left"):f.x>this._map.transform.width-M/2&&z.push("right"),g=z.length===0?"bottom":z.join("-")}let E=f.add(x[g]);this.options.subpixelPositioning||(E=E.round()),_.setTransform(this._container,`${wc[g]} translate(${E.x}px,${E.y}px)`),Lu(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=n.e(Object.create(yh),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new n.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=n.M.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){let a=document.createDocumentFragment(),d=document.createElement("body"),f;for(d.innerHTML=v;f=d.firstChild,f;)a.appendChild(f);return this.setDOMContent(a)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){this._container&&this._container.classList.add(v)}removeClassName(v){this._container&&this._container.classList.remove(v)}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let v=this._container.querySelector(bh);v&&v.focus()}},o.RasterDEMTileSource=xi,o.RasterTileSource=fi,o.ScaleControl=class{constructor(v){this._onMove=()=>{Fu(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Fu(this._map,this._container,this.options)},this.options=n.e({},gh,v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=ah,o.Style=cs,o.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Lf,o.TwoFingersTouchRotateHandler=oh,o.TwoFingersTouchZoomHandler=Tu,o.TwoFingersTouchZoomRotateHandler=ii,o.VectorTileSource=Ue,o.VideoSource=en,o.addSourceType=(v,a)=>n._(void 0,void 0,void 0,function*(){if(Vn(v))throw new Error(`A source type called "${v}" already exists.`);((d,f)=>{bn[d]=f})(v,a)}),o.clearPrewarmedResources=function(){let v=Fe;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(ki),Fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return n.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return Lr().getRTLTextPluginStatus()},o.getVersion=function(){return Bf},o.getWorkerCount=function(){return oi.workerCount},o.getWorkerUrl=function(){return n.a.WORKER_URL},o.importScriptInWorkers=function(v){return nt().broadcast("importScript",v)},o.prewarm=function(){ti().acquire(ki)},o.setMaxParallelImageRequests=function(v){n.a.MAX_PARALLEL_IMAGE_REQUESTS=v},o.setRTLTextPlugin=function(v,a){return Lr().setRTLTextPlugin(v,a)},o.setWorkerCount=function(v){oi.workerCount=v},o.setWorkerUrl=function(v){n.a.WORKER_URL=v}});var r=i;return r})});var LS=function(){let i=0;return function(){return(++i).toString()}}();function FS(i,e="blank",t={icon:{type:"",content:""},duration:"",closeable:!1,theme:{type:"light",style:{background:"",color:"",stroke:""}}}){let r=LS(),o=zS(r,e,t),n=NS(e,t),u=OS(i);return o.appendChild(n),o.appendChild(u),t.closeable&&o.appendChild(BS(o)),document.querySelector("wc-toast").appendChild(o),{id:r,type:e,message:i,...t}}function zS(i,e,t){let{duration:r,theme:o}=t,n=document.createElement("wc-toast-item"),h=(window?.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"))?.matches?"dark":"light";if(n.setAttribute("type",e),n.setAttribute("duration",r||""),n.setAttribute("data-toast-item-id",i),n.setAttribute("theme",o?.type?o.type:h),o?.type==="custom"&&o?.style){let{background:m,stroke:b,color:_}=o.style;n.style.setProperty("--wc-toast-background",m),n.style.setProperty("--wc-toast-stroke",b),n.style.setProperty("--wc-toast-color",_)}return n}function NS(i,e){let{icon:t}=e,r=document.createElement("wc-toast-icon");return r.setAttribute("type",t?.type?t.type:i),r.setAttribute("icon",t?.content&&t?.type==="custom"?t.content:""),t?.type==="svg"&&(r.innerHTML=t?.content?t.content:""),r}function OS(i){let e=document.createElement("wc-toast-content");return e.setAttribute("message",i),e}function BS(i){let e=document.createElement("wc-toast-close-button");return e.addEventListener("click",()=>{i.classList.add("dismiss-with-close-button")}),e}function c0(i){return function(e,t){return FS(e,i,t).id}}function ra(i,e){return c0("blank")(i,e)}ra.loading=c0("loading");ra.success=c0("success");ra.error=c0("error");ra.dismiss=function(i){let e=document.querySelectorAll("wc-toast-item");for(let t of e){let r=t.getAttribute("data-toast-item-id");i===r&&t.classList.add("dismiss")}};ra.promise=async function(i,e={loading:"",success:"",error:""},t){let r=ra.loading(e.loading,{...t});try{let o=await i;return ra.dismiss(r),ra.success(e.success,{...t}),o}catch(o){return ra.dismiss(r),ra.error(e.error,{...t}),o}};var cn=ra;var Vh=class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.template=document.createElement("template"),this.template.innerHTML=i.template(),this.shadowRoot.append(this.template.content.cloneNode(!0))}connectedCallback(){this.setAttribute("role","status"),this.setAttribute("aria-live","polite"),this.position=this.getAttribute("position")||"top-center",this.arrangeToastPosition(this.position)}static get observedAttributes(){return["position"]}attributeChangedCallback(e,t,r){e==="position"&&(this.position=r,this.arrangeToastPosition(this.position))}arrangeToastPosition(e){let t=e.includes("top"),r={top:t&&0,bottom:!t&&0},o=e.includes("center")?"center":e.includes("right")?"flex-end":"flex-start",n=t?1:-1,u=t?"column-reverse":"column",m=window.getComputedStyle(document.querySelector("html")).getPropertyValue("scrollbar-gutter");this.style.setProperty("--wc-toast-factor",n),this.style.setProperty("--wc-toast-position",o),this.style.setProperty("--wc-toast-direction",u);let b=this.shadowRoot.querySelector(".wc-toast-container");b.style.top=r.top,b.style.bottom=r.bottom,b.style.right=m.includes("stable")&&"4px",b.style.justifyContent=o}static template(){return`
    <style>
      :host {
        --wc-toast-factor: 1;
        --wc-toast-position: center;
        --wc-toast-direction: column-reverse;

        position: fixed;
        z-index: 9999;
        top: 16px;
        left: 16px;
        right: 16px;
        bottom: 16px;
        pointer-events: none;
      }

      .wc-toast-container {
        z-index: 9999;
        left: 0;
        right: 0;
        display: flex;
        position: absolute;
      }

      .wc-toast-wrapper {
        display: flex;
        flex-direction: var(--wc-toast-direction);
        justify-content: flex-end;
        gap: 16px;
        will-change: transform;
        transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1);
        pointer-events: none;
      }
    </style>
    <div class="wc-toast-container">
      <div class="wc-toast-wrapper" aria-live="polite">
        <slot> </slot>
      </div>
    </div>
    `}};customElements.define("wc-toast",Vh);var jh=class i extends HTMLElement{constructor(){super(),this.createdAt=new Date,this.EXIT_ANIMATION_DURATION=350,this.attachShadow({mode:"open"}),this.template=document.createElement("template"),this.template.innerHTML=i.template(),this.shadowRoot.append(this.template.content.cloneNode(!0))}connectedCallback(){this.type=this.getAttribute("type")||"blank",this.theme=this.getAttribute("theme")||"light",this.duration=this.getAttribute("duration")||this.getDurationByType(this.type),this.theme==="dark"&&(this.style.setProperty("--wc-toast-background","#2a2a32"),this.style.setProperty("--wc-toast-stroke","#f9f9fa"),this.style.setProperty("--wc-toast-color","#f9f9fa"));let e=()=>{setTimeout(()=>{this.remove()},this.EXIT_ANIMATION_DURATION),this.shadowRoot.querySelector(".wc-toast-bar").classList.add("dismiss")},t=!1;this.addEventListener("mouseenter",()=>{t=!0}),this.addEventListener("mouseleave",()=>{t=!1});let r=setInterval(()=>{if(this.duration<=0){clearInterval(r),e();return}t||(this.duration-=100)},100)}static get observedAttributes(){return["class"]}attributeChangedCallback(e,t,r){if(e==="class")switch(r){case"dismiss-with-close-button":this.shadowRoot.querySelector(".wc-toast-bar").classList.add("dismiss"),setTimeout(()=>{this.remove()},this.EXIT_ANIMATION_DURATION);break;case"dismiss":default:this.remove();break}}getDurationByType(e){switch(e){case"success":return 2e3;case"loading":return 1e5*60;case"error":case"blank":case"custom":default:return 3500}}static template(){return`
    <style>
      /*
       * Author: Timo Lins
       * License: MIT
       * Source: https://github.com/timolins/react-hot-toast/blob/main/src/components/toast-bar.tsx
       */

      :host {
        --wc-toast-background: #fff;
        --wc-toast-max-width: 350px;
        --wc-toast-stroke: #2a2a32;
        --wc-toast-color: #000;
        --wc-toast-font-family: 'Roboto', 'Amiri', sans-serif;
        --wc-toast-font-size: 16px;
        --wc-toast-border-radius: 8px;
        --wc-toast-content-margin: 4px 10px;

        display: flex;
        justify-content: var(--wc-toast-position);
        transition: all 230ms cubic-bezier(0.21, 1.02, 0.73, 1);
      }

      :host > * {
        pointer-events: auto;
      }

      @media (prefers-color-scheme: dark) {
        :host {
          --wc-toast-background: #2a2a32;
          --wc-toast-stroke: #f9f9fa;
          --wc-toast-color: #f9f9fa;
        }

        :host([theme=light]) {
          --wc-toast-background: #fff;
          --wc-toast-stroke: #2a2a32;
          --wc-toast-color: #000;
        }
      }

      @keyframes enter-animation {
        0% {
          transform: translate3d(0, calc(var(--wc-toast-factor) * -200%), 0) scale(0.6);
          opacity: 0.5;
        }
        100% {
          transform: translate3d(0, 0, 0) scale(1);
          opacity: 1;
        }
      }

      @keyframes exit-animation {
        0% {
          transform: translate3d(0, 0, -1px) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate3d(0, calc(var(--wc-toast-factor) * -150%), -1px) scale(0.6);
          opacity: 0;
        }
      }

      @keyframes fade-in {
        0% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }

      .wc-toast-bar {
        display: flex;
        align-items: center;
        background: var(--wc-toast-background, #fff);
        line-height: 1.3;
        will-change: transform;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
        animation: enter-animation 0.3s cubic-bezier(0.21, 1.02, 0.73, 1) forwards;
        max-width: var(--wc-toast-max-width);
        pointer-events: auto;
        padding: 8px 10px;
        border-radius: var(--wc-toast-border-radius);
      }

      .wc-toast-bar.dismiss {
        animation: exit-animation 0.3s forwards cubic-bezier(0.06, 0.71, 0.55, 1);
      }

      @media (prefers-reduced-motion: reduce) {
        .wc-toast-bar {
          animation-name: fade-in;
        }

        .wc-toast-bar.dismiss {
          animation-name: fade-out;
        }
      }
    </style>
    <div class="wc-toast-bar">
      <slot></slot>
    </div>
    `}};customElements.define("wc-toast-item",jh);var Hh=class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.template=document.createElement("template"),this.template.innerHTML=i.template(),this.shadowRoot.append(this.template.content.cloneNode(!0))}connectedCallback(){this.icon=this.getAttribute("icon"),this.type=this.getAttribute("type")||"blank",this.setAttribute("aria-hidden","true"),this.type!=="svg"&&(this.icon=this.icon!=null?this.createIcon(this.type,this.icon):this.createIcon(this.type),this.shadowRoot.appendChild(this.icon))}createIcon(e="blank",t=""){switch(e){case"success":let r=document.createElement("div");return r.classList.add("checkmark-icon"),r;case"error":let o=document.createElement("div");return o.classList.add("error-icon"),o.innerHTML='<svg focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>',o;case"loading":let n=document.createElement("div");return n.classList.add("loading-icon"),n;case"custom":let u=document.createElement("div");return u.classList.add("custom-icon"),u.innerHTML=t,u;case"blank":default:return document.createElement("div")}}static template(){return`
    <style>
      /*
      * Author: Timo Lins
      * License: MIT
      * Source: 
      * - https://github.com/timolins/react-hot-toast/blob/main/src/components/checkmark.tsx
      * - https://github.com/timolins/react-hot-toast/blob/main/src/components/error.tsx
      * - https://github.com/timolins/react-hot-toast/blob/main/src/components/loader.tsx
      */

      :host {
        display: flex;
        align-self: flex-start;
        margin-block: 4px !important;
      }

      @keyframes circle-animation {
        from {
          transform: scale(0) rotate(45deg);
          opacity: 0;
        }
        to {
          transform: scale(1) rotate(45deg);
          opacity: 1;
        }
      }

      .checkmark-icon {
        width: 20px;
        opacity: 0;
        height: 20px;
        border-radius: 10px;
        background: #61d345;
        position: relative;
        transform: rotate(45deg);
        animation: circle-animation 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        animation-delay: 100ms;
      }

      @keyframes checkmark-animation {
        0% {
          height: 0;
          width: 0;
          opacity: 0;
        }
        40% {
          height: 0;
          width: 6px;
          opacity: 1;
        }
        100% {
          opacity: 1;
          height: 10px;
        }
      }

      .checkmark-icon::after {
        content: '';
        box-sizing: border-box;
        animation: checkmark-animation 0.2s ease-out forwards;
        opacity: 0;
        animation-delay: 200ms;
        position: absolute;
        border-right: 2px solid;
        border-bottom: 2px solid;
        border-color: #fff;
        bottom: 6px;
        left: 6px;
        height: 10px;
        width: 6px;
      }

      @keyframes slide-in {
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      .error-icon {
        width: 20px;
        height: 20px;
        border-radius: 10px;
        background: #ff4b4b;
        display: flex;
        justify-content: center;
        align-items: center;
        animation: slide-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      }

      .error-icon svg{
        width: 16px;
        height: 20px;
        stroke: #fff;
        animation: slide-in .2s ease-out;
        animation-delay: 100ms;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .loading-icon {
        height: 20px;
        width: 20px;
        position: relative;
        border-radius: 10px;
        background-color: white;
      }

      .loading-icon::after {
        content: '';
        position: absolute;
        bottom: 4px;
        left: 4px;
        width: 12px;
        height: 12px;
        box-sizing: border-box;
        border: 2px solid;
        border-radius: 100%;
        border-color: #e0e0e0;
        border-right-color: #616161;
        animation: rotate 1s linear infinite;
      }

      @media (prefers-color-scheme: dark) {
        ::slotted(svg) {
          stroke: var(--wc-toast-stroke, #fff);
        }
      }
    </style>
    <slot name="svg"></slot>
    `}};customElements.define("wc-toast-icon",Hh);var qh=class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.template=document.createElement("template"),this.template.innerHTML=i.template(),this.shadowRoot.append(this.template.content.cloneNode(!0))}connectedCallback(){this.message=this.getAttribute("message"),this.shadowRoot.querySelector('slot[name="content"]').innerHTML=this.message}static template(){return`
    <style>
      :host {
        display: flex;
        justify-content: center;
        flex: 1 1 auto;
        margin: var(--wc-toast-content-margin) !important;
        color: var(--wc-toast-color, #000);
        font-family: var(--wc-toast-font-family);
        font-size: var(--wc-toast-font-size);
      }
    </style>
    <slot name="content"></slot>
    `}};customElements.define("wc-toast-content",qh);var $h=class i extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.template=document.createElement("template"),this.template.innerHTML=i.template(),this.shadowRoot.append(this.template.content.cloneNode(!0))}static template(){return`
    <style>
      :host {
        width: 20px;
        opacity: 1;
        height: 20px;
        border-radius: 2px;
        border: 1px solid #dadce0;
        background: var(--wc-toast-background);
        position: relative;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-left: 5px;
      }

      svg {
        stroke: var(--wc-toast-stroke, #2a2a32);
      }
    </style>
    <svg
      focusable="false"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M6 18L18 6M6 6l12 12"
      />
    </svg>
    `}};customElements.define("wc-toast-close-button",$h);function gt(){}var Qu=i=>i;function Vr(i,e){for(let t in e)i[t]=e[t];return i}function ig(i){return i()}function d0(){return Object.create(null)}function kr(i){i.forEach(ig)}function zo(i){return typeof i=="function"}function ut(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}var u0;function rg(i,e){return i===e?!0:(u0||(u0=document.createElement("a")),u0.href=e,i===u0.href)}function G3(i){return Object.keys(i).length===0}function Qh(i,...e){if(i==null){for(let r of e)r(void 0);return gt}let t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function ng(i){let e;return Qh(i,t=>e=t)(),e}function Fi(i,e,t){i.$$.on_destroy.push(Qh(e,t))}function Si(i,e,t,r){if(i){let o=W3(i,e,t,r);return i[0](o)}}function W3(i,e,t,r){return i[1]&&r?Vr(t.ctx.slice(),i[1](r(e))):t.ctx}function Ci(i,e,t,r){if(i[2]&&r){let o=i[2](r(t));if(e.dirty===void 0)return o;if(typeof o=="object"){let n=[],u=Math.max(e.dirty.length,o.length);for(let h=0;h<u;h+=1)n[h]=e.dirty[h]|o[h];return n}return e.dirty|o}return e.dirty}function Ei(i,e,t,r,o,n){if(o){let u=W3(e,t,r,n);i.p(u,o)}}function Ti(i){if(i.ctx.length>32){let e=[],t=i.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function zn(i){let e={};for(let t in i)t[0]!=="$"&&(e[t]=i[t]);return e}function Ka(i){return i??""}function En(i,e,t){return i.set(t),e}function Gh(i){return i&&zo(i.destroy)?i.destroy:gt}var Z3=typeof window<"u",Mc=Z3?()=>window.performance.now():()=>Date.now(),Wh=Z3?i=>requestAnimationFrame(i):gt;var Gu=new Set;function K3(i){Gu.forEach(e=>{e.c(i)||(Gu.delete(e),e.f())}),Gu.size!==0&&Wh(K3)}function Wu(i){let e;return Gu.size===0&&Wh(K3),{promise:new Promise(t=>{Gu.add(e={c:i,f:t})}),abort(){Gu.delete(e)}}}var Ac=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var h0=class i{_listeners="WeakMap"in Ac?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(let t of e)i.entries.set(t.target,t),this._listeners.get(t.target)?.(t)}))}};h0.entries="WeakMap"in Ac?new WeakMap:void 0;var J3=!1;function X3(){J3=!0}function Y3(){J3=!1}function qe(i,e){i.appendChild(e)}function og(i){if(!i)return document;let e=i.getRootNode?i.getRootNode():i.ownerDocument;return e&&e.host?e:i.ownerDocument}function e5(i){let e=Ke("style");return e.textContent="/* empty */",US(og(i),e),e.sheet}function US(i,e){return qe(i.head||i,e),e.sheet}function Ne(i,e,t){i.insertBefore(e,t||null)}function ze(i){i.parentNode&&i.parentNode.removeChild(i)}function Zl(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function Ke(i){return document.createElement(i)}function bi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function nr(i){return document.createTextNode(i)}function Ot(){return nr(" ")}function Zi(){return nr("")}function It(i,e,t,r){return i.addEventListener(e,t,r),()=>i.removeEventListener(e,t,r)}function sg(i){return function(e){return e.preventDefault(),i.call(this,e)}}function Fs(i){return function(e){return e.stopPropagation(),i.call(this,e)}}function t5(i){return function(e){e.target===this&&i.call(this,e)}}function J(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function xa(i,e){for(let t in e)J(i,t,e[t])}function Ic(i,e,t){let r=e.toLowerCase();r in i?i[r]=typeof i[r]=="boolean"&&t===""?!0:t:e in i?i[e]=typeof i[e]=="boolean"&&t===""?!0:t:J(i,e,t)}function i5(i){return i===""?null:+i}function r5(i){return Array.from(i.childNodes)}function mn(i,e){e=""+e,i.data!==e&&(i.data=e)}function zs(i,e){i.value=e??""}function Nn(i,e,t,r){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,r?"important":"")}function ag(i,e,t){for(let r=0;r<i.options.length;r+=1){let o=i.options[r];if(o.__value===e){o.selected=!0;return}}(!t||e!==void 0)&&(i.selectedIndex=-1)}function n5(i){let e=i.querySelector(":checked");return e&&e.__value}function ar(i,e,t){i.classList.toggle(e,!!t)}function p0(i,e,{bubbles:t=!1,cancelable:r=!1}={}){return new CustomEvent(i,{detail:e,bubbles:t,cancelable:r})}var Zh=class{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=bi(t.nodeName):this.e=Ke(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Ne(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(ze)}};function o5(i){let e={};return i.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}var f0=new Map,m0=0;function VS(i){let e=5381,t=i.length;for(;t--;)e=(e<<5)-e^i.charCodeAt(t);return e>>>0}function jS(i,e){let t={stylesheet:e5(e),rules:{}};return f0.set(i,t),t}function lg(i,e,t,r,o,n,u,h=0){let m=16.666/r,b=`{
`;for(let $=0;$<=1;$+=m){let ee=e+(t-e)*n($);b+=$*100+`%{${u(ee,1-ee)}}
`}let _=b+`100% {${u(t,1-t)}}
}`,S=`__svelte_${VS(_)}_${h}`,T=og(i),{stylesheet:P,rules:F}=f0.get(T)||jS(T,i);F[S]||(F[S]=!0,P.insertRule(`@keyframes ${S} ${_}`,P.cssRules.length));let G=i.style.animation||"";return i.style.animation=`${G?`${G}, `:""}${S} ${r}ms linear ${o}ms 1 both`,m0+=1,S}function cg(i,e){let t=(i.style.animation||"").split(", "),r=t.filter(e?n=>n.indexOf(e)<0:n=>n.indexOf("__svelte")===-1),o=t.length-r.length;o&&(i.style.animation=r.join(", "),m0-=o,m0||HS())}function HS(){Wh(()=>{m0||(f0.forEach(i=>{let{ownerNode:e}=i.stylesheet;e&&ze(e)}),f0.clear())})}function s5(i,e,t,r){if(!e)return gt;let o=i.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return gt;let{delay:n=0,duration:u=300,easing:h=Qu,start:m=Mc()+n,end:b=m+u,tick:_=gt,css:S}=t(i,{from:e,to:o},r),T=!0,P=!1,F;function G(){S&&(F=lg(i,0,1,u,n,h,S)),n||(P=!0)}function $(){S&&cg(i,F),T=!1}return Wu(ee=>{if(!P&&ee>=m&&(P=!0),P&&ee>=b&&(_(1,0),$()),!T)return!1;if(P){let ue=ee-m,fe=0+1*h(ue/u);_(fe,1-fe)}return!0}),G(),_(0,1),$}function a5(i){let e=getComputedStyle(i);if(e.position!=="absolute"&&e.position!=="fixed"){let{width:t,height:r}=e,o=i.getBoundingClientRect();i.style.position="absolute",i.style.width=t,i.style.height=r,qS(i,o)}}function qS(i,e){let t=i.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){let r=getComputedStyle(i),o=r.transform==="none"?"":r.transform;i.style.transform=`${o} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}var Kl;function Ja(i){Kl=i}function Jl(){if(!Kl)throw new Error("Function called outside component initialization");return Kl}function ug(i){Jl().$$.before_update.push(i)}function Sr(i){Jl().$$.on_mount.push(i)}function Xa(i){Jl().$$.after_update.push(i)}function hr(i){Jl().$$.on_destroy.push(i)}function yo(){let i=Jl();return(e,t,{cancelable:r=!1}={})=>{let o=i.$$.callbacks[e];if(o){let n=p0(e,t,{cancelable:r});return o.slice().forEach(u=>{u.call(i,n)}),!n.defaultPrevented}return!0}}function g0(i,e){return Jl().$$.context.set(i,e),e}function y0(i){return Jl().$$.context.get(i)}function ji(i,e){let t=i.$$.callbacks[e.type];t&&t.slice().forEach(r=>r.call(this,e))}var Pc=[];var Ri=[],Ku=[],hg=[],l5=Promise.resolve(),pg=!1;function fg(){pg||(pg=!0,l5.then(b0))}function Ns(){return fg(),l5}function wa(i){Ku.push(i)}function Gr(i){hg.push(i)}var dg=new Set,Zu=0;function b0(){if(Zu!==0)return;let i=Kl;do{try{for(;Zu<Pc.length;){let e=Pc[Zu];Zu++,Ja(e),$S(e.$$)}}catch(e){throw Pc.length=0,Zu=0,e}for(Ja(null),Pc.length=0,Zu=0;Ri.length;)Ri.pop()();for(let e=0;e<Ku.length;e+=1){let t=Ku[e];dg.has(t)||(dg.add(t),t())}Ku.length=0}while(Pc.length);for(;hg.length;)hg.pop()();pg=!1,dg.clear(),Ja(i)}function $S(i){if(i.fragment!==null){i.update(),kr(i.before_update);let e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(wa)}}function c5(i){let e=[],t=[];Ku.forEach(r=>i.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),Ku=e}var v0=new Set,Dc;function Hi(){Dc={r:0,c:[],p:Dc}}function qi(){Dc.r||kr(Dc.c),Dc=Dc.p}function Pe(i,e){i&&i.i&&(v0.delete(i),i.i(e))}function Be(i,e,t,r){if(i&&i.o){if(v0.has(i))return;v0.add(i),Dc.c.push(()=>{v0.delete(i),r&&(t&&i.d(1),r())}),i.o(e)}else r&&r()}function On(i){return i?.length!==void 0?i:Array.from(i)}function u5(i,e){i.d(1),e.delete(i.key)}function d5(i,e){Be(i,1,1,()=>{e.delete(i.key)})}function h5(i,e){i.f(),d5(i,e)}function Kh(i,e,t,r,o,n,u,h,m,b,_,S){let T=i.length,P=n.length,F=T,G={};for(;F--;)G[i[F].key]=F;let $=[],ee=new Map,ue=new Map,fe=[];for(F=P;F--;){let xe=S(o,n,F),Le=t(xe),we=u.get(Le);we?r&&fe.push(()=>we.p(xe,e)):(we=b(Le,xe),we.c()),ee.set(Le,$[F]=we),Le in G&&ue.set(Le,Math.abs(F-G[Le]))}let Y=new Set,je=new Set;function Ce(xe){Pe(xe,1),xe.m(h,_),u.set(xe.key,xe),_=xe.first,P--}for(;T&&P;){let xe=$[P-1],Le=i[T-1],we=xe.key,st=Le.key;xe===Le?(_=xe.first,T--,P--):ee.has(st)?!u.has(we)||Y.has(we)?Ce(xe):je.has(st)?T--:ue.get(we)>ue.get(st)?(je.add(we),Ce(xe)):(Y.add(st),T--):(m(Le,u),T--)}for(;T--;){let xe=i[T];ee.has(xe.key)||m(xe,u)}for(;P;)Ce($[P-1]);return kr(fe),$}function ka(i,e){let t={},r={},o={$$scope:1},n=i.length;for(;n--;){let u=i[n],h=e[n];if(h){for(let m in u)m in h||(r[m]=1);for(let m in h)o[m]||(t[m]=h[m],o[m]=1);i[n]=h}else for(let m in u)o[m]=1}for(let u in r)u in t||(t[u]=void 0);return t}var QS=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],GS=new Set([...QS]);function Wr(i,e,t){let r=i.$$.props[e];r!==void 0&&(i.$$.bound[r]=t,t(i.$$.ctx[r]))}function qt(i){i&&i.c()}function Ut(i,e,t){let{fragment:r,after_update:o}=i.$$;r&&r.m(e,t),wa(()=>{let n=i.$$.on_mount.map(ig).filter(zo);i.$$.on_destroy?i.$$.on_destroy.push(...n):kr(n),i.$$.on_mount=[]}),o.forEach(wa)}function Vt(i,e){let t=i.$$;t.fragment!==null&&(c5(t.after_update),kr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ZS(i,e){i.$$.dirty[0]===-1&&(Pc.push(i),fg(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function yt(i,e,t,r,o,n,u=null,h=[-1]){let m=Kl;Ja(i);let b=i.$$={fragment:null,ctx:[],props:n,update:gt,not_equal:o,bound:d0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(m?m.$$.context:[])),callbacks:d0(),dirty:h,skip_bound:!1,root:e.target||m.$$.root};u&&u(b.root);let _=!1;if(b.ctx=t?t(i,e.props||{},(S,T,...P)=>{let F=P.length?P[0]:T;return b.ctx&&o(b.ctx[S],b.ctx[S]=F)&&(!b.skip_bound&&b.bound[S]&&b.bound[S](F),_&&ZS(i,S)),T}):[],b.update(),_=!0,kr(b.before_update),b.fragment=r?r(b.ctx):!1,e.target){if(e.hydrate){X3();let S=r5(e.target);b.fragment&&b.fragment.l(S),S.forEach(ze)}else b.fragment&&b.fragment.c();e.intro&&Pe(i.$$.fragment),Ut(i,e.target,e.anchor),Y3(),b0()}Ja(m)}var KS;typeof HTMLElement=="function"&&(KS=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(i,e,t){super(),this.$$ctor=i,this.$$s=e,t&&this.attachShadow({mode:"open"})}addEventListener(i,e,t){if(this.$$l[i]=this.$$l[i]||[],this.$$l[i].push(e),this.$$c){let r=this.$$c.$on(i,e);this.$$l_u.set(e,r)}super.addEventListener(i,e,t)}removeEventListener(i,e,t){if(super.removeEventListener(i,e,t),this.$$c){let r=this.$$l_u.get(e);r&&(r(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let i=function(o){return()=>{let n;return{c:function(){n=Ke("slot"),o!=="default"&&J(n,"name",o)},m:function(m,b){Ne(m,n,b)},d:function(m){m&&ze(n)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let e={},t=o5(this);for(let o of this.$$s)o in t&&(e[o]=[i(o)]);for(let o of this.attributes){let n=this.$$g_p(o.name);n in this.$$d||(this.$$d[n]=mg(n,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});let r=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let n=mg(o,this.$$d[o],this.$$p_d,"toAttribute");n==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,n)}this.$$r=!1};this.$$c.$$.after_update.push(r),r();for(let o in this.$$l)for(let n of this.$$l[o]){let u=this.$$c.$on(o,n);this.$$l_u.set(n,u)}this.$$l={}}}attributeChangedCallback(i,e,t){this.$$r||(i=this.$$g_p(i),this.$$d[i]=mg(i,t,this.$$p_d,"toProp"),this.$$c?.$set({[i]:this.$$d[i]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(i){return Object.keys(this.$$p_d).find(e=>this.$$p_d[e].attribute===i||!this.$$p_d[e].attribute&&e.toLowerCase()===i)||i}});function mg(i,e,t,r){let o=t[i]?.type;if(e=o==="Boolean"&&typeof e!="boolean"?e!=null:e,!r||!t[i])return e;if(r==="toAttribute")switch(o){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(o){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var pt=class{$$=void 0;$$set=void 0;$destroy(){Vt(this,1),this.$destroy=gt}$on(e,t){if(!zo(t))return gt;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!G3(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var p5="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(p5);function No(i){this.content=i}No.prototype={constructor:No,find:function(i){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===i)return e;return-1},get:function(i){var e=this.find(i);return e==-1?void 0:this.content[e+1]},update:function(i,e,t){var r=t&&t!=i?this.remove(t):this,o=r.find(i),n=r.content.slice();return o==-1?n.push(t||i,e):(n[o+1]=e,t&&(n[o]=t)),new No(n)},remove:function(i){var e=this.find(i);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new No(t)},addToStart:function(i,e){return new No([i,e].concat(this.remove(i).content))},addToEnd:function(i,e){var t=this.remove(i).content.slice();return t.push(i,e),new No(t)},addBefore:function(i,e,t){var r=this.remove(e),o=r.content.slice(),n=r.find(i);return o.splice(n==-1?o.length:n,0,e,t),new No(o)},forEach:function(i){for(var e=0;e<this.content.length;e+=2)i(this.content[e],this.content[e+1])},prepend:function(i){return i=No.from(i),i.size?new No(i.content.concat(this.subtract(i).content)):this},append:function(i){return i=No.from(i),i.size?new No(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var e=this;i=No.from(i);for(var t=0;t<i.content.length;t+=2)e=e.remove(i.content[t]);return e},toObject:function(){var i={};return this.forEach(function(e,t){i[e]=t}),i},get size(){return this.content.length>>1}};No.from=function(i){if(i instanceof No)return i;var e=[];if(i)for(var t in i)e.push(t,i[t]);return new No(e)};var gg=No;function _5(i,e,t){for(let r=0;;r++){if(r==i.childCount||r==e.childCount)return i.childCount==e.childCount?null:t;let o=i.child(r),n=e.child(r);if(o==n){t+=o.nodeSize;continue}if(!o.sameMarkup(n))return t;if(o.isText&&o.text!=n.text){for(let u=0;o.text[u]==n.text[u];u++)t++;return t}if(o.content.size||n.content.size){let u=_5(o.content,n.content,t+1);if(u!=null)return u}t+=o.nodeSize}}function x5(i,e,t,r){for(let o=i.childCount,n=e.childCount;;){if(o==0||n==0)return o==n?null:{a:t,b:r};let u=i.child(--o),h=e.child(--n),m=u.nodeSize;if(u==h){t-=m,r-=m;continue}if(!u.sameMarkup(h))return{a:t,b:r};if(u.isText&&u.text!=h.text){let b=0,_=Math.min(u.text.length,h.text.length);for(;b<_&&u.text[u.text.length-b-1]==h.text[h.text.length-b-1];)b++,t--,r--;return{a:t,b:r}}if(u.content.size||h.content.size){let b=x5(u.content,h.content,t-1,r-1);if(b)return b}t-=m,r-=m}}var Et=class i{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,n){for(let u=0,h=0;h<t;u++){let m=this.content[u],b=h+m.nodeSize;if(b>e&&r(m,o+h,n||null,u)!==!1&&m.content.size){let _=h+1;m.nodesBetween(Math.max(0,e-_),Math.min(m.content.size,t-_),r,o+_)}h=b}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let n="",u=!0;return this.nodesBetween(e,t,(h,m)=>{let b=h.isText?h.text.slice(Math.max(e,m)-m,t-m):h.isLeaf?o?typeof o=="function"?o(h):o:h.type.spec.leafText?h.type.spec.leafText(h):"":"";h.isBlock&&(h.isLeaf&&b||h.isTextblock)&&r&&(u?u=!1:n+=r),n+=b},0),n}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),n=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),n=1);n<e.content.length;n++)o.push(e.content[n]);return new i(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let n=0,u=0;u<t;n++){let h=this.content[n],m=u+h.nodeSize;m>e&&((u<e||m>t)&&(h.isText?h=h.cut(Math.max(0,e-u),Math.min(h.text.length,t-u)):h=h.cut(Math.max(0,e-u-1),Math.min(h.content.size,t-u-1))),r.push(h),o+=h.nodeSize),u=m}return new i(r,o)}cutByIndex(e,t){return e==t?i.empty:e==0&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),n=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new i(o,n)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return _5(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return x5(this,e,t,r)}findIndex(e,t=-1){if(e==0)return _0(0,e);if(e==this.size)return _0(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let n=this.child(r),u=o+n.nodeSize;if(u>=e)return u==e||t>0?_0(r+1,u):_0(r,o);o=u}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,r=0;for(let o=0;o<e.length;o++){let n=e[o];r+=n.nodeSize,o&&n.isText&&e[o-1].sameMarkup(n)?(t||(t=e.slice(0,o)),t[t.length-1]=n.withText(t[t.length-1].text+n.text)):t&&t.push(n)}return new i(t||e,r)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Et.empty=new Et([],0);var yg={index:0,offset:0};function _0(i,e){return yg.index=i,yg.offset=e,yg}function x0(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(i);if(Array.isArray(e)!=t)return!1;if(t){if(i.length!=e.length)return!1;for(let r=0;r<i.length;r++)if(!x0(i[r],e[r]))return!1}else{for(let r in i)if(!(r in e)||!x0(i[r],e[r]))return!1;for(let r in e)if(!(r in i))return!1}return!0}var dr=class i{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let n=e[o];if(this.eq(n))return e;if(this.type.excludes(n.type))t||(t=e.slice(0,o));else{if(n.type.excludes(this.type))return e;!r&&n.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(n)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&x0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);return r.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return i.none;if(e instanceof i)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};dr.none=[];var zc=class extends Error{},Zt=class i{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=k5(this.content,e+this.openStart,t);return r&&new i(r,this.openStart,this.openEnd)}removeBetween(e,t){return new i(w5(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return i.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new i(Et.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let n=e.firstChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.firstChild)r++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)o++;return new i(e,r,o)}};Zt.empty=new Zt(Et.empty,0,0);function w5(i,e,t){let{index:r,offset:o}=i.findIndex(e),n=i.maybeChild(r),{index:u,offset:h}=i.findIndex(t);if(o==e||n.isText){if(h!=t&&!i.child(u).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(t))}if(r!=u)throw new RangeError("Removing non-flat range");return i.replaceChild(r,n.copy(w5(n.content,e-o-1,t-o-1)))}function k5(i,e,t,r){let{index:o,offset:n}=i.findIndex(e),u=i.maybeChild(o);if(n==e||u.isText)return r&&!r.canReplace(o,o,t)?null:i.cut(0,e).append(t).append(i.cut(e));let h=k5(u.content,e-n-1,t);return h&&i.replaceChild(o,u.copy(h))}function JS(i,e,t){if(t.openStart>i.depth)throw new zc("Inserted content deeper than insertion position");if(i.depth-t.openStart!=e.depth-t.openEnd)throw new zc("Inconsistent open depths");return S5(i,e,t,0)}function S5(i,e,t,r){let o=i.index(r),n=i.node(r);if(o==e.index(r)&&r<i.depth-t.openStart){let u=S5(i,e,t,r+1);return n.copy(n.content.replaceChild(o,u))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&i.depth==r&&e.depth==r){let u=i.parent,h=u.content;return Fc(u,h.cut(0,i.parentOffset).append(t.content).append(h.cut(e.parentOffset)))}else{let{start:u,end:h}=XS(t,i);return Fc(n,E5(i,u,h,e,r))}else return Fc(n,w0(i,e,r))}function C5(i,e){if(!e.type.compatibleContent(i.type))throw new zc("Cannot join "+e.type.name+" onto "+i.type.name)}function xg(i,e,t){let r=i.node(t);return C5(r,e.node(t)),r}function Lc(i,e){let t=e.length-1;t>=0&&i.isText&&i.sameMarkup(e[t])?e[t]=i.withText(e[t].text+i.text):e.push(i)}function Jh(i,e,t,r){let o=(e||i).node(t),n=0,u=e?e.index(t):o.childCount;i&&(n=i.index(t),i.depth>t?n++:i.textOffset&&(Lc(i.nodeAfter,r),n++));for(let h=n;h<u;h++)Lc(o.child(h),r);e&&e.depth==t&&e.textOffset&&Lc(e.nodeBefore,r)}function Fc(i,e){return i.type.checkContent(e),i.copy(e)}function E5(i,e,t,r,o){let n=i.depth>o&&xg(i,e,o+1),u=r.depth>o&&xg(t,r,o+1),h=[];return Jh(null,i,o,h),n&&u&&e.index(o)==t.index(o)?(C5(n,u),Lc(Fc(n,E5(i,e,t,r,o+1)),h)):(n&&Lc(Fc(n,w0(i,e,o+1)),h),Jh(e,t,o,h),u&&Lc(Fc(u,w0(t,r,o+1)),h)),Jh(r,null,o,h),new Et(h)}function w0(i,e,t){let r=[];if(Jh(null,i,t,r),i.depth>t){let o=xg(i,e,t+1);Lc(Fc(o,w0(i,e,t+1)),r)}return Jh(e,null,t,r),new Et(r)}function XS(i,e){let t=e.depth-i.openStart,o=e.node(t).copy(i.content);for(let n=t-1;n>=0;n--)o=e.node(n).copy(Et.from(o));return{start:o.resolveNoCache(i.openStart+t),end:o.resolveNoCache(o.content.size-i.openEnd-t)}}var k0=class i{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let n=0;n<e;n++)o+=r.child(n).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return dr.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let h=r;r=o,o=h}let n=r.marks;for(var u=0;u<n.length;u++)n[u].type.spec.inclusive===!1&&(!o||!n[u].isInSet(o.marks))&&(n=n[u--].removeFromSet(n));return n}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var n=0;n<r.length;n++)r[n].type.spec.inclusive===!1&&(!o||!r[n].isInSet(o.marks))&&(r=r[n--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Nc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,n=t;for(let u=e;;){let{index:h,offset:m}=u.content.findIndex(n),b=n-m;if(r.push(u,h,o+m),!b||(u=u.child(h),u.isText))break;n=b-1,o+=m+1}return new i(t,r,n)}static resolveCached(e,t){for(let o=0;o<bg.length;o++){let n=bg[o];if(n.pos==t&&n.doc==e)return n}let r=bg[vg]=i.resolve(e,t);return vg=(vg+1)%YS,r}},bg=[],vg=0,YS=12,Nc=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},eC=Object.create(null),na=class i{constructor(e,t,r,o=dr.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||Et.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&x0(this.attrs,t||e.defaultAttrs||eC)&&dr.sameSet(this.marks,r||dr.none)}copy(e=null){return e==this.content?this:new i(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Zt.empty;let o=this.resolve(e),n=this.resolve(t),u=r?0:o.sharedDepth(t),h=o.start(u),b=o.node(u).content.cut(o.pos-h,n.pos-h);return new Zt(b,o.depth-u,n.depth-u)}replace(e,t,r){return JS(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return k0.resolveCached(this,e)}resolveNoCache(e){return k0.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,n=>(r.isInSet(n.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),T5(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Et.empty,o=0,n=r.childCount){let u=this.contentMatchAt(e).matchFragment(r,o,n),h=u&&u.matchFragment(this.content,t);if(!h||!h.validEnd)return!1;for(let m=o;m<n;m++)if(!this.type.allowsMarks(r.child(m).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let n=this.contentMatchAt(e).matchType(r),u=n&&n.matchFragment(this.content,t);return u?u.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=dr.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!dr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=Et.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,o,r)}};na.prototype.text=void 0;var wg=class i extends na{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):T5(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new i(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function T5(i,e){for(let t=i.length-1;t>=0;t--)e=i[t].type.name+"("+e+")";return e}var Oc=class i{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new kg(e,t);if(r.next==null)return i.empty;let o=M5(r);r.next&&r.err("Unexpected trailing text");let n=aC(sC(o));return lC(n,r),n}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let n=t;o&&n<r;n++)o=o.matchType(e.child(n).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function n(u,h){let m=u.matchFragment(e,r);if(m&&(!t||m.validEnd))return Et.from(h.map(b=>b.createAndFill()));for(let b=0;b<u.next.length;b++){let{type:_,next:S}=u.next[b];if(!(_.isText||_.hasRequiredAttrs())&&o.indexOf(S)==-1){o.push(S);let T=n(S,h.concat(_));if(T)return T}}return null}return n(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),n=o.match;if(n.matchType(e)){let u=[];for(let h=o;h.type;h=h.via)u.push(h.type);return u.reverse()}for(let u=0;u<n.next.length;u++){let{type:h,next:m}=n.next[u];!h.isLeaf&&!h.hasRequiredAttrs()&&!(h.name in t)&&(!o.type||m.validEnd)&&(r.push({match:h.contentMatch,type:h,via:o}),t[h.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let n=o+(r.validEnd?"*":" ")+" ";for(let u=0;u<r.next.length;u++)n+=(u?", ":"")+r.next[u].type.name+"->"+e.indexOf(r.next[u].next);return n}).join(`
`)}};Oc.empty=new Oc(!0);var kg=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function M5(i){let e=[];do e.push(tC(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function tC(i){let e=[];do e.push(iC(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function iC(i){let e=oC(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=rC(i,e);else break;return e}function f5(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}function rC(i,e){let t=f5(i),r=t;return i.eat(",")&&(i.next!="}"?r=f5(i):r=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function nC(i,e){let t=i.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let n in t){let u=t[n];u.groups.indexOf(e)>-1&&o.push(u)}return o.length==0&&i.err("No node type or group '"+e+"' found"),o}function oC(i){if(i.eat("(")){let e=M5(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=nC(i,i.next).map(t=>(i.inline==null?i.inline=t.isInline:i.inline!=t.isInline&&i.err("Mixing inline and block content"),{type:"name",value:t}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function sC(i){let e=[[]];return o(n(i,0),t()),e;function t(){return e.push([])-1}function r(u,h,m){let b={term:m,to:h};return e[u].push(b),b}function o(u,h){u.forEach(m=>m.to=h)}function n(u,h){if(u.type=="choice")return u.exprs.reduce((m,b)=>m.concat(n(b,h)),[]);if(u.type=="seq")for(let m=0;;m++){let b=n(u.exprs[m],h);if(m==u.exprs.length-1)return b;o(b,h=t())}else if(u.type=="star"){let m=t();return r(h,m),o(n(u.expr,m),m),[r(m)]}else if(u.type=="plus"){let m=t();return o(n(u.expr,h),m),o(n(u.expr,m),m),[r(m)]}else{if(u.type=="opt")return[r(h)].concat(n(u.expr,h));if(u.type=="range"){let m=h;for(let b=0;b<u.min;b++){let _=t();o(n(u.expr,m),_),m=_}if(u.max==-1)o(n(u.expr,m),m);else for(let b=u.min;b<u.max;b++){let _=t();r(m,_),o(n(u.expr,m),_),m=_}return[r(m)]}else{if(u.type=="name")return[r(h,void 0,u.value)];throw new Error("Unknown expr type")}}}}function A5(i,e){return e-i}function m5(i,e){let t=[];return r(e),t.sort(A5);function r(o){let n=i[o];if(n.length==1&&!n[0].term)return r(n[0].to);t.push(o);for(let u=0;u<n.length;u++){let{term:h,to:m}=n[u];!h&&t.indexOf(m)==-1&&r(m)}}}function aC(i){let e=Object.create(null);return t(m5(i,0));function t(r){let o=[];r.forEach(u=>{i[u].forEach(({term:h,to:m})=>{if(!h)return;let b;for(let _=0;_<o.length;_++)o[_][0]==h&&(b=o[_][1]);m5(i,m).forEach(_=>{b||o.push([h,b=[]]),b.indexOf(_)==-1&&b.push(_)})})});let n=e[r.join(",")]=new Oc(r.indexOf(i.length-1)>-1);for(let u=0;u<o.length;u++){let h=o[u][1].sort(A5);n.next.push({type:o[u][0],next:e[h.join(",")]||t(h)})}return n}}function lC(i,e){for(let t=0,r=[i];t<r.length;t++){let o=r[t],n=!o.validEnd,u=[];for(let h=0;h<o.next.length;h++){let{type:m,next:b}=o.next[h];u.push(m.name),n&&!(m.isText||m.hasRequiredAttrs())&&(n=!1),r.indexOf(b)==-1&&r.push(b)}n&&e.err("Only non-generatable nodes ("+u.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function I5(i){let e=Object.create(null);for(let t in i){let r=i[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function P5(i,e){let t=Object.create(null);for(let r in i){let o=e&&e[r];if(o===void 0){let n=i[r];if(n.hasDefault)o=n.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function D5(i){let e=Object.create(null);if(i)for(let t in i)e[t]=new Sg(i[t]);return e}var S0=class i{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=D5(r.attrs),this.defaultAttrs=I5(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oc.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:P5(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new na(this,this.computeAttrs(e),Et.from(t),dr.setFrom(r))}createChecked(e=null,t,r){return t=Et.from(t),this.checkContent(t),new na(this,this.computeAttrs(e),t,dr.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=Et.from(t),t.size){let u=this.contentMatch.fillBefore(t);if(!u)return null;t=u.append(t)}let o=this.contentMatch.matchFragment(t),n=o&&o.fillBefore(Et.empty,!0);return n?new na(this,e,t.append(n),dr.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:dr.none:e}static compile(e,t){let r=Object.create(null);e.forEach((n,u)=>r[n]=new i(n,t,u));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let n in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}},Sg=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}},Yh=class i{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=D5(o.attrs),this.excluded=null;let n=I5(this.attrs);this.instance=n?new dr(this,n):null}create(e=null){return!e&&this.instance?this.instance:new dr(this,P5(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((n,u)=>r[n]=new i(n,o++,t,u)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}},C0=class{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=gg.from(e.nodes),t.marks=gg.from(e.marks||{}),this.nodes=S0.compile(this.spec.nodes,this),this.marks=Yh.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let n=this.nodes[o],u=n.spec.content||"",h=n.spec.marks;n.contentMatch=r[u]||(r[u]=Oc.parse(u,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.markSet=h=="_"?null:h?g5(this,h.split(" ")):h==""||!n.inlineContent?[]:null}for(let o in this.marks){let n=this.marks[o],u=n.spec.excludes;n.excluded=u==null?[n]:u==""?[]:g5(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof S0){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new wg(r,r.defaultAttrs,e,dr.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return na.fromJSON(this,e)}markFromJSON(e){return dr.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function g5(i,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],n=i.marks[o],u=n;if(n)t.push(n);else for(let h in i.marks){let m=i.marks[h];(o=="_"||m.spec.group&&m.spec.group.split(" ").indexOf(o)>-1)&&t.push(u=m)}if(!u)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function cC(i){return i.tag!=null}function uC(i){return i.style!=null}var Bc=class i{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(r=>{cC(r)?this.tags.push(r):uC(r)&&this.styles.push(r)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,t={}){let r=new M0(this,t,!1);return r.addAll(e,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new M0(this,t,!0);return r.addAll(e,t.from,t.to),Zt.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let n=this.tags[o];if(pC(e,n.tag)&&(n.namespace===void 0||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let u=n.getAttrs(e);if(u===!1)continue;n.attrs=u||void 0}return n}}}matchStyle(e,t,r,o){for(let n=o?this.styles.indexOf(o)+1:0;n<this.styles.length;n++){let u=this.styles[n],h=u.style;if(!(h.indexOf(e)!=0||u.context&&!r.matchesContext(u.context)||h.length>e.length&&(h.charCodeAt(e.length)!=61||h.slice(e.length+1)!=t))){if(u.getAttrs){let m=u.getAttrs(t);if(m===!1)continue;u.attrs=m||void 0}return u}}}static schemaRules(e){let t=[];function r(o){let n=o.priority==null?50:o.priority,u=0;for(;u<t.length;u++){let h=t[u];if((h.priority==null?50:h.priority)<n)break}t.splice(u,0,o)}for(let o in e.marks){let n=e.marks[o].spec.parseDOM;n&&n.forEach(u=>{r(u=b5(u)),u.mark||u.ignore||u.clearMark||(u.mark=o)})}for(let o in e.nodes){let n=e.nodes[o].spec.parseDOM;n&&n.forEach(u=>{r(u=b5(u)),u.node||u.ignore||u.mark||(u.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new i(e,i.schemaRules(e)))}},L5={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},dC={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},F5={ol:!0,ul:!0},E0=1,T0=2,Xh=4;function y5(i,e,t){return e!=null?(e?E0:0)|(e==="full"?T0:0):i&&i.whitespace=="pre"?E0|T0:t&~Xh}var Ju=class{constructor(e,t,r,o,n,u,h){this.type=e,this.attrs=t,this.marks=r,this.pendingMarks=o,this.solid=n,this.options=h,this.content=[],this.activeMarks=dr.none,this.stashMarks=[],this.match=u||(h&Xh?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Et.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&E0)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let n=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-o[0].length))}}let t=Et.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Et.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,r=this.pendingMarks;t<r.length;t++){let o=r[t];(this.type?this.type.allowsMarkType(o.type):mC(o.type,e))&&!o.isInSet(this.activeMarks)&&(this.activeMarks=o.addToSet(this.activeMarks),this.pendingMarks=o.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!L5.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},M0=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0;let o=t.topNode,n,u=y5(null,t.preserveWhitespace,0)|(r?Xh:0);o?n=new Ju(o.type,o.attrs,dr.none,dr.none,!0,t.topMatch||o.type.contentMatch,u):r?n=new Ju(null,null,dr.none,dr.none,!0,null,u):n=new Ju(e.schema.topNodeType,null,dr.none,dr.none,!0,null,u),this.nodes=[n],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,t){let r=e.getAttribute("style");if(!r)return t();let o=this.readStyles(fC(r));if(!o)return;let[n,u]=o,h=this.top;for(let m=0;m<u.length;m++)this.removePendingMark(u[m],h);for(let m=0;m<n.length;m++)this.addPendingMark(n[m]);t();for(let m=0;m<n.length;m++)this.removePendingMark(n[m],h);for(let m=0;m<u.length;m++)this.addPendingMark(u[m])}addTextNode(e){let t=e.nodeValue,r=this.top;if(r.options&T0||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&E0)r.options&T0?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],n=e.previousSibling;(!o||n&&n.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let r=e.nodeName.toLowerCase(),o;F5.hasOwnProperty(r)&&this.parser.normalizeLists&&hC(e);let n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,t));if(n?n.ignore:dC.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(e=n.skip);let u,h=this.top,m=this.needsBlock;if(L5.hasOwnProperty(r))h.content.length&&h.content[0].isInline&&this.open&&(this.open--,h=this.top),u=!0,h.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}n&&n.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),u&&this.sync(h),this.needsBlock=m}else this.withStyleRules(e,()=>{this.addElementByRule(e,n,n.consuming===!1?o:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=dr.none,r=dr.none;for(let o=0;o<e.length;o+=2)for(let n=void 0;;){let u=this.parser.matchStyle(e[o],e[o+1],this,n);if(!u)break;if(u.ignore)return null;if(u.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(h=>{u.clearMark(h)&&(r=h.addToSet(r))}):t=this.parser.schema.marks[u.mark].create(u.attrs).addToSet(t),u.consuming===!1)n=u;else break}return[t,r]}addElementByRule(e,t,r){let o,n,u;t.node?(n=this.parser.schema.nodes[t.node],n.isLeaf?this.insertNode(n.create(t.attrs))||this.leafFallback(e):o=this.enter(n,t.attrs||null,t.preserveWhitespace)):(u=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(u));let h=this.top;if(n&&n.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(m=>this.insertNode(m));else{let m=e;typeof t.contentElement=="string"?m=e.querySelector(t.contentElement):typeof t.contentElement=="function"?m=t.contentElement(e):t.contentElement&&(m=t.contentElement),this.findAround(e,m,!0),this.addAll(m)}o&&this.sync(h)&&this.open--,u&&this.removePendingMark(u,h)}addAll(e,t,r){let o=t||0;for(let n=t?e.childNodes[t]:e.firstChild,u=r==null?null:e.childNodes[r];n!=u;n=n.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(n);this.findAtPoint(e,o)}findPlace(e){let t,r;for(let o=this.open;o>=0;o--){let n=this.nodes[o],u=n.findWrapping(e);if(u&&(!t||t.length>u.length)&&(t=u,r=n,!u.length)||n.solid)break}if(!t)return!1;this.sync(r);for(let o=0;o<t.length;o++)this.enterInner(t[o],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let r=t.activeMarks;for(let o=0;o<e.marks.length;o++)(!t.type||t.type.allowsMarkType(e.marks[o].type))&&(r=e.marks[o].addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,r){let o=this.findPlace(e.create(t));return o&&this.enterInner(e,t,!0,r),o}enterInner(e,t=null,r=!1,o){this.closeExtra();let n=this.top;n.applyPending(e),n.match=n.match&&n.match.matchType(e);let u=y5(e,o,n.options);n.options&Xh&&n.content.length==0&&(u|=Xh),this.nodes.push(new Ju(e,t,n.activeMarks,n.pendingMarks,r,null,u)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),n=-(r?r.depth+1:0)+(o?0:1),u=(h,m)=>{for(;h>=0;h--){let b=t[h];if(b==""){if(h==t.length-1||h==0)continue;for(;m>=n;m--)if(u(h-1,m))return!0;return!1}else{let _=m>0||m==0&&o?this.nodes[m].type:r&&m>=n?r.node(m-n).type:null;if(!_||_.name!=b&&_.groups.indexOf(b)==-1)return!1;m--}}return!0};return u(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}addPendingMark(e){let t=gC(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let r=this.open;r>=0;r--){let o=this.nodes[r];if(o.pendingMarks.lastIndexOf(e)>-1)o.pendingMarks=e.removeFromSet(o.pendingMarks);else{o.activeMarks=e.removeFromSet(o.activeMarks);let u=o.popFromStashMark(e);u&&o.type&&o.type.allowsMarkType(u.type)&&(o.activeMarks=u.addToSet(o.activeMarks))}if(o==t)break}}};function hC(i){for(let e=i.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&F5.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function pC(i,e){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,e)}function fC(i){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,t,r=[];for(;t=e.exec(i);)r.push(t[1],t[2].trim());return r}function b5(i){let e={};for(let t in i)e[t]=i[t];return e}function mC(i,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(i))continue;let n=[],u=h=>{n.push(h);for(let m=0;m<h.edgeCount;m++){let{type:b,next:_}=h.edge(m);if(b==e||n.indexOf(_)<0&&u(_))return!0}};if(u(o.contentMatch))return!0}}function gC(i,e){for(let t=0;t<e.length;t++)if(i.eq(e[t]))return e[t]}var Ya=class i{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=_g(t).createDocumentFragment());let o=r,n=[];return e.forEach(u=>{if(n.length||u.marks.length){let h=0,m=0;for(;h<n.length&&m<u.marks.length;){let b=u.marks[m];if(!this.marks[b.type.name]){m++;continue}if(!b.eq(n[h][0])||b.type.spec.spanning===!1)break;h++,m++}for(;h<n.length;)o=n.pop()[1];for(;m<u.marks.length;){let b=u.marks[m++],_=this.serializeMark(b,u.isInline,t);_&&(n.push([b,o]),o.appendChild(_.dom),o=_.contentDOM||_.dom)}}o.appendChild(this.serializeNodeInner(u,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=i.renderSpec(_g(t),this.nodes[e.type.name](e));if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let n=this.serializeMark(e.marks[o],e.isInline,t);n&&((n.contentDOM||n.dom).appendChild(r),r=n.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&i.renderSpec(_g(r),o(e,t))}static renderSpec(e,t,r=null){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let o=t[0],n=o.indexOf(" ");n>0&&(r=o.slice(0,n),o=o.slice(n+1));let u,h=r?e.createElementNS(r,o):e.createElement(o),m=t[1],b=1;if(m&&typeof m=="object"&&m.nodeType==null&&!Array.isArray(m)){b=2;for(let _ in m)if(m[_]!=null){let S=_.indexOf(" ");S>0?h.setAttributeNS(_.slice(0,S),_.slice(S+1),m[_]):h.setAttribute(_,m[_])}}for(let _=b;_<t.length;_++){let S=t[_];if(S===0){if(_<t.length-1||_>b)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:T,contentDOM:P}=i.renderSpec(e,S,r);if(h.appendChild(T),P){if(u)throw new RangeError("Multiple content holes");u=P}}}return{dom:h,contentDOM:u}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new i(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=v5(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return v5(e.marks)}};function v5(i){let e={};for(let t in i){let r=i[t].spec.toDOM;r&&(e[t]=r)}return e}function _g(i){return i.document||window.document}var O5=65535,B5=Math.pow(2,16);function yC(i,e){return i+e*B5}function z5(i){return i&O5}function bC(i){return(i-(i&O5))/B5}var R5=1,U5=2,A0=4,V5=8,ip=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&V5)>0}get deletedBefore(){return(this.delInfo&(R5|A0))>0}get deletedAfter(){return(this.delInfo&(U5|A0))>0}get deletedAcross(){return(this.delInfo&A0)>0}},el=class i{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&i.empty)return i.empty}recover(e){let t=0,r=z5(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+bC(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,n=this.inverted?2:1,u=this.inverted?1:2;for(let h=0;h<this.ranges.length;h+=3){let m=this.ranges[h]-(this.inverted?o:0);if(m>e)break;let b=this.ranges[h+n],_=this.ranges[h+u],S=m+b;if(e<=S){let T=b?e==m?-1:e==S?1:t:t,P=m+o+(T<0?0:_);if(r)return P;let F=e==(t<0?m:S)?null:yC(h/3,e-m),G=e==m?U5:e==S?R5:A0;return(t<0?e!=m:e!=S)&&(G|=V5),new ip(P,G,F)}o+=_-b}return r?e+o:new ip(e+o,0,null)}touches(e,t){let r=0,o=z5(t),n=this.inverted?2:1,u=this.inverted?1:2;for(let h=0;h<this.ranges.length;h+=3){let m=this.ranges[h]-(this.inverted?r:0);if(m>e)break;let b=this.ranges[h+n],_=m+b;if(e<=_&&h==o*3)return!0;r+=this.ranges[h+u]-b}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,n=0;o<this.ranges.length;o+=3){let u=this.ranges[o],h=u-(this.inverted?n:0),m=u+(this.inverted?0:n),b=this.ranges[o+t],_=this.ranges[o+r];e(h,h+b,m,m+_),n+=_-b}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?i.empty:new i(e<0?[0,-e,0]:[0,0,e])}};el.empty=new el([]);var rp=class i{constructor(e=[],t,r=0,o=e.length){this.maps=e,this.mirror=t,this.from=r,this.to=o}slice(e=0,t=this.maps.length){return new i(this.maps,this.mirror,e,t)}copy(){return new i(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),t!=null&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,r=this.maps.length;t<e.maps.length;t++){let o=e.getMirror(t);this.appendMap(e.maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e.maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new i;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let n=this.from;n<this.to;n++){let u=this.maps[n],h=u.mapResult(e,t);if(h.recover!=null){let m=this.getMirror(n);if(m!=null&&m>n&&m<this.to){n=m,e=this.maps[m].recover(h.recover);continue}}o|=h.delInfo,e=h.pos}return r?e:new ip(e,o,null)}},Cg=Object.create(null),ro=class{getMap(){return el.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Cg[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Cg)throw new RangeError("Duplicate use of step JSON ID "+e);return Cg[e]=t,t.prototype.jsonID=e,t}},bo=class i{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new i(e,null)}static fail(e){return new i(null,e)}static fromReplace(e,t,r,o){try{return i.ok(e.replace(t,r,o))}catch(n){if(n instanceof zc)return i.fail(n.message);throw n}}};function Ig(i,e,t){let r=[];for(let o=0;o<i.childCount;o++){let n=i.child(o);n.content.size&&(n=n.copy(Ig(n.content,e,n))),n.isInline&&(n=e(n,t,o)),r.push(n)}return Et.fromArray(r)}var np=class i extends ro{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),n=new Zt(Ig(t.content,(u,h)=>!u.isAtom||!h.type.allowsMarkType(this.mark.type)?u:u.mark(this.mark.addToSet(u.marks)),o),t.openStart,t.openEnd);return bo.fromReplace(e,this.from,this.to,n)}invert(){return new Rc(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new i(t.pos,r.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}};ro.jsonID("addMark",np);var Rc=class i extends ro{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Zt(Ig(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return bo.fromReplace(e,this.from,this.to,r)}invert(){return new np(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new i(t.pos,r.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(t.from,t.to,e.markFromJSON(t.mark))}};ro.jsonID("removeMark",Rc);var op=class i extends ro{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return bo.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return bo.fromReplace(e,this.pos,this.pos+1,new Zt(Et.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new i(this.pos,t.marks[o]);return new i(this.pos,this.mark)}}return new sp(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new i(t.pos,e.markFromJSON(t.mark))}};ro.jsonID("addNodeMark",op);var sp=class i extends ro{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return bo.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return bo.fromReplace(e,this.pos,this.pos+1,new Zt(Et.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new op(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new i(t.pos,e.markFromJSON(t.mark))}};ro.jsonID("removeNodeMark",sp);var Oo=class i extends ro{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&Mg(e,this.from,this.to)?bo.fail("Structure replace would overwrite content"):bo.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new el([this.from,this.to-this.from,this.slice.size])}invert(e){return new i(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new i(t.pos,Math.max(t.pos,r.pos),this.slice)}merge(e){if(!(e instanceof i)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Zt.empty:new Zt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new i(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Zt.empty:new Zt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new i(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new i(t.from,t.to,Zt.fromJSON(e,t.slice),!!t.structure)}};ro.jsonID("replace",Oo);var Bn=class i extends ro{constructor(e,t,r,o,n,u,h=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=n,this.insert=u,this.structure=h}apply(e){if(this.structure&&(Mg(e,this.from,this.gapFrom)||Mg(e,this.gapTo,this.to)))return bo.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return bo.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?bo.fromReplace(e,this.from,this.to,r):bo.fail("Content does not fit in gap")}getMap(){return new el([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),n=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||n>r.pos?null:new i(t.pos,r.pos,o,n,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(t.from,t.to,t.gapFrom,t.gapTo,Zt.fromJSON(e,t.slice),t.insert,!!t.structure)}};ro.jsonID("replaceAround",Bn);function Mg(i,e,t){let r=i.resolve(e),o=t-e,n=r.depth;for(;o>0&&n>0&&r.indexAfter(n)==r.node(n).childCount;)n--,o--;if(o>0){let u=r.node(n).maybeChild(r.indexAfter(n));for(;o>0;){if(!u||u.isLeaf)return!0;u=u.firstChild,o--}}return!1}function vC(i,e,t,r){let o=[],n=[],u,h;i.doc.nodesBetween(e,t,(m,b,_)=>{if(!m.isInline)return;let S=m.marks;if(!r.isInSet(S)&&_.type.allowsMarkType(r.type)){let T=Math.max(b,e),P=Math.min(b+m.nodeSize,t),F=r.addToSet(S);for(let G=0;G<S.length;G++)S[G].isInSet(F)||(u&&u.to==T&&u.mark.eq(S[G])?u.to=P:o.push(u=new Rc(T,P,S[G])));h&&h.to==T?h.to=P:n.push(h=new np(T,P,r))}}),o.forEach(m=>i.step(m)),n.forEach(m=>i.step(m))}function _C(i,e,t,r){let o=[],n=0;i.doc.nodesBetween(e,t,(u,h)=>{if(!u.isInline)return;n++;let m=null;if(r instanceof Yh){let b=u.marks,_;for(;_=r.isInSet(b);)(m||(m=[])).push(_),b=_.removeFromSet(b)}else r?r.isInSet(u.marks)&&(m=[r]):m=u.marks;if(m&&m.length){let b=Math.min(h+u.nodeSize,t);for(let _=0;_<m.length;_++){let S=m[_],T;for(let P=0;P<o.length;P++){let F=o[P];F.step==n-1&&S.eq(o[P].style)&&(T=F)}T?(T.to=b,T.step=n):o.push({style:S,from:Math.max(h,e),to:b,step:n})}}}),o.forEach(u=>i.step(new Rc(u.from,u.to,u.style)))}function xC(i,e,t,r=t.contentMatch){let o=i.doc.nodeAt(e),n=[],u=e+1;for(let h=0;h<o.childCount;h++){let m=o.child(h),b=u+m.nodeSize,_=r.matchType(m.type);if(!_)n.push(new Oo(u,b,Zt.empty));else{r=_;for(let S=0;S<m.marks.length;S++)t.allowsMarkType(m.marks[S].type)||i.step(new Rc(u,b,m.marks[S]));if(m.isText&&!t.spec.code){let S,T=/\r?\n|\r/g,P;for(;S=T.exec(m.text);)P||(P=new Zt(Et.from(t.schema.text(" ",t.allowedMarks(m.marks))),0,0)),n.push(new Oo(u+S.index,u+S.index+S[0].length,P))}}u=b}if(!r.validEnd){let h=r.fillBefore(Et.empty,!0);i.replace(u,u,new Zt(h,0,0))}for(let h=n.length-1;h>=0;h--)i.step(n[h])}function wC(i,e,t){return(e==0||i.canReplace(e,i.childCount))&&(t==i.childCount||i.canReplace(0,t))}function tl(i){let t=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let r=i.depth;;--r){let o=i.$from.node(r),n=i.$from.index(r),u=i.$to.indexAfter(r);if(r<i.depth&&o.canReplace(n,u,t))return r;if(r==0||o.type.spec.isolating||!wC(o,n,u))break}return null}function kC(i,e,t){let{$from:r,$to:o,depth:n}=e,u=r.before(n+1),h=o.after(n+1),m=u,b=h,_=Et.empty,S=0;for(let F=n,G=!1;F>t;F--)G||r.index(F)>0?(G=!0,_=Et.from(r.node(F).copy(_)),S++):m--;let T=Et.empty,P=0;for(let F=n,G=!1;F>t;F--)G||o.after(F+1)<o.end(F)?(G=!0,T=Et.from(o.node(F).copy(T)),P++):b++;i.step(new Bn(m,b,u,h,new Zt(_.append(T),S,P),_.size-S,!0))}function Yu(i,e,t=null,r=i){let o=SC(i,e),n=o&&CC(r,e);return n?o.map(N5).concat({type:e,attrs:t}).concat(n.map(N5)):null}function N5(i){return{type:i,attrs:null}}function SC(i,e){let{parent:t,startIndex:r,endIndex:o}=i,n=t.contentMatchAt(r).findWrapping(e);if(!n)return null;let u=n.length?n[0]:e;return t.canReplaceWith(r,o,u)?n:null}function CC(i,e){let{parent:t,startIndex:r,endIndex:o}=i,n=t.child(r),u=e.contentMatch.findWrapping(n.type);if(!u)return null;let m=(u.length?u[u.length-1]:e).contentMatch;for(let b=r;m&&b<o;b++)m=m.matchType(t.child(b).type);return!m||!m.validEnd?null:u}function EC(i,e,t){let r=Et.empty;for(let u=t.length-1;u>=0;u--){if(r.size){let h=t[u].type.contentMatch.matchFragment(r);if(!h||!h.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Et.from(t[u].type.create(t[u].attrs,r))}let o=e.start,n=e.end;i.step(new Bn(o,n,o,n,new Zt(r,0,0),t.length,!0))}function TC(i,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let n=i.steps.length;i.doc.nodesBetween(e,t,(u,h)=>{if(u.isTextblock&&!u.hasMarkup(r,o)&&MC(i.doc,i.mapping.slice(n).map(h),r)){i.clearIncompatible(i.mapping.slice(n).map(h,1),r);let m=i.mapping.slice(n),b=m.map(h,1),_=m.map(h+u.nodeSize,1);return i.step(new Bn(b,_,b+1,_-1,new Zt(Et.from(r.create(o,null,u.marks)),0,0),1,!0)),!1}})}function MC(i,e,t){let r=i.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function AC(i,e,t,r,o){let n=i.doc.nodeAt(e);if(!n)throw new RangeError("No node at given position");t||(t=n.type);let u=t.create(r,null,o||n.marks);if(n.isLeaf)return i.replaceWith(e,e+n.nodeSize,u);if(!t.validContent(n.content))throw new RangeError("Invalid content for node type "+t.name);i.step(new Bn(e,e+n.nodeSize,e+1,e+n.nodeSize-1,new Zt(Et.from(u),0,0),1,!0))}function Os(i,e,t=1,r){let o=i.resolve(e),n=o.depth-t,u=r&&r[r.length-1]||o.parent;if(n<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!u.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let b=o.depth-1,_=t-2;b>n;b--,_--){let S=o.node(b),T=o.index(b);if(S.type.spec.isolating)return!1;let P=S.content.cutByIndex(T,S.childCount),F=r&&r[_+1];F&&(P=P.replaceChild(0,F.type.create(F.attrs)));let G=r&&r[_]||S;if(!S.canReplace(T+1,S.childCount)||!G.type.validContent(P))return!1}let h=o.indexAfter(n),m=r&&r[0];return o.node(n).canReplaceWith(h,h,m?m.type:o.node(n+1).type)}function IC(i,e,t=1,r){let o=i.doc.resolve(e),n=Et.empty,u=Et.empty;for(let h=o.depth,m=o.depth-t,b=t-1;h>m;h--,b--){n=Et.from(o.node(h).copy(n));let _=r&&r[b];u=Et.from(_?_.type.create(_.attrs,u):o.node(h).copy(u))}i.step(new Oo(e,e,new Zt(n.append(u),t,t),!0))}function oa(i,e){let t=i.resolve(e),r=t.index();return j5(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function j5(i,e){return!!(i&&e&&!i.isLeaf&&i.canAppend(e))}function ed(i,e,t=-1){let r=i.resolve(e);for(let o=r.depth;;o--){let n,u,h=r.index(o);if(o==r.depth?(n=r.nodeBefore,u=r.nodeAfter):t>0?(n=r.node(o+1),h++,u=r.node(o).maybeChild(h)):(n=r.node(o).maybeChild(h-1),u=r.node(o+1)),n&&!n.isTextblock&&j5(n,u)&&r.node(o).canReplace(h,h+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function PC(i,e,t){let r=new Oo(e-t,e+t,Zt.empty,!0);i.step(r)}function DC(i,e,t){let r=i.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let n=r.index(o);if(r.node(o).canReplaceWith(n,n,t))return r.before(o+1);if(n>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let n=r.indexAfter(o);if(r.node(o).canReplaceWith(n,n,t))return r.after(o+1);if(n<r.node(o).childCount)return null}return null}function D0(i,e,t){let r=i.resolve(e);if(!t.content.size)return e;let o=t.content;for(let n=0;n<t.openStart;n++)o=o.firstChild.content;for(let n=1;n<=(t.openStart==0&&t.size?2:1);n++)for(let u=r.depth;u>=0;u--){let h=u==r.depth?0:r.pos<=(r.start(u+1)+r.end(u+1))/2?-1:1,m=r.index(u)+(h>0?1:0),b=r.node(u),_=!1;if(n==1)_=b.canReplace(m,m,o);else{let S=b.contentMatchAt(m).findWrapping(o.firstChild.type);_=S&&b.canReplaceWith(m,m,S[0])}if(_)return h==0?r.pos:h<0?r.before(u+1):r.after(u+1)}return null}function lp(i,e,t=e,r=Zt.empty){if(e==t&&!r.size)return null;let o=i.resolve(e),n=i.resolve(t);return H5(o,n,r)?new Oo(e,t,r):new Ag(o,n,r).fit()}function H5(i,e,t){return!t.openStart&&!t.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),t.content)}var Ag=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Et.empty;for(let o=0;o<=e.depth;o++){let n=e.node(o);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Et.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let b=this.findFittable();b?this.placeNodes(b):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let n=this.placed,u=r.depth,h=o.depth;for(;u&&h&&n.childCount==1;)n=n.firstChild.content,u--,h--;let m=new Zt(n,u,h);return e>-1?new Bn(r.pos,e,this.$to.pos,this.$to.end(),m,t):m.size||r.pos!=this.$to.pos?new Oo(r.pos,o.pos,m):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let n=t.firstChild;if(t.childCount>1&&(o=0),n.type.spec.isolating&&o<=r){e=r;break}t=n.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,n=null;r?(n=Eg(this.unplaced.content,r-1).firstChild,o=n.content):o=this.unplaced.content;let u=o.firstChild;for(let h=this.depth;h>=0;h--){let{type:m,match:b}=this.frontier[h],_,S=null;if(t==1&&(u?b.matchType(u.type)||(S=b.fillBefore(Et.from(u),!1)):n&&m.compatibleContent(n.type)))return{sliceDepth:r,frontierDepth:h,parent:n,inject:S};if(t==2&&u&&(_=b.findWrapping(u.type)))return{sliceDepth:r,frontierDepth:h,parent:n,wrap:_};if(n&&b.matchType(n.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Eg(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Zt(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=Eg(e,t);if(o.childCount<=1&&t>0){let n=e.size-t<=t+o.size;this.unplaced=new Zt(ep(e,t-1,1),t-1,n?t-1:r)}else this.unplaced=new Zt(ep(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:n}){for(;this.depth>t;)this.closeFrontierNode();if(n)for(let G=0;G<n.length;G++)this.openFrontierNode(n[G]);let u=this.unplaced,h=r?r.content:u.content,m=u.openStart-e,b=0,_=[],{match:S,type:T}=this.frontier[t];if(o){for(let G=0;G<o.childCount;G++)_.push(o.child(G));S=S.matchFragment(o)}let P=h.size+e-(u.content.size-u.openEnd);for(;b<h.childCount;){let G=h.child(b),$=S.matchType(G.type);if(!$)break;b++,(b>1||m==0||G.content.size)&&(S=$,_.push(q5(G.mark(T.allowedMarks(G.marks)),b==1?m:0,b==h.childCount?P:-1)))}let F=b==h.childCount;F||(P=-1),this.placed=tp(this.placed,t,Et.from(_)),this.frontier[t].match=S,F&&P<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let G=0,$=h;G<P;G++){let ee=$.lastChild;this.frontier.push({type:ee.type,match:ee.contentMatchAt(ee.childCount)}),$=ee.content}this.unplaced=F?e==0?Zt.empty:new Zt(ep(u.content,e-1,1),e-1,P<0?u.openEnd:e-1):new Zt(ep(u.content,e,b),u.openStart,u.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Tg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],n=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),u=Tg(e,t,o,r,n);if(u){for(let h=t-1;h>=0;h--){let{match:m,type:b}=this.frontier[h],_=Tg(e,h,b,m,!0);if(!_||_.childCount)continue e}return{depth:t,fit:u,move:n?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=tp(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),n=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,n)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=tp(this.placed,this.depth,Et.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Et.empty,!0);t.childCount&&(this.placed=tp(this.placed,this.frontier.length,t))}};function ep(i,e,t){return e==0?i.cutByIndex(t,i.childCount):i.replaceChild(0,i.firstChild.copy(ep(i.firstChild.content,e-1,t)))}function tp(i,e,t){return e==0?i.append(t):i.replaceChild(i.childCount-1,i.lastChild.copy(tp(i.lastChild.content,e-1,t)))}function Eg(i,e){for(let t=0;t<e;t++)i=i.firstChild.content;return i}function q5(i,e,t){if(e<=0)return i;let r=i.content;return e>1&&(r=r.replaceChild(0,q5(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=i.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(i.type.contentMatch.matchFragment(r).fillBefore(Et.empty,!0)))),i.copy(r)}function Tg(i,e,t,r,o){let n=i.node(e),u=o?i.indexAfter(e):i.index(e);if(u==n.childCount&&!t.compatibleContent(n.type))return null;let h=r.fillBefore(n.content,!0,u);return h&&!LC(t,n.content,u)?h:null}function LC(i,e,t){for(let r=t;r<e.childCount;r++)if(!i.allowsMarks(e.child(r).marks))return!0;return!1}function FC(i){return i.spec.defining||i.spec.definingForContent}function zC(i,e,t,r){if(!r.size)return i.deleteRange(e,t);let o=i.doc.resolve(e),n=i.doc.resolve(t);if(H5(o,n,r))return i.step(new Oo(e,t,r));let u=Q5(o,i.doc.resolve(t));u[u.length-1]==0&&u.pop();let h=-(o.depth+1);u.unshift(h);for(let T=o.depth,P=o.pos-1;T>0;T--,P--){let F=o.node(T).type.spec;if(F.defining||F.definingAsContext||F.isolating)break;u.indexOf(T)>-1?h=T:o.before(T)==P&&u.splice(1,0,-T)}let m=u.indexOf(h),b=[],_=r.openStart;for(let T=r.content,P=0;;P++){let F=T.firstChild;if(b.push(F),P==r.openStart)break;T=F.content}for(let T=_-1;T>=0;T--){let P=b[T],F=FC(P.type);if(F&&!P.sameMarkup(o.node(Math.abs(h)-1)))_=T;else if(F||!P.type.isTextblock)break}for(let T=r.openStart;T>=0;T--){let P=(T+_+1)%(r.openStart+1),F=b[P];if(F)for(let G=0;G<u.length;G++){let $=u[(G+m)%u.length],ee=!0;$<0&&(ee=!1,$=-$);let ue=o.node($-1),fe=o.index($-1);if(ue.canReplaceWith(fe,fe,F.type,F.marks))return i.replace(o.before($),ee?n.after($):t,new Zt($5(r.content,0,r.openStart,P),P,r.openEnd))}}let S=i.steps.length;for(let T=u.length-1;T>=0&&(i.replace(e,t,r),!(i.steps.length>S));T--){let P=u[T];P<0||(e=o.before(P),t=n.after(P))}}function $5(i,e,t,r,o){if(e<t){let n=i.firstChild;i=i.replaceChild(0,n.copy($5(n.content,e+1,t,r,n)))}if(e>r){let n=o.contentMatchAt(0),u=n.fillBefore(i).append(i);i=u.append(n.matchFragment(u).fillBefore(Et.empty,!0))}return i}function NC(i,e,t,r){if(!r.isInline&&e==t&&i.doc.resolve(e).parent.content.size){let o=DC(i.doc,e,r.type);o!=null&&(e=t=o)}i.replaceRange(e,t,new Zt(Et.from(r),0,0))}function OC(i,e,t){let r=i.doc.resolve(e),o=i.doc.resolve(t),n=Q5(r,o);for(let u=0;u<n.length;u++){let h=n[u],m=u==n.length-1;if(m&&h==0||r.node(h).type.contentMatch.validEnd)return i.delete(r.start(h),o.end(h));if(h>0&&(m||r.node(h-1).canReplace(r.index(h-1),o.indexAfter(h-1))))return i.delete(r.before(h),o.after(h))}for(let u=1;u<=r.depth&&u<=o.depth;u++)if(e-r.start(u)==r.depth-u&&t>r.end(u)&&o.end(u)-t!=o.depth-u)return i.delete(r.before(u),t);i.delete(e,t)}function Q5(i,e){let t=[],r=Math.min(i.depth,e.depth);for(let o=r;o>=0;o--){let n=i.start(o);if(n<i.pos-(i.depth-o)||e.end(o)>e.pos+(e.depth-o)||i.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(n==e.start(o)||o==i.depth&&o==e.depth&&i.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==n-1)&&t.push(o)}return t}var I0=class i extends ro{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return bo.fail("No node at attribute step's position");let r=Object.create(null);for(let n in t.attrs)r[n]=t.attrs[n];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return bo.fromReplace(e,this.pos,this.pos+1,new Zt(Et.from(o),0,t.isLeaf?0:1))}getMap(){return el.empty}invert(e){return new i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new i(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new i(t.pos,t.attr,t.value)}};ro.jsonID("attr",I0);var P0=class i extends ro{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return bo.ok(r)}getMap(){return el.empty}invert(e){return new i(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new i(t.attr,t.value)}};ro.jsonID("docAttr",P0);var Xu=class extends Error{};Xu=function i(e){let t=Error.call(this,e);return t.__proto__=i.prototype,t};Xu.prototype=Object.create(Error.prototype);Xu.prototype.constructor=Xu;Xu.prototype.name="TransformError";var ap=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new rp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Xu(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Zt.empty){let o=lp(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new Zt(Et.from(r),0,0))}delete(e,t){return this.replace(e,t,Zt.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return zC(this,e,t,r),this}replaceRangeWith(e,t,r){return NC(this,e,t,r),this}deleteRange(e,t){return OC(this,e,t),this}lift(e,t){return kC(this,e,t),this}join(e,t=1){return PC(this,e,t),this}wrap(e,t){return EC(this,e,t),this}setBlockType(e,t=e,r,o=null){return TC(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return AC(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new I0(e,t,r)),this}setDocAttribute(e,t){return this.step(new P0(e,t)),this}addNodeMark(e,t){return this.step(new op(e,t)),this}removeNodeMark(e,t){if(!(t instanceof dr)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t=t.isInSet(r.marks),!t)return this}return this.step(new sp(e,t)),this}split(e,t=1,r){return IC(this,e,t,r),this}addMark(e,t,r){return vC(this,e,t,r),this}removeMark(e,t,r){return _C(this,e,t,r),this}clearIncompatible(e,t,r){return xC(this,e,t,r),this}};var Pg=Object.create(null),Li=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new Lg(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Zt.empty){let r=t.content.lastChild,o=null;for(let h=0;h<t.openEnd;h++)o=r,r=r.lastChild;let n=e.steps.length,u=this.ranges;for(let h=0;h<u.length;h++){let{$from:m,$to:b}=u[h],_=e.mapping.slice(n);e.replaceRange(_.map(m.pos),_.map(b.pos),h?Zt.empty:t),h==0&&Z5(e,n,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let n=0;n<o.length;n++){let{$from:u,$to:h}=o[n],m=e.mapping.slice(r),b=m.map(u.pos),_=m.map(h.pos);n?e.deleteRange(b,_):(e.replaceRangeWith(b,_,t),Z5(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new Di(e):td(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let n=e.depth-1;n>=0;n--){let u=t<0?td(e.node(0),e.node(n),e.before(n+1),e.index(n),t,r):td(e.node(0),e.node(n),e.after(n+1),e.index(n)+1,t,r);if(u)return u}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new ks(e.node(0))}static atStart(e){return td(e,e,0,0,1)||new ks(e)}static atEnd(e){return td(e,e,e.content.size,e.childCount,-1)||new ks(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Pg[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in Pg)throw new RangeError("Duplicate use of selection JSON ID "+e);return Pg[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Di.between(this.$anchor,this.$head).getBookmark()}};Li.prototype.visible=!0;var Lg=class{constructor(e,t){this.$from=e,this.$to=t}},G5=!1;function W5(i){!G5&&!i.parent.inlineContent&&(G5=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}var Di=class i extends Li{constructor(e,t=e){W5(e),W5(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Li.near(r);let o=e.resolve(t.map(this.anchor));return new i(o.parent.inlineContent?o:r,r)}replace(e,t=Zt.empty){if(super.replace(e,t),t==Zt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof i&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new F0(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new i(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let n=Li.findFrom(t,r,!0)||Li.findFrom(t,-r,!0);if(n)t=n.$head;else return Li.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(Li.findFrom(e,-r,!0)||Li.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new i(e,t)}};Li.jsonID("text",Di);var F0=class i{constructor(e,t){this.anchor=e,this.head=t}map(e){return new i(e.map(this.anchor),e.map(this.head))}resolve(e){return Di.between(e.resolve(this.anchor),e.resolve(this.head))}},gi=class i extends Li{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),n=e.resolve(o);return r?Li.near(n):new i(n)}content(){return new Zt(Et.from(this.node),0,0)}eq(e){return e instanceof i&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Fg(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new i(e.resolve(t.anchor))}static create(e,t){return new i(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};gi.prototype.visible=!1;Li.jsonID("node",gi);var Fg=class i{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new F0(r,r):new i(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&gi.isSelectable(r)?new gi(t):Li.near(t)}},ks=class i extends Li{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Zt.empty){if(t==Zt.empty){e.delete(0,e.doc.content.size);let r=Li.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new i(e)}map(e){return new i(e)}eq(e){return e instanceof i}getBookmark(){return BC}};Li.jsonID("all",ks);var BC={map(){return this},resolve(i){return new ks(i)}};function td(i,e,t,r,o,n=!1){if(e.inlineContent)return Di.create(i,t);for(let u=r-(o>0?0:1);o>0?u<e.childCount:u>=0;u+=o){let h=e.child(u);if(h.isAtom){if(!n&&gi.isSelectable(h))return gi.create(i,t-(o<0?h.nodeSize:0))}else{let m=td(i,h,t+o,o<0?h.childCount:0,o,n);if(m)return m}t+=h.nodeSize*o}return null}function Z5(i,e,t){let r=i.steps.length-1;if(r<e)return;let o=i.steps[r];if(!(o instanceof Oo||o instanceof Bn))return;let n=i.mapping.maps[r],u;n.forEach((h,m,b,_)=>{u==null&&(u=_)}),i.setSelection(Li.near(i.doc.resolve(u),t))}var K5=1,L0=2,J5=4,zg=class extends ap{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|K5)&~L0,this.storedMarks=null,this}get selectionSet(){return(this.updated&K5)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=L0,this}ensureMarks(e){return dr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&L0)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~L0,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||dr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let n=this.storedMarks;if(!n){let u=this.doc.resolve(t);n=r==t?u.marks():u.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,n)),this.selection.empty||this.setSelection(Li.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=J5,this}get scrolledIntoView(){return(this.updated&J5)>0}};function X5(i,e){return!e||!i?i:i.bind(e)}var Uc=class{constructor(e,t,r){this.name=e,this.init=X5(t.init,r),this.apply=X5(t.apply,r)}},RC=[new Uc("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new Uc("selection",{init(i,e){return i.selection||Li.atStart(e.doc)},apply(i){return i.selection}}),new Uc("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,t,r){return r.selection.$cursor?i.storedMarks:null}}),new Uc("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})],cp=class{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=RC.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Uc(r.key,r.spec.state,r))})}},z0=class i{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let n=!1;for(let u=0;u<this.config.plugins.length;u++){let h=this.config.plugins[u];if(h.spec.appendTransaction){let m=o?o[u].n:0,b=o?o[u].state:this,_=m<t.length&&h.spec.appendTransaction.call(h,m?t.slice(m):t,b,r);if(_&&r.filterTransaction(_,u)){if(_.setMeta("appendedTransaction",e),!o){o=[];for(let S=0;S<this.config.plugins.length;S++)o.push(S<u?{state:r,n:t.length}:{state:this,n:0})}t.push(_),r=r.applyInner(_),n=!0}o&&(o[u]={state:r,n:t.length})}}if(!n)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new i(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let n=r[o];t[n.name]=n.apply(e,this[n.name],this,t)}return t}get tr(){return new zg(this)}static create(e){let t=new cp(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new i(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new cp(this.schema,e.plugins),r=t.fields,o=new i(t);for(let n=0;n<r.length;n++){let u=r[n].name;o[u]=this.hasOwnProperty(u)?this[u]:r[n].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],n=o.spec.state;n&&n.toJSON&&(t[r]=n.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new cp(e.schema,e.plugins),n=new i(o);return o.fields.forEach(u=>{if(u.name=="doc")n.doc=na.fromJSON(e.schema,t.doc);else if(u.name=="selection")n.selection=Li.fromJSON(n.doc,t.selection);else if(u.name=="storedMarks")t.storedMarks&&(n.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let h in r){let m=r[h],b=m.spec.state;if(m.key==u.name&&b&&b.fromJSON&&Object.prototype.hasOwnProperty.call(t,h)){n[u.name]=b.fromJSON.call(m,e,t[h],n);return}}n[u.name]=u.init(e,n)}}),n}};function Y5(i,e,t){for(let r in i){let o=i[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=Y5(o,e,{})),t[r]=o}return t}var jr=class{constructor(e){this.spec=e,this.props={},e.props&&Y5(e.props,this,this.props),this.key=e.key?e.key.key:e4("plugin")}getState(e){return e[this.key]}},Dg=Object.create(null);function e4(i){return i in Dg?i+"$"+ ++Dg[i]:(Dg[i]=0,i+"$")}var Gn=class{constructor(e="key"){this.key=e4(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var vo=function(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e},pp=function(i){let e=i.assignedSlot||i.parentNode;return e&&e.nodeType==11?e.host:e},Ug=null,rl=function(i,e,t){let r=Ug||(Ug=document.createRange());return r.setEnd(i,t??i.nodeValue.length),r.setStart(i,e||0),r},UC=function(){Ug=null},Gc=function(i,e,t,r){return t&&(t4(i,e,t,r,-1)||t4(i,e,t,r,1))},VC=/^(img|br|input|textarea|hr)$/i;function t4(i,e,t,r,o){for(;;){if(i==t&&e==r)return!0;if(e==(o<0?0:Sa(i))){let n=i.parentNode;if(!n||n.nodeType!=1||yp(i)||VC.test(i.nodeName)||i.contentEditable=="false")return!1;e=vo(i)+(o<0?0:1),i=n}else if(i.nodeType==1){if(i=i.childNodes[e+(o<0?-1:0)],i.contentEditable=="false")return!1;e=o<0?Sa(i):0}else return!1}}function Sa(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function jC(i,e){for(;;){if(i.nodeType==3&&e)return i;if(i.nodeType==1&&e>0){if(i.contentEditable=="false")return null;i=i.childNodes[e-1],e=Sa(i)}else if(i.parentNode&&!yp(i))e=vo(i),i=i.parentNode;else return null}}function HC(i,e){for(;;){if(i.nodeType==3&&e<i.nodeValue.length)return i;if(i.nodeType==1&&e<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[e],e=0}else if(i.parentNode&&!yp(i))e=vo(i)+1,i=i.parentNode;else return null}}function qC(i,e,t){for(let r=e==0,o=e==Sa(i);r||o;){if(i==t)return!0;let n=vo(i);if(i=i.parentNode,!i)return!1;r=r&&n==0,o=o&&n==Sa(i)}}function yp(i){let e;for(let t=i;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==i||e.contentDOM==i)}var Q0=function(i){return i.focusNode&&Gc(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function Vc(i,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=i,t.key=t.code=e,t}function $C(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function QC(i,e,t){if(i.caretPositionFromPoint)try{let r=i.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:r.offset}}catch{}if(i.caretRangeFromPoint){let r=i.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:r.startOffset}}}var Ca=typeof navigator<"u"?navigator:null,i4=typeof document<"u"?document:null,rc=Ca&&Ca.userAgent||"",Vg=/Edge\/(\d+)/.exec(rc),F4=/MSIE \d/.exec(rc),jg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rc),hs=!!(F4||jg||Vg),tc=F4?document.documentMode:jg?+jg[1]:Vg?+Vg[1]:0,aa=!hs&&/gecko\/(\d+)/i.test(rc);aa&&+(/Firefox\/(\d+)/.exec(rc)||[0,0])[1];var Hg=!hs&&/Chrome\/(\d+)/.exec(rc),Jo=!!Hg,GC=Hg?+Hg[1]:0,Xo=!hs&&!!Ca&&/Apple Computer/.test(Ca.vendor),sd=Xo&&(/Mobile\/\w+/.test(rc)||!!Ca&&Ca.maxTouchPoints>2),Bs=sd||(Ca?/Mac/.test(Ca.platform):!1),WC=Ca?/Win/.test(Ca.platform):!1,sa=/Android \d/.test(rc),bp=!!i4&&"webkitFontSmoothing"in i4.documentElement.style,ZC=bp?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function KC(i){let e=i.defaultView&&i.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function il(i,e){return typeof i=="number"?i:i[e]}function JC(i){let e=i.getBoundingClientRect(),t=e.width/i.offsetWidth||1,r=e.height/i.offsetHeight||1;return{left:e.left,right:e.left+i.clientWidth*t,top:e.top,bottom:e.top+i.clientHeight*r}}function r4(i,e,t){let r=i.someProp("scrollThreshold")||0,o=i.someProp("scrollMargin")||5,n=i.dom.ownerDocument;for(let u=t||i.dom;u;u=pp(u)){if(u.nodeType!=1)continue;let h=u,m=h==n.body,b=m?KC(n):JC(h),_=0,S=0;if(e.top<b.top+il(r,"top")?S=-(b.top-e.top+il(o,"top")):e.bottom>b.bottom-il(r,"bottom")&&(S=e.bottom-e.top>b.bottom-b.top?e.top+il(o,"top")-b.top:e.bottom-b.bottom+il(o,"bottom")),e.left<b.left+il(r,"left")?_=-(b.left-e.left+il(o,"left")):e.right>b.right-il(r,"right")&&(_=e.right-b.right+il(o,"right")),_||S)if(m)n.defaultView.scrollBy(_,S);else{let T=h.scrollLeft,P=h.scrollTop;S&&(h.scrollTop+=S),_&&(h.scrollLeft+=_);let F=h.scrollLeft-T,G=h.scrollTop-P;e={left:e.left-F,top:e.top-G,right:e.right-F,bottom:e.bottom-G}}if(m||/^(fixed|sticky)$/.test(getComputedStyle(u).position))break}}function XC(i){let e=i.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let n=(e.left+e.right)/2,u=t+1;u<Math.min(innerHeight,e.bottom);u+=5){let h=i.root.elementFromPoint(n,u);if(!h||h==i.dom||!i.dom.contains(h))continue;let m=h.getBoundingClientRect();if(m.top>=t-20){r=h,o=m.top;break}}return{refDOM:r,refTop:o,stack:z4(i.dom)}}function z4(i){let e=[],t=i.ownerDocument;for(let r=i;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),i!=t);r=pp(r));return e}function YC({refDOM:i,refTop:e,stack:t}){let r=i?i.getBoundingClientRect().top:0;N4(t,r==0?0:r-e)}function N4(i,e){for(let t=0;t<i.length;t++){let{dom:r,top:o,left:n}=i[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=n&&(r.scrollLeft=n)}}var id=null;function eE(i){if(i.setActive)return i.setActive();if(id)return i.focus(id);let e=z4(i);i.focus(id==null?{get preventScroll(){return id={preventScroll:!0},!0}}:void 0),id||(id=!1,N4(e,0))}function O4(i,e){let t,r=2e8,o,n=0,u=e.top,h=e.top,m,b;for(let _=i.firstChild,S=0;_;_=_.nextSibling,S++){let T;if(_.nodeType==1)T=_.getClientRects();else if(_.nodeType==3)T=rl(_).getClientRects();else continue;for(let P=0;P<T.length;P++){let F=T[P];if(F.top<=u&&F.bottom>=h){u=Math.max(F.bottom,u),h=Math.min(F.top,h);let G=F.left>e.left?F.left-e.left:F.right<e.left?e.left-F.right:0;if(G<r){t=_,r=G,o=G&&t.nodeType==3?{left:F.right<e.left?F.right:F.left,top:e.top}:e,_.nodeType==1&&G&&(n=S+(e.left>=(F.left+F.right)/2?1:0));continue}}else F.top>e.top&&!m&&F.left<=e.left&&F.right>=e.left&&(m=_,b={left:Math.max(F.left,Math.min(F.right,e.left)),top:F.top});!t&&(e.left>=F.right&&e.top>=F.top||e.left>=F.left&&e.top>=F.bottom)&&(n=S+1)}}return!t&&m&&(t=m,o=b,r=0),t&&t.nodeType==3?tE(t,o):!t||r&&t.nodeType==1?{node:i,offset:n}:O4(t,o)}function tE(i,e){let t=i.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(i,o+1),r.setStart(i,o);let n=Xl(r,1);if(n.top!=n.bottom&&o2(e,n))return{node:i,offset:o+(e.left>=(n.left+n.right)/2?1:0)}}return{node:i,offset:0}}function o2(i,e){return i.left>=e.left-1&&i.left<=e.right+1&&i.top>=e.top-1&&i.top<=e.bottom+1}function iE(i,e){let t=i.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<i.getBoundingClientRect().left?t:i}function rE(i,e,t){let{node:r,offset:o}=O4(e,t),n=-1;if(r.nodeType==1&&!r.firstChild){let u=r.getBoundingClientRect();n=u.left!=u.right&&t.left>(u.left+u.right)/2?1:-1}return i.docView.posFromDOM(r,o,n)}function nE(i,e,t,r){let o=-1;for(let n=e,u=!1;n!=i.dom;){let h=i.docView.nearestDesc(n,!0);if(!h)return null;if(h.dom.nodeType==1&&(h.node.isBlock&&h.parent&&!u||!h.contentDOM)){let m=h.dom.getBoundingClientRect();if(h.node.isBlock&&h.parent&&!u&&(u=!0,m.left>r.left||m.top>r.top?o=h.posBefore:(m.right<r.left||m.bottom<r.top)&&(o=h.posAfter)),!h.contentDOM&&o<0&&!h.node.isText)return(h.node.isBlock?r.top<(m.top+m.bottom)/2:r.left<(m.left+m.right)/2)?h.posBefore:h.posAfter}n=h.dom.parentNode}return o>-1?o:i.docView.posFromDOM(e,t,-1)}function B4(i,e,t){let r=i.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),n=o;;){let u=i.childNodes[n];if(u.nodeType==1){let h=u.getClientRects();for(let m=0;m<h.length;m++){let b=h[m];if(o2(e,b))return B4(u,e,b)}}if((n=(n+1)%r)==o)break}return i}function oE(i,e){let t=i.dom.ownerDocument,r,o=0,n=QC(t,e.left,e.top);n&&({node:r,offset:o}=n);let u=(i.root.elementFromPoint?i.root:t).elementFromPoint(e.left,e.top),h;if(!u||!i.dom.contains(u.nodeType!=1?u.parentNode:u)){let b=i.dom.getBoundingClientRect();if(!o2(e,b)||(u=B4(i.dom,e,b),!u))return null}if(Xo)for(let b=u;r&&b;b=pp(b))b.draggable&&(r=void 0);if(u=iE(u,e),r){if(aa&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let _=r.childNodes[o],S;_.nodeName=="IMG"&&(S=_.getBoundingClientRect()).right<=e.left&&S.bottom>e.top&&o++}let b;bp&&o&&r.nodeType==1&&(b=r.childNodes[o-1]).nodeType==1&&b.contentEditable=="false"&&b.getBoundingClientRect().top>=e.top&&o--,r==i.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?h=i.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(h=nE(i,r,o,e))}h==null&&(h=rE(i,u,e));let m=i.docView.nearestDesc(u,!0);return{pos:h,inside:m?m.posAtStart-m.border:-1}}function n4(i){return i.top<i.bottom||i.left<i.right}function Xl(i,e){let t=i.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(n4(r))return r}return Array.prototype.find.call(t,n4)||i.getBoundingClientRect()}var sE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function R4(i,e,t){let{node:r,offset:o,atom:n}=i.docView.domFromPos(e,t<0?-1:1),u=bp||aa;if(r.nodeType==3)if(u&&(sE.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let m=Xl(rl(r,o,o),t);if(aa&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let b=Xl(rl(r,o-1,o-1),-1);if(b.top==m.top){let _=Xl(rl(r,o,o+1),-1);if(_.top!=m.top)return up(_,_.left<b.left)}}return m}else{let m=o,b=o,_=t<0?1:-1;return t<0&&!o?(b++,_=-1):t>=0&&o==r.nodeValue.length?(m--,_=1):t<0?m--:b++,up(Xl(rl(r,m,b),_),_<0)}if(!i.state.doc.resolve(e-(n||0)).parent.inlineContent){if(n==null&&o&&(t<0||o==Sa(r))){let m=r.childNodes[o-1];if(m.nodeType==1)return Ng(m.getBoundingClientRect(),!1)}if(n==null&&o<Sa(r)){let m=r.childNodes[o];if(m.nodeType==1)return Ng(m.getBoundingClientRect(),!0)}return Ng(r.getBoundingClientRect(),t>=0)}if(n==null&&o&&(t<0||o==Sa(r))){let m=r.childNodes[o-1],b=m.nodeType==3?rl(m,Sa(m)-(u?0:1)):m.nodeType==1&&(m.nodeName!="BR"||!m.nextSibling)?m:null;if(b)return up(Xl(b,1),!1)}if(n==null&&o<Sa(r)){let m=r.childNodes[o];for(;m.pmViewDesc&&m.pmViewDesc.ignoreForCoords;)m=m.nextSibling;let b=m?m.nodeType==3?rl(m,0,u?0:1):m.nodeType==1?m:null:null;if(b)return up(Xl(b,-1),!0)}return up(Xl(r.nodeType==3?rl(r):r,-t),t>=0)}function up(i,e){if(i.width==0)return i;let t=e?i.left:i.right;return{top:i.top,bottom:i.bottom,left:t,right:t}}function Ng(i,e){if(i.height==0)return i;let t=e?i.top:i.bottom;return{top:t,bottom:t,left:i.left,right:i.right}}function U4(i,e,t){let r=i.state,o=i.root.activeElement;r!=e&&i.updateState(e),o!=i.dom&&i.focus();try{return t()}finally{r!=e&&i.updateState(r),o!=i.dom&&o&&o.focus()}}function aE(i,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return U4(i,e,()=>{let{node:n}=i.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let h=i.docView.nearestDesc(n,!0);if(!h)break;if(h.node.isBlock){n=h.contentDOM||h.dom;break}n=h.dom.parentNode}let u=R4(i,o.pos,1);for(let h=n.firstChild;h;h=h.nextSibling){let m;if(h.nodeType==1)m=h.getClientRects();else if(h.nodeType==3)m=rl(h,0,h.nodeValue.length).getClientRects();else continue;for(let b=0;b<m.length;b++){let _=m[b];if(_.bottom>_.top+1&&(t=="up"?u.top-_.top>(_.bottom-u.top)*2:_.bottom-u.bottom>(u.bottom-_.top)*2))return!1}}return!0})}var lE=/[\u0590-\u08ac]/;function cE(i,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,n=!o,u=o==r.parent.content.size,h=i.domSelection();return!lE.test(r.parent.textContent)||!h.modify?t=="left"||t=="backward"?n:u:U4(i,e,()=>{let{focusNode:m,focusOffset:b,anchorNode:_,anchorOffset:S}=i.domSelectionRange(),T=h.caretBidiLevel;h.modify("move",t,"character");let P=r.depth?i.docView.domAfterPos(r.before()):i.dom,{focusNode:F,focusOffset:G}=i.domSelectionRange(),$=F&&!P.contains(F.nodeType==1?F:F.parentNode)||m==F&&b==G;try{h.collapse(_,S),m&&(m!=_||b!=S)&&h.extend&&h.extend(m,b)}catch{}return T!=null&&(h.caretBidiLevel=T),$})}var o4=null,s4=null,a4=!1;function uE(i,e,t){return o4==e&&s4==t?a4:(o4=e,s4=t,a4=t=="up"||t=="down"?aE(i,e,t):cE(i,e,t))}var Rs=0,l4=1,jc=2,Ea=3,Wc=class{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=Rs,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let n,u;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((u=n.pmViewDesc)&&u.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(u)+u.size:this.posAtStart}else{let n,u;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((u=n.pmViewDesc)&&u.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(u):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>vo(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let n=e;;n=n.parentNode){if(n==this.dom){o=!1;break}if(n.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let n=e;;n=n.parentNode){if(n==this.dom){o=!0;break}if(n.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let n=this.getDesc(o),u;if(n&&(!t||n.node))if(r&&(u=n.nodeDOM)&&!(u.nodeType==1?u.contains(e.nodeType==1?e:e.parentNode):u==e))r=!1;else return n}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let n=this.getDesc(o);if(n)return n.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],n=r+o.size;if(r==e&&n!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(e<n)return o.descAt(e-r-o.border);r=n}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let n=0;r<this.children.length;r++){let u=this.children[r],h=n+u.size;if(h>e||u instanceof B0){o=e-n;break}n=h}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let n;r&&!(n=this.children[r-1]).size&&n instanceof N0&&n.side>=0;r--);if(t<=0){let n,u=!0;for(;n=r?this.children[r-1]:null,!(!n||n.dom.parentNode==this.contentDOM);r--,u=!1);return n&&t&&u&&!n.border&&!n.domAtom?n.domFromPos(n.size,t):{node:this.contentDOM,offset:n?vo(n.dom)+1:0}}else{let n,u=!0;for(;n=r<this.children.length?this.children[r]:null,!(!n||n.dom.parentNode==this.contentDOM);r++,u=!1);return n&&u&&!n.border&&!n.domAtom?n.domFromPos(0,t):{node:this.contentDOM,offset:n?vo(n.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,n=-1;for(let u=r,h=0;;h++){let m=this.children[h],b=u+m.size;if(o==-1&&e<=b){let _=u+m.border;if(e>=_&&t<=b-m.border&&m.node&&m.contentDOM&&this.contentDOM.contains(m.contentDOM))return m.parseRange(e,t,_);e=u;for(let S=h;S>0;S--){let T=this.children[S-1];if(T.size&&T.dom.parentNode==this.contentDOM&&!T.emptyChildAt(1)){o=vo(T.dom)+1;break}e-=T.size}o==-1&&(o=0)}if(o>-1&&(b>t||h==this.children.length-1)){t=b;for(let _=h+1;_<this.children.length;_++){let S=this.children[_];if(S.size&&S.dom.parentNode==this.contentDOM&&!S.emptyChildAt(-1)){n=vo(S.dom);break}t+=S.size}n==-1&&(n=this.contentDOM.childNodes.length);break}u=b}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:n}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let n=Math.min(e,t),u=Math.max(e,t);for(let T=0,P=0;T<this.children.length;T++){let F=this.children[T],G=P+F.size;if(n>P&&u<G)return F.setSelection(e-P-F.border,t-P-F.border,r,o);P=G}let h=this.domFromPos(e,e?-1:1),m=t==e?h:this.domFromPos(t,t?-1:1),b=r.getSelection(),_=!1;if((aa||Xo)&&e==t){let{node:T,offset:P}=h;if(T.nodeType==3){if(_=!!(P&&T.nodeValue[P-1]==`
`),_&&P==T.nodeValue.length)for(let F=T,G;F;F=F.parentNode){if(G=F.nextSibling){G.nodeName=="BR"&&(h=m={node:G.parentNode,offset:vo(G)+1});break}let $=F.pmViewDesc;if($&&$.node&&$.node.isBlock)break}}else{let F=T.childNodes[P-1];_=F&&(F.nodeName=="BR"||F.contentEditable=="false")}}if(aa&&b.focusNode&&b.focusNode!=m.node&&b.focusNode.nodeType==1){let T=b.focusNode.childNodes[b.focusOffset];T&&T.contentEditable=="false"&&(o=!0)}if(!(o||_&&Xo)&&Gc(h.node,h.offset,b.anchorNode,b.anchorOffset)&&Gc(m.node,m.offset,b.focusNode,b.focusOffset))return;let S=!1;if((b.extend||e==t)&&!_){b.collapse(h.node,h.offset);try{e!=t&&b.extend(m.node,m.offset),S=!0}catch{}}if(!S){if(e>t){let P=h;h=m,m=P}let T=document.createRange();T.setEnd(m.node,m.offset),T.setStart(h.node,h.offset),b.removeAllRanges(),b.addRange(T)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let n=this.children[o],u=r+n.size;if(r==u?e<=u&&t>=r:e<u&&t>r){let h=r+n.border,m=u-n.border;if(e>=h&&t<=m){this.dirty=e==r||t==u?jc:l4,e==h&&t==m&&(n.contentLost||n.dom.parentNode!=this.contentDOM)?n.dirty=Ea:n.markDirty(e-h,t-h);return}else n.dirty=n.dom==n.contentDOM&&n.dom.parentNode==this.contentDOM&&!n.children.length?jc:Ea}r=u}this.dirty=jc}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?jc:l4;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}},N0=class extends Wc{constructor(e,t,r,o){let n,u=t.type.toDOM;if(typeof u=="function"&&(u=u(r,()=>{if(!n)return o;if(n.parent)return n.parent.posBeforeChild(n)})),!t.type.spec.raw){if(u.nodeType!=1){let h=document.createElement("span");h.appendChild(u),u=h}u.contentEditable="false",u.classList.add("ProseMirror-widget")}super(e,[],u,null),this.widget=t,this.widget=t,n=this}matchesWidget(e){return this.dirty==Rs&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},qg=class extends Wc{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},ad=class i extends Wc{constructor(e,t,r,o){super(e,[],r,o),this.mark=t}static create(e,t,r,o){let n=o.nodeViews[t.type.name],u=n&&n(t,o,r);return(!u||!u.dom)&&(u=Ya.renderSpec(document,t.type.spec.toDOM(t,r))),new i(e,t,u.dom,u.contentDOM||u.dom)}parseRule(){return this.dirty&Ea||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ea&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Rs){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Rs}}slice(e,t,r){let o=i.create(this.parent,this.mark,!0,r),n=this.children,u=this.size;t<u&&(n=Zg(n,t,u,r)),e>0&&(n=Zg(n,0,e,r));for(let h=0;h<n.length;h++)n[h].parent=o;return o.children=n,o}},ic=class i extends Wc{constructor(e,t,r,o,n,u,h,m,b){super(e,[],n,u),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=h}static create(e,t,r,o,n,u){let h=n.nodeViews[t.type.name],m,b=h&&h(t,n,()=>{if(!m)return u;if(m.parent)return m.parent.posBeforeChild(m)},r,o),_=b&&b.dom,S=b&&b.contentDOM;if(t.isText){if(!_)_=document.createTextNode(t.text);else if(_.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else _||({dom:_,contentDOM:S}=Ya.renderSpec(document,t.type.spec.toDOM(t)));!S&&!t.isText&&_.nodeName!="BR"&&(_.hasAttribute("contenteditable")||(_.contentEditable="false"),t.type.spec.draggable&&(_.draggable=!0));let T=_;return _=H4(_,r,t),b?m=new $g(e,t,r,o,_,S||null,T,b,n,u+1):t.isText?new O0(e,t,r,o,_,T,n):new i(e,t,r,o,_,S||null,T,n,u+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Et.empty)}return e}matchesNode(e,t,r){return this.dirty==Rs&&e.eq(this.node)&&Gg(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,n=e.composing?this.localCompositionInfo(e,t):null,u=n&&n.pos>-1?n:null,h=n&&n.pos<0,m=new Wg(this,u&&u.node,e);fE(this.node,this.innerDeco,(b,_,S)=>{b.spec.marks?m.syncToMarks(b.spec.marks,r,e):b.type.side>=0&&!S&&m.syncToMarks(_==this.node.childCount?dr.none:this.node.child(_).marks,r,e),m.placeWidget(b,e,o)},(b,_,S,T)=>{m.syncToMarks(b.marks,r,e);let P;m.findNodeMatch(b,_,S,T)||h&&e.state.selection.from>o&&e.state.selection.to<o+b.nodeSize&&(P=m.findIndexWithChild(n.node))>-1&&m.updateNodeAt(b,_,S,P,e)||m.updateNextNode(b,_,S,e,T,o)||m.addNode(b,_,S,e,o),o+=b.nodeSize}),m.syncToMarks([],r,e),this.node.isTextblock&&m.addTextblockHacks(),m.destroyRest(),(m.changed||this.dirty==jc)&&(u&&this.protectLocalComposition(e,u),V4(this.contentDOM,this.children,e),sd&&mE(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Di)||r<t||o>t+this.node.content.size)return null;let n=e.input.compositionNode;if(!n||!this.dom.contains(n.parentNode))return null;if(this.node.inlineContent){let u=n.nodeValue,h=gE(this.node.content,u,r-t,o-t);return h<0?null:{node:n,pos:h,text:u}}else return{node:n,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let n=t;for(;n.parentNode!=this.contentDOM;n=n.parentNode){for(;n.previousSibling;)n.parentNode.removeChild(n.previousSibling);for(;n.nextSibling;)n.parentNode.removeChild(n.nextSibling);n.pmViewDesc&&(n.pmViewDesc=void 0)}let u=new qg(this,n,t,o);e.input.compositionNodes.push(u),this.children=Zg(this.children,r,r+o.length,e,u)}update(e,t,r,o){return this.dirty==Ea||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Rs}updateOuterDeco(e){if(Gg(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=j4(this.dom,this.nodeDOM,Qg(this.outerDeco,this.node,t),Qg(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}};function c4(i,e,t,r,o){H4(r,e,i);let n=new ic(void 0,i,e,t,r,r,r,o,0);return n.contentDOM&&n.updateChildren(o,0),n}var O0=class i extends ic{constructor(e,t,r,o,n,u,h){super(e,t,r,o,n,null,u,h,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==Ea||this.dirty!=Rs&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Rs||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Rs,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),n=document.createTextNode(o.text);return new i(this.parent,o,this.outerDeco,this.innerDeco,n,n,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Ea)}get domAtom(){return!1}isText(e){return this.node.text==e}},B0=class extends Wc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Rs&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},$g=class extends ic{constructor(e,t,r,o,n,u,h,m,b,_){super(e,t,r,o,n,u,h,b,_),this.spec=m}update(e,t,r,o){if(this.dirty==Ea)return!1;if(this.spec.update){let n=this.spec.update(e,t,r);return n&&this.updateInner(e,t,r,o),n}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};function V4(i,e,t){let r=i.firstChild,o=!1;for(let n=0;n<e.length;n++){let u=e[n],h=u.dom;if(h.parentNode==i){for(;h!=r;)r=u4(r),o=!0;r=r.nextSibling}else o=!0,i.insertBefore(h,r);if(u instanceof ad){let m=r?r.previousSibling:i.lastChild;V4(u.contentDOM,u.children,t),r=m?m.nextSibling:i.firstChild}}for(;r;)r=u4(r),o=!0;o&&t.trackWrites==i&&(t.trackWrites=null)}var dp=function(i){i&&(this.nodeName=i)};dp.prototype=Object.create(null);var Hc=[new dp];function Qg(i,e,t){if(i.length==0)return Hc;let r=t?Hc[0]:new dp,o=[r];for(let n=0;n<i.length;n++){let u=i[n].type.attrs;if(u){u.nodeName&&o.push(r=new dp(u.nodeName));for(let h in u){let m=u[h];m!=null&&(t&&o.length==1&&o.push(r=new dp(e.isInline?"span":"div")),h=="class"?r.class=(r.class?r.class+" ":"")+m:h=="style"?r.style=(r.style?r.style+";":"")+m:h!="nodeName"&&(r[h]=m))}}}return o}function j4(i,e,t,r){if(t==Hc&&r==Hc)return e;let o=e;for(let n=0;n<r.length;n++){let u=r[n],h=t[n];if(n){let m;h&&h.nodeName==u.nodeName&&o!=i&&(m=o.parentNode)&&m.nodeName.toLowerCase()==u.nodeName||(m=document.createElement(u.nodeName),m.pmIsDeco=!0,m.appendChild(o),h=Hc[0]),o=m}dE(o,h||Hc[0],u)}return o}function dE(i,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&i.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&i.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let n=0;n<r.length;n++)o.indexOf(r[n])==-1&&i.classList.remove(r[n]);for(let n=0;n<o.length;n++)r.indexOf(o[n])==-1&&i.classList.add(o[n]);i.classList.length==0&&i.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)i.style.removeProperty(o[1])}t.style&&(i.style.cssText+=t.style)}}function H4(i,e,t){return j4(i,i,Hc,Qg(e,t,i.nodeType!=1))}function Gg(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].type.eq(e[t].type))return!1;return!0}function u4(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}var Wg=class{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,n=this.stack.length>>1,u=Math.min(n,e.length);for(;o<u&&(o==n-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<n;)this.destroyRest(),this.top.dirty=Rs,this.index=this.stack.pop(),this.top=this.stack.pop(),n--;for(;n<e.length;){this.stack.push(this.top,this.index+1);let h=-1;for(let m=this.index;m<Math.min(this.index+3,this.top.children.length);m++){let b=this.top.children[m];if(b.matchesMark(e[n])&&!this.isLocked(b.dom)){h=m;break}}if(h>-1)h>this.index&&(this.changed=!0,this.destroyBetween(this.index,h)),this.top=this.top.children[this.index];else{let m=ad.create(this.top,e[n],t,r);this.top.children.splice(this.index,0,m),this.top=m,this.changed=!0}this.index=0,n++}}findNodeMatch(e,t,r,o){let n=-1,u;if(o>=this.preMatch.index&&(u=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&u.matchesNode(e,t,r))n=this.top.children.indexOf(u,this.index);else for(let h=this.index,m=Math.min(this.top.children.length,h+5);h<m;h++){let b=this.top.children[h];if(b.matchesNode(e,t,r)&&!this.preMatch.matched.has(b)){n=h;break}}return n<0?!1:(this.destroyBetween(this.index,n),this.index++,!0)}updateNodeAt(e,t,r,o,n){let u=this.top.children[o];return u.dirty==Ea&&u.dom==u.contentDOM&&(u.dirty=jc),u.update(e,t,r,n)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,n,u){for(let h=this.index;h<this.top.children.length;h++){let m=this.top.children[h];if(m instanceof ic){let b=this.preMatch.matched.get(m);if(b!=null&&b!=n)return!1;let _=m.dom,S,T=this.isLocked(_)&&!(e.isText&&m.node&&m.node.isText&&m.nodeDOM.nodeValue==e.text&&m.dirty!=Ea&&Gg(t,m.outerDeco));if(!T&&m.update(e,t,r,o))return this.destroyBetween(this.index,h),m.dom!=_&&(this.changed=!0),this.index++,!0;if(!T&&(S=this.recreateWrapper(m,e,t,r,o,u)))return this.top.children[this.index]=S,S.contentDOM&&(S.dirty=jc,S.updateChildren(o,u+1),S.dirty=Rs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,n,u){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let h=ic.create(this.top,t,r,o,n,u);if(h.contentDOM){h.children=e.children,e.children=[];for(let m of h.children)m.parent=h}return e.destroy(),h}addNode(e,t,r,o,n){let u=ic.create(this.top,e,t,r,o,n);u.contentDOM&&u.updateChildren(o,n+1),this.top.children.splice(this.index++,0,u),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let n=new N0(this.top,e,t,r);this.top.children.splice(this.index++,0,n),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ad;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof O0)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Xo||Jo)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new B0(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};function hE(i,e){let t=e,r=t.children.length,o=i.childCount,n=new Map,u=[];e:for(;o>0;){let h;for(;;)if(r){let b=t.children[r-1];if(b instanceof ad)t=b,r=b.children.length;else{h=b,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let m=h.node;if(m){if(m!=i.child(o-1))break;--o,n.set(h,o),u.push(h)}}return{index:o,matched:n,matches:u.reverse()}}function pE(i,e){return i.type.side-e.type.side}function fE(i,e,t,r){let o=e.locals(i),n=0;if(o.length==0){for(let b=0;b<i.childCount;b++){let _=i.child(b);r(_,o,e.forChild(n,_),b),n+=_.nodeSize}return}let u=0,h=[],m=null;for(let b=0;;){let _,S;for(;u<o.length&&o[u].to==n;){let $=o[u++];$.widget&&(_?(S||(S=[_])).push($):_=$)}if(_)if(S){S.sort(pE);for(let $=0;$<S.length;$++)t(S[$],b,!!m)}else t(_,b,!!m);let T,P;if(m)P=-1,T=m,m=null;else if(b<i.childCount)P=b,T=i.child(b++);else break;for(let $=0;$<h.length;$++)h[$].to<=n&&h.splice($--,1);for(;u<o.length&&o[u].from<=n&&o[u].to>n;)h.push(o[u++]);let F=n+T.nodeSize;if(T.isText){let $=F;u<o.length&&o[u].from<$&&($=o[u].from);for(let ee=0;ee<h.length;ee++)h[ee].to<$&&($=h[ee].to);$<F&&(m=T.cut($-n),T=T.cut(0,$-n),F=$,P=-1)}else for(;u<o.length&&o[u].to<F;)u++;let G=T.isInline&&!T.isLeaf?h.filter($=>!$.inline):h.slice();r(T,G,e.forChild(n,T),P),n=F}}function mE(i){if(i.nodeName=="UL"||i.nodeName=="OL"){let e=i.style.cssText;i.style.cssText=e+"; list-style: square !important",window.getComputedStyle(i).listStyle,i.style.cssText=e}}function gE(i,e,t,r){for(let o=0,n=0;o<i.childCount&&n<=r;){let u=i.child(o++),h=n;if(n+=u.nodeSize,!u.isText)continue;let m=u.text;for(;o<i.childCount;){let b=i.child(o++);if(n+=b.nodeSize,!b.isText)break;m+=b.text}if(n>=t){if(n>=r&&m.slice(r-e.length-h,r-h)==e)return r-e.length;let b=h<r?m.lastIndexOf(e,r-h-1):-1;if(b>=0&&b+e.length+h>=t)return h+b;if(t==r&&m.length>=r+e.length-h&&m.slice(r-h,r-h+e.length)==e)return r}}return-1}function Zg(i,e,t,r,o){let n=[];for(let u=0,h=0;u<i.length;u++){let m=i[u],b=h,_=h+=m.size;b>=t||_<=e?n.push(m):(b<e&&n.push(m.slice(0,e-b,r)),o&&(n.push(o),o=void 0),_>t&&n.push(m.slice(t-b,m.size,r)))}return n}function s2(i,e=null){let t=i.domSelectionRange(),r=i.state.doc;if(!t.focusNode)return null;let o=i.docView.nearestDesc(t.focusNode),n=o&&o.size==0,u=i.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(u<0)return null;let h=r.resolve(u),m,b;if(Q0(t)){for(m=h;o&&!o.node;)o=o.parent;let _=o.node;if(o&&_.isAtom&&gi.isSelectable(_)&&o.parent&&!(_.isInline&&qC(t.focusNode,t.focusOffset,o.dom))){let S=o.posBefore;b=new gi(u==S?h:r.resolve(S))}}else{let _=i.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(_<0)return null;m=r.resolve(_)}if(!b){let _=e=="pointer"||i.state.selection.head<h.pos&&!n?1:-1;b=a2(i,m,h,_)}return b}function q4(i){return i.editable?i.hasFocus():Q4(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function nl(i,e=!1){let t=i.state.selection;if($4(i,t),!!q4(i)){if(!e&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Jo){let r=i.domSelectionRange(),o=i.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Gc(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){i.input.mouseDown.delayedSelectionSync=!0,i.domObserver.setCurSelection();return}}if(i.domObserver.disconnectSelection(),i.cursorWrapper)bE(i);else{let{anchor:r,head:o}=t,n,u;d4&&!(t instanceof Di)&&(t.$from.parent.inlineContent||(n=h4(i,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(u=h4(i,t.to))),i.docView.setSelection(r,o,i.root,e),d4&&(n&&p4(n),u&&p4(u)),t.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yE(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}var d4=Xo||Jo&&GC<63;function h4(i,e){let{node:t,offset:r}=i.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,n=r?t.childNodes[r-1]:null;if(Xo&&o&&o.contentEditable=="false")return Og(o);if((!o||o.contentEditable=="false")&&(!n||n.contentEditable=="false")){if(o)return Og(o);if(n)return Og(n)}}function Og(i){return i.contentEditable="true",Xo&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function p4(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function yE(i){let e=i.dom.ownerDocument;e.removeEventListener("selectionchange",i.input.hideSelectionGuard);let t=i.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!q4(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}function bE(i){let e=i.domSelection(),t=document.createRange(),r=i.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setEnd(r.parentNode,vo(r)+1):t.setEnd(r,0),t.collapse(!1),e.removeAllRanges(),e.addRange(t),!o&&!i.state.selection.visible&&hs&&tc<=11&&(r.disabled=!0,r.disabled=!1)}function $4(i,e){if(e instanceof gi){let t=i.docView.descAt(e.from);t!=i.lastSelectedViewDesc&&(f4(i),t&&t.selectNode(),i.lastSelectedViewDesc=t)}else f4(i)}function f4(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function a2(i,e,t,r){return i.someProp("createSelectionBetween",o=>o(i,e,t))||Di.between(e,t,r)}function m4(i){return i.editable&&!i.hasFocus()?!1:Q4(i)}function Q4(i){let e=i.domSelectionRange();if(!e.anchorNode)return!1;try{return i.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(i.editable||i.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vE(i){let e=i.docView.domFromPos(i.state.selection.anchor,0),t=i.domSelectionRange();return Gc(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Kg(i,e){let{$anchor:t,$head:r}=i.selection,o=e>0?t.max(r):t.min(r),n=o.parent.inlineContent?o.depth?i.doc.resolve(e>0?o.after():o.before()):null:o;return n&&Li.findFrom(n,e)}function Yl(i,e){return i.dispatch(i.state.tr.setSelection(e).scrollIntoView()),!0}function g4(i,e,t){let r=i.state.selection;if(r instanceof Di)if(t.indexOf("s")>-1){let{$head:o}=r,n=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!n||n.isText||!n.isLeaf)return!1;let u=i.state.doc.resolve(o.pos+n.nodeSize*(e<0?-1:1));return Yl(i,new Di(r.$anchor,u))}else if(r.empty){if(i.endOfTextblock(e>0?"forward":"backward")){let o=Kg(i.state,e);return o&&o instanceof gi?Yl(i,o):!1}else if(!(Bs&&t.indexOf("m")>-1)){let o=r.$head,n=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,u;if(!n||n.isText)return!1;let h=e<0?o.pos-n.nodeSize:o.pos;return n.isAtom||(u=i.docView.descAt(h))&&!u.contentDOM?gi.isSelectable(n)?Yl(i,new gi(e<0?i.state.doc.resolve(o.pos-n.nodeSize):o)):bp?Yl(i,new Di(i.state.doc.resolve(e<0?h:h+n.nodeSize))):!1:!1}}else return!1;else{if(r instanceof gi&&r.node.isInline)return Yl(i,new Di(e>0?r.$to:r.$from));{let o=Kg(i.state,e);return o?Yl(i,o):!1}}}function R0(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function hp(i,e){let t=i.pmViewDesc;return t&&t.size==0&&(e<0||i.nextSibling||i.nodeName!="BR")}function rd(i,e){return e<0?_E(i):xE(i)}function _E(i){let e=i.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,n,u=!1;for(aa&&t.nodeType==1&&r<R0(t)&&hp(t.childNodes[r],-1)&&(u=!0);;)if(r>0){if(t.nodeType!=1)break;{let h=t.childNodes[r-1];if(hp(h,-1))o=t,n=--r;else if(h.nodeType==3)t=h,r=t.nodeValue.length;else break}}else{if(G4(t))break;{let h=t.previousSibling;for(;h&&hp(h,-1);)o=t.parentNode,n=vo(h),h=h.previousSibling;if(h)t=h,r=R0(t);else{if(t=t.parentNode,t==i.dom)break;r=0}}}u?Jg(i,t,r):o&&Jg(i,o,n)}function xE(i){let e=i.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=R0(t),n,u;for(;;)if(r<o){if(t.nodeType!=1)break;let h=t.childNodes[r];if(hp(h,1))n=t,u=++r;else break}else{if(G4(t))break;{let h=t.nextSibling;for(;h&&hp(h,1);)n=h.parentNode,u=vo(h)+1,h=h.nextSibling;if(h)t=h,r=0,o=R0(t);else{if(t=t.parentNode,t==i.dom)break;r=o=0}}}n&&Jg(i,n,u)}function G4(i){let e=i.pmViewDesc;return e&&e.node&&e.node.isBlock}function wE(i,e){for(;i&&e==i.childNodes.length&&!yp(i);)e=vo(i)+1,i=i.parentNode;for(;i&&e<i.childNodes.length;){let t=i.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=0}}function kE(i,e){for(;i&&!e&&!yp(i);)e=vo(i),i=i.parentNode;for(;i&&e;){let t=i.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;i=t,e=i.childNodes.length}}function Jg(i,e,t){if(e.nodeType!=3){let n,u;(u=wE(e,t))?(e=u,t=0):(n=kE(e,t))&&(e=n,t=n.nodeValue.length)}let r=i.domSelection();if(Q0(r)){let n=document.createRange();n.setEnd(e,t),n.setStart(e,t),r.removeAllRanges(),r.addRange(n)}else r.extend&&r.extend(e,t);i.domObserver.setCurSelection();let{state:o}=i;setTimeout(()=>{i.state==o&&nl(i)},50)}function y4(i,e){let t=i.state.doc.resolve(e);if(!(Jo||WC)&&t.parent.inlineContent){let o=i.coordsAtPos(e);if(e>t.start()){let n=i.coordsAtPos(e-1),u=(n.top+n.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(n.left-o.left)>1)return n.left<o.left?"ltr":"rtl"}if(e<t.end()){let n=i.coordsAtPos(e+1),u=(n.top+n.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(n.left-o.left)>1)return n.left>o.left?"ltr":"rtl"}}return getComputedStyle(i.dom).direction=="rtl"?"rtl":"ltr"}function b4(i,e,t){let r=i.state.selection;if(r instanceof Di&&!r.empty||t.indexOf("s")>-1||Bs&&t.indexOf("m")>-1)return!1;let{$from:o,$to:n}=r;if(!o.parent.inlineContent||i.endOfTextblock(e<0?"up":"down")){let u=Kg(i.state,e);if(u&&u instanceof gi)return Yl(i,u)}if(!o.parent.inlineContent){let u=e<0?o:n,h=r instanceof ks?Li.near(u,e):Li.findFrom(u,e);return h?Yl(i,h):!1}return!1}function v4(i,e){if(!(i.state.selection instanceof Di))return!0;let{$head:t,$anchor:r,empty:o}=i.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(i.endOfTextblock(e>0?"forward":"backward"))return!0;let n=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(n&&!n.isText){let u=i.state.tr;return e<0?u.delete(t.pos-n.nodeSize,t.pos):u.delete(t.pos,t.pos+n.nodeSize),i.dispatch(u),!0}return!1}function _4(i,e,t){i.domObserver.stop(),e.contentEditable=t,i.domObserver.start()}function SE(i){if(!Xo||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=i.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;_4(i,r,"true"),setTimeout(()=>_4(i,r,"false"),20)}return!1}function CE(i){let e="";return i.ctrlKey&&(e+="c"),i.metaKey&&(e+="m"),i.altKey&&(e+="a"),i.shiftKey&&(e+="s"),e}function EE(i,e){let t=e.keyCode,r=CE(e);if(t==8||Bs&&t==72&&r=="c")return v4(i,-1)||rd(i,-1);if(t==46&&!e.shiftKey||Bs&&t==68&&r=="c")return v4(i,1)||rd(i,1);if(t==13||t==27)return!0;if(t==37||Bs&&t==66&&r=="c"){let o=t==37?y4(i,i.state.selection.from)=="ltr"?-1:1:-1;return g4(i,o,r)||rd(i,o)}else if(t==39||Bs&&t==70&&r=="c"){let o=t==39?y4(i,i.state.selection.from)=="ltr"?1:-1:1;return g4(i,o,r)||rd(i,o)}else{if(t==38||Bs&&t==80&&r=="c")return b4(i,-1,r)||rd(i,-1);if(t==40||Bs&&t==78&&r=="c")return SE(i)||b4(i,1,r)||rd(i,1);if(r==(Bs?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function W4(i,e){i.someProp("transformCopied",P=>{e=P(e,i)});let t=[],{content:r,openStart:o,openEnd:n}=e;for(;o>1&&n>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,n--;let P=r.firstChild;t.push(P.type.name,P.attrs!=P.type.defaultAttrs?P.attrs:null),r=P.content}let u=i.someProp("clipboardSerializer")||Ya.fromSchema(i.state.schema),h=ex(),m=h.createElement("div");m.appendChild(u.serializeFragment(r,{document:h}));let b=m.firstChild,_,S=0;for(;b&&b.nodeType==1&&(_=Y4[b.nodeName.toLowerCase()]);){for(let P=_.length-1;P>=0;P--){let F=h.createElement(_[P]);for(;m.firstChild;)F.appendChild(m.firstChild);m.appendChild(F),S++}b=m.firstChild}b&&b.nodeType==1&&b.setAttribute("data-pm-slice",`${o} ${n}${S?` -${S}`:""} ${JSON.stringify(t)}`);let T=i.someProp("clipboardTextSerializer",P=>P(e,i))||e.content.textBetween(0,e.content.size,`

`);return{dom:m,text:T}}function Z4(i,e,t,r,o){let n=o.parent.type.spec.code,u,h;if(!t&&!e)return null;let m=e&&(r||n||!t);if(m){if(i.someProp("transformPastedText",T=>{e=T(e,n||r,i)}),n)return e?new Zt(Et.from(i.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Zt.empty;let S=i.someProp("clipboardTextParser",T=>T(e,o,r,i));if(S)h=S;else{let T=o.marks(),{schema:P}=i.state,F=Ya.fromSchema(P);u=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(G=>{let $=u.appendChild(document.createElement("p"));G&&$.appendChild(F.serializeNode(P.text(G,T)))})}}else i.someProp("transformPastedHTML",S=>{t=S(t,i)}),u=AE(t),bp&&IE(u);let b=u&&u.querySelector("[data-pm-slice]"),_=b&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(b.getAttribute("data-pm-slice")||"");if(_&&_[3])for(let S=+_[3];S>0;S--){let T=u.firstChild;for(;T&&T.nodeType!=1;)T=T.nextSibling;if(!T)break;u=T}if(h||(h=(i.someProp("clipboardParser")||i.someProp("domParser")||Bc.fromSchema(i.state.schema)).parseSlice(u,{preserveWhitespace:!!(m||_),context:o,ruleFromNode(T){return T.nodeName=="BR"&&!T.nextSibling&&T.parentNode&&!TE.test(T.parentNode.nodeName)?{ignore:!0}:null}})),_)h=PE(x4(h,+_[1],+_[2]),_[4]);else if(h=Zt.maxOpen(ME(h.content,o),!0),h.openStart||h.openEnd){let S=0,T=0;for(let P=h.content.firstChild;S<h.openStart&&!P.type.spec.isolating;S++,P=P.firstChild);for(let P=h.content.lastChild;T<h.openEnd&&!P.type.spec.isolating;T++,P=P.lastChild);h=x4(h,S,T)}return i.someProp("transformPasted",S=>{h=S(h,i)}),h}var TE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function ME(i,e){if(i.childCount<2)return i;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),n,u=[];if(i.forEach(h=>{if(!u)return;let m=o.findWrapping(h.type),b;if(!m)return u=null;if(b=u.length&&n.length&&J4(m,n,h,u[u.length-1],0))u[u.length-1]=b;else{u.length&&(u[u.length-1]=X4(u[u.length-1],n.length));let _=K4(h,m);u.push(_),o=o.matchType(_.type),n=m}}),u)return Et.from(u)}return i}function K4(i,e,t=0){for(let r=e.length-1;r>=t;r--)i=e[r].create(null,Et.from(i));return i}function J4(i,e,t,r,o){if(o<i.length&&o<e.length&&i[o]==e[o]){let n=J4(i,e,t,r.lastChild,o+1);if(n)return r.copy(r.content.replaceChild(r.childCount-1,n));if(r.contentMatchAt(r.childCount).matchType(o==i.length-1?t.type:i[o+1]))return r.copy(r.content.append(Et.from(K4(t,i,o+1))))}}function X4(i,e){if(e==0)return i;let t=i.content.replaceChild(i.childCount-1,X4(i.lastChild,e-1)),r=i.contentMatchAt(i.childCount).fillBefore(Et.empty,!0);return i.copy(t.append(r))}function Xg(i,e,t,r,o,n){let u=e<0?i.firstChild:i.lastChild,h=u.content;return i.childCount>1&&(n=0),o<r-1&&(h=Xg(h,e,t,r,o+1,n)),o>=t&&(h=e<0?u.contentMatchAt(0).fillBefore(h,n<=o).append(h):h.append(u.contentMatchAt(u.childCount).fillBefore(Et.empty,!0))),i.replaceChild(e<0?0:i.childCount-1,u.copy(h))}function x4(i,e,t){return e<i.openStart&&(i=new Zt(Xg(i.content,-1,e,i.openStart,0,i.openEnd),e,i.openEnd)),t<i.openEnd&&(i=new Zt(Xg(i.content,1,t,i.openEnd,0,0),i.openStart,t)),i}var Y4={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},w4=null;function ex(){return w4||(w4=document.implementation.createHTMLDocument("title"))}function AE(i){let e=/^(\s*<meta [^>]*>)*/.exec(i);e&&(i=i.slice(e[0].length));let t=ex().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(i),o;if((o=r&&Y4[r[1].toLowerCase()])&&(i=o.map(n=>"<"+n+">").join("")+i+o.map(n=>"</"+n+">").reverse().join("")),t.innerHTML=i,o)for(let n=0;n<o.length;n++)t=t.querySelector(o[n])||t;return t}function IE(i){let e=i.querySelectorAll(Jo?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent=="\xA0"&&r.parentNode&&r.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),r)}}function PE(i,e){if(!i.size)return i;let t=i.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return i}let{content:o,openStart:n,openEnd:u}=i;for(let h=r.length-2;h>=0;h-=2){let m=t.nodes[r[h]];if(!m||m.hasRequiredAttrs())break;o=Et.from(m.create(r[h+1],o)),n++,u++}return new Zt(o,n,u)}var Yo={},es={},DE={touchstart:!0,touchmove:!0},Yg=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function LE(i){for(let e in Yo){let t=Yo[e];i.dom.addEventListener(e,i.input.eventHandlers[e]=r=>{zE(i,r)&&!l2(i,r)&&(i.editable||!(r.type in es))&&t(i,r)},DE[e]?{passive:!0}:void 0)}Xo&&i.dom.addEventListener("input",()=>null),e2(i)}function ec(i,e){i.input.lastSelectionOrigin=e,i.input.lastSelectionTime=Date.now()}function FE(i){i.domObserver.stop();for(let e in i.input.eventHandlers)i.dom.removeEventListener(e,i.input.eventHandlers[e]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}function e2(i){i.someProp("handleDOMEvents",e=>{for(let t in e)i.input.eventHandlers[t]||i.dom.addEventListener(t,i.input.eventHandlers[t]=r=>l2(i,r))})}function l2(i,e){return i.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(i,e)||e.defaultPrevented:!1})}function zE(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=i.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function NE(i,e){!l2(i,e)&&Yo[e.type]&&(i.editable||!(e.type in es))&&Yo[e.type](i,e)}es.keydown=(i,e)=>{let t=e;if(i.input.shiftKey=t.keyCode==16||t.shiftKey,!ix(i,t)&&(i.input.lastKeyCode=t.keyCode,i.input.lastKeyCodeTime=Date.now(),!(sa&&Jo&&t.keyCode==13)))if(t.keyCode!=229&&i.domObserver.forceFlush(),sd&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();i.input.lastIOSEnter=r,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==r&&(i.someProp("handleKeyDown",o=>o(i,Vc(13,"Enter"))),i.input.lastIOSEnter=0)},200)}else i.someProp("handleKeyDown",r=>r(i,t))||EE(i,t)?t.preventDefault():ec(i,"key")};es.keyup=(i,e)=>{e.keyCode==16&&(i.input.shiftKey=!1)};es.keypress=(i,e)=>{let t=e;if(ix(i,t)||!t.charCode||t.ctrlKey&&!t.altKey||Bs&&t.metaKey)return;if(i.someProp("handleKeyPress",o=>o(i,t))){t.preventDefault();return}let r=i.state.selection;if(!(r instanceof Di)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!i.someProp("handleTextInput",n=>n(i,r.$from.pos,r.$to.pos,o))&&i.dispatch(i.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function G0(i){return{left:i.clientX,top:i.clientY}}function OE(i,e){let t=e.x-i.clientX,r=e.y-i.clientY;return t*t+r*r<100}function c2(i,e,t,r,o){if(r==-1)return!1;let n=i.state.doc.resolve(r);for(let u=n.depth+1;u>0;u--)if(i.someProp(e,h=>u>n.depth?h(i,t,n.nodeAfter,n.before(u),o,!0):h(i,t,n.node(u),n.before(u),o,!1)))return!0;return!1}function od(i,e,t){i.focused||i.focus();let r=i.state.tr.setSelection(e);t=="pointer"&&r.setMeta("pointer",!0),i.dispatch(r)}function BE(i,e){if(e==-1)return!1;let t=i.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&gi.isSelectable(r)?(od(i,new gi(t),"pointer"),!0):!1}function RE(i,e){if(e==-1)return!1;let t=i.state.selection,r,o;t instanceof gi&&(r=t.node);let n=i.state.doc.resolve(e);for(let u=n.depth+1;u>0;u--){let h=u>n.depth?n.nodeAfter:n.node(u);if(gi.isSelectable(h)){r&&t.$from.depth>0&&u>=t.$from.depth&&n.before(t.$from.depth+1)==t.$from.pos?o=n.before(t.$from.depth):o=n.before(u);break}}return o!=null?(od(i,gi.create(i.state.doc,o),"pointer"),!0):!1}function UE(i,e,t,r,o){return c2(i,"handleClickOn",e,t,r)||i.someProp("handleClick",n=>n(i,e,r))||(o?RE(i,t):BE(i,t))}function VE(i,e,t,r){return c2(i,"handleDoubleClickOn",e,t,r)||i.someProp("handleDoubleClick",o=>o(i,e,r))}function jE(i,e,t,r){return c2(i,"handleTripleClickOn",e,t,r)||i.someProp("handleTripleClick",o=>o(i,e,r))||HE(i,t,r)}function HE(i,e,t){if(t.button!=0)return!1;let r=i.state.doc;if(e==-1)return r.inlineContent?(od(i,Di.create(r,0,r.content.size),"pointer"),!0):!1;let o=r.resolve(e);for(let n=o.depth+1;n>0;n--){let u=n>o.depth?o.nodeAfter:o.node(n),h=o.before(n);if(u.inlineContent)od(i,Di.create(r,h+1,h+1+u.content.size),"pointer");else if(gi.isSelectable(u))od(i,gi.create(r,h),"pointer");else continue;return!0}}function u2(i){return U0(i)}var tx=Bs?"metaKey":"ctrlKey";Yo.mousedown=(i,e)=>{let t=e;i.input.shiftKey=t.shiftKey;let r=u2(i),o=Date.now(),n="singleClick";o-i.input.lastClick.time<500&&OE(t,i.input.lastClick)&&!t[tx]&&(i.input.lastClick.type=="singleClick"?n="doubleClick":i.input.lastClick.type=="doubleClick"&&(n="tripleClick")),i.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:n};let u=i.posAtCoords(G0(t));u&&(n=="singleClick"?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new t2(i,u,t,!!r)):(n=="doubleClick"?VE:jE)(i,u.pos,u.inside,t)?t.preventDefault():ec(i,"pointer"))};var t2=class{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[tx],this.allowDefault=r.shiftKey;let n,u;if(t.inside>-1)n=e.state.doc.nodeAt(t.inside),u=t.inside;else{let _=e.state.doc.resolve(t.pos);n=_.parent,u=_.depth?_.before():0}let h=o?null:r.target,m=h?e.docView.nearestDesc(h,!0):null;this.target=m?m.dom:null;let{selection:b}=e.state;(r.button==0&&n.type.spec.draggable&&n.type.spec.selectable!==!1||b instanceof gi&&b.from<=u&&b.to>u)&&(this.mightDrag={node:n,pos:u,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&aa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ec(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>nl(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(G0(e))),this.updateAllowDefault(e),this.allowDefault||!t?ec(this.view,"pointer"):UE(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Xo&&this.mightDrag&&!this.mightDrag.node.isAtom||Jo&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(od(this.view,Li.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ec(this.view,"pointer")}move(e){this.updateAllowDefault(e),ec(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};Yo.touchstart=i=>{i.input.lastTouch=Date.now(),u2(i),ec(i,"pointer")};Yo.touchmove=i=>{i.input.lastTouch=Date.now(),ec(i,"pointer")};Yo.contextmenu=i=>u2(i);function ix(i,e){return i.composing?!0:Xo&&Math.abs(e.timeStamp-i.input.compositionEndedAt)<500?(i.input.compositionEndedAt=-2e8,!0):!1}var qE=sa?5e3:-1;es.compositionstart=es.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:e}=i,t=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))i.markCursor=i.state.storedMarks||t.marks(),U0(i,!0),i.markCursor=null;else if(U0(i),aa&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=i.domSelectionRange();for(let o=r.focusNode,n=r.focusOffset;o&&o.nodeType==1&&n!=0;){let u=n<0?o.lastChild:o.childNodes[n-1];if(!u)break;if(u.nodeType==3){i.domSelection().collapse(u,u.nodeValue.length);break}else o=u,n=-1}}i.input.composing=!0}rx(i,qE)};es.compositionend=(i,e)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=e.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,rx(i,20))};function rx(i,e){clearTimeout(i.input.composingTimeout),e>-1&&(i.input.composingTimeout=setTimeout(()=>U0(i),e))}function nx(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=QE());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function $E(i){let e=i.domSelectionRange();if(!e.focusNode)return null;let t=jC(e.focusNode,e.focusOffset),r=HC(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc;if(!o||!o.isText(r.nodeValue))return r;if(i.input.compositionNode==r){let n=t.pmViewDesc;if(!(!n||!n.isText(t.nodeValue)))return r}}return t}function QE(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}function U0(i,e=!1){if(!(sa&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),nx(i),e||i.docView&&i.docView.dirty){let t=s2(i);return t&&!t.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(t)):i.updateState(i.state),!0}return!1}}function GE(i,e){if(!i.dom.parentNode)return;let t=i.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),i.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),i.focus()},50)}var fp=hs&&tc<15||sd&&ZC<604;Yo.copy=es.cut=(i,e)=>{let t=e,r=i.state.selection,o=t.type=="cut";if(r.empty)return;let n=fp?null:t.clipboardData,u=r.content(),{dom:h,text:m}=W4(i,u);n?(t.preventDefault(),n.clearData(),n.setData("text/html",h.innerHTML),n.setData("text/plain",m)):GE(i,h),o&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function WE(i){return i.openStart==0&&i.openEnd==0&&i.content.childCount==1?i.content.firstChild:null}function ZE(i,e){if(!i.dom.parentNode)return;let t=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,r=i.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=i.input.shiftKey&&i.input.lastKeyCode!=45;setTimeout(()=>{i.focus(),r.parentNode&&r.parentNode.removeChild(r),t?mp(i,r.value,null,o,e):mp(i,r.textContent,r.innerHTML,o,e)},50)}function mp(i,e,t,r,o){let n=Z4(i,e,t,r,i.state.selection.$from);if(i.someProp("handlePaste",m=>m(i,o,n||Zt.empty)))return!0;if(!n)return!1;let u=WE(n),h=u?i.state.tr.replaceSelectionWith(u,r):i.state.tr.replaceSelection(n);return i.dispatch(h.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ox(i){let e=i.getData("text/plain")||i.getData("Text");if(e)return e;let t=i.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}es.paste=(i,e)=>{let t=e;if(i.composing&&!sa)return;let r=fp?null:t.clipboardData,o=i.input.shiftKey&&i.input.lastKeyCode!=45;r&&mp(i,ox(r),r.getData("text/html"),o,t)?t.preventDefault():ZE(i,t)};var V0=class{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}},sx=Bs?"altKey":"ctrlKey";Yo.dragstart=(i,e)=>{let t=e,r=i.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=i.state.selection,n=o.empty?null:i.posAtCoords(G0(t)),u;if(!(n&&n.pos>=o.from&&n.pos<=(o instanceof gi?o.to-1:o.to))){if(r&&r.mightDrag)u=gi.create(i.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let _=i.docView.nearestDesc(t.target,!0);_&&_.node.type.spec.draggable&&_!=i.docView&&(u=gi.create(i.state.doc,_.posBefore))}}let h=(u||i.state.selection).content(),{dom:m,text:b}=W4(i,h);t.dataTransfer.clearData(),t.dataTransfer.setData(fp?"Text":"text/html",m.innerHTML),t.dataTransfer.effectAllowed="copyMove",fp||t.dataTransfer.setData("text/plain",b),i.dragging=new V0(h,!t[sx],u)};Yo.dragend=i=>{let e=i.dragging;window.setTimeout(()=>{i.dragging==e&&(i.dragging=null)},50)};es.dragover=es.dragenter=(i,e)=>e.preventDefault();es.drop=(i,e)=>{let t=e,r=i.dragging;if(i.dragging=null,!t.dataTransfer)return;let o=i.posAtCoords(G0(t));if(!o)return;let n=i.state.doc.resolve(o.pos),u=r&&r.slice;u?i.someProp("transformPasted",F=>{u=F(u,i)}):u=Z4(i,ox(t.dataTransfer),fp?null:t.dataTransfer.getData("text/html"),!1,n);let h=!!(r&&!t[sx]);if(i.someProp("handleDrop",F=>F(i,t,u||Zt.empty,h))){t.preventDefault();return}if(!u)return;t.preventDefault();let m=u?D0(i.state.doc,n.pos,u):n.pos;m==null&&(m=n.pos);let b=i.state.tr;if(h){let{node:F}=r;F?F.replace(b):b.deleteSelection()}let _=b.mapping.map(m),S=u.openStart==0&&u.openEnd==0&&u.content.childCount==1,T=b.doc;if(S?b.replaceRangeWith(_,_,u.content.firstChild):b.replaceRange(_,_,u),b.doc.eq(T))return;let P=b.doc.resolve(_);if(S&&gi.isSelectable(u.content.firstChild)&&P.nodeAfter&&P.nodeAfter.sameMarkup(u.content.firstChild))b.setSelection(new gi(P));else{let F=b.mapping.map(m);b.mapping.maps[b.mapping.maps.length-1].forEach((G,$,ee,ue)=>F=ue),b.setSelection(a2(i,P,b.doc.resolve(F)))}i.focus(),i.dispatch(b.setMeta("uiEvent","drop"))};Yo.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&nl(i)},20))};Yo.blur=(i,e)=>{let t=e;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),t.relatedTarget&&i.dom.contains(t.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)};Yo.beforeinput=(i,e)=>{if(Jo&&sa&&e.inputType=="deleteContentBackward"){i.domObserver.flushSoon();let{domChangeCount:r}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=r||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",n=>n(i,Vc(8,"Backspace")))))return;let{$cursor:o}=i.state.selection;o&&o.pos>0&&i.dispatch(i.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let i in es)Yo[i]=es[i];function gp(i,e){if(i==e)return!0;for(let t in i)if(i[t]!==e[t])return!1;for(let t in e)if(!(t in i))return!1;return!0}var j0=class i{constructor(e,t){this.toDOM=e,this.spec=t||$c,this.side=this.spec.side||0}map(e,t,r,o){let{pos:n,deleted:u}=e.mapResult(t.from+o,this.side<0?-1:1);return u?null:new Us(n-r,n-r,this)}valid(){return!0}eq(e){return this==e||e instanceof i&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&gp(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},qc=class i{constructor(e,t){this.attrs=e,this.spec=t||$c}map(e,t,r,o){let n=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,u=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return n>=u?null:new Us(n,u,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof i&&gp(this.attrs,e.attrs)&&gp(this.spec,e.spec)}static is(e){return e.type instanceof i}destroy(){}},i2=class i{constructor(e,t){this.attrs=e,this.spec=t||$c}map(e,t,r,o){let n=e.mapResult(t.from+o,1);if(n.deleted)return null;let u=e.mapResult(t.to+o,-1);return u.deleted||u.pos<=n.pos?null:new Us(n.pos-r,u.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),n;return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof i&&gp(this.attrs,e.attrs)&&gp(this.spec,e.spec)}destroy(){}},Us=class i{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new i(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new i(e,e,new j0(t,r))}static inline(e,t,r,o){return new i(e,t,new qc(r,o))}static node(e,t,r,o){return new i(e,t,new i2(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof qc}get widget(){return this.type instanceof j0}},nd=[],$c={},Ro=class i{constructor(e,t){this.local=e.length?e:nd,this.children=t.length?t:nd}static create(e,t){return t.length?q0(t,e,0,$c):Bo}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,n){for(let u=0;u<this.local.length;u++){let h=this.local[u];h.from<=t&&h.to>=e&&(!n||n(h.spec))&&r.push(h.copy(h.from+o,h.to+o))}for(let u=0;u<this.children.length;u+=3)if(this.children[u]<t&&this.children[u+1]>e){let h=this.children[u]+1;this.children[u+2].findInner(e-h,t-h,r,o+h,n)}}map(e,t,r){return this==Bo||e.maps.length==0?this:this.mapInner(e,t,0,0,r||$c)}mapInner(e,t,r,o,n){let u;for(let h=0;h<this.local.length;h++){let m=this.local[h].map(e,r,o);m&&m.type.valid(t,m)?(u||(u=[])).push(m):n.onRemove&&n.onRemove(this.local[h].spec)}return this.children.length?KE(this.children,u||[],e,t,r,o,n):u?new i(u.sort(Qc),nd):Bo}add(e,t){return t.length?this==Bo?i.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,n=0;e.forEach((h,m)=>{let b=m+r,_;if(_=lx(t,h,b)){for(o||(o=this.children.slice());n<o.length&&o[n]<m;)n+=3;o[n]==m?o[n+2]=o[n+2].addInner(h,_,b+1):o.splice(n,0,m,m+h.nodeSize,q0(_,h,b+1,$c)),n+=3}});let u=ax(n?cx(t):t,-r);for(let h=0;h<u.length;h++)u[h].type.valid(e,u[h])||u.splice(h--,1);return new i(u.length?this.local.concat(u).sort(Qc):this.local,o||this.children)}remove(e){return e.length==0||this==Bo?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let n=0;n<r.length;n+=3){let u,h=r[n]+t,m=r[n+1]+t;for(let _=0,S;_<e.length;_++)(S=e[_])&&S.from>h&&S.to<m&&(e[_]=null,(u||(u=[])).push(S));if(!u)continue;r==this.children&&(r=this.children.slice());let b=r[n+2].removeInner(u,h+1);b!=Bo?r[n+2]=b:(r.splice(n,3),n-=3)}if(o.length){for(let n=0,u;n<e.length;n++)if(u=e[n])for(let h=0;h<o.length;h++)o[h].eq(u,t)&&(o==this.local&&(o=this.local.slice()),o.splice(h--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new i(o,r):Bo}forChild(e,t){if(this==Bo)return this;if(t.isLeaf)return i.empty;let r,o;for(let h=0;h<this.children.length;h+=3)if(this.children[h]>=e){this.children[h]==e&&(r=this.children[h+2]);break}let n=e+1,u=n+t.content.size;for(let h=0;h<this.local.length;h++){let m=this.local[h];if(m.from<u&&m.to>n&&m.type instanceof qc){let b=Math.max(n,m.from)-n,_=Math.min(u,m.to)-n;b<_&&(o||(o=[])).push(m.copy(b,_))}}if(o){let h=new i(o.sort(Qc),nd);return r?new H0([h,r]):h}return r||Bo}eq(e){if(this==e)return!0;if(!(e instanceof i)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return d2(this.localsInner(e))}localsInner(e){if(this==Bo)return nd;if(e.inlineContent||!this.local.some(qc.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof qc||t.push(this.local[r]);return t}};Ro.empty=new Ro([],[]);Ro.removeOverlap=d2;var Bo=Ro.empty,H0=class i{constructor(e){this.members=e}map(e,t){let r=this.members.map(o=>o.map(e,t,$c));return i.from(r)}forChild(e,t){if(t.isLeaf)return Ro.empty;let r=[];for(let o=0;o<this.members.length;o++){let n=this.members[o].forChild(e,t);n!=Bo&&(n instanceof i?r=r.concat(n.members):r.push(n))}return i.from(r)}eq(e){if(!(e instanceof i)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let n=this.members[o].localsInner(e);if(n.length)if(!t)t=n;else{r&&(t=t.slice(),r=!1);for(let u=0;u<n.length;u++)t.push(n[u])}}return t?d2(r?t:t.sort(Qc)):nd}static from(e){switch(e.length){case 0:return Bo;case 1:return e[0];default:return new i(e.every(t=>t instanceof Ro)?e:e.reduce((t,r)=>t.concat(r instanceof Ro?r:r.members),[]))}}};function KE(i,e,t,r,o,n,u){let h=i.slice();for(let b=0,_=n;b<t.maps.length;b++){let S=0;t.maps[b].forEach((T,P,F,G)=>{let $=G-F-(P-T);for(let ee=0;ee<h.length;ee+=3){let ue=h[ee+1];if(ue<0||T>ue+_-S)continue;let fe=h[ee]+_-S;P>=fe?h[ee+1]=T<=fe?-2:-1:T>=_&&$&&(h[ee]+=$,h[ee+1]+=$)}S+=$}),_=t.maps[b].map(_,-1)}let m=!1;for(let b=0;b<h.length;b+=3)if(h[b+1]<0){if(h[b+1]==-2){m=!0,h[b+1]=-1;continue}let _=t.map(i[b]+n),S=_-o;if(S<0||S>=r.content.size){m=!0;continue}let T=t.map(i[b+1]+n,-1),P=T-o,{index:F,offset:G}=r.content.findIndex(S),$=r.maybeChild(F);if($&&G==S&&G+$.nodeSize==P){let ee=h[b+2].mapInner(t,$,_+1,i[b]+n+1,u);ee!=Bo?(h[b]=S,h[b+1]=P,h[b+2]=ee):(h[b+1]=-2,m=!0)}else m=!0}if(m){let b=JE(h,i,e,t,o,n,u),_=q0(b,r,0,u);e=_.local;for(let S=0;S<h.length;S+=3)h[S+1]<0&&(h.splice(S,3),S-=3);for(let S=0,T=0;S<_.children.length;S+=3){let P=_.children[S];for(;T<h.length&&h[T]<P;)T+=3;h.splice(T,0,_.children[S],_.children[S+1],_.children[S+2])}}return new Ro(e.sort(Qc),h)}function ax(i,e){if(!e||!i.length)return i;let t=[];for(let r=0;r<i.length;r++){let o=i[r];t.push(new Us(o.from+e,o.to+e,o.type))}return t}function JE(i,e,t,r,o,n,u){function h(m,b){for(let _=0;_<m.local.length;_++){let S=m.local[_].map(r,o,b);S?t.push(S):u.onRemove&&u.onRemove(m.local[_].spec)}for(let _=0;_<m.children.length;_+=3)h(m.children[_+2],m.children[_]+b+1)}for(let m=0;m<i.length;m+=3)i[m+1]==-1&&h(i[m+2],e[m]+n+1);return t}function lx(i,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let n=0,u;n<i.length;n++)(u=i[n])&&u.from>t&&u.to<r&&((o||(o=[])).push(u),i[n]=null);return o}function cx(i){let e=[];for(let t=0;t<i.length;t++)i[t]!=null&&e.push(i[t]);return e}function q0(i,e,t,r){let o=[],n=!1;e.forEach((h,m)=>{let b=lx(i,h,m+t);if(b){n=!0;let _=q0(b,h,t+m+1,r);_!=Bo&&o.push(m,m+h.nodeSize,_)}});let u=ax(n?cx(i):i,-t).sort(Qc);for(let h=0;h<u.length;h++)u[h].type.valid(e,u[h])||(r.onRemove&&r.onRemove(u[h].spec),u.splice(h--,1));return u.length||o.length?new Ro(u,o):Bo}function Qc(i,e){return i.from-e.from||i.to-e.to}function d2(i){let e=i;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let n=e[o];if(n.from==r.from){n.to!=r.to&&(e==i&&(e=i.slice()),e[o]=n.copy(n.from,r.to),k4(e,o+1,n.copy(r.to,n.to)));continue}else{n.from<r.to&&(e==i&&(e=i.slice()),e[t]=r.copy(r.from,n.from),k4(e,o,r.copy(n.from,r.to)));break}}}return e}function k4(i,e,t){for(;e<i.length&&Qc(t,i[e])>0;)e++;i.splice(e,0,t)}function Bg(i){let e=[];return i.someProp("decorations",t=>{let r=t(i.state);r&&r!=Bo&&e.push(r)}),i.cursorWrapper&&e.push(Ro.create(i.state.doc,[i.cursorWrapper.deco])),H0.from(e)}var XE={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},YE=hs&&tc<=11,r2=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},n2=class{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new r2,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);hs&&tc<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),YE&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XE)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(m4(this.view)){if(this.suppressingSelectionUpdates)return nl(this.view);if(hs&&tc<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Gc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let n=e.focusNode;n;n=pp(n))t.add(n);for(let n=e.anchorNode;n;n=pp(n))if(t.has(n)){r=n;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&m4(e)&&!this.ignoreSelectionChange(r),n=-1,u=-1,h=!1,m=[];if(e.editable)for(let _=0;_<t.length;_++){let S=this.registerMutation(t[_],m);S&&(n=n<0?S.from:Math.min(S.from,n),u=u<0?S.to:Math.max(S.to,u),S.typeOver&&(h=!0))}if(aa&&m.length>1){let _=m.filter(S=>S.nodeName=="BR");if(_.length==2){let S=_[0],T=_[1];S.parentNode&&S.parentNode.parentNode==T.parentNode?T.remove():S.remove()}}let b=null;n<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Q0(r)&&(b=s2(e))&&b.eq(Li.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,nl(e),this.currentSelection.set(r),e.scrollToSelection()):(n>-1||o)&&(n>-1&&(e.docView.markDirty(n,u),eT(e)),this.handleDOMChange(n,u,h,m),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||nl(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let _=0;_<e.addedNodes.length;_++)t.push(e.addedNodes[_]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,n=e.nextSibling;if(hs&&tc<=11&&e.addedNodes.length)for(let _=0;_<e.addedNodes.length;_++){let{previousSibling:S,nextSibling:T}=e.addedNodes[_];(!S||Array.prototype.indexOf.call(e.addedNodes,S)<0)&&(o=S),(!T||Array.prototype.indexOf.call(e.addedNodes,T)<0)&&(n=T)}let u=o&&o.parentNode==e.target?vo(o)+1:0,h=r.localPosFromDOM(e.target,u,-1),m=n&&n.parentNode==e.target?vo(n):e.target.childNodes.length,b=r.localPosFromDOM(e.target,m,1);return{from:h,to:b}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}},S4=new WeakMap,C4=!1;function eT(i){if(!S4.has(i)&&(S4.set(i,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace)!==-1)){if(i.requiresGeckoHackNode=aa,C4)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),C4=!0}}function E4(i,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,n=e.endOffset,u=i.domAtPos(i.state.selection.anchor);return Gc(u.node,u.offset,o,n)&&([t,r,o,n]=[o,n,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:n}}function tT(i,e){if(e.getComposedRanges){let o=e.getComposedRanges(i.root)[0];if(o)return E4(i,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return i.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",r,!0),t?E4(i,t):null}function iT(i,e,t){let{node:r,fromOffset:o,toOffset:n,from:u,to:h}=i.docView.parseRange(e,t),m=i.domSelectionRange(),b,_=m.anchorNode;if(_&&i.dom.contains(_.nodeType==1?_:_.parentNode)&&(b=[{node:_,offset:m.anchorOffset}],Q0(m)||b.push({node:m.focusNode,offset:m.focusOffset})),Jo&&i.input.lastKeyCode===8)for(let $=n;$>o;$--){let ee=r.childNodes[$-1],ue=ee.pmViewDesc;if(ee.nodeName=="BR"&&!ue){n=$;break}if(!ue||ue.size)break}let S=i.state.doc,T=i.someProp("domParser")||Bc.fromSchema(i.state.schema),P=S.resolve(u),F=null,G=T.parse(r,{topNode:P.parent,topMatch:P.parent.contentMatchAt(P.index()),topOpen:!0,from:o,to:n,preserveWhitespace:P.parent.type.whitespace=="pre"?"full":!0,findPositions:b,ruleFromNode:rT,context:P});if(b&&b[0].pos!=null){let $=b[0].pos,ee=b[1]&&b[1].pos;ee==null&&(ee=$),F={anchor:$+u,head:ee+u}}return{doc:G,sel:F,from:u,to:h}}function rT(i){let e=i.pmViewDesc;if(e)return e.parseRule();if(i.nodeName=="BR"&&i.parentNode){if(Xo&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(i.parentNode.lastChild==i||Xo&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if(i.nodeName=="IMG"&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}var nT=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oT(i,e,t,r,o){let n=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,e<0){let we=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,st=s2(i,we);if(st&&!i.state.selection.eq(st)){if(Jo&&sa&&i.input.lastKeyCode===13&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",zt=>zt(i,Vc(13,"Enter"))))return;let He=i.state.tr.setSelection(st);we=="pointer"?He.setMeta("pointer",!0):we=="key"&&He.scrollIntoView(),n&&He.setMeta("composition",n),i.dispatch(He)}return}let u=i.state.doc.resolve(e),h=u.sharedDepth(t);e=u.before(h+1),t=i.state.doc.resolve(t).after(h+1);let m=i.state.selection,b=iT(i,e,t),_=i.state.doc,S=_.slice(b.from,b.to),T,P;i.input.lastKeyCode===8&&Date.now()-100<i.input.lastKeyCodeTime?(T=i.state.selection.to,P="end"):(T=i.state.selection.from,P="start"),i.input.lastKeyCode=null;let F=lT(S.content,b.doc.content,b.from,T,P);if((sd&&i.input.lastIOSEnter>Date.now()-225||sa)&&o.some(we=>we.nodeType==1&&!nT.test(we.nodeName))&&(!F||F.endA>=F.endB)&&i.someProp("handleKeyDown",we=>we(i,Vc(13,"Enter")))){i.input.lastIOSEnter=0;return}if(!F)if(r&&m instanceof Di&&!m.empty&&m.$head.sameParent(m.$anchor)&&!i.composing&&!(b.sel&&b.sel.anchor!=b.sel.head))F={start:m.from,endA:m.to,endB:m.to};else{if(b.sel){let we=T4(i,i.state.doc,b.sel);if(we&&!we.eq(i.state.selection)){let st=i.state.tr.setSelection(we);n&&st.setMeta("composition",n),i.dispatch(st)}}return}i.input.domChangeCount++,i.state.selection.from<i.state.selection.to&&F.start==F.endB&&i.state.selection instanceof Di&&(F.start>i.state.selection.from&&F.start<=i.state.selection.from+2&&i.state.selection.from>=b.from?F.start=i.state.selection.from:F.endA<i.state.selection.to&&F.endA>=i.state.selection.to-2&&i.state.selection.to<=b.to&&(F.endB+=i.state.selection.to-F.endA,F.endA=i.state.selection.to)),hs&&tc<=11&&F.endB==F.start+1&&F.endA==F.start&&F.start>b.from&&b.doc.textBetween(F.start-b.from-1,F.start-b.from+1)==" \xA0"&&(F.start--,F.endA--,F.endB--);let G=b.doc.resolveNoCache(F.start-b.from),$=b.doc.resolveNoCache(F.endB-b.from),ee=_.resolve(F.start),ue=G.sameParent($)&&G.parent.inlineContent&&ee.end()>=F.endA,fe;if((sd&&i.input.lastIOSEnter>Date.now()-225&&(!ue||o.some(we=>we.nodeName=="DIV"||we.nodeName=="P"))||!ue&&G.pos<b.doc.content.size&&!G.sameParent($)&&(fe=Li.findFrom(b.doc.resolve(G.pos+1),1,!0))&&fe.head==$.pos)&&i.someProp("handleKeyDown",we=>we(i,Vc(13,"Enter")))){i.input.lastIOSEnter=0;return}if(i.state.selection.anchor>F.start&&aT(_,F.start,F.endA,G,$)&&i.someProp("handleKeyDown",we=>we(i,Vc(8,"Backspace")))){sa&&Jo&&i.domObserver.suppressSelectionUpdates();return}Jo&&sa&&F.endB==F.start&&(i.input.lastAndroidDelete=Date.now()),sa&&!ue&&G.start()!=$.start()&&$.parentOffset==0&&G.depth==$.depth&&b.sel&&b.sel.anchor==b.sel.head&&b.sel.head==F.endA&&(F.endB-=2,$=b.doc.resolveNoCache(F.endB-b.from),setTimeout(()=>{i.someProp("handleKeyDown",function(we){return we(i,Vc(13,"Enter"))})},20));let Y=F.start,je=F.endA,Ce,xe,Le;if(ue){if(G.pos==$.pos)hs&&tc<=11&&G.parentOffset==0&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>nl(i),20)),Ce=i.state.tr.delete(Y,je),xe=_.resolve(F.start).marksAcross(_.resolve(F.endA));else if(F.endA==F.endB&&(Le=sT(G.parent.content.cut(G.parentOffset,$.parentOffset),ee.parent.content.cut(ee.parentOffset,F.endA-ee.start()))))Ce=i.state.tr,Le.type=="add"?Ce.addMark(Y,je,Le.mark):Ce.removeMark(Y,je,Le.mark);else if(G.parent.child(G.index()).isText&&G.index()==$.index()-($.textOffset?0:1)){let we=G.parent.textBetween(G.parentOffset,$.parentOffset);if(i.someProp("handleTextInput",st=>st(i,Y,je,we)))return;Ce=i.state.tr.insertText(we,Y,je)}}if(Ce||(Ce=i.state.tr.replace(Y,je,b.doc.slice(F.start-b.from,F.endB-b.from))),b.sel){let we=T4(i,Ce.doc,b.sel);we&&!(Jo&&sa&&i.composing&&we.empty&&(F.start!=F.endB||i.input.lastAndroidDelete<Date.now()-100)&&(we.head==Y||we.head==Ce.mapping.map(je)-1)||hs&&we.empty&&we.head==Y)&&Ce.setSelection(we)}xe&&Ce.ensureMarks(xe),n&&Ce.setMeta("composition",n),i.dispatch(Ce.scrollIntoView())}function T4(i,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:a2(i,e.resolve(t.anchor),e.resolve(t.head))}function sT(i,e){let t=i.firstChild.marks,r=e.firstChild.marks,o=t,n=r,u,h,m;for(let _=0;_<r.length;_++)o=r[_].removeFromSet(o);for(let _=0;_<t.length;_++)n=t[_].removeFromSet(n);if(o.length==1&&n.length==0)h=o[0],u="add",m=_=>_.mark(h.addToSet(_.marks));else if(o.length==0&&n.length==1)h=n[0],u="remove",m=_=>_.mark(h.removeFromSet(_.marks));else return null;let b=[];for(let _=0;_<e.childCount;_++)b.push(m(e.child(_)));if(Et.from(b).eq(i))return{mark:h,type:u}}function aT(i,e,t,r,o){if(t-e<=o.pos-r.pos||Rg(r,!0,!1)<o.pos)return!1;let n=i.resolve(e);if(!r.parent.isTextblock){let h=n.nodeAfter;return h!=null&&t==e+h.nodeSize}if(n.parentOffset<n.parent.content.size||!n.parent.isTextblock)return!1;let u=i.resolve(Rg(n,!0,!0));return!u.parent.isTextblock||u.pos>t||Rg(u,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(u.parent.content)}function Rg(i,e,t){let r=i.depth,o=e?i.end():i.pos;for(;r>0&&(e||i.indexAfter(r)==i.node(r).childCount);)r--,o++,e=!1;if(t){let n=i.node(r).maybeChild(i.indexAfter(r));for(;n&&!n.isLeaf;)n=n.firstChild,o++}return o}function lT(i,e,t,r,o){let n=i.findDiffStart(e,t);if(n==null)return null;let{a:u,b:h}=i.findDiffEnd(e,t+i.size,t+e.size);if(o=="end"){let m=Math.max(0,n-Math.min(u,h));r-=u+m-n}if(u<n&&i.size<e.size){let m=r<=n&&r>=u?n-r:0;n-=m,n&&n<e.size&&M4(e.textBetween(n-1,n+1))&&(n+=m?1:-1),h=n+(h-u),u=n}else if(h<n){let m=r<=n&&r>=h?n-r:0;n-=m,n&&n<i.size&&M4(i.textBetween(n-1,n+1))&&(n+=m?1:-1),u=n+(u-h),h=n}return{start:n,endA:u,endB:h}}function M4(i){if(i.length!=2)return!1;let e=i.charCodeAt(0),t=i.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}var $0=class{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Yg,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(L4),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=P4(this),I4(this),this.nodeViews=D4(this),this.docView=c4(this.state.doc,A4(this),Bg(this),this.dom,this),this.domObserver=new n2(this,(r,o,n,u)=>oT(this,r,o,n,u)),this.domObserver.start(),LE(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&e2(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(L4),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,n=!1,u=!1;e.storedMarks&&this.composing&&(nx(this),u=!0),this.state=e;let h=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(h||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let P=D4(this);uT(P,this.nodeViews)&&(this.nodeViews=P,n=!0)}(h||t.handleDOMEvents!=this._props.handleDOMEvents)&&e2(this),this.editable=P4(this),I4(this);let m=Bg(this),b=A4(this),_=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",S=n||!this.docView.matchesNode(e.doc,b,m);(S||!e.selection.eq(o.selection))&&(u=!0);let T=_=="preserve"&&u&&this.dom.style.overflowAnchor==null&&XC(this);if(u){this.domObserver.stop();let P=S&&(hs||Jo)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&cT(o.selection,e.selection);if(S){let F=Jo?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=$E(this)),(n||!this.docView.update(e.doc,b,m,this))&&(this.docView.updateOuterDeco(b),this.docView.destroy(),this.docView=c4(e.doc,b,m,this.dom,this)),F&&!this.trackWrites&&(P=!0)}P||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vE(this))?nl(this,P):($4(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),_=="reset"?this.dom.scrollTop=0:_=="to selection"?this.scrollToSelection():T&&YC(T)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof gi){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&r4(this,t.getBoundingClientRect(),e)}else r4(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let n=r.from+(this.state.doc.content.size-t.doc.content.size);(n>0&&this.state.doc.nodeAt(n))==r.node&&(o=n)}this.dragging=new V0(e.slice,e.move,o<0?void 0:gi.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let u=0;u<this.directPlugins.length;u++){let h=this.directPlugins[u].props[e];if(h!=null&&(o=t?t(h):h))return o}let n=this.state.plugins;if(n)for(let u=0;u<n.length;u++){let h=n[u].props[e];if(h!=null&&(o=t?t(h):h))return o}}hasFocus(){if(hs){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&eE(this.dom),nl(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return oE(this,e)}coordsAtPos(e,t=1){return R4(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return uE(this,t||this.state,e)}pasteHTML(e,t){return mp(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return mp(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(FE(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Bg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,UC())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return NE(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return Xo&&this.root.nodeType===11&&$C(this.dom.ownerDocument)==this.dom&&tT(this,e)||e}domSelection(){return this.root.getSelection()}};function A4(i){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(i.editable),i.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(i.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[Us.node(0,i.state.doc.content.size,e)]}function I4(i){if(i.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),i.cursorWrapper={dom:e,deco:Us.widget(i.state.selection.head,e,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function P4(i){return!i.someProp("editable",e=>e(i.state)===!1)}function cT(i,e){let t=Math.min(i.$anchor.sharedDepth(i.head),e.$anchor.sharedDepth(e.head));return i.$anchor.start(t)!=e.$anchor.start(t)}function D4(i){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return i.someProp("nodeViews",t),i.someProp("markViews",t),e}function uT(i,e){let t=0,r=0;for(let o in i){if(i[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function L4(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ol={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Z0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dT=typeof navigator<"u"&&/Mac/.test(navigator.platform),hT=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Rn=0;Rn<10;Rn++)ol[48+Rn]=ol[96+Rn]=String(Rn);var Rn;for(Rn=1;Rn<=24;Rn++)ol[Rn+111]="F"+Rn;var Rn;for(Rn=65;Rn<=90;Rn++)ol[Rn]=String.fromCharCode(Rn+32),Z0[Rn]=String.fromCharCode(Rn);var Rn;for(W0 in ol)Z0.hasOwnProperty(W0)||(Z0[W0]=ol[W0]);var W0;function ux(i){var e=dT&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||hT&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?Z0:ol)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}var pT=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function fT(i){let e=i.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,n,u;for(let h=0;h<e.length-1;h++){let m=e[h];if(/^(cmd|meta|m)$/i.test(m))u=!0;else if(/^a(lt)?$/i.test(m))r=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))n=!0;else if(/^mod$/i.test(m))pT?u=!0:o=!0;else throw new Error("Unrecognized modifier name: "+m)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),u&&(t="Meta-"+t),n&&(t="Shift-"+t),t}function mT(i){let e=Object.create(null);for(let t in i)e[fT(t)]=i[t];return e}function h2(i,e,t=!0){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t&&e.shiftKey&&(i="Shift-"+i),i}function dx(i){return new jr({props:{handleKeyDown:p2(i)}})}function p2(i){let e=mT(i);return function(t,r){let o=ux(r),n,u=e[h2(o,r)];if(u&&u(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let h=e[h2(o,r,!1)];if(h&&h(t.state,t.dispatch,t))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(n=ol[r.keyCode])&&n!=o){let h=e[h2(n,r)];if(h&&h(t.state,t.dispatch,t))return!0}}return!1}}var K0=(i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0);function px(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("backward",i):t.parentOffset>0)?null:t}var m2=(i,e,t)=>{let r=px(i,t);if(!r)return!1;let o=y2(r);if(!o){let u=r.blockRange(),h=u&&tl(u);return h==null?!1:(e&&e(i.tr.lift(u,h).scrollIntoView()),!0)}let n=o.nodeBefore;if(!n.type.spec.isolating&&wx(i,o,e))return!0;if(r.parent.content.size==0&&(ld(n,"end")||gi.isSelectable(n))){let u=lp(i.doc,r.before(),r.after(),Zt.empty);if(u&&u.slice.size<u.to-u.from){if(e){let h=i.tr.step(u);h.setSelection(ld(n,"end")?Li.findFrom(h.doc.resolve(h.mapping.map(o.pos,-1)),-1):gi.create(h.doc,o.pos-n.nodeSize)),e(h.scrollIntoView())}return!0}}return n.isAtom&&o.depth==r.depth-1?(e&&e(i.tr.delete(o.pos-n.nodeSize,o.pos).scrollIntoView()),!0):!1},fx=(i,e,t)=>{let r=px(i,t);if(!r)return!1;let o=y2(r);return o?gx(i,o,e):!1},mx=(i,e,t)=>{let r=yx(i,t);if(!r)return!1;let o=_2(r);return o?gx(i,o,e):!1};function gx(i,e,t){let r=e.nodeBefore,o=r,n=e.pos-1;for(;!o.isTextblock;n--){if(o.type.spec.isolating)return!1;let _=o.lastChild;if(!_)return!1;o=_}let u=e.nodeAfter,h=u,m=e.pos+1;for(;!h.isTextblock;m++){if(h.type.spec.isolating)return!1;let _=h.firstChild;if(!_)return!1;h=_}let b=lp(i.doc,n,m,Zt.empty);if(!b||b.from!=n||b instanceof Oo&&b.slice.size>=m-n)return!1;if(t){let _=i.tr.step(b);_.setSelection(Di.create(_.doc,n)),t(_.scrollIntoView())}return!0}function ld(i,e,t=!1){for(let r=i;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}var g2=(i,e,t)=>{let{$head:r,empty:o}=i.selection,n=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",i):r.parentOffset>0)return!1;n=y2(r)}let u=n&&n.nodeBefore;return!u||!gi.isSelectable(u)?!1:(e&&e(i.tr.setSelection(gi.create(i.doc,n.pos-u.nodeSize)).scrollIntoView()),!0)};function y2(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}function yx(i,e){let{$cursor:t}=i.selection;return!t||(e?!e.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)?null:t}var b2=(i,e,t)=>{let r=yx(i,t);if(!r)return!1;let o=_2(r);if(!o)return!1;let n=o.nodeAfter;if(wx(i,o,e))return!0;if(r.parent.content.size==0&&(ld(n,"start")||gi.isSelectable(n))){let u=lp(i.doc,r.before(),r.after(),Zt.empty);if(u&&u.slice.size<u.to-u.from){if(e){let h=i.tr.step(u);h.setSelection(ld(n,"start")?Li.findFrom(h.doc.resolve(h.mapping.map(o.pos)),1):gi.create(h.doc,h.mapping.map(o.pos))),e(h.scrollIntoView())}return!0}}return n.isAtom&&o.depth==r.depth-1?(e&&e(i.tr.delete(o.pos,o.pos+n.nodeSize).scrollIntoView()),!0):!1},v2=(i,e,t)=>{let{$head:r,empty:o}=i.selection,n=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",i):r.parentOffset<r.parent.content.size)return!1;n=_2(r)}let u=n&&n.nodeAfter;return!u||!gi.isSelectable(u)?!1:(e&&e(i.tr.setSelection(gi.create(i.doc,n.pos)).scrollIntoView()),!0)};function _2(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let t=i.node(e);if(i.index(e)+1<t.childCount)return i.doc.resolve(i.after(e+1));if(t.type.spec.isolating)break}return null}var bx=(i,e)=>{let t=i.selection,r=t instanceof gi,o;if(r){if(t.node.isTextblock||!oa(i.doc,t.from))return!1;o=t.from}else if(o=ed(i.doc,t.from,-1),o==null)return!1;if(e){let n=i.tr.join(o);r&&n.setSelection(gi.create(n.doc,o-i.doc.resolve(o).nodeBefore.nodeSize)),e(n.scrollIntoView())}return!0},vx=(i,e)=>{let t=i.selection,r;if(t instanceof gi){if(t.node.isTextblock||!oa(i.doc,t.to))return!1;r=t.to}else if(r=ed(i.doc,t.to,1),r==null)return!1;return e&&e(i.tr.join(r).scrollIntoView()),!0},_x=(i,e)=>{let{$from:t,$to:r}=i.selection,o=t.blockRange(r),n=o&&tl(o);return n==null?!1:(e&&e(i.tr.lift(o,n).scrollIntoView()),!0)},x2=(i,e)=>{let{$head:t,$anchor:r}=i.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(i.tr.insertText(`
`).scrollIntoView()),!0)};function w2(i){for(let e=0;e<i.edgeCount;e++){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}var k2=(i,e)=>{let{$head:t,$anchor:r}=i.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),n=t.indexAfter(-1),u=w2(o.contentMatchAt(n));if(!u||!o.canReplaceWith(n,n,u))return!1;if(e){let h=t.after(),m=i.tr.replaceWith(h,h,u.createAndFill());m.setSelection(Li.near(m.doc.resolve(h),1)),e(m.scrollIntoView())}return!0},S2=(i,e)=>{let t=i.selection,{$from:r,$to:o}=t;if(t instanceof ks||r.parent.inlineContent||o.parent.inlineContent)return!1;let n=w2(o.parent.contentMatchAt(o.indexAfter()));if(!n||!n.isTextblock)return!1;if(e){let u=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,h=i.tr.insert(u,n.createAndFill());h.setSelection(Di.create(h.doc,u+1)),e(h.scrollIntoView())}return!0},C2=(i,e)=>{let{$cursor:t}=i.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let n=t.before();if(Os(i.doc,n))return e&&e(i.tr.split(n).scrollIntoView()),!0}let r=t.blockRange(),o=r&&tl(r);return o==null?!1:(e&&e(i.tr.lift(r,o).scrollIntoView()),!0)};function gT(i){return(e,t)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof gi&&e.selection.node.isBlock)return!r.parentOffset||!Os(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){let n=o.parentOffset==o.parent.content.size,u=e.tr;(e.selection instanceof Di||e.selection instanceof ks)&&u.deleteSelection();let h=r.depth==0?null:w2(r.node(-1).contentMatchAt(r.indexAfter(-1))),m=i&&i(o.parent,n),b=m?[m]:n&&h?[{type:h}]:void 0,_=Os(u.doc,u.mapping.map(r.pos),1,b);if(!b&&!_&&Os(u.doc,u.mapping.map(r.pos),1,h?[{type:h}]:void 0)&&(h&&(b=[{type:h}]),_=!0),_&&(u.split(u.mapping.map(r.pos),1,b),!n&&!r.parentOffset&&r.parent.type!=h)){let S=u.mapping.map(r.before()),T=u.doc.resolve(S);h&&r.node(-1).canReplaceWith(T.index(),T.index()+1,h)&&u.setNodeMarkup(u.mapping.map(r.before()),h)}t(u.scrollIntoView())}return!0}}var yT=gT();var xx=(i,e)=>{let{$from:t,to:r}=i.selection,o,n=t.sharedDepth(r);return n==0?!1:(o=t.before(n),e&&e(i.tr.setSelection(gi.create(i.doc,o))),!0)},bT=(i,e)=>(e&&e(i.tr.setSelection(new ks(i.doc))),!0);function vT(i,e,t){let r=e.nodeBefore,o=e.nodeAfter,n=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(n-1,n)?(t&&t(i.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(n,n+1)||!(o.isTextblock||oa(i.doc,e.pos))?!1:(t&&t(i.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0)}function wx(i,e,t){let r=e.nodeBefore,o=e.nodeAfter,n,u;if(r.type.spec.isolating||o.type.spec.isolating)return!1;if(vT(i,e,t))return!0;let h=e.parent.canReplace(e.index(),e.index()+1);if(h&&(n=(u=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&u.matchType(n[0]||o.type).validEnd){if(t){let S=e.pos+o.nodeSize,T=Et.empty;for(let G=n.length-1;G>=0;G--)T=Et.from(n[G].create(null,T));T=Et.from(r.copy(T));let P=i.tr.step(new Bn(e.pos-1,S,e.pos,S,new Zt(T,1,0),n.length,!0)),F=S+2*n.length;oa(P.doc,F)&&P.join(F),t(P.scrollIntoView())}return!0}let m=Li.findFrom(e,1),b=m&&m.$from.blockRange(m.$to),_=b&&tl(b);if(_!=null&&_>=e.depth)return t&&t(i.tr.lift(b,_).scrollIntoView()),!0;if(h&&ld(o,"start",!0)&&ld(r,"end")){let S=r,T=[];for(;T.push(S),!S.isTextblock;)S=S.lastChild;let P=o,F=1;for(;!P.isTextblock;P=P.firstChild)F++;if(S.canReplace(S.childCount,S.childCount,P.content)){if(t){let G=Et.empty;for(let ee=T.length-1;ee>=0;ee--)G=Et.from(T[ee].copy(G));let $=i.tr.step(new Bn(e.pos-T.length,e.pos+o.nodeSize,e.pos+F,e.pos+o.nodeSize-F,new Zt(G,T.length,0),0,!0));t($.scrollIntoView())}return!0}}return!1}function kx(i){return function(e,t){let r=e.selection,o=i<0?r.$from:r.$to,n=o.depth;for(;o.node(n).isInline;){if(!n)return!1;n--}return o.node(n).isTextblock?(t&&t(e.tr.setSelection(Di.create(e.doc,i<0?o.start(n):o.end(n)))),!0):!1}}var E2=kx(-1),T2=kx(1);function Sx(i,e=null){return function(t,r){let{$from:o,$to:n}=t.selection,u=o.blockRange(n),h=u&&Yu(u,i,e);return h?(r&&r(t.tr.wrap(u,h).scrollIntoView()),!0):!1}}function M2(i,e=null){return function(t,r){let o=!1;for(let n=0;n<t.selection.ranges.length&&!o;n++){let{$from:{pos:u},$to:{pos:h}}=t.selection.ranges[n];t.doc.nodesBetween(u,h,(m,b)=>{if(o)return!1;if(!(!m.isTextblock||m.hasMarkup(i,e)))if(m.type==i)o=!0;else{let _=t.doc.resolve(b),S=_.index();o=_.parent.canReplaceWith(S,S+1,i)}})}if(!o)return!1;if(r){let n=t.tr;for(let u=0;u<t.selection.ranges.length;u++){let{$from:{pos:h},$to:{pos:m}}=t.selection.ranges[u];n.setBlockType(h,m,i,e)}r(n.scrollIntoView())}return!0}}function A2(...i){return function(e,t,r){for(let o=0;o<i.length;o++)if(i[o](e,t,r))return!0;return!1}}var f2=A2(K0,m2,g2),hx=A2(K0,b2,v2),nc={Enter:A2(x2,S2,C2,yT),"Mod-Enter":k2,Backspace:f2,"Mod-Backspace":f2,"Shift-Backspace":f2,Delete:hx,"Mod-Delete":hx,"Mod-a":bT},_T={"Ctrl-h":nc.Backspace,"Alt-Backspace":nc["Mod-Backspace"],"Ctrl-d":nc.Delete,"Ctrl-Alt-Backspace":nc["Mod-Delete"],"Alt-Delete":nc["Mod-Delete"],"Alt-d":nc["Mod-Delete"],"Ctrl-a":E2,"Ctrl-e":T2};for(let i in nc)_T[i]=nc[i];var kU=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;function Cx(i,e=null){return function(t,r){let{$from:o,$to:n}=t.selection,u=o.blockRange(n),h=!1,m=u;if(!u)return!1;if(u.depth>=2&&o.node(u.depth-1).type.compatibleContent(i)&&u.startIndex==0){if(o.index(u.depth-1)==0)return!1;let _=t.doc.resolve(u.start-2);m=new Nc(_,_,u.depth),u.endIndex<u.parent.childCount&&(u=new Nc(o,t.doc.resolve(n.end(u.depth)),u.depth)),h=!0}let b=Yu(m,i,e,u);return b?(r&&r(xT(t.tr,u,b,h,i).scrollIntoView()),!0):!1}}function xT(i,e,t,r,o){let n=Et.empty;for(let _=t.length-1;_>=0;_--)n=Et.from(t[_].type.create(t[_].attrs,n));i.step(new Bn(e.start-(r?2:0),e.end,e.start,e.end,new Zt(n,0,0),t.length,!0));let u=0;for(let _=0;_<t.length;_++)t[_].type==o&&(u=_+1);let h=t.length-u,m=e.start+t.length-(r?2:0),b=e.parent;for(let _=e.startIndex,S=e.endIndex,T=!0;_<S;_++,T=!1)!T&&Os(i.doc,m,h)&&(i.split(m,h),m+=2*h),m+=b.child(_).nodeSize;return i}function Ex(i){return function(e,t){let{$from:r,$to:o}=e.selection,n=r.blockRange(o,u=>u.childCount>0&&u.firstChild.type==i);return n?t?r.node(n.depth-1).type==i?wT(e,t,i,n):kT(e,t,n):!0:!1}}function wT(i,e,t,r){let o=i.tr,n=r.end,u=r.$to.end(r.depth);n<u&&(o.step(new Bn(n-1,u,n,u,new Zt(Et.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Nc(o.doc.resolve(r.$from.pos),o.doc.resolve(u),r.depth));let h=tl(r);if(h==null)return!1;o.lift(r,h);let m=o.mapping.map(n,-1)-1;return oa(o.doc,m)&&o.join(m),e(o.scrollIntoView()),!0}function kT(i,e,t){let r=i.tr,o=t.parent;for(let P=t.end,F=t.endIndex-1,G=t.startIndex;F>G;F--)P-=o.child(F).nodeSize,r.delete(P-1,P+1);let n=r.doc.resolve(t.start),u=n.nodeAfter;if(r.mapping.map(t.end)!=t.start+n.nodeAfter.nodeSize)return!1;let h=t.startIndex==0,m=t.endIndex==o.childCount,b=n.node(-1),_=n.index(-1);if(!b.canReplace(_+(h?0:1),_+1,u.content.append(m?Et.empty:Et.from(o))))return!1;let S=n.pos,T=S+u.nodeSize;return r.step(new Bn(S-(h?1:0),T+(m?1:0),S+1,T-1,new Zt((h?Et.empty:Et.from(o.copy(Et.empty))).append(m?Et.empty:Et.from(o.copy(Et.empty))),h?0:1,m?0:1),h?0:1)),e(r.scrollIntoView()),!0}function Tx(i){return function(e,t){let{$from:r,$to:o}=e.selection,n=r.blockRange(o,b=>b.childCount>0&&b.firstChild.type==i);if(!n)return!1;let u=n.startIndex;if(u==0)return!1;let h=n.parent,m=h.child(u-1);if(m.type!=i)return!1;if(t){let b=m.lastChild&&m.lastChild.type==h.type,_=Et.from(b?i.create():null),S=new Zt(Et.from(i.create(null,Et.from(h.type.create(null,_)))),b?3:1,0),T=n.start,P=n.end;t(e.tr.step(new Bn(T-(b?3:1),P,T,P,S,1,!0)).scrollIntoView())}return!0}}function im(i){let{state:e,transaction:t}=i,{selection:r}=t,{doc:o}=t,{storedMarks:n}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return n},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,n=t.storedMarks,t}}}var cd=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:n}=r,u=this.buildProps(n);return Object.fromEntries(Object.entries(e).map(([h,m])=>[h,(..._)=>{let S=m(..._)(u);return!n.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(n),S}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:r,editor:o,state:n}=this,{view:u}=o,h=[],m=!!e,b=e||n.tr,_=()=>(!m&&t&&!b.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(b),h.every(T=>T===!0)),S={...Object.fromEntries(Object.entries(r).map(([T,P])=>[T,(...G)=>{let $=this.buildProps(b,t),ee=P(...G)($);return h.push(ee),S}])),run:_};return S}createCan(e){let{rawCommands:t,state:r}=this,o=!1,n=e||r.tr,u=this.buildProps(n,o);return{...Object.fromEntries(Object.entries(t).map(([m,b])=>[m,(..._)=>b(..._)({...u,dispatch:void 0})])),chain:()=>this.createChain(n,o)}}buildProps(e,t=!0){let{rawCommands:r,editor:o,state:n}=this,{view:u}=o,h={tr:e,editor:o,view:u,state:im({state:n,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([m,b])=>[m,(..._)=>b(..._)(h)]))}};return h}},F2=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){let r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}};function ni(i,e,t){return i.config[e]===void 0&&i.parent?ni(i.parent,e,t):typeof i.config[e]=="function"?i.config[e].bind({...t,parent:i.parent?ni(i.parent,e,t):null}):i.config[e]}function rm(i){let e=i.filter(o=>o.type==="extension"),t=i.filter(o=>o.type==="node"),r=i.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function zx(i){let e=[],{nodeExtensions:t,markExtensions:r}=rm(i),o=[...t,...r],n={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return i.forEach(u=>{let h={name:u.name,options:u.options,storage:u.storage},m=ni(u,"addGlobalAttributes",h);if(!m)return;m().forEach(_=>{_.types.forEach(S=>{Object.entries(_.attributes).forEach(([T,P])=>{e.push({type:S,name:T,attribute:{...n,...P}})})})})}),o.forEach(u=>{let h={name:u.name,options:u.options,storage:u.storage},m=ni(u,"addAttributes",h);if(!m)return;let b=m();Object.entries(b).forEach(([_,S])=>{let T={...n,...S};typeof T?.default=="function"&&(T.default=T.default()),T?.isRequired&&T?.default===void 0&&delete T.default,e.push({type:u.name,name:_,attribute:T})})}),e}function no(i,e){if(typeof i=="string"){if(!e.nodes[i])throw Error(`There is no node type named '${i}'. Maybe you forgot to add the extension?`);return e.nodes[i]}return i}function pr(...i){return i.filter(e=>!!e).reduce((e,t)=>{let r={...e};return Object.entries(t).forEach(([o,n])=>{if(!r[o]){r[o]=n;return}if(o==="class"){let h=n?n.split(" "):[],m=r[o]?r[o].split(" "):[],b=h.filter(_=>!m.includes(_));r[o]=[...m,...b].join(" ")}else o==="style"?r[o]=[r[o],n].join("; "):r[o]=n}),r},{})}function z2(i,e){return e.filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(i.attrs)||{}:{[t.name]:i.attrs[t.name]}).reduce((t,r)=>pr(t,r),{})}function Nx(i){return typeof i=="function"}function Gi(i,e=void 0,...t){return Nx(i)?e?i.bind(e)(...t):i(...t):i}function ST(i={}){return Object.keys(i).length===0&&i.constructor===Object}function CT(i){return typeof i!="string"?i:i.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(i):i==="true"?!0:i==="false"?!1:i}function Mx(i,e){return i.style?i:{...i,getAttrs:t=>{let r=i.getAttrs?i.getAttrs(t):i.attrs;if(r===!1)return!1;let o=e.reduce((n,u)=>{let h=u.attribute.parseHTML?u.attribute.parseHTML(t):CT(t.getAttribute(u.name));return h==null?n:{...n,[u.name]:h}},{});return{...r,...o}}}}function Ax(i){return Object.fromEntries(Object.entries(i).filter(([e,t])=>e==="attrs"&&ST(t)?!1:t!=null))}function ET(i,e){var t;let r=zx(i),{nodeExtensions:o,markExtensions:n}=rm(i),u=(t=o.find(b=>ni(b,"topNode")))===null||t===void 0?void 0:t.name,h=Object.fromEntries(o.map(b=>{let _=r.filter(ee=>ee.type===b.name),S={name:b.name,options:b.options,storage:b.storage,editor:e},T=i.reduce((ee,ue)=>{let fe=ni(ue,"extendNodeSchema",S);return{...ee,...fe?fe(b):{}}},{}),P=Ax({...T,content:Gi(ni(b,"content",S)),marks:Gi(ni(b,"marks",S)),group:Gi(ni(b,"group",S)),inline:Gi(ni(b,"inline",S)),atom:Gi(ni(b,"atom",S)),selectable:Gi(ni(b,"selectable",S)),draggable:Gi(ni(b,"draggable",S)),code:Gi(ni(b,"code",S)),defining:Gi(ni(b,"defining",S)),isolating:Gi(ni(b,"isolating",S)),attrs:Object.fromEntries(_.map(ee=>{var ue;return[ee.name,{default:(ue=ee?.attribute)===null||ue===void 0?void 0:ue.default}]}))}),F=Gi(ni(b,"parseHTML",S));F&&(P.parseDOM=F.map(ee=>Mx(ee,_)));let G=ni(b,"renderHTML",S);G&&(P.toDOM=ee=>G({node:ee,HTMLAttributes:z2(ee,_)}));let $=ni(b,"renderText",S);return $&&(P.toText=$),[b.name,P]})),m=Object.fromEntries(n.map(b=>{let _=r.filter($=>$.type===b.name),S={name:b.name,options:b.options,storage:b.storage,editor:e},T=i.reduce(($,ee)=>{let ue=ni(ee,"extendMarkSchema",S);return{...$,...ue?ue(b):{}}},{}),P=Ax({...T,inclusive:Gi(ni(b,"inclusive",S)),excludes:Gi(ni(b,"excludes",S)),group:Gi(ni(b,"group",S)),spanning:Gi(ni(b,"spanning",S)),code:Gi(ni(b,"code",S)),attrs:Object.fromEntries(_.map($=>{var ee;return[$.name,{default:(ee=$?.attribute)===null||ee===void 0?void 0:ee.default}]}))}),F=Gi(ni(b,"parseHTML",S));F&&(P.parseDOM=F.map($=>Mx($,_)));let G=ni(b,"renderHTML",S);return G&&(P.toDOM=$=>G({mark:$,HTMLAttributes:z2($,_)})),[b.name,P]}));return new C0({topNode:u,nodes:h,marks:m})}function I2(i,e){return e.nodes[i]||e.marks[i]||null}function Ix(i,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===i.name):e}var TT=(i,e=500)=>{let t="",r=i.parentOffset;return i.parent.nodesBetween(Math.max(0,r-e),r,(o,n,u,h)=>{var m,b;let _=((b=(m=o.type.spec).toText)===null||b===void 0?void 0:b.call(m,{node:o,pos:n,parent:u,index:h}))||o.textContent||"%leaf%";t+=_.slice(0,Math.max(0,r-n))}),t};function V2(i){return Object.prototype.toString.call(i)==="[object RegExp]"}var ud=class{constructor(e){this.find=e.find,this.handler=e.handler}},MT=(i,e)=>{if(V2(e))return e.exec(i);let t=e(i);if(!t)return null;let r=[t.text];return r.index=t.index,r.input=i,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function J0(i){var e;let{editor:t,from:r,to:o,text:n,rules:u,plugin:h}=i,{view:m}=t;if(m.composing)return!1;let b=m.state.doc.resolve(r);if(b.parent.type.spec.code||!((e=b.nodeBefore||b.nodeAfter)===null||e===void 0)&&e.marks.find(T=>T.type.spec.code))return!1;let _=!1,S=TT(b)+n;return u.forEach(T=>{if(_)return;let P=MT(S,T.find);if(!P)return;let F=m.state.tr,G=im({state:m.state,transaction:F}),$={from:r-(P[0].length-n.length),to:o},{commands:ee,chain:ue,can:fe}=new cd({editor:t,state:G});T.handler({state:G,range:$,match:P,commands:ee,chain:ue,can:fe})===null||!F.steps.length||(F.setMeta(h,{transform:F,from:r,to:o,text:n}),m.dispatch(F),_=!0)}),_}function AT(i){let{editor:e,rules:t}=i,r=new jr({state:{init(){return null},apply(o,n){let u=o.getMeta(r);if(u)return u;let h=o.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{from:b,text:_}=h,S=b+_.length;J0({editor:e,from:b,to:S,text:_,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:n}},props:{handleTextInput(o,n,u,h){return J0({editor:e,from:n,to:u,text:h,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{let{$cursor:n}=o.state.selection;n&&J0({editor:e,from:n.pos,to:n.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,n){if(n.key!=="Enter")return!1;let{$cursor:u}=o.state.selection;return u?J0({editor:e,from:u.pos,to:u.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function IT(i){return typeof i=="number"}var N2=class{constructor(e){this.find=e.find,this.handler=e.handler}},PT=(i,e,t)=>{if(V2(e))return[...i.matchAll(e)];let r=e(i,t);return r?r.map(o=>{let n=[o.text];return n.index=o.index,n.input=i,n.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(o.replaceWith)),n}):[]};function DT(i){let{editor:e,state:t,from:r,to:o,rule:n,pasteEvent:u,dropEvent:h}=i,{commands:m,chain:b,can:_}=new cd({editor:e,state:t}),S=[];return t.doc.nodesBetween(r,o,(P,F)=>{if(!P.isTextblock||P.type.spec.code)return;let G=Math.max(r,F),$=Math.min(o,F+P.content.size),ee=P.textBetween(G-F,$-F,void 0,"\uFFFC");PT(ee,n.find,u).forEach(fe=>{if(fe.index===void 0)return;let Y=G+fe.index+1,je=Y+fe[0].length,Ce={from:t.tr.mapping.map(Y),to:t.tr.mapping.map(je)},xe=n.handler({state:t,range:Ce,match:fe,commands:m,chain:b,can:_,pasteEvent:u,dropEvent:h});S.push(xe)})}),S.every(P=>P!==null)}var LT=i=>{var e;let t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",i),t};function FT(i){let{editor:e,rules:t}=i,r=null,o=!1,n=!1,u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,h=typeof DragEvent<"u"?new DragEvent("drop"):null,m=({state:_,from:S,to:T,rule:P,pasteEvt:F})=>{let G=_.tr,$=im({state:_,transaction:G});if(!(!DT({editor:e,state:$,from:Math.max(S-1,0),to:T.b-1,rule:P,pasteEvent:F,dropEvent:h})||!G.steps.length))return h=typeof DragEvent<"u"?new DragEvent("drop"):null,u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,G};return t.map(_=>new jr({view(S){let T=P=>{var F;r=!((F=S.dom.parentElement)===null||F===void 0)&&F.contains(P.target)?S.dom.parentElement:null};return window.addEventListener("dragstart",T),{destroy(){window.removeEventListener("dragstart",T)}}},props:{handleDOMEvents:{drop:(S,T)=>(n=r===S.dom.parentElement,h=T,!1),paste:(S,T)=>{var P;let F=(P=T.clipboardData)===null||P===void 0?void 0:P.getData("text/html");return u=T,o=!!F?.includes("data-pm-slice"),!1}}},appendTransaction:(S,T,P)=>{let F=S[0],G=F.getMeta("uiEvent")==="paste"&&!o,$=F.getMeta("uiEvent")==="drop"&&!n,ee=F.getMeta("applyPasteRules"),ue=!!ee;if(!G&&!$&&!ue)return;if(ue){let{from:je,text:Ce}=ee,xe=je+Ce.length,Le=LT(Ce);return m({rule:_,state:P,from:je,to:{b:xe},pasteEvt:Le})}let fe=T.doc.content.findDiffStart(P.doc.content),Y=T.doc.content.findDiffEnd(P.doc.content);if(!(!IT(fe)||!Y||fe===Y.b))return m({rule:_,state:P,from:fe,to:Y,pasteEvt:u})}}))}function zT(i){let e=i.filter((t,r)=>i.indexOf(t)!==r);return[...new Set(e)]}var O2=class i{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=i.resolve(e),this.schema=ET(this.extensions,t),this.extensions.forEach(r=>{var o;this.editor.extensionStorage[r.name]=r.storage;let n={name:r.name,options:r.options,storage:r.storage,editor:this.editor,type:I2(r.name,this.schema)};r.type==="mark"&&(!((o=Gi(ni(r,"keepOnSplit",n)))!==null&&o!==void 0)||o)&&this.splittableMarks.push(r.name);let u=ni(r,"onBeforeCreate",n);u&&this.editor.on("beforeCreate",u);let h=ni(r,"onCreate",n);h&&this.editor.on("create",h);let m=ni(r,"onUpdate",n);m&&this.editor.on("update",m);let b=ni(r,"onSelectionUpdate",n);b&&this.editor.on("selectionUpdate",b);let _=ni(r,"onTransaction",n);_&&this.editor.on("transaction",_);let S=ni(r,"onFocus",n);S&&this.editor.on("focus",S);let T=ni(r,"onBlur",n);T&&this.editor.on("blur",T);let P=ni(r,"onDestroy",n);P&&this.editor.on("destroy",P)})}static resolve(e){let t=i.sort(i.flatten(e)),r=zT(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{let r={name:t.name,options:t.options,storage:t.storage},o=ni(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{let n=ni(r,"priority")||100,u=ni(o,"priority")||100;return n>u?-1:n<u?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:I2(t.name,this.schema)},o=ni(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){let{editor:e}=this,t=i.sort([...this.extensions].reverse()),r=[],o=[],n=t.map(u=>{let h={name:u.name,options:u.options,storage:u.storage,editor:e,type:I2(u.name,this.schema)},m=[],b=ni(u,"addKeyboardShortcuts",h),_={};if(u.type==="mark"&&u.config.exitable&&(_.ArrowRight=()=>ts.handleExit({editor:e,mark:u})),b){let G=Object.fromEntries(Object.entries(b()).map(([$,ee])=>[$,()=>ee({editor:e})]));_={..._,...G}}let S=dx(_);m.push(S);let T=ni(u,"addInputRules",h);Ix(u,e.options.enableInputRules)&&T&&r.push(...T());let P=ni(u,"addPasteRules",h);Ix(u,e.options.enablePasteRules)&&P&&o.push(...P());let F=ni(u,"addProseMirrorPlugins",h);if(F){let G=F();m.push(...G)}return m}).flat();return[AT({editor:e,rules:r}),...FT({editor:e,rules:o}),...n]}get attributes(){return zx(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=rm(this.extensions);return Object.fromEntries(t.filter(r=>!!ni(r,"addNodeView")).map(r=>{let o=this.attributes.filter(m=>m.type===r.name),n={name:r.name,options:r.options,storage:r.storage,editor:e,type:no(r.name,this.schema)},u=ni(r,"addNodeView",n);if(!u)return[];let h=(m,b,_,S)=>{let T=z2(m,o);return u()({editor:e,node:m,getPos:_,decorations:S,HTMLAttributes:T,extension:r})};return[r.name,h]}))}};function NT(i){return Object.prototype.toString.call(i).slice(8,-1)}function P2(i){return NT(i)!=="Object"?!1:i.constructor===Object&&Object.getPrototypeOf(i)===Object.prototype}function nm(i,e){let t={...i};return P2(i)&&P2(e)&&Object.keys(e).forEach(r=>{P2(e[r])?r in i?t[r]=nm(i[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}var gn=class i{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Gi(ni(this,"addOptions",{name:this.name}))),this.storage=Gi(ni(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new i(e)}configure(e={}){let t=this.extend();return t.options=nm(this.options,e),t.storage=Gi(ni(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new i({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Gi(ni(t,"addOptions",{name:t.name})),t.storage=Gi(ni(t,"addStorage",{name:t.name,options:t.options})),t}};function Ox(i,e,t){let{from:r,to:o}=e,{blockSeparator:n=`

`,textSerializers:u={}}=t||{},h="",m=!0;return i.nodesBetween(r,o,(b,_,S,T)=>{var P;let F=u?.[b.type.name];if(F)return b.isBlock&&!m&&(h+=n,m=!0),S&&(h+=F({node:b,pos:_,parent:S,index:T,range:e})),!1;b.isText?(h+=(P=b?.text)===null||P===void 0?void 0:P.slice(Math.max(r,_)-_,o-_),m=!1):b.isBlock&&!m&&(h+=n,m=!0)}),h}function Bx(i){return Object.fromEntries(Object.entries(i.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}var OT=gn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new jr({key:new Gn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:i}=this,{state:e,schema:t}=i,{doc:r,selection:o}=e,{ranges:n}=o,u=Math.min(...n.map(_=>_.$from.pos)),h=Math.max(...n.map(_=>_.$to.pos)),m=Bx(t);return Ox(r,{from:u,to:h},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:m})}}})]}}),BT=()=>({editor:i,view:e})=>(requestAnimationFrame(()=>{var t;i.isDestroyed||(e.dom.blur(),(t=window?.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),RT=(i=!1)=>({commands:e})=>e.setContent("",i),UT=()=>({state:i,tr:e,dispatch:t})=>{let{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:n,$to:u})=>{i.doc.nodesBetween(n.pos,u.pos,(h,m)=>{if(h.type.isText)return;let{doc:b,mapping:_}=e,S=b.resolve(_.map(m)),T=b.resolve(_.map(m+h.nodeSize)),P=S.blockRange(T);if(!P)return;let F=tl(P);if(h.type.isTextblock){let{defaultType:G}=S.parent.contentMatchAt(S.index());e.setNodeMarkup(P.start,G)}(F||F===0)&&e.lift(P,F)})}),!0},VT=i=>e=>i(e),jT=()=>({state:i,dispatch:e})=>S2(i,e),HT=(i,e)=>({editor:t,tr:r})=>{let{state:o}=t,n=o.doc.slice(i.from,i.to);r.deleteRange(i.from,i.to);let u=r.mapping.map(e);return r.insert(u,n.content),r.setSelection(new Di(r.doc.resolve(u-1))),!0},qT=()=>({tr:i,dispatch:e})=>{let{selection:t}=i,r=t.$anchor.node();if(r.content.size>0)return!1;let o=i.selection.$anchor;for(let n=o.depth;n>0;n-=1)if(o.node(n).type===r.type){if(e){let h=o.before(n),m=o.after(n);i.delete(h,m).scrollIntoView()}return!0}return!1},$T=i=>({tr:e,state:t,dispatch:r})=>{let o=no(i,t.schema),n=e.selection.$anchor;for(let u=n.depth;u>0;u-=1)if(n.node(u).type===o){if(r){let m=n.before(u),b=n.after(u);e.delete(m,b).scrollIntoView()}return!0}return!1},QT=i=>({tr:e,dispatch:t})=>{let{from:r,to:o}=i;return t&&e.delete(r,o),!0},GT=()=>({state:i,dispatch:e})=>K0(i,e),WT=()=>({commands:i})=>i.keyboardShortcut("Enter"),ZT=()=>({state:i,dispatch:e})=>k2(i,e);function Y0(i,e,t={strict:!0}){let r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===i[o]:V2(e[o])?e[o].test(i[o]):e[o]===i[o]):!0}function B2(i,e,t={}){return i.find(r=>r.type===e&&Y0(r.attrs,t))}function KT(i,e,t={}){return!!B2(i,e,t)}function j2(i,e,t={}){if(!i||!e)return;let r=i.parent.childAfter(i.parentOffset);if(i.parentOffset===r.offset&&r.offset!==0&&(r=i.parent.childBefore(i.parentOffset)),!r.node)return;let o=B2([...r.node.marks],e,t);if(!o)return;let n=r.index,u=i.start()+r.offset,h=n+1,m=u+r.node.nodeSize;for(B2([...r.node.marks],e,t);n>0&&o.isInSet(i.parent.child(n-1).marks);)n-=1,u-=i.parent.child(n).nodeSize;for(;h<i.parent.childCount&&KT([...i.parent.child(h).marks],e,t);)m+=i.parent.child(h).nodeSize,h+=1;return{from:u,to:m}}function oc(i,e){if(typeof i=="string"){if(!e.marks[i])throw Error(`There is no mark type named '${i}'. Maybe you forgot to add the extension?`);return e.marks[i]}return i}var JT=(i,e={})=>({tr:t,state:r,dispatch:o})=>{let n=oc(i,r.schema),{doc:u,selection:h}=t,{$from:m,from:b,to:_}=h;if(o){let S=j2(m,n,e);if(S&&S.from<=b&&S.to>=_){let T=Di.create(u,S.from,S.to);t.setSelection(T)}}return!0},XT=i=>e=>{let t=typeof i=="function"?i(e):i;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function om(i){return i instanceof Di}function sl(i=0,e=0,t=0){return Math.min(Math.max(i,e),t)}function Rx(i,e=null){if(!e)return null;let t=Li.atStart(i),r=Li.atEnd(i);if(e==="start"||e===!0)return t;if(e==="end")return r;let o=t.from,n=r.to;return e==="all"?Di.create(i,sl(0,o,n),sl(i.content.size,o,n)):Di.create(i,sl(e,o,n),sl(e,o,n))}function H2(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var YT=(i=null,e={})=>({editor:t,view:r,tr:o,dispatch:n})=>{e={scrollIntoView:!0,...e};let u=()=>{H2()&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&i===null||i===!1)return!0;if(n&&i===null&&!om(t.state.selection))return u(),!0;let h=Rx(o.doc,i)||t.state.selection,m=t.state.selection.eq(h);return n&&(m||o.setSelection(h),m&&o.storedMarks&&o.setStoredMarks(o.storedMarks),u()),!0},eM=(i,e)=>t=>i.every((r,o)=>e(r,{...t,index:o})),tM=(i,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},i,e),Ux=i=>{let e=i.childNodes;for(let t=e.length-1;t>=0;t-=1){let r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?i.removeChild(r):r.nodeType===1&&Ux(r)}return i};function Px(i){let e=`<body>${i}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Ux(t)}function em(i,e,t){if(t={slice:!0,parseOptions:{},...t},typeof i=="object"&&i!==null)try{return Array.isArray(i)&&i.length>0?Et.fromArray(i.map(r=>e.nodeFromJSON(r))):e.nodeFromJSON(i)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",i,"Error:",r),em("",e,t)}if(typeof i=="string"){let r=Bc.fromSchema(e);return t.slice?r.parseSlice(Px(i),t.parseOptions).content:r.parse(Px(i),t.parseOptions)}return em("",e,t)}function iM(i,e,t){let r=i.steps.length-1;if(r<e)return;let o=i.steps[r];if(!(o instanceof Oo||o instanceof Bn))return;let n=i.mapping.maps[r],u=0;n.forEach((h,m,b,_)=>{u===0&&(u=_)}),i.setSelection(Li.near(i.doc.resolve(u),t))}var rM=i=>i.toString().startsWith("<"),nM=(i,e,t)=>({tr:r,dispatch:o,editor:n})=>{if(o){t={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u=em(e,n.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions}});if(u.toString()==="<>")return!0;let{from:h,to:m}=typeof i=="number"?{from:i,to:i}:{from:i.from,to:i.to},b=!0,_=!0;if((rM(u)?u:[u]).forEach(P=>{P.check(),b=b?P.isText&&P.marks.length===0:!1,_=_?P.isBlock:!1}),h===m&&_){let{parent:P}=r.doc.resolve(h);P.isTextblock&&!P.type.spec.code&&!P.childCount&&(h-=1,m+=1)}let T;b?(Array.isArray(e)?T=e.map(P=>P.text||"").join(""):typeof e=="object"&&e&&e.text?T=e.text:T=e,r.insertText(T,h,m)):(T=u,r.replaceWith(h,m,T)),t.updateSelection&&iM(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:T}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:T})}return!0},oM=()=>({state:i,dispatch:e})=>bx(i,e),sM=()=>({state:i,dispatch:e})=>vx(i,e),aM=()=>({state:i,dispatch:e})=>m2(i,e),lM=()=>({state:i,dispatch:e})=>b2(i,e),cM=()=>({tr:i,state:e,dispatch:t})=>{try{let r=ed(e.doc,e.selection.$from.pos,-1);return r==null?!1:(i.join(r,2),t&&t(i),!0)}catch{return!1}},uM=()=>({state:i,dispatch:e,tr:t})=>{try{let r=ed(i.doc,i.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},dM=()=>({state:i,dispatch:e})=>fx(i,e),hM=()=>({state:i,dispatch:e})=>mx(i,e);function sm(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function pM(i){let e=i.split(/-(?!$)/),t=e[e.length-1];t==="Space"&&(t=" ");let r,o,n,u;for(let h=0;h<e.length-1;h+=1){let m=e[h];if(/^(cmd|meta|m)$/i.test(m))u=!0;else if(/^a(lt)?$/i.test(m))r=!0;else if(/^(c|ctrl|control)$/i.test(m))o=!0;else if(/^s(hift)?$/i.test(m))n=!0;else if(/^mod$/i.test(m))H2()||sm()?u=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${m}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),u&&(t=`Meta-${t}`),n&&(t=`Shift-${t}`),t}var fM=i=>({editor:e,view:t,tr:r,dispatch:o})=>{let n=pM(i).split(/-(?!$)/),u=n.find(b=>!["Alt","Ctrl","Meta","Shift"].includes(b)),h=new KeyboardEvent("keydown",{key:u==="Space"?" ":u,altKey:n.includes("Alt"),ctrlKey:n.includes("Ctrl"),metaKey:n.includes("Meta"),shiftKey:n.includes("Shift"),bubbles:!0,cancelable:!0}),m=e.captureTransaction(()=>{t.someProp("handleKeyDown",b=>b(t,h))});return m?.steps.forEach(b=>{let _=b.map(r.mapping);_&&o&&r.maybeStep(_)}),!0};function vp(i,e,t={}){let{from:r,to:o,empty:n}=i.selection,u=e?no(e,i.schema):null,h=[];i.doc.nodesBetween(r,o,(S,T)=>{if(S.isText)return;let P=Math.max(r,T),F=Math.min(o,T+S.nodeSize);h.push({node:S,from:P,to:F})});let m=o-r,b=h.filter(S=>u?u.name===S.node.type.name:!0).filter(S=>Y0(S.node.attrs,t,{strict:!1}));return n?!!b.length:b.reduce((S,T)=>S+T.to-T.from,0)>=m}var mM=(i,e={})=>({state:t,dispatch:r})=>{let o=no(i,t.schema);return vp(t,o,e)?_x(t,r):!1},gM=()=>({state:i,dispatch:e})=>C2(i,e),yM=i=>({state:e,dispatch:t})=>{let r=no(i,e.schema);return Ex(r)(e,t)},bM=()=>({state:i,dispatch:e})=>x2(i,e);function am(i,e){return e.nodes[i]?"node":e.marks[i]?"mark":null}function Dx(i,e){let t=typeof e=="string"?[e]:e;return Object.keys(i).reduce((r,o)=>(t.includes(o)||(r[o]=i[o]),r),{})}var vM=(i,e)=>({tr:t,state:r,dispatch:o})=>{let n=null,u=null,h=am(typeof i=="string"?i:i.name,r.schema);return h?(h==="node"&&(n=no(i,r.schema)),h==="mark"&&(u=oc(i,r.schema)),o&&t.selection.ranges.forEach(m=>{r.doc.nodesBetween(m.$from.pos,m.$to.pos,(b,_)=>{n&&n===b.type&&t.setNodeMarkup(_,void 0,Dx(b.attrs,e)),u&&b.marks.length&&b.marks.forEach(S=>{u===S.type&&t.addMark(_,_+b.nodeSize,u.create(Dx(S.attrs,e)))})})}),!0):!1},_M=()=>({tr:i,dispatch:e})=>(e&&i.scrollIntoView(),!0),xM=()=>({tr:i,commands:e})=>e.setTextSelection({from:0,to:i.doc.content.size}),wM=()=>({state:i,dispatch:e})=>g2(i,e),kM=()=>({state:i,dispatch:e})=>v2(i,e),SM=()=>({state:i,dispatch:e})=>xx(i,e),CM=()=>({state:i,dispatch:e})=>T2(i,e),EM=()=>({state:i,dispatch:e})=>E2(i,e);function Vx(i,e,t={}){return em(i,e,{slice:!1,parseOptions:t})}var TM=(i,e=!1,t={})=>({tr:r,editor:o,dispatch:n})=>{let{doc:u}=r,h=Vx(i,o.schema,t);return n&&r.replaceWith(0,u.content.size,h).setMeta("preventUpdate",!e),!0};function dd(i,e){let t=oc(e,i.schema),{from:r,to:o,empty:n}=i.selection,u=[];n?(i.storedMarks&&u.push(...i.storedMarks),u.push(...i.selection.$head.marks())):i.doc.nodesBetween(r,o,m=>{u.push(...m.marks)});let h=u.find(m=>m.type.name===t.name);return h?{...h.attrs}:{}}function MM(i){for(let e=0;e<i.edgeCount;e+=1){let{type:t}=i.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function AM(i,e){for(let t=i.depth;t>0;t-=1){let r=i.node(t);if(e(r))return{pos:t>0?i.before(t):0,start:i.start(t),depth:t,node:r}}}function q2(i){return e=>AM(e.$from,i)}function IM(i,e){let t=Ya.fromSchema(e).serializeFragment(i),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}function PM(i,e){let t={from:0,to:i.content.size};return Ox(i,t,e)}function DM(i,e){let t=no(e,i.schema),{from:r,to:o}=i.selection,n=[];i.doc.nodesBetween(r,o,h=>{n.push(h)});let u=n.reverse().find(h=>h.type.name===t.name);return u?{...u.attrs}:{}}function LM(i,e){let t=am(typeof e=="string"?e:e.name,i.schema);return t==="node"?DM(i,e):t==="mark"?dd(i,e):{}}function jx(i,e,t){let r=[];return i===e?t.resolve(i).marks().forEach(o=>{let n=t.resolve(i-1),u=j2(n,o.type);u&&r.push({mark:o,...u})}):t.nodesBetween(i,e,(o,n)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(u=>({from:n,to:n+o.nodeSize,mark:u})))}),r}function X0(i,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{let o=i.find(n=>n.type===e&&n.name===r);return o?o.attribute.keepOnSplit:!1}))}function R2(i,e,t={}){let{empty:r,ranges:o}=i.selection,n=e?oc(e,i.schema):null;if(r)return!!(i.storedMarks||i.selection.$from.marks()).filter(S=>n?n.name===S.type.name:!0).find(S=>Y0(S.attrs,t,{strict:!1}));let u=0,h=[];if(o.forEach(({$from:S,$to:T})=>{let P=S.pos,F=T.pos;i.doc.nodesBetween(P,F,(G,$)=>{if(!G.isText&&!G.marks.length)return;let ee=Math.max(P,$),ue=Math.min(F,$+G.nodeSize),fe=ue-ee;u+=fe,h.push(...G.marks.map(Y=>({mark:Y,from:ee,to:ue})))})}),u===0)return!1;let m=h.filter(S=>n?n.name===S.mark.type.name:!0).filter(S=>Y0(S.mark.attrs,t,{strict:!1})).reduce((S,T)=>S+T.to-T.from,0),b=h.filter(S=>n?S.mark.type!==n&&S.mark.type.excludes(n):!0).reduce((S,T)=>S+T.to-T.from,0);return(m>0?m+b:m)>=u}function FM(i,e,t={}){if(!e)return vp(i,null,t)||R2(i,null,t);let r=am(e,i.schema);return r==="node"?vp(i,e,t):r==="mark"?R2(i,e,t):!1}function Lx(i,e){let{nodeExtensions:t}=rm(e),r=t.find(u=>u.name===i);if(!r)return!1;let o={name:r.name,options:r.options,storage:r.storage},n=Gi(ni(r,"group",o));return typeof n!="string"?!1:n.split(" ").includes("list")}function zM(i){var e;let t=(e=i.type.createAndFill())===null||e===void 0?void 0:e.toJSON(),r=i.toJSON();return JSON.stringify(t)===JSON.stringify(r)}function Hx(i){return i instanceof gi}function lm(i,e,t){let o=i.state.doc.content.size,n=sl(e,0,o),u=sl(t,0,o),h=i.coordsAtPos(n),m=i.coordsAtPos(u,-1),b=Math.min(h.top,m.top),_=Math.max(h.bottom,m.bottom),S=Math.min(h.left,m.left),T=Math.max(h.right,m.right),P=T-S,F=_-b,ee={top:b,bottom:_,left:S,right:T,width:P,height:F,x:S,y:b};return{...ee,toJSON:()=>ee}}function NM(i,e,t){var r;let{selection:o}=e,n=null;if(om(o)&&(n=o.$cursor),n){let h=(r=i.storedMarks)!==null&&r!==void 0?r:n.marks();return!!t.isInSet(h)||!h.some(m=>m.type.excludes(t))}let{ranges:u}=o;return u.some(({$from:h,$to:m})=>{let b=h.depth===0?i.doc.inlineContent&&i.doc.type.allowsMarkType(t):!1;return i.doc.nodesBetween(h.pos,m.pos,(_,S,T)=>{if(b)return!1;if(_.isInline){let P=!T||T.type.allowsMarkType(t),F=!!t.isInSet(_.marks)||!_.marks.some(G=>G.type.excludes(t));b=P&&F}return!b}),b})}var OM=(i,e={})=>({tr:t,state:r,dispatch:o})=>{let{selection:n}=t,{empty:u,ranges:h}=n,m=oc(i,r.schema);if(o)if(u){let b=dd(r,m);t.addStoredMark(m.create({...b,...e}))}else h.forEach(b=>{let _=b.$from.pos,S=b.$to.pos;r.doc.nodesBetween(_,S,(T,P)=>{let F=Math.max(P,_),G=Math.min(P+T.nodeSize,S);T.marks.find(ee=>ee.type===m)?T.marks.forEach(ee=>{m===ee.type&&t.addMark(F,G,m.create({...ee.attrs,...e}))}):t.addMark(F,G,m.create(e))})});return NM(r,t,m)},BM=(i,e)=>({tr:t})=>(t.setMeta(i,e),!0),RM=(i,e={})=>({state:t,dispatch:r,chain:o})=>{let n=no(i,t.schema);return n.isTextblock?o().command(({commands:u})=>M2(n,e)(t)?!0:u.clearNodes()).command(({state:u})=>M2(n,e)(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},UM=i=>({tr:e,dispatch:t})=>{if(t){let{doc:r}=e,o=sl(i,0,r.content.size),n=gi.create(r,o);e.setSelection(n)}return!0},VM=i=>({tr:e,dispatch:t})=>{if(t){let{doc:r}=e,{from:o,to:n}=typeof i=="number"?{from:i,to:i}:i,u=Di.atStart(r).from,h=Di.atEnd(r).to,m=sl(o,u,h),b=sl(n,u,h),_=Di.create(r,m,b);e.setSelection(_)}return!0},jM=i=>({state:e,dispatch:t})=>{let r=no(i,e.schema);return Tx(r)(e,t)};function Fx(i,e){let t=i.storedMarks||i.selection.$to.parentOffset&&i.selection.$from.marks();if(t){let r=t.filter(o=>e?.includes(o.type.name));i.tr.ensureMarks(r)}}var HM=({keepMarks:i=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{let{selection:n,doc:u}=e,{$from:h,$to:m}=n,b=o.extensionManager.attributes,_=X0(b,h.node().type.name,h.node().attrs);if(n instanceof gi&&n.node.isBlock)return!h.parentOffset||!Os(u,h.pos)?!1:(r&&(i&&Fx(t,o.extensionManager.splittableMarks),e.split(h.pos).scrollIntoView()),!0);if(!h.parent.isBlock)return!1;if(r){let S=m.parentOffset===m.parent.content.size;n instanceof Di&&e.deleteSelection();let T=h.depth===0?void 0:MM(h.node(-1).contentMatchAt(h.indexAfter(-1))),P=S&&T?[{type:T,attrs:_}]:void 0,F=Os(e.doc,e.mapping.map(h.pos),1,P);if(!P&&!F&&Os(e.doc,e.mapping.map(h.pos),1,T?[{type:T}]:void 0)&&(F=!0,P=T?[{type:T,attrs:_}]:void 0),F&&(e.split(e.mapping.map(h.pos),1,P),T&&!S&&!h.parentOffset&&h.parent.type!==T)){let G=e.mapping.map(h.before()),$=e.doc.resolve(G);h.node(-1).canReplaceWith($.index(),$.index()+1,T)&&e.setNodeMarkup(e.mapping.map(h.before()),T)}i&&Fx(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return!0},qM=i=>({tr:e,state:t,dispatch:r,editor:o})=>{var n;let u=no(i,t.schema),{$from:h,$to:m}=t.selection,b=t.selection.node;if(b&&b.isBlock||h.depth<2||!h.sameParent(m))return!1;let _=h.node(-1);if(_.type!==u)return!1;let S=o.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==u||h.index(-2)!==h.node(-2).childCount-1)return!1;if(r){let $=Et.empty,ee=h.index(-1)?1:h.index(-2)?2:3;for(let xe=h.depth-ee;xe>=h.depth-3;xe-=1)$=Et.from(h.node(xe).copy($));let ue=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,fe=X0(S,h.node().type.name,h.node().attrs),Y=((n=u.contentMatch.defaultType)===null||n===void 0?void 0:n.createAndFill(fe))||void 0;$=$.append(Et.from(u.createAndFill(null,Y)||void 0));let je=h.before(h.depth-(ee-1));e.replace(je,h.after(-ue),new Zt($,4-ee,0));let Ce=-1;e.doc.nodesBetween(je,e.doc.content.size,(xe,Le)=>{if(Ce>-1)return!1;xe.isTextblock&&xe.content.size===0&&(Ce=Le+1)}),Ce>-1&&e.setSelection(Di.near(e.doc.resolve(Ce))),e.scrollIntoView()}return!0}let T=m.pos===h.end()?_.contentMatchAt(0).defaultType:null,P=X0(S,_.type.name,_.attrs),F=X0(S,h.node().type.name,h.node().attrs);e.delete(h.pos,m.pos);let G=T?[{type:u,attrs:P},{type:T,attrs:F}]:[{type:u,attrs:P}];if(!Os(e.doc,h.pos,2))return!1;if(r){let{selection:$,storedMarks:ee}=t,{splittableMarks:ue}=o.extensionManager,fe=ee||$.$to.parentOffset&&$.$from.marks();if(e.split(h.pos,2,G).scrollIntoView(),!fe||!r)return!0;let Y=fe.filter(je=>ue.includes(je.type.name));e.ensureMarks(Y)}return!0},D2=(i,e)=>{let t=q2(u=>u.type===e)(i.selection);if(!t)return!0;let r=i.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;let o=i.doc.nodeAt(r);return t.node.type===o?.type&&oa(i.doc,t.pos)&&i.join(t.pos),!0},L2=(i,e)=>{let t=q2(u=>u.type===e)(i.selection);if(!t)return!0;let r=i.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;let o=i.doc.nodeAt(r);return t.node.type===o?.type&&oa(i.doc,r)&&i.join(r),!0},$M=(i,e,t,r={})=>({editor:o,tr:n,state:u,dispatch:h,chain:m,commands:b,can:_})=>{let{extensions:S,splittableMarks:T}=o.extensionManager,P=no(i,u.schema),F=no(e,u.schema),{selection:G,storedMarks:$}=u,{$from:ee,$to:ue}=G,fe=ee.blockRange(ue),Y=$||G.$to.parentOffset&&G.$from.marks();if(!fe)return!1;let je=q2(Ce=>Lx(Ce.type.name,S))(G);if(fe.depth>=1&&je&&fe.depth-je.depth<=1){if(je.node.type===P)return b.liftListItem(F);if(Lx(je.node.type.name,S)&&P.validContent(je.node.content)&&h)return m().command(()=>(n.setNodeMarkup(je.pos,P),!0)).command(()=>D2(n,P)).command(()=>L2(n,P)).run()}return!t||!Y||!h?m().command(()=>_().wrapInList(P,r)?!0:b.clearNodes()).wrapInList(P,r).command(()=>D2(n,P)).command(()=>L2(n,P)).run():m().command(()=>{let Ce=_().wrapInList(P,r),xe=Y.filter(Le=>T.includes(Le.type.name));return n.ensureMarks(xe),Ce?!0:b.clearNodes()}).wrapInList(P,r).command(()=>D2(n,P)).command(()=>L2(n,P)).run()},QM=(i,e={},t={})=>({state:r,commands:o})=>{let{extendEmptyMarkRange:n=!1}=t,u=oc(i,r.schema);return R2(r,u,e)?o.unsetMark(u,{extendEmptyMarkRange:n}):o.setMark(u,e)},GM=(i,e,t={})=>({state:r,commands:o})=>{let n=no(i,r.schema),u=no(e,r.schema);return vp(r,n,t)?o.setNode(u):o.setNode(n,t)},WM=(i,e={})=>({state:t,commands:r})=>{let o=no(i,t.schema);return vp(t,o,e)?r.lift(o):r.wrapIn(o,e)},ZM=()=>({state:i,dispatch:e})=>{let t=i.plugins;for(let r=0;r<t.length;r+=1){let o=t[r],n;if(o.spec.isInputRules&&(n=o.getState(i))){if(e){let u=i.tr,h=n.transform;for(let m=h.steps.length-1;m>=0;m-=1)u.step(h.steps[m].invert(h.docs[m]));if(n.text){let m=u.doc.resolve(n.from).marks();u.replaceWith(n.from,n.to,i.schema.text(n.text,m))}else u.delete(n.from,n.to)}return!0}}return!1},KM=()=>({tr:i,dispatch:e})=>{let{selection:t}=i,{empty:r,ranges:o}=t;return r||e&&o.forEach(n=>{i.removeMark(n.$from.pos,n.$to.pos)}),!0},JM=(i,e={})=>({tr:t,state:r,dispatch:o})=>{var n;let{extendEmptyMarkRange:u=!1}=e,{selection:h}=t,m=oc(i,r.schema),{$from:b,empty:_,ranges:S}=h;if(!o)return!0;if(_&&u){let{from:T,to:P}=h,F=(n=b.marks().find($=>$.type===m))===null||n===void 0?void 0:n.attrs,G=j2(b,m,F);G&&(T=G.from,P=G.to),t.removeMark(T,P,m)}else S.forEach(T=>{t.removeMark(T.$from.pos,T.$to.pos,m)});return t.removeStoredMark(m),!0},XM=(i,e={})=>({tr:t,state:r,dispatch:o})=>{let n=null,u=null,h=am(typeof i=="string"?i:i.name,r.schema);return h?(h==="node"&&(n=no(i,r.schema)),h==="mark"&&(u=oc(i,r.schema)),o&&t.selection.ranges.forEach(m=>{let b=m.$from.pos,_=m.$to.pos;r.doc.nodesBetween(b,_,(S,T)=>{n&&n===S.type&&t.setNodeMarkup(T,void 0,{...S.attrs,...e}),u&&S.marks.length&&S.marks.forEach(P=>{if(u===P.type){let F=Math.max(T,b),G=Math.min(T+S.nodeSize,_);t.addMark(F,G,u.create({...P.attrs,...e}))}})})}),!0):!1},YM=(i,e={})=>({state:t,dispatch:r})=>{let o=no(i,t.schema);return Sx(o,e)(t,r)},eA=(i,e={})=>({state:t,dispatch:r})=>{let o=no(i,t.schema);return Cx(o,e)(t,r)},tA=Object.freeze({__proto__:null,blur:BT,clearContent:RT,clearNodes:UT,command:VT,createParagraphNear:jT,cut:HT,deleteCurrentNode:qT,deleteNode:$T,deleteRange:QT,deleteSelection:GT,enter:WT,exitCode:ZT,extendMarkRange:JT,first:XT,focus:YT,forEach:eM,insertContent:tM,insertContentAt:nM,joinUp:oM,joinDown:sM,joinBackward:aM,joinForward:lM,joinItemBackward:cM,joinItemForward:uM,joinTextblockBackward:dM,joinTextblockForward:hM,keyboardShortcut:fM,lift:mM,liftEmptyBlock:gM,liftListItem:yM,newlineInCode:bM,resetAttributes:vM,scrollIntoView:_M,selectAll:xM,selectNodeBackward:wM,selectNodeForward:kM,selectParentNode:SM,selectTextblockEnd:CM,selectTextblockStart:EM,setContent:TM,setMark:OM,setMeta:BM,setNode:RM,setNodeSelection:UM,setTextSelection:VM,sinkListItem:jM,splitBlock:HM,splitListItem:qM,toggleList:$M,toggleMark:QM,toggleNode:GM,toggleWrap:WM,undoInputRule:ZM,unsetAllMarks:KM,unsetMark:JM,updateAttributes:XM,wrapIn:YM,wrapInList:eA}),iA=gn.create({name:"commands",addCommands(){return{...tA}}}),rA=gn.create({name:"editable",addProseMirrorPlugins(){return[new jr({key:new Gn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),nA=gn.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:i}=this;return[new jr({key:new Gn("focusEvents"),props:{handleDOMEvents:{focus:(e,t)=>{i.isFocused=!0;let r=i.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{i.isFocused=!1;let r=i.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),oA=gn.create({name:"keymap",addKeyboardShortcuts(){let i=()=>this.editor.commands.first(({commands:u})=>[()=>u.undoInputRule(),()=>u.command(({tr:h})=>{let{selection:m,doc:b}=h,{empty:_,$anchor:S}=m,{pos:T,parent:P}=S,F=S.parent.isTextblock&&T>0?h.doc.resolve(T-1):S,G=F.parent.type.spec.isolating,$=S.pos-S.parentOffset,ee=G&&F.parent.childCount===1?$===S.pos:Li.atStart(b).from===T;return!_||!ee||!P.type.isTextblock||P.textContent.length?!1:u.clearNodes()}),()=>u.deleteSelection(),()=>u.joinBackward(),()=>u.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:u})=>[()=>u.deleteSelection(),()=>u.deleteCurrentNode(),()=>u.joinForward(),()=>u.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:u})=>[()=>u.newlineInCode(),()=>u.createParagraphNear(),()=>u.liftEmptyBlock(),()=>u.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:i,"Mod-Backspace":i,"Shift-Backspace":i,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},n={...r,"Ctrl-h":i,"Alt-Backspace":i,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return H2()||sm()?n:o},addProseMirrorPlugins(){return[new jr({key:new Gn("clearDocument"),appendTransaction:(i,e,t)=>{if(!(i.some(F=>F.docChanged)&&!e.doc.eq(t.doc)))return;let{empty:o,from:n,to:u}=e.selection,h=Li.atStart(e.doc).from,m=Li.atEnd(e.doc).to;if(o||!(n===h&&u===m)||!(t.doc.textBetween(0,t.doc.content.size," "," ").length===0))return;let S=t.tr,T=im({state:t,transaction:S}),{commands:P}=new cd({editor:this.editor,state:T});if(P.clearNodes(),!!S.steps.length)return S}})]}}),sA=gn.create({name:"tabindex",addProseMirrorPlugins(){return[new jr({key:new Gn("tabindex"),props:{attributes:this.editor.isEditable?{tabindex:"0"}:{}}})]}});var U2=class i{constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new i(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new i(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new i(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,r)=>{let o=t.isBlock&&!t.isTextblock,n=this.pos+r+1,u=this.resolvedPos.doc.resolve(n);if(!o&&u.depth<=this.depth)return;let h=new i(u,this.editor,o,o?t:null);o&&(h.actualDepth=this.depth+1),e.push(new i(u,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){let n=o.node.attrs,u=Object.keys(t);for(let h=0;h<u.length;h+=1){let m=u[h];if(n[m]!==t[m])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];return!this.children||this.children.length===0||this.children.forEach(n=>{if(n.node.type.name===e){if(Object.keys(t).length>0){let u=n.node.attrs,h=Object.keys(t);for(let m=0;m<h.length;m+=1){let b=h[m];if(u[b]!==t[b])return}}if(o.push(n),r)return}o=o.concat(n.querySelectorAll(e))}),o}setAttribute(e){let t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}},aA=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 1px !important;
  height: 1px !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function lA(i,e,t){let r=document.querySelector(`style[data-tiptap-style${t?`-${t}`:""}]`);if(r!==null)return r;let o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute(`data-tiptap-style${t?`-${t}`:""}`,""),o.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(o),o}var tm=class extends F2{constructor(e={}){super(),this.isFocused=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}))},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=lA(aA,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let r=Nx(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});this.view.updateState(o)}unregisterPlugin(e){if(this.isDestroyed)return;let t=typeof e=="string"?`${e}$`:e.key,r=this.state.reconfigure({plugins:this.state.plugins.filter(o=>!o.key.startsWith(t))});this.view.updateState(r)}createExtensionManager(){var e,t;let o=[...this.options.enableCoreExtensions?[rA,OT.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),iA,nA,oA,sA]:[],...this.options.extensions].filter(n=>["extension","node","mark"].includes(n?.type));this.extensionManager=new O2(o,this)}createCommandManager(){this.commandManager=new cd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e=Vx(this.options.content,this.schema,this.options.parseOptions),t=Rx(e,this.options.autofocus);this.view=new $0(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:z0.create({doc:e,selection:t||void 0})});let r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.createNodeViews(),this.prependClass();let o=this.view.dom;o.editor=this}createNodeViews(){this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var h;return(h=this.capturedTransaction)===null||h===void 0?void 0:h.step(u)});return}let t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});let o=e.getMeta("focus"),n=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),n&&this.emit("blur",{editor:this,event:n.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return LM(this.state,e)}isActive(e,t){let r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return FM(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return IM(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return PM(this.state.doc,{blockSeparator:t,textSerializers:{...Bx(this.schema),...r}})}get isEmpty(){return zM(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){this.emit("destroy"),this.view&&this.view.destroy(),this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){let t=this.state.doc.resolve(e);return new U2(t,this)}get $doc(){return this.$pos(0)}};function Ta(i){return new ud({find:i.find,handler:({state:e,range:t,match:r})=>{let o=Gi(i.getAttributes,void 0,r);if(o===!1||o===null)return null;let{tr:n}=e,u=r[r.length-1],h=r[0];if(u){let m=h.search(/\S/),b=t.from+h.indexOf(u),_=b+u.length;if(jx(t.from,t.to,e.doc).filter(P=>P.mark.type.excluded.find(G=>G===i.type&&G!==P.mark.type)).filter(P=>P.to>b).length)return null;_<t.to&&n.delete(_,t.to),b>t.from&&n.delete(t.from+m,b);let T=t.from+m+u.length;n.addMark(t.from+m,T,i.type.create(o||{})),n.removeStoredMark(i.type)}}})}function qx(i){return new ud({find:i.find,handler:({state:e,range:t,match:r})=>{let o=Gi(i.getAttributes,void 0,r)||{},{tr:n}=e,u=t.from,h=t.to,m=i.type.create(o);if(r[1]){let b=r[0].lastIndexOf(r[1]),_=u+b;_>h?_=h:h=_+r[1].length;let S=r[0][r[0].length-1];n.insertText(S,u+r[0].length-1),n.replaceWith(_,h,m)}else r[0]&&n.insert(u-1,i.type.create(o)).delete(n.mapping.map(u),n.mapping.map(h));n.scrollIntoView()}})}function _p(i){return new ud({find:i.find,handler:({state:e,range:t,match:r})=>{let o=e.doc.resolve(t.from),n=Gi(i.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),i.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,i.type,n)}})}function sc(i){return new ud({find:i.find,handler:({state:e,range:t,match:r,chain:o})=>{let n=Gi(i.getAttributes,void 0,r)||{},u=e.tr.delete(t.from,t.to),m=u.doc.resolve(t.from).blockRange(),b=m&&Yu(m,i.type,n);if(!b)return null;if(u.wrap(m,b),i.keepMarks&&i.editor){let{selection:S,storedMarks:T}=e,{splittableMarks:P}=i.editor.extensionManager,F=T||S.$to.parentOffset&&S.$from.marks();if(F){let G=F.filter($=>P.includes($.type.name));u.ensureMarks(G)}}if(i.keepAttributes){let S=i.type.name==="bulletList"||i.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(S,n).run()}let _=u.doc.resolve(t.from-1).nodeBefore;_&&_.type===i.type&&oa(u.doc,t.from-1)&&(!i.joinPredicate||i.joinPredicate(r,_))&&u.join(t.from-1)}})}var ts=class i{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Gi(ni(this,"addOptions",{name:this.name}))),this.storage=Gi(ni(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new i(e)}configure(e={}){let t=this.extend();return t.options=nm(this.options,e),t.storage=Gi(ni(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new i({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Gi(ni(t,"addOptions",{name:t.name})),t.storage=Gi(ni(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){let{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){let u=o.marks();if(!!!u.find(b=>b?.type.name===t.name))return!1;let m=u.find(b=>b?.type.name===t.name);return m&&r.removeStoredMark(m),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}},Hr=class i{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Gi(ni(this,"addOptions",{name:this.name}))),this.storage=Gi(ni(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new i(e)}configure(e={}){let t=this.extend();return t.options=nm(this.options,e),t.storage=Gi(ni(t,"addStorage",{name:t.name,options:t.options})),t}extend(e={}){let t=new i({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Gi(ni(t,"addOptions",{name:t.name})),t.storage=Gi(ni(t,"addStorage",{name:t.name,options:t.options})),t}};function Ma(i){return new N2({find:i.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{let n=Gi(i.getAttributes,void 0,r,o);if(n===!1||n===null)return null;let{tr:u}=e,h=r[r.length-1],m=r[0],b=t.to;if(h){let _=m.search(/\S/),S=t.from+m.indexOf(h),T=S+h.length;if(jx(t.from,t.to,e.doc).filter(F=>F.mark.type.excluded.find($=>$===i.type&&$!==F.mark.type)).filter(F=>F.to>S).length)return null;T<t.to&&u.delete(T,t.to),S>t.from&&u.delete(t.from+_,S),b=t.from+_+h.length,u.addMark(t.from+_,b,i.type.create(n||{})),u.removeStoredMark(i.type)}}})}var $x=gn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,considerAnyAsEmpty:!1,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new jr({key:new Gn("placeholder"),props:{decorations:({doc:i,selection:e})=>{var t;let r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:o}=e,n=[];if(!r)return null;let{firstChild:u}=i.content,h=u&&u.type.isLeaf,m=u&&u.isAtom,b=this.options.considerAnyAsEmpty?!0:u&&u.type.name===((t=i.type.contentMatch.defaultType)===null||t===void 0?void 0:t.name),_=i.content.childCount<=1&&u&&b&&u.nodeSize<=2&&(!h||!m);return i.descendants((S,T)=>{let P=o>=T&&o<=T+S.nodeSize,F=!S.isLeaf&&!S.childCount;if((P||!this.options.showOnlyCurrent)&&F){let G=[this.options.emptyNodeClass];_&&G.push(this.options.emptyEditorClass);let $=Us.node(T,T+S.nodeSize,{class:G.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:S,pos:T,hasAnchor:P}):this.options.placeholder});n.push($)}return this.options.includeChildren}),Ro.create(i,n)}}})]}});var cA=/^\s*>\s$/,Qx=Hr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:i}){return["blockquote",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{setBlockquote:()=>({commands:i})=>i.wrapIn(this.name),toggleBlockquote:()=>({commands:i})=>i.toggleWrap(this.name),unsetBlockquote:()=>({commands:i})=>i.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[sc({find:cA,type:this.type})]}});var uA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,dA=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,hA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,pA=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Gx=ts.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:i=>i.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:i=>/^(bold(er)?|[5-9]\d{2,})$/.test(i)&&null}]},renderHTML({HTMLAttributes:i}){return["strong",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{setBold:()=>({commands:i})=>i.setMark(this.name),toggleBold:()=>({commands:i})=>i.toggleMark(this.name),unsetBold:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ta({find:uA,type:this.type}),Ta({find:hA,type:this.type})]},addPasteRules(){return[Ma({find:dA,type:this.type}),Ma({find:pA,type:this.type})]}});var fA=Hr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:i}){return["li",pr(this.options.HTMLAttributes,i),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Wx=ts.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:i=>i.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["span",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:i,commands:e})=>{let t=dd(i,this.type);return Object.entries(t).some(([,o])=>!!o)?!0:e.unsetMark(this.name)}}}}),Zx=/^\s*([-+*])\s$/,Kx=Hr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:i}){return["ul",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{toggleBulletList:()=>({commands:i,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fA.name,this.editor.getAttributes(Wx.name)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let i=sc({find:Zx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(i=sc({find:Zx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Wx.name),editor:this.editor})),[i]}});var mA=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,gA=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Jx=ts.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:i}){return["code",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{setCode:()=>({commands:i})=>i.setMark(this.name),toggleCode:()=>({commands:i})=>i.toggleMark(this.name),unsetCode:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ta({find:mA,type:this.type})]},addPasteRules(){return[Ma({find:gA,type:this.type})]}});var yA=/^```([a-z]+)?[\s\n]$/,bA=/^~~~([a-z]+)?[\s\n]$/,Xx=Hr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:null,parseHTML:i=>{var e;let{languageClassPrefix:t}=this.options,n=[...((e=i.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(u=>u.startsWith(t)).map(u=>u.replace(t,""))[0];return n||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:i,HTMLAttributes:e}){return["pre",pr(this.options.HTMLAttributes,e),["code",{class:i.attrs.language?this.options.languageClassPrefix+i.attrs.language:null},0]]},addCommands(){return{setCodeBlock:i=>({commands:e})=>e.setNode(this.name,i),toggleCodeBlock:i=>({commands:e})=>e.toggleNode(this.name,"paragraph",i)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:i,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!i||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:i})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:e}=i,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;let n=r.parentOffset===r.parent.nodeSize-2,u=r.parent.textContent.endsWith(`

`);return!n||!u?!1:i.chain().command(({tr:h})=>(h.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:i})=>{if(!this.options.exitOnArrowDown)return!1;let{state:e}=i,{selection:t,doc:r}=e,{$from:o,empty:n}=t;if(!n||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;let h=o.after();return h===void 0||r.nodeAt(h)?!1:i.commands.exitCode()}}},addInputRules(){return[_p({find:yA,type:this.type,getAttributes:i=>({language:i[1]})}),_p({find:bA,type:this.type,getAttributes:i=>({language:i[1]})})]},addProseMirrorPlugins(){return[new jr({key:new Gn("codeBlockVSCodeHandler"),props:{handlePaste:(i,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;let t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,n=o?.mode;if(!t||!n)return!1;let{tr:u}=i.state;return u.replaceSelectionWith(this.type.create({language:n})),u.setSelection(Di.near(u.doc.resolve(Math.max(0,u.selection.from-2)))),u.insertText(t.replace(/\r\n?/g,`
`)),u.setMeta("paste",!0),i.dispatch(u),!0}}})]}});var Yx=Hr.create({name:"doc",topNode:!0,content:"block+"});function e6(i={}){return new jr({view(e){return new $2(e,i)}})}var $2=class{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let n=u=>{this[o](u)};return e.dom.addEventListener(o,n),{name:o,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r;if(t){let h=e.nodeBefore,m=e.nodeAfter;if(h||m){let b=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(b){let _=b.getBoundingClientRect(),S=h?_.bottom:_.top;h&&m&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:_.left,right:_.right,top:S-this.width/2,bottom:S+this.width/2}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos);r={left:h.left-this.width/2,right:h.left+this.width/2,top:h.top,bottom:h.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let n,u;if(!o||o==document.body&&getComputedStyle(o).position=="static")n=-pageXOffset,u=-pageYOffset;else{let h=o.getBoundingClientRect();n=h.left-o.scrollLeft,u=h.top-o.scrollTop}this.element.style.left=r.left-n+"px",this.element.style.top=r.top-u+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,n=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!n){let u=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let h=D0(this.editorView.state.doc,u,this.editorView.dragging.slice);h!=null&&(u=h)}this.setCursor(u),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}};var t6=gn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[e6(this.options)]}});var Uo=class i extends Li{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return i.valid(r)?new i(r):Li.near(r)}content(){return Zt.empty}eq(e){return e instanceof i&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new i(e.resolve(t.pos))}getBookmark(){return new Q2(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!vA(e)||!_A(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&i.valid(e))return e;let o=e.pos,n=null;for(let u=e.depth;;u--){let h=e.node(u);if(t>0?e.indexAfter(u)<h.childCount:e.index(u)>0){n=h.child(t>0?e.indexAfter(u):e.index(u)-1);break}else if(u==0)return null;o+=t;let m=e.doc.resolve(o);if(i.valid(m))return m}for(;;){let u=t>0?n.firstChild:n.lastChild;if(!u){if(n.isAtom&&!n.isText&&!gi.isSelectable(n)){e=e.doc.resolve(o+n.nodeSize*t),r=!1;continue e}break}n=u,o+=t;let h=e.doc.resolve(o);if(i.valid(h))return h}return null}}};Uo.prototype.visible=!1;Uo.findFrom=Uo.findGapCursorFrom;Li.jsonID("gapcursor",Uo);var Q2=class i{constructor(e){this.pos=e}map(e){return new i(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Uo.valid(t)?new Uo(t):Li.near(t)}};function vA(i){for(let e=i.depth;e>=0;e--){let t=i.index(e),r=i.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function _A(i){for(let e=i.depth;e>=0;e--){let t=i.indexAfter(e),r=i.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function i6(){return new jr({props:{decorations:SA,createSelectionBetween(i,e,t){return e.pos==t.pos&&Uo.valid(t)?new Uo(t):null},handleClick:wA,handleKeyDown:xA,handleDOMEvents:{beforeinput:kA}}})}var xA=p2({ArrowLeft:cm("horiz",-1),ArrowRight:cm("horiz",1),ArrowUp:cm("vert",-1),ArrowDown:cm("vert",1)});function cm(i,e){let t=i=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,n){let u=r.selection,h=e>0?u.$to:u.$from,m=u.empty;if(u instanceof Di){if(!n.endOfTextblock(t)||h.depth==0)return!1;m=!1,h=r.doc.resolve(e>0?h.after():h.before())}let b=Uo.findGapCursorFrom(h,e,m);return b?(o&&o(r.tr.setSelection(new Uo(b))),!0):!1}}function wA(i,e,t){if(!i||!i.editable)return!1;let r=i.state.doc.resolve(e);if(!Uo.valid(r))return!1;let o=i.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&gi.isSelectable(i.state.doc.nodeAt(o.inside))?!1:(i.dispatch(i.state.tr.setSelection(new Uo(r))),!0)}function kA(i,e){if(e.inputType!="insertCompositionText"||!(i.state.selection instanceof Uo))return!1;let{$from:t}=i.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(i.state.schema.nodes.text);if(!r)return!1;let o=Et.empty;for(let u=r.length-1;u>=0;u--)o=Et.from(r[u].createAndFill(null,o));let n=i.state.tr.replace(t.pos,t.pos,new Zt(o,0,0));return n.setSelection(Di.near(n.doc.resolve(t.pos+1))),i.dispatch(n),!1}function SA(i){if(!(i.selection instanceof Uo))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ro.create(i.doc,[Us.widget(i.selection.head,e,{key:"gapcursor"})])}var r6=gn.create({name:"gapCursor",addProseMirrorPlugins(){return[i6()]},extendNodeSchema(i){var e;let t={name:i.name,options:i.options,storage:i.storage};return{allowGapCursor:(e=Gi(ni(i,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}});var n6=Hr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:i}){return["br",pr(this.options.HTMLAttributes,i)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:i,chain:e,state:t,editor:r})=>i.first([()=>i.exitCode(),()=>i.command(()=>{let{selection:o,storedMarks:n}=t;if(o.$from.parent.type.spec.isolating)return!1;let{keepMarks:u}=this.options,{splittableMarks:h}=r.extensionManager,m=n||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:b,dispatch:_})=>{if(_&&m&&u){let S=m.filter(T=>h.includes(T.type.name));b.ensureMarks(S)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var o6=Hr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(i=>({tag:`h${i}`,attrs:{level:i}}))},renderHTML({node:i,HTMLAttributes:e}){return[`h${this.options.levels.includes(i.attrs.level)?i.attrs.level:this.options.levels[0]}`,pr(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:i=>({commands:e})=>this.options.levels.includes(i.level)?e.setNode(this.name,i):!1,toggleHeading:i=>({commands:e})=>this.options.levels.includes(i.level)?e.toggleNode(this.name,"paragraph",i):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((i,e)=>({...i,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(i=>_p({find:new RegExp(`^(#{1,${i}})\\s$`),type:this.type,getAttributes:{level:i}}))}});var um=200,_o=function(){};_o.prototype.append=function(e){return e.length?(e=_o.from(e),!this.length&&e||e.length<um&&this.leafAppend(e)||this.length<um&&e.leafPrepend(this)||this.appendInner(e)):this};_o.prototype.prepend=function(e){return e.length?_o.from(e).append(this):this};_o.prototype.appendInner=function(e){return new CA(this,e)};_o.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?_o.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};_o.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};_o.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};_o.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(n,u){return o.push(e(n,u))},t,r),o};_o.from=function(e){return e instanceof _o?e:e&&e.length?new s6(e):_o.empty};var s6=function(i){function e(r){i.call(this),this.values=r}i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,n){return o==0&&n==this.length?this:new e(this.values.slice(o,n))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,n,u,h){for(var m=n;m<u;m++)if(o(this.values[m],h+m)===!1)return!1},e.prototype.forEachInvertedInner=function(o,n,u,h){for(var m=n-1;m>=u;m--)if(o(this.values[m],h+m)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=um)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=um)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(_o);_o.empty=new s6([]);var CA=function(i){function e(t,r){i.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,n,u){var h=this.left.length;if(o<h&&this.left.forEachInner(r,o,Math.min(n,h),u)===!1||n>h&&this.right.forEachInner(r,Math.max(o-h,0),Math.min(this.length,n)-h,u+h)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,n,u){var h=this.left.length;if(o>h&&this.right.forEachInvertedInner(r,o-h,Math.max(n,h)-h,u+h)===!1||n<h&&this.left.forEachInvertedInner(r,Math.min(o,h),n,u)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var n=this.left.length;return o<=n?this.left.slice(r,o):r>=n?this.right.slice(r-n,o-n):this.left.slice(r,n).append(this.right.slice(0,o-n))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(_o),G2=_o;var EA=500,Kc=class i{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,n;t&&(o=this.remapping(r,this.items.length),n=o.maps.length);let u=e.tr,h,m,b=[],_=[];return this.items.forEach((S,T)=>{if(!S.step){o||(o=this.remapping(r,T+1),n=o.maps.length),n--,_.push(S);return}if(o){_.push(new Aa(S.map));let P=S.step.map(o.slice(n)),F;P&&u.maybeStep(P).doc&&(F=u.mapping.maps[u.mapping.maps.length-1],b.push(new Aa(F,void 0,void 0,b.length+_.length))),n--,F&&o.appendMap(F,n)}else u.maybeStep(S.step);if(S.selection)return h=o?S.selection.map(o.slice(n)):S.selection,m=new i(this.items.slice(0,r).append(_.reverse().concat(b)),this.eventCount-1),!1},this.items.length,0),{remaining:m,transform:u,selection:h}}addTransform(e,t,r,o){let n=[],u=this.eventCount,h=this.items,m=!o&&h.length?h.get(h.length-1):null;for(let _=0;_<e.steps.length;_++){let S=e.steps[_].invert(e.docs[_]),T=new Aa(e.mapping.maps[_],S,t),P;(P=m&&m.merge(T))&&(T=P,_?n.pop():h=h.slice(0,h.length-1)),n.push(T),t&&(u++,t=void 0),o||(m=T)}let b=u-r.depth;return b>MA&&(h=TA(h,b),u-=b),new i(h.append(n),u)}remapping(e,t){let r=new rp;return this.items.forEach((o,n)=>{let u=o.mirrorOffset!=null&&n-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,u)},e,t),r}addMaps(e){return this.eventCount==0?this:new i(this.items.append(e.map(t=>new Aa(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),n=e.mapping,u=e.steps.length,h=this.eventCount;this.items.forEach(T=>{T.selection&&h--},o);let m=t;this.items.forEach(T=>{let P=n.getMirror(--m);if(P==null)return;u=Math.min(u,P);let F=n.maps[P];if(T.step){let G=e.steps[P].invert(e.docs[P]),$=T.selection&&T.selection.map(n.slice(m+1,P));$&&h++,r.push(new Aa(F,G,$))}else r.push(new Aa(F))},o);let b=[];for(let T=t;T<u;T++)b.push(new Aa(n.maps[T]));let _=this.items.slice(0,o).append(b).append(r),S=new i(_,h);return S.emptyItemCount()>EA&&(S=S.compress(this.items.length-r.length)),S}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],n=0;return this.items.forEach((u,h)=>{if(h>=e)o.push(u),u.selection&&n++;else if(u.step){let m=u.step.map(t.slice(r)),b=m&&m.getMap();if(r--,b&&t.appendMap(b,r),m){let _=u.selection&&u.selection.map(t.slice(r));_&&n++;let S=new Aa(b.invert(),m,_),T,P=o.length-1;(T=o.length&&o[P].merge(S))?o[P]=T:o.push(S)}}else u.map&&r--},this.items.length,0),new i(G2.from(o.reverse()),n)}};Kc.empty=new Kc(G2.empty,0);function TA(i,e){let t;return i.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),i.slice(t)}var Aa=class i{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new i(t.getMap().invert(),t,this.selection)}}},Ia=class{constructor(e,t,r,o,n){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=n}},MA=20;function AA(i,e,t,r){let o=t.getMeta(Zc),n;if(o)return o.historyState;t.getMeta(DA)&&(i=new Ia(i.done,i.undone,null,0,-1));let u=t.getMeta("appendedTransaction");if(t.steps.length==0)return i;if(u&&u.getMeta(Zc))return u.getMeta(Zc).redo?new Ia(i.done.addTransform(t,void 0,r,dm(e)),i.undone,a6(t.mapping.maps[t.steps.length-1]),i.prevTime,i.prevComposition):new Ia(i.done,i.undone.addTransform(t,void 0,r,dm(e)),null,i.prevTime,i.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(u&&u.getMeta("addToHistory")===!1)){let h=t.getMeta("composition"),m=i.prevTime==0||!u&&i.prevComposition!=h&&(i.prevTime<(t.time||0)-r.newGroupDelay||!IA(t,i.prevRanges)),b=u?W2(i.prevRanges,t.mapping):a6(t.mapping.maps[t.steps.length-1]);return new Ia(i.done.addTransform(t,m?e.selection.getBookmark():void 0,r,dm(e)),Kc.empty,b,t.time,h??i.prevComposition)}else return(n=t.getMeta("rebased"))?new Ia(i.done.rebased(t,n),i.undone.rebased(t,n),W2(i.prevRanges,t.mapping),i.prevTime,i.prevComposition):new Ia(i.done.addMaps(t.mapping.maps),i.undone.addMaps(t.mapping.maps),W2(i.prevRanges,t.mapping),i.prevTime,i.prevComposition)}function IA(i,e){if(!e)return!1;if(!i.docChanged)return!0;let t=!1;return i.mapping.maps[0].forEach((r,o)=>{for(let n=0;n<e.length;n+=2)r<=e[n+1]&&o>=e[n]&&(t=!0)}),t}function a6(i){let e=[];return i.forEach((t,r,o,n)=>e.push(o,n)),e}function W2(i,e){if(!i)return null;let t=[];for(let r=0;r<i.length;r+=2){let o=e.map(i[r],1),n=e.map(i[r+1],-1);o<=n&&t.push(o,n)}return t}function PA(i,e,t){let r=dm(e),o=Zc.get(e).spec.config,n=(t?i.undone:i.done).popEvent(e,r);if(!n)return null;let u=n.selection.resolve(n.transform.doc),h=(t?i.done:i.undone).addTransform(n.transform,e.selection.getBookmark(),o,r),m=new Ia(t?h:n.remaining,t?n.remaining:h,null,0,-1);return n.transform.setSelection(u).setMeta(Zc,{redo:t,historyState:m})}var Z2=!1,l6=null;function dm(i){let e=i.plugins;if(l6!=e){Z2=!1,l6=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Z2=!0;break}}return Z2}var Zc=new Gn("history"),DA=new Gn("closeHistory");function c6(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new jr({key:Zc,state:{init(){return new Ia(Kc.empty,Kc.empty,null,0,-1)},apply(e,t,r){return AA(t,r,e,i)}},config:i,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?K2:r=="historyRedo"?J2:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function hm(i,e){return(t,r)=>{let o=Zc.getState(t);if(!o||(i?o.undone:o.done).eventCount==0)return!1;if(r){let n=PA(o,t,i);n&&r(e?n.scrollIntoView():n)}return!0}}var K2=hm(!1,!0),J2=hm(!0,!0),AV=hm(!1,!1),IV=hm(!0,!1);var u6=gn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:i,dispatch:e})=>K2(i,e),redo:()=>({state:i,dispatch:e})=>J2(i,e)}},addProseMirrorPlugins(){return[c6(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});var d6=Hr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:i}){return["hr",pr(this.options.HTMLAttributes,i)]},addCommands(){return{setHorizontalRule:()=>({chain:i,state:e})=>{let{$to:t}=e.selection,r=i();return t.parentOffset===0?r.insertContentAt(Math.max(t.pos-2,0),{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:o,dispatch:n})=>{var u;if(n){let{$to:h}=o.selection,m=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?o.setSelection(Di.create(o.doc,h.pos+1)):h.nodeAfter.isBlock?o.setSelection(gi.create(o.doc,h.pos)):o.setSelection(Di.create(o.doc,h.pos));else{let b=(u=h.parent.type.contentMatch.defaultType)===null||u===void 0?void 0:u.create();b&&(o.insert(m,b),o.setSelection(Di.create(o.doc,m+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[qx({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}});var LA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,FA=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,zA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,NA=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,h6=ts.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:i=>i.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:i}){return["em",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{setItalic:()=>({commands:i})=>i.setMark(this.name),toggleItalic:()=>({commands:i})=>i.toggleMark(this.name),unsetItalic:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ta({find:LA,type:this.type}),Ta({find:zA,type:this.type})]},addPasteRules(){return[Ma({find:FA,type:this.type}),Ma({find:NA,type:this.type})]}});var p6=Hr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:i}){return["li",pr(this.options.HTMLAttributes,i),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});var OA=Hr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:i}){return["li",pr(this.options.HTMLAttributes,i),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),f6=ts.create({name:"textStyle",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:i=>i.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["span",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:i,commands:e})=>{let t=dd(i,this.type);return Object.entries(t).some(([,o])=>!!o)?!0:e.unsetMark(this.name)}}}}),m6=/^(\d+)\.\s$/,g6=Hr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:i=>i.hasAttribute("start")?parseInt(i.getAttribute("start")||"",10):1}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:i}){let{start:e,...t}=i;return e===1?["ol",pr(this.options.HTMLAttributes,t),0]:["ol",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{toggleOrderedList:()=>({commands:i,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(OA.name,this.editor.getAttributes(f6.name)).run():i.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let i=sc({find:m6,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(i=sc({find:m6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(f6.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[i]}});var y6=Hr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:i}){return["p",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{setParagraph:()=>({commands:i})=>i.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var BA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,RA=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,b6=ts.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:i=>i.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:i}){return["s",pr(this.options.HTMLAttributes,i),0]},addCommands(){return{setStrike:()=>({commands:i})=>i.setMark(this.name),toggleStrike:()=>({commands:i})=>i.toggleMark(this.name),unsetStrike:()=>({commands:i})=>i.unsetMark(this.name)}},addKeyboardShortcuts(){let i={};return sm()?i["Mod-Shift-s"]=()=>this.editor.commands.toggleStrike():i["Ctrl-Shift-s"]=()=>this.editor.commands.toggleStrike(),i},addInputRules(){return[Ta({find:BA,type:this.type})]},addPasteRules(){return[Ma({find:RA,type:this.type})]}});var v6=Hr.create({name:"text",group:"inline"});var _6=gn.create({name:"starterKit",addExtensions(){var i,e,t,r,o,n,u,h,m,b,_,S,T,P,F,G,$,ee;let ue=[];return this.options.blockquote!==!1&&ue.push(Qx.configure((i=this.options)===null||i===void 0?void 0:i.blockquote)),this.options.bold!==!1&&ue.push(Gx.configure((e=this.options)===null||e===void 0?void 0:e.bold)),this.options.bulletList!==!1&&ue.push(Kx.configure((t=this.options)===null||t===void 0?void 0:t.bulletList)),this.options.code!==!1&&ue.push(Jx.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&ue.push(Xx.configure((o=this.options)===null||o===void 0?void 0:o.codeBlock)),this.options.document!==!1&&ue.push(Yx.configure((n=this.options)===null||n===void 0?void 0:n.document)),this.options.dropcursor!==!1&&ue.push(t6.configure((u=this.options)===null||u===void 0?void 0:u.dropcursor)),this.options.gapcursor!==!1&&ue.push(r6.configure((h=this.options)===null||h===void 0?void 0:h.gapcursor)),this.options.hardBreak!==!1&&ue.push(n6.configure((m=this.options)===null||m===void 0?void 0:m.hardBreak)),this.options.heading!==!1&&ue.push(o6.configure((b=this.options)===null||b===void 0?void 0:b.heading)),this.options.history!==!1&&ue.push(u6.configure((_=this.options)===null||_===void 0?void 0:_.history)),this.options.horizontalRule!==!1&&ue.push(d6.configure((S=this.options)===null||S===void 0?void 0:S.horizontalRule)),this.options.italic!==!1&&ue.push(h6.configure((T=this.options)===null||T===void 0?void 0:T.italic)),this.options.listItem!==!1&&ue.push(p6.configure((P=this.options)===null||P===void 0?void 0:P.listItem)),this.options.orderedList!==!1&&ue.push(g6.configure((F=this.options)===null||F===void 0?void 0:F.orderedList)),this.options.paragraph!==!1&&ue.push(y6.configure((G=this.options)===null||G===void 0?void 0:G.paragraph)),this.options.strike!==!1&&ue.push(b6.configure(($=this.options)===null||$===void 0?void 0:$.strike)),this.options.text!==!1&&ue.push(v6.configure((ee=this.options)===null||ee===void 0?void 0:ee.text)),ue}});function x6(i){var e,t,r="";if(typeof i=="string"||typeof i=="number")r+=i;else if(typeof i=="object")if(Array.isArray(i)){var o=i.length;for(e=0;e<o;e++)i[e]&&(t=x6(i[e]))&&(r&&(r+=" "),r+=t)}else for(t in i)i[t]&&(r&&(r+=" "),r+=t);return r}function UA(){for(var i,e,t=0,r="",o=arguments.length;t<o;t++)(i=arguments[t])&&(e=x6(i))&&(r&&(r+=" "),r+=e);return r}var al=UA;var pm=class extends tm{constructor(){super(...arguments),this.contentElement=null}};var hd=[];function Jc(i,e){return{subscribe:un(i,e).subscribe}}function un(i,e=gt){let t,r=new Set;function o(h){if(ut(i,h)&&(i=h,t)){let m=!hd.length;for(let b of r)b[1](),hd.push(b,i);if(m){for(let b=0;b<hd.length;b+=2)hd[b][0](hd[b+1]);hd.length=0}}}function n(h){o(h(i))}function u(h,m=gt){let b=[h,m];return r.add(b),r.size===1&&(t=e(o,n)||gt),h(i),()=>{r.delete(b),r.size===0&&t&&(t(),t=null)}}return{set:o,update:n,subscribe:u}}var VA=i=>{let e=new pm(i),{subscribe:t}=Jc(e,r=>(e.on("transaction",()=>{r(e)}),()=>{e.destroy()}));return{subscribe:t}},X2=VA;function qA(i){let e,t,r,o=i[3].default,n=Si(o,i,i[2],null);return{c(){e=Ke("div"),t=Ot(),n&&n.c()},m(u,h){Ne(u,e,h),i[4](e),Ne(u,t,h),n&&n.m(u,h),r=!0},p(u,[h]){n&&n.p&&(!r||h&4)&&Ei(n,o,u,u[2],r?Ci(o,u[2],h,null):Ti(u[2]),null)},i(u){r||(Pe(n,u),r=!0)},o(u){Be(n,u),r=!1},d(u){u&&(ze(e),ze(t)),i[4](null),n&&n.d(u)}}}function $A(i,e,t){let{$$slots:r={},$$scope:o}=e,n,{editor:u}=e,h=async()=>{await Ns(),u?.options.element&&(u.contentElement||(n.append(...Array.from(u.options.element.childNodes)),u.setOptions({element:n}),t(1,u.contentElement=n,u)))};Sr(h),ug(h),hr(()=>{if(!u||(t(1,u.contentElement=null,u),!u.options.element.firstChild))return;let b=document.createElement("div");b.append(...Array.from(u.options.element.childNodes)),u.setOptions({element:b})});function m(b){Ri[b?"unshift":"push"](()=>{n=b,t(0,n)})}return i.$$set=b=>{"editor"in b&&t(1,u=b.editor),"$$scope"in b&&t(2,o=b.$$scope)},[n,u,o,r,m]}var Y2=class extends pt{constructor(e){super(),yt(this,e,$A,qA,ut,{editor:1})}},ey=Y2;var yn="top",Wn="bottom",Un="right",Tn="left",fm="auto",ac=[yn,Wn,Un,Tn],ll="start",Xc="end",w6="clippingParents",mm="viewport",pd="popper",k6="reference",iy=ac.reduce(function(i,e){return i.concat([e+"-"+ll,e+"-"+Xc])},[]),gm=[].concat(ac,[fm]).reduce(function(i,e){return i.concat([e,e+"-"+ll,e+"-"+Xc])},[]),GA="beforeRead",WA="read",ZA="afterRead",KA="beforeMain",JA="main",XA="afterMain",YA="beforeWrite",eI="write",tI="afterWrite",S6=[GA,WA,ZA,KA,JA,XA,YA,eI,tI];function oo(i){return i?(i.nodeName||"").toLowerCase():null}function Yr(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function Vs(i){var e=Yr(i).Element;return i instanceof e||i instanceof Element}function Zn(i){var e=Yr(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function fd(i){if(typeof ShadowRoot>"u")return!1;var e=Yr(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function iI(i){var e=i.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},o=e.attributes[t]||{},n=e.elements[t];!Zn(n)||!oo(n)||(Object.assign(n.style,r),Object.keys(o).forEach(function(u){var h=o[u];h===!1?n.removeAttribute(u):n.setAttribute(u,h===!0?"":h)}))})}function rI(i){var e=i.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var o=e.elements[r],n=e.attributes[r]||{},u=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),h=u.reduce(function(m,b){return m[b]="",m},{});!Zn(o)||!oo(o)||(Object.assign(o.style,h),Object.keys(n).forEach(function(m){o.removeAttribute(m)}))})}}var xp={name:"applyStyles",enabled:!0,phase:"write",fn:iI,effect:rI,requires:["computeStyles"]};function so(i){return i.split("-")[0]}var la=Math.max,Yc=Math.min,cl=Math.round;function md(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function wp(){return!/^((?!chrome|android).)*safari/i.test(md())}function js(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=i.getBoundingClientRect(),o=1,n=1;e&&Zn(i)&&(o=i.offsetWidth>0&&cl(r.width)/i.offsetWidth||1,n=i.offsetHeight>0&&cl(r.height)/i.offsetHeight||1);var u=Vs(i)?Yr(i):window,h=u.visualViewport,m=!wp()&&t,b=(r.left+(m&&h?h.offsetLeft:0))/o,_=(r.top+(m&&h?h.offsetTop:0))/n,S=r.width/o,T=r.height/n;return{width:S,height:T,top:_,right:b+S,bottom:_+T,left:b,x:b,y:_}}function eu(i){var e=js(i),t=i.offsetWidth,r=i.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:i.offsetLeft,y:i.offsetTop,width:t,height:r}}function kp(i,e){var t=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(t&&fd(t)){var r=e;do{if(r&&i.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function is(i){return Yr(i).getComputedStyle(i)}function ry(i){return["table","td","th"].indexOf(oo(i))>=0}function xo(i){return((Vs(i)?i.ownerDocument:i.document)||window.document).documentElement}function ul(i){return oo(i)==="html"?i:i.assignedSlot||i.parentNode||(fd(i)?i.host:null)||xo(i)}function C6(i){return!Zn(i)||is(i).position==="fixed"?null:i.offsetParent}function nI(i){var e=/firefox/i.test(md()),t=/Trident/i.test(md());if(t&&Zn(i)){var r=is(i);if(r.position==="fixed")return null}var o=ul(i);for(fd(o)&&(o=o.host);Zn(o)&&["html","body"].indexOf(oo(o))<0;){var n=is(o);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return o;o=o.parentNode}return null}function ca(i){for(var e=Yr(i),t=C6(i);t&&ry(t)&&is(t).position==="static";)t=C6(t);return t&&(oo(t)==="html"||oo(t)==="body"&&is(t).position==="static")?e:t||nI(i)||e}function tu(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function iu(i,e,t){return la(i,Yc(e,t))}function E6(i,e,t){var r=iu(i,e,t);return r>t?t:r}function Sp(){return{top:0,right:0,bottom:0,left:0}}function Cp(i){return Object.assign({},Sp(),i)}function Ep(i,e){return e.reduce(function(t,r){return t[r]=i,t},{})}var oI=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Cp(typeof e!="number"?e:Ep(e,ac))};function sI(i){var e,t=i.state,r=i.name,o=i.options,n=t.elements.arrow,u=t.modifiersData.popperOffsets,h=so(t.placement),m=tu(h),b=[Tn,Un].indexOf(h)>=0,_=b?"height":"width";if(!(!n||!u)){var S=oI(o.padding,t),T=eu(n),P=m==="y"?yn:Tn,F=m==="y"?Wn:Un,G=t.rects.reference[_]+t.rects.reference[m]-u[m]-t.rects.popper[_],$=u[m]-t.rects.reference[m],ee=ca(n),ue=ee?m==="y"?ee.clientHeight||0:ee.clientWidth||0:0,fe=G/2-$/2,Y=S[P],je=ue-T[_]-S[F],Ce=ue/2-T[_]/2+fe,xe=iu(Y,Ce,je),Le=m;t.modifiersData[r]=(e={},e[Le]=xe,e.centerOffset=xe-Ce,e)}}function aI(i){var e=i.state,t=i.options,r=t.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||kp(e.elements.popper,o)&&(e.elements.arrow=o))}var T6={name:"arrow",enabled:!0,phase:"main",fn:sI,effect:aI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Hs(i){return i.split("-")[1]}var lI={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cI(i,e){var t=i.x,r=i.y,o=e.devicePixelRatio||1;return{x:cl(t*o)/o||0,y:cl(r*o)/o||0}}function M6(i){var e,t=i.popper,r=i.popperRect,o=i.placement,n=i.variation,u=i.offsets,h=i.position,m=i.gpuAcceleration,b=i.adaptive,_=i.roundOffsets,S=i.isFixed,T=u.x,P=T===void 0?0:T,F=u.y,G=F===void 0?0:F,$=typeof _=="function"?_({x:P,y:G}):{x:P,y:G};P=$.x,G=$.y;var ee=u.hasOwnProperty("x"),ue=u.hasOwnProperty("y"),fe=Tn,Y=yn,je=window;if(b){var Ce=ca(t),xe="clientHeight",Le="clientWidth";if(Ce===Yr(t)&&(Ce=xo(t),is(Ce).position!=="static"&&h==="absolute"&&(xe="scrollHeight",Le="scrollWidth")),Ce=Ce,o===yn||(o===Tn||o===Un)&&n===Xc){Y=Wn;var we=S&&Ce===je&&je.visualViewport?je.visualViewport.height:Ce[xe];G-=we-r.height,G*=m?1:-1}if(o===Tn||(o===yn||o===Wn)&&n===Xc){fe=Un;var st=S&&Ce===je&&je.visualViewport?je.visualViewport.width:Ce[Le];P-=st-r.width,P*=m?1:-1}}var He=Object.assign({position:h},b&&lI),zt=_===!0?cI({x:P,y:G},Yr(t)):{x:P,y:G};if(P=zt.x,G=zt.y,m){var rt;return Object.assign({},He,(rt={},rt[Y]=ue?"0":"",rt[fe]=ee?"0":"",rt.transform=(je.devicePixelRatio||1)<=1?"translate("+P+"px, "+G+"px)":"translate3d("+P+"px, "+G+"px, 0)",rt))}return Object.assign({},He,(e={},e[Y]=ue?G+"px":"",e[fe]=ee?P+"px":"",e.transform="",e))}function uI(i){var e=i.state,t=i.options,r=t.gpuAcceleration,o=r===void 0?!0:r,n=t.adaptive,u=n===void 0?!0:n,h=t.roundOffsets,m=h===void 0?!0:h,b={placement:so(e.placement),variation:Hs(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,M6(Object.assign({},b,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:m})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,M6(Object.assign({},b,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var A6={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uI,data:{}};var ym={passive:!0};function dI(i){var e=i.state,t=i.instance,r=i.options,o=r.scroll,n=o===void 0?!0:o,u=r.resize,h=u===void 0?!0:u,m=Yr(e.elements.popper),b=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&b.forEach(function(_){_.addEventListener("scroll",t.update,ym)}),h&&m.addEventListener("resize",t.update,ym),function(){n&&b.forEach(function(_){_.removeEventListener("scroll",t.update,ym)}),h&&m.removeEventListener("resize",t.update,ym)}}var I6={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dI,data:{}};var hI={left:"right",right:"left",bottom:"top",top:"bottom"};function gd(i){return i.replace(/left|right|bottom|top/g,function(e){return hI[e]})}var pI={start:"end",end:"start"};function bm(i){return i.replace(/start|end/g,function(e){return pI[e]})}function ru(i){var e=Yr(i),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function nu(i){return js(xo(i)).left+ru(i).scrollLeft}function ny(i,e){var t=Yr(i),r=xo(i),o=t.visualViewport,n=r.clientWidth,u=r.clientHeight,h=0,m=0;if(o){n=o.width,u=o.height;var b=wp();(b||!b&&e==="fixed")&&(h=o.offsetLeft,m=o.offsetTop)}return{width:n,height:u,x:h+nu(i),y:m}}function oy(i){var e,t=xo(i),r=ru(i),o=(e=i.ownerDocument)==null?void 0:e.body,n=la(t.scrollWidth,t.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),u=la(t.scrollHeight,t.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),h=-r.scrollLeft+nu(i),m=-r.scrollTop;return is(o||t).direction==="rtl"&&(h+=la(t.clientWidth,o?o.clientWidth:0)-n),{width:n,height:u,x:h,y:m}}function ou(i){var e=is(i),t=e.overflow,r=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+o+r)}function vm(i){return["html","body","#document"].indexOf(oo(i))>=0?i.ownerDocument.body:Zn(i)&&ou(i)?i:vm(ul(i))}function lc(i,e){var t;e===void 0&&(e=[]);var r=vm(i),o=r===((t=i.ownerDocument)==null?void 0:t.body),n=Yr(r),u=o?[n].concat(n.visualViewport||[],ou(r)?r:[]):r,h=e.concat(u);return o?h:h.concat(lc(ul(u)))}function yd(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function fI(i,e){var t=js(i,!1,e==="fixed");return t.top=t.top+i.clientTop,t.left=t.left+i.clientLeft,t.bottom=t.top+i.clientHeight,t.right=t.left+i.clientWidth,t.width=i.clientWidth,t.height=i.clientHeight,t.x=t.left,t.y=t.top,t}function P6(i,e,t){return e===mm?yd(ny(i,t)):Vs(e)?fI(e,t):yd(oy(xo(i)))}function mI(i){var e=lc(ul(i)),t=["absolute","fixed"].indexOf(is(i).position)>=0,r=t&&Zn(i)?ca(i):i;return Vs(r)?e.filter(function(o){return Vs(o)&&kp(o,r)&&oo(o)!=="body"}):[]}function sy(i,e,t,r){var o=e==="clippingParents"?mI(i):[].concat(e),n=[].concat(o,[t]),u=n[0],h=n.reduce(function(m,b){var _=P6(i,b,r);return m.top=la(_.top,m.top),m.right=Yc(_.right,m.right),m.bottom=Yc(_.bottom,m.bottom),m.left=la(_.left,m.left),m},P6(i,u,r));return h.width=h.right-h.left,h.height=h.bottom-h.top,h.x=h.left,h.y=h.top,h}function Tp(i){var e=i.reference,t=i.element,r=i.placement,o=r?so(r):null,n=r?Hs(r):null,u=e.x+e.width/2-t.width/2,h=e.y+e.height/2-t.height/2,m;switch(o){case yn:m={x:u,y:e.y-t.height};break;case Wn:m={x:u,y:e.y+e.height};break;case Un:m={x:e.x+e.width,y:h};break;case Tn:m={x:e.x-t.width,y:h};break;default:m={x:e.x,y:e.y}}var b=o?tu(o):null;if(b!=null){var _=b==="y"?"height":"width";switch(n){case ll:m[b]=m[b]-(e[_]/2-t[_]/2);break;case Xc:m[b]=m[b]+(e[_]/2-t[_]/2);break;default:}}return m}function ua(i,e){e===void 0&&(e={});var t=e,r=t.placement,o=r===void 0?i.placement:r,n=t.strategy,u=n===void 0?i.strategy:n,h=t.boundary,m=h===void 0?w6:h,b=t.rootBoundary,_=b===void 0?mm:b,S=t.elementContext,T=S===void 0?pd:S,P=t.altBoundary,F=P===void 0?!1:P,G=t.padding,$=G===void 0?0:G,ee=Cp(typeof $!="number"?$:Ep($,ac)),ue=T===pd?k6:pd,fe=i.rects.popper,Y=i.elements[F?ue:T],je=sy(Vs(Y)?Y:Y.contextElement||xo(i.elements.popper),m,_,u),Ce=js(i.elements.reference),xe=Tp({reference:Ce,element:fe,strategy:"absolute",placement:o}),Le=yd(Object.assign({},fe,xe)),we=T===pd?Le:Ce,st={top:je.top-we.top+ee.top,bottom:we.bottom-je.bottom+ee.bottom,left:je.left-we.left+ee.left,right:we.right-je.right+ee.right},He=i.modifiersData.offset;if(T===pd&&He){var zt=He[o];Object.keys(st).forEach(function(rt){var jt=[Un,Wn].indexOf(rt)>=0?1:-1,$t=[yn,Wn].indexOf(rt)>=0?"y":"x";st[rt]+=zt[$t]*jt})}return st}function ay(i,e){e===void 0&&(e={});var t=e,r=t.placement,o=t.boundary,n=t.rootBoundary,u=t.padding,h=t.flipVariations,m=t.allowedAutoPlacements,b=m===void 0?gm:m,_=Hs(r),S=_?h?iy:iy.filter(function(F){return Hs(F)===_}):ac,T=S.filter(function(F){return b.indexOf(F)>=0});T.length===0&&(T=S);var P=T.reduce(function(F,G){return F[G]=ua(i,{placement:G,boundary:o,rootBoundary:n,padding:u})[so(G)],F},{});return Object.keys(P).sort(function(F,G){return P[F]-P[G]})}function gI(i){if(so(i)===fm)return[];var e=gd(i);return[bm(i),e,bm(e)]}function yI(i){var e=i.state,t=i.options,r=i.name;if(!e.modifiersData[r]._skip){for(var o=t.mainAxis,n=o===void 0?!0:o,u=t.altAxis,h=u===void 0?!0:u,m=t.fallbackPlacements,b=t.padding,_=t.boundary,S=t.rootBoundary,T=t.altBoundary,P=t.flipVariations,F=P===void 0?!0:P,G=t.allowedAutoPlacements,$=e.options.placement,ee=so($),ue=ee===$,fe=m||(ue||!F?[gd($)]:gI($)),Y=[$].concat(fe).reduce(function(Fe,Kt){return Fe.concat(so(Kt)===fm?ay(e,{placement:Kt,boundary:_,rootBoundary:S,padding:b,flipVariations:F,allowedAutoPlacements:G}):Kt)},[]),je=e.rects.reference,Ce=e.rects.popper,xe=new Map,Le=!0,we=Y[0],st=0;st<Y.length;st++){var He=Y[st],zt=so(He),rt=Hs(He)===ll,jt=[yn,Wn].indexOf(zt)>=0,$t=jt?"width":"height",dt=ua(e,{placement:He,boundary:_,rootBoundary:S,altBoundary:T,padding:b}),vt=jt?rt?Un:Tn:rt?Wn:yn;je[$t]>Ce[$t]&&(vt=gd(vt));var bt=gd(vt),Qt=[];if(n&&Qt.push(dt[zt]<=0),h&&Qt.push(dt[vt]<=0,dt[bt]<=0),Qt.every(function(Fe){return Fe})){we=He,Le=!1;break}xe.set(He,Qt)}if(Le)for(var Yt=F?3:1,ki=function(Kt){var ti=Y.find(function(Xi){var nt=xe.get(Xi);if(nt)return nt.slice(0,Kt).every(function(Wt){return Wt})});if(ti)return we=ti,"break"},oi=Yt;oi>0;oi--){var tt=ki(oi);if(tt==="break")break}e.placement!==we&&(e.modifiersData[r]._skip=!0,e.placement=we,e.reset=!0)}}var D6={name:"flip",enabled:!0,phase:"main",fn:yI,requiresIfExists:["offset"],data:{_skip:!1}};function L6(i,e,t){return t===void 0&&(t={x:0,y:0}),{top:i.top-e.height-t.y,right:i.right-e.width+t.x,bottom:i.bottom-e.height+t.y,left:i.left-e.width-t.x}}function F6(i){return[yn,Un,Wn,Tn].some(function(e){return i[e]>=0})}function bI(i){var e=i.state,t=i.name,r=e.rects.reference,o=e.rects.popper,n=e.modifiersData.preventOverflow,u=ua(e,{elementContext:"reference"}),h=ua(e,{altBoundary:!0}),m=L6(u,r),b=L6(h,o,n),_=F6(m),S=F6(b);e.modifiersData[t]={referenceClippingOffsets:m,popperEscapeOffsets:b,isReferenceHidden:_,hasPopperEscaped:S},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":_,"data-popper-escaped":S})}var z6={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bI};function vI(i,e,t){var r=so(i),o=[Tn,yn].indexOf(r)>=0?-1:1,n=typeof t=="function"?t(Object.assign({},e,{placement:i})):t,u=n[0],h=n[1];return u=u||0,h=(h||0)*o,[Tn,Un].indexOf(r)>=0?{x:h,y:u}:{x:u,y:h}}function _I(i){var e=i.state,t=i.options,r=i.name,o=t.offset,n=o===void 0?[0,0]:o,u=gm.reduce(function(_,S){return _[S]=vI(S,e.rects,n),_},{}),h=u[e.placement],m=h.x,b=h.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=m,e.modifiersData.popperOffsets.y+=b),e.modifiersData[r]=u}var N6={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:_I};function xI(i){var e=i.state,t=i.name;e.modifiersData[t]=Tp({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var O6={name:"popperOffsets",enabled:!0,phase:"read",fn:xI,data:{}};function ly(i){return i==="x"?"y":"x"}function wI(i){var e=i.state,t=i.options,r=i.name,o=t.mainAxis,n=o===void 0?!0:o,u=t.altAxis,h=u===void 0?!1:u,m=t.boundary,b=t.rootBoundary,_=t.altBoundary,S=t.padding,T=t.tether,P=T===void 0?!0:T,F=t.tetherOffset,G=F===void 0?0:F,$=ua(e,{boundary:m,rootBoundary:b,padding:S,altBoundary:_}),ee=so(e.placement),ue=Hs(e.placement),fe=!ue,Y=tu(ee),je=ly(Y),Ce=e.modifiersData.popperOffsets,xe=e.rects.reference,Le=e.rects.popper,we=typeof G=="function"?G(Object.assign({},e.rects,{placement:e.placement})):G,st=typeof we=="number"?{mainAxis:we,altAxis:we}:Object.assign({mainAxis:0,altAxis:0},we),He=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,zt={x:0,y:0};if(Ce){if(n){var rt,jt=Y==="y"?yn:Tn,$t=Y==="y"?Wn:Un,dt=Y==="y"?"height":"width",vt=Ce[Y],bt=vt+$[jt],Qt=vt-$[$t],Yt=P?-Le[dt]/2:0,ki=ue===ll?xe[dt]:Le[dt],oi=ue===ll?-Le[dt]:-xe[dt],tt=e.elements.arrow,Fe=P&&tt?eu(tt):{width:0,height:0},Kt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Sp(),ti=Kt[jt],Xi=Kt[$t],nt=iu(0,xe[dt],Fe[dt]),Wt=fe?xe[dt]/2-Yt-nt-ti-st.mainAxis:ki-nt-ti-st.mainAxis,yi=fe?-xe[dt]/2+Yt+nt+Xi+st.mainAxis:oi+nt+Xi+st.mainAxis,Rt=e.elements.arrow&&ca(e.elements.arrow),vi=Rt?Y==="y"?Rt.clientTop||0:Rt.clientLeft||0:0,lt=(rt=He?.[Y])!=null?rt:0,_i=vt+Wt-lt-vi,Ue=vt+yi-lt,fi=iu(P?Yc(bt,_i):bt,vt,P?la(Qt,Ue):Qt);Ce[Y]=fi,zt[Y]=fi-vt}if(h){var xi,hi=Y==="x"?yn:Tn,fr=Y==="x"?Wn:Un,Mr=Ce[je],en=je==="y"?"height":"width",tn=Mr+$[hi],bn=Mr-$[fr],Vn=[yn,Tn].indexOf(ee)!==-1,In=(xi=He?.[je])!=null?xi:0,Zr=Vn?tn:Mr-xe[en]-Le[en]-In+st.altAxis,ct=Vn?Mr+xe[en]+Le[en]-In-st.altAxis:bn,Lr=P&&Vn?E6(Zr,Mr,ct):iu(P?Zr:tn,Mr,P?ct:bn);Ce[je]=Lr,zt[je]=Lr-Mr}e.modifiersData[r]=zt}}var B6={name:"preventOverflow",enabled:!0,phase:"main",fn:wI,requiresIfExists:["offset"]};function cy(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function uy(i){return i===Yr(i)||!Zn(i)?ru(i):cy(i)}function kI(i){var e=i.getBoundingClientRect(),t=cl(e.width)/i.offsetWidth||1,r=cl(e.height)/i.offsetHeight||1;return t!==1||r!==1}function dy(i,e,t){t===void 0&&(t=!1);var r=Zn(e),o=Zn(e)&&kI(e),n=xo(e),u=js(i,o,t),h={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(r||!r&&!t)&&((oo(e)!=="body"||ou(n))&&(h=uy(e)),Zn(e)?(m=js(e,!0),m.x+=e.clientLeft,m.y+=e.clientTop):n&&(m.x=nu(n))),{x:u.left+h.scrollLeft-m.x,y:u.top+h.scrollTop-m.y,width:u.width,height:u.height}}function SI(i){var e=new Map,t=new Set,r=[];i.forEach(function(n){e.set(n.name,n)});function o(n){t.add(n.name);var u=[].concat(n.requires||[],n.requiresIfExists||[]);u.forEach(function(h){if(!t.has(h)){var m=e.get(h);m&&o(m)}}),r.push(n)}return i.forEach(function(n){t.has(n.name)||o(n)}),r}function hy(i){var e=SI(i);return S6.reduce(function(t,r){return t.concat(e.filter(function(o){return o.phase===r}))},[])}function py(i){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(i())})})),e}}function fy(i){var e=i.reduce(function(t,r){var o=t[r.name];return t[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var R6={placement:"bottom",modifiers:[],strategy:"absolute"};function U6(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function V6(i){i===void 0&&(i={});var e=i,t=e.defaultModifiers,r=t===void 0?[]:t,o=e.defaultOptions,n=o===void 0?R6:o;return function(h,m,b){b===void 0&&(b=n);var _={placement:"bottom",orderedModifiers:[],options:Object.assign({},R6,n),modifiersData:{},elements:{reference:h,popper:m},attributes:{},styles:{}},S=[],T=!1,P={state:_,setOptions:function(ee){var ue=typeof ee=="function"?ee(_.options):ee;G(),_.options=Object.assign({},n,_.options,ue),_.scrollParents={reference:Vs(h)?lc(h):h.contextElement?lc(h.contextElement):[],popper:lc(m)};var fe=hy(fy([].concat(r,_.options.modifiers)));return _.orderedModifiers=fe.filter(function(Y){return Y.enabled}),F(),P.update()},forceUpdate:function(){if(!T){var ee=_.elements,ue=ee.reference,fe=ee.popper;if(U6(ue,fe)){_.rects={reference:dy(ue,ca(fe),_.options.strategy==="fixed"),popper:eu(fe)},_.reset=!1,_.placement=_.options.placement,_.orderedModifiers.forEach(function(st){return _.modifiersData[st.name]=Object.assign({},st.data)});for(var Y=0;Y<_.orderedModifiers.length;Y++){if(_.reset===!0){_.reset=!1,Y=-1;continue}var je=_.orderedModifiers[Y],Ce=je.fn,xe=je.options,Le=xe===void 0?{}:xe,we=je.name;typeof Ce=="function"&&(_=Ce({state:_,options:Le,name:we,instance:P})||_)}}}},update:py(function(){return new Promise(function($){P.forceUpdate(),$(_)})}),destroy:function(){G(),T=!0}};if(!U6(h,m))return P;P.setOptions(b).then(function($){!T&&b.onFirstUpdate&&b.onFirstUpdate($)});function F(){_.orderedModifiers.forEach(function($){var ee=$.name,ue=$.options,fe=ue===void 0?{}:ue,Y=$.effect;if(typeof Y=="function"){var je=Y({state:_,name:ee,instance:P,options:fe}),Ce=function(){};S.push(je||Ce)}})}function G(){S.forEach(function($){return $()}),S=[]}return P}}var CI=[I6,O6,A6,xp,N6,D6,B6,T6,z6],my=V6({defaultModifiers:CI});var EI="tippy-box",J6="tippy-content",TI="tippy-backdrop",X6="tippy-arrow",Y6="tippy-svg-arrow",su={passive:!0,capture:!0},e9=function(){return document.body};function gy(i,e,t){if(Array.isArray(i)){var r=i[e];return r??(Array.isArray(t)?t[e]:t)}return i}function wy(i,e){var t={}.toString.call(i);return t.indexOf("[object")===0&&t.indexOf(e+"]")>-1}function t9(i,e){return typeof i=="function"?i.apply(void 0,e):i}function j6(i,e){if(e===0)return i;var t;return function(r){clearTimeout(t),t=setTimeout(function(){i(r)},e)}}function MI(i){return i.split(/\s+/).filter(Boolean)}function bd(i){return[].concat(i)}function H6(i,e){i.indexOf(e)===-1&&i.push(e)}function AI(i){return i.filter(function(e,t){return i.indexOf(e)===t})}function II(i){return i.split("-")[0]}function xm(i){return[].slice.call(i)}function q6(i){return Object.keys(i).reduce(function(e,t){return i[t]!==void 0&&(e[t]=i[t]),e},{})}function Mp(){return document.createElement("div")}function wm(i){return["Element","Fragment"].some(function(e){return wy(i,e)})}function PI(i){return wy(i,"NodeList")}function DI(i){return wy(i,"MouseEvent")}function LI(i){return!!(i&&i._tippy&&i._tippy.reference===i)}function FI(i){return wm(i)?[i]:PI(i)?xm(i):Array.isArray(i)?i:xm(document.querySelectorAll(i))}function yy(i,e){i.forEach(function(t){t&&(t.style.transitionDuration=e+"ms")})}function $6(i,e){i.forEach(function(t){t&&t.setAttribute("data-state",e)})}function zI(i){var e,t=bd(i),r=t[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function NI(i,e){var t=e.clientX,r=e.clientY;return i.every(function(o){var n=o.popperRect,u=o.popperState,h=o.props,m=h.interactiveBorder,b=II(u.placement),_=u.modifiersData.offset;if(!_)return!0;var S=b==="bottom"?_.top.y:0,T=b==="top"?_.bottom.y:0,P=b==="right"?_.left.x:0,F=b==="left"?_.right.x:0,G=n.top-r+S>m,$=r-n.bottom-T>m,ee=n.left-t+P>m,ue=t-n.right-F>m;return G||$||ee||ue})}function by(i,e,t){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){i[r](o,t)})}function Q6(i,e){for(var t=e;t;){var r;if(i.contains(t))return!0;t=t.getRootNode==null||(r=t.getRootNode())==null?void 0:r.host}return!1}var Pa={isTouch:!1},G6=0;function OI(){Pa.isTouch||(Pa.isTouch=!0,window.performance&&document.addEventListener("mousemove",i9))}function i9(){var i=performance.now();i-G6<20&&(Pa.isTouch=!1,document.removeEventListener("mousemove",i9)),G6=i}function BI(){var i=document.activeElement;if(LI(i)){var e=i._tippy;i.blur&&!e.state.isVisible&&i.blur()}}function RI(){document.addEventListener("touchstart",OI,su),window.addEventListener("blur",BI)}var UI=typeof window<"u"&&typeof document<"u",VI=UI?!!window.msCrypto:!1;var jI={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},HI={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},da=Object.assign({appendTo:e9,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},jI,HI),qI=Object.keys(da),$I=function(e){var t=Object.keys(e);t.forEach(function(r){da[r]=e[r]})};function r9(i){var e=i.plugins||[],t=e.reduce(function(r,o){var n=o.name,u=o.defaultValue;if(n){var h;r[n]=i[n]!==void 0?i[n]:(h=da[n])!=null?h:u}return r},{});return Object.assign({},i,t)}function QI(i,e){var t=e?Object.keys(r9(Object.assign({},da,{plugins:e}))):qI,r=t.reduce(function(o,n){var u=(i.getAttribute("data-tippy-"+n)||"").trim();if(!u)return o;if(n==="content")o[n]=u;else try{o[n]=JSON.parse(u)}catch{o[n]=u}return o},{});return r}function W6(i,e){var t=Object.assign({},e,{content:t9(e.content,[i])},e.ignoreAttributes?{}:QI(i,e.plugins));return t.aria=Object.assign({},da.aria,t.aria),t.aria={expanded:t.aria.expanded==="auto"?e.interactive:t.aria.expanded,content:t.aria.content==="auto"?e.interactive?null:"describedby":t.aria.content},t}var GI=function(){return"innerHTML"};function _y(i,e){i[GI()]=e}function Z6(i){var e=Mp();return i===!0?e.className=X6:(e.className=Y6,wm(i)?e.appendChild(i):_y(e,i)),e}function K6(i,e){wm(e.content)?(_y(i,""),i.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?_y(i,e.content):i.textContent=e.content)}function xy(i){var e=i.firstElementChild,t=xm(e.children);return{box:e,content:t.find(function(r){return r.classList.contains(J6)}),arrow:t.find(function(r){return r.classList.contains(X6)||r.classList.contains(Y6)}),backdrop:t.find(function(r){return r.classList.contains(TI)})}}function n9(i){var e=Mp(),t=Mp();t.className=EI,t.setAttribute("data-state","hidden"),t.setAttribute("tabindex","-1");var r=Mp();r.className=J6,r.setAttribute("data-state","hidden"),K6(r,i.props),e.appendChild(t),t.appendChild(r),o(i.props,i.props);function o(n,u){var h=xy(e),m=h.box,b=h.content,_=h.arrow;u.theme?m.setAttribute("data-theme",u.theme):m.removeAttribute("data-theme"),typeof u.animation=="string"?m.setAttribute("data-animation",u.animation):m.removeAttribute("data-animation"),u.inertia?m.setAttribute("data-inertia",""):m.removeAttribute("data-inertia"),m.style.maxWidth=typeof u.maxWidth=="number"?u.maxWidth+"px":u.maxWidth,u.role?m.setAttribute("role",u.role):m.removeAttribute("role"),(n.content!==u.content||n.allowHTML!==u.allowHTML)&&K6(b,i.props),u.arrow?_?n.arrow!==u.arrow&&(m.removeChild(_),m.appendChild(Z6(u.arrow))):m.appendChild(Z6(u.arrow)):_&&m.removeChild(_)}return{popper:e,onUpdate:o}}n9.$$tippy=!0;var WI=1,_m=[],vy=[];function ZI(i,e){var t=W6(i,Object.assign({},da,r9(q6(e)))),r,o,n,u=!1,h=!1,m=!1,b=!1,_,S,T,P=[],F=j6(_i,t.interactiveDebounce),G,$=WI++,ee=null,ue=AI(t.plugins),fe={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},Y={id:$,reference:i,popper:Mp(),popperInstance:ee,props:t,state:fe,plugins:ue,clearDelayTimeouts:Zr,setProps:ct,setContent:Lr,show:Fr,hide:Kn,hideWithInteractivity:ko,enable:Vn,disable:In,unmount:ft,destroy:Mt};if(!t.render)return Y;var je=t.render(Y),Ce=je.popper,xe=je.onUpdate;Ce.setAttribute("data-tippy-root",""),Ce.id="tippy-"+Y.id,Y.popper=Ce,i._tippy=Y,Ce._tippy=Y;var Le=ue.map(function(De){return De.fn(Y)}),we=i.hasAttribute("aria-expanded");return Rt(),Yt(),vt(),bt("onCreate",[Y]),t.showOnCreate&&tn(),Ce.addEventListener("mouseenter",function(){Y.props.interactive&&Y.state.isVisible&&Y.clearDelayTimeouts()}),Ce.addEventListener("mouseleave",function(){Y.props.interactive&&Y.props.trigger.indexOf("mouseenter")>=0&&jt().addEventListener("mousemove",F)}),Y;function st(){var De=Y.props.touch;return Array.isArray(De)?De:[De,0]}function He(){return st()[0]==="hold"}function zt(){var De;return!!((De=Y.props.render)!=null&&De.$$tippy)}function rt(){return G||i}function jt(){var De=rt().parentNode;return De?zI(De):document}function $t(){return xy(Ce)}function dt(De){return Y.state.isMounted&&!Y.state.isVisible||Pa.isTouch||_&&_.type==="focus"?0:gy(Y.props.delay,De?0:1,da.delay)}function vt(De){De===void 0&&(De=!1),Ce.style.pointerEvents=Y.props.interactive&&!De?"":"none",Ce.style.zIndex=""+Y.props.zIndex}function bt(De,At,Jt){if(Jt===void 0&&(Jt=!0),Le.forEach(function(wi){wi[De]&&wi[De].apply(wi,At)}),Jt){var Dt;(Dt=Y.props)[De].apply(Dt,At)}}function Qt(){var De=Y.props.aria;if(De.content){var At="aria-"+De.content,Jt=Ce.id,Dt=bd(Y.props.triggerTarget||i);Dt.forEach(function(wi){var zi=wi.getAttribute(At);if(Y.state.isVisible)wi.setAttribute(At,zi?zi+" "+Jt:Jt);else{var re=zi&&zi.replace(Jt,"").trim();re?wi.setAttribute(At,re):wi.removeAttribute(At)}})}}function Yt(){if(!(we||!Y.props.aria.expanded)){var De=bd(Y.props.triggerTarget||i);De.forEach(function(At){Y.props.interactive?At.setAttribute("aria-expanded",Y.state.isVisible&&At===rt()?"true":"false"):At.removeAttribute("aria-expanded")})}}function ki(){jt().removeEventListener("mousemove",F),_m=_m.filter(function(De){return De!==F})}function oi(De){if(!(Pa.isTouch&&(m||De.type==="mousedown"))){var At=De.composedPath&&De.composedPath()[0]||De.target;if(!(Y.props.interactive&&Q6(Ce,At))){if(bd(Y.props.triggerTarget||i).some(function(Jt){return Q6(Jt,At)})){if(Pa.isTouch||Y.state.isVisible&&Y.props.trigger.indexOf("click")>=0)return}else bt("onClickOutside",[Y,De]);Y.props.hideOnClick===!0&&(Y.clearDelayTimeouts(),Y.hide(),h=!0,setTimeout(function(){h=!1}),Y.state.isMounted||ti())}}}function tt(){m=!0}function Fe(){m=!1}function Kt(){var De=jt();De.addEventListener("mousedown",oi,!0),De.addEventListener("touchend",oi,su),De.addEventListener("touchstart",Fe,su),De.addEventListener("touchmove",tt,su)}function ti(){var De=jt();De.removeEventListener("mousedown",oi,!0),De.removeEventListener("touchend",oi,su),De.removeEventListener("touchstart",Fe,su),De.removeEventListener("touchmove",tt,su)}function Xi(De,At){Wt(De,function(){!Y.state.isVisible&&Ce.parentNode&&Ce.parentNode.contains(Ce)&&At()})}function nt(De,At){Wt(De,At)}function Wt(De,At){var Jt=$t().box;function Dt(wi){wi.target===Jt&&(by(Jt,"remove",Dt),At())}if(De===0)return At();by(Jt,"remove",S),by(Jt,"add",Dt),S=Dt}function yi(De,At,Jt){Jt===void 0&&(Jt=!1);var Dt=bd(Y.props.triggerTarget||i);Dt.forEach(function(wi){wi.addEventListener(De,At,Jt),P.push({node:wi,eventType:De,handler:At,options:Jt})})}function Rt(){He()&&(yi("touchstart",lt,{passive:!0}),yi("touchend",Ue,{passive:!0})),MI(Y.props.trigger).forEach(function(De){if(De!=="manual")switch(yi(De,lt),De){case"mouseenter":yi("mouseleave",Ue);break;case"focus":yi(VI?"focusout":"blur",fi);break;case"focusin":yi("focusout",fi);break}})}function vi(){P.forEach(function(De){var At=De.node,Jt=De.eventType,Dt=De.handler,wi=De.options;At.removeEventListener(Jt,Dt,wi)}),P=[]}function lt(De){var At,Jt=!1;if(!(!Y.state.isEnabled||xi(De)||h)){var Dt=((At=_)==null?void 0:At.type)==="focus";_=De,G=De.currentTarget,Yt(),!Y.state.isVisible&&DI(De)&&_m.forEach(function(wi){return wi(De)}),De.type==="click"&&(Y.props.trigger.indexOf("mouseenter")<0||u)&&Y.props.hideOnClick!==!1&&Y.state.isVisible?Jt=!0:tn(De),De.type==="click"&&(u=!Jt),Jt&&!Dt&&bn(De)}}function _i(De){var At=De.target,Jt=rt().contains(At)||Ce.contains(At);if(!(De.type==="mousemove"&&Jt)){var Dt=en().concat(Ce).map(function(wi){var zi,re=wi._tippy,V=(zi=re.popperInstance)==null?void 0:zi.state;return V?{popperRect:wi.getBoundingClientRect(),popperState:V,props:t}:null}).filter(Boolean);NI(Dt,De)&&(ki(),bn(De))}}function Ue(De){var At=xi(De)||Y.props.trigger.indexOf("click")>=0&&u;if(!At){if(Y.props.interactive){Y.hideWithInteractivity(De);return}bn(De)}}function fi(De){Y.props.trigger.indexOf("focusin")<0&&De.target!==rt()||Y.props.interactive&&De.relatedTarget&&Ce.contains(De.relatedTarget)||bn(De)}function xi(De){return Pa.isTouch?He()!==De.type.indexOf("touch")>=0:!1}function hi(){fr();var De=Y.props,At=De.popperOptions,Jt=De.placement,Dt=De.offset,wi=De.getReferenceClientRect,zi=De.moveTransition,re=zt()?xy(Ce).arrow:null,V=wi?{getBoundingClientRect:wi,contextElement:wi.contextElement||rt()}:i,H={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(be){var _e=be.state;if(zt()){var Se=$t(),me=Se.box;["placement","reference-hidden","escaped"].forEach(function(ke){ke==="placement"?me.setAttribute("data-placement",_e.placement):_e.attributes.popper["data-popper-"+ke]?me.setAttribute("data-"+ke,""):me.removeAttribute("data-"+ke)}),_e.attributes.popper={}}}},q=[{name:"offset",options:{offset:Dt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!zi}},H];zt()&&re&&q.push({name:"arrow",options:{element:re,padding:3}}),q.push.apply(q,At?.modifiers||[]),Y.popperInstance=my(V,Ce,Object.assign({},At,{placement:Jt,onFirstUpdate:T,modifiers:q}))}function fr(){Y.popperInstance&&(Y.popperInstance.destroy(),Y.popperInstance=null)}function Mr(){var De=Y.props.appendTo,At,Jt=rt();Y.props.interactive&&De===e9||De==="parent"?At=Jt.parentNode:At=t9(De,[Jt]),At.contains(Ce)||At.appendChild(Ce),Y.state.isMounted=!0,hi()}function en(){return xm(Ce.querySelectorAll("[data-tippy-root]"))}function tn(De){Y.clearDelayTimeouts(),De&&bt("onTrigger",[Y,De]),Kt();var At=dt(!0),Jt=st(),Dt=Jt[0],wi=Jt[1];Pa.isTouch&&Dt==="hold"&&wi&&(At=wi),At?r=setTimeout(function(){Y.show()},At):Y.show()}function bn(De){if(Y.clearDelayTimeouts(),bt("onUntrigger",[Y,De]),!Y.state.isVisible){ti();return}if(!(Y.props.trigger.indexOf("mouseenter")>=0&&Y.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(De.type)>=0&&u)){var At=dt(!1);At?o=setTimeout(function(){Y.state.isVisible&&Y.hide()},At):n=requestAnimationFrame(function(){Y.hide()})}}function Vn(){Y.state.isEnabled=!0}function In(){Y.hide(),Y.state.isEnabled=!1}function Zr(){clearTimeout(r),clearTimeout(o),cancelAnimationFrame(n)}function ct(De){if(!Y.state.isDestroyed){bt("onBeforeUpdate",[Y,De]),vi();var At=Y.props,Jt=W6(i,Object.assign({},At,q6(De),{ignoreAttributes:!0}));Y.props=Jt,Rt(),At.interactiveDebounce!==Jt.interactiveDebounce&&(ki(),F=j6(_i,Jt.interactiveDebounce)),At.triggerTarget&&!Jt.triggerTarget?bd(At.triggerTarget).forEach(function(Dt){Dt.removeAttribute("aria-expanded")}):Jt.triggerTarget&&i.removeAttribute("aria-expanded"),Yt(),vt(),xe&&xe(At,Jt),Y.popperInstance&&(hi(),en().forEach(function(Dt){requestAnimationFrame(Dt._tippy.popperInstance.forceUpdate)})),bt("onAfterUpdate",[Y,De])}}function Lr(De){Y.setProps({content:De})}function Fr(){var De=Y.state.isVisible,At=Y.state.isDestroyed,Jt=!Y.state.isEnabled,Dt=Pa.isTouch&&!Y.props.touch,wi=gy(Y.props.duration,0,da.duration);if(!(De||At||Jt||Dt)&&!rt().hasAttribute("disabled")&&(bt("onShow",[Y],!1),Y.props.onShow(Y)!==!1)){if(Y.state.isVisible=!0,zt()&&(Ce.style.visibility="visible"),vt(),Kt(),Y.state.isMounted||(Ce.style.transition="none"),zt()){var zi=$t(),re=zi.box,V=zi.content;yy([re,V],0)}T=function(){var q;if(!(!Y.state.isVisible||b)){if(b=!0,Ce.offsetHeight,Ce.style.transition=Y.props.moveTransition,zt()&&Y.props.animation){var ne=$t(),be=ne.box,_e=ne.content;yy([be,_e],wi),$6([be,_e],"visible")}Qt(),Yt(),H6(vy,Y),(q=Y.popperInstance)==null||q.forceUpdate(),bt("onMount",[Y]),Y.props.animation&&zt()&&nt(wi,function(){Y.state.isShown=!0,bt("onShown",[Y])})}},Mr()}}function Kn(){var De=!Y.state.isVisible,At=Y.state.isDestroyed,Jt=!Y.state.isEnabled,Dt=gy(Y.props.duration,1,da.duration);if(!(De||At||Jt)&&(bt("onHide",[Y],!1),Y.props.onHide(Y)!==!1)){if(Y.state.isVisible=!1,Y.state.isShown=!1,b=!1,u=!1,zt()&&(Ce.style.visibility="hidden"),ki(),ti(),vt(!0),zt()){var wi=$t(),zi=wi.box,re=wi.content;Y.props.animation&&(yy([zi,re],Dt),$6([zi,re],"hidden"))}Qt(),Yt(),Y.props.animation?zt()&&Xi(Dt,Y.unmount):Y.unmount()}}function ko(De){jt().addEventListener("mousemove",F),H6(_m,F),F(De)}function ft(){Y.state.isVisible&&Y.hide(),Y.state.isMounted&&(fr(),en().forEach(function(De){De._tippy.unmount()}),Ce.parentNode&&Ce.parentNode.removeChild(Ce),vy=vy.filter(function(De){return De!==Y}),Y.state.isMounted=!1,bt("onHidden",[Y]))}function Mt(){Y.state.isDestroyed||(Y.clearDelayTimeouts(),Y.unmount(),vi(),delete i._tippy,Y.state.isDestroyed=!0,bt("onDestroy",[Y]))}}function Ap(i,e){e===void 0&&(e={});var t=da.plugins.concat(e.plugins||[]);RI();var r=Object.assign({},e,{plugins:t}),o=FI(i);if(0)var n,u;var h=o.reduce(function(m,b){var _=b&&ZI(b,r);return _&&m.push(_),m},[]);return wm(i)?h[0]:h}Ap.defaultProps=da;Ap.setDefaultProps=$I;Ap.currentInput=Pa;var QQ=Object.assign({},xp,{effect:function(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow)}});Ap.setDefaultProps({render:n9});var km=Ap;var ky=class{constructor({editor:e,element:t,view:r,tippyOptions:o={},updateDelay:n=250,shouldShow:u}){this.preventHide=!1,this.shouldShow=({view:h,state:m,from:b,to:_})=>{let{doc:S,selection:T}=m,{empty:P}=T,F=!S.textBetween(b,_).length&&om(m.selection),G=this.element.contains(document.activeElement);return!(!(h.hasFocus()||G)||P||F||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:h})=>{var m;if(this.preventHide){this.preventHide=!1;return}h?.relatedTarget&&(!((m=this.element.parentNode)===null||m===void 0)&&m.contains(h.relatedTarget))||this.hide()},this.tippyBlurHandler=h=>{this.blurHandler({event:h})},this.handleDebouncedUpdate=(h,m)=>{let b=!m?.selection.eq(h.state.selection),_=!m?.doc.eq(h.state.doc);!b&&!_||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(h,b,_,m)},this.updateDelay))},this.updateHandler=(h,m,b,_)=>{var S,T,P;let{state:F,composing:G}=h,{selection:$}=F;if(G||!m&&!b)return;this.createTooltip();let{ranges:ue}=$,fe=Math.min(...ue.map(Ce=>Ce.$from.pos)),Y=Math.max(...ue.map(Ce=>Ce.$to.pos));if(!((S=this.shouldShow)===null||S===void 0?void 0:S.call(this,{editor:this.editor,view:h,state:F,oldState:_,from:fe,to:Y}))){this.hide();return}(T=this.tippy)===null||T===void 0||T.setProps({getReferenceClientRect:((P=this.tippyOptions)===null||P===void 0?void 0:P.getReferenceClientRect)||(()=>{if(Hx(F.selection)){let Ce=h.nodeDOM(fe),xe=Ce.dataset.nodeViewWrapper?Ce:Ce.querySelector("[data-node-view-wrapper]");if(xe&&(Ce=xe.firstChild),Ce)return Ce.getBoundingClientRect()}return lm(h,fe,Y)})}),this.show()},this.editor=e,this.element=t,this.view=r,this.updateDelay=n,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=km(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){let{state:r}=e,o=r.selection.$from.pos!==r.selection.$to.pos;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(e,t);return}let n=!t?.selection.eq(e.state.selection),u=!t?.doc.eq(e.state.doc);this.updateHandler(e,n,u,t)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}},Sy=i=>new jr({key:typeof i.pluginKey=="string"?new Gn(i.pluginKey):i.pluginKey,view:e=>new ky({view:e,...i})}),JQ=gn.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Sy({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function KI(i){let e,t,r,o=i[8].default,n=Si(o,i,i[7],null);return{c(){e=Ke("div"),n&&n.c(),J(e,"class",t=i[1].class),Nn(e,"visibility","hidden")},m(u,h){Ne(u,e,h),n&&n.m(e,null),i[9](e),r=!0},p(u,[h]){n&&n.p&&(!r||h&128)&&Ei(n,o,u,u[7],r?Ci(o,u[7],h,null):Ti(u[7]),null),(!r||h&2&&t!==(t=u[1].class))&&J(e,"class",t)},i(u){r||(Pe(n,u),r=!0)},o(u){Be(n,u),r=!1},d(u){u&&ze(e),n&&n.d(u),i[9](null)}}}function JI(i,e,t){let{$$slots:r={},$$scope:o}=e,{editor:n}=e,{tippyOptions:u={}}=e,{pluginKey:h="SvelteTiptapBubbleMenu"}=e,{shouldShow:m=null}=e,{updateDelay:b=250}=e,_;if(!n)throw new Error("Missing editor instance.");Sr(()=>{let T=Sy({pluginKey:h,editor:n,element:_,tippyOptions:u,shouldShow:m,updateDelay:b});n.registerPlugin(T)}),hr(()=>{n.unregisterPlugin(h)});function S(T){Ri[T?"unshift":"push"](()=>{_=T,t(0,_)})}return i.$$set=T=>{t(1,e=Vr(Vr({},e),zn(T))),"editor"in T&&t(2,n=T.editor),"tippyOptions"in T&&t(3,u=T.tippyOptions),"pluginKey"in T&&t(4,h=T.pluginKey),"shouldShow"in T&&t(5,m=T.shouldShow),"updateDelay"in T&&t(6,b=T.updateDelay),"$$scope"in T&&t(7,o=T.$$scope)},e=zn(e),[_,e,n,u,h,m,b,o,r,S]}var Cy=class extends pt{constructor(e){super(),yt(this,e,JI,KI,ut,{editor:2,tippyOptions:3,pluginKey:4,shouldShow:5,updateDelay:6})}},Ey=Cy;var Ty=class{constructor({editor:e,element:t,view:r,tippyOptions:o={},shouldShow:n}){this.preventHide=!1,this.shouldShow=({view:u,state:h})=>{let{selection:m}=h,{$anchor:b,empty:_}=m,S=b.depth===1,T=b.parent.isTextblock&&!b.parent.type.spec.code&&!b.parent.textContent;return!(!u.hasFocus()||!_||!S||!T||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:u})=>{var h;if(this.preventHide){this.preventHide=!1;return}u?.relatedTarget&&(!((h=this.element.parentNode)===null||h===void 0)&&h.contains(u.relatedTarget))||this.hide()},this.tippyBlurHandler=u=>{this.blurHandler({event:u})},this.editor=e,this.element=t,this.view=r,n&&(this.shouldShow=n),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){let{element:e}=this.editor.options,t=!!e.parentElement;this.tippy||!t||(this.tippy=km(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,t){var r,o,n;let{state:u}=e,{doc:h,selection:m}=u,{from:b,to:_}=m;if(t&&t.doc.eq(h)&&t.selection.eq(m))return;if(this.createTooltip(),!((r=this.shouldShow)===null||r===void 0?void 0:r.call(this,{editor:this.editor,view:e,state:u,oldState:t}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:((n=this.tippyOptions)===null||n===void 0?void 0:n.getReferenceClientRect)||(()=>lm(e,b,_))}),this.show()}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,t;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(t=this.tippy)===null||t===void 0||t.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}},My=i=>new jr({key:typeof i.pluginKey=="string"?new Gn(i.pluginKey):i.pluginKey,view:e=>new Ty({view:e,...i})}),aG=gn.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[My({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});function XI(i){let e,t,r,o=i[7].default,n=Si(o,i,i[6],null);return{c(){e=Ke("div"),n&&n.c(),J(e,"class",t=i[1].class),Nn(e,"visibility","hidden")},m(u,h){Ne(u,e,h),n&&n.m(e,null),i[8](e),r=!0},p(u,[h]){n&&n.p&&(!r||h&64)&&Ei(n,o,u,u[6],r?Ci(o,u[6],h,null):Ti(u[6]),null),(!r||h&2&&t!==(t=u[1].class))&&J(e,"class",t)},i(u){r||(Pe(n,u),r=!0)},o(u){Be(n,u),r=!1},d(u){u&&ze(e),n&&n.d(u),i[8](null)}}}function YI(i,e,t){let{$$slots:r={},$$scope:o}=e,{editor:n}=e,{tippyOptions:u={}}=e,{pluginKey:h="SvelteTiptapFloatingMenu"}=e,{shouldShow:m=null}=e,b;if(!n)throw new Error("Missing editor instance.");Sr(()=>{let S=My({pluginKey:h,editor:n,element:b,tippyOptions:u,shouldShow:m});n.registerPlugin(S)}),hr(()=>{n.unregisterPlugin(h)});function _(S){Ri[S?"unshift":"push"](()=>{b=S,t(0,b)})}return i.$$set=S=>{t(1,e=Vr(Vr({},e),zn(S))),"editor"in S&&t(2,n=S.editor),"tippyOptions"in S&&t(3,u=S.tippyOptions),"pluginKey"in S&&t(4,h=S.pluginKey),"shouldShow"in S&&t(5,m=S.shouldShow),"$$scope"in S&&t(6,o=S.$$scope)},e=zn(e),[b,e,n,u,h,m,o,r,_]}var Ay=class extends pt{constructor(e){super(),yt(this,e,YI,XI,ut,{editor:2,tippyOptions:3,pluginKey:4,shouldShow:5})}},Iy=Ay;function eP(i){let e,t,r,o;return{c(){e=bi("svg"),t=bi("path"),r=bi("path"),o=bi("path"),J(t,"stroke","none"),J(t,"d","M0 0h24v24H0z"),J(t,"fill","none"),J(r,"d","M7 5h6a3.5 3.5 0 0 1 0 7h-6z"),J(o,"d","M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"),J(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"fill","none"),J(e,"stroke","currentColor"),J(e,"stroke-width","2"),J(e,"stroke-linecap","round"),J(e,"stroke-linejoin","round"),J(e,"class","icon icon-tabler icons-tabler-outline icon-tabler-bold")},m(n,u){Ne(n,e,u),qe(e,t),qe(e,r),qe(e,o)},p:gt,i:gt,o:gt,d(n){n&&ze(e)}}}var Py=class extends pt{constructor(e){super(),yt(this,e,null,eP,ut,{})}},Dy=Py;function tP(i){let e,t,r,o,n;return{c(){e=bi("svg"),t=bi("path"),r=bi("path"),o=bi("path"),n=bi("path"),J(t,"stroke","none"),J(t,"d","M0 0h24v24H0z"),J(t,"fill","none"),J(r,"d","M11 5l6 0"),J(o,"d","M7 19l6 0"),J(n,"d","M14 5l-4 14"),J(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"fill","none"),J(e,"stroke","currentColor"),J(e,"stroke-width","2"),J(e,"stroke-linecap","round"),J(e,"stroke-linejoin","round"),J(e,"class","icon icon-tabler icons-tabler-outline icon-tabler-italic")},m(u,h){Ne(u,e,h),qe(e,t),qe(e,r),qe(e,o),qe(e,n)},p:gt,i:gt,o:gt,d(u){u&&ze(e)}}}var Ly=class extends pt{constructor(e){super(),yt(this,e,null,tP,ut,{})}},Fy=Ly;function o9(i){let e,t,r,o;return e=new Ey({props:{editor:i[1],$$slots:{default:[iP]},$$scope:{ctx:i}}}),r=new Iy({props:{editor:i[1],$$slots:{default:[rP]},$$scope:{ctx:i}}}),{c(){qt(e.$$.fragment),t=Ot(),qt(r.$$.fragment)},m(n,u){Ut(e,n,u),Ne(n,t,u),Ut(r,n,u),o=!0},p(n,u){let h={};u&2&&(h.editor=n[1]),u&1048592&&(h.$$scope={dirty:u,ctx:n}),e.$set(h);let m={};u&2&&(m.editor=n[1]),u&1048592&&(m.$$scope={dirty:u,ctx:n}),r.$set(m)},i(n){o||(Pe(e.$$.fragment,n),Pe(r.$$.fragment,n),o=!0)},o(n){Be(e.$$.fragment,n),Be(r.$$.fragment,n),o=!1},d(n){n&&ze(t),Vt(e,n),Vt(r,n)}}}function iP(i){let e,t,r,o,n,u,h,m,b,_,S;return r=new Dy({}),h=new Fy({}),{c(){e=Ke("div"),t=Ke("button"),qt(r.$$.fragment),n=Ot(),u=Ke("button"),qt(h.$$.fragment),J(t,"class",o=al("border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",{"bg-black text-white":i[4]("bold")})),J(t,"type","button"),J(u,"class",m=al("border border-black rounded px-2 hover:bg-black hover:text-white",{"bg-black text-white":i[4]("italic")})),J(u,"type","button"),J(e,"data-test-id","bubble-menu"),J(e,"class","flex items-center justify-center")},m(T,P){Ne(T,e,P),qe(e,t),Ut(r,t,null),qe(e,n),qe(e,u),Ut(h,u,null),b=!0,_||(S=[It(t,"click",i[6]),It(u,"click",i[7])],_=!0)},p(T,P){(!b||P&16&&o!==(o=al("border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",{"bg-black text-white":T[4]("bold")})))&&J(t,"class",o),(!b||P&16&&m!==(m=al("border border-black rounded px-2 hover:bg-black hover:text-white",{"bg-black text-white":T[4]("italic")})))&&J(u,"class",m)},i(T){b||(Pe(r.$$.fragment,T),Pe(h.$$.fragment,T),b=!0)},o(T){Be(r.$$.fragment,T),Be(h.$$.fragment,T),b=!1},d(T){T&&ze(e),Vt(r),Vt(h),_=!1,kr(S)}}}function rP(i){let e,t,r,o,n,u,h,m,b,_,S;return r=new Dy({}),h=new Fy({}),{c(){e=Ke("div"),t=Ke("button"),qt(r.$$.fragment),n=Ot(),u=Ke("button"),qt(h.$$.fragment),J(t,"class",o=al("border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",{"bg-black text-white":i[4]("bold")})),J(t,"type","button"),J(u,"class",m=al("border border-black rounded px-2 hover:bg-black hover:text-white",{"bg-black text-white":i[4]("italic")})),J(u,"type","button"),J(e,"data-test-id","floating-menu"),J(e,"class","flex items-center justify-center")},m(T,P){Ne(T,e,P),qe(e,t),Ut(r,t,null),qe(e,n),qe(e,u),Ut(h,u,null),b=!0,_||(S=[It(t,"click",i[6]),It(u,"click",i[7])],_=!0)},p(T,P){(!b||P&16&&o!==(o=al("border border-black rounded px-2 mr-1 hover:bg-black hover:text-white",{"bg-black text-white":T[4]("bold")})))&&J(t,"class",o),(!b||P&16&&m!==(m=al("border border-black rounded px-2 hover:bg-black hover:text-white",{"bg-black text-white":T[4]("italic")})))&&J(u,"class",m)},i(T){b||(Pe(r.$$.fragment,T),Pe(h.$$.fragment,T),b=!0)},o(T){Be(r.$$.fragment,T),Be(h.$$.fragment,T),b=!1},d(T){T&&ze(e),Vt(r),Vt(h),_=!1,kr(S)}}}function nP(i){let e,t,r,o,n,u,h,m,b,_,S,T=i[2]&&o9(i);return t=new ey({props:{editor:i[1]}}),{c(){T&&T.c(),e=Ot(),qt(t.$$.fragment),r=Ot(),o=Ke("div"),n=Ke("button"),u=nr("Publish"),h=Ot(),m=Ke("input"),J(n,"class","bg-green-500 hover:bg-green-700 opacity-70 text-white font-bold w-32 md:w-40 py-4 px-3 mx-2 rounded-lg"),n.disabled=i[5],ar(n,"opacity-50",i[5]),ar(n,"cursor-not-allowed",i[5]),ar(n,"bg-green-700",i[5]),ar(n,"bg-green-600",i[5]),J(o,"class","button-container flex justify-center mt-4 md:mt-8 lg:mt-12 mb-10"),J(m,"type","hidden"),J(m,"name",i[0])},m(P,F){T&&T.m(P,F),Ne(P,e,F),Ut(t,P,F),Ne(P,r,F),Ne(P,o,F),qe(o,n),qe(n,u),Ne(P,h,F),Ne(P,m,F),zs(m,i[3]),b=!0,_||(S=It(m,"input",i[15]),_=!0)},p(P,[F]){P[2]?T?(T.p(P,F),F&4&&Pe(T,1)):(T=o9(P),T.c(),Pe(T,1),T.m(e.parentNode,e)):T&&(Hi(),Be(T,1,1,()=>{T=null}),qi());let G={};F&2&&(G.editor=P[1]),t.$set(G),(!b||F&32)&&(n.disabled=P[5]),(!b||F&32)&&ar(n,"opacity-50",P[5]),(!b||F&32)&&ar(n,"cursor-not-allowed",P[5]),(!b||F&32)&&ar(n,"bg-green-700",P[5]),(!b||F&32)&&ar(n,"bg-green-600",P[5]),(!b||F&1)&&J(m,"name",P[0]),F&8&&zs(m,P[3])},i(P){b||(Pe(T),Pe(t.$$.fragment,P),b=!0)},o(P){Be(T),Be(t.$$.fragment,P),b=!1},d(P){P&&(ze(e),ze(r),ze(o),ze(h),ze(m)),T&&T.d(P),Vt(t,P),_=!1,S()}}}var oP=500;function sP(i,e,t){let r,o,n,u=gt,h=()=>(u(),u=Qh(ee,we=>t(1,n=we)),ee);i.$$.on_destroy.push(()=>u());let{answerContentProp:m=""}=e,{answerUpdatedEvent:b="AnswerUpdatedEvent"}=e,{hiddenAnswerFieldName:_="text"}=e,{isPaymentsEnabled:S=!0}=e,{numAnswersCanPublish:T=1}=e,{cantPublishBecauseWaitingQuestionsNumTooHigh:P=!1}=e,{componentIdEmittingEvent:F="whoever-wants-to-emit-the-event"}=e,G,$=!0,ee,ue=m||"",fe=!1,Y="";Sr(()=>{h(t(2,ee=X2({extensions:[_6,$x.configure({placeholder:"Write your answer here \u{1F58B}"})],content:m||"<p></p>",editorProps:{attributes:{class:"border-2 border-slate-500 dark:border-slate-800 rounded-md p-3 outline-none"},handleDOMEvents:{focus:(we,st)=>(we.focus(),!1)}},onUpdate:({editor:we})=>{t(3,ue=we.getHTML())}})))});let je=()=>{n.chain().focus().toggleBold().run()},Ce=()=>{n.chain().focus().toggleItalic().run()};function xe(){let we=document.getElementById(F);if(we){t(14,fe=!0),setTimeout(()=>{t(14,fe=!1)},500);let st=new CustomEvent(b,{detail:{}});console.log("DISPATCH EVENT"),we.dispatchEvent(st)}}Xa(()=>{ue!==Y&&$&&ue.length>0&&(xe(),Y=ue,$=!1,clearTimeout(G),G=setTimeout(()=>{$=!0},oP))});function Le(){ue=this.value,t(3,ue)}return i.$$set=we=>{"answerContentProp"in we&&t(8,m=we.answerContentProp),"answerUpdatedEvent"in we&&t(9,b=we.answerUpdatedEvent),"hiddenAnswerFieldName"in we&&t(0,_=we.hiddenAnswerFieldName),"isPaymentsEnabled"in we&&t(10,S=we.isPaymentsEnabled),"numAnswersCanPublish"in we&&t(11,T=we.numAnswersCanPublish),"cantPublishBecauseWaitingQuestionsNumTooHigh"in we&&t(12,P=we.cantPublishBecauseWaitingQuestionsNumTooHigh),"componentIdEmittingEvent"in we&&t(13,F=we.componentIdEmittingEvent)},i.$$.update=()=>{i.$$.dirty&23552&&t(5,r=T==0&&S||fe||P),i.$$.dirty&2&&t(4,o=(we,st={})=>n.isActive(we,st))},[_,n,ee,ue,o,r,je,Ce,m,b,S,T,P,F,fe,Le]}var zy=class extends pt{constructor(e){super(),yt(this,e,sP,nP,ut,{answerContentProp:8,answerUpdatedEvent:9,hiddenAnswerFieldName:0,isPaymentsEnabled:10,numAnswersCanPublish:11,cantPublishBecauseWaitingQuestionsNumTooHigh:12,componentIdEmittingEvent:13})}},s9=zy;function a9(i,e,t){let r=i.slice();return r[20]=e[t],r}function l9(i){let e;return{c(){e=Ke("div"),e.innerHTML="",J(e,"class","emoji-picker-container")},m(t,r){Ne(t,e,r),i[9](e)},p:gt,d(t){t&&ze(e),i[9](null)}}}function c9(i){let e,t,r,o,n,u,h,m;return{c(){e=Ke("input"),r=Ot(),o=Ke("input"),u=Ot(),h=Ke("input"),J(e,"type","hidden"),J(e,"name",i[0]),e.value=t=i[20].unified,J(o,"type","hidden"),J(o,"name",i[1]),o.value=n=i[20].shortcodes,J(h,"type","hidden"),J(h,"name",i[2]),h.value=m=!0},m(b,_){Ne(b,e,_),Ne(b,r,_),Ne(b,o,_),Ne(b,u,_),Ne(b,h,_)},p(b,_){_&1&&J(e,"name",b[0]),_&16&&t!==(t=b[20].unified)&&(e.value=t),_&2&&J(o,"name",b[1]),_&16&&n!==(n=b[20].shortcodes)&&(o.value=n),_&4&&J(h,"name",b[2])},d(b){b&&(ze(e),ze(r),ze(o),ze(u),ze(h))}}}function u9(i){let e,t=i[20]&&c9(i);return{c(){t&&t.c(),e=Zi()},m(r,o){t&&t.m(r,o),Ne(r,e,o)},p(r,o){r[20]?t?t.p(r,o):(t=c9(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&ze(e),t&&t.d(r)}}}function aP(i){let e,t,r,o,n,u,h=i[5]&&l9(i),m=On(i[4]),b=[];for(let _=0;_<m.length;_+=1)b[_]=u9(a9(i,m,_));return{c(){e=Ke("button"),e.innerHTML='<div class="flex bg-slate-100 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-500 first-line:text-slate-900 dark:text-slate-200 rounded-2xl p-1.5 px-2 items-center text-bold"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.7" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"></path></svg></div>',t=Ot(),h&&h.c(),r=Ot();for(let _=0;_<b.length;_+=1)b[_].c();o=Zi()},m(_,S){Ne(_,e,S),Ne(_,t,S),h&&h.m(_,S),Ne(_,r,S);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(_,S);Ne(_,o,S),n||(u=It(e,"click",Fs(i[6])),n=!0)},p(_,[S]){if(_[5]?h?h.p(_,S):(h=l9(_),h.c(),h.m(r.parentNode,r)):h&&(h.d(1),h=null),S&23){m=On(_[4]);let T;for(T=0;T<m.length;T+=1){let P=a9(_,m,T);b[T]?b[T].p(P,S):(b[T]=u9(P),b[T].c(),b[T].m(o.parentNode,o))}for(;T<b.length;T+=1)b[T].d(1);b.length=m.length}},i:gt,o:gt,d(_){_&&(ze(e),ze(t),ze(r),ze(o)),h&&h.d(_),Zl(b,_),n=!1,u()}}}var lP=500;async function cP(){window.EmojiMart||await import("https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"),window.Popper||await import("https://unpkg.com/@popperjs/core@2")}function uP(){return document.documentElement.getAttribute("data-theme")==="darkmode"?"dark":"light"}function dP(i,e,t){let{id:r}=e,{eventName:o="EmojiPicker"}=e,{formUnifiedName:n="emoji_unified"}=e,{formShorthandName:u="emoji_shorthand"}=e,{formAddName:h="emoji_add"}=e,m,b=!0,_,S,T,P=null,F=[],G=!1;function $(xe){t(4,F=[xe]),ue()}Xa(()=>{F.length>0&&b&&(ee(F),t(4,F=[]),b=!1,clearTimeout(m),m=setTimeout(()=>{b=!0},lP))});function ee(xe){let Le=document.getElementById(r);if(Le){let we=new CustomEvent(o,{detail:{selected:xe}});Le.dispatchEvent(we)}}function ue(xe){xe&&xe.preventDefault(),setTimeout(()=>{t(5,G=!G),G?fe():Y()},50)}function fe(){t(3,_=document.getElementById(r)),S&&typeof S.destroy=="function"&&S.destroy(),T&&T.firstChild&&T.removeChild(T.firstChild);let xe=uP();S=new EmojiMart.Picker({theme:xe,autoFocus:!0,previewPosition:"none",categories:["frequent","people","nature","objects","foods","places","activity","flags","symbols"],onEmojiSelect:Le=>{$(Le)}}),T||(T=document.createElement("div"),T.classList.add("picker-container"),document.body.appendChild(T)),T.appendChild(S),P||(P=Popper.createPopper(_,T,{placement:"bottom-start",strategy:"fixed",modifiers:[{name:"flip",options:{fallbackPlacements:["top-start","bottom-end","top-end"]}},{name:"preventOverflow",options:{boundary:"viewport",padding:4}}]})),setTimeout(()=>{P&&P.update()},150),setTimeout(()=>{P&&P.update()},300),setTimeout(()=>{P&&P.update()},1500),setTimeout(()=>{P&&P.update()},3e3)}function Y(){T&&T.parentNode&&(T.parentNode.removeChild(T),T=null),P&&(P.destroy(),P=null)}function je(xe){G&&T&&!T.contains(xe.target)&&!xe.target.closest(".emoji-mart")&&Y()}Sr(()=>{cP(),t(3,_=document.getElementById(r)),document.addEventListener("click",je),t(3,_=document.getElementById(r))}),hr(()=>{document.removeEventListener("click",je),P&&P.destroy(),S=null,t(3,_=null)});function Ce(xe){Ri[xe?"unshift":"push"](()=>{_=xe,t(3,_)})}return i.$$set=xe=>{"id"in xe&&t(7,r=xe.id),"eventName"in xe&&t(8,o=xe.eventName),"formUnifiedName"in xe&&t(0,n=xe.formUnifiedName),"formShorthandName"in xe&&t(1,u=xe.formShorthandName),"formAddName"in xe&&t(2,h=xe.formAddName)},[n,u,h,_,F,G,ue,r,o,Ce]}var Ny=class extends pt{constructor(e){super(),yt(this,e,dP,aP,ut,{id:7,eventName:8,formUnifiedName:0,formShorthandName:1,formAddName:2})}},d9=Ny;function hP(i){let e,t=`${i[0]} transparent ${i[0]}
  ${i[0]}`;return{c(){e=Ke("div"),Nn(e,"--duration",i[1]),J(e,"class","svelte-66wdl1"),Nn(e,"border-color",t),Nn(e,"width",i[2]),Nn(e,"height",i[2])},m(r,o){Ne(r,e,o)},p(r,[o]){o&2&&Nn(e,"--duration",r[1]);let n=o&2;(o&3&&t!==(t=`${r[0]} transparent ${r[0]}
  ${r[0]}`)||n)&&Nn(e,"border-color",t),(o&6||n)&&Nn(e,"width",r[2]),(o&6||n)&&Nn(e,"height",r[2])},i:gt,o:gt,d(r){r&&ze(e)}}}function pP(i,e,t){let{color:r="cornflowerblue"}=e,{duration:o="1.5s"}=e,{size:n="1em"}=e;return i.$$set=u=>{"color"in u&&t(0,r=u.color),"duration"in u&&t(1,o=u.duration),"size"in u&&t(2,n=u.size)},[r,o,n]}var Oy=class extends pt{constructor(e){super(),yt(this,e,pP,hP,ut,{color:0,duration:1,size:2})}},By=Oy;function Ry(i){let e=i-1;return e*e*e+1}function h9(i,{from:e,to:t},r={}){let o=getComputedStyle(i),n=o.transform==="none"?"":o.transform,[u,h]=o.transformOrigin.split(" ").map(parseFloat),m=e.left+e.width*u/t.width-(t.left+u),b=e.top+e.height*h/t.height-(t.top+h),{delay:_=0,duration:S=P=>Math.sqrt(P)*120,easing:T=Ry}=r;return{delay:_,duration:zo(S)?S(Math.sqrt(m*m+b*b)):S,easing:T,css:(P,F)=>{let G=F*m,$=F*b,ee=P+F*e.width/t.width,ue=P+F*e.height/t.height;return`transform: ${n} translate(${G}px, ${$}px) scale(${ee}, ${ue});`}}}function Sm(i){return Object.prototype.toString.call(i)==="[object Date]"}function Uy(i,e,t,r){if(typeof t=="number"||Sm(t)){let o=r-t,n=(t-e)/(i.dt||1/60),u=i.opts.stiffness*o,h=i.opts.damping*n,m=(u-h)*i.inv_mass,b=(n+m)*i.dt;return Math.abs(b)<i.opts.precision&&Math.abs(o)<i.opts.precision?r:(i.settled=!1,Sm(t)?new Date(t.getTime()+b):t+b)}else{if(Array.isArray(t))return t.map((o,n)=>Uy(i,e[n],t[n],r[n]));if(typeof t=="object"){let o={};for(let n in t)o[n]=Uy(i,e[n],t[n],r[n]);return o}else throw new Error(`Cannot spring ${typeof t} values`)}}function p9(i,e={}){let t=un(i),{stiffness:r=.15,damping:o=.8,precision:n=.01}=e,u,h,m,b=i,_=i,S=1,T=0,P=!1;function F($,ee={}){_=$;let ue=m={};return i==null||ee.hard||G.stiffness>=1&&G.damping>=1?(P=!0,u=Mc(),b=$,t.set(i=_),Promise.resolve()):(ee.soft&&(T=1/((ee.soft===!0?.5:+ee.soft)*60),S=0),h||(u=Mc(),P=!1,h=Wu(fe=>{if(P)return P=!1,h=null,!1;S=Math.min(S+T,1);let Y={inv_mass:S,opts:G,settled:!0,dt:(fe-u)*60/1e3},je=Uy(Y,b,i,_);return u=fe,b=i,t.set(i=je),Y.settled&&(h=null),!Y.settled})),new Promise(fe=>{h.promise.then(()=>{ue===m&&fe()})}))}let G={set:F,update:($,ee)=>F($(_,i),ee),subscribe:t.subscribe,stiffness:r,damping:o,precision:n};return G}function fP(i){let e,t=`rotate(${i[0].angle}deg) scale(${i[0].scale}) translate(${i[0].dx}px,
  ${i[0].dy}px)`,r,o=i[11].default,n=Si(o,i,i[10],null);return{c(){e=Ke("span"),n&&n.c(),Nn(e,"transform",t)},m(u,h){Ne(u,e,h),n&&n.m(e,null),r=!0},p(u,[h]){n&&n.p&&(!r||h&1024)&&Ei(n,o,u,u[10],r?Ci(o,u[10],h,null):Ti(u[10]),null),h&1&&t!==(t=`rotate(${u[0].angle}deg) scale(${u[0].scale}) translate(${u[0].dx}px,
  ${u[0].dy}px)`)&&Nn(e,"transform",t)},i(u){r||(Pe(n,u),r=!0)},o(u){Be(n,u),r=!1},d(u){u&&ze(e),n&&n.d(u)}}}function mP(i,e,t){let r,{$$slots:o={},$$scope:n}=e,{wiggle:u=!1}=e,{angle:h=0}=e,{scale:m=1}=e,{dx:b=0}=e,{dy:_=0}=e,{duration:S=200}=e,{stiffness:T=.05}=e,{damping:P=.1}=e,F={angle:0,scale:1,dx:0,dy:0},G=p9(F,{stiffness:T,damping:P});return Fi(i,G,$=>t(0,r=$)),i.$$set=$=>{"wiggle"in $&&t(2,u=$.wiggle),"angle"in $&&t(3,h=$.angle),"scale"in $&&t(4,m=$.scale),"dx"in $&&t(5,b=$.dx),"dy"in $&&t(6,_=$.dy),"duration"in $&&t(7,S=$.duration),"stiffness"in $&&t(8,T=$.stiffness),"damping"in $&&t(9,P=$.damping),"$$scope"in $&&t(10,n=$.$$scope)},i.$$.update=()=>{i.$$.dirty&132&&u&&setTimeout(()=>t(2,u=!1),S),i.$$.dirty&124&&G.set(u?{scale:m,angle:h,dx:b,dy:_}:F)},[r,G,u,h,m,b,_,S,T,P,n,o]}var Vy=class extends pt{constructor(e){super(),yt(this,e,mP,fP,ut,{wiggle:2,angle:3,scale:4,dx:5,dy:6,duration:7,stiffness:8,damping:9})}},jy=Vy;function gP(i){let e,t,r=[i[0],{fill:"currentColor"},{viewBox:"0 0 16 16"}],o={};for(let n=0;n<r.length;n+=1)o=Vr(o,r[n]);return{c(){e=bi("svg"),t=bi("path"),J(t,"d","M3.646 9.146a.5.5 0 0 1 .708 0L8 12.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zm0-2.292a.5.5 0 0 0 .708 0L8 3.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708z"),xa(e,o)},m(n,u){Ne(n,e,u),qe(e,t)},p(n,[u]){xa(e,o=ka(r,[u&1&&n[0],{fill:"currentColor"},{viewBox:"0 0 16 16"}]))},i:gt,o:gt,d(n){n&&ze(e)}}}function yP(i,e,t){return i.$$set=r=>{t(0,e=Vr(Vr({},e),zn(r)))},e=zn(e),[e]}var Hy=class extends pt{constructor(e){super(),yt(this,e,yP,gP,ut,{})}},qy=Hy;function bP(i){let e,t,r=[i[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}],o={};for(let n=0;n<r.length;n+=1)o=Vr(o,r[n]);return{c(){e=bi("svg"),t=bi("path"),J(t,"d","M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59L7.11 5.7A.996.996 0 1 0 5.7 7.11L10.59 12L5.7 16.89a.996.996 0 1 0 1.41 1.41L12 13.41l4.89 4.89a.996.996 0 1 0 1.41-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"),xa(e,o)},m(n,u){Ne(n,e,u),qe(e,t)},p(n,[u]){xa(e,o=ka(r,[u&1&&n[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}]))},i:gt,o:gt,d(n){n&&ze(e)}}}function vP(i,e,t){return i.$$set=r=>{t(0,e=Vr(Vr({},e),zn(r)))},e=zn(e),[e]}var $y=class extends pt{constructor(e){super(),yt(this,e,vP,bP,ut,{})}},Cm=$y;function _P(i){let e,t,r=[i[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}],o={};for(let n=0;n<r.length;n+=1)o=Vr(o,r[n]);return{c(){e=bi("svg"),t=bi("path"),J(t,"d","M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2S2 6.477 2 12s4.477 10 10 10Zm-4.906-3.68L18.32 7.094A8 8 0 0 1 7.094 18.32ZM5.68 16.906A8 8 0 0 1 16.906 5.68L5.68 16.906Z"),xa(e,o)},m(n,u){Ne(n,e,u),qe(e,t)},p(n,[u]){xa(e,o=ka(r,[u&1&&n[0],{viewBox:"0 0 24 24"},{fill:"currentColor"}]))},i:gt,o:gt,d(n){n&&ze(e)}}}function xP(i,e,t){return i.$$set=r=>{t(0,e=Vr(Vr({},e),zn(r)))},e=zn(e),[e]}var Qy=class extends pt{constructor(e){super(),yt(this,e,xP,_P,ut,{})}},Gy=Qy;var ao=i=>i instanceof Object?(i.label===void 0&&console.error(`MultiSelect option ${JSON.stringify(i)} is an object but has no label key`),i.label):`${i}`;function Ip(i,e=null){if(!i?.style)return null;if(!["selected","option",null].includes(e)){console.error(`MultiSelect: Invalid key=${e} for get_style`);return}if(typeof i=="object"&&i.style){if(typeof i.style=="string")return i.style;if(typeof i.style=="object"){if(e&&e in i.style)return i.style[e];console.error(`Invalid style object for option=${JSON.stringify(i)}`)}}}var{Boolean:wP}=Ac,kP=i=>({searchText:i[0]&8,msgType:i[0]&1073810458,msg:i[0]&1073843226}),f9=i=>({searchText:i[3],msgType:i[116],msg:i[117]});function Wy(i){let e=i.slice(),t={dupe:e[15],create:e[10],"no-match":e[30]}[e[116]];return e[117]=t,e}function Zy(i){let e=i.slice(),t=e[4].map(ao).includes(e[3]);e[112]=t;let r=!e[16]&&e[112]&&"dupe";e[113]=r;let o=!!(e[11]&&e[10])&&"create";e[114]=o;let n=!!(e[1]?.length==0&&e[30])&&"no-match";e[115]=n;let u=e[113]||e[114]||e[115];return e[116]=u,e}function m9(i,e,t){let r=i.slice();r[118]=e[t],r[125]=t;let o=r[118]instanceof Object?r[118]:{label:r[118]};r[119]=o.label,r[42]=o.disabled!==void 0?o.disabled:null,r[120]=o.title!==void 0?o.title:null,r[121]=o.selectedTitle!==void 0?o.selectedTitle:null,r[122]=o.disabledTitle!==void 0?o.disabledTitle:r[13];let n=r[0]===r[125];return r[123]=n,r}var SP=i=>({option:i[0]&33554434}),g9=i=>({option:i[118],idx:i[125]}),CP=i=>({option:i[0]&33554434}),y9=i=>({option:i[118],idx:i[125]}),EP=i=>({}),b9=i=>({}),TP=i=>({}),v9=i=>({}),MP=i=>({}),_9=i=>({}),AP=i=>({selected:i[0]&16,disabled:i[1]&2048,invalid:i[0]&128,id:i[0]&262144,placeholder:i[1]&8,open:i[0]&256,required:i[1]&128}),x9=i=>({selected:i[4],disabled:i[42],invalid:i[7],id:i[18],placeholder:i[34],open:i[8],required:i[38]});function w9(i,e,t){let r=i.slice();return r[118]=e[t],r[125]=t,r}var IP=i=>({}),k9=i=>({}),PP=i=>({option:i[0]&16,idx:i[0]&16}),S9=i=>({option:i[118],idx:i[125]}),DP=i=>({option:i[0]&16,idx:i[0]&16}),C9=i=>({option:i[118],idx:i[125]}),LP=i=>({open:i[0]&256}),E9=i=>({open:i[8]});function FP(i){let e,t;return e=new qy({props:{width:"15px",style:"min-width: 1em; padding: 0 1pt; cursor: pointer;"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function zP(i){let e=ao(i[118])+"",t;return{c(){t=nr(e)},m(r,o){Ne(r,t,o)},p(r,o){o[0]&16&&e!==(e=ao(r[118])+"")&&mn(t,e)},d(r){r&&ze(t)}}}function NP(i){let e,t=ao(i[118])+"",r;return{c(){e=new Zh(!1),r=Zi(),e.a=r},m(o,n){e.m(t,o,n),Ne(o,r,n)},p(o,n){n[0]&16&&t!==(t=ao(o[118])+"")&&e.p(t)},d(o){o&&(ze(r),e.d())}}}function OP(i){let e;function t(n,u){return n[32]?NP:zP}let r=t(i,[-1,-1,-1,-1,-1]),o=r(i);return{c(){o.c(),e=Zi()},m(n,u){o.m(n,u),Ne(n,e,u)},p(n,u){r===(r=t(n,u))&&o?o.p(n,u):(o.d(1),o=r(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){n&&ze(e),o.d(n)}}}function BP(i){let e,t=i[69].default,r=Si(t,i,i[107],S9),o=r||OP(i);return{c(){o&&o.c()},m(n,u){o&&o.m(n,u),e=!0},p(n,u){r?r.p&&(!e||u[0]&16|u[3]&16384)&&Ei(r,t,n,n[107],e?Ci(t,n[107],u,PP):Ti(n[107]),S9):o&&o.p&&(!e||u[0]&16|u[1]&2)&&o.p(n,e?u:[-1,-1,-1,-1,-1])},i(n){e||(Pe(o,n),e=!0)},o(n){Be(o,n),e=!1},d(n){o&&o.d(n)}}}function T9(i){let e,t,r,o,n,u=i[69]["remove-icon"],h=Si(u,i,i[107],k9),m=h||RP(i);function b(){return i[89](i[118])}function _(){return i[90](i[118])}return{c(){e=Ke("button"),m&&m.c(),J(e,"type","button"),J(e,"title",t=i[36]+" "+ao(i[118])),J(e,"class","remove svelte-1r2hsto")},m(S,T){Ne(S,e,T),m&&m.m(e,null),r=!0,o||(n=[It(e,"mouseup",Fs(b)),It(e,"keydown",function(){zo(i[54](_))&&i[54](_).apply(this,arguments)})],o=!0)},p(S,T){i=S,h&&h.p&&(!r||T[3]&16384)&&Ei(h,u,i,i[107],r?Ci(u,i[107],T,IP):Ti(i[107]),k9),(!r||T[0]&16|T[1]&32&&t!==(t=i[36]+" "+ao(i[118])))&&J(e,"title",t)},i(S){r||(Pe(m,S),r=!0)},o(S){Be(m,S),r=!1},d(S){S&&ze(e),m&&m.d(S),o=!1,kr(n)}}}function RP(i){let e,t;return e=new Cm({props:{width:"15px"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function M9(i,e){let t,r,o,n,u,h,m=gt,b,_,S,T=e[69].selected,P=Si(T,e,e[107],C9),F=P||BP(e),G=!e[42]&&(e[37]===null||e[4].length>e[37])&&T9(e);function $(){return e[91](e[125])}return{key:i,first:null,c(){t=Ke("li"),F&&F.c(),r=Ot(),G&&G.c(),J(t,"class",o=Ka(e[23])+" svelte-1r2hsto"),J(t,"role","option"),J(t,"aria-selected","true"),J(t,"draggable",n=e[39]&&!e[42]&&e[4].length>1),J(t,"style",u=Ip(e[118],"selected")),ar(t,"active",e[46]===e[125]),this.first=t},m(ee,ue){Ne(ee,t,ue),F&&F.m(t,null),qe(t,r),G&&G.m(t,null),b=!0,_||(S=[It(t,"dragstart",function(){zo(e[57](e[125]))&&e[57](e[125]).apply(this,arguments)}),It(t,"drop",sg(function(){zo(e[56](e[125]))&&e[56](e[125]).apply(this,arguments)})),It(t,"dragenter",$),It(t,"dragover",sg(e[85]))],_=!0)},p(ee,ue){e=ee,P?P.p&&(!b||ue[0]&16|ue[3]&16384)&&Ei(P,T,e,e[107],b?Ci(T,e[107],ue,DP):Ti(e[107]),C9):F&&F.p&&(!b||ue[0]&16|ue[1]&2|ue[3]&16384)&&F.p(e,b?ue:[-1,-1,-1,-1,-1]),!e[42]&&(e[37]===null||e[4].length>e[37])?G?(G.p(e,ue),ue[0]&16|ue[1]&2112&&Pe(G,1)):(G=T9(e),G.c(),Pe(G,1),G.m(t,null)):G&&(Hi(),Be(G,1,1,()=>{G=null}),qi()),(!b||ue[0]&8388608&&o!==(o=Ka(e[23])+" svelte-1r2hsto"))&&J(t,"class",o),(!b||ue[0]&16|ue[1]&2304&&n!==(n=e[39]&&!e[42]&&e[4].length>1))&&J(t,"draggable",n),(!b||ue[0]&16&&u!==(u=Ip(e[118],"selected")))&&J(t,"style",u),(!b||ue[0]&8388624|ue[1]&32768)&&ar(t,"active",e[46]===e[125])},r(){h=t.getBoundingClientRect()},f(){a5(t),m()},a(){m(),m=s5(t,h,h9,{duration:100})},i(ee){b||(Pe(F,ee),Pe(G),b=!0)},o(ee){Be(F,ee),Be(G),b=!1},d(ee){ee&&ze(t),F&&F.d(ee),G&&G.d(),_=!1,kr(S)}}}function A9(i){let e,t=i[69].spinner,r=Si(t,i,i[107],_9),o=r||UP(i);return{c(){o&&o.c()},m(n,u){o&&o.m(n,u),e=!0},p(n,u){r&&r.p&&(!e||u[3]&16384)&&Ei(r,t,n,n[107],e?Ci(t,n[107],u,MP):Ti(n[107]),_9)},i(n){e||(Pe(o,n),e=!0)},o(n){Be(o,n),e=!1},d(n){o&&o.d(n)}}}function UP(i){let e,t;return e=new By({}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function VP(i){let e,t,r,o=i[26]&&(i[26]>1||i[27])&&I9(i),n=i[26]!==1&&i[4].length>1&&P9(i);return{c(){o&&o.c(),e=Ot(),n&&n.c(),t=Zi()},m(u,h){o&&o.m(u,h),Ne(u,e,h),n&&n.m(u,h),Ne(u,t,h),r=!0},p(u,h){u[26]&&(u[26]>1||u[27])?o?(o.p(u,h),h[0]&201326592&&Pe(o,1)):(o=I9(u),o.c(),Pe(o,1),o.m(e.parentNode,e)):o&&(Hi(),Be(o,1,1,()=>{o=null}),qi()),u[26]!==1&&u[4].length>1?n?(n.p(u,h),h[0]&67108880&&Pe(n,1)):(n=P9(u),n.c(),Pe(n,1),n.m(t.parentNode,t)):n&&(Hi(),Be(n,1,1,()=>{n=null}),qi())},i(u){r||(Pe(o),Pe(n),r=!0)},o(u){Be(o),Be(n),r=!1},d(u){u&&(ze(e),ze(t)),o&&o.d(u),n&&n.d(u)}}}function jP(i){let e,t=i[69]["disabled-icon"],r=Si(t,i,i[107],v9),o=r||$P(i);return{c(){o&&o.c()},m(n,u){o&&o.m(n,u),e=!0},p(n,u){r&&r.p&&(!e||u[3]&16384)&&Ei(r,t,n,n[107],e?Ci(t,n[107],u,TP):Ti(n[107]),v9)},i(n){e||(Pe(o,n),e=!0)},o(n){Be(o,n),e=!1},d(n){o&&o.d(n)}}}function I9(i){let e,t,r;function o(u){i[94](u)}let n={angle:20,$$slots:{default:[HP]},$$scope:{ctx:i}};return i[43]!==void 0&&(n.wiggle=i[43]),e=new jy({props:n}),Ri.push(()=>Wr(e,"wiggle",o)),{c(){qt(e.$$.fragment)},m(u,h){Ut(e,u,h),r=!0},p(u,h){let m={};h[0]&469762064|h[3]&16384&&(m.$$scope={dirty:h,ctx:u}),!t&&h[1]&4096&&(t=!0,m.wiggle=u[43],Gr(()=>t=!1)),e.$set(m)},i(u){r||(Pe(e.$$.fragment,u),r=!0)},o(u){Be(e.$$.fragment,u),r=!1},d(u){Vt(e,u)}}}function HP(i){let e,t=i[27]?.(i[4].length,i[26])+"",r,o;return{c(){e=Ke("span"),r=nr(t),J(e,"class",o="max-select-msg "+i[28]+" svelte-1r2hsto")},m(n,u){Ne(n,e,u),qe(e,r)},p(n,u){u[0]&201326608&&t!==(t=n[27]?.(n[4].length,n[26])+"")&&mn(r,t),u[0]&268435456&&o!==(o="max-select-msg "+n[28]+" svelte-1r2hsto")&&J(e,"class",o)},d(n){n&&ze(e)}}}function P9(i){let e,t,r,o,n=i[69]["remove-icon"],u=Si(n,i,i[107],b9),h=u||qP(i);return{c(){e=Ke("button"),h&&h.c(),J(e,"type","button"),J(e,"class","remove remove-all svelte-1r2hsto"),J(e,"title",i[35])},m(m,b){Ne(m,e,b),h&&h.m(e,null),t=!0,r||(o=[It(e,"mouseup",Fs(i[53])),It(e,"keydown",i[54](i[53]))],r=!0)},p(m,b){u&&u.p&&(!t||b[3]&16384)&&Ei(u,n,m,m[107],t?Ci(n,m[107],b,EP):Ti(m[107]),b9),(!t||b[1]&16)&&J(e,"title",m[35])},i(m){t||(Pe(h,m),t=!0)},o(m){Be(h,m),t=!1},d(m){m&&ze(e),h&&h.d(m),r=!1,kr(o)}}}function qP(i){let e,t;return e=new Cm({props:{width:"15px"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function $P(i){let e,t;return e=new Gy({props:{width:"14pt",style:"margin: 0 2pt;","data-name":"disabled-icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function D9(i){let e,t,r,o,n,u,h=On(i[1].slice(0,Math.max(0,i[25]??0)||1/0)),m=[];for(let S=0;S<h.length;S+=1)m[S]=L9(m9(i,h,S));let b=S=>Be(m[S],1,1,()=>{m[S]=null}),_=i[3]&&F9(Zy(i));return{c(){e=Ke("ul");for(let S=0;S<m.length;S+=1)m[S].c();t=Ot(),_&&_.c(),J(e,"class",r="options "+i[40]+" svelte-1r2hsto"),J(e,"role","listbox"),J(e,"aria-multiselectable",o=i[26]===null||i[26]>1),J(e,"aria-expanded",i[8]),J(e,"aria-disabled",n=i[42]?"true":null),ar(e,"hidden",!i[8])},m(S,T){Ne(S,e,T);for(let P=0;P<m.length;P+=1)m[P]&&m[P].m(e,null);qe(e,t),_&&_.m(e,null),i[105](e),u=!0},p(S,T){if(T[0]&39845891|T[1]&393218|T[3]&16384){h=On(S[1].slice(0,Math.max(0,S[25]??0)||1/0));let P;for(P=0;P<h.length;P+=1){let F=m9(S,h,P);m[P]?(m[P].p(F,T),Pe(m[P],1)):(m[P]=L9(F),m[P].c(),Pe(m[P],1),m[P].m(e,t))}for(Hi(),P=h.length;P<m.length;P+=1)b(P);qi()}S[3]?_?(_.p(Zy(S),T),T[0]&8&&Pe(_,1)):(_=F9(Zy(S)),_.c(),Pe(_,1),_.m(e,null)):_&&(Hi(),Be(_,1,1,()=>{_=null}),qi()),(!u||T[1]&512&&r!==(r="options "+S[40]+" svelte-1r2hsto"))&&J(e,"class",r),(!u||T[0]&67108864&&o!==(o=S[26]===null||S[26]>1))&&J(e,"aria-multiselectable",o),(!u||T[0]&256)&&J(e,"aria-expanded",S[8]),(!u||T[1]&2048&&n!==(n=S[42]?"true":null))&&J(e,"aria-disabled",n),(!u||T[0]&256|T[1]&512)&&ar(e,"hidden",!S[8])},i(S){if(!u){for(let T=0;T<h.length;T+=1)Pe(m[T]);Pe(_),u=!0}},o(S){m=m.filter(wP);for(let T=0;T<m.length;T+=1)Be(m[T]);Be(_),u=!1},d(S){S&&ze(e),Zl(m,S),_&&_.d(),i[105](null)}}}function QP(i){let e=ao(i[118])+"",t;return{c(){t=nr(e)},m(r,o){Ne(r,t,o)},p(r,o){o[0]&33554434&&e!==(e=ao(r[118])+"")&&mn(t,e)},d(r){r&&ze(t)}}}function GP(i){let e,t=ao(i[118])+"",r;return{c(){e=new Zh(!1),r=Zi(),e.a=r},m(o,n){e.m(t,o,n),Ne(o,r,n)},p(o,n){n[0]&33554434&&t!==(t=ao(o[118])+"")&&e.p(t)},d(o){o&&(ze(r),e.d())}}}function WP(i){let e;function t(n,u){return n[32]?GP:QP}let r=t(i,[-1,-1,-1,-1,-1]),o=r(i);return{c(){o.c(),e=Zi()},m(n,u){o.m(n,u),Ne(n,e,u)},p(n,u){r===(r=t(n,u))&&o?o.p(n,u):(o.d(1),o=r(n),o&&(o.c(),o.m(e.parentNode,e)))},d(n){n&&ze(e),o.d(n)}}}function ZP(i){let e,t=i[69].default,r=Si(t,i,i[107],g9),o=r||WP(i);return{c(){o&&o.c()},m(n,u){o&&o.m(n,u),e=!0},p(n,u){r?r.p&&(!e||u[0]&33554434|u[3]&16384)&&Ei(r,t,n,n[107],e?Ci(t,n[107],u,SP):Ti(n[107]),g9):o&&o.p&&(!e||u[0]&33554434|u[1]&2)&&o.p(n,e?u:[-1,-1,-1,-1,-1])},i(n){e||(Pe(o,n),e=!0)},o(n){Be(o,n),e=!1},d(n){o&&o.d(n)}}}function L9(i){let e,t,r,o,n,u,h,m=i[69].option,b=Si(m,i,i[107],y9),_=b||ZP(i);function S(...F){return i[95](i[42],i[118],...F)}function T(){return i[96](i[42],i[125])}function P(){return i[97](i[42],i[125])}return{c(){e=Ke("li"),_&&_.c(),J(e,"title",t=i[42]?i[122]:i[48](i[119])&&i[121]||i[120]),J(e,"class",r=i[22]+" "+(i[123]?i[21]:"")+" svelte-1r2hsto"),J(e,"role","option"),J(e,"aria-selected","false"),J(e,"style",o=Ip(i[118],"option")),ar(e,"selected",i[48](i[119])),ar(e,"active",i[123]),ar(e,"disabled",i[42])},m(F,G){Ne(F,e,G),_&&_.m(e,null),n=!0,u||(h=[It(e,"mousedown",Fs(i[71])),It(e,"mouseup",Fs(S)),It(e,"mouseover",T),It(e,"focus",P),It(e,"mouseout",i[98]),It(e,"blur",i[99])],u=!0)},p(F,G){i=F,b?b.p&&(!n||G[0]&33554434|G[3]&16384)&&Ei(b,m,i,i[107],n?Ci(m,i[107],G,CP):Ti(i[107]),y9):_&&_.p&&(!n||G[0]&33554434|G[1]&2|G[3]&16384)&&_.p(i,n?G:[-1,-1,-1,-1,-1]),(!n||G[0]&33554434|G[1]&131072&&t!==(t=i[42]?i[122]:i[48](i[119])&&i[121]||i[120]))&&J(e,"title",t),(!n||G[0]&6291457&&r!==(r=i[22]+" "+(i[123]?i[21]:"")+" svelte-1r2hsto"))&&J(e,"class",r),(!n||G[0]&33554434&&o!==(o=Ip(i[118],"option")))&&J(e,"style",o),(!n||G[0]&39845891|G[1]&131072)&&ar(e,"selected",i[48](i[119])),(!n||G[0]&6291457)&&ar(e,"active",i[123]),(!n||G[0]&39845891)&&ar(e,"disabled",i[42])},i(F){n||(Pe(_,F),n=!0)},o(F){Be(_,F),n=!1},d(F){F&&ze(e),_&&_.d(F),u=!1,kr(h)}}}function F9(i){let e,t,r=i[116]&&z9(Wy(i));return{c(){r&&r.c(),e=Zi()},m(o,n){r&&r.m(o,n),Ne(o,e,n),t=!0},p(o,n){o[116]?r?(r.p(Wy(o),n),n[0]&1073810458&&Pe(r,1)):(r=z9(Wy(o)),r.c(),Pe(r,1),r.m(e.parentNode,e)):r&&(Hi(),Be(r,1,1,()=>{r=null}),qi())},i(o){t||(Pe(r),t=!0)},o(o){Be(r),t=!1},d(o){o&&ze(e),r&&r.d(o)}}}function z9(i){let e,t,r,o,n=i[69]["user-msg"],u=Si(n,i,i[107],f9),h=u||KP(i);return{c(){e=Ke("li"),h&&h.c(),J(e,"title",i[10]),J(e,"role","option"),J(e,"aria-selected","false"),J(e,"class","user-msg svelte-1r2hsto"),ar(e,"active",i[44]),Nn(e,"cursor",{dupe:"not-allowed",create:"pointer","no-match":"default"}[i[116]])},m(m,b){Ne(m,e,b),h&&h.m(e,null),t=!0,r||(o=[It(e,"mousedown",Fs(i[70])),It(e,"mouseup",Fs(i[100])),It(e,"mouseover",i[101]),It(e,"focus",i[102]),It(e,"mouseout",i[103]),It(e,"blur",i[104])],r=!0)},p(m,b){u?u.p&&(!t||b[0]&1073843226|b[3]&16384)&&Ei(u,n,m,m[107],t?Ci(n,m[107],b,kP):Ti(m[107]),f9):h&&h.p&&(!t||b[0]&1073843226)&&h.p(m,t?b:[-1,-1,-1,-1,-1]),(!t||b[0]&1024)&&J(e,"title",m[10]),(!t||b[1]&8192)&&ar(e,"active",m[44]),b[0]&1073810458&&Nn(e,"cursor",{dupe:"not-allowed",create:"pointer","no-match":"default"}[m[116]])},i(m){t||(Pe(h,m),t=!0)},o(m){Be(h,m),t=!1},d(m){m&&ze(e),h&&h.d(m),r=!1,kr(o)}}}function KP(i){let e=i[117]+"",t;return{c(){t=nr(e)},m(r,o){Ne(r,t,o)},p(r,o){o[0]&1073843226&&e!==(e=r[117]+"")&&mn(t,e)},d(r){r&&ze(t)}}}function JP(i){let e,t,r,o,n,u,h,m=[],b=new Map,_,S,T,P,F,G,$,ee,ue,fe,Y,je,Ce,xe,Le,we,st;wa(i[86]);let He=i[69]["expand-icon"],zt=Si(He,i,i[107],E9),rt=zt||FP(i),jt=On(i[4]),$t=tt=>tt[16]?[tt[17](tt[118]),tt[125]]:tt[17](tt[118]);for(let tt=0;tt<jt.length;tt+=1){let Fe=w9(i,jt,tt),Kt=$t(Fe);b.set(Kt,m[tt]=M9(Kt,Fe))}let dt=i[69]["after-input"],vt=Si(dt,i,i[107],x9),bt=i[24]&&A9(i),Qt=[jP,VP],Yt=[];function ki(tt,Fe){return tt[42]?0:tt[4].length>0?1:-1}~(fe=ki(i,[-1,-1,-1,-1,-1]))&&(Y=Yt[fe]=Qt[fe](i));let oi=(i[3]&&i[30]||i[2]?.length>0)&&D9(i);return{c(){e=Ke("div"),t=Ke("input"),n=Ot(),rt&&rt.c(),u=Ot(),h=Ke("ul");for(let tt=0;tt<m.length;tt+=1)m[tt].c();_=Ot(),S=Ke("input"),G=Ot(),vt&&vt.c(),ee=Ot(),bt&&bt.c(),ue=Ot(),Y&&Y.c(),je=Ot(),oi&&oi.c(),J(t,"name",i[29]),t.required=r=!!i[38],t.value=o=i[4].length>=Number(i[38])?JSON.stringify(i[4]):null,J(t,"tabindex","-1"),J(t,"aria-hidden","true"),J(t,"aria-label","ignore this, used only to prevent form submission if select is required but empty"),J(t,"class","form-control svelte-1r2hsto"),J(S,"class",T=Ka(i[19])+" svelte-1r2hsto"),J(S,"id",i[18]),S.disabled=i[42],J(S,"autocomplete",i[12]),J(S,"inputmode",i[20]),J(S,"pattern",i[33]),J(S,"placeholder",P=i[4].length==0?i[34]:null),J(S,"aria-invalid",F=i[7]?"true":null),J(S,"ondrop","return false"),J(h,"class",$="selected "+i[41]+" svelte-1r2hsto"),J(h,"aria-label","selected options"),J(e,"class",Ce="multiselect "+i[31]+" svelte-1r2hsto"),J(e,"title",xe=i[42]?i[14]:null),J(e,"data-id",i[18]),J(e,"role","searchbox"),J(e,"tabindex","-1"),ar(e,"disabled",i[42]),ar(e,"single",i[26]===1),ar(e,"open",i[8]),ar(e,"invalid",i[7])},m(tt,Fe){Ne(tt,e,Fe),qe(e,t),i[87](t),qe(e,n),rt&&rt.m(e,null),qe(e,u),qe(e,h);for(let Kt=0;Kt<m.length;Kt+=1)m[Kt]&&m[Kt].m(h,null);qe(h,_),qe(h,S),i[92](S),zs(S,i[3]),qe(h,G),vt&&vt.m(h,null),qe(e,ee),bt&&bt.m(e,null),qe(e,ue),~fe&&Yt[fe].m(e,null),qe(e,je),oi&&oi.m(e,null),i[106](e),Le=!0,we||(st=[It(window,"click",i[55]),It(window,"touchstart",i[55]),It(window,"resize",i[86]),It(t,"invalid",i[88]),It(S,"input",i[93]),It(S,"mouseup",t5(Fs(i[51]))),It(S,"keydown",Fs(i[52])),It(S,"focus",i[72]),It(S,"focus",i[51]),It(S,"input",i[58]),It(S,"blur",i[73]),It(S,"change",i[74]),It(S,"click",i[75]),It(S,"keydown",i[76]),It(S,"keyup",i[77]),It(S,"mousedown",i[78]),It(S,"mouseenter",i[79]),It(S,"mouseleave",i[80]),It(S,"touchcancel",i[81]),It(S,"touchend",i[82]),It(S,"touchmove",i[83]),It(S,"touchstart",i[84]),It(e,"mouseup",Fs(i[51]))],we=!0)},p(tt,Fe){if((!Le||Fe[0]&536870912)&&J(t,"name",tt[29]),(!Le||Fe[1]&128&&r!==(r=!!tt[38]))&&(t.required=r),(!Le||Fe[0]&16|Fe[1]&128&&o!==(o=tt[4].length>=Number(tt[38])?JSON.stringify(tt[4]):null)&&t.value!==o)&&(t.value=o),zt&&zt.p&&(!Le||Fe[0]&256|Fe[3]&16384)&&Ei(zt,He,tt,tt[107],Le?Ci(He,tt[107],Fe,LP):Ti(tt[107]),E9),Fe[0]&8585232|Fe[1]&109611362|Fe[3]&16384){jt=On(tt[4]),Hi();for(let ti=0;ti<m.length;ti+=1)m[ti].r();m=Kh(m,Fe,$t,1,tt,jt,b,h,h5,M9,_,w9);for(let ti=0;ti<m.length;ti+=1)m[ti].a();qi()}(!Le||Fe[0]&524288&&T!==(T=Ka(tt[19])+" svelte-1r2hsto"))&&J(S,"class",T),(!Le||Fe[0]&262144)&&J(S,"id",tt[18]),(!Le||Fe[1]&2048)&&(S.disabled=tt[42]),(!Le||Fe[0]&4096)&&J(S,"autocomplete",tt[12]),(!Le||Fe[0]&1048576)&&J(S,"inputmode",tt[20]),(!Le||Fe[1]&4)&&J(S,"pattern",tt[33]),(!Le||Fe[0]&16|Fe[1]&8&&P!==(P=tt[4].length==0?tt[34]:null))&&J(S,"placeholder",P),(!Le||Fe[0]&128&&F!==(F=tt[7]?"true":null))&&J(S,"aria-invalid",F),Fe[0]&8&&S.value!==tt[3]&&zs(S,tt[3]),vt&&vt.p&&(!Le||Fe[0]&262544|Fe[1]&2184|Fe[3]&16384)&&Ei(vt,dt,tt,tt[107],Le?Ci(dt,tt[107],Fe,AP):Ti(tt[107]),x9),(!Le||Fe[1]&1024&&$!==($="selected "+tt[41]+" svelte-1r2hsto"))&&J(h,"class",$),tt[24]?bt?(bt.p(tt,Fe),Fe[0]&16777216&&Pe(bt,1)):(bt=A9(tt),bt.c(),Pe(bt,1),bt.m(e,ue)):bt&&(Hi(),Be(bt,1,1,()=>{bt=null}),qi());let Kt=fe;fe=ki(tt,Fe),fe===Kt?~fe&&Yt[fe].p(tt,Fe):(Y&&(Hi(),Be(Yt[Kt],1,1,()=>{Yt[Kt]=null}),qi()),~fe?(Y=Yt[fe],Y?Y.p(tt,Fe):(Y=Yt[fe]=Qt[fe](tt),Y.c()),Pe(Y,1),Y.m(e,je)):Y=null),tt[3]&&tt[30]||tt[2]?.length>0?oi?(oi.p(tt,Fe),Fe[0]&1073741836&&Pe(oi,1)):(oi=D9(tt),oi.c(),Pe(oi,1),oi.m(e,null)):oi&&(Hi(),Be(oi,1,1,()=>{oi=null}),qi()),(!Le||Fe[1]&1&&Ce!==(Ce="multiselect "+tt[31]+" svelte-1r2hsto"))&&J(e,"class",Ce),(!Le||Fe[0]&16384|Fe[1]&2048&&xe!==(xe=tt[42]?tt[14]:null))&&J(e,"title",xe),(!Le||Fe[0]&262144)&&J(e,"data-id",tt[18]),(!Le||Fe[1]&2049)&&ar(e,"disabled",tt[42]),(!Le||Fe[0]&67108864|Fe[1]&1)&&ar(e,"single",tt[26]===1),(!Le||Fe[0]&256|Fe[1]&1)&&ar(e,"open",tt[8]),(!Le||Fe[0]&128|Fe[1]&1)&&ar(e,"invalid",tt[7])},i(tt){if(!Le){Pe(rt,tt);for(let Fe=0;Fe<jt.length;Fe+=1)Pe(m[Fe]);Pe(vt,tt),Pe(bt),Pe(Y),Pe(oi),Le=!0}},o(tt){Be(rt,tt);for(let Fe=0;Fe<m.length;Fe+=1)Be(m[Fe]);Be(vt,tt),Be(bt),Be(Y),Be(oi),Le=!1},d(tt){tt&&ze(e),i[87](null),rt&&rt.d(tt);for(let Fe=0;Fe<m.length;Fe+=1)m[Fe].d();i[92](null),vt&&vt.d(tt),bt&&bt.d(),~fe&&Yt[fe].d(),oi&&oi.d(),i[106](null),we=!1,kr(st)}}}function XP(i,e,t){let r,{$$slots:o={},$$scope:n}=e,{activeIndex:u=null}=e,{activeOption:h=null}=e,{createOptionMsg:m="Create this option..."}=e,{allowUserOptions:b=!1}=e,{allowEmpty:_=!1}=e,{autocomplete:S="off"}=e,{autoScroll:T=!0}=e,{breakpoint:P=800}=e,{defaultDisabledTitle:F="This option is disabled"}=e,{disabled:G=!1}=e,{disabledInputTitle:$="This input is disabled"}=e,{duplicateOptionMsg:ee="This option is already selected"}=e,{duplicates:ue=!1}=e,{key:fe=de=>`${ao(de)}`.toLowerCase()}=e,{filterFunc:Y=(de,ci)=>ci?`${ao(de)}`.toLowerCase().includes(ci.toLowerCase()):!0}=e,{closeDropdownOnSelect:je="desktop"}=e,{form_input:Ce=null}=e,{highlightMatches:xe=!0}=e,{id:Le=null}=e,{input:we=null}=e,{inputClass:st=""}=e,{inputmode:He=null}=e,{invalid:zt=!1}=e,{liActiveOptionClass:rt=""}=e,{liOptionClass:jt=""}=e,{liSelectedClass:$t=""}=e,{loading:dt=!1}=e,{matchingOptions:vt=[]}=e,{maxOptions:bt=void 0}=e,{maxSelect:Qt=null}=e,{maxSelectMsg:Yt=(de,ci)=>ci>1?`${de}/${ci}`:""}=e,{maxSelectMsgClass:ki=""}=e,{name:oi=null}=e,{noMatchingOptionsMsg:tt="No matching options"}=e,{open:Fe=!1}=e,{options:Kt}=e,{outerDiv:ti=null}=e,{outerDivClass:Xi=""}=e,{parseLabelsAsHtml:nt=!1}=e,{pattern:Wt=null}=e,{placeholder:yi=null}=e,{removeAllTitle:Rt="Remove all"}=e,{removeBtnTitle:vi="Remove"}=e,{minSelect:lt=null}=e,{required:_i=!1}=e,{resetFilterOnAdd:Ue=!0}=e,{searchText:fi=""}=e,{selected:xi=Kt?.filter(de=>de instanceof Object&&de?.preselected).slice(0,Qt??void 0)??[]}=e,{sortSelected:hi=!1}=e,{selectedOptionsDraggable:fr=!hi}=e,{ulOptionsClass:Mr=""}=e,{ulSelectedClass:en=""}=e,{value:tn=null}=e,bn=de=>{t(59,tn=Qt===1?de[0]??null:de)},Vn=de=>{Qt===1?t(4,xi=de?[de]:[]):t(4,xi=de??[])},In=!1;Kt?.length>0||(b||dt||G||_?Kt=[]:console.error("MultiSelect received no options")),Qt!==null&&Qt<1&&console.error(`MultiSelect's maxSelect must be null or positive integer, got ${Qt}`),Array.isArray(xi)||console.error(`MultiSelect's selected prop should always be an array, got ${xi}`),Qt&&typeof _i=="number"&&_i>Qt&&console.error(`MultiSelect maxSelect=${Qt} < required=${_i}, makes it impossible for users to submit a valid form`),nt&&b&&console.warn("Don't combine parseLabelsAsHtml and allowUserOptions. It's susceptible to XSS attacks!"),hi&&fr&&console.warn("MultiSelect's sortSelected and selectedOptionsDraggable should not be combined as any user re-orderings of selected options will be undone by sortSelected on component re-renders."),b&&!m&&m!==null&&console.error(`MultiSelect has allowUserOptions=${b} but createOptionMsg=${m} is falsy. This prevents the "Add option" <span> from showing up, resulting in a confusing user experience.`),bt&&(typeof bt!="number"||bt<0||bt%1!=0)&&console.error(`MultiSelect's maxOptions must be undefined or a positive integer, got ${bt}`);let Zr=yo(),ct=!1,Lr;if(u!==null&&!vt[u])throw`Run time error, activeIndex=${u} is out of bounds, matchingOptions.length=${vt.length}`;function Fr(de,ci){Qt&&Qt>1&&xi.length>=Qt&&t(43,In=!0),!isNaN(Number(de))&&typeof xi.map(ao)[0]=="number"&&(de=Number(de));let mr=xi.map(fe).includes(fe(de));if((Qt===null||Qt===1||xi.length<Qt)&&(ue||!mr)){if(!Kt.includes(de)&&[!0,"append"].includes(b)&&fi.length>0&&(typeof Kt[0]=="object"?de={label:fi}:(["number","undefined"].includes(typeof Kt[0])&&!isNaN(Number(fi))?de=Number(fi):de=fi,Zr("create",{option:de})),b==="append"&&t(2,Kt=[...Kt,de])),Ue&&t(3,fi=""),["",void 0,null].includes(de)){console.error(`MultiSelect: encountered falsy option ${de}`);return}Qt===1?t(4,xi=[de]):(t(4,xi=[...xi,de]),hi===!0?t(4,xi=xi.sort((Ho,on)=>{let[cs,Hn]=[ao(Ho),ao(on)];return`${cs}`.localeCompare(`${Hn}`)})):typeof hi=="function"&&t(4,xi=xi.sort(hi)));let zr=xi.length===Qt,ur=je===!0||je==="desktop"&&Lr<P;zr||ur?ft(ci):ur||we?.focus(),Zr("add",{option:de}),Zr("change",{option:de,type:"add"}),t(7,zt=!1),Ce?.setCustomValidity("")}}function Kn(de){if(xi.length===0)return;let ci=xi.findIndex(zr=>fe(zr)===fe(de)),[mr]=xi.splice(ci,1);if(mr===void 0&&b&&(mr=typeof Kt[0]?{label:de}:de),mr===void 0)return console.error(`Multiselect can't remove selected option ${JSON.stringify(de)}, not found in selected list`);t(4,xi=[...xi]),t(7,zt=!1),Ce?.setCustomValidity(""),Zr("remove",{option:mr}),Zr("change",{option:mr,type:"remove"})}function ko(de){G||(t(8,Fe=!0),de instanceof FocusEvent||we?.focus(),Zr("open",{event:de}))}function ft(de){t(8,Fe=!1),we?.blur(),t(0,u=null),Zr("close",{event:de})}async function Mt(de){if(de.key==="Escape"||de.key==="Tab")ft(de),t(3,fi="");else if(de.key==="Enter")de.preventDefault(),h?(xi.includes(h)?Kn(h):Fr(h,de),t(3,fi="")):b&&fi.length>0?Fr(fi,de):ko(de);else if(["ArrowDown","ArrowUp"].includes(de.key)){if(u===null&&vt.length>0){t(0,u=0);return}else if(b&&!vt.length&&fi.length>0){t(44,ct=!ct);return}else if(u===null)return;de.preventDefault();let ci=de.key==="ArrowUp"?-1:1;if(t(0,u=(u+ci)%vt.length),u<0&&t(0,u=vt.length-1),T){await Ns();let mr=document.querySelector("ul.options > li.active");mr&&mr.scrollIntoViewIfNeeded?.()}}else de.key==="Backspace"&&xi.length>0&&!fi?Kn(xi.at(-1)):vt.length>0&&t(0,u=0)}function De(){Zr("removeAll",{options:xi}),Zr("change",{options:xi,type:"removeAll"}),t(4,xi=[]),t(3,fi="")}let At=de=>ci=>{["Enter","Space"].includes(ci.code)&&(ci.preventDefault(),de())};function Jt(de){ti&&!ti.contains(de.target)&&ft(de)}let Dt=null,wi=de=>ci=>{if(!ci.dataTransfer)return;ci.dataTransfer.dropEffect="move";let mr=parseInt(ci.dataTransfer.getData("text/plain")),zr=[...xi];mr<de?(zr.splice(de+1,0,zr[mr]),zr.splice(mr,1)):(zr.splice(de,0,zr[mr]),zr.splice(mr+1,1)),t(4,xi=zr),t(46,Dt=null)},zi=de=>ci=>{ci.dataTransfer&&(ci.dataTransfer.effectAllowed="move",ci.dataTransfer.dropEffect="move",ci.dataTransfer.setData("text/plain",`${de}`))},re;function V(de){if(!xe||typeof CSS>"u"||!CSS.highlights)return;CSS.highlights.clear();let ci=de?.target?.value.trim().toLowerCase();if(!ci)return;let mr=document.createTreeWalker(re,NodeFilter.SHOW_TEXT,{acceptNode:on=>on?.textContent===tt?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),zr=[],ur=mr.nextNode();for(;ur;)zr.push(ur),ur=mr.nextNode();let Ho=zr.map(on=>{let cs=on.textContent?.toLowerCase(),Hn=[],Es=0;for(;cs&&Es<cs.length;){let ce=cs.indexOf(ci,Es);if(ce===-1)break;Hn.push(ce),Es=ce+ci.length}return Hn.map(ce=>{let R=new Range;return R.setStart(on,ce),R.setEnd(on,ce+ci.length),R})});CSS.highlights.set("sms-search-matches",new Highlight(...Ho.flat()))}function H(de){ji.call(this,i,de)}function q(de){ji.call(this,i,de)}function ne(de){ji.call(this,i,de)}function be(de){ji.call(this,i,de)}function _e(de){ji.call(this,i,de)}function Se(de){ji.call(this,i,de)}function me(de){ji.call(this,i,de)}function ke(de){ji.call(this,i,de)}function We(de){ji.call(this,i,de)}function $e(de){ji.call(this,i,de)}function Je(de){ji.call(this,i,de)}function Gt(de){ji.call(this,i,de)}function ai(de){ji.call(this,i,de)}function ri(de){ji.call(this,i,de)}function Ni(de){ji.call(this,i,de)}function pi(de){ji.call(this,i,de)}function cr(){t(45,Lr=window.innerWidth)}function Oi(de){Ri[de?"unshift":"push"](()=>{Ce=de,t(5,Ce)})}let Yi=()=>{t(7,zt=!0);let de;Qt&&Qt>1&&Number(_i)>1?de=`Please select between ${_i} and ${Qt} options`:Number(_i)>1?de=`Please select at least ${_i} options`:de="Please select an option",Ce?.setCustomValidity(de)},di=de=>Kn(de),br=de=>Kn(de),Rr=de=>t(46,Dt=de);function Pn(de){Ri[de?"unshift":"push"](()=>{we=de,t(6,we)})}function rn(){fi=this.value,t(3,fi)}function dn(de){In=de,t(43,In)}let nn=(de,ci,mr)=>{de||Fr(ci,mr)},xl=(de,ci)=>{de||t(0,u=ci)},fa=(de,ci)=>{de||t(0,u=ci)},ir=()=>t(0,u=null),So=()=>t(0,u=null),La=de=>{b&&Fr(fi,de)},jn=()=>t(44,ct=!0),Dn=()=>t(44,ct=!0),wl=()=>t(44,ct=!1),hn=()=>t(44,ct=!1);function Jn(de){Ri[de?"unshift":"push"](()=>{re=de,t(47,re)})}function kl(de){Ri[de?"unshift":"push"](()=>{ti=de,t(9,ti)})}return i.$$set=de=>{"activeIndex"in de&&t(0,u=de.activeIndex),"activeOption"in de&&t(60,h=de.activeOption),"createOptionMsg"in de&&t(10,m=de.createOptionMsg),"allowUserOptions"in de&&t(11,b=de.allowUserOptions),"allowEmpty"in de&&t(61,_=de.allowEmpty),"autocomplete"in de&&t(12,S=de.autocomplete),"autoScroll"in de&&t(62,T=de.autoScroll),"breakpoint"in de&&t(63,P=de.breakpoint),"defaultDisabledTitle"in de&&t(13,F=de.defaultDisabledTitle),"disabled"in de&&t(42,G=de.disabled),"disabledInputTitle"in de&&t(14,$=de.disabledInputTitle),"duplicateOptionMsg"in de&&t(15,ee=de.duplicateOptionMsg),"duplicates"in de&&t(16,ue=de.duplicates),"key"in de&&t(17,fe=de.key),"filterFunc"in de&&t(64,Y=de.filterFunc),"closeDropdownOnSelect"in de&&t(65,je=de.closeDropdownOnSelect),"form_input"in de&&t(5,Ce=de.form_input),"highlightMatches"in de&&t(66,xe=de.highlightMatches),"id"in de&&t(18,Le=de.id),"input"in de&&t(6,we=de.input),"inputClass"in de&&t(19,st=de.inputClass),"inputmode"in de&&t(20,He=de.inputmode),"invalid"in de&&t(7,zt=de.invalid),"liActiveOptionClass"in de&&t(21,rt=de.liActiveOptionClass),"liOptionClass"in de&&t(22,jt=de.liOptionClass),"liSelectedClass"in de&&t(23,$t=de.liSelectedClass),"loading"in de&&t(24,dt=de.loading),"matchingOptions"in de&&t(1,vt=de.matchingOptions),"maxOptions"in de&&t(25,bt=de.maxOptions),"maxSelect"in de&&t(26,Qt=de.maxSelect),"maxSelectMsg"in de&&t(27,Yt=de.maxSelectMsg),"maxSelectMsgClass"in de&&t(28,ki=de.maxSelectMsgClass),"name"in de&&t(29,oi=de.name),"noMatchingOptionsMsg"in de&&t(30,tt=de.noMatchingOptionsMsg),"open"in de&&t(8,Fe=de.open),"options"in de&&t(2,Kt=de.options),"outerDiv"in de&&t(9,ti=de.outerDiv),"outerDivClass"in de&&t(31,Xi=de.outerDivClass),"parseLabelsAsHtml"in de&&t(32,nt=de.parseLabelsAsHtml),"pattern"in de&&t(33,Wt=de.pattern),"placeholder"in de&&t(34,yi=de.placeholder),"removeAllTitle"in de&&t(35,Rt=de.removeAllTitle),"removeBtnTitle"in de&&t(36,vi=de.removeBtnTitle),"minSelect"in de&&t(37,lt=de.minSelect),"required"in de&&t(38,_i=de.required),"resetFilterOnAdd"in de&&t(67,Ue=de.resetFilterOnAdd),"searchText"in de&&t(3,fi=de.searchText),"selected"in de&&t(4,xi=de.selected),"sortSelected"in de&&t(68,hi=de.sortSelected),"selectedOptionsDraggable"in de&&t(39,fr=de.selectedOptionsDraggable),"ulOptionsClass"in de&&t(40,Mr=de.ulOptionsClass),"ulSelectedClass"in de&&t(41,en=de.ulSelectedClass),"value"in de&&t(59,tn=de.value),"$$scope"in de&&t(107,n=de.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16&&bn(xi),i.$$.dirty[1]&268435456&&Vn(tn),i.$$.dirty[0]&196636|i.$$.dirty[2]&4&&t(1,vt=Kt.filter(de=>Y(de,fi)&&(!xi.map(fe).includes(fe(de))||ue))),i.$$.dirty[0]&3&&t(60,h=vt[u??-1]??null),i.$$.dirty[0]&16&&t(48,r=de=>xi.map(ao).includes(de))},[u,vt,Kt,fi,xi,Ce,we,zt,Fe,ti,m,b,S,F,$,ee,ue,fe,Le,st,He,rt,jt,$t,dt,bt,Qt,Yt,ki,oi,tt,Xi,nt,Wt,yi,Rt,vi,lt,_i,fr,Mr,en,G,In,ct,Lr,Dt,re,r,Fr,Kn,ko,Mt,De,At,Jt,wi,zi,V,tn,h,_,T,P,Y,je,xe,Ue,hi,o,H,q,ne,be,_e,Se,me,ke,We,$e,Je,Gt,ai,ri,Ni,pi,cr,Oi,Yi,di,br,Rr,Pn,rn,dn,nn,xl,fa,ir,So,La,jn,Dn,wl,hn,Jn,kl,n]}var Ky=class extends pt{constructor(e){super(),yt(this,e,XP,JP,ut,{activeIndex:0,activeOption:60,createOptionMsg:10,allowUserOptions:11,allowEmpty:61,autocomplete:12,autoScroll:62,breakpoint:63,defaultDisabledTitle:13,disabled:42,disabledInputTitle:14,duplicateOptionMsg:15,duplicates:16,key:17,filterFunc:64,closeDropdownOnSelect:65,form_input:5,highlightMatches:66,id:18,input:6,inputClass:19,inputmode:20,invalid:7,liActiveOptionClass:21,liOptionClass:22,liSelectedClass:23,loading:24,matchingOptions:1,maxOptions:25,maxSelect:26,maxSelectMsg:27,maxSelectMsgClass:28,name:29,noMatchingOptionsMsg:30,open:8,options:2,outerDiv:9,outerDivClass:31,parseLabelsAsHtml:32,pattern:33,placeholder:34,removeAllTitle:35,removeBtnTitle:36,minSelect:37,required:38,resetFilterOnAdd:67,searchText:3,selected:4,sortSelected:68,selectedOptionsDraggable:39,ulOptionsClass:40,ulSelectedClass:41,value:59},null,[-1,-1,-1,-1,-1])}},au=Ky;function YP(i=!0){let e=this,t=new IntersectionObserver(function([r]){let o=r.intersectionRatio;if(o<1){let n=o<=0&&i?"center":"nearest";e.scrollIntoView({block:n,inline:n})}this.disconnect()});return t.observe(e),t}typeof Element<"u"&&!Element.prototype?.scrollIntoViewIfNeeded&&typeof IntersectionObserver<"u"&&(Element.prototype.scrollIntoViewIfNeeded=YP);function N9(i,e,t){let r=i.slice();return r[9]=e[t],r}function O9(i){let e,t;return{c(){e=Ke("input"),J(e,"type","hidden"),J(e,"name",i[3]),e.value=t=i[9]},m(r,o){Ne(r,e,o)},p(r,o){o&8&&J(e,"name",r[3]),o&1&&t!==(t=r[9])&&(e.value=t)},d(r){r&&ze(e)}}}function eD(i){let e,t,r,o,n;function u(_){i[7](_)}let h={options:i[1],placeholder:i[2],outerDivClass:`!bg-gray-50 !w-full !input !input-bordered !border-gray-300 
  !rounded-lg !p-2.5 !text-gray-900 !text-sm
  focus:!ring-blue-500 focus:!border-blue-500
  dark:!bg-gray-700 dark:!border-gray-600 dark:!placeholder-gray-400 dark:!text-white 
  dark:focus:!ring-blue-500 dark:focus:!border-blue-500
  `,liSelectedClass:"!bg-orange-500 dark:!bg-blue-600 !p-2 !text-white",ulOptionsClass:"!p-2 !m-1 !bg-gray-50 !text-gray-900 !text-sm dark:!bg-gray-700 dark:!border-gray-600 dark:!text-white ",liOptionClass:"!p-2 !m-1 !bg-gray-50 !text-gray-900 !text-sm dark:!bg-gray-700 dark:!border-gray-600 dark:!text-white hover:!bg-gray-200 hover:dark:!bg-gray-500 rounded",liUserMsgClass:"!p-2 !m-1 !bg-gray-50 !text-gray-900 !text-sm dark:!bg-gray-700 dark:!border-gray-600 dark:!text-white ",liActiveOptionClass:"!bg-slate-200 dark:!bg-blue-300",allowUserOptions:!0,createOptionMsg:"Hit enter to create"};i[0]!==void 0&&(h.selected=i[0]),e=new au({props:h}),Ri.push(()=>Wr(e,"selected",u));let m=On(i[0]),b=[];for(let _=0;_<m.length;_+=1)b[_]=O9(N9(i,m,_));return{c(){qt(e.$$.fragment),r=Ot();for(let _=0;_<b.length;_+=1)b[_].c();o=Zi()},m(_,S){Ut(e,_,S),Ne(_,r,S);for(let T=0;T<b.length;T+=1)b[T]&&b[T].m(_,S);Ne(_,o,S),n=!0},p(_,[S]){let T={};if(S&2&&(T.options=_[1]),S&4&&(T.placeholder=_[2]),!t&&S&1&&(t=!0,T.selected=_[0],Gr(()=>t=!1)),e.$set(T),S&9){m=On(_[0]);let P;for(P=0;P<m.length;P+=1){let F=N9(_,m,P);b[P]?b[P].p(F,S):(b[P]=O9(F),b[P].c(),b[P].m(o.parentNode,o))}for(;P<b.length;P+=1)b[P].d(1);b.length=m.length}},i(_){n||(Pe(e.$$.fragment,_),n=!0)},o(_){Be(e.$$.fragment,_),n=!1},d(_){_&&(ze(r),ze(o)),Vt(e,_),Zl(b,_)}}}function tD(i,e,t){let{items:r=["Svelte","React","Vue","Angular","..."]}=e,{selected:o=[]}=e,{placeholder:n="Select options..."}=e,{formInputName:u="input_name"}=e,{postURL:h="/multiselect-post-request"}=e,{csrfToken:m=""}=e,b=[];Sr(()=>{t(6,b=[...o])});async function _(){let T=new FormData;o.forEach(P=>{T.append("interested_genders",P)});try{let P=await fetch(h,{method:"POST",headers:{"X-CSRF-Token":m},body:T,credentials:"include"});if(!P.ok)throw new Error(`HTTP error! status: ${P.status}`);let F=await P.json();console.log("Form submitted successfully:",F)}catch(P){console.error("Failed to submit form:",P)}}function S(T){o=T,t(0,o)}return i.$$set=T=>{"items"in T&&t(1,r=T.items),"selected"in T&&t(0,o=T.selected),"placeholder"in T&&t(2,n=T.placeholder),"formInputName"in T&&t(3,u=T.formInputName),"postURL"in T&&t(4,h=T.postURL),"csrfToken"in T&&t(5,m=T.csrfToken)},i.$$.update=()=>{i.$$.dirty&1&&t(0,o=Array.isArray(o)?o:[]),i.$$.dirty&65&&o.length!==b.length&&(_(),t(6,b=[...o]))},[o,r,n,u,h,m,b,S]}var Jy=class extends pt{constructor(e){super(),yt(this,e,tD,eD,ut,{items:1,selected:0,placeholder:2,formInputName:3,postURL:4,csrfToken:5})}},B9=Jy;var iD=i=>({}),R9=i=>({});function rD(i){let e,t,r,o,n,u=i[4].icon,h=Si(u,i,i[3],R9);return{c(){e=Ke("button"),h&&h.c(),e.disabled=i[1],J(e,"type","button"),J(e,"class",t="p-2 m-2 text-sm font-medium focus:outline-none rounded-full "+(i[0]?"text-blue-900 bg-blue-400 hover:bg-blue-600 hover:text-blue-900 dark:bg-blue-700 dark:text-blue-300 dark:hover:text-white dark:hover:bg-blue-700":"text-gray-600 bg-slate-200 hover:bg-blue-200 hover:text-blue-800 dark:bg-gray-700 dark:text-gray-400 dark:hover:text-white dark:hover:bg-blue-700"))},m(m,b){Ne(m,e,b),h&&h.m(e,null),r=!0,o||(n=It(e,"click",i[5]),o=!0)},p(m,[b]){h&&h.p&&(!r||b&8)&&Ei(h,u,m,m[3],r?Ci(u,m[3],b,iD):Ti(m[3]),R9),(!r||b&2)&&(e.disabled=m[1]),(!r||b&1&&t!==(t="p-2 m-2 text-sm font-medium focus:outline-none rounded-full "+(m[0]?"text-blue-900 bg-blue-400 hover:bg-blue-600 hover:text-blue-900 dark:bg-blue-700 dark:text-blue-300 dark:hover:text-white dark:hover:bg-blue-700":"text-gray-600 bg-slate-200 hover:bg-blue-200 hover:text-blue-800 dark:bg-gray-700 dark:text-gray-400 dark:hover:text-white dark:hover:bg-blue-700")))&&J(e,"class",t)},i(m){r||(Pe(h,m),r=!0)},o(m){Be(h,m),r=!1},d(m){m&&ze(e),h&&h.d(m),o=!1,n()}}}function nD(i,e,t){let{$$slots:r={},$$scope:o}=e,n=yo(),{permissionGranted:u=!1}=e,{disabled:h=!1}=e,m=()=>n("click");return i.$$set=b=>{"permissionGranted"in b&&t(0,u=b.permissionGranted),"disabled"in b&&t(1,h=b.disabled),"$$scope"in b&&t(3,o=b.$$scope)},[u,h,n,o,r,m]}var Xy=class extends pt{constructor(e){super(),yt(this,e,nD,rD,ut,{permissionGranted:0,disabled:1})}},qs=Xy;function oD(i){let e,t,r,o,n;return{c(){e=bi("svg"),t=bi("path"),r=bi("path"),o=bi("path"),n=bi("path"),J(t,"stroke","none"),J(t,"d","M0 0h24v24H0z"),J(t,"fill","none"),J(r,"d","M9 5h10a2 2 0 0 1 2 2v10m-2 2h-14a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2"),J(o,"d","M3 7l9 6l.565 -.377m2.435 -1.623l6 -4"),J(n,"d","M3 3l18 18"),J(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"fill","none"),J(e,"stroke","currentColor"),J(e,"stroke-width","2"),J(e,"stroke-linecap","round"),J(e,"stroke-linejoin","round"),J(e,"class","icon icon-tabler icons-tabler-outline icon-tabler-mail-off")},m(u,h){Ne(u,e,h),qe(e,t),qe(e,r),qe(e,o),qe(e,n)},p:gt,i:gt,o:gt,d(u){u&&ze(e)}}}var Yy=class extends pt{constructor(e){super(),yt(this,e,null,oD,ut,{})}},U9=Yy;function sD(i){let e,t,r,o;return{c(){e=bi("svg"),t=bi("path"),r=bi("path"),o=bi("path"),J(t,"stroke","none"),J(t,"d","M0 0h24v24H0z"),J(t,"fill","none"),J(r,"d","M22 7.535v9.465a3 3 0 0 1 -2.824 2.995l-.176 .005h-14a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-9.465l9.445 6.297l.116 .066a1 1 0 0 0 .878 0l.116 -.066l9.445 -6.297z"),J(o,"d","M19 4c1.08 0 2.027 .57 2.555 1.427l-9.555 6.37l-9.555 -6.37a2.999 2.999 0 0 1 2.354 -1.42l.201 -.007h14z"),J(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"fill","currentColor"),J(e,"class","icon icon-tabler icons-tabler-filled icon-tabler-mail")},m(n,u){Ne(n,e,u),qe(e,t),qe(e,r),qe(e,o)},p:gt,i:gt,o:gt,d(n){n&&ze(e)}}}var eb=class extends pt{constructor(e){super(),yt(this,e,null,sD,ut,{})}},V9=eb;function aD(i){let e,t,r,o;return{c(){e=bi("svg"),t=bi("style"),r=nr(`.spinner_P7sC {
      transform-origin: center;
      animation: spinner_svv2 0.75s infinite linear;
    }
    @keyframes spinner_svv2 {
      100% {
        transform: rotate(360deg);
      }
    }
  `),o=bi("path"),J(o,"d","M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"),J(o,"class","spinner_P7sC"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"xmlns","http://www.w3.org/2000/svg")},m(n,u){Ne(n,e,u),qe(e,t),qe(t,r),qe(e,o)},p:gt,i:gt,o:gt,d(n){n&&ze(e)}}}var tb=class extends pt{constructor(e){super(),yt(this,e,null,aD,ut,{})}},vd=tb;function lD(i){let e,t;return e=new qs({props:{permissionGranted:i[0],$$slots:{icon:[dD]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&1&&(n.permissionGranted=r[0]),o&256&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function cD(i){let e,t;return e=new qs({props:{permissionGranted:i[0],$$slots:{icon:[hD]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&1&&(n.permissionGranted=r[0]),o&256&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function uD(i){let e,t;return e=new qs({props:{permissionGranted:i[0],$$slots:{icon:[pD]},$$scope:{ctx:i}}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&1&&(n.permissionGranted=r[0]),o&256&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function dD(i){let e,t;return e=new U9({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function hD(i){let e,t;return e=new V9({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function pD(i){let e,t;return e=new vd({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function fD(i){let e,t,r,o,n=[uD,cD,lD],u=[];function h(m,b){return m[1]?0:m[0]?1:2}return e=h(i,-1),t=u[e]=n[e](i),{c(){t.c(),r=Zi()},m(m,b){u[e].m(m,b),Ne(m,r,b),o=!0},p(m,[b]){let _=e;e=h(m,b),e===_?u[e].p(m,b):(Hi(),Be(u[_],1,1,()=>{u[_]=null}),qi(),t=u[e],t?t.p(m,b):(t=u[e]=n[e](m),t.c()),Pe(t,1),t.m(r.parentNode,r))},i(m){o||(Pe(t),o=!0)},o(m){Be(t),o=!1},d(m){m&&ze(r),u[e].d(m)}}}function mD(i,e,t){let{permissionGranted:r=!1}=e,{addEmailSubscriptionEndpoint:o=""}=e,{deleteEmailSubscriptionEndpoint:n=""}=e,{permissionKey:u=""}=e,{notificationTypeQueryParamKey:h=""}=e,m=!1;async function b(){t(1,m=!0);try{let S=await fetch(o+`&${h}=`+u,{method:"POST",headers:{"Content-Type":"application/json"}});if(!S.ok)throw new Error(`Failed to create email subscription: ${S.status} ${S.statusText}`);t(0,r=!0),cn.success("Email notification turned on")}catch(S){console.error("Failed to subscribe the user: ",S),cn.error(`Failed to subscribe: ${S.message||"Unknown error"}`)}finally{t(1,m=!1)}}async function _(){t(1,m=!0);try{let S=await fetch(n+`&${h}=`+u,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!S.ok)throw new Error(`Failed to delete email subscription: ${S.status} ${S.statusText}`);t(0,r=!1),cn.success("Email notification turned off")}catch(S){console.error("Failed to unsubscribe the user: ",S),cn.error(`Failed to unsubscribe: ${S.message||"Unknown error"}`)}finally{t(1,m=!1)}}return i.$$set=S=>{"permissionGranted"in S&&t(0,r=S.permissionGranted),"addEmailSubscriptionEndpoint"in S&&t(4,o=S.addEmailSubscriptionEndpoint),"deleteEmailSubscriptionEndpoint"in S&&t(5,n=S.deleteEmailSubscriptionEndpoint),"permissionKey"in S&&t(6,u=S.permissionKey),"notificationTypeQueryParamKey"in S&&t(7,h=S.notificationTypeQueryParamKey)},[r,m,b,_,o,n,u,h]}var ib=class extends pt{constructor(e){super(),yt(this,e,mD,fD,ut,{permissionGranted:0,addEmailSubscriptionEndpoint:4,deleteEmailSubscriptionEndpoint:5,permissionKey:6,notificationTypeQueryParamKey:7})}},rb=ib;function gD(i){let e,t,r,o,n;return{c(){e=bi("svg"),t=bi("path"),r=bi("path"),o=bi("path"),n=bi("path"),J(t,"stroke","none"),J(t,"d","M0 0h24v24H0z"),J(t,"fill","none"),J(r,"d","M9.346 5.353c.21 -.129 .428 -.246 .654 -.353a2 2 0 1 1 4 0a7 7 0 0 1 4 6v3m-1 3h-13a4 4 0 0 0 2 -3v-3a6.996 6.996 0 0 1 1.273 -3.707"),J(o,"d","M9 17v1a3 3 0 0 0 6 0v-1"),J(n,"d","M3 3l18 18"),J(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"fill","none"),J(e,"stroke","currentColor"),J(e,"stroke-width","2"),J(e,"stroke-linecap","round"),J(e,"stroke-linejoin","round"),J(e,"class","icon icon-tabler icons-tabler-outline icon-tabler-bell-off")},m(u,h){Ne(u,e,h),qe(e,t),qe(e,r),qe(e,o),qe(e,n)},p:gt,i:gt,o:gt,d(u){u&&ze(e)}}}var nb=class extends pt{constructor(e){super(),yt(this,e,null,gD,ut,{})}},Em=nb;function yD(i){let e,t,r,o;return{c(){e=bi("svg"),t=bi("path"),r=bi("path"),o=bi("path"),J(t,"stroke","none"),J(t,"d","M0 0h24v24H0z"),J(t,"fill","none"),J(r,"d","M14.235 19c.865 0 1.322 1.024 .745 1.668a3.992 3.992 0 0 1 -2.98 1.332a3.992 3.992 0 0 1 -2.98 -1.332c-.552 -.616 -.158 -1.579 .634 -1.661l.11 -.006h4.471z"),J(o,"d","M12 2c1.358 0 2.506 .903 2.875 2.141l.046 .171l.008 .043a8.013 8.013 0 0 1 4.024 6.069l.028 .287l.019 .289v2.931l.021 .136a3 3 0 0 0 1.143 1.847l.167 .117l.162 .099c.86 .487 .56 1.766 -.377 1.864l-.116 .006h-16c-1.028 0 -1.387 -1.364 -.493 -1.87a3 3 0 0 0 1.472 -2.063l.021 -.143l.001 -2.97a8 8 0 0 1 3.821 -6.454l.248 -.146l.01 -.043a3.003 3.003 0 0 1 2.562 -2.29l.182 -.017l.176 -.004z"),J(e,"xmlns","http://www.w3.org/2000/svg"),J(e,"width","24"),J(e,"height","24"),J(e,"viewBox","0 0 24 24"),J(e,"fill","currentColor"),J(e,"class","icon icon-tabler icons-tabler-filled icon-tabler-bell")},m(n,u){Ne(n,e,u),qe(e,t),qe(e,r),qe(e,o)},p:gt,i:gt,o:gt,d(n){n&&ze(e)}}}var ob=class extends pt{constructor(e){super(),yt(this,e,null,yD,ut,{})}},Tm=ob;function bD(i){let e,t;return e=new qs({props:{permissionGranted:!1,$$slots:{icon:[xD]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&67108864&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function vD(i){let e,t;return e=new qs({props:{permissionGranted:!0,$$slots:{icon:[wD]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&67108864&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function _D(i){let e,t;return e=new qs({props:{permissionGranted:i[0],$$slots:{icon:[kD]},$$scope:{ctx:i}}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&1&&(n.permissionGranted=r[0]),o&67108864&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function xD(i){let e,t;return e=new Em({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function wD(i){let e,t;return e=new Tm({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function kD(i){let e,t;return e=new vd({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function SD(i){let e,t,r,o,n,u,h=[_D,vD,bD],m=[];function b(_,S){return _[2]?0:_[0]&&_[1]?1:2}return r=b(i,-1),o=m[r]=h[r](i),{c(){e=Ke("wc-toast"),t=Ot(),o.c(),n=Zi()},m(_,S){Ne(_,e,S),Ne(_,t,S),m[r].m(_,S),Ne(_,n,S),u=!0},p(_,[S]){let T=r;r=b(_,S),r===T?m[r].p(_,S):(Hi(),Be(m[T],1,1,()=>{m[T]=null}),qi(),o=m[r],o?o.p(_,S):(o=m[r]=h[r](_),o.c()),Pe(o,1),o.m(n.parentNode,n))},i(_){u||(Pe(o),u=!0)},o(_){Be(o),u=!1},d(_){_&&(ze(e),ze(t),ze(n)),m[r].d(_)}}}function j9(i,e){let t;return function(...r){clearTimeout(t),t=setTimeout(()=>{i.apply(this,r)},e)}}function CD(i){i.detail&&console.log("Push notification received:",JSON.stringify(i.detail))}function ED(i,e,t){let{addSubscriptionEndpoint:r="/subscribe-to-native-ios-push-notifs"}=e,{deleteSubscriptionEndpoint:o="/unsubscribe-from-native-ios-push-notifs"}=e,{permissionKey:n=""}=e,{permissionGranted:u=!1}=e,{notificationTypeQueryParamKey:h=""}=e,m=!1,b=!1,_=!1,S="",T=!1,P=!1,F="",G=0;Sr(async()=>{window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers["push-permission-request"]&&window.webkit.messageHandlers["push-permission-state"]&&(_=!0,fe(),je()),console.log("iOSPushCapability",_)});let $=j9(Y,500);async function ee(){t(2,b=!0),T=!0,F?st():$()}async function ue(){if(t(2,b=!0),m)try{await zt(),t(1,m=!1),cn.success("Push notification turned off"),P=!1}catch(rt){console.error("Failed to unsubscribe the user",rt),cn.error(`Failed to unsubscribe: ${rt.message||"Unknown error"}`)}t(2,b=!1)}function fe(){window.addEventListener("push-permission-request",rt=>xe(rt)),window.addEventListener("push-permission-state",rt=>Le(rt)),window.addEventListener("push-notification",rt=>CD(rt)),window.addEventListener("push-token",rt=>we(rt))}function Y(){_&&window.webkit.messageHandlers["push-permission-request"].postMessage("push-permission-request")}function je(){_&&window.webkit.messageHandlers["push-permission-state"].postMessage("push-permission-state")}function Ce(){_&&window.webkit.messageHandlers["push-token"].postMessage("push-token")}function xe(rt){if(rt.detail)switch(console.log(rt.detail),rt.detail){case"granted":Ce();break;default:t(1,m=!1);break}}function Le(rt){if(rt.detail)switch(console.log(rt.detail),rt.detail){case"notDetermined":break;case"denied":t(1,m=!1);break;case"authorized":Ce(),t(1,m=!0);case"ephemeral":case"provisional":break;default:break}}async function we(rt){T&&(F=rt.detail,await st())}let st=j9(async()=>{if(F&&!P){console.log("Push token received:",JSON.stringify(F));try{if(S=JSON.stringify(F),console.log("event.detail",F),console.log("fcmToken",S),T){await He(F),t(1,m=!0),t(0,u=!0),T=!1,P=!0;let rt=Date.now();rt-G>1e3&&(cn.success("Push notification turned on"),G=rt),console.log(`Subscribed to ${n}, isSubscribedForPermission: ${m}, permissionGranted: ${u}`)}}catch(rt){T&&(cn.error(`Failed to subscribe: ${rt.message||"Unknown error"}`),console.error("Failed to subscribe the user: ",rt),setTimeout(()=>{t(1,m=!1)},250))}finally{T=!1,t(2,b=!1)}}},500);async function He(rt){let jt=r+`&${h}=`+n,$t=await fetch(jt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcm_token:rt})});if(!$t.ok)throw new Error(`Failed to add subscription: ${$t.status} ${$t.statusText}`)}async function zt(){let rt=o+`&${h}=`+n,jt=await fetch(rt,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({fcm_token:F})});if(!jt.ok)throw new Error(`Failed to remove subscription: ${jt.status} ${jt.statusText}`)}return i.$$set=rt=>{"addSubscriptionEndpoint"in rt&&t(5,r=rt.addSubscriptionEndpoint),"deleteSubscriptionEndpoint"in rt&&t(6,o=rt.deleteSubscriptionEndpoint),"permissionKey"in rt&&t(7,n=rt.permissionKey),"permissionGranted"in rt&&t(0,u=rt.permissionGranted),"notificationTypeQueryParamKey"in rt&&t(8,h=rt.notificationTypeQueryParamKey)},[u,m,b,ee,ue,r,o,n,h]}var sb=class extends pt{constructor(e){super(),yt(this,e,ED,SD,ut,{addSubscriptionEndpoint:5,deleteSubscriptionEndpoint:6,permissionKey:7,permissionGranted:0,notificationTypeQueryParamKey:8})}},ab=sb;function TD(i){let e,t;return e=new qs({props:{permissionGranted:i[1],$$slots:{icon:[ID]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&2&&(n.permissionGranted=r[1]),o&131072&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function MD(i){let e,t;return e=new qs({props:{permissionGranted:i[1],$$slots:{icon:[PD]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&2&&(n.permissionGranted=r[1]),o&131072&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function AD(i){let e,t;return e=new qs({props:{permissionGranted:i[0],$$slots:{icon:[DD]},$$scope:{ctx:i}}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&1&&(n.permissionGranted=r[0]),o&131072&&(n.$$scope={dirty:o,ctx:r}),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function ID(i){let e,t;return e=new Em({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function PD(i){let e,t;return e=new Tm({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function DD(i){let e,t;return e=new vd({props:{slot:"icon"}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function LD(i){let e,t,r,o,n,u,h=[AD,MD,TD],m=[];function b(_,S){return _[2]?0:_[1]?1:2}return r=b(i,-1),o=m[r]=h[r](i),{c(){e=Ke("wc-toast"),t=Ot(),o.c(),n=Zi()},m(_,S){Ne(_,e,S),Ne(_,t,S),m[r].m(_,S),Ne(_,n,S),u=!0},p(_,[S]){let T=r;r=b(_,S),r===T?m[r].p(_,S):(Hi(),Be(m[T],1,1,()=>{m[T]=null}),qi(),o=m[r],o?o.p(_,S):(o=m[r]=h[r](_),o.c()),Pe(o,1),o.m(n.parentNode,n))},i(_){u||(Pe(o),u=!0)},o(_){Be(o),u=!1},d(_){_&&(ze(e),ze(t),ze(n)),m[r].d(_)}}}var FD=!1;function zD(){var i=window.navigator.userAgent,e=!!i.match(/WebKit/i),t=!!i.match(/iPad/i)||!!i.match(/iPhone/i);return!!(e&&t)}async function ND(){window.Swal||await import("https://cdn.jsdelivr.net/npm/sweetalert2@10")}function OD(){var i=window.navigator.userAgent,e=!!i.match(/iPad/i)||!!i.match(/iPhone/i),t=!!i.match(/WebKit/i),r=!!i.match(/Safari/i)&&!i.match(/CriOS/i);return e&&t&&!r}function BD(i){let e="=".repeat((4-i.length%4)%4),t=(i+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),o=new Uint8Array(r.length);for(let n=0;n<r.length;++n)o[n]=r.charCodeAt(n);return o}function RD(i,e,t){let{vapidPublicKey:r=""}=e,{subscribedEndpoints:o=[]}=e,{addSubscriptionEndpoint:n="/subscribe-to-push-notifs"}=e,{deleteSubscriptionEndpoint:u="/unsubscribe-from-push-notifs"}=e,{permissionKey:h=""}=e,{permissionGranted:m=!1}=e,{notificationTypeQueryParamKey:b=""}=e,_=!1,S=!1,T=!0,P=null,F=!1;Sr(async()=>{await ND();let Y=window.navigator.standalone;if(S=Y||window.matchMedia("(display-mode: standalone)").matches,S||(T=!(zD()&&!Y)),"serviceWorker"in navigator){let je=await navigator.serviceWorker.ready;je.pushManager&&(P=await je.pushManager.getSubscription(),t(1,_=m&&G()))}});function G(){return!P||!o?!1:o.includes(P.endpoint)}async function $(){if(t(2,F=!0),OD()){Swal.fire({icon:"error",title:"Oops...",text:"Please install the app from the Apple App Store to get push notifications."}),t(2,F=!1);return}if(!T){t(2,F=!1),console.log("platform does not support push notifications");return}navigator.serviceWorker.register("/service-worker.js");try{let Y=await navigator.serviceWorker.ready;P&&await P.unsubscribe();let je=await Y.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:BD(r)});try{await ue(je),P=je,t(1,_=!0),cn.success("Push notification turned on")}catch(Ce){throw cn.error(`Failed to subscribe: ${Ce.message||"Unknown error"}`),console.error("Failed to send subscription to backend: ",Ce),await je.unsubscribe(),Ce}}catch(Y){cn.error(`Failed to subscribe: ${Y.message||"Unknown error"}`),console.error("Failed to subscribe the user: ",Y),setTimeout(()=>{t(1,_=!1)},250)}finally{t(2,F=!1)}}async function ee(){if(t(2,F=!0),FD&&_)await unsubscribeIosNativePushPermission(deleteIosNativeSubscriptionEndpoint),t(2,F=!1);else if(P)try{try{await fe(P),P=null,t(1,_=!1),cn.success("Push notification turned off")}catch(Y){cn.error(`Failed to unsubscribe: ${Y.message||"Unknown error"}`),t(1,_=!0)}}catch(Y){console.error("Failed to unsubscribe the user locally: ",Y),cn.error(`Failed to unsubscribe: ${Y.message||"Unknown error"}`)}t(2,F=!1)}async function ue(Y){let je=n+`&${b}=`+h,Ce=await fetch(je,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});if(!Ce.ok)throw new Error(`Failed to add subscription: ${Ce.status} ${Ce.statusText}`)}async function fe(Y){let je=u+`&${b}=`+h,Ce=await fetch(je,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:Y.endpoint})});if(!Ce.ok)throw new Error(`Failed to remove subscription: ${Ce.status} ${Ce.statusText}`)}return i.$$set=Y=>{"vapidPublicKey"in Y&&t(5,r=Y.vapidPublicKey),"subscribedEndpoints"in Y&&t(6,o=Y.subscribedEndpoints),"addSubscriptionEndpoint"in Y&&t(7,n=Y.addSubscriptionEndpoint),"deleteSubscriptionEndpoint"in Y&&t(8,u=Y.deleteSubscriptionEndpoint),"permissionKey"in Y&&t(9,h=Y.permissionKey),"permissionGranted"in Y&&t(0,m=Y.permissionGranted),"notificationTypeQueryParamKey"in Y&&t(10,b=Y.notificationTypeQueryParamKey)},[m,_,F,$,ee,r,o,n,u,h,b]}var lb=class extends pt{constructor(e){super(),yt(this,e,RD,LD,ut,{vapidPublicKey:5,subscribedEndpoints:6,addSubscriptionEndpoint:7,deleteSubscriptionEndpoint:8,permissionKey:9,permissionGranted:0,notificationTypeQueryParamKey:10})}},Pp=lb;function UD(i){let e,t;return e=new ab({props:{addSubscriptionEndpoint:i[7],deleteSubscriptionEndpoint:i[8],notificationTypeQueryParamKey:i[4],permissionKey:i[0].permission,permissionGranted:$s("fcm_push",i[0].platforms_list)}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&128&&(n.addSubscriptionEndpoint=r[7]),o&256&&(n.deleteSubscriptionEndpoint=r[8]),o&16&&(n.notificationTypeQueryParamKey=r[4]),o&1&&(n.permissionKey=r[0].permission),o&1&&(n.permissionGranted=$s("fcm_push",r[0].platforms_list)),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function VD(i){let e,t;return e=new Pp({props:{vapidPublicKey:i[2],subscribedEndpoints:i[3],addSubscriptionEndpoint:i[5],deleteSubscriptionEndpoint:i[6],notificationTypeQueryParamKey:i[4],permissionKey:i[0].permission,permissionGranted:$s("push",i[0].platforms_list)}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&4&&(n.vapidPublicKey=r[2]),o&8&&(n.subscribedEndpoints=r[3]),o&32&&(n.addSubscriptionEndpoint=r[5]),o&64&&(n.deleteSubscriptionEndpoint=r[6]),o&16&&(n.notificationTypeQueryParamKey=r[4]),o&1&&(n.permissionKey=r[0].permission),o&1&&(n.permissionGranted=$s("push",r[0].platforms_list)),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function jD(i){let e,t;return e=new ab({props:{addSubscriptionEndpoint:i[7],deleteSubscriptionEndpoint:i[8],notificationTypeQueryParamKey:i[4],permissionKey:i[1].permission,permissionGranted:$s("fcm_push",i[1].platforms_list)}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&128&&(n.addSubscriptionEndpoint=r[7]),o&256&&(n.deleteSubscriptionEndpoint=r[8]),o&16&&(n.notificationTypeQueryParamKey=r[4]),o&2&&(n.permissionKey=r[1].permission),o&2&&(n.permissionGranted=$s("fcm_push",r[1].platforms_list)),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function HD(i){let e,t;return e=new Pp({props:{vapidPublicKey:i[2],subscribedEndpoints:i[3],addSubscriptionEndpoint:i[5],deleteSubscriptionEndpoint:i[6],notificationTypeQueryParamKey:i[4],permissionKey:i[1].permission,permissionGranted:$s("push",i[1].platforms_list)}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p(r,o){let n={};o&4&&(n.vapidPublicKey=r[2]),o&8&&(n.subscribedEndpoints=r[3]),o&32&&(n.addSubscriptionEndpoint=r[5]),o&64&&(n.deleteSubscriptionEndpoint=r[6]),o&16&&(n.notificationTypeQueryParamKey=r[4]),o&2&&(n.permissionKey=r[1].permission),o&2&&(n.permissionGranted=$s("push",r[1].platforms_list)),e.$set(n)},i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function qD(i){let e,t,r,o,n,u,h,m=i[0].title+"",b,_,S,T,P=i[0].subtitle+"",F,G,$,ee,ue,fe,Y,je,Ce,xe,Le,we,st,He=i[1].title+"",zt,rt,jt,$t,dt=i[1].subtitle+"",vt,bt,Qt,Yt,ki,oi,tt,Fe,Kt=[VD,UD],ti=[];function Xi(Rt,vi){return Rt[11]?0:Rt[12]?1:-1}~(ee=Xi(i,-1))&&(ue=ti[ee]=Kt[ee](i)),Y=new rb({props:{notificationTypeQueryParamKey:i[4],permissionKey:i[0].permission,addEmailSubscriptionEndpoint:i[9],deleteEmailSubscriptionEndpoint:i[10],permissionGranted:$s("email",i[0].platforms_list)}});let nt=[HD,jD],Wt=[];function yi(Rt,vi){return Rt[11]?0:Rt[12]?1:-1}return~(Yt=yi(i,-1))&&(ki=Wt[Yt]=nt[Yt](i)),tt=new rb({props:{notificationTypeQueryParamKey:i[4],permissionKey:i[1].permission,addEmailSubscriptionEndpoint:i[9],deleteEmailSubscriptionEndpoint:i[10],permissionGranted:$s("email",i[1].platforms_list)}}),{c(){e=Ke("wc-toast"),t=Ot(),r=Ke("div"),o=Ke("div"),n=Ke("div"),u=Ke("div"),h=Ke("span"),b=nr(m),_=Ot(),S=Ke("div"),T=Ke("span"),F=nr(P),G=Ot(),$=Ke("div"),ue&&ue.c(),fe=Ot(),qt(Y.$$.fragment),je=Ot(),Ce=Ke("div"),xe=Ke("div"),Le=Ke("div"),we=Ke("div"),st=Ke("span"),zt=nr(He),rt=Ot(),jt=Ke("div"),$t=Ke("span"),vt=nr(dt),bt=Ot(),Qt=Ke("div"),ki&&ki.c(),oi=Ot(),qt(tt.$$.fragment),J(u,"class","ms-3 text-sm sm:text-base font-medium text-gray-900 dark:text-gray-300"),J(S,"class","ms-3 text-sm font-light text-gray-900 dark:text-gray-300"),J(o,"class","inline-flex items-center cursor-pointer my-2"),J($,"class","flex flex-row justify-center"),J(r,"class","bg-slate-100 dark:bg-slate-800 rounded-xl p-2 md:p-4 my-2"),J(we,"class","ms-3 text-sm sm:text-base font-medium text-gray-900 dark:text-gray-300"),J(jt,"class","ms-3 text-sm font-light text-gray-900 dark:text-gray-300"),J(xe,"class","inline-flex items-center cursor-pointer my-2"),J(Qt,"class","flex flex-row justify-center"),J(Ce,"class","bg-slate-100 dark:bg-slate-800 rounded-xl p-2 md:p-4 my-2")},m(Rt,vi){Ne(Rt,e,vi),Ne(Rt,t,vi),Ne(Rt,r,vi),qe(r,o),qe(o,n),qe(n,u),qe(u,h),qe(h,b),qe(n,_),qe(n,S),qe(S,T),qe(T,F),qe(r,G),qe(r,$),~ee&&ti[ee].m($,null),qe($,fe),Ut(Y,$,null),Ne(Rt,je,vi),Ne(Rt,Ce,vi),qe(Ce,xe),qe(xe,Le),qe(Le,we),qe(we,st),qe(st,zt),qe(Le,rt),qe(Le,jt),qe(jt,$t),qe($t,vt),qe(Ce,bt),qe(Ce,Qt),~Yt&&Wt[Yt].m(Qt,null),qe(Qt,oi),Ut(tt,Qt,null),Fe=!0},p(Rt,[vi]){(!Fe||vi&1)&&m!==(m=Rt[0].title+"")&&mn(b,m),(!Fe||vi&1)&&P!==(P=Rt[0].subtitle+"")&&mn(F,P);let lt=ee;ee=Xi(Rt,vi),ee===lt?~ee&&ti[ee].p(Rt,vi):(ue&&(Hi(),Be(ti[lt],1,1,()=>{ti[lt]=null}),qi()),~ee?(ue=ti[ee],ue?ue.p(Rt,vi):(ue=ti[ee]=Kt[ee](Rt),ue.c()),Pe(ue,1),ue.m($,fe)):ue=null);let _i={};vi&16&&(_i.notificationTypeQueryParamKey=Rt[4]),vi&1&&(_i.permissionKey=Rt[0].permission),vi&512&&(_i.addEmailSubscriptionEndpoint=Rt[9]),vi&1024&&(_i.deleteEmailSubscriptionEndpoint=Rt[10]),vi&1&&(_i.permissionGranted=$s("email",Rt[0].platforms_list)),Y.$set(_i),(!Fe||vi&2)&&He!==(He=Rt[1].title+"")&&mn(zt,He),(!Fe||vi&2)&&dt!==(dt=Rt[1].subtitle+"")&&mn(vt,dt);let Ue=Yt;Yt=yi(Rt,vi),Yt===Ue?~Yt&&Wt[Yt].p(Rt,vi):(ki&&(Hi(),Be(Wt[Ue],1,1,()=>{Wt[Ue]=null}),qi()),~Yt?(ki=Wt[Yt],ki?ki.p(Rt,vi):(ki=Wt[Yt]=nt[Yt](Rt),ki.c()),Pe(ki,1),ki.m(Qt,oi)):ki=null);let fi={};vi&16&&(fi.notificationTypeQueryParamKey=Rt[4]),vi&2&&(fi.permissionKey=Rt[1].permission),vi&512&&(fi.addEmailSubscriptionEndpoint=Rt[9]),vi&1024&&(fi.deleteEmailSubscriptionEndpoint=Rt[10]),vi&2&&(fi.permissionGranted=$s("email",Rt[1].platforms_list)),tt.$set(fi)},i(Rt){Fe||(Pe(ue),Pe(Y.$$.fragment,Rt),Pe(ki),Pe(tt.$$.fragment,Rt),Fe=!0)},o(Rt){Be(ue),Be(Y.$$.fragment,Rt),Be(ki),Be(tt.$$.fragment,Rt),Fe=!1},d(Rt){Rt&&(ze(e),ze(t),ze(r),ze(je),ze(Ce)),~ee&&ti[ee].d(),Vt(Y),~Yt&&Wt[Yt].d(),Vt(tt)}}}function $s(i,e){return e.some(t=>t.platform===i&&t.granted)}async function $D(){return"serviceWorker"in navigator&&navigator.serviceWorker.ready&&(console.log("isPwaPushNotificationsPossible, serviceworker in navigator",!0),(await navigator.serviceWorker.ready).pushManager)?(console.log("isPwaPushNotificationsPossible registration.pushManager",!0),!0):(console.log("isPwaPushNotificationsPossible",!1),!1)}function QD(i,e,t){let{permissionDailyNotif:r}=e,{permissionPartnerActivity:o}=e,{vapidPublicKey:n=""}=e,{subscribedEndpoints:u=[]}=e,{notificationTypeQueryParamKey:h="notifType"}=e,{addPushSubscriptionEndpoint:m=""}=e,{deletePushSubscriptionEndpoint:b=""}=e,{addFCMPushSubscriptionEndpoint:_=""}=e,{deleteFCMPushSubscriptionEndpoint:S=""}=e,{addEmailSubscriptionEndpoint:T=""}=e,{deleteEmailSubscriptionEndpoint:P=""}=e,{addSmsSubscriptionEndpoint:F=""}=e,{deleteSmsSubscriptionEndpoint:G=""}=e,{phoneSubscriptionEnabled:$=!1}=e,ee=!1,ue=!1;return console.log(r),console.log(o),Sr(async()=>{t(11,ee=await $D()),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers["push-permission-request"]&&window.webkit.messageHandlers["push-permission-state"]&&t(12,ue=!0),console.log("isPwaPushNotificationsPossibleBoolean",ee),console.log("isIosNativeAppBoolean",ue)}),i.$$set=fe=>{"permissionDailyNotif"in fe&&t(0,r=fe.permissionDailyNotif),"permissionPartnerActivity"in fe&&t(1,o=fe.permissionPartnerActivity),"vapidPublicKey"in fe&&t(2,n=fe.vapidPublicKey),"subscribedEndpoints"in fe&&t(3,u=fe.subscribedEndpoints),"notificationTypeQueryParamKey"in fe&&t(4,h=fe.notificationTypeQueryParamKey),"addPushSubscriptionEndpoint"in fe&&t(5,m=fe.addPushSubscriptionEndpoint),"deletePushSubscriptionEndpoint"in fe&&t(6,b=fe.deletePushSubscriptionEndpoint),"addFCMPushSubscriptionEndpoint"in fe&&t(7,_=fe.addFCMPushSubscriptionEndpoint),"deleteFCMPushSubscriptionEndpoint"in fe&&t(8,S=fe.deleteFCMPushSubscriptionEndpoint),"addEmailSubscriptionEndpoint"in fe&&t(9,T=fe.addEmailSubscriptionEndpoint),"deleteEmailSubscriptionEndpoint"in fe&&t(10,P=fe.deleteEmailSubscriptionEndpoint),"addSmsSubscriptionEndpoint"in fe&&t(13,F=fe.addSmsSubscriptionEndpoint),"deleteSmsSubscriptionEndpoint"in fe&&t(14,G=fe.deleteSmsSubscriptionEndpoint),"phoneSubscriptionEnabled"in fe&&t(15,$=fe.phoneSubscriptionEnabled)},[r,o,n,u,h,m,b,_,S,T,P,ee,ue,F,G,$]}var cb=class extends pt{constructor(e){super(),yt(this,e,QD,qD,ut,{permissionDailyNotif:0,permissionPartnerActivity:1,vapidPublicKey:2,subscribedEndpoints:3,notificationTypeQueryParamKey:4,addPushSubscriptionEndpoint:5,deletePushSubscriptionEndpoint:6,addFCMPushSubscriptionEndpoint:7,deleteFCMPushSubscriptionEndpoint:8,addEmailSubscriptionEndpoint:9,deleteEmailSubscriptionEndpoint:10,addSmsSubscriptionEndpoint:13,deleteSmsSubscriptionEndpoint:14,phoneSubscriptionEnabled:15})}},H9=cb;var _d={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6],0,0,0,0,0,0,0,[["6[2-467]\\d{3}",[5]],["4\\d{4}",[5]],0,0,0,0,["(?:0[1-9]|[1589]\\d)\\d{4}",[6]]]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[["[78]\\d{5}",[6]],["690\\d{6}|[356]\\d{5}",[6,9]],["180[02]\\d{4}",[8]],["[19]\\d{5}",[6]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0",0,0,0,0,0,[["[2-4679][2-8]\\d{6}",[8]],["5[024-68]\\d{7}",[9]],["400\\d{6}|800\\d{2,9}"],["900[02]\\d{5}",[9]],0,0,["600[25]\\d{5}",[9]],0,0,["700[05]\\d{5}",[9]]]],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0",0,0,0,0,0,[["(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}"],["7\\d{8}"]]],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268",[["268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}"],["268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,["26840[69]\\d{4}"],["26848[01]\\d{4}"]]],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264",[["264(?:292|4(?:6[12]|9[78]))\\d{4}"],["264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,["264724\\d{4}"]]],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0",0,0,0,0,0,[["4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",[8]],["6(?:[78][2-9]|9\\d)\\d{6}",[9]],["800\\d{4}",[7]],["900[1-9]\\d\\d",[6]],["700[2-9]\\d{4}",[8]],0,0,0,0,["808[1-9]\\d\\d",[6]]]],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}"],["(?:33|4[1349]|55|77|88|9[13-9])\\d{6}"],["800\\d{5}"],["90[016]\\d{5}"],0,0,0,0,["60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|9[0-2])\\d{4}"],["80[1-4]\\d{5}"]]],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],0,0,0,0,0,0,[["2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}"],["9[1-59]\\d{7}"]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",0,0,[["3888[013-9]\\d{5}|3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:657|9(?:54|66))|3(?:7(?:55|77)|865))[2-8]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:284|3(?:02|23)|920)|3(?:4(?:46|8[27]|92)|541|878))[2-7]\\d{5}|(?:2(?:(?:26|62)2|320|477|9(?:42|83))|3(?:329|4(?:62|76|89)|564))[2-6]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[235][4-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|[17][2-6]|3[4-6]|[58][3-6])))\\d{6}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",[10]],["93(?:7(?:1[15]|81)[46]|8(?:(?:21|4[16]|69|9[12])[46]|88[013-9]))\\d{5}|9(?:2(?:657|9(?:54|66))|3(?:7(?:55|77)|865))[2-8]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|473|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:284|3(?:02|23)|920)|3(?:4(?:46|8[27]|92)|541|878))[2-7]\\d{5}|9(?:2(?:(?:26|62)2|320|477|9(?:42|83))|3(?:329|4(?:62|76|89)|564))[2-6]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[235][4-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|[17][2-6]|3[4-6]|[58][3-6]))))\\d{6}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|475|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:2(?:57|81)|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|71)|5(?:25|37|4[347]|71)|7(?:18|5[17])))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[03-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[145]|4[13]|5[468]|7[2-5]|8[26])|8(?:2[5-7]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}"],["800\\d{7,8}"],["60[04579]\\d{7}",[10]],0,0,["810\\d{7}",[10]]]],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684",[["6846(?:22|33|44|55|77|88|9[19])\\d{4}"],["684(?:2(?:48|5[2468]|7[26])|7(?:3[13]|70|82))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0",0,0,0,0,0,[["1(?:11\\d|[2-9]\\d{3,11})|(?:316|463|(?:51|66|73)2)\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-8]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}"],["6(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d{4,10}",[7,8,9,10,11,12,13]],["800\\d{6,10}",[9,10,11,12,13]],["(?:8[69][2-68]|9(?:0[01]|3[019]))\\d{6,10}",[9,10,11,12,13]],0,0,0,0,["5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",[5,6,7,8,9,10,11,12,13]],["8(?:10|2[018])\\d{6,10}|828\\d{5}",[8,9,10,11,12,13]]]],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],0,0,0,0,0,0,[["5(?:2\\d|8[1-9])\\d{4}"],["(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}"],["800\\d{4}"],["900\\d{4}"],0,0,0,0,["(?:28\\d|501)\\d{4}"]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",[["18[1-8]\\d{3,6}",[6,7,8,9]],["4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",[6,7,8,9,10]],["800\\d{4,6}",[7,8,9]],["[67]00\\d{5,6}",[8,9]],0,0,["20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}"]],"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:2[12]428|3655[02])\\d{4}|(?:2(?:22[0-79]|63[0-28])|3654)\\d{5}|(?:(?:1[28]|46)\\d|2(?:[014-6]2|[23]3))\\d{6}"],["36554\\d{4}|(?:[16]0|4[04]|5[015]|7[07]|99)\\d{7}"],["88\\d{7}"],["900200\\d{3}"]]],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0",0,0,0,0,0,[["(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",[8]],["6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}"],["8[08]\\d{6}",[8]],["9[0246]\\d{6}",[8]],0,0,["703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}",[8]],0,0,["8[12]\\d{6}",[8]]]],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246",[["246521[0369]\\d{3}|246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}"],["246(?:(?:2(?:[3568]\\d|4[0-57-9])|3(?:5[2-9]|6[0-6])|4(?:46|5\\d)|69[5-7]|8(?:[2-5]\\d|83))\\d|52(?:1[147]|20))\\d{3}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["(?:246976|900[2-9]\\d\\d)\\d{4}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,["246(?:292|367|4(?:1[7-9]|3[01]|4[47-9]|67)|7(?:1[2-9]|2\\d|3[016]|53))\\d{4}"],0,["24631\\d{5}"]]],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0",0,0,0,0,0,[["(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2(?:222|[45]\\d)\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}"],["(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",[10]],["80[03]\\d{7}",[10]],0,0,0,0,0,["96(?:0[469]|1[0-47]|3[389]|43|6[69]|7[78])\\d{6}",[10]]]],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0",0,0,0,0,0,[["80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",[8]],["4[5-9]\\d{7}",[9]],["800[1-9]\\d{4}",[8]],["(?:70(?:2[0-57]|3[04-7]|44|6[4-69]|7[0579])|90\\d\\d)\\d{4}",[8]],0,0,["78(?:0[57]|1[014-8]|2[25]|3[15-8]|48|[56]0|7[06-8]|9\\d)\\d{4}",[8]],0,0,["7879\\d{4}",[8]]]],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]],0,0,0,0,0,0,[["2(?:0(?:49|5[23]|6[5-7]|9[016-9])|4(?:4[569]|5[4-6]|6[5-7]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}"],["(?:0[1-35-7]|5[0-8]|[67]\\d)\\d{6}"]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0",0,0,0,0,0,[["2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",[6,7,8]],["(?:43[07-9]|99[69]\\d)\\d{5}|(?:8[7-9]|98)\\d{7}",[8,9]],["(?:00800\\d\\d|800)\\d{5}",[8,12]],["90\\d{6}",[8]],0,0,0,0,0,["700\\d{5}",[8]]]],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]],0,0,0,0,0,0,[["(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|55|7[7-9]|88)|9[69][69])|7(?:[07]\\d\\d|1(?:11|78)))\\d{4}"],["(?:3(?:[0-79]\\d|8[0-57-9])\\d|6(?:3(?:00|33|6[16])|441|6(?:3[03-9]|[69]\\d|7[0-689])))\\d{4}"],["8[02369]\\d{6}"],["(?:87|9[0-8])\\d{6}"],0,0,0,0,0,["84\\d{6}"]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],0,0,0,0,0,0,[["(?:22|31)\\d{6}"],["(?:29|[67][125-9])\\d{6}"]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]],0,0,0,0,0,0,[["2(?:02|1[037]|2[45]|3[68]|4\\d)\\d{5}"],["(?:4[0-7]|[56]\\d|9[013-9])\\d{6}"],0,0,0,0,["81\\d{6}"],0,["857[58]\\d{4}"]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441",[["441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}"],["441(?:[2378]\\d|5[0-39]|9[02])\\d{5}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],0,0,0,0,0,0,[["22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}"],["(?:22[89]|[78]\\d\\d)\\d{4}"],0,0,0,0,0,0,["5[34]\\d{5}"]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?",0,0,0,[["(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",[8]],["[67]\\d{7}",[8]],["8001[07]\\d{4}",[9]]]],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]",[["(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}"],["(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}"]]],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",0,0,[["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",[10]],["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",[10,11]],["800\\d{6,7}",[9,10]],["300\\d{6}|[59]00\\d{6,7}",[9,10]],0,0,0,0,0,["(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|370))\\d{4}|300\\d{5}",[8,10]]]],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242",[["242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-5]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}"],["242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|3[0-4]|[89]9))\\d{4}"],["242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,["242225\\d{4}"]]],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]],0,0,0,0,0,0,[["(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",[7]],["(?:1[67]|77)\\d{6}",[8]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013]|81)|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[067]))\\d{4}",[7]],["(?:321|7[1-8]\\d)\\d{5}",[8]],["(?:0800|800\\d)\\d{6}",[10]],["90\\d{5}",[7]],0,0,0,0,["79(?:1(?:[01]\\d|2[0-8])|2[0-7]\\d)\\d{3}",[8]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,[["(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",[9]],["(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",[9]],["800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}"],["(?:810|902)\\d{7}",[10]],0,0,0,0,["249\\d{6}",[9]]],"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],0,0,0,0,0,0,[["(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",[7]],["6[0-35-7]\\d{5}",[7]],["0800\\d{7}",[11]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,[["12\\d{7}|[1-6]\\d{6}"],["88\\d{5}|(?:8[0-59]|9[017-9])\\d{7}"]]],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],0,0,0,0,0,0,[["2[12]\\d{6}"],["7[024-7]\\d{6}"],0,["8776\\d{4}"]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],0,0,0,0,0,0,[["222[1-589]\\d{5}"],["026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}"],0,["80[0-2]\\d{6}"]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}"],["7[35-9]\\d{7}"],["800\\d{6}"],["90[016]\\d{6}"],["878\\d{6}"],0,["5[18]\\d{7}"],["74[0248]\\d{6}"],0,["84[0248]\\d{6}"]]],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]],0,0,0,0,0,0,[["2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|2[245]|3[45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}"],["0[157]\\d{8}"]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],0,0,0,0,0,0,[["(?:2\\d|3[13-7]|4[1-5])\\d{3}"],["[578]\\d{4}"]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],0,0,0,0,0,0,[["2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|3(?:2\\d\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-3])|600)|646[59])|80[1-9]\\d\\d|9(?:3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|7[1-9]\\d\\d|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}|(?:22|3[2-5]|[47][1-35]|5[1-3578]|6[13-57]|8[1-9]|9[2458])\\d{7}",[9]],["",[9]],["(?:123|8)00\\d{6}",[9,11]],0,0,0,0,0,["44\\d{7}",[9]],["600\\d{7,8}",[10,11]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]],0,0,0,0,0,0,[["2(?:22|33)\\d{6}",[9]],["(?:24[23]|6[25-9]\\d)\\d{6}",[9]],["88\\d{6,7}"]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,[["(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|21(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))\\d{5}|(?:43[35]|754)\\d{7,8}|8(?:078\\d{7}|51\\d{7,8})|(?:10|(?:2|85)1|43[35]|754)(?:100\\d\\d|95\\d{3,4})|(?:2[02-57-9]|3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[1-9]\\d{6})|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[02-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[1-9]\\d{5})|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",[7,8,9,10,11]],["1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|[59][0-35-9]|6[25-7]|7[0-35-8])\\d{8}",[11]],["(?:(?:10|21)8|8)00\\d{7}",[10,12]],["16[08]\\d{5}",[8]],0,0,0,0,0,["10(?:10\\d{4}|96\\d{3,4})|400\\d{7}|950\\d{7,8}|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",[7,8,9,10,11]]],"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?",0,0,0,[["601055(?:[0-4]\\d|50)\\d\\d|6010(?:[0-4]\\d|5[0-4])\\d{4}|60(?:[124-7][2-9]|8[1-9])\\d{6}",[10]],["333301[0-5]\\d{3}|3333(?:00|2[5-9]|[3-9]\\d)\\d{4}|(?:3(?:24[1-9]|3(?:00|3[0-24-9]))|9101)\\d{6}|3(?:0[0-5]|1\\d|2[0-3]|5[01]|70)\\d{7}",[10]],["1800\\d{7}",[11]],["19(?:0[01]|4[78])\\d{7}",[11]]]],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))",0,0,0,[["210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",[8]],["(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",[8]],["800\\d{7}",[10]],["90[059]\\d{7}",[10]],0,0,0,0,["(?:210[0-6]|4\\d{3}|5100)\\d{4}",[8]]]],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:3[23]|4[89])\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}"],["(?:5\\d|6[2-4])\\d{6}",[8]],["800\\d{7}",[10]],0,0,0,0,0,0,["807\\d{7}",[10]]]],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],0,0,0,0,0,0,[["2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}"],["(?:36|5[1-389]|9\\d)\\d{5}"],["800\\d{4}"],0,0,0,0,0,["(?:3[3-5]|4[356])\\d{5}"]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]",[["9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}"],["953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}"],0,0,0,0,0,["955\\d{5}",[8]],0,["60[0-2]\\d{4}",[7]]]],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],0,0,0,0,0,0,[["2[2-6]\\d{6}"],["9(?:10|[4-79]\\d)\\d{5}"],["800\\d{5}"],["90[09]\\d{5}"],["700\\d{5}"],0,["(?:50|77)\\d{6}"],0,0,["80[1-9]\\d{5}"]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,[["(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}"],["(?:60[1-8]\\d|7(?:0(?:[2-5]\\d|60)|190|[2379]\\d\\d))\\d{5}"],["800\\d{6}"],["9(?:0[05689]|76)\\d{6}"],["70[01]\\d{6}"],0,["9(?:5\\d|7[2-4])\\d{6}"],0,["9[17]0\\d{6}"],["8[134]\\d{7}"]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0",0,0,0,0,0,[["32\\d{9,11}|49[1-6]\\d{10}|322\\d{6}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",[5,6,7,8,9,10,11,12,13,14,15]],["15(?:[0-25-9]\\d\\d|310)\\d{6}|1(?:6[023]|7\\d)\\d{7,8}",[10,11]],["800\\d{7,12}",[10,11,12,13,14,15]],["(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",[10,11]],["700\\d{8}",[11]],0,["18(?:1\\d{5,11}|[2-9]\\d{8})",[8,9,10,11,12,13,14]],["16(?:4\\d{1,10}|[89]\\d{1,11})",[4,5,6,7,8,9,10,11,12,13,14]],0,["180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",[7,8,9,10,11,12,13,14]]]],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],0,0,0,0,0,0,[["2(?:1[2-5]|7[45])\\d{5}"],["77\\d{6}"]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],0,0,0,0,0,0,[["(?:(?:2\\d|9[1-46-9])\\d|3(?:[0-37]\\d|4[013]|5[0-58]|6[01347-9]|8[0-8]|9[0-79])|4(?:[0-25]\\d|[34][02-9]|6[013-579]|7[013579]|8[0-47]|9[0-27])|5(?:[0-36]\\d|4[0146-9]|5[03-57-9]|7[0568]|8[0-358]|9[0-69])|6(?:[013578]\\d|2[0-68]|4[02-8]|6[01689]|9[015689])|7(?:[0-69]\\d|7[03-9]|8[0147])|8(?:[16-9]\\d|2[0-58]))\\d{5}"],["(?:[2-7]\\d|8[126-9]|9[1-46-9])\\d{6}"],["80\\d{6}"],["90\\d{6}"]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767",[["767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}"],["767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9",[["8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}"],["8[024]9[2-9]\\d{6}"],["8(?:00(?:14|[2-9]\\d)|(?:33|44|55|66|77|88)[2-9]\\d)\\d{5}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0",0,0,0,0,0,[["9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[013-689])\\d{6}"],["(?:5(?:4[0-29]|5\\d|6[0-2])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",[9]],["800\\d{6}",[9]],["80[3-689]1\\d{5}",[9]],0,0,0,0,["98[23]\\d{6}",[9]],["80[12]1\\d{5}",[9]]]],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["[2-7][2-7]\\d{6}",[8]],["964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",[9]],["1800\\d{7}|1[78]00\\d{6}",[10,11]],0,0,0,0,0,["[2-7]890\\d{4}",[8]]]],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",[7]],["(?:5\\d{5}|8(?:1(?:0(?:0(?:00|[178]\\d)|[3-9]\\d\\d)|(?:1(?:0[236]|1\\d)|(?:2[0-59]|[3-79]\\d)\\d)\\d)|2(?:0(?:0(?:00|4\\d)|(?:19|[2-7]\\d)\\d)|(?:(?:[124-6]\\d|3[5-9])\\d|7(?:[0-79]\\d|8[13-9])|8(?:[2-6]\\d|7[01]))\\d)|[349]\\d{4}))\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",[7,8]],["800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}"],["(?:40\\d\\d|900)\\d{4}",[7,8]],["70[0-2]\\d{5}",[8]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0",0,0,0,0,0,[["13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2[2-4]|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",[8,9]],["1[0-25]\\d{8}",[10]],["800\\d{7}",[10]],["900\\d{7}",[10]]]],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]",[["528[89]\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}"],["(?:17[1-3]|7\\d\\d)\\d{4}"]]],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],0,0,0,0,0,0,[["96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}"],["(?:590[16]00\\d|9(?:6906(?:09|10)|7390\\d\\d))\\d\\d|(?:6\\d|7[1-48])\\d{7}"],["[89]00\\d{6}"],["80[367]\\d{6}"],["70\\d{7}"],0,["51\\d{7}"],0,0,["90[12]\\d{6}"]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0",0,0,0,0,0,[["11667[01]\\d{3}|(?:11(?:1(?:1[124]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8])|5(?:1[578]|44|5[0-4])|6(?:1[578]|2[69]|39|4[5-7]|5[0-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}"],["700[1-9]\\d{5}|(?:7(?:0[1-9]|1[0-8]|22|77|86|99)|9\\d\\d)\\d{6}"]]],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[3-79]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",[["(?:1[3-79][1-8]|[23568][1-8]\\d|9(?:00|[1-8]\\d))\\d{2,6}",[5,6,7,8,9]],["4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",[6,7,8,9,10]],["800\\d{4,6}",[7,8,9]],["[67]00\\d{5,6}",[8,9]],0,0,["20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}"]],"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,[["603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",[7]],["(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",[7]],["0800\\d{7}",[11]]],"00"],FK:["500","00","[2-7]\\d{4}",[5],0,0,0,0,0,0,0,[["[2-47]\\d{4}"],["[56]\\d{4}"]]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]],0,0,0,0,0,0,[["31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}"],["31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}"]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))",0,0,0,[["(?:20|[34]\\d|8[19])\\d{4}"],["(?:[27][1-9]|5\\d|9[16])\\d{4}"],["80[257-9]\\d{3}"],["90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d"],0,0,0,0,["(?:6[0-36]|88)\\d{4}"]]],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0",0,0,0,0,0,[["(?:26[013-9]|59[1-35-9])\\d{6}|(?:[13]\\d|2[0-57-9]|4[1-9]|5[0-8])\\d{7}"],["(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7[3-9]\\d)\\d{6}"],["80[0-5]\\d{6}"],["836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}"],0,0,["80[6-9]\\d{6}"],0,["9\\d{8}"],["8(?:1[01]|2[0156]|4[02]|84)\\d{6}"]]],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1",0,0,[["[01]1\\d{6}",[8]],["(?:(?:0[2-7]|7[467])\\d|6(?:0[0-4]|10|[256]\\d))\\d{5}|[2-7]\\d{6}"]]],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-2]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473",[["473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-4]|5[579]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}"],["473(?:4(?:0[2-79]|1[04-9]|2[0-5]|49|5[68])|5(?:2[01]|3[3-8])|901)\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0",0,0,0,0,0,[["(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}"],["5(?:(?:(?:0555|1(?:[17]77|555))[5-9]|757(?:7[7-9]|8[01]))\\d|22252[0-4])\\d\\d|(?:5(?:0(?:0(?:0\\d|11|22|33|44|5[05]|77|88|9[09])|111)|1(?:1(?:00|[124]\\d|3[01])|4\\d\\d)|(?:44|68)\\d\\d|5(?:[0157-9]\\d\\d|200)|7(?:[0147-9]\\d\\d|5(?:00|[57]5))|8(?:0(?:[018]\\d|2[0-4])|58[89]|8(?:55|88))|9(?:090|[1-35-9]\\d\\d))|790\\d\\d)\\d{4}|5(?:0(?:0[17]0|505)|1(?:0[01]0|1(?:07|33|51))|2(?:0[02]0|2[25]2)|3(?:0[03]0|3[35]3)|(?:40[04]|900)0|5222)[0-4]\\d{3}"],["800\\d{6}"],0,0,0,0,0,["70[67]\\d{6}"]]],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0",0,0,0,0,0,[["594(?:[02-49]\\d|1[0-5]|5[6-9]|6[0-3]|80)\\d{4}"],["694(?:[0-249]\\d|3[0-8])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:396|76\\d)\\d|476[0-5])\\d{4}"]]],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0",0,0,0,0,0,[["3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",[9]],["(?:2(?:[0346-9]\\d|5[67])|5(?:[03-7]\\d|9[1-9]))\\d{6}",[9]],["800\\d{5}",[8]]]],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]],0,0,0,0,0,0,[["2190[0-2]\\d{3}|2(?:0(?:[02]\\d|3[01])|16[24-9]|2[2-5]\\d)\\d{4}"],["5251[0-4]\\d{3}|(?:5(?:[146-8]\\d\\d|250)|60(?:1[01]|6\\d))\\d{4}"]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]],0,0,0,0,0,0,[["(?:19|3[1-7]|[68][1-9]|70|9\\d)\\d{4}"],["[245]\\d{5}"],["80\\d{4}"],0,0,0,0,0,["3[89]\\d{4}"]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],0,0,0,0,0,0,[["(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8\\d{3})\\d{3}"],["(?:[23679]\\d|5[0-489])\\d{5}"]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],0,0,0,0,0,0,[["3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",[8]],["6[0-356]\\d{7}",[9]],0,0,0,0,0,0,["722\\d{6}",[9]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]],0,0,0,0,0,0,[["33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}"],["(?:222|55\\d)\\d{6}"],["80\\d[1-9]\\d{5}"],["90\\d[1-9]\\d{5}"]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",[10]],["68[57-9]\\d{7}|(?:69|94)\\d{8}",[10]],["800\\d{7,9}"],["90[19]\\d{7}",[10]],["70\\d{8}",[10]],0,["5005000\\d{3}",[10]],0,0,["8(?:0[16]|12|[27]5|50)\\d{7}",[10]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[["[267][2-9]\\d{6}",[8]],["(?:[3-5]\\d\\d|80[0-4])\\d{5}",[8]],["18[01]\\d{8}",[11]],["19\\d{9}",[11]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671",[["671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-46-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],0,0,0,0,0,0,[["443\\d{6}",[9]],["9(?:5\\d|6[569]|77)\\d{6}",[9]],0,0,0,0,0,0,["40\\d{5}",[7]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],0,0,0,0,0,0,[["(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|50[0-6]|77[1-57])\\d{4}"],["(?:510|6\\d\\d|7(?:[01]\\d|2[156]|3[12]|49))\\d{4}"],["(?:289|8(?:00|6[28]|88|99))\\d{4}"],["9008\\d{3}"],0,0,0,0,["515\\d{4}"]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,[["(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-8]|[59]\\d|6[01]))|58(?:0[1-9]|1[2-9]))\\d{4}",[8]],["(?:4(?:44[0-25-9]|6(?:1[0-7]|4[0-57-9]|6[0-4]))|5(?:73[0-6]|95[0-8])|6(?:26[013-8]|66[0-3])|70(?:7[1-8]|8[0-4])|848[0-35-9]|9(?:29[013-9]|39[01]|59[0-4]|899))\\d{4}|(?:4(?:4[0-35-8]|6[02357-9])|5(?:[1-59][0-46-9]|6[0-4689]|7[0-246-9])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|70[129]|84[0-29]|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",[8]],["800\\d{6}",[9]],["900(?:[0-24-9]\\d{7}|3\\d{1,4})",[5,6,7,8,11]],["8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",[8]],0,["30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",[8]],["7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",[8]]],"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],0,0,0,0,0,0,[["2(?:2(?:0[0-59]|1[1-9]|[23]\\d|4[02-6]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[578]|2[3-59]|3[13-9]|4[0-68]|5[1-3589])|5(?:0[2357-9]|1[1-356]|4[03-5]|5\\d|6[014-69]|7[04]|80)|6(?:[056]\\d|17|2[067]|3[047]|4[0-378]|[78][0-8]|9[01])|7(?:0[5-79]|6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",[8]],["[37-9]\\d{7}",[8]],["8002\\d{7}",[11]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0",0,0,0,0,0,[["1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",[8,9]],["9(?:(?:0[1-9]|[12589]\\d)\\d\\d|7(?:[0679]\\d\\d|5(?:[01]\\d|44|55|77|9[5-7])))\\d{4}|98\\d{6}",[8,9]],["80\\d{5,7}",[7,8,9]],["6[01459]\\d{6}|6[01]\\d{4,5}",[6,7,8]],["7[45]\\d{6}",[8]],0,["62\\d{6,7}|72\\d{6}",[8,9]]]],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]],0,0,0,0,0,0,[["2(?:2\\d|5[1-5]|81|9[149])\\d{5}"],["(?:[34]\\d|55)\\d{6}"],["8\\d{7}"],0,0,0,0,0,["9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}"]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06",0,0,0,0,0,[["(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",[8]],["(?:[257]0|3[01])\\d{7}",[9]],["(?:[48]0\\d|680[29])\\d{5}"],["9[01]\\d{6}",[8]],0,0,["38\\d{7}",[9]],0,["21\\d{7}",[9]]]],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0",0,0,0,0,0,[["2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",[7,8,9,10,11]],["8[1-35-9]\\d{7,10}",[9,10,11,12]],["00[17]803\\d{7}|(?:177\\d|800)\\d{5,7}|001803\\d{6}",[8,9,10,11,12,13]],["809\\d{7}",[10]],0,0,["(?:1500|8071\\d{3})\\d{3}",[7,10]],0,0,["804\\d{7}",[10]]]],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}"],["8(?:22|[35-9]\\d)\\d{6}",[9]],["1800\\d{6}",[10]],["15(?:1[2-8]|[2-8]0|9[089])\\d{6}",[10]],["700\\d{6}",[9]],0,["818\\d{6}",[9]],0,["76\\d{7}",[9]],["18[59]0\\d{6}",[10]]]],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0",0,0,0,0,0,[["153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",[8,11,12]],["55410\\d{4}|5(?:(?:[02][02-9]|[149][2-9]|[36]\\d|8[3-7])\\d|5(?:01|2\\d|3[0-3]|4[34]|5[0-25689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",[9]],["1(?:255|80[019]\\d{3})\\d{3}",[7,10]],["1212\\d{4}|1(?:200|9(?:0[0-2]|19))\\d{6}",[8,10]],0,0,["1599\\d{6}",[10]],0,["7(?:38(?:0\\d|5[0-29]|88)|8(?:33|55|77|81)\\d)\\d{4}|7(?:18|2[23]|3[237]|47|6[258]|7\\d|82|9[2-9])\\d{6}",[9]],["1700\\d{6}",[10]]]],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24",[["1624(?:230|[5-8]\\d\\d)\\d{3}"],["76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}"],["808162\\d{4}"],["8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}"],["70\\d{8}"],0,["3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}"],0,["56\\d{8}"]]],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0",0,0,0,0,0,[["2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",[10]],["(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",[10]],["000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))"],["186[12]\\d{9}",[13]],0,0,["140\\d{7}",[10]],0,0,["1860\\d{7}",[11]]]],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]],0,0,0,0,0,0,[["37\\d{5}"],["38\\d{5}"]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",[8,9]],["7[3-9]\\d{8}",[10]]]],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0",0,0,0,0,0,[["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|(?:12\\d|30[0-2])\\d|2(?:121|[2689]0\\d)|4(?:111|40\\d))\\d{4}",[6,7,10]],["9(?:(?:0(?:[0-35]\\d|4[4-6])|(?:[13]\\d|2[0-3])\\d)\\d|9(?:[0-46]\\d\\d|5[15]0|8(?:[12]\\d|88)|9(?:0[0-3]|[19]\\d|21|69|77|8[7-9])))\\d{5}",[10]],0,0,0,0,["96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",[4,5]]]],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-24589]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",[7]],["(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[026-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[238]))\\d{4}"],["80[0-8]\\d{4}",[7]],["90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",[7]],0,0,["809\\d{4}",[7]],0,["49[0-24-79]\\d{4}",[7]]],"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876",[["8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[0235-9]|[23]\\d|40|5[06]|6[2-589]|7[0-25-9]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}"],["(?:658295|876(?:2(?:0[1-9]|[13-9]\\d|2[013-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",[8]],["7(?:[78][0-25-9]|9\\d)\\d{6}",[9]],["80\\d{6}",[8]],["9\\d{7}",[8]],["70\\d{7}",[9]],0,["8(?:10|8\\d)\\d{5}",[8]],["74(?:66|77)\\d{5}",[9]],0,["85\\d{6}",[8]]]],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1",0,0,[["(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",[9]],["[7-9]0[1-9]\\d{7}",[10]],["00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}"],["990\\d{6}",[9]],["60\\d{7}",[9]],0,["570\\d{6}",[9]],["20\\d{8}",[10]],["50[1-9]\\d{7}",[10]]]],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,[["(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",[7,8,9]],["(?:1(?:0[0-8]|1[0-5]|2[014]|30)|7\\d\\d)\\d{6}",[9]],["800[02-8]\\d{5,6}",[9,10]],["900[02-9]\\d{5}",[9]]]],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",[9]],["312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|600|7(?:[07]\\d|55)|88[08]|9(?:12|9[05-9]))\\d{6}",[9]],["800\\d{6,7}"]]],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",[8,9]],["(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",[8,9]],["1800(?:1\\d|2[019])\\d{4}",[10]],["1900(?:1\\d|2[09])\\d{4}",[10]]]],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0",0,0,0,0,0,[["(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}"],["(?:6200[01]|7(?:310[1-9]|5(?:02[03-9]|12[0-47-9]|22[0-7]|[34](?:0[1-9]|8[02-9])|50[1-9])))\\d{3}|(?:63\\d\\d|7(?:(?:[0146-9]\\d|2[0-689])\\d|3(?:[02-9]\\d|1[1-9])|5(?:[0-2][013-9]|[34][1-79]|5[1-9]|[6-9]\\d)))\\d{4}",[8]],0,0,0,0,0,0,["30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",[8]]]],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],0,0,0,0,0,0,[["7[4-7]\\d{5}"],["[34]\\d{6}"],0,["8\\d{6}"]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869",[["869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}"],["869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}"],["19[1-3]\\d{7}",[10]]]],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?",0,0,0,[["(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",[5,6,8,9,10]],["1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[0-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",[9,10]],["00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|80)\\d{7}",[9,11,12,13,14]],["60[2-9]\\d{6}",[9]],["50\\d{8,9}",[10,11]],0,["1(?:5(?:22|33|44|66|77|88|99)|6(?:[07]0|44|6[0168]|88)|8(?:00|33|55|77|99))\\d{4}",[8]],["15\\d{7,8}",[9,10]],["70\\d{8}",[10]]]],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]],0,0,0,0,0,0,[["2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",[8]],["(?:41\\d\\d|5(?:(?:[05]\\d|1[0-7]|6[56])\\d|2(?:22|5[25])|7(?:55|77)|88[58])|6(?:(?:0[034679]|5[015-9]|6\\d)\\d|1(?:00|11|6[16])|2[26]2|3[36]3|4[46]4|7(?:0[013-9]|[67]\\d)|8[68]8|9(?:[069]\\d|3[039]))|9(?:(?:[04679]\\d|8[057-9])\\d|1(?:1[01]|99)|2(?:00|2\\d)|3(?:00|3[03])|5(?:00|5\\d)))\\d{4}",[8]],["18\\d{5}",[7]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345",[["345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|[48]8)|9(?:14|4[035-9]))\\d{4}"],["345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|82[56]|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["(?:345976|900[2-9]\\d\\d)\\d{4}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,["345849\\d{4}"]]],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",[["(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9]|97)|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]|59))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",[10]],["7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}",[10]],["8(?:00|108\\d{3})\\d{7}"],["809\\d{7}",[10]],["808\\d{7}",[10]],0,0,0,["751\\d{7}",[10]]],"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,0,0,0,0,[["(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",[8]],["2088\\d{6}|(?:20[23579]|302)\\d{7}",[10]],0,0,0,0,["30[013-9]\\d{6}",[9]]]],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0",0,0,0,0,0,[["7(?:62|8[0-7]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}"],["793(?:[01]\\d|2[0-4])\\d{3}|(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[89]|9[12]))\\d{5}"],0,["9[01]\\d{6}",[8]],0,0,0,0,0,["80\\d{6}",[8]]]],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758",[["758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}"],["758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0",0,0,0,[["(?:2(?:01|1[27]|2[02]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",[7]],["(?:6(?:(?:4[5-9]|5[0-469])\\d|6(?:[024-6]\\d|[17]0|3[7-9]))\\d|7(?:[37-9]\\d|42|56))\\d{4}"],["8002[28]\\d\\d|80(?:05\\d|9)\\d{4}"],["90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",[7]],0,0,["870(?:28|87)\\d\\d",[7]]]],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0",0,0,0,0,0,[["(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}"],["7(?:[0-25-8]\\d|4[0-4])\\d{6}"],0,0,0,0,["1973\\d{5}"]]],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0",0,0,0,0,0,[["2\\d{7}",[8]],["(?:(?:(?:22|33)0|555|(?:77|88)\\d)\\d|4(?:240|[67]))\\d{5}|[56]\\d{6}",[7,9]],0,["332(?:02|[34]\\d)\\d{4}",[9]]]],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],0,0,0,0,0,0,[["2\\d{7}"],["[56]\\d{7}"],["800[1256]\\d{4}"]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]",0,0,0,[["(?:3[1478]|4[124-6]|52)\\d{6}"],["6\\d{7}"],["80[02]\\d{5}"],["9(?:0[0239]|10)\\d{5}"],["70[05]\\d{5}"],0,["70[67]\\d{5}"],0,["[89]01\\d{5}"],["808\\d{5}"]]],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",0,0,0,[["(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}"],["6(?:[269][18]|5[1568]|7[189]|81)\\d{6}",[9]],["800\\d{5}",[8]],["90[015]\\d{5}",[8]],0,0,0,0,["20(?:1\\d{5}|[2-689]\\d{1,7})",[4,5,6,7,8,9,10]],["801\\d{5}",[8]]]],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]],0,0,0,0,0,0,[["6\\d{7}"],["23(?:23[0-57-9]|33[0238])\\d{3}|2(?:[0-24-9]\\d\\d|3(?:0[07]|[14-9]\\d|2[024-9]|3[0-24-9]))\\d{4}"],["80\\d{6}"],["90\\d{6}"],0,0,0,0,0,["81\\d{6}"]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}"],["9[1-6]\\d{7}"]]],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0",0,0,0,0,0,[["(?:870|9[2-47-9]\\d)\\d{5}",[8]],["4(?:[469]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}"],["(?:800|90\\d)\\d{5}",[8]]]],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}"],["562\\d{5}|(?:6\\d|7[16-9])\\d{6}"],["800\\d{5}"],["90[056]\\d{5}"],0,0,["803\\d{5}"],0,["3[08]\\d{6}"],["808\\d{5}"]]],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",[8]],["6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",[8]],["80(?:[0-2578]|9\\d)\\d{5}"],["9(?:4[1568]|5[178])\\d{5}",[8]],0,0,["77[1-9]\\d{5}",[8]],0,["78[1-49]\\d{5}",[8]]]],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1",0,0,[["2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[35]|8[268]|9[245])\\d{5}"],["3[2-47-9]\\d{7}"],0,0,0,0,0,0,["22\\d{7}"]]],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1",0,0,0,0,0,[["(?:247|528|625)\\d{4}"],["(?:(?:23|54)5|329|45[35-8])\\d{4}"],0,0,0,0,0,0,["635\\d{4}"]]],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0",0,0,0,0,0,[["(?:(?:2(?:62|77)0|3444)\\d|4[56]440)\\d{3}|(?:34|4[357])700\\d{3}|(?:2(?:[0-3]\\d|5[0-578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}"],["7(?:3555|(?:474|9[019]7)7)\\d{3}|7(?:[0-25-8]\\d\\d|3(?:[1-48]\\d|6[01]|7[01578])|4(?:2\\d|60|7[01578])|9(?:[2-4]\\d|5[01]|7[015]))\\d{4}"],["800\\d{5}"],["5\\d{7}"],0,0,0,0,0,["8(?:0[1-9]|[1-9]\\d)\\d{5}"]]],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],0,0,0,0,0,0,[["2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-39]))\\d{5}"],["2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[01]|[679]\\d|8[2-49])\\d{6}"],["80\\d{6}"]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:(?:2\\d|3[56]|[89][0-6])\\d|4(?:2[29]|62|7[0-2]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|[26]2|7[0-2]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[013])|3(?:20\\d|4(?:70|83)|56)|420\\d|5470)|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|2472|3(?:20\\d|470)|4(?:2[04]\\d|472)|7(?:(?:3\\d|8[01459])\\d|4[67]0)))\\d{4}|5(?:2(?:2\\d{5,6}|47[02]\\d{4})|(?:3472|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[01])|8(?:20\\d|47[02])|9(?:20\\d|470))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:(?:2\\d|51)\\d|4(?:[1-35-9]\\d|4[0-57-9]))|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|[35]2\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",[6,7,8,9]],["(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",[7,8,9,10]],["80080(?:0[1-9]|2\\d)\\d{3}",[10]],0,0,0,0,0,["1333\\d{4}|[12]468\\d{4}",[8]]]],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0",0,0,0,0,0,[["[12]2[1-3]\\d{5,6}|(?:(?:[12](?:1|27)|5[368])\\d\\d|7(?:0(?:[0-5]\\d|7[078]|80)|128))\\d{4}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}"],["(?:83[01]|92[039])\\d{5}|(?:5[05]|6[069]|8[015689]|9[013-9])\\d{6}",[8]],0,0,0,0,0,0,["712[0-79]\\d{4}|7(?:1[013-9]|[25-9]\\d)\\d{5}",[8]]]],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]],0,0,0,0,0,0,[["(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",[8]],["6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",[8]],["0800\\d{3}",[7]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670",[["670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["596(?:[03-7]\\d|1[05]|2[7-9]|8[0-39]|9[04-9])\\d{4}"],["69(?:6(?:[0-46-9]\\d|5[0-6])|727)\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:397[0-3]|477[0-5]|76(?:6\\d|7[0-367]))\\d{4}"]]],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],0,0,0,0,0,0,[["(?:25[08]|35\\d|45[1-7])\\d{5}"],["[2-4][0-46-9]\\d{6}"],["800\\d{5}"]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664",[["6644(?:1[0-3]|91)\\d{4}"],["664(?:3(?:49|9[1-6])|49[2-6])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],0,0,0,0,0,0,[["20(?:3[1-4]|6[059])\\d{4}|2(?:0[19]|[1-357]\\d|60)\\d{5}"],["(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}"],["800(?:02|[3467]\\d)\\d{3}"],["5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}"],0,0,["501\\d{5}"],["7117\\d{4}"],["3550\\d{4}"]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,[["(?:2(?:[0346-8]\\d|1[0-7])|4(?:[013568]\\d|2[4-8])|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",[7,8]],["5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|(?:5(?:2[5-9]|4[3-689]|[57]\\d|8[0-689]|9[0-8])|7(?:0[0-3]|3[013]))\\d{5}",[8]],["802\\d{7}|80[0-2]\\d{4}",[7,10]],["30\\d{5}",[7]],0,0,0,0,["3(?:20|9\\d)\\d{4}",[7]]],"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,[["(?:3(?:0[0-3]|3[0-59])|6(?:[58][024689]|6[024-68]|7[02468]))\\d{4}",[7]],["(?:46[46]|[79]\\d\\d)\\d{4}",[7]],["800\\d{7}",[10]],["900\\d{7}",[10]],0,0,["4(?:0[01]|50)\\d{4}",[7]]],"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:1[2-9]|2[12]\\d\\d)\\d{5}"],["111\\d{6}|(?:31|77|[89][89])\\d{7}",[9]]]],MX:["52","0[09]","1(?:(?:22|44|7[27]|87|9[69])[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-689]|8[1-69]|9[1-578])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,[["657[12]\\d{6}|(?:2(?:0[01]|2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}",[10]],["657[12]\\d{6}|(?:1(?:2(?:2[1-9]|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[24-7][1-9]|3[1-8]|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1-467][1-9]|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[1-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69][1-9]|7[12]|8[1-8]))|2(?:2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[25-7][1-9]|3[1-8]|4\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-3689]|6[1-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}"],["8(?:00|88)\\d{7}",[10]],["900\\d{7}",[10]],["500\\d{7}",[10]],0,0,0,0,["300\\d{7}",[10]]],"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0",0,0,0,0,0,[["(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",[8,9]],["1(?:1888[689]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0-4]\\d|5[0-7]))|(?:[269]\\d|[37][1-9]|4[235-9])\\d|5(?:31|9\\d\\d)|8(?:1[23]|[236]\\d|4[06]|5(?:46|[7-9])|7[016-9]|8[01]|9[0-8]))\\d{5}",[9,10]],["1[378]00\\d{6}",[10]],["1600\\d{6}",[10]],0,0,0,0,["15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",[10]]]],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",[8]],["8[2-79]\\d{7}",[9]],["800\\d{6}",[9]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0",0,0,0,0,0,[["64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}"],["(?:60|8[1245])\\d{7}",[9]],["80\\d{7}",[9]],["8701\\d{5}",[9]],0,0,0,0,["8(?:3\\d\\d|86)\\d{5}"]]],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],0,0,0,0,0,0,[["(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}"],["(?:5[0-4]|[79]\\d|8[0-79])\\d{4}"],["050\\d{3}"],["36\\d{4}"]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[047]"]]],0,0,0,0,0,0,[["2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}"],["(?:23|7[047]|[89]\\d)\\d{6}"],["08\\d{6}"],["09\\d{6}"]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1",0,0,[["(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}"],["(?:14|3[58])\\d{4}"]]],NG:["234","009","2[0-24-9]\\d{8}|[78]\\d{10,13}|[7-9]\\d{9}|[1-9]\\d{7}|[124-7]\\d{6}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-6]|7(?:0[0-689]|[1-79])|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0",0,0,0,0,0,[["20(?:[1259]\\d|3[013-9]|4[1-8]|6[024-689]|7[1-79]|8[2-9])\\d{6}|(?:(?:[1-356]\\d|4[02-8]|8[2-9])\\d|9(?:0[3-9]|[1-9]\\d))\\d{5}|7(?:0(?:[013-689]\\d|2[0-24-9])\\d{3,4}|[1-79]\\d{6})|(?:[12]\\d|4[147]|5[14579]|6[1578]|7[1-3578])\\d{5}",[7,8,10]],["(?:702[0-24-9]|819[01])\\d{6}|(?:7(?:0[13-9]|[12]\\d)|8(?:0[1-9]|1[0-8])|9(?:0[1-9]|1[1-6]))\\d{7}",[10]],["800\\d{7,11}",[10,11,12,13,14]],0,0,0,["700\\d{7,11}",[10,11,12,13,14]]]],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],0,0,0,0,0,0,[["2\\d{7}"],["(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}"],["1800\\d{4}"]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",[9]],["(?:6[1-58]|970\\d)\\d{7}",[9,11]],["800\\d{4,7}",[7,8,9,10]],["90[069]\\d{4,7}",[7,8,9,10]],0,0,["140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",[5,6,9]],["66\\d{7}",[9]],["(?:85|91)\\d{7}",[9]]]],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]",[["(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",[8]],["(?:4[015-8]|9\\d)\\d{6}",[8]],["80[01]\\d{5}",[8]],["82[09]\\d{5}",[8]],["880\\d{5}",[8]],0,["(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}"],0,["85[0-5]\\d{5}",[8]],["810(?:0[0-6]|[2-8]\\d)\\d{3}",[8]]]],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0",0,0,0,0,0,[["(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",[8]],["9(?:00|6[0-3]|7[024-6]|8[0-24-68])\\d{7}",[10]],["1(?:66001|800\\d\\d)\\d{5}",[11]]]],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]],0,0,0,0,0,0,[["444\\d{4}"],["(?:55[3-9]|666|8\\d\\d)\\d{4}"]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]],0,0,0,0,0,0,[["[47]\\d{3}",[4]],["(?:[56]|888[1-9])\\d{3}"]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,[["24099\\d{3}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",[8]],["2(?:[0-27-9]\\d|6)\\d{6,7}|2(?:1\\d|75)\\d{5}",[8,9,10]],["508\\d{6,7}|80\\d{6,8}",[8,9,10]],["(?:1[13-57-9]\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",[7,8,9,10]],["70\\d{7}",[9]],0,["8(?:1[16-9]|22|3\\d|4[045]|5[459]|6[235-9]|7[0-3579]|90)\\d{2,7}"]],"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]],0,0,0,0,0,0,[["2[1-6]\\d{6}",[8]],["(?:1505|90[1-9]\\d)\\d{4}|(?:7[126-9]|9[1-9])\\d{6}",[8]],["8007\\d{4,5}|(?:500|800[05])\\d{4}"],["900\\d{5}",[8]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["(?:1(?:0\\d|1[479]|2[37]|3[0137]|4[17]|5[05]|6[058]|7[0167]|8[2358]|9[1389])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[02-9])|3(?:[089]\\d|1[0-7]|2[0-5]|33|4[0-79]|5[0-35]|6[068]|7[0-8])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[0156]|7[0-24-9]|8[5-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",[7]],["(?:1[16]1|21[89]|6\\d{3}|8(?:1[01]|7[23]))\\d{4}",[7,8]],["800\\d{4,5}|(?:00800|800\\d)\\d{6}"],["(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",[7]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,[["(?:(?:4[34]|5[14])[0-8]\\d|7(?:173|3[0-8]\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",[8]],["9\\d{8}",[9]],["800\\d{5}",[8]],["805\\d{5}",[8]],["80[24]\\d{5}",[8]],0,0,0,0,["801\\d{5}",[8]]],"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],0,0,0,0,0,0,[["4(?:0[4-689]|9[4-68])\\d{5}",[8]],["8[7-9]\\d{6}",[8]],["80[0-5]\\d{6}",[9]],0,0,0,["44\\d{4}",[6]],0,["499\\d{5}",[8]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,[["(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}",[7]],["(?:7\\d|8[1-38])\\d{6}",[8]],["180\\d{4}",[7]],0,0,0,0,["27[01]\\d{4}",[7]],["2(?:0[0-57]|7[568])\\d{4}",[7]]],"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0",0,0,0,0,0,[["(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",[6,8,9,10]],["(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[235-7]\\d|4[2-9]|8[135-9]|9[1-9]))\\d{7}",[10]],["1800\\d{7,9}",[11,12,13]]]],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0",0,0,0,0,0,[["(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",[9,10]],["3(?:[0-247]\\d|3[0-79]|55|64)\\d{7}",[10]],["800\\d{5}(?:\\d{3})?",[8,11]],["900\\d{5}",[8]],["122\\d{6}",[9]],0,["(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",[11,12]]]],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]],0,0,0,0,0,0,[["47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",[7,9]],["21(?:1[013-5]|2\\d)\\d{5}|(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",[9]],["800\\d{6,7}",[9,10]],["70[01346-8]\\d{6}",[9]],0,0,["804\\d{6}",[9]],["64\\d{4,7}",[6,7,8,9]],["39\\d{7}",[9]],["801\\d{6}",[9]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:4[1-35-7]|5[01])\\d{4}",[6]],["(?:4[02-4]|5[056]|708[45][0-5])\\d{4}"],["80[0-5]\\d{6}",[9]]]],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939",[["(?:787|939)[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",[8]],["5[69]\\d{7}",[9]],["1800\\d{6}",[10]],0,0,0,0,0,0,["1700\\d{6}",[10]]]],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]],0,0,0,0,0,0,[["2(?:[12]\\d|3[1-689]|4[1-59]|[57][1-9]|6[1-35689]|8[1-69]|9[1256])\\d{6}"],["6(?:[06]92(?:30|9\\d)|[35]92(?:3[034]|9\\d))\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}"],["80[02]\\d{6}"],["(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}"],["884[0-4689]\\d{5}"],0,["70(?:38[01]|596|(?:7\\d|8[17])\\d)\\d{4}"],["6(?:222\\d|8988)\\d{4}"],["30\\d{7}"],["80(?:8\\d|9[1579])\\d{5}"]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],0,0,0,0,0,0,[["(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}"],["(?:(?:46|83)[0-5]|6[2-4689]0)\\d{4}|(?:45|77|88)\\d{5}"]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,[["(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",[7,8,9]],["9(?:51|6[129]|7[1-6]|8[1-7]|9[1-5])\\d{6}",[9]],["9800\\d{5,7}",[9,10,11]],0,0,0,["[2-9]0\\d{4,7}",[6,7,8,9]],0,["8700[0-4]\\d{4}",[9]]]],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]],0,0,0,0,0,0,[["4(?:1111|2022)\\d{3}|4(?:[04]\\d\\d|14[0-6]|999)\\d{4}",[8]],["[35-7]\\d{7}",[8]],["800\\d{4}|(?:0080[01]|800)\\d{6}",[7,9,11]],0,0,0,0,["2[16]\\d{5}",[7]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[27]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,[["[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d"],["7020\\d{5}|(?:6(?:2\\d|40)|7(?:0[013-9]|1[0-3]|[2-7]\\d|8[03-8]|9[0-39]))\\d{6}",[9]],["800\\d{6}",[9]],["90[0136]\\d{6}",[9]],0,0,["(?:37\\d|80[578])\\d{6}",[9]],0,0,["801\\d{6}",[9]]],0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0",0,0,0,0,0,[["(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",[7,8,9,10,11,12]],["6(?:[0-689]|7\\d)\\d{6,7}",[8,9,10]],["800\\d{3,9}"],["(?:78\\d|90[0169])\\d{3,7}",[6,7,8,9,10]],0,0,["7[06]\\d{4,10}"]]],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",[["(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15]|6[1-35-79]|7[1-37-9]))\\d{7}",[10]],["9\\d{9}",[10]],["8(?:0[04]|108\\d{3})\\d{7}"],["80[39]\\d{7}",[10]],["808\\d{7}",[10]]],"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0",0,0,0,0,0,[["(?:06|2[23568]\\d)\\d{6}"],["7[237-9]\\d{7}",[9]],["800\\d{6}",[9]],["900\\d{6}",[9]]]],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0",0,0,0,0,0,[["1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",[9]],["579[01]\\d{5}|5(?:[013-689]\\d|7[0-8])\\d{6}",[9]],["800\\d{7}",[10]],["925\\d{6}",[9]],0,0,["811\\d{7}",[10]],0,0,["920\\d{6}",[9]]]],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]],0,0,0,0,0,0,[["(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",[5]],["48\\d{3}|(?:(?:7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}"],["1[38]\\d{3}",[5]],0,0,0,0,0,["5[12]\\d{3}",[5]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,[["4[2-46]\\d{5}"],["2[125-8]\\d{5}"],["800[08]\\d{3}"],0,0,0,0,0,["971\\d{4}|(?:64|95)\\d{5}"]],"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0",0,0,0,0,0,[["1(?:5\\d|8[35-7])\\d{6}"],["(?:1[0-2]|9[0-3569])\\d{7}"]]],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0",0,0,0,0,0,[["(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",[7,8,9]],["7[02369]\\d{7}",[9]],["20\\d{4,7}",[6,7,8,9]],["649\\d{6}|99[1-59]\\d{4}(?:\\d{3})?|9(?:00|39|44)[1-8]\\d{3,6}",[7,8,9,10]],["75[1-8]\\d{6}",[9]],0,["10[1-8]\\d{6}",[9]],["74[02-9]\\d{6}",[9]],0,["77[0-7]\\d{6}",[9]]]],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[["662[0-24-9]\\d{4}|6(?:[0-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",[8]],["8(?:09|95)[0-2]\\d{4}|(?:8(?:0[1-8]|[1-8]\\d|9[0-4])|9[0-8]\\d)\\d{5}",[8]],["(?:18|8)00\\d{7}",[10,11]],["1900\\d{7}",[11]],0,0,["7000\\d{7}",[11]],0,["(?:3[12]\\d|666)\\d{5}",[8]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]",[["2(?:[0-57-9]\\d|6[4-9])\\d\\d"],["[56]\\d{4}",[5]],0,0,0,0,0,0,["262\\d\\d",[5]]]],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,[["(?:[1-357][2-8]|4[24-8])\\d{6}",[8]],["65(?:[178]\\d|5[56]|6[01])\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",[8]],["80\\d{4,6}",[6,7,8]],["89[1-3]\\d{2,5}|90\\d{4,6}"],0,0,0,0,["(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-589])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",[8]]],"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79",[["79\\d{6}",[8]],["(?:4[015-8]|9\\d)\\d{6}",[8]],["80[01]\\d{5}",[8]],["82[09]\\d{5}",[8]],["880\\d{5}",[8]],0,["(?:0[2-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}"],0,["85[0-5]\\d{5}",[8]],["810(?:0[0-6]|[2-8]\\d)\\d{3}",[8]]]],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d"],["909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",[9]],["800\\d{6}",[9]],["9(?:00|[78]\\d)\\d{6}",[9]],0,0,["96\\d{7}",[9]],["9090\\d{3}",[7]],["6(?:02|5[0-4]|9[0-6])\\d{6}",[9]],["8[5-9]\\d{7}",[9]]]],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0",0,0,0,0,0,[["22[2-4][2-9]\\d{4}"],["(?:25|3[0-5]|66|7[2-9]|8[08]|9[09])\\d{6}"]]],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1",0,0,[["0549(?:8[0157-9]|9\\d)\\d{4}",[10]],["6[16]\\d{6}",[8]],0,["7[178]\\d{6}",[8]],0,0,0,0,["5[158]\\d{6}",[8]]]],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],0,0,0,0,0,0,[["3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}"],["7(?:(?:[06-8]\\d|21|90)\\d|5(?:01|[19]0|25|[38]3|[4-7]\\d))\\d{5}"],["800\\d{6}"],["88[4689]\\d{6}"],0,0,0,0,["(?:3(?:392|9[01]\\d)\\d|93(?:3[13]0|929))\\d{4}"],["81[02468]\\d{6}"]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0",0,0,0,0,0,[["(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",[6,7]],["(?:(?:15|(?:3[59]|4[89]|6\\d|7[79]|8[08])\\d|9(?:0\\d|[2-9]))\\d|2(?:4\\d|8))\\d{5}|(?:[67]\\d\\d|904)\\d{5}",[7,8,9]]]],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]],0,0,0,0,0,0,[["(?:2[1-3]|3[0-7]|(?:4|68)\\d|5[2-58])\\d{4}"],["(?:7[124-7]|8[124-9])\\d{5}",[7]],0,0,0,0,0,0,["56\\d{4}",[6]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0",0,0,0,0,0,[["1[89]\\d{7}"],["(?:12|9[1257-9])\\d{7}"]]],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]],0,0,0,0,0,0,[["22\\d{5}"],["900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}"]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,[["2(?:79(?:0[0347-9]|[1-9]\\d)|89(?:0[024589]|[1-9]\\d))\\d{3}|2(?:[1-69]\\d|[78][0-8])\\d{5}",[8]],["[67]\\d{7}",[8]],["800\\d{8}|80[01]\\d{4}",[7,11]],["900\\d{4}(?:\\d{4})?",[7,11]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721",[["7215(?:4[2-8]|8[239]|9[056])\\d{4}"],["7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0",0,0,0,0,0,[["21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}"],["9[1-689]\\d{7}",[9]]]],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]],0,0,0,0,0,0,[["[23][2-5]\\d{6}",[8]],["7[6-9]\\d{6}",[8]],["0800\\d{4}",[8]],["900\\d{6}",[9]],0,0,0,0,["70\\d{6}",[8]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8",[["8\\d{3}"]]],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649",[["649(?:266|712|9(?:4\\d|50))\\d{4}"],["649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["649(?:71[01]|966)\\d{4}"]]],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,[["22(?:[37-9]0|5[0-5]|6[89])\\d{4}"],["(?:6[0235689]|77|9\\d)\\d{6}"]],"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],0,0,0,0,0,0,[["2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}"],["(?:7[019]|9[0-36-9])\\d{6}"]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0",0,0,0,0,0,[["(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",[8]],["67(?:1[0-8]|2[4-7])\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}",[9]],["(?:001800\\d|1800)\\d{6}",[10,13]],["1900\\d{6}",[10]],0,0,0,0,["6[08]\\d{7}",[9]]]],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,[["(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}"],["(?:4(?:1[18]|4[02-479])|81[1-9])\\d{6}|(?:0[0-57-9]|1[017]|2[02]|[34]0|5[05]|7[0178]|8[078]|9\\d)\\d{7}"]],"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7],0,0,0,0,0,0,0,[["(?:2[2-4]|[34]\\d)\\d{2,5}"],["7[2-4]\\d{2,5}"]]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]],0,0,0,0,0,0,[["(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",[7]],["7[2-8]\\d{6}",[8]],["80\\d{5}",[7]],["90\\d{5}",[7]],["70\\d{5}",[7]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,[["(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}"],["(?:6\\d|71)\\d{6}"]],"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],0,0,0,0,0,0,[["81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}"],["3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-8])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}"],["8010\\d{4}"],["88\\d{6}"],0,0,0,0,0,["8[12]10\\d{4}"]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]],0,0,0,0,0,0,[["(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",[5]],["(?:5(?:4[0-5]|5[4-6])|6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",[7]],["0800\\d{3}",[7]],0,0,0,0,0,["55[0-37-9]\\d{4}",[7]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0",0,0,0,0,0,[["(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",[10]],["561(?:011|61\\d)\\d{4}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",[10]],["8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})",[10,12,13]],["(?:8[89]8|900)\\d{7}",[10]],["592(?:21[12]|461)\\d{4}",[10]],0,["444\\d{4}",[7]],["512\\d{7}",[10]],["850\\d{7}",[10]]]],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868",[["868(?:2(?:01|1[5-9]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}"],["868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]],0,0,0,0,0,0,[["2[02-9]\\d{3}",[5]],["(?:7[01]\\d|90)\\d{4}",[6,7]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",[8,9]],["(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",[9]],["80[0-79]\\d{6}|800\\d{5}",[8,9]],["20(?:[013-9]\\d\\d|2)\\d{4}",[7,9]],["99\\d{7}",[9]],0,["50[0-46-9]\\d{6}",[9]],0,["7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",[10,11]]],0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0",0,0,0,0,0,[["2[2-8]\\d{7}"],["(?:6[125-9]|7[13-9])\\d{7}"],["80[08]\\d{6}"],["90\\d{7}"],0,0,0,0,["41\\d{7}"],["8(?:40|6[01])\\d{6}"]]],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,[["(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",[9]],["(?:39|50|6[36-8]|7[1-357]|9[1-9])\\d{7}",[9]],["800[1-8]\\d{5,6}"],["900[239]\\d{5,6}"],0,0,0,0,["89[1-579]\\d{6}",[9]]],"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0",0,0,0,0,0,[["20(?:(?:240|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[017]\\d|2[5-9]|3[1-4]|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}"],["72(?:[48]0|6[01])\\d{5}|7(?:[015-8]\\d|20|36|4[0-5]|9[89])\\d{6}"],["800[1-3]\\d{5}"],["90[1-3]\\d{6}"]]],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,[["(?:1(?:770|9(?:20|87))|(?:2\\d|4[2-7])\\d\\d)\\d{4}",[8]],["9[1-9]\\d{6}",[8]],["0004\\d{2,9}|(?:405|80[05])\\d{4}"],["90[0-8]\\d{4}",[7]]],"00"," int. "],UZ:["998","810","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"],"8 $1"]],"8",0,0,0,0,0,[["(?:55\\d\\d|6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|6\\d\\d|7(?:[23]\\d|7[69])|9(?:22|4[1-8]|6[135]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|(?:1[12]|[68]\\d)\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|9(?:22|5[1-9])))\\d{5}"],["(?:(?:[25]0|33|88|9[0-57-9])\\d{3}|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079]))|9(?:2(?:1[1267]|3[01]|5\\d|7[0-4])|(?:5[67]|7\\d)\\d|6(?:2[0-26]|8\\d)))|7(?:[07]\\d{3}|1(?:13[01]|6(?:0[47]|1[67]|66)|71[3-69]|98\\d)|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}"]],"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698",[["06698\\d{1,6}"],["3[1-9]\\d{8}|3[2-9]\\d{7}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784",[["784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}"],["784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["78451[0-2]\\d{4}"]]],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}"],["4(?:1[24-8]|2[46])\\d{7}"],["800\\d{7}"],["90[01]\\d{7}"],0,0,["501\\d{7}"]]],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284",[["284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}"],["284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|9[69])|5(?:4[0-7]|68|9[69]))\\d{4}"],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340",[["340(?:2(?:0[0-368]|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0",0,0,0,0,0,[["2(?:0[3-9]|1[0-689]|2[0-25-9]|[38][2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|9[0-4679])\\d{7}",[10]],["(?:5(?:2[238]|59)|89[6-9]|99[013-9])\\d{6}|(?:3\\d|5[1689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",[9]],["1800\\d{4,6}|12(?:0[13]|28)\\d{4}",[8,9,10]],["1900\\d{4,6}",[8,9,10]],0,0,["(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",[7,8]],0,["672\\d{6}",[9]]]],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]],0,0,0,0,0,0,[["(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",[5]],["(?:[58]\\d|7[013-7])\\d{5}",[7]],["81[18]\\d\\d",[5]],0,0,0,["(?:3[03]|900\\d)\\d{3}"],0,["9(?:0[1-9]|1[01])\\d{4}",[7]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],0,0,0,0,0,0,[["72\\d{4}",[6]],["(?:72|8[23])\\d{4}",[6]],["80[0-5]\\d{6}",[9]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]],0,0,0,0,0,0,[["6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",[5,6]],["(?:7[1-35-7]|8(?:[3-7]|9\\d{3}))\\d{5}",[7,10]],["800\\d{3}",[6]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0",0,0,0,0,0,[["38\\d{6,10}|(?:2[89]|39)(?:0\\d{5,6}|[1-9]\\d{5})"],["4[3-9]\\d{6}",[8]],["800\\d{5}",[8]],["900\\d{5}",[8]]]],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,[["78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",[7,8]],["7[01378]\\d{7}",[9]]]],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0",0,0,0,0,0,[["(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",[9]],["(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:6\\d|7[0-46-9])\\d{3}|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",[5,6,7,8,9]],["80\\d{7}",[9]],["(?:86[2-9]|9[0-2]\\d)\\d{6}",[9]],0,0,["861\\d{6,7}",[9,10]],0,["87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",[9]],["860\\d{6}",[9]]]],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0",0,0,0,0,0,[["21[1-8]\\d{6}"],["(?:7[5-79]|9[5-8])\\d{7}"],["800\\d{6}"],0,0,0,0,0,["63\\d{7}"]]],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}"],["7(?:[1278]\\d|3[1-9])\\d{6}",[9]],["80(?:[01]\\d|20|8[0-8])\\d{3}",[7]],0,0,0,0,0,["86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",[10]]]]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function lu(i,e){var t=Array.prototype.slice.call(e);return t.push(_d),i.apply(this,t)}function ub(i){"@babel/helpers - typeof";return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(i)}function q9(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function GD(i,e,t){return e&&q9(i.prototype,e),t&&q9(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function WD(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ZD(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Dp(i,e)}function KD(i){var e=Q9();return function(){var r=Lp(i),o;if(e){var n=Lp(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return JD(this,o)}}function JD(i,e){if(e&&(ub(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $9(i)}function $9(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function db(i){var e=typeof Map=="function"?new Map:void 0;return db=function(r){if(r===null||!XD(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,o)}function o(){return Mm(r,arguments,Lp(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Dp(o,r)},db(i)}function Mm(i,e,t){return Q9()?Mm=Reflect.construct:Mm=function(o,n,u){var h=[null];h.push.apply(h,n);var m=Function.bind.apply(o,h),b=new m;return u&&Dp(b,u.prototype),b},Mm.apply(null,arguments)}function Q9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function XD(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function Dp(i,e){return Dp=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},Dp(i,e)}function Lp(i){return Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lp(i)}var ps=function(i){ZD(t,i);var e=KD(t);function t(r){var o;return WD(this,t),o=e.call(this,r),Object.setPrototypeOf($9(o),t.prototype),o.name=o.constructor.name,o}return GD(t)}(db(Error));var Fp=2,G9=17,W9=3,Mn="0-9\uFF10-\uFF19\u0660-\u0669\u06F0-\u06F9",YD="-\u2010-\u2015\u2212\u30FC\uFF0D",eL="\uFF0F/",tL="\uFF0E.",iL=" \xA0\xAD\u200B\u2060\u3000",rL="()\uFF08\uFF09\uFF3B\uFF3D\\[\\]",nL="~\u2053\u223C\uFF5E",rs="".concat(YD).concat(eL).concat(tL).concat(iL).concat(rL).concat(nL),cu="+\uFF0B";function hb(i,e){i=i.split("-"),e=e.split("-");for(var t=i[0].split("."),r=e[0].split("."),o=0;o<3;o++){var n=Number(t[o]),u=Number(r[o]);if(n>u)return 1;if(u>n)return-1;if(!isNaN(n)&&isNaN(u))return 1;if(isNaN(n)&&!isNaN(u))return-1}return i[1]&&e[1]?i[1]>e[1]?1:i[1]<e[1]?-1:0:!i[1]&&e[1]?1:i[1]&&!e[1]?-1:0}var oL={}.constructor;function dl(i){return i!=null&&i.constructor===oL}function pb(i){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(i)}function Am(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Z9(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Im(i,e,t){return e&&Z9(i.prototype,e),t&&Z9(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var sL="1.2.0",aL="1.7.35",K9=" ext. ",lL=/^\d+$/,lr=function(){function i(e){Am(this,i),hL(e),this.metadata=e,Y9.call(this,e)}return Im(i,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(t){return t!=="001"})}},{key:"getCountryMetadata",value:function(t){return this.metadata.countries[t]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(t){return this.getCountryMetadata(t)!==void 0}},{key:"hasCallingCode",value:function(t){if(this.getCountryCodesForCallingCode(t))return!0;if(this.nonGeographic()){if(this.nonGeographic()[t])return!0}else{var r=this.countryCallingCodes()[t];if(r&&r.length===1&&r[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(t){return this.nonGeographic()?!!this.nonGeographic()[t]:!this.getCountryCodesForCallingCode(t)}},{key:"country",value:function(t){return this.selectNumberingPlan(t)}},{key:"selectNumberingPlan",value:function(t,r){if(t&&lL.test(t)&&(r=t,t=null),t&&t!=="001"){if(!this.hasCountry(t))throw new Error("Unknown country: ".concat(t));this.numberingPlan=new J9(this.getCountryMetadata(t),this)}else if(r){if(!this.hasCallingCode(r))throw new Error("Unknown calling code: ".concat(r));this.numberingPlan=new J9(this.getNumberingPlanMetadata(r),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(t){var r=this.countryCallingCodes()[t];if(r)return r.length===1&&r[0].length===3?void 0:r}},{key:"getCountryCodeForCallingCode",value:function(t){var r=this.getCountryCodesForCallingCode(t);if(r)return r[0]}},{key:"getNumberingPlanMetadata",value:function(t){var r=this.getCountryCodeForCallingCode(t);if(r)return this.getCountryMetadata(r);if(this.nonGeographic()){var o=this.nonGeographic()[t];if(o)return o}else{var n=this.countryCallingCodes()[t];if(n&&n.length===1&&n[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(t){return this.numberingPlan.type(t)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(t){return this.selectNumberingPlan(t)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),i}();var J9=function(){function i(e,t){Am(this,i),this.globalMetadataObject=t,this.metadata=e,Y9.call(this,t.metadata)}return Im(i,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(t){return t[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var t=this,r=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return r.map(function(o){return new cL(o,t)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(t){return t[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(t){if(this.hasTypes()&&X9(this.types(),t))return new dL(X9(this.types(),t),this)}},{key:"ext",value:function(){return this.v1||this.v2?K9:this.metadata[13]||K9}}]),i}(),cL=function(){function i(e,t){Am(this,i),this._format=e,this.metadata=t}return Im(i,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!uL.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),i}(),uL=/^\(?\$1\)?$/,dL=function(){function i(e,t){Am(this,i),this.type=e,this.metadata=t}return Im(i,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),i}();function X9(i,e){switch(e){case"FIXED_LINE":return i[0];case"MOBILE":return i[1];case"TOLL_FREE":return i[2];case"PREMIUM_RATE":return i[3];case"PERSONAL_NUMBER":return i[4];case"VOICEMAIL":return i[5];case"UAN":return i[6];case"PAGER":return i[7];case"VOIP":return i[8];case"SHARED_COST":return i[9]}}function hL(i){if(!i)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!dl(i)||!dl(i.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(dl(i)?"an object of shape: { "+Object.keys(i).join(", ")+" }":"a "+pL(i)+": "+i,"."))}var pL=function(e){return pb(e)};function Da(i,e){if(e=new lr(e),e.hasCountry(i))return e.country(i).countryCallingCode();throw new Error("Unknown country: ".concat(i))}function Y9(i){var e=i.version;typeof e=="number"?(this.v1=e===1,this.v2=e===2,this.v3=e===3,this.v4=e===4):e?hb(e,sL)===-1?this.v2=!0:hb(e,aL)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var fL=";ext=",xd=function(e){return"([".concat(Mn,"]{1,").concat(e,"})")};function zp(i){var e="20",t="15",r="9",o="6",n="[ \xA0\\t,]*",u="[:\\.\uFF0E]?[ \xA0\\t,-]*",h="#?",m="(?:e?xt(?:ensi(?:o\u0301?|\xF3))?n?|\uFF45?\uFF58\uFF54\uFF4E?|\u0434\u043E\u0431|anexo)",b="(?:[x\uFF58#\uFF03~\uFF5E]|int|\uFF49\uFF4E\uFF54)",_="[- ]+",S="[ \xA0\\t]*",T="(?:,{2}|;)",P=fL+xd(e),F=n+m+u+xd(e)+h,G=n+b+u+xd(r)+h,$=_+xd(o)+"#",ee=S+T+u+xd(t)+h,ue=S+"(?:,)+"+u+xd(r)+h;return P+"|"+F+"|"+G+"|"+$+"|"+ee+"|"+ue}var mL="["+Mn+"]{"+Fp+"}",gL="["+cu+"]{0,1}(?:["+rs+"]*["+Mn+"]){3,}["+rs+Mn+"]*",yL=new RegExp("^["+cu+"]{0,1}(?:["+rs+"]*["+Mn+"]){1,2}$","i"),bL=gL+"(?:"+zp()+")?",vL=new RegExp("^"+mL+"$|^"+bL+"$","i");function fb(i){return i.length>=Fp&&vL.test(i)}function ew(i){return yL.test(i)}var tw=new RegExp("(?:"+zp()+")$","i");function mb(i){var e=i.search(tw);if(e<0)return{};for(var t=i.slice(0,e),r=i.match(tw),o=1;o<r.length;){if(r[o])return{number:t,ext:r[o]};o++}}function _L(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=xL(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xL(i,e){if(i){if(typeof i=="string")return iw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return iw(i,e)}}function iw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}var wL={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","\uFF10":"0","\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9"};function gb(i){return wL[i]}function hl(i){for(var e="",t=_L(i.split("")),r;!(r=t()).done;){var o=r.value,n=gb(o);n&&(e+=n)}return e}function kL(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=SL(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SL(i,e){if(i){if(typeof i=="string")return rw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rw(i,e)}}function rw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function Np(i){for(var e="",t=kL(i.split("")),r;!(r=t()).done;){var o=r.value;e+=nw(o,e)||""}return e}function nw(i,e,t){if(i==="+"){if(e){typeof t=="function"&&t("end");return}return"+"}return gb(i)}function CL(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=EL(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EL(i,e){if(i){if(typeof i=="string")return ow(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ow(i,e)}}function ow(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function yb(i,e){for(var t=i.slice(),r=CL(e),o;!(o=r()).done;){var n=o.value;i.indexOf(n)<0&&t.push(n)}return t.sort(function(u,h){return u-h})}function pl(i,e){return sw(i,void 0,e)}function sw(i,e,t){var r=t.type(e),o=r&&r.possibleLengths()||t.possibleLengths();if(!o)return"IS_POSSIBLE";if(e==="FIXED_LINE_OR_MOBILE"){if(!t.type("FIXED_LINE"))return sw(i,"MOBILE",t);var n=t.type("MOBILE");n&&(o=yb(o,n.possibleLengths()))}else if(e&&!r)return"INVALID_LENGTH";var u=i.length,h=o[0];return h===u?"IS_POSSIBLE":h>u?"TOO_SHORT":o[o.length-1]<u?"TOO_LONG":o.indexOf(u,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function bb(i,e,t){if(e===void 0&&(e={}),t=new lr(t),e.v2){if(!i.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(i.countryCallingCode)}else{if(!i.phone)return!1;if(i.country){if(!t.hasCountry(i.country))throw new Error("Unknown country: ".concat(i.country));t.country(i.country)}else{if(!i.countryCallingCode)throw new Error("Invalid phone number object passed");t.selectNumberingPlan(i.countryCallingCode)}}if(t.possibleLengths())return vb(i.phone||i.nationalNumber,t);if(i.countryCallingCode&&t.isNonGeographicCallingCode(i.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function vb(i,e){switch(pl(i,e)){case"IS_POSSIBLE":return!0;default:return!1}}function Vo(i,e){return i=i||"",new RegExp("^(?:"+e+")$").test(i)}function TL(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=ML(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ML(i,e){if(i){if(typeof i=="string")return aw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return aw(i,e)}}function aw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}var AL=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function uu(i,e,t){if(e=e||{},!(!i.country&&!i.countryCallingCode)){t=new lr(t),t.selectNumberingPlan(i.country,i.countryCallingCode);var r=e.v2?i.nationalNumber:i.phone;if(Vo(r,t.nationalNumberPattern())){if(_b(r,"FIXED_LINE",t))return t.type("MOBILE")&&t.type("MOBILE").pattern()===""||!t.type("MOBILE")||_b(r,"MOBILE",t)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var o=TL(AL),n;!(n=o()).done;){var u=n.value;if(_b(r,u,t))return u}}}}function _b(i,e,t){return e=t.type(e),!e||!e.pattern()||e.possibleLengths()&&e.possibleLengths().indexOf(i.length)<0?!1:Vo(i,e.pattern())}function xb(i,e,t){if(e=e||{},t=new lr(t),t.selectNumberingPlan(i.country,i.countryCallingCode),t.hasTypes())return uu(i,e,t.metadata)!==void 0;var r=e.v2?i.nationalNumber:i.phone;return Vo(r,t.nationalNumberPattern())}function wb(i,e,t){var r=new lr(t),o=r.getCountryCodesForCallingCode(i);return o?o.filter(function(n){return IL(e,n,t)}):[]}function IL(i,e,t){var r=new lr(t);return r.selectNumberingPlan(e),r.numberingPlan.possibleLengths().indexOf(i.length)>=0}function Op(i){return i.replace(new RegExp("[".concat(rs,"]+"),"g")," ").trim()}var kb=/(\$\d)/;function Bp(i,e,t){var r=t.useInternationalFormat,o=t.withNationalPrefix,n=t.carrierCode,u=t.metadata,h=i.replace(new RegExp(e.pattern()),r?e.internationalFormat():o&&e.nationalPrefixFormattingRule()?e.format().replace(kb,e.nationalPrefixFormattingRule()):e.format());return r?Op(h):h}var PL=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function Sb(i,e,t){var r=new lr(t);if(r.selectNumberingPlan(i,e),r.defaultIDDPrefix())return r.defaultIDDPrefix();if(PL.test(r.IDDPrefix()))return r.IDDPrefix()}function Cb(i){var e=i.number,t=i.ext;if(!e)return"";if(e[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(e).concat(t?";ext="+t:"")}function DL(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=LL(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LL(i,e){if(i){if(typeof i=="string")return lw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lw(i,e)}}function lw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function cw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function uw(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cw(Object(t),!0).forEach(function(r){FL(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):cw(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function FL(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var dw={formatExtension:function(e,t,r){return"".concat(e).concat(r.ext()).concat(t)}};function Tb(i,e,t,r){if(t?t=uw(uw({},dw),t):t=dw,r=new lr(r),i.country&&i.country!=="001"){if(!r.hasCountry(i.country))throw new Error("Unknown country: ".concat(i.country));r.country(i.country)}else if(i.countryCallingCode)r.selectNumberingPlan(i.countryCallingCode);else return i.phone||"";var o=r.countryCallingCode(),n=t.v2?i.nationalNumber:i.phone,u;switch(e){case"NATIONAL":return n?(u=Pm(n,i.carrierCode,"NATIONAL",r,t),Eb(u,i.ext,r,t.formatExtension)):"";case"INTERNATIONAL":return n?(u=Pm(n,null,"INTERNATIONAL",r,t),u="+".concat(o," ").concat(u),Eb(u,i.ext,r,t.formatExtension)):"+".concat(o);case"E.164":return"+".concat(o).concat(n);case"RFC3966":return Cb({number:"+".concat(o).concat(n),ext:i.ext});case"IDD":if(!t.fromCountry)return;var h=NL(n,i.carrierCode,o,t.fromCountry,r);return Eb(h,i.ext,r,t.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function Pm(i,e,t,r,o){var n=zL(r.formats(),i);return n?Bp(i,n,{useInternationalFormat:t==="INTERNATIONAL",withNationalPrefix:!(n.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&o&&o.nationalPrefix===!1),carrierCode:e,metadata:r}):i}function zL(i,e){for(var t=DL(i),r;!(r=t()).done;){var o=r.value;if(o.leadingDigitsPatterns().length>0){var n=o.leadingDigitsPatterns()[o.leadingDigitsPatterns().length-1];if(e.search(n)!==0)continue}if(Vo(e,o.pattern()))return o}}function Eb(i,e,t,r){return e?r(i,e,t):i}function NL(i,e,t,r,o){var n=Da(r,o.metadata);if(n===t){var u=Pm(i,e,"NATIONAL",o);return t==="1"?t+" "+u:u}var h=Sb(r,void 0,o.metadata);if(h)return"".concat(h," ").concat(t," ").concat(Pm(i,null,"INTERNATIONAL",o))}function hw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function pw(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hw(Object(t),!0).forEach(function(r){OL(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):hw(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function OL(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function BL(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function fw(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function RL(i,e,t){return e&&fw(i.prototype,e),t&&fw(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var UL=!1,wd=function(){function i(e,t,r){if(BL(this,i),!e)throw new TypeError("`country` or `countryCallingCode` not passed");if(!t)throw new TypeError("`nationalNumber` not passed");if(!r)throw new TypeError("`metadata` not passed");var o=jL(e,r),n=o.country,u=o.countryCallingCode;this.country=n,this.countryCallingCode=u,this.nationalNumber=t,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return r}}return RL(i,[{key:"setExt",value:function(t){this.ext=t}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:wb(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return bb(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return xb(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var t=new lr(this.getMetadata());return t.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(t){return this.number===t.number&&this.ext===t.ext}},{key:"getType",value:function(){return uu(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(t,r){return Tb(this,t,r?pw(pw({},r),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(t){return this.format("NATIONAL",t)}},{key:"formatInternational",value:function(t){return this.format("INTERNATIONAL",t)}},{key:"getURI",value:function(t){return this.format("RFC3966",t)}}]),i}();var VL=function(e){return/^[A-Z]{2}$/.test(e)};function jL(i,e){var t,r,o=new lr(e);return VL(i)?(t=i,o.selectNumberingPlan(t),r=o.countryCallingCode()):(r=i,UL&&o.isNonGeographicCallingCode(r)&&(t="001")),{country:t,countryCallingCode:r}}var HL=new RegExp("(["+Mn+"])");function Rp(i,e,t,r){if(e){var o=new lr(r);o.selectNumberingPlan(e,t);var n=new RegExp(o.IDDPrefix());if(i.search(n)===0){i=i.slice(i.match(n)[0].length);var u=i.match(HL);if(!(u&&u[1]!=null&&u[1].length>0&&u[1]==="0"))return i}}}function kd(i,e){if(i&&e.numberingPlan.nationalPrefixForParsing()){var t=new RegExp("^(?:"+e.numberingPlan.nationalPrefixForParsing()+")"),r=t.exec(i);if(r){var o,n,u=r.length-1,h=u>0&&r[u];if(e.nationalPrefixTransformRule()&&h)o=i.replace(t,e.nationalPrefixTransformRule()),u>1&&(n=r[1]);else{var m=r[0];o=i.slice(m.length),h&&(n=r[1])}var b;if(h){var _=i.indexOf(r[1]),S=i.slice(0,_);S===e.numberingPlan.nationalPrefix()&&(b=e.numberingPlan.nationalPrefix())}else b=r[0];return{nationalNumber:o,nationalPrefix:b,carrierCode:n}}}return{nationalNumber:i}}function Sd(i,e){var t=kd(i,e),r=t.carrierCode,o=t.nationalNumber;if(o!==i){if(!qL(i,o,e))return{nationalNumber:i};if(e.possibleLengths()&&!$L(o,e))return{nationalNumber:i}}return{nationalNumber:o,carrierCode:r}}function qL(i,e,t){return!(Vo(i,t.nationalNumberPattern())&&!Vo(e,t.nationalNumberPattern()))}function $L(i,e){switch(pl(i,e)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function Up(i,e,t,r){var o=e?Da(e,r):t;if(i.indexOf(o)===0){r=new lr(r),r.selectNumberingPlan(e,t);var n=i.slice(o.length),u=Sd(n,r),h=u.nationalNumber,m=Sd(i,r),b=m.nationalNumber;if(!Vo(b,r.nationalNumberPattern())&&Vo(h,r.nationalNumberPattern())||pl(b,r)==="TOO_LONG")return{countryCallingCode:o,number:n}}return{number:i}}function Vp(i,e,t,r){if(!i)return{};var o;if(i[0]!=="+"){var n=Rp(i,e,t,r);if(n&&n!==i)o=!0,i="+"+n;else{if(e||t){var u=Up(i,e,t,r),h=u.countryCallingCode,m=u.number;if(h)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:h,number:m}}return{number:i}}}if(i[1]==="0")return{};r=new lr(r);for(var b=2;b-1<=W9&&b<=i.length;){var _=i.slice(1,b);if(r.hasCallingCode(_))return r.selectNumberingPlan(_),{countryCallingCodeSource:o?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:_,number:i.slice(b)};b++}return{}}function QL(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=GL(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GL(i,e){if(i){if(typeof i=="string")return mw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mw(i,e)}}function mw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function jp(i,e){var t=e.countries,r=e.defaultCountry,o=e.metadata;o=new lr(o);for(var n=[],u=QL(t),h;!(h=u()).done;){var m=h.value;if(o.country(m),o.leadingDigits()){if(i&&i.search(o.leadingDigits())===0)return m}else if(uu({phone:i,country:m},void 0,o.metadata))if(r){if(m===r)return m;n.push(m)}else return m}if(n.length>0)return n[0]}var WL=!1;function Hp(i,e){var t=e.nationalNumber,r=e.defaultCountry,o=e.metadata;if(WL&&o.isNonGeographicCallingCode(i))return"001";var n=o.getCountryCodesForCallingCode(i);if(n)return n.length===1?n[0]:jp(t,{countries:n,defaultCountry:r,metadata:o.metadata})}var Ab="+",ZL="[\\-\\.\\(\\)]?",gw="(["+Mn+"]|"+ZL+")",KL="^\\"+Ab+gw+"*["+Mn+"]"+gw+"*$",JL=new RegExp(KL,"g"),Mb=Mn,XL="["+Mb+"]+((\\-)*["+Mb+"])*",YL="a-zA-Z",eF="["+YL+"]+((\\-)*["+Mb+"])*",tF="^("+XL+"\\.)*"+eF+"\\.?$",iF=new RegExp(tF,"g"),Ib="tel:",Dm=";phone-context=",yw=";isub=";function Pb(i){var e=i.indexOf(Dm);if(e<0)return null;var t=e+Dm.length;if(t>=i.length)return"";var r=i.indexOf(";",t);return r>=0?i.substring(t,r):i.substring(t)}function bw(i){return i===null?!0:i.length===0?!1:JL.test(i)||iF.test(i)}function Db(i,e){var t=e.extractFormattedPhoneNumber,r=Pb(i);if(!bw(r))throw new ps("NOT_A_NUMBER");var o;if(r===null)o=t(i)||"";else{o="",r.charAt(0)===Ab&&(o+=r);var n=i.indexOf(Ib),u;n>=0?u=n+Ib.length:u=0;var h=i.indexOf(Dm);o+=i.substring(u,h)}var m=o.indexOf(yw);if(m>0&&(o=o.substring(0,m)),o!=="")return o}var rF=250,nF=new RegExp("["+cu+Mn+"]"),oF=new RegExp("[^"+Mn+"#]+$"),sF=!1;function Lb(i,e,t){if(e=e||{},t=new lr(t),e.defaultCountry&&!t.hasCountry(e.defaultCountry))throw e.v2?new ps("INVALID_COUNTRY"):new Error("Unknown country: ".concat(e.defaultCountry));var r=lF(i,e.v2,e.extract),o=r.number,n=r.ext,u=r.error;if(!o){if(e.v2)throw u==="TOO_SHORT"?new ps("TOO_SHORT"):new ps("NOT_A_NUMBER");return{}}var h=uF(o,e.defaultCountry,e.defaultCallingCode,t),m=h.country,b=h.nationalNumber,_=h.countryCallingCode,S=h.countryCallingCodeSource,T=h.carrierCode;if(!t.hasSelectedNumberingPlan()){if(e.v2)throw new ps("INVALID_COUNTRY");return{}}if(!b||b.length<Fp){if(e.v2)throw new ps("TOO_SHORT");return{}}if(b.length>G9){if(e.v2)throw new ps("TOO_LONG");return{}}if(e.v2){var P=new wd(_,b,t.metadata);return m&&(P.country=m),T&&(P.carrierCode=T),n&&(P.ext=n),P.__countryCallingCodeSource=S,P}var F=(e.extended?t.hasSelectedNumberingPlan():m)?Vo(b,t.nationalNumberPattern()):!1;return e.extended?{country:m,countryCallingCode:_,carrierCode:T,valid:F,possible:F?!0:!!(e.extended===!0&&t.possibleLengths()&&vb(b,t)),phone:b,ext:n}:F?cF(m,b,n):{}}function aF(i,e,t){if(i){if(i.length>rF){if(t)throw new ps("TOO_LONG");return}if(e===!1)return i;var r=i.search(nF);if(!(r<0))return i.slice(r).replace(oF,"")}}function lF(i,e,t){var r=Db(i,{extractFormattedPhoneNumber:function(u){return aF(u,t,e)}});if(!r)return{};if(!fb(r))return ew(r)?{error:"TOO_SHORT"}:{};var o=mb(r);return o.ext?o:{number:r}}function cF(i,e,t){var r={country:i,phone:e};return t&&(r.ext=t),r}function uF(i,e,t,r){var o=Vp(Np(i),e,t,r.metadata),n=o.countryCallingCodeSource,u=o.countryCallingCode,h=o.number,m;if(u)r.selectNumberingPlan(u);else if(h&&(e||t))r.selectNumberingPlan(e,t),e?m=e:sF&&r.isNonGeographicCallingCode(t)&&(m="001"),u=t||Da(e,r.metadata);else return{};if(!h)return{countryCallingCodeSource:n,countryCallingCode:u};var b=Sd(Np(h),r),_=b.nationalNumber,S=b.carrierCode,T=Hp(u,{nationalNumber:_,defaultCountry:e,metadata:r});return T&&(m=T,T==="001"||r.country(m)),{country:m,countryCallingCode:u,countryCallingCodeSource:n,nationalNumber:_,carrierCode:S}}function vw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function _w(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vw(Object(t),!0).forEach(function(r){dF(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):vw(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function dF(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Fb(i,e,t){return Lb(i,_w(_w({},e),{},{v2:!0}),t)}function xw(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(i,o).enumerable})),t.push.apply(t,r)}return t}function hF(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?xw(Object(t),!0).forEach(function(r){pF(i,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):xw(Object(t)).forEach(function(r){Object.defineProperty(i,r,Object.getOwnPropertyDescriptor(t,r))})}return i}function pF(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function fF(i,e){return bF(i)||yF(i,e)||gF(i,e)||mF()}function mF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gF(i,e){if(i){if(typeof i=="string")return ww(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ww(i,e)}}function ww(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function yF(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var r=[],o=!0,n=!1,u,h;try{for(t=t.call(i);!(o=(u=t.next()).done)&&(r.push(u.value),!(e&&r.length===e));o=!0);}catch(m){n=!0,h=m}finally{try{!o&&t.return!=null&&t.return()}finally{if(n)throw h}}return r}}function bF(i){if(Array.isArray(i))return i}function zb(i){var e=Array.prototype.slice.call(i),t=fF(e,4),r=t[0],o=t[1],n=t[2],u=t[3],h,m,b;if(typeof r=="string")h=r;else throw new TypeError("A text for parsing must be a string.");if(!o||typeof o=="string")u?(m=n,b=u):(m=void 0,b=n),o&&(m=hF({defaultCountry:o},m));else if(dl(o))n?(m=o,b=n):b=o;else throw new Error("Invalid second argument: ".concat(o));return{text:h,options:m,metadata:b}}function qp(){var i=zb(arguments),e=i.text,t=i.options,r=i.metadata;return Fb(e,t,r)}function vF(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function kw(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function _F(i,e,t){return e&&kw(i.prototype,e),t&&kw(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var Sw=function(){function i(e){var t=e.onCountryChange,r=e.onCallingCodeChange;vF(this,i),this.onCountryChange=t,this.onCallingCodeChange=r}return _F(i,[{key:"reset",value:function(t){var r=t.country,o=t.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(r,o)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(t){for(var r=0,o=Object.keys(t);r<o.length;r++){var n=o[r];this[n]=t[n]}}},{key:"initCountryAndCallingCode",value:function(t,r){this.setCountry(t),this.setCallingCode(r)}},{key:"setCountry",value:function(t){this.country=t,this.onCountryChange(t)}},{key:"setCallingCode",value:function(t){this.callingCode=t,this.onCallingCodeChange(t,this.country)}},{key:"startInternationalNumber",value:function(t,r){this.international=!0,this.initCountryAndCallingCode(t,r)}},{key:"appendDigits",value:function(t){this.digits+=t}},{key:"appendNationalSignificantNumberDigits",value:function(t){this.nationalSignificantNumber+=t}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}]),i}();function xF(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=wF(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wF(i,e){if(i){if(typeof i=="string")return Cw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cw(i,e)}}function Cw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}var ns="x",Nb=new RegExp(ns);function $p(i,e){if(e<1)return"";for(var t="";e>1;)e&1&&(t+=i),e>>=1,i+=i;return t+i}function Ob(i,e){return i[e]===")"&&e++,kF(i.slice(0,e))}function kF(i){for(var e=[],t=0;t<i.length;)i[t]==="("?e.push(t):i[t]===")"&&e.pop(),t++;var r=0,o="";e.push(i.length);for(var n=0,u=e;n<u.length;n++){var h=u[n];o+=i.slice(r,h),r=h+1}return o}function Ew(i,e,t){for(var r=xF(t.split("")),o;!(o=r()).done;){var n=o.value;if(i.slice(e+1).search(Nb)<0)return;e=i.search(Nb),i=i.replace(Nb,n)}return[i,e]}function Bb(i,e,t){var r=t.metadata,o=t.shouldTryNationalPrefixFormattingRule,n=t.getSeparatorAfterNationalPrefix,u=new RegExp("^(?:".concat(e.pattern(),")$"));if(u.test(i.nationalSignificantNumber))return SF(i,e,{metadata:r,shouldTryNationalPrefixFormattingRule:o,getSeparatorAfterNationalPrefix:n})}function Mw(i,e){return pl(i,e)==="IS_POSSIBLE"}function SF(i,e,t){var r=t.metadata,o=t.shouldTryNationalPrefixFormattingRule,n=t.getSeparatorAfterNationalPrefix,u=i.nationalSignificantNumber,h=i.international,m=i.nationalPrefix,b=i.carrierCode;if(o(e)){var _=Tw(i,e,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:n,metadata:r});if(_)return _}return Tw(i,e,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:n,metadata:r})}function Tw(i,e,t){var r=t.metadata,o=t.useNationalPrefixFormattingRule,n=t.getSeparatorAfterNationalPrefix,u=Bp(i.nationalSignificantNumber,e,{carrierCode:i.carrierCode,useInternationalFormat:i.international,withNationalPrefix:o,metadata:r});if(o||(i.nationalPrefix?u=i.nationalPrefix+n(e)+u:i.complexPrefixBeforeNationalSignificantNumber&&(u=i.complexPrefixBeforeNationalSignificantNumber+" "+u)),CF(u,i))return u}function CF(i,e){return hl(i)===e.getNationalDigits()}function EF(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Aw(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function TF(i,e,t){return e&&Aw(i.prototype,e),t&&Aw(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var Iw=function(){function i(){EF(this,i)}return TF(i,[{key:"parse",value:function(t){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(t),this.context.length!==1)throw new Error("Non-finalized contexts left when pattern parse ended");var r=this.context[0],o=r.branches,n=r.instructions;if(o)return{op:"|",args:o.concat([Rb(n)])};if(n.length===0)throw new Error("Pattern is required");return n.length===1?n[0]:n}},{key:"startContext",value:function(t){this.context.push(t)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(t){if(!t)throw new Error("Pattern is required");var r=t.match(IF);if(!r){if(AF.test(t))throw new Error("Illegal characters found in a pattern: ".concat(t));this.getContext().instructions=this.getContext().instructions.concat(t.split(""));return}var o=r[1],n=t.slice(0,r.index),u=t.slice(r.index+o.length);switch(o){case"(?:":n&&this.parsePattern(n),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(n&&this.parsePattern(n),this.getContext().instructions.length===0)throw new Error('No instructions found after "|" operator in an "or" group');var h=this.getContext(),m=h.branches;m.push(Rb(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:m});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(n&&this.parsePattern(n),!this.getContext().branches)if(this.context.length===1)this.getContext().branches=[];else throw new Error('"branches" not found in an "or" group context');this.getContext().branches.push(Rb(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":n&&this.parsePattern(n),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:MF(n)});break;default:throw new Error("Unknown operator: ".concat(o))}u&&this.parsePattern(u)}}]),i}();function MF(i){for(var e=[],t=0;t<i.length;){if(i[t]==="-"){if(t===0||t===i.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(i));for(var r=i[t-1].charCodeAt(0)+1,o=i[t+1].charCodeAt(0)-1,n=r;n<=o;)e.push(String.fromCharCode(n)),n++}else e.push(i[t]);t++}return e}var AF=/[\(\)\[\]\?\:\|]/,IF=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function Rb(i){return i.length===1?i[0]:i}function Pw(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=PF(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PF(i,e){if(i){if(typeof i=="string")return Dw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Dw(i,e)}}function Dw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function DF(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Lw(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function LF(i,e,t){return e&&Lw(i.prototype,e),t&&Lw(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var Fw=function(){function i(e){DF(this,i),this.matchTree=new Iw().parse(e)}return LF(i,[{key:"match",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.allowOverflow;if(!t)throw new Error("String is required");var n=Ub(t.split(""),this.matchTree,!0);if(n&&n.match&&delete n.matchedChars,!(n&&n.overflow&&!o))return n}}]),i}();function Ub(i,e,t){if(typeof e=="string"){var r=i.join("");return e.indexOf(r)===0?i.length===e.length?{match:!0,matchedChars:i}:{partialMatch:!0}:r.indexOf(e)===0?t&&i.length>e.length?{overflow:!0}:{match:!0,matchedChars:i.slice(0,e.length)}:void 0}if(Array.isArray(e)){for(var o=i.slice(),n=0;n<e.length;){var u=e[n],h=Ub(o,u,t&&n===e.length-1);if(h){if(h.overflow)return h;if(h.match){if(o=o.slice(h.matchedChars.length),o.length===0)return n===e.length-1?{match:!0,matchedChars:i}:{partialMatch:!0}}else{if(h.partialMatch)return{partialMatch:!0};throw new Error(`Unsupported match result:
`.concat(JSON.stringify(h,null,2)))}}else return;n++}return t?{overflow:!0}:{match:!0,matchedChars:i.slice(0,i.length-o.length)}}switch(e.op){case"|":for(var m,b=Pw(e.args),_;!(_=b()).done;){var S=_.value,T=Ub(i,S,t);if(T){if(T.overflow)return T;if(T.match)return{match:!0,matchedChars:T.matchedChars};if(T.partialMatch)m=!0;else throw new Error(`Unsupported match result:
`.concat(JSON.stringify(T,null,2)))}}return m?{partialMatch:!0}:void 0;case"[]":for(var P=Pw(e.args),F;!(F=P()).done;){var G=F.value;if(i[0]===G)return i.length===1?{match:!0,matchedChars:i}:t?{overflow:!0}:{match:!0,matchedChars:[G]}}return;default:throw new Error("Unsupported instruction tree: ".concat(e))}}function zw(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t)return(t=t.call(i)).next.bind(t);if(Array.isArray(i)||(t=FF(i))||e&&i&&typeof i.length=="number"){t&&(i=t);var r=0;return function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FF(i,e){if(i){if(typeof i=="string")return Nw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Nw(i,e)}}function Nw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function zF(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Ow(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function NF(i,e,t){return e&&Ow(i.prototype,e),t&&Ow(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var Vb="9",OF=15,BF=$p(Vb,OF),RF=/[- ]/,Lm=!0,UF=Lm&&function(){return/\[([^\[\]])*\]/g},VF=Lm&&function(){return/\d(?=[^,}][^,}])/g},jF=new RegExp("["+rs+"]*\\$1["+rs+"]*(\\$\\d["+rs+"]*)*$"),Bw=3,Rw=function(){function i(e){var t=e.state,r=e.metadata;zF(this,i),this.metadata=r,this.resetFormat()}return NF(i,[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(t,r){this.resetFormat(),t?(this.isNANP=t.callingCode()==="1",this.matchingFormats=t.formats(),r.nationalSignificantNumber&&this.narrowDownMatchingFormats(r)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(t,r){var o=this;if(Mw(r.nationalSignificantNumber,this.metadata))for(var n=zw(this.matchingFormats),u;!(u=n()).done;){var h=u.value,m=Bb(r,h,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(_){return o.shouldTryNationalPrefixFormattingRule(_,{international:r.international,nationalPrefix:r.nationalPrefix})},getSeparatorAfterNationalPrefix:function(_){return o.getSeparatorAfterNationalPrefix(_)}});if(m)return this.resetFormat(),this.chosenFormat=h,this.setNationalNumberTemplate(m.replace(/\d/g,ns),r),this.populatedNationalNumberTemplate=m,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(ns),m}return this.formatNationalNumberWithNextDigits(t,r)}},{key:"formatNationalNumberWithNextDigits",value:function(t,r){var o=this.chosenFormat,n=this.chooseFormat(r);if(n)return n===o?this.formatNextNationalNumberDigits(t):this.formatNextNationalNumberDigits(r.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(t){var r=this,o=t.nationalSignificantNumber,n=t.nationalPrefix,u=t.international,h=o,m=h.length-Bw;m<0&&(m=0),this.matchingFormats=this.matchingFormats.filter(function(b){return r.formatSuits(b,u,n)&&r.formatMatches(b,h,m)}),this.chosenFormat&&this.matchingFormats.indexOf(this.chosenFormat)===-1&&this.resetFormat()}},{key:"formatSuits",value:function(t,r,o){return!(o&&!t.usesNationalPrefix()&&!t.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!r&&!o&&t.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(t,r,o){var n=t.leadingDigitsPatterns().length;if(n===0)return!0;o=Math.min(o,n-1);var u=t.leadingDigitsPatterns()[o];if(r.length<Bw)try{return new Fw(u).match(r,{allowOverflow:!0})!==void 0}catch(h){return console.error(h),!0}return new RegExp("^(".concat(u,")")).test(r)}},{key:"getFormatFormat",value:function(t,r){return r?t.internationalFormat():t.format()}},{key:"chooseFormat",value:function(t){for(var r=this,o=function(){var b=u.value;return r.chosenFormat===b?"break":jF.test(r.getFormatFormat(b,t.international))?r.createTemplateForFormat(b,t)?(r.chosenFormat=b,"break"):(r.matchingFormats=r.matchingFormats.filter(function(_){return _!==b}),"continue"):"continue"},n=zw(this.matchingFormats.slice()),u;!(u=n()).done;){var h=o();if(h==="break")break}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(t,r){if(!(Lm&&t.pattern().indexOf("|")>=0)){var o=this.getTemplateForFormat(t,r);if(o)return this.setNationalNumberTemplate(o,r),!0}}},{key:"getSeparatorAfterNationalPrefix",value:function(t){return this.isNANP||t&&t.nationalPrefixFormattingRule()&&RF.test(t.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(t,r){var o=t.IDDPrefix,n=t.missingPlus;return o?r&&r.spacing===!1?o:o+" ":n?"":"+"}},{key:"getTemplate",value:function(t){if(this.template){for(var r=-1,o=0,n=t.international?this.getInternationalPrefixBeforeCountryCallingCode(t,{spacing:!1}):"";o<n.length+t.getDigitsWithoutInternationalPrefix().length;)r=this.template.indexOf(ns,r+1),o++;return Ob(this.template,r+1)}}},{key:"setNationalNumberTemplate",value:function(t,r){this.nationalNumberTemplate=t,this.populatedNationalNumberTemplate=t,this.populatedNationalNumberTemplatePosition=-1,r.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(r).replace(/[\d\+]/g,ns)+$p(ns,r.callingCode.length)+" "+t:this.template=t}},{key:"getTemplateForFormat",value:function(t,r){var o=r.nationalSignificantNumber,n=r.international,u=r.nationalPrefix,h=r.complexPrefixBeforeNationalSignificantNumber,m=t.pattern();Lm&&(m=m.replace(UF(),"\\d").replace(VF(),"\\d"));var b=BF.match(m)[0];if(!(o.length>b.length)){var _=new RegExp("^"+m+"$"),S=o.replace(/\d/g,Vb);_.test(S)&&(b=S);var T=this.getFormatFormat(t,n),P;if(this.shouldTryNationalPrefixFormattingRule(t,{international:n,nationalPrefix:u})){var F=T.replace(kb,t.nationalPrefixFormattingRule());if(hl(t.nationalPrefixFormattingRule())===(u||"")+hl("$1")&&(T=F,P=!0,u))for(var G=u.length;G>0;)T=T.replace(/\d/,ns),G--}var $=b.replace(new RegExp(m),T).replace(new RegExp(Vb,"g"),ns);return P||(h?$=$p(ns,h.length)+" "+$:u&&($=$p(ns,u.length)+this.getSeparatorAfterNationalPrefix(t)+$)),n&&($=Op($)),$}}},{key:"formatNextNationalNumberDigits",value:function(t){var r=Ew(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,t);if(!r){this.resetFormat();return}return this.populatedNationalNumberTemplate=r[0],this.populatedNationalNumberTemplatePosition=r[1],Ob(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1)}},{key:"shouldTryNationalPrefixFormattingRule",value:function(t,r){var o=r.international,n=r.nationalPrefix;if(t.nationalPrefixFormattingRule()){var u=t.usesNationalPrefix();if(u&&n||!u&&!o)return!0}}}]),i}();function jw(i,e){return QF(i)||$F(i,e)||qF(i,e)||HF()}function HF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qF(i,e){if(i){if(typeof i=="string")return Uw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Uw(i,e)}}function Uw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function $F(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var r=[],o=!0,n=!1,u,h;try{for(t=t.call(i);!(o=(u=t.next()).done)&&(r.push(u.value),!(e&&r.length===e));o=!0);}catch(m){n=!0,h=m}finally{try{!o&&t.return!=null&&t.return()}finally{if(n)throw h}}return r}}function QF(i){if(Array.isArray(i))return i}function GF(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Vw(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function WF(i,e,t){return e&&Vw(i.prototype,e),t&&Vw(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var ZF="["+rs+Mn+"]+",KF=new RegExp("^"+ZF+"$","i"),JF="(?:["+cu+"]["+rs+Mn+"]*|["+rs+Mn+"]+)",XF=new RegExp("[^"+rs+Mn+"]+.*$"),YF=/[^\d\[\]]/,Hw=function(){function i(e){var t=e.defaultCountry,r=e.defaultCallingCode,o=e.metadata,n=e.onNationalSignificantNumberChange;GF(this,i),this.defaultCountry=t,this.defaultCallingCode=r,this.metadata=o,this.onNationalSignificantNumberChange=n}return WF(i,[{key:"input",value:function(t,r){var o=iz(t),n=jw(o,2),u=n[0],h=n[1],m=hl(u),b;return h&&(r.digits||(r.startInternationalNumber(),m||(b=!0))),m&&this.inputDigits(m,r),{digits:m,justLeadingPlus:b}}},{key:"inputDigits",value:function(t,r){var o=r.digits,n=o.length<3&&o.length+t.length>=3;if(r.appendDigits(t),n&&this.extractIddPrefix(r),this.isWaitingForCountryCallingCode(r)){if(!this.extractCountryCallingCode(r))return}else r.appendNationalSignificantNumberDigits(t);r.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(r.getNationalDigits(),function(u){return r.update(u)})}},{key:"isWaitingForCountryCallingCode",value:function(t){var r=t.international,o=t.callingCode;return r&&!o}},{key:"extractCountryCallingCode",value:function(t){var r=Vp("+"+t.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),o=r.countryCallingCode,n=r.number;if(o)return t.setCallingCode(o),t.update({nationalSignificantNumber:n}),!0}},{key:"reset",value:function(t){if(t){this.hasSelectedNumberingPlan=!0;var r=t._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=r&&YF.test(r)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(t,r){if(this.hasSelectedNumberingPlan){var o=kd(t,this.metadata),n=o.nationalPrefix,u=o.nationalNumber,h=o.carrierCode;if(u!==t)return this.onExtractedNationalNumber(n,h,u,t,r),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(t,r,o){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(t,o);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var n=kd(t,this.metadata),u=n.nationalPrefix,h=n.nationalNumber,m=n.carrierCode;if(h!==r)return this.onExtractedNationalNumber(u,m,h,t,o),!0}}},{key:"onExtractedNationalNumber",value:function(t,r,o,n,u){var h,m,b=n.lastIndexOf(o);if(b>=0&&b===n.length-o.length){m=!0;var _=n.slice(0,b);_!==t&&(h=_)}u({nationalPrefix:t,carrierCode:r,nationalSignificantNumber:o,nationalSignificantNumberMatchesInput:m,complexPrefixBeforeNationalSignificantNumber:h}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(t){if(this.extractAnotherNationalSignificantNumber(t.getNationalDigits(),t.nationalSignificantNumber,function(r){return t.update(r)}))return!0;if(this.extractIddPrefix(t))return this.extractCallingCodeAndNationalSignificantNumber(t),!0;if(this.fixMissingPlus(t))return this.extractCallingCodeAndNationalSignificantNumber(t),!0}},{key:"extractIddPrefix",value:function(t){var r=t.international,o=t.IDDPrefix,n=t.digits,u=t.nationalSignificantNumber;if(!(r||o)){var h=Rp(n,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);if(h!==void 0&&h!==n)return t.update({IDDPrefix:n.slice(0,n.length-h.length)}),this.startInternationalNumber(t,{country:void 0,callingCode:void 0}),!0}}},{key:"fixMissingPlus",value:function(t){if(!t.international){var r=Up(t.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),o=r.countryCallingCode,n=r.number;if(o)return t.update({missingPlus:!0}),this.startInternationalNumber(t,{country:t.country,callingCode:o}),!0}}},{key:"startInternationalNumber",value:function(t,r){var o=r.country,n=r.callingCode;t.startInternationalNumber(o,n),t.nationalSignificantNumber&&(t.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(t){this.extractCountryCallingCode(t)&&this.extractNationalSignificantNumber(t.getNationalDigits(),function(r){return t.update(r)})}}]),i}();function ez(i){var e=i.search(JF);if(!(e<0)){i=i.slice(e);var t;return i[0]==="+"&&(t=!0,i=i.slice(1)),i=i.replace(XF,""),t&&(i="+"+i),i}}function tz(i){var e=ez(i)||"";return e[0]==="+"?[e.slice(1),!0]:[e]}function iz(i){var e=tz(i),t=jw(e,2),r=t[0],o=t[1];return KF.test(r)||(r=""),[r,o]}function rz(i,e){return az(i)||sz(i,e)||oz(i,e)||nz()}function nz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oz(i,e){if(i){if(typeof i=="string")return qw(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qw(i,e)}}function qw(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=i[t];return r}function sz(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var r=[],o=!0,n=!1,u,h;try{for(t=t.call(i);!(o=(u=t.next()).done)&&(r.push(u.value),!(e&&r.length===e));o=!0);}catch(m){n=!0,h=m}finally{try{!o&&t.return!=null&&t.return()}finally{if(n)throw h}}return r}}function az(i){if(Array.isArray(i))return i}function lz(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function $w(i,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function cz(i,e,t){return e&&$w(i.prototype,e),t&&$w(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}var Qw=!1,Fm=function(){function i(e,t){lz(this,i),this.metadata=new lr(t);var r=this.getCountryAndCallingCode(e),o=rz(r,2),n=o[0],u=o[1];this.defaultCountry=n,this.defaultCallingCode=u,this.reset()}return cz(i,[{key:"getCountryAndCallingCode",value:function(t){var r,o;return t&&(dl(t)?(r=t.defaultCountry,o=t.defaultCallingCode):r=t),r&&!this.metadata.hasCountry(r)&&(r=void 0),o&&Qw&&this.metadata.isNonGeographicCallingCode(o)&&(r="001"),[r,o]}},{key:"input",value:function(t){var r=this.parser.input(t,this.state),o=r.digits,n=r.justLeadingPlus;if(n)this.formattedOutput="+";else if(o){this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state);var u;if(this.metadata.hasSelectedNumberingPlan()&&(u=this.formatter.format(o,this.state)),u===void 0&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var h=this.state.getNationalDigits();h&&(u=this.formatter.format(h,this.state))}this.formattedOutput=u?this.getFullNumber(u):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var t=this;return this.state=new Sw({onCountryChange:function(o){t.country=o},onCallingCodeChange:function(o,n){t.metadata.selectNumberingPlan(n,o),t.formatter.reset(t.metadata.numberingPlan,t.state),t.parser.reset(t.metadata.numberingPlan)}}),this.formatter=new Rw({state:this.state,metadata:this.metadata}),this.parser=new Hw({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){t.determineTheCountryIfNeeded(),t.formatter.reset(t.metadata.numberingPlan,t.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){var t=this.state.digits;if(t)return this._getCountry()}},{key:"_getCountry",value:function(){var t=this.state.country;if(!(Qw&&t==="001"))return t}},{key:"determineTheCountryIfNeeded",value:function(){(!this.state.country||this.isCountryCallingCodeAmbiguous())&&this.determineTheCountry()}},{key:"getFullNumber",value:function(t){var r=this;if(this.isInternational()){var o=function(h){return r.formatter.getInternationalPrefixBeforeCountryCallingCode(r.state,{spacing:!!h})+h},n=this.state.callingCode;return o(n?t?"".concat(n," ").concat(t):n:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return t}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var t=this.state,r=t.nationalSignificantNumber,o=t.complexPrefixBeforeNationalSignificantNumber,n=t.nationalPrefix,u=r,h=o||n;return h&&(u=h+u),u}},{key:"getNonFormattedNumber",value:function(){var t=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(t?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var t=this.getNonFormattedNumber();if(t)return t.replace(/[\+\d]/g,ns)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var t=this.state.callingCode,r=this.metadata.getCountryCodesForCallingCode(t);return r&&r.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(Hp(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,defaultCountry:this.defaultCountry,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var t=this.state,r=t.digits,o=t.callingCode,n=t.country,u=t.nationalSignificantNumber;if(r){if(this.isInternational())return o?"+"+o+u:"+"+r;if(n||o){var h=n?this.metadata.countryCallingCode():o;return"+"+h+u}}}},{key:"getNumber",value:function(){var t=this.state,r=t.nationalSignificantNumber,o=t.carrierCode,n=t.callingCode,u=this._getCountry();if(r&&!(!u&&!n)){if(u&&u===this.defaultCountry){var h=new lr(this.metadata.metadata);h.selectNumberingPlan(u);var m=h.numberingPlan.callingCode(),b=this.metadata.getCountryCodesForCallingCode(m);if(b.length>1){var _=jp(r,{countries:b,defaultCountry:this.defaultCountry,metadata:this.metadata.metadata});_&&(u=_)}}var S=new wd(u||n,r,this.metadata.metadata);return o&&(S.carrierCode=o),S}}},{key:"isPossible",value:function(){var t=this.getNumber();return t?t.isPossible():!1}},{key:"isValid",value:function(){var t=this.getNumber();return t?t.isValid():!1}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}]),i}();function zm(i,e,t){if(e[i])return new wd(i,e[i],t)}function Nm(){return lu(qp,arguments)}function Cd(i){return Fm.call(this,i,_d)}Cd.prototype=Object.create(Fm.prototype,{});Cd.prototype.constructor=Cd;function jb(){return lu(Da,arguments)}function Ed(){return lr.call(this,_d)}Ed.prototype=Object.create(lr.prototype,{});Ed.prototype.constructor=Ed;function Hb(){return lu(zm,arguments)}var uz=[["Afghanistan (\u202B\u0627\u0641\u063A\u0627\u0646\u0633\u062A\u0627\u0646\u202C\u200E)","af","93"],["Albania (Shqip\xEBri)","al","355"],["Algeria (\u202B\u0627\u0644\u062C\u0632\u0627\u0626\u0631\u202C\u200E)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (\u0540\u0561\u0575\u0561\u057D\u057F\u0561\u0576)","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (\xD6sterreich)","at","43"],["Azerbaijan (Az\u0259rbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (\u202B\u0627\u0644\u0628\u062D\u0631\u064A\u0646\u202C\u200E)","bh","973"],["Bangladesh (\u09AC\u09BE\u0982\u09B2\u09BE\u09A6\u09C7\u09B6)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u044C)","by","375"],["Belgium (Belgi\xEB)","be","32"],["Belize","bz","501"],["Benin (B\xE9nin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (\u0F60\u0F56\u0FB2\u0F74\u0F42)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (\u0411\u043E\u0441\u043D\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043E\u0432\u0438\u043D\u0430)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (\u0411\u044A\u043B\u0433\u0430\u0440\u0438\u044F)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (\u1780\u1798\u17D2\u1796\u17BB\u1787\u17B6)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (R\xE9publique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (\u4E2D\u56FD)","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros (\u202B\u062C\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202C\u200E)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["C\xF4te d\u2019Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Cura\xE7ao","cw","599",0],["Cyprus (\u039A\u03CD\u03C0\u03C1\u03BF\u03C2)","cy","357"],["Czech Republic (\u010Cesk\xE1 republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Rep\xFAblica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (\u202B\u0645\u0635\u0631\u202C\u200E)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (F\xF8royar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane fran\xE7aise)","gf","594"],["French Polynesia (Polyn\xE9sie fran\xE7aise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (\u10E1\u10D0\u10E5\u10D0\u10E0\u10D7\u10D5\u10D4\u10DA\u10DD)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (\u0395\u03BB\u03BB\u03AC\u03B4\u03B1)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guin\xE9e)","gn","224"],["Guinea-Bissau (Guin\xE9 Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (\u9999\u6E2F)","hk","852"],["Hungary (Magyarorsz\xE1g)","hu","36"],["Iceland (\xCDsland)","is","354"],["India (\u092D\u093E\u0930\u0924)","in","91"],["Indonesia","id","62"],["Iran (\u202B\u0627\u06CC\u0631\u0627\u0646\u202C\u200E)","ir","98"],["Iraq (\u202B\u0627\u0644\u0639\u0631\u0627\u0642\u202C\u200E)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (\u202B\u05D9\u05E9\u05E8\u05D0\u05DC\u202C\u200E)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (\u65E5\u672C)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (\u202B\u0627\u0644\u0623\u0631\u062F\u0646\u202C\u200E)","jo","962"],["Kazakhstan (\u041A\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043D)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (\u202B\u0627\u0644\u0643\u0648\u064A\u062A\u202C\u200E)","kw","965"],["Kyrgyzstan (\u041A\u044B\u0440\u0433\u044B\u0437\u0441\u0442\u0430\u043D)","kg","996"],["Laos (\u0EA5\u0EB2\u0EA7)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (\u202B\u0644\u0628\u0646\u0627\u0646\u202C\u200E)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (\u202B\u0644\u064A\u0628\u064A\u0627\u202C\u200E)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (\u6FB3\u9580)","mo","853"],["North Macedonia (\u041C\u0430\u043A\u0435\u0434\u043E\u043D\u0438\u0458\u0430)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (\u202B\u0645\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u0627\u202C\u200E)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (M\xE9xico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (\u041C\u043E\u043D\u0433\u043E\u043B)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (\u202B\u0627\u0644\u0645\u063A\u0631\u0628\u202C\u200E)","ma","212",0],["Mozambique (Mo\xE7ambique)","mz","258"],["Myanmar (Burma) (\u1019\u103C\u1014\u103A\u1019\u102C)","mm","95"],["Namibia (Namibi\xEB)","na","264"],["Nauru","nr","674"],["Nepal (\u0928\u0947\u092A\u093E\u0932)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Cal\xE9donie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (\uC870\uC120 \uBBFC\uC8FC\uC8FC\uC758 \uC778\uBBFC \uACF5\uD654\uAD6D)","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (\u202B\u0639\u064F\u0645\u0627\u0646\u202C\u200E)","om","968"],["Pakistan (\u202B\u067E\u0627\u06A9\u0633\u062A\u0627\u0646\u202C\u200E)","pk","92"],["Palau","pw","680"],["Palestine (\u202B\u0641\u0644\u0633\u0637\u064A\u0646\u202C\u200E)","ps","970"],["Panama (Panam\xE1)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per\xFA)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (\u202B\u0642\u0637\u0631\u202C\u200E)","qa","974"],["R\xE9union (La R\xE9union)","re","262",0],["Romania (Rom\xE2nia)","ro","40"],["Russia (\u0420\u043E\u0441\u0441\u0438\u044F)","ru","7",0],["Rwanda","rw","250"],["Saint Barth\xE9lemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie fran\xE7aise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["S\xE3o Tom\xE9 and Pr\xEDncipe (S\xE3o Tom\xE9 e Pr\xEDncipe)","st","239"],["Saudi Arabia (\u202B\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629\u202C\u200E)","sa","966"],["Senegal (S\xE9n\xE9gal)","sn","221"],["Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (\uB300\uD55C\uBBFC\uAD6D)","kr","82"],["South Sudan (\u202B\u062C\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062F\u0627\u0646\u202C\u200E)","ss","211"],["Spain (Espa\xF1a)","es","34"],["Sri Lanka (\u0DC1\u0DCA\u200D\u0DBB\u0DD3 \u0DBD\u0D82\u0D9A\u0DCF\u0DC0)","lk","94"],["Sudan (\u202B\u0627\u0644\u0633\u0648\u062F\u0627\u0646\u202C\u200E)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (\u202B\u0633\u0648\u0631\u064A\u0627\u202C\u200E)","sy","963"],["Taiwan (\u53F0\u7063)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (\u0E44\u0E17\u0E22)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tristan da Cunha","ta","290"],["Tunisia (\u202B\u062A\u0648\u0646\u0633\u202C\u200E)","tn","216"],["Turkey (T\xFCrkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (\u0423\u043A\u0440\u0430\u0457\u043D\u0430)","ua","380"],["United Arab Emirates (\u202B\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u062A\u062D\u062F\u0629\u202C\u200E)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (O\u02BBzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt\xE0 del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Vi\u1EC7t Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (\u202B\u0627\u0644\u0635\u062D\u0631\u0627\u0621 \u0627\u0644\u063A\u0631\u0628\u064A\u0629\u202C\u200E)","eh","212",1,["5288","5289"]],["Yemen (\u202B\u0627\u0644\u064A\u0645\u0646\u202C\u200E)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["\xC5land Islands","ax","358",1,["18"]]],Td=uz.map(i=>({id:i[1].toUpperCase(),label:`${i[0]} +${i[2]}`,name:i[0],iso2:i[1].toUpperCase(),dialCode:i[2],priority:i[3]||0,areaCodes:i[4]||null}));var qb={AC:"40123",AD:"312345",AE:"501234567",AF:"701234567",AG:"2684641234",AI:"2642351234",AL:"672123456",AM:"77123456",AO:"923123456",AR:"91123456789",AS:"6847331234",AT:"664123456",AU:"412345678",AW:"5601234",AX:"412345678",AZ:"401234567",BA:"61123456",BB:"2462501234",BD:"1812345678",BE:"470123456",BF:"70123456",BG:"43012345",BH:"36001234",BI:"79561234",BJ:"90011234",BL:"690001234",BM:"4413701234",BN:"7123456",BO:"71234567",BQ:"3181234",BR:"11961234567",BS:"2423591234",BT:"17123456",BW:"71123456",BY:"294911911",BZ:"6221234",CA:"5062345678",CC:"412345678",CD:"991234567",CF:"70012345",CG:"061234567",CH:"781234567",CI:"0123456789",CK:"71234",CL:"221234567",CM:"671234567",CN:"13123456789",CO:"3211234567",CR:"83123456",CU:"51234567",CV:"9911234",CW:"95181234",CX:"412345678",CY:"96123456",CZ:"601123456",DE:"15123456789",DJ:"77831001",DK:"32123456",DM:"7672251234",DO:"8092345678",DZ:"551234567",EC:"991234567",EE:"51234567",EG:"1001234567",EH:"650123456",ER:"7123456",ES:"612345678",ET:"911234567",FI:"412345678",FJ:"7012345",FK:"51234",FM:"3501234",FO:"211234",FR:"612345678",GA:"06031234",GB:"7400123456",GD:"4734031234",GE:"555123456",GF:"694201234",GG:"7781123456",GH:"231234567",GI:"57123456",GL:"221234",GM:"3012345",GN:"601123456",GP:"690001234",GQ:"222123456",GR:"6912345678",GT:"51234567",GU:"6713001234",GW:"955012345",GY:"6091234",HK:"51234567",HN:"91234567",HR:"921234567",HT:"34101234",HU:"201234567",ID:"812345678",IE:"850123456",IL:"502345678",IM:"7924123456",IN:"8123456789",IO:"3801234",IQ:"7912345678",IR:"9123456789",IS:"6111234",IT:"3123456789",JE:"7797712345",JM:"8762101234",JO:"790123456",JP:"9012345678",KE:"712123456",KG:"700123456",KH:"91234567",KI:"72001234",KM:"3212345",KN:"8697652917",KP:"1921234567",KR:"1020000000",KW:"50012345",KY:"3453231234",KZ:"7710009998",LA:"2023123456",LB:"71123456",LC:"7582845678",LI:"660234567",LK:"712345678",LR:"770123456",LS:"50123456",LT:"61234567",LU:"628123456",LV:"21234567",LY:"912345678",MA:"650123456",MC:"612345678",MD:"62112345",ME:"67622901",MF:"690001234",MG:"321234567",MH:"2351234",MK:"72345678",ML:"65012345",MM:"92123456",MN:"88123456",MO:"66123456",MP:"6702345678",MQ:"696201234",MR:"22123456",MS:"6644923456",MT:"96961234",MU:"52512345",MV:"7712345",MW:"991234567",MX:"12221234567",MY:"123456789",MZ:"821234567",NA:"811234567",NC:"751234",NE:"93123456",NF:"381234",NG:"8021234567",NI:"81234567",NL:"612345678",NO:"40612345",NP:"9841234567",NR:"5551234",NU:"8884012",NZ:"211234567",OM:"92123456",PA:"61234567",PE:"912345678",PF:"87123456",PG:"70123456",PH:"9051234567",PK:"3012345678",PL:"512345678",PM:"551234",PR:"7872345678",PS:"599123456",PT:"912345678",PW:"6201234",PY:"961456789",QA:"33123456",RE:"692123456",RO:"712034567",RS:"601234567",RU:"9123456789",RW:"720123456",SA:"512345678",SB:"7421234",SC:"2510123",SD:"911231234",SE:"701234567",SG:"81234567",SH:"51234",SI:"31234567",SJ:"41234567",SK:"912123456",SL:"25123456",SM:"66661212",SN:"701234567",SO:"71123456",SR:"7412345",SS:"977123456",ST:"9812345",SV:"70123456",SX:"7215205678",SY:"944567890",SZ:"76123456",TA:"8999",TC:"6492311234",TD:"63012345",TG:"90112345",TH:"812345678",TJ:"917123456",TK:"7290",TL:"77212345",TM:"66123456",TN:"20123456",TO:"7715123",TR:"5012345678",TT:"8682911234",TV:"901234",TW:"912345678",TZ:"621234567",UA:"501234567",UG:"712345678",US:"2015550123",UY:"94231234",UZ:"912345678",VA:"3123456789",VC:"7844301234",VE:"4121234567",VG:"2843001234",VI:"3406421234",VN:"912345678",VU:"5912345",WF:"821234",WS:"7212345",XK:"43201234",YE:"712345678",YT:"639012345",ZA:"711234567",ZM:"955123456",ZW:"712345678"};var $b=i=>Object.fromEntries(Object.entries({countryCode:i?i.country:null,isValid:i?i.isValid():!1,isPossible:i?i.isPossible():!1,phoneNumber:i?i.number:null,countryCallingCode:i?i.countryCallingCode:null,formattedNumber:i?i.formatInternational():null,nationalNumber:i?i.nationalNumber:null,formatInternational:i?i.formatInternational():null,formatOriginal:i?i.formatInternational().slice(i.countryCallingCode.length+1).trim():null,formatNational:i?i.formatNational():null,uri:i?i.getURI():null,e164:i?i.number:null}).filter(([,t])=>t!==null)),Gw=(i,{format:e,spaces:t}={format:"national",spaces:!0})=>{let r=Hb(i,qb);if(r)switch(e){case"international":return t?r.formatInternational():r.number;default:return t?r.formatInternational().slice(r.countryCallingCode.length+1).trim():r.nationalNumber}else throw new Error(`No country found with this country code: ${i}`)};var dz=i=>{let e=/^\d+$/,t="+"+jb(i),o=new Ed().numberingPlan?.leadingDigits();return o&&e.test(o)&&(t+=o),t};var Om=(i,{country:e,countries:t,required:r}={})=>{if(i==="+")return e;let o=hz(i);return o&&(!t||t.indexOf(o)>=0)?o:e&&!r&&!pz(i,e)?void 0:e},hz=i=>{let e=new Cd;return e.input(i),e.getCountry()};var pz=(i,e)=>{let t=dz(e),r=0;for(;r<i.length&&r<t.length;){if(i[r]!==t[r])return!1;r++}return!0};var fz=(i,{spaces:e}={spaces:!0})=>{let t={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","\uFF10":"0","\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9"};return e&&new RegExp("[\\t\\n\\v\\f\\r \\u00a0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u200b\\u2028\\u2029\\u3000]","g").test(i)?i:t[i]},Qb=(i,{allowSpaces:e,parseCharacter:t})=>{let r="";for(let o=0;o<i.length;o++){let n=t(i[o],r,e);n!==void 0&&(r+=n)}return r},Gb=(i,e,t)=>i==="+"&&!e?i:fz(i,{spaces:t});var Ww=(i,{handler:e,spaces:t})=>{let r=o=>{if(i&&i.contains(o.target)){let n=o.target.value,u=Qb(n,{parseCharacter:Gb,allowSpaces:t});i.value=u,e(u)}};return i.addEventListener("input",r,!0),{update(o){(o.value===null||o.value==="")&&(i.value="")},destroy(){i.removeEventListener("input",r,!0)}}};var Zw=(i,e)=>{let{subscribe:t,update:r}=un(i);return{subscribe:t,set:o=>{r(n=>(e(n,o),o))}}};function mz(i){let e,t,r,o;return{c(){e=Ke("input"),J(e,"autocomplete",i[1]),J(e,"class",i[2]),e.disabled=i[3],J(e,"id",i[4]),J(e,"name",i[5]),e.readOnly=i[6],e.required=i[7],J(e,"size",i[8]),J(e,"placeholder",i[10]),J(e,"type","tel"),e.value=i[9]},m(n,u){Ne(n,e,u),r||(o=[It(e,"beforeinput",i[19]),It(e,"blur",i[20]),It(e,"change",i[21]),It(e,"click",i[22]),It(e,"focus",i[23]),It(e,"input",i[24]),It(e,"keydown",i[25]),It(e,"keypress",i[26]),It(e,"keyup",i[27]),It(e,"paste",i[28]),Gh(t=Ww.call(null,e,{handler:i[12],spaces:i[11].spaces,value:i[0]}))],r=!0)},p(n,u){u[0]&2&&J(e,"autocomplete",n[1]),u[0]&4&&J(e,"class",n[2]),u[0]&8&&(e.disabled=n[3]),u[0]&16&&J(e,"id",n[4]),u[0]&32&&J(e,"name",n[5]),u[0]&64&&(e.readOnly=n[6]),u[0]&128&&(e.required=n[7]),u[0]&256&&J(e,"size",n[8]),u[0]&1024&&J(e,"placeholder",n[10]),u[0]&512&&e.value!==n[9]&&(e.value=n[9]),t&&zo(t.update)&&u[0]&1&&t.update.call(null,{handler:n[12],spaces:n[11].spaces,value:n[0]})},i:gt,o:gt,d(n){n&&ze(e),r=!1,kr(o)}}}function gz(i,e,t){let r,o,n=yo(),u={autoPlaceholder:!0,spaces:!0,invalidateOnCountryChange:!1,format:"national"},{autocomplete:h=null}=e,{class:m=""}=e,{disabled:b=!1}=e,{id:_="phone-input-"+new Date().getTime().toString(36)+Math.random().toString(36).slice(2)}=e,{name:S=null}=e,{placeholder:T=null}=e,{readonly:P=null}=e,{required:F=null}=e,{size:G=null}=e,{value:$}=e,{country:ee}=e,{detailedValue:ue=null}=e,{valid:fe=!0}=e,{options:Y=u}=e,je=$,Ce=ee,xe={...u,...Y},Le=Fe=>{b||P||st(Fe,ee)},we=Fe=>(Fe!==ee&&(t(14,ee=Fe),Ce=ee,n("updateCountry",ee)),ee),st=(Fe,Kt=null)=>{if(Fe!==null){let ti=Om(Fe);ti&&ti!==Ce&&we(ti);try{t(15,ue=$b(Nm(Fe,ti??Kt??void 0)))}catch(Wt){if(Wt instanceof ps)t(15,ue={isValid:!1,error:Wt.message}),n("parseError",Wt.message);else throw Wt}let Xi=xe.format==="national"?"nationalNumber":"e164",nt=xe.format==="national"?"formatOriginal":"formatInternational";xe.spaces&&ue?.[nt]?t(9,je=ue[nt]??null):ue?.[Xi]&&t(9,je=ue[Xi]??null),t(0,$=ue?.e164??Fe??null),t(16,fe=ue?.isValid??!1),n("updateValid",fe),n("updateValue",$),n("updateDetailedValue",ue)}else Fe===null&&Kt!==null?Kt!==Ce&&(Ce=Kt,t(16,fe=!Y.invalidateOnCountryChange),t(0,$=null),t(9,je=null),t(15,ue=null),n("updateValid",fe),n("updateValue",$),n("updateDetailedValue",ue)):(t(16,fe=!0),t(0,$=null),t(15,ue=null),Ce=Kt,n("updateValid",fe),n("updateDetailedValue",ue),t(9,je=null))},He=!0,rt=Zw(null,()=>{He||st(null,ee),He=!1});Fi(i,rt,Fe=>t(31,o=Fe)),Sr(()=>{$&&st($,Om($)||ee)});function jt(Fe){ji.call(this,i,Fe)}function $t(Fe){ji.call(this,i,Fe)}function dt(Fe){ji.call(this,i,Fe)}function vt(Fe){ji.call(this,i,Fe)}function bt(Fe){ji.call(this,i,Fe)}function Qt(Fe){ji.call(this,i,Fe)}function Yt(Fe){ji.call(this,i,Fe)}function ki(Fe){ji.call(this,i,Fe)}function oi(Fe){ji.call(this,i,Fe)}function tt(Fe){ji.call(this,i,Fe)}return i.$$set=Fe=>{"autocomplete"in Fe&&t(1,h=Fe.autocomplete),"class"in Fe&&t(2,m=Fe.class),"disabled"in Fe&&t(3,b=Fe.disabled),"id"in Fe&&t(4,_=Fe.id),"name"in Fe&&t(5,S=Fe.name),"placeholder"in Fe&&t(17,T=Fe.placeholder),"readonly"in Fe&&t(6,P=Fe.readonly),"required"in Fe&&t(7,F=Fe.required),"size"in Fe&&t(8,G=Fe.size),"value"in Fe&&t(0,$=Fe.value),"country"in Fe&&t(14,ee=Fe.country),"detailedValue"in Fe&&t(15,ue=Fe.detailedValue),"valid"in Fe&&t(16,fe=Fe.valid),"options"in Fe&&t(18,Y=Fe.options)},i.$$.update=()=>{i.$$.dirty[0]&16384&&En(rt,o=ee,o),i.$$.dirty[0]&147456&&t(10,r=xe.autoPlaceholder&&ee?Gw(ee,{format:xe.format,spaces:xe.spaces}):T),i.$$.dirty[0]&33281&&$===null&&je!==null&&ue!==null&&(t(9,je=null),t(15,ue=null),n("updateDetailedValue",ue))},[$,h,m,b,_,S,P,F,G,je,r,xe,Le,rt,ee,ue,fe,T,Y,jt,$t,dt,vt,bt,Qt,Yt,ki,oi,tt]}var Wb=class extends pt{constructor(e){super(),yt(this,e,gz,mz,ut,{autocomplete:1,class:2,disabled:3,id:4,name:5,placeholder:17,readonly:6,required:7,size:8,value:0,country:14,detailedValue:15,valid:16,options:18},null,[-1,-1])}},Zb=Wb;function Kw(i,e,t){let r=i.slice();return r[22]=e[t],r}function Jw(i,e){let t,r=e[22].iso2+"",o,n,u=e[22].dialCode+"",h,m,b,_,S;return{key:i,first:null,c(){t=Ke("option"),o=nr(r),n=nr(" (+"),h=nr(u),m=nr(`)
      `),t.__value=b=e[22].iso2,zs(t,t.__value),t.selected=_=e[22].iso2===e[3],J(t,"aria-selected",S=e[22].iso2===e[3]),this.first=t},m(T,P){Ne(T,t,P),qe(t,o),qe(t,n),qe(t,h),qe(t,m)},p(T,P){e=T,P&8&&_!==(_=e[22].iso2===e[3])&&(t.selected=_),P&8&&S!==(S=e[22].iso2===e[3])&&J(t,"aria-selected",S)},d(T){T&&ze(t)}}}function Xw(i){let e,t,r,o,n;return{c(){e=Ke("input"),r=Ot(),o=Ke("input"),J(e,"type","hidden"),J(e,"name",i[7]),e.value=t=i[2].e164,J(o,"type","hidden"),J(o,"name",i[8]),o.value=n=i[2].countryCode},m(u,h){Ne(u,e,h),Ne(u,r,h),Ne(u,o,h)},p(u,h){h&128&&J(e,"name",u[7]),h&4&&t!==(t=u[2].e164)&&(e.value=t),h&256&&J(o,"name",u[8]),h&4&&n!==(n=u[2].countryCode)&&(o.value=n)},d(u){u&&(ze(e),ze(r),ze(o))}}}function yz(i){let e,t,r,o,n,u,h=[],m=new Map,b,_,S,T,P,F,G,$,ee,ue,fe,Y,je,Ce=On(Td),xe=dt=>dt[22].id;for(let dt=0;dt<Ce.length;dt+=1){let vt=Kw(i,Ce,dt),bt=xe(vt);m.set(bt,h[dt]=Jw(bt,vt))}function Le(dt){i[13](dt)}function we(dt){i[14](dt)}function st(dt){i[15](dt)}function He(dt){i[16](dt)}function zt(dt){i[17](dt)}function rt(dt){i[18](dt)}let jt={required:!0,options:i[6],class:`bg-gray-50  text-gray-900 text-xs sm:text-sm 
    block p-2.5 dark:bg-gray-700  dark:placeholder-gray-400
  dark:text-white 
     rounded-r-lg w-full `+(i[1]?"border border-gray-300 border-l-gray-100 dark:border-l-gray-700 dark:border-gray-600":"border-2 border-red-600")};i[3]!==void 0&&(jt.country=i[3]),i[1]!==void 0&&(jt.valid=i[1]),i[0]!==void 0&&(jt.value=i[0]),i[2]!==void 0&&(jt.detailedValue=i[2]),i[4]!==void 0&&(jt.disabled=i[4]),i[5]!==void 0&&(jt.readonly=i[5]),_=new Zb({props:jt}),Ri.push(()=>Wr(_,"country",Le)),Ri.push(()=>Wr(_,"valid",we)),Ri.push(()=>Wr(_,"value",st)),Ri.push(()=>Wr(_,"detailedValue",He)),Ri.push(()=>Wr(_,"disabled",zt)),Ri.push(()=>Wr(_,"readonly",rt));let $t=i[9]&&i[2]&&Xw(i);return{c(){e=Ke("div"),t=Ke("select"),r=Ke("option"),o=nr("Country");for(let dt=0;dt<h.length;dt+=1)h[dt].c();b=Ot(),qt(_.$$.fragment),ee=Ot(),$t&&$t.c(),ue=Zi(),r.__value=n=null,zs(r,r.__value),r.hidden=u=i[3]!==null,J(t,"class","form-select appearance-none w-24 sm:w-40 bg-gray-50 border border-gray-300 text-gray-900 text-xs sm:text-sm focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 bg-clip-padding bg-no-repeat cursor-pointer rounded-l-lg m-0 focus:outline-none"),J(t,"aria-label","Default select example"),J(t,"name","Country"),i[3]===void 0&&wa(()=>i[12].call(t)),J(e,"class","flex w-full")},m(dt,vt){Ne(dt,e,vt),qe(e,t),qe(t,r),qe(r,o);for(let bt=0;bt<h.length;bt+=1)h[bt]&&h[bt].m(t,null);ag(t,i[3],!0),qe(e,b),Ut(_,e,null),Ne(dt,ee,vt),$t&&$t.m(dt,vt),Ne(dt,ue,vt),fe=!0,Y||(je=It(t,"change",i[12]),Y=!0)},p(dt,[vt]){(!fe||vt&8&&u!==(u=dt[3]!==null))&&(r.hidden=u),vt&8&&(Ce=On(Td),h=Kh(h,vt,xe,1,dt,Ce,m,t,u5,Jw,null,Kw)),vt&8&&ag(t,dt[3]);let bt={};vt&64&&(bt.options=dt[6]),vt&2&&(bt.class=`bg-gray-50  text-gray-900 text-xs sm:text-sm 
    block p-2.5 dark:bg-gray-700  dark:placeholder-gray-400
  dark:text-white 
     rounded-r-lg w-full `+(dt[1]?"border border-gray-300 border-l-gray-100 dark:border-l-gray-700 dark:border-gray-600":"border-2 border-red-600")),!S&&vt&8&&(S=!0,bt.country=dt[3],Gr(()=>S=!1)),!T&&vt&2&&(T=!0,bt.valid=dt[1],Gr(()=>T=!1)),!P&&vt&1&&(P=!0,bt.value=dt[0],Gr(()=>P=!1)),!F&&vt&4&&(F=!0,bt.detailedValue=dt[2],Gr(()=>F=!1)),!G&&vt&16&&(G=!0,bt.disabled=dt[4],Gr(()=>G=!1)),!$&&vt&32&&($=!0,bt.readonly=dt[5],Gr(()=>$=!1)),_.$set(bt),dt[9]&&dt[2]?$t?$t.p(dt,vt):($t=Xw(dt),$t.c(),$t.m(ue.parentNode,ue)):$t&&($t.d(1),$t=null)},i(dt){fe||(Pe(_.$$.fragment,dt),fe=!0)},o(dt){Be(_.$$.fragment,dt),fe=!1},d(dt){dt&&(ze(e),ze(ee),ze(ue));for(let vt=0;vt<h.length;vt+=1)h[vt].d();Vt(_),$t&&$t.d(dt),Y=!1,je()}}}var bz=200;function vz(i,e,t){let r,{value:o=null}=e,{country:n=null}=e,{valid:u}=e,{detailedValue:h=null}=e,{options:m}=e,{disabled:b=!1}=e,{readonly:_=!1}=e,{formInputNameE164:S="phone_number_e164"}=e,{formInputNameCountryCode:T="country_code"}=e,{saveEventName:P="savePhoneNumber"}=e,{componentID:F="phone-number-picker"}=e;Td.sort();let G,$=!0;Xa(()=>{r&&(ee(h),$=!1,clearTimeout(G),G=setTimeout(()=>{$=!0},bz))});function ee(we){let st=document.getElementById(F);if(st){let He=new CustomEvent(P,{detail:{detailedValue:we}});st.dispatchEvent(He)}}function ue(){n=n5(this),t(3,n)}function fe(we){n=we,t(3,n)}function Y(we){u=we,t(1,u)}function je(we){o=we,t(0,o)}function Ce(we){h=we,t(2,h)}function xe(we){b=we,t(4,b)}function Le(we){_=we,t(5,_)}return i.$$set=we=>{"value"in we&&t(0,o=we.value),"country"in we&&t(3,n=we.country),"valid"in we&&t(1,u=we.valid),"detailedValue"in we&&t(2,h=we.detailedValue),"options"in we&&t(6,m=we.options),"disabled"in we&&t(4,b=we.disabled),"readonly"in we&&t(5,_=we.readonly),"formInputNameE164"in we&&t(7,S=we.formInputNameE164),"formInputNameCountryCode"in we&&t(8,T=we.formInputNameCountryCode),"saveEventName"in we&&t(10,P=we.saveEventName),"componentID"in we&&t(11,F=we.componentID)},i.$$.update=()=>{i.$$.dirty&7&&t(9,r=o&&h&&u)},[o,u,h,n,b,_,m,S,T,r,P,F,ue,fe,Y,je,Ce,xe,Le]}var Kb=class extends pt{constructor(e){super(),yt(this,e,vz,yz,ut,{value:0,country:3,valid:1,detailedValue:2,options:6,disabled:4,readonly:5,formInputNameE164:7,formInputNameCountryCode:8,saveEventName:10,componentID:11})}},Yw=Kb;var ha=class{constructor(){this.type="service",this.name="",this.invisible=!1,this.noRecolor=!1,this.icon="",this.color="#333",this.template=()=>"",this.handlers=()=>{},this.stop=()=>{},this.supports=()=>!0}};var Qp={},e8=i=>{let e={};for(let t in i)if(i.hasOwnProperty(t))if(typeof i[t]=="object"){let r=e8(i[t]);for(let o in r)r.hasOwnProperty(o)&&(e[t+"."+o]=r[o])}else e[t]=i[t];return e},t8=i=>{Qp=e8(i)},ss=(i,e)=>{try{let t=Qp[i];return typeof e=="string"&&(e=[e]),e&&e.forEach((r,o)=>{t=t.replace(`$${o+1}$`,r)}),Qp.helper&&typeof Qp.helper=="function"&&(t=Qp.helper(t)),t}catch{return""}};var Xb=i=>{if(!i)return[];let e=[];return typeof i=="string"?e.push(...Array.prototype.slice.call(document.querySelectorAll(i))):Array.isArray(i)?i.forEach(t=>{typeof t=="string"?e.push(...Array.prototype.slice.call(document.querySelectorAll(t))):e.push(t)}):e.push(i),e},i8=[],Cr=(i,e,t)=>{i8.find(o=>o.element===i&&o.type===e)||(i.addEventListener(e,t),i8.push({element:i,type:e}))},Jb=i=>{if(window.requestAnimationFrame)return window.requestAnimationFrame(i);setTimeout(()=>{i(0)},100)},du=(i,e)=>new Promise(t=>{Jb(()=>{let r=e.parentElement,o=e.getBoundingClientRect();if(!r)return;let n=r.getBoundingClientRect();o.height<o.width?(e.style.height=`${n.height}px`,e.style.width="auto"):(e.style.width=`${n.width}px`,e.style.height="auto"),Jb(()=>{let u=e.getBoundingClientRect();u.height>n.height?(e.style.height=`${n.height}px`,e.style.width="auto"):u.width>n.width&&(e.style.width=`${n.width}px`,e.style.height="auto"),Jb(()=>{let h=i.uppload.container.querySelector(".uppload-effect");h&&(h.style.opacity="1"),t()})})})}),r8=(i,e)=>new Promise(t=>{let r=URL.createObjectURL(i),o=document.createElement("canvas"),n=document.createElement("img"),u=e.maxSize||[e.maxWidth||1/0,e.maxHeight||1/0];n.src=r,n.onload=()=>{let h=e.compressionToMime||"image/jpeg",m=e.compression||1,b=n.width/n.height;n.width>u[0]&&(n.width=u[0],n.height=n.width*(1/b)),n.height>u[1]&&(n.height=u[1],n.width=n.height*b),o.width=n.width,o.height=n.height;let _=o.getContext("2d");if(!_)return t(i);_.clearRect(0,0,o.width,o.height),_.drawImage(n,0,0,o.width,o.height),fl(o,h,m).then(S=>{if(S)return t(S);t(i)})},Cr(n,"error",()=>t(i))}),_z=i=>{let e=atob(i.split(",")[1]),t=i.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),o=new Uint8Array(r);for(let n=0;n<e.length;n++)o[n]=e.charCodeAt(n);return new Blob([r],{type:t})},fl=(i,e,t)=>new Promise((r,o)=>{let n=i.getContext("2d"),u=!1;if(n)try{let h=n.getImageData(0,0,i.width,i.height).data;for(let m=0;m<h.length;m+=4)h[m+3]<255&&(u=!0)}catch{}if(u&&e!=="image/webp"&&(e=void 0,t=void 0),typeof i.toBlob=="function")i.toBlob(h=>{h&&r(h),o(new Error("errors.image_error"))},e,t);else if(typeof i.toDataURL=="function"){let h=i.toDataURL(e,t);r(_z(h))}else o(new Error("errors.image_error"))});var Gp=(i,e)=>e.noRecolor?i:i.replace(/#000/g,e.color||"#000");var _8=ws(b8());function Rz(i){return i=i||Object.create(null),{on:function(t,r){(i[t]||(i[t]=[])).push(r)},off:function(t,r){i[t]&&i[t].splice(i[t].indexOf(r)>>>0,1)},emit:function(t,r){(i[t]||[]).slice().map(function(o){o(r)}),(i["*"]||[]).slice().map(function(o){o(t,r)})}}}var v8=Rz;var Uz=(i,e,t)=>{try{return new File([i],e||"file_name",{lastModified:(t||new Date).getTime(),type:i.type})}catch{return i}},Md=(i,e,t,r)=>({name:e,blob:i,lastModified:r,type:t}),Bm=i=>{let e=i.blob;return i.lastModified=i.lastModified||new Date,Uz(e,i.name,i.lastModified)};var Rm=class extends ha{constructor(){super(...arguments),this.name="default",this.invisible=!0,this.template=()=>`<p>${ss("services.default.heading")}</p>`}},Um=class extends ha{constructor(){super(...arguments),this.name="uploading",this.invisible=!0,this.template=()=>`<div class="uppload-loader">
  <div></div>
    <p class="uppload-loader-text">${ss("uploading")}<span class="progress"></span></p>
  </div>`}},Wp=class{constructor(e){this.services=[new Rm,new Um],this.effects=[],this.isOpen=!1,this.activeService="default",this.activeEffect="",this.file={blob:new Blob},this.lang={},this.emitter=v8(),this.uploadProgress=0,this.inline=!1,this.transitionDuration=300,this.settings={},this.updateSettings(e||{});let t=document.createElement("div");this.renderContainer(),t.classList.add("uppload-container");let r=document.body;r&&r.appendChild(t),this.container=t,this.focusTrap=(0,_8.default)(this.container,{initialFocus:()=>this.container.querySelector("button")}),requestAnimationFrame(()=>this.update())}updateSettings(e){this.settings=Object.assign(Object.assign({},this.settings),e),this.emitter.emit("settingsUpdated",e),e.lang&&t8(e.lang),e.defaultService&&(this.activeService=e.defaultService),e.lang&&(this.lang=e.lang),e.transitionDuration&&(this.transitionDuration=e.transitionDuration),e.uploader&&(this.uploader=e.uploader),this.inline=!!e.inline,this.update(),this.settings.customClass&&this.container.classList.add(this.settings.customClass),this.inline&&this.container.classList.add("uppload-inline")}ready(){this.settings.value&&this.bind(this.settings.value),this.renderContainer(),this.emitter.emit("ready")}bind(e){this.settings.bind&&(Xb(this.settings.bind).forEach(r=>{r.nodeName==="IMG"?r.setAttribute("src",e):r.setAttribute("value",e)}),this.emitter.emit("bind"))}use(e){Array.isArray(e)?e.forEach(t=>this.install(t)):this.install(e)}remove(e){this.services=this.services.filter(t=>t.name!==e),this.effects=this.effects.filter(t=>t.name!==e),this.update(),this.emitter.emit("remove",e)}updatePlugins(e){let t=e(this.services),r=t.filter(u=>u.type==="service"),o=!!r.filter(u=>u.name==="default").length;!!r.filter(u=>u.name==="uploading").length||r.unshift(new Um),o||r.unshift(new Rm),this.services=r,this.effects=t.filter(u=>u.type==="effect"),this.update()}install(e){e.supports()&&(e.type==="service"?(this.services.filter(r=>r.name===e.name).length||this.services.push(e),this.ready()):e.type==="effect"&&(this.effects.filter(r=>r.name===e.name).length||this.effects.push(e),this.ready()))}modalOpen(){return this.isOpen}open(){if(this.isOpen)return;this.isOpen=!0,this.file={blob:new Blob},this.activeService="default",this.activeEffect="";let e=this.container.querySelector(`input[type=radio][value='${this.activeService}']`);e&&e.setAttribute("checked","checked"),this.container.style.transition=`${this.transitionDuration}ms`,this.container.style.opacity="0",this.update();let t=this.settings.defaultService;this.services.length===3&&this.navigate(this.services[2].name),t&&this.navigate(t),Cr(document.body,"keyup",r=>{r.key==="Escape"&&this.open&&this.close()}),setTimeout(()=>{this.container.style.opacity="1"},1),this.emitter.emit("open")}close(){this.isOpen&&(this.stopCurrentService(),this.isOpen=!1,this.emitter.emit("close"),this.container.style.opacity="0",setTimeout(()=>this.update(),this.transitionDuration))}toggle(){this.modalOpen()?this.close():this.open()}update(){if(!this.container)return;this.hideHelp();let e=this.container.querySelector(".uppload-active-container");e&&(e.innerHTML=this.render());let t=this.container.querySelector("aside");t&&this.activeService!=="default"&&!this.activeEffect&&(t.style.display="block");let r=this.container.querySelector(".effects-nav");t&&r&&this.activeEffect?(r.style.display="",t.style.display="none"):t&&r&&this.activeService==="default"?(t.style.display="none",r.style.display="none"):t&&r&&(t.style.display="",r.style.display="none");let o=this.container.querySelector(".uppload-effect");o&&(o.style.display=this.activeEffect?"":"none"),window.requestAnimationFrame(()=>this.handlers()),this.isOpen?(this.container.classList.add("visible"),this.focusTrap.activate()):(this.container.classList.remove("visible"),this.focusTrap.deactivate());let n=this.container.querySelector("footer.effects-nav .effects-tabs");if(n){let m=n.parentElement;if(m){let b=0;m.querySelectorAll(".effects-continue").forEach(T=>{let P=T.getBoundingClientRect();b+=P.width});let S=m.getBoundingClientRect();n.style.width=`${S.width-b}px`}}let u=this.container.querySelector("aside");u&&this.services.length===3&&u.classList.add("uppload-services--single");let h=this.container.querySelector(".uppload-help");h&&(h.classList.remove("visible"),Cr(h,"click",()=>this.hideHelp()))}getNavbar(e=!1){return`<${e?"nav":"div"} class="uppload-services">
      ${this.services.filter(t=>!t.invisible).map(t=>`<div data-uppload-service="${t.name}" class="uppload-service-name">
          ${e?`<input type="radio" id="uppload-service-radio-${t.name}" value="${t.name}" name="uppload-radio">`:""}
          <${e?`label for="uppload-service-radio-${t.name}"`:"button"} data-uppload-service="${t.name}">
            ${t.icon.indexOf("http")===0?`<img class="service-icon" alt="" src="${t.icon}">`:Gp(t.icon,t)}
            <span>${this.lang.services&&this.lang.services[t.name]&&this.lang.services[t.name].title?this.lang.services[t.name].title:t.name}</span>
          </${e?"label":"button"}>
        </div>`).join("")}
    </${e?"nav":"div"}>`}getEffectsNavbar(){return`<div class="effects-continue">
    <button class="effects-continue--cancel">${ss("cancel")}</button>
  </div><div class="effects-tabs"><div class="effects-tabs-flow">
      ${this.effects.map(e=>`
      <input type="radio" id="uppload-effect-radio-${e.name}" value="${e.name}" name="uppload-effect-radio">
        <label for="uppload-effect-radio-${e.name}">
          ${e.icon.indexOf("http")===0?`<img class="effect-icon" alt="" src="${e.icon}">`:Gp(e.icon,e)}
          <span>${this.lang.effects&&this.lang.effects[e.name]&&this.lang.effects[e.name].title?this.lang.effects[e.name].title:e.name}</span>
        </label>
      `).join("")}
      </div></div><div class="effects-continue">
        <button class="effects-continue--upload">${ss("upload")}</button>
      </div>`}renderContainer(){this.container&&(this.container.innerHTML=`
      <div class="uppload-modal">
        <aside style="display: none">
          ${this.getNavbar(!0)}
        </aside>
        <section>
          ${this.error?`<div class="uppload-error">${this.error}</div>`:""}
          <div class="uppload-active-container"></div>
          <footer style="display: none" class="effects-nav">${this.getEffectsNavbar()}</footer>
        </section>
        <div class="uppload-help-loading">
          <div class="uppload-loader">
            <div></div>
            <p class="uppload-loader-text">${ss("help.loading")}</p>
          </div>
        </div>
        <div class="uppload-help">
          <div><button><span>${ss("help.close")}</span><span aria-hidden="true">&times;</span></button></div>
          <iframe></iframe>
        </div>
      </div>
      <div class="uppload-modal-bg">
        <button class="uppload-close" aria-label="${ss("close")}">&times;</button>
      </div>
    `)}render(){return`
      ${this.error?`<div class="uppload-error">${this.error}</div>`:""}
      ${this.activeEffect?`<div class="uppload-effect uppload-effect--${this.activeEffect||"none"}">
      ${this.activeEffect&&this.file?this.renderActiveEffect(this.file):""}
    </div>`:`<div class="uppload-service uppload-service--${this.activeService}">
      ${this.activeEffect&&this.file?"":this.renderActiveService()}
      ${this.activeService==="default"?this.getNavbar():""}
    </div>`}`}renderActiveService(){let e=this.services.filter(t=>t.name===this.activeService);if(e.length){let t=e[0];return requestAnimationFrame(()=>{typeof t.handlers=="function"&&t.handlers({next:this.next.bind(this),upload:this.upload.bind(this),uploadMultiple:this.uploadMultiple.bind(this),handle:this.handle.bind(this),showHelp:this.showHelp.bind(this),uppload:this,translate:ss})}),`${typeof t.template=="function"?t.template({translate:ss,uppload:this}):""}`}}renderActiveEffect(e){let t=this.effects.filter(r=>r.name===this.activeEffect);if(t.length){let r=t[0];return requestAnimationFrame(()=>{typeof r.handlers=="function"&&r.handlers({next:this.next.bind(this),upload:this.upload.bind(this),uploadMultiple:this.uploadMultiple.bind(this),handle:this.handle.bind(this),showHelp:this.showHelp.bind(this),uppload:this,translate:ss})}),`
        <div class="active-effect-container">${typeof r.template=="function"?r.template({file:e,translate:ss}):""}</div>
      `}}uploadMultiple(e){return this.emitter.emit("before-upload"),new Promise(t=>{this.navigate("uploading"),this.uploader&&typeof this.uploader=="function"?this.uploader(e,this.updateProgress.bind(this)).then(r=>{this.navigate("default"),t(r),this.emitter.emit("upload",r),this.close()}).catch(r=>this.handle(r)):this.handle(new Error("no-uploader"))})}hideHelp(){let e=this.container.querySelector(".uppload-help"),t=this.container.querySelector(".uppload-help-loading"),r=this.container.querySelector("aside"),o=this.container.querySelector("section");t&&t.classList.remove("visible"),e&&e.classList.remove("visible"),r&&(r.style.display=""),o&&(o.style.display=""),this.emitter.emit("hide-help")}showHelp(e){this.emitter.emit("help",e);let t=this.container.querySelector("aside");t&&(t.style.display="none");let r=this.container.querySelector("section");r&&(r.style.display="none");let o=this.container.querySelector(".uppload-help-loading");o&&o.classList.add("visible");let n=this.container.querySelector(".uppload-help");if(n){let u=n.querySelector("iframe");if(u){u.setAttribute("src",`https://uppload.js.org/help${e}`);let h=!1;Cr(u,"load",()=>{h=!0,n.classList.add("visible"),o&&o.classList.remove("visible")}),Cr(u,"error",()=>{h=!0,this.hideHelp()})}}}next(e){if(this.emitter.emit("next",e),this.file=e,!this.activeEffect)if(this.effects.length&&e.type&&e.type.indexOf("image/")===0)this.activeEffect=this.effects[0].name,this.update();else return this.upload(Bm(e));let t=this.container.querySelector(`input[name='uppload-effect-radio'][value='${this.activeEffect}']`);t&&t.setAttribute("checked","checked")}compress(e){return this.settings.compressionFromMimes&&!this.settings.compressionFromMimes.includes(e.type)?new Promise(t=>t(e)):typeof this.settings.compressor=="function"?this.settings.compressor(e):r8(e,this.settings)}upload(e){return this.emitter.emit("before-upload",e),new Promise((t,r)=>{this.navigate("uploading");let o=Md(e);try{typeof e.name=="string"&&(o=Md(e,e.name,e.type,new Date(e.lastModified)))}catch{}this.uploader&&typeof this.uploader=="function"?this.compress(e).then(n=>(this.settings.compression&&this.emitter.emit("compress",n),n)).then(n=>(o.blob=n,Bm(o))).then(n=>this.uploader(n,this.updateProgress.bind(this))).then(n=>{this.bind(n),this.navigate("default"),t(n),this.emitter.emit("upload",n),this.close()}).catch(n=>this.handle(n)):r("no-uploader")})}handle(e){this.error=ss(e.message)||e.message,this.emitter.emit("error",this.error),this.update(),this.activeService==="uploading"&&this.navigate("default"),setTimeout(()=>{this.error=void 0,this.update()},4e3)}handlers(){let e=()=>this.open(),t=()=>this.close();this.container.querySelectorAll(".uppload-service--default .uppload-service-name button").forEach(b=>{Cr(b,"click",S=>{let T=b.getAttribute("data-uppload-service");if(T){this.navigate(T);let F=this.container.querySelector(`[data-uppload-service="${T}"]`);if(F&&F.parentElement){let G=0,$=0,ee=F.getBoundingClientRect(),ue=F.parentElement.getBoundingClientRect();G=ee.top-ue.top,$=ee.left-ue.left;let fe=F.parentElement.parentElement;try{fe&&fe.scrollTo($,G)}catch{}}}let P=this.container.querySelector(`input[type=radio][value='${T}']`);return P&&P.setAttribute("checked","checked"),S.preventDefault(),!1})}),this.container.querySelectorAll(".uppload-services input[type='radio']").forEach(b=>{Cr(b,"change",S=>{let T=this.container.querySelector("[name='uppload-radio']:checked");if(!T)return;let P=T.value;this.navigate(P)})}),this.container.querySelectorAll(".effects-nav input[type='radio']").forEach(b=>{Cr(b,"change",S=>{let T=this.container.querySelector("[name='uppload-effect-radio']:checked");if(!T)return;let P=T.value;this.activeEffect=P,this.update()})});let u=this.container.querySelector(".uppload-modal-bg");u&&Cr(u,"click",t),this.settings.call&&Xb(this.settings.call).forEach(_=>{Cr(_,"click",e)});let h=this.container.querySelector(".effects-continue--cancel");h&&Cr(h,"click",()=>{this.file={blob:new Blob},this.activeService="default",this.activeEffect="",this.update()});let m=this.container.querySelector(".effects-continue--upload");m&&Cr(m,"click",()=>{this.file&&(this.activeService="",this.activeEffect="",this.upload(Bm(this.file)))})}stopCurrentService(){let e=this.services.filter(t=>t.name===this.activeService);e.length&&e[0].stop()}navigate(e){if(!this.services.filter(r=>r.name===e).length)throw new Error("invalid-service");this.stopCurrentService(),this.activeService=e,this.update();let t=this.container.querySelector(".uppload-active-container input, .uppload-active-container button");t&&t.focus()}on(e,t){return this.emitter.on(e,t)}off(e,t){return this.emitter.on(e,t)}updateProgress(e){this.uploadProgress=e;let t=this.container.querySelector(".uppload-loader-text .progress");t&&(t.innerHTML=`${parseInt(e.toString())}%`),this.emitter.emit("progress",this.updateProgress)}};var ml=class{constructor(){this.type="effect",this.name="",this.invisible=!1,this.noRecolor=!1,this.color="#000",this.icon="",this.template=()=>"",this.handlers=()=>{},this.supports=()=>!0}};var iv={upload:"Upload",cancel:"Cancel",close:"Close",uploading:"Uploading...",uploaded:"Uploaded",fetching:"Getting your image from $1$...",poweredBy:"Powered by $1$",needHelp:"Need help?",units:{px:"px","%":"%",deg:"\xB0"},errors:{response_not_ok:"We got an error fetching this file",unable_to_search:"We got an error searching",invalid_service_url:"This is not $A$ $1$ URL",invalid_url:"This URL seems to be invalid",upload_aborted:"Your upload was cancelled",upload_error:"We got an error uploading this file",file_type_not_allowed:"This file type is not allowed",file_too_large:"Your file should be smaller than $1$"},help:{loading:"Loading help...",close:"Close help"},services:{default:{heading:"Select an image"},local:{title:"Choose file",button:"Select a file",or:"or",drop:"Drop files here"},camera:{title:"Camera",button:"Click photo",switch:"Switch camera",waiting:"Waiting for permission...",unableToRead:"We're not able to read your camera's video. This may be because you didn't grant the required permission, or because your device doesn't support camera access."},microlink:{button:"Import from $1$",label:"$1$ $2$ URL",placeholder:"Enter $A$ $1$ $2$ URL",type:"post"},url:{title:"Direct URL",label:"Image URL",placeholder:"Enter an image URL"},instagram:{title:"Instagram"},facebook:{title:"Facebook"},flickr:{title:"Flickr",type:"photo"},ninegag:{title:"9GAG",type:"photo"},deviantart:{title:"DeviantArt"},artstation:{title:"ArtStation"},twitter:{title:"Twitter",type:"image tweet"},pinterest:{title:"Pinterest",type:"pin"},flipboard:{title:"Flipboard",type:"article"},fotki:{title:"Fotki",type:"photo"},linkedin:{title:"LinkedIn"},reddit:{title:"Reddit"},tumblr:{title:"Tumblr"},weheartit:{title:"We Heart It"},screenshot:{title:"Screenshot",button:"Take screenshot",label:"Webpage URL",placeholder:"Enter a webpage URL",loading:"Taking a screenshot..."},search:{button:"Search on $1$",label:"Find an image",placeholder:"Search for something",imagesPoweredBy:"Images powered by $1$"},giphy:{title:"GIPHY"},unsplash:{title:"Unsplash"},pixabay:{title:"Pixabay"},pexels:{title:"Pexels"}},effects:{preview:{title:"Preview"},filters:{title:"Filters"},crop:{title:"Crop",aspectRatios:{free:"Free",square:"Square"}},rotate:{title:"Rotate"},flip:{title:"Flip",buttons:{horizontal:"Horizontal",vertical:"Vertical"}},sharpen:{title:"Sharpen"},blur:{title:"Blur"},brightness:{title:"Brightness"},contrast:{title:"Contrast"},grayscale:{title:"Grayscale"},"hue-rotate":{title:"Hue rotate"},invert:{title:"Invert"},saturate:{title:"Saturate"},sepia:{title:"Sepia"}},helper:i=>{let e="$A$";for(;i.indexOf(e)!==-1;){let t=i.indexOf(e);i.length>t+3&&(["a","e","i","o","u"].indexOf(i[t+4].toLowerCase())!==-1?i=i.replace(e,"an"):i=i.replace(e,"a"))}return i}};var Ad=class extends ha{constructor({mimeTypes:e,maxFileSize:t}={}){super(),this.name="local",this.icon='<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><g fill="#000" fill-rule="nonzero"><path d="M177 56L125 4l-3-2v57h57c0-2-1-3-2-3z"/><path d="M173 113h8V75h-66c-5 0-8-4-8-8V1H27c-4 0-8 4-8 8v184c0 4 4 8 8 8h65v-8c0-45 36-80 81-80z"/><path d="M173 128c-36 0-65 29-65 64s29 64 65 64c35 0 64-29 64-64s-29-64-64-64zm27 63h-14v33c0 2-2 3-4 3h-20c-2 0-3-1-3-3v-33h-14c-3 0-5-3-3-5l28-30c1-2 3-2 5 0l27 30c2 2 1 5-2 5z"/></g></svg>',this.color="#34495e",this.mimeTypes=["image/gif","image/jpeg","image/jpg","image/png"],this.maxFileSize=1/0,this.template=r=>`<div class="drop-area">
      <div>${r.translate("services.local.drop")}</div>
      <em>${r.translate("services.local.or")}</em>
      <button class="uppload-button uppload-button--cta" style="background: ${this.color}">${r.translate("services.local.button")}</button>
    </div>
      <div class="alternate-input">
        <input type="file" accept="${this.mimeTypes.join()}"${r.uppload.settings.multiple?" multiple":""}></div><button class="need-help-link"><span>${ss("needHelp")}</span aria-hidden="true"><span>?</span></button>`,this.handlers=r=>{let o=r.uppload.container.querySelector(".drop-area");o&&(Cr(o,"drop",h=>this.dropHandler(r,h)),Cr(o,"dragover",h=>this.dragHandler(r,h)),Cr(o,"dragend",h=>this.dragStop(r,h)),Cr(o,"dragexit",h=>this.dragStop(r,h)),Cr(o,"dragleave",h=>this.dragStop(r,h)),Cr(o,"click",h=>this.fileSelect(r,h)));let n=r.uppload.container.querySelector(".alternate-input input[type=file]");n&&Cr(n,"change",h=>this.getFile(r,h));let u=r.uppload.container.querySelector(".need-help-link");u&&Cr(u,"click",()=>r.showHelp("/services/local"))},e&&(this.mimeTypes=e),t&&(this.maxFileSize=t)}getFile(e,t){t.preventDefault();let r=t.target.files,o=null;if(r){if(e.uppload.settings.multiple&&r.length>1)return e.uploadMultiple(Array.from(r));for(let n=0;n<r.length;n++){let u=r[n];this.mimeTypes.indexOf(u.type)!==-1&&(u.size<this.maxFileSize?o=u:e.handle(new Error(e.translate("errors.file_too_large",`${this.maxFileSize} bytes`))))}}o&&o&&e.next({blob:o,size:o.size,type:o.type,lastModified:o.lastModified?new Date(o.lastModified):void 0,name:o.name})}fileSelect(e,t){let r=e.uppload.container.querySelector(".alternate-input input[type=file]");r&&r.click()}dragStop(e,t){let r=e.uppload.container.querySelector(".drop-area");r&&r.classList.remove("drop-area-active")}dragHandler(e,t){t.preventDefault();let r=e.uppload.container.querySelector(".drop-area");r&&r.classList.add("drop-area-active")}dropHandler(e,t){t.preventDefault(),this.dragStop(e,t);let r=null;if(t.dataTransfer&&t.dataTransfer.items)for(let o=0;o<t.dataTransfer.items.length;o++){let n=t.dataTransfer.items[o];n.kind==="file"&&this.mimeTypes.indexOf(n.type)!==-1&&(r=n.getAsFile(),(!r||r.size>this.maxFileSize)&&(r=null,e.handle(new Error(e.translate("errors.file_too_large",`${this.maxFileSize} bytes`)))))}r&&r&&e.next({blob:r,size:r.size,type:r.type,lastModified:r.lastModified?new Date(r.lastModified):void 0,name:r.name})}};var x8=ws(sv());var Id=class extends ml{constructor({aspectRatio:e,aspectRatioOptions:t,hideAspectRatioSettings:r,autoCropArea:o,viewMode:n}={}){super(),this.name="crop",this.icon='<svg aria-hidden="true" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"><path d="M74 0v182h134v-25h-26V74H99V48h96c4 0 7 1 9 4 3 2 4 5 4 9v121h48v26h-48v48h-26v-48H61a13 13 0 01-13-13V74H0V48h48V0h26z" fill="#000" fill-rule="nonzero"/></svg>',this.aspectRatio=NaN,this.hideAspectRatioSettings=!1,this.aspectRatioOptions={free:NaN,square:1,"16:9":16/9},this.autoCropArea=1,this.viewMode=1,this.originalFile={blob:new Blob},this.template=({file:u,translate:h})=>{let m=URL.createObjectURL(u.blob);return this.originalFile=u,`
      <div class="uppload-cropping-element">
        <img style="width: 20px" alt="" src="${m}">
      </div>
      ${!this.aspectRatio&&!this.hideAspectRatioSettings?`<div class="uppload-actions">
        ${Object.keys(this.aspectRatioOptions).map((b,_)=>`
          <input value="${this.aspectRatioOptions[b]}" data-name="${b}" name="crop-aspect-ratio" type="radio"${_?"":" checked"} id="crop-aspect-ratio-${b}">
          <label for="crop-aspect-ratio-${b}">${h(`effects.crop.aspectRatios.${b}`)||b}</label>`).join("")}
      </div>`:""}
    `},this.handlers=u=>{let h=u.uppload.container.querySelector(".uppload-cropping-element img"),m=this.originalFile;h&&du(u,h).then(()=>{let b=new x8.default(h,{aspectRatio:this.aspectRatio,autoCropArea:this.autoCropArea,viewMode:this.viewMode,ready(){fl(b.getCroppedCanvas()).then(S=>{m.blob=S,u.next(m)})},cropend(){fl(b.getCroppedCanvas()).then(S=>{m.blob=S,u.next(m)})}});u.uppload.container.querySelectorAll("input[name='crop-aspect-ratio']").forEach(S=>{Cr(S,"change",()=>{let T=u.uppload.container.querySelector("input[name='crop-aspect-ratio']:checked");T&&(b.setAspectRatio(this.aspectRatioOptions[T.getAttribute("data-name")||"free"]),fl(b.getCroppedCanvas()).then(P=>{m.blob=P,u.next(m)}))})})})},e&&(this.aspectRatio=e),t&&(this.aspectRatioOptions=t),o&&(this.autoCropArea=o),n&&(this.viewMode=n),r&&(this.hideAspectRatioSettings=r)}};var Hz=ws(sv());function qz(i){let e,t,r,o,n;return{c(){e=Ke("div"),t=bi("svg"),r=bi("path"),o=Ot(),n=nr(i[3]),J(r,"fill-rule","evenodd"),J(r,"d","M1 5.25A2.25 2.25 0 0 1 3.25 3h13.5A2.25 2.25 0 0 1 19 5.25v9.5A2.25 2.25 0 0 1 16.75 17H3.25A2.25 2.25 0 0 1 1 14.75v-9.5Zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75v-2.69l-2.22-2.219a.75.75 0 0 0-1.06 0l-1.91 1.909.47.47a.75.75 0 1 1-1.06 1.06L6.53 8.091a.75.75 0 0 0-1.06 0l-2.97 2.97ZM12 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"),J(r,"clip-rule","evenodd"),J(t,"xmlns","http://www.w3.org/2000/svg"),J(t,"viewBox","0 0 20 20"),J(t,"fill","currentColor"),J(t,"class","w-5 h-5 mr-1 md:mr-2"),J(e,"class","flex flex-row items-center")},m(u,h){Ne(u,e,h),qe(e,t),qe(t,r),qe(e,o),qe(e,n)},p(u,h){h&8&&mn(n,u[3])},d(u){u&&ze(e)}}}function $z(i){let e;return{c(){e=Ke("div"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>',J(e,"class","absolute inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-gray-800 border-2 rounded-full bottom-4 left-3/4 transform -translate-x-1/2 translate-y-1/2")},m(t,r){Ne(t,e,r)},p:gt,d(t){t&&ze(e)}}}function Qz(i){let e,t,r,o,n;function u(b,_){return b[4]?$z:qz}let h=u(i,-1),m=h(i);return{c(){e=Ke("button"),m.c(),J(e,"class",t=i[0]?i[1]:i[2]),e.disabled=r=!i[0]},m(b,_){Ne(b,e,_),m.m(e,null),o||(n=It(e,"click",i[5]),o=!0)},p(b,[_]){h===(h=u(b,_))&&m?m.p(b,_):(m.d(1),m=h(b),m&&(m.c(),m.m(e,null))),_&7&&t!==(t=b[0]?b[1]:b[2])&&J(e,"class",t),_&1&&r!==(r=!b[0])&&(e.disabled=r)},i:gt,o:gt,d(b){b&&ze(e),m.d(),o=!1,n()}}}function Gz(i,e,t){let{postURL:r="localhost:8000/uploadImage"}=e,{uploadEnabled:o=!0}=e,{stylingClassesUploadEnabled:n=""}=e,{stylingClassesUploadDisabled:u=""}=e,{buttonText:h="Upload image"}=e,{isProfilePhotoCornerUploader:m=!1}=e,b;b=new Wp({lang:iv,uploader:(S,T)=>new Promise((P,F)=>{let G=new FormData;G.append("file",S);let $=new XMLHttpRequest;$.open("POST",r,!0),$.upload.onprogress=ee=>{if(ee.lengthComputable){let ue=ee.loaded/ee.total;T(ue)}},$.onload=()=>{$.status>=200&&$.status<300?(window.location.reload(),P("Upload successful")):F("Upload failed")},$.onerror=()=>F("Upload error"),$.send(G)}),maxSize:[1500,1500],compression:.8,compressionToMime:"image/jpeg"}),b.use([new Ad]),b.use([new Id({aspectRatio:1})]);let _=()=>b.open();return b.on("upload",S=>{console.log("File uploaded!",S)}),i.$$set=S=>{"postURL"in S&&t(6,r=S.postURL),"uploadEnabled"in S&&t(0,o=S.uploadEnabled),"stylingClassesUploadEnabled"in S&&t(1,n=S.stylingClassesUploadEnabled),"stylingClassesUploadDisabled"in S&&t(2,u=S.stylingClassesUploadDisabled),"buttonText"in S&&t(3,h=S.buttonText),"isProfilePhotoCornerUploader"in S&&t(4,m=S.isProfilePhotoCornerUploader)},[o,n,u,h,m,_,r]}var av=class extends pt{constructor(e){super(),yt(this,e,Gz,Qz,ut,{postURL:6,uploadEnabled:0,stylingClassesUploadEnabled:1,stylingClassesUploadDisabled:2,buttonText:3,isProfilePhotoCornerUploader:4})}},w8=av;var Vm=globalThis,jm=Vm.ShadowRoot&&(Vm.ShadyCSS===void 0||Vm.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,lv=Symbol(),k8=new WeakMap,Zp=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==lv)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(jm&&e===void 0){let r=t!==void 0&&t.length===1;r&&(e=k8.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&k8.set(t,e))}return e}toString(){return this.cssText}},S8=i=>new Zp(typeof i=="string"?i:i+"",void 0,lv),cv=(i,...e)=>{let t=i.length===1?i[0]:e.reduce((r,o,n)=>r+(u=>{if(u._$cssResult$===!0)return u.cssText;if(typeof u=="number")return u;throw Error("Value passed to 'css' function must be a 'css' function result: "+u+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+i[n+1],i[0]);return new Zp(t,i,lv)},uv=(i,e)=>{if(jm)i.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let t of e){let r=document.createElement("style"),o=Vm.litNonce;o!==void 0&&r.setAttribute("nonce",o),r.textContent=t.cssText,i.appendChild(r)}},Hm=jm?i=>i:i=>i instanceof CSSStyleSheet?(e=>{let t="";for(let r of e.cssRules)t+=r.cssText;return S8(t)})(i):i;var{is:Wz,defineProperty:Zz,getOwnPropertyDescriptor:Kz,getOwnPropertyNames:Jz,getOwnPropertySymbols:Xz,getPrototypeOf:Yz}=Object,qm=globalThis,C8=qm.trustedTypes,eN=C8?C8.emptyScript:"",tN=qm.reactiveElementPolyfillSupport,Kp=(i,e)=>i,Jp={toAttribute(i,e){switch(e){case Boolean:i=i?eN:null;break;case Object:case Array:i=i==null?i:JSON.stringify(i)}return i},fromAttribute(i,e){let t=i;switch(e){case Boolean:t=i!==null;break;case Number:t=i===null?null:Number(i);break;case Object:case Array:try{t=JSON.parse(i)}catch{t=null}}return t}},$m=(i,e)=>!Wz(i,e),E8={attribute:!0,type:String,converter:Jp,reflect:!1,hasChanged:$m};Symbol.metadata??=Symbol("metadata"),qm.litPropertyMetadata??=new WeakMap;var gl=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=E8){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){let r=Symbol(),o=this.getPropertyDescriptor(e,r,t);o!==void 0&&Zz(this.prototype,e,o)}}static getPropertyDescriptor(e,t,r){let{get:o,set:n}=Kz(this.prototype,e)??{get(){return this[t]},set(u){this[t]=u}};return{get(){return o?.call(this)},set(u){let h=o?.call(this);n.call(this,u),this.requestUpdate(e,h,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??E8}static _$Ei(){if(this.hasOwnProperty(Kp("elementProperties")))return;let e=Yz(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Kp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Kp("properties"))){let t=this.properties,r=[...Jz(t),...Xz(t)];for(let o of r)this.createProperty(o,t[o])}let e=this[Symbol.metadata];if(e!==null){let t=litPropertyMetadata.get(e);if(t!==void 0)for(let[r,o]of t)this.elementProperties.set(r,o)}this._$Eh=new Map;for(let[t,r]of this.elementProperties){let o=this._$Eu(t,r);o!==void 0&&this._$Eh.set(o,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let r=new Set(e.flat(1/0).reverse());for(let o of r)t.unshift(Hm(o))}else e!==void 0&&t.push(Hm(e));return t}static _$Eu(e,t){let r=t.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,t=this.constructor.elementProperties;for(let r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return uv(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$EC(e,t){let r=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,r);if(o!==void 0&&r.reflect===!0){let n=(r.converter?.toAttribute!==void 0?r.converter:Jp).toAttribute(t,r.type);this._$Em=e,n==null?this.removeAttribute(o):this.setAttribute(o,n),this._$Em=null}}_$AK(e,t){let r=this.constructor,o=r._$Eh.get(e);if(o!==void 0&&this._$Em!==o){let n=r.getPropertyOptions(o),u=typeof n.converter=="function"?{fromAttribute:n.converter}:n.converter?.fromAttribute!==void 0?n.converter:Jp;this._$Em=o,this[o]=u.fromAttribute(t,n.type),this._$Em=null}}requestUpdate(e,t,r){if(e!==void 0){if(r??=this.constructor.getPropertyOptions(e),!(r.hasChanged??$m)(this[e],t))return;this.P(e,t,r)}this.isUpdatePending===!1&&(this._$ES=this._$ET())}P(e,t,r){this._$AL.has(e)||this._$AL.set(e,t),r.reflect===!0&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[o,n]of this._$Ep)this[o]=n;this._$Ep=void 0}let r=this.constructor.elementProperties;if(r.size>0)for(let[o,n]of r)n.wrapped!==!0||this._$AL.has(o)||this[o]===void 0||this.P(o,this[o],n)}let e=!1,t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(t)):this._$EU()}catch(r){throw e=!1,this._$EU(),r}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach(t=>this._$EC(t,this[t])),this._$EU()}updated(e){}firstUpdated(e){}};gl.elementStyles=[],gl.shadowRootOptions={mode:"open"},gl[Kp("elementProperties")]=new Map,gl[Kp("finalized")]=new Map,tN?.({ReactiveElement:gl}),(qm.reactiveElementVersions??=[]).push("2.0.4");var yv=globalThis,Qm=yv.trustedTypes,T8=Qm?Qm.createPolicy("lit-html",{createHTML:i=>i}):void 0,L8="$lit$",cc=`lit$${Math.random().toFixed(9).slice(2)}$`,F8="?"+cc,iN=`<${F8}>`,mu=document,Yp=()=>mu.createComment(""),ef=i=>i===null||typeof i!="object"&&typeof i!="function",z8=Array.isArray,rN=i=>z8(i)||typeof i?.[Symbol.iterator]=="function",dv=`[ 	
\f\r]`,Xp=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,M8=/-->/g,A8=/>/g,pu=RegExp(`>|${dv}(?:([^\\s"'>=/]+)(${dv}*=${dv}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),I8=/'/g,P8=/"/g,N8=/^(?:script|style|textarea|title)$/i,O8=i=>(e,...t)=>({_$litType$:i,strings:e,values:t}),B8=O8(1),Vne=O8(2),yl=Symbol.for("lit-noChange"),lo=Symbol.for("lit-nothing"),D8=new WeakMap,fu=mu.createTreeWalker(mu,129);function R8(i,e){if(!Array.isArray(i)||!i.hasOwnProperty("raw"))throw Error("invalid template strings array");return T8!==void 0?T8.createHTML(e):e}var nN=(i,e)=>{let t=i.length-1,r=[],o,n=e===2?"<svg>":"",u=Xp;for(let h=0;h<t;h++){let m=i[h],b,_,S=-1,T=0;for(;T<m.length&&(u.lastIndex=T,_=u.exec(m),_!==null);)T=u.lastIndex,u===Xp?_[1]==="!--"?u=M8:_[1]!==void 0?u=A8:_[2]!==void 0?(N8.test(_[2])&&(o=RegExp("</"+_[2],"g")),u=pu):_[3]!==void 0&&(u=pu):u===pu?_[0]===">"?(u=o??Xp,S=-1):_[1]===void 0?S=-2:(S=u.lastIndex-_[2].length,b=_[1],u=_[3]===void 0?pu:_[3]==='"'?P8:I8):u===P8||u===I8?u=pu:u===M8||u===A8?u=Xp:(u=pu,o=void 0);let P=u===pu&&i[h+1].startsWith("/>")?" ":"";n+=u===Xp?m+iN:S>=0?(r.push(b),m.slice(0,S)+L8+m.slice(S)+cc+P):m+cc+(S===-2?h:P)}return[R8(i,n+(i[t]||"<?>")+(e===2?"</svg>":"")),r]},tf=class i{constructor({strings:e,_$litType$:t},r){let o;this.parts=[];let n=0,u=0,h=e.length-1,m=this.parts,[b,_]=nN(e,t);if(this.el=i.createElement(b,r),fu.currentNode=this.el.content,t===2){let S=this.el.content.firstChild;S.replaceWith(...S.childNodes)}for(;(o=fu.nextNode())!==null&&m.length<h;){if(o.nodeType===1){if(o.hasAttributes())for(let S of o.getAttributeNames())if(S.endsWith(L8)){let T=_[u++],P=o.getAttribute(S).split(cc),F=/([.?@])?(.*)/.exec(T);m.push({type:1,index:n,name:F[2],strings:P,ctor:F[1]==="."?pv:F[1]==="?"?fv:F[1]==="@"?mv:Dd}),o.removeAttribute(S)}else S.startsWith(cc)&&(m.push({type:6,index:n}),o.removeAttribute(S));if(N8.test(o.tagName)){let S=o.textContent.split(cc),T=S.length-1;if(T>0){o.textContent=Qm?Qm.emptyScript:"";for(let P=0;P<T;P++)o.append(S[P],Yp()),fu.nextNode(),m.push({type:2,index:++n});o.append(S[T],Yp())}}}else if(o.nodeType===8)if(o.data===F8)m.push({type:2,index:n});else{let S=-1;for(;(S=o.data.indexOf(cc,S+1))!==-1;)m.push({type:7,index:n}),S+=cc.length-1}n++}}static createElement(e,t){let r=mu.createElement("template");return r.innerHTML=e,r}};function Pd(i,e,t=i,r){if(e===yl)return e;let o=r!==void 0?t._$Co?.[r]:t._$Cl,n=ef(e)?void 0:e._$litDirective$;return o?.constructor!==n&&(o?._$AO?.(!1),n===void 0?o=void 0:(o=new n(i),o._$AT(i,t,r)),r!==void 0?(t._$Co??=[])[r]=o:t._$Cl=o),o!==void 0&&(e=Pd(i,o._$AS(i,e.values),o,r)),e}var hv=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:r}=this._$AD,o=(e?.creationScope??mu).importNode(t,!0);fu.currentNode=o;let n=fu.nextNode(),u=0,h=0,m=r[0];for(;m!==void 0;){if(u===m.index){let b;m.type===2?b=new rf(n,n.nextSibling,this,e):m.type===1?b=new m.ctor(n,m.name,m.strings,this,e):m.type===6&&(b=new gv(n,this,e)),this._$AV.push(b),m=r[++h]}u!==m?.index&&(n=fu.nextNode(),u++)}return fu.currentNode=mu,o}p(e){let t=0;for(let r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}},rf=class i{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,o){this.type=2,this._$AH=lo,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Pd(this,e,t),ef(e)?e===lo||e==null||e===""?(this._$AH!==lo&&this._$AR(),this._$AH=lo):e!==this._$AH&&e!==yl&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):rN(e)?this.k(e):this._(e)}S(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.S(e))}_(e){this._$AH!==lo&&ef(this._$AH)?this._$AA.nextSibling.data=e:this.T(mu.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:r}=e,o=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=tf.createElement(R8(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===o)this._$AH.p(t);else{let n=new hv(o,this),u=n.u(this.options);n.p(t),this.T(u),this._$AH=n}}_$AC(e){let t=D8.get(e.strings);return t===void 0&&D8.set(e.strings,t=new tf(e)),t}k(e){z8(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,r,o=0;for(let n of e)o===t.length?t.push(r=new i(this.S(Yp()),this.S(Yp()),this,this.options)):r=t[o],r._$AI(n),o++;o<t.length&&(this._$AR(r&&r._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){let r=e.nextSibling;e.remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},Dd=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,o,n){this.type=1,this._$AH=lo,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=n,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=lo}_$AI(e,t=this,r,o){let n=this.strings,u=!1;if(n===void 0)e=Pd(this,e,t,0),u=!ef(e)||e!==this._$AH&&e!==yl,u&&(this._$AH=e);else{let h=e,m,b;for(e=n[0],m=0;m<n.length-1;m++)b=Pd(this,h[r+m],t,m),b===yl&&(b=this._$AH[m]),u||=!ef(b)||b!==this._$AH[m],b===lo?e=lo:e!==lo&&(e+=(b??"")+n[m+1]),this._$AH[m]=b}u&&!o&&this.j(e)}j(e){e===lo?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},pv=class extends Dd{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===lo?void 0:e}},fv=class extends Dd{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==lo)}},mv=class extends Dd{constructor(e,t,r,o,n){super(e,t,r,o,n),this.type=5}_$AI(e,t=this){if((e=Pd(this,e,t,0)??lo)===yl)return;let r=this._$AH,o=e===lo&&r!==lo||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,n=e!==lo&&(r===lo||o);o&&this.element.removeEventListener(this.name,this,r),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},gv=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Pd(this,e)}};var oN=yv.litHtmlPolyfillSupport;oN?.(tf,rf),(yv.litHtmlVersions??=[]).push("3.1.3");var U8=(i,e,t)=>{let r=t?.renderBefore??e,o=r._$litPart$;if(o===void 0){let n=t?.renderBefore??null;r._$litPart$=o=new rf(e.insertBefore(Yp(),n),n,void 0,t??{})}return o._$AI(i),o};var uc=class extends gl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=U8(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return yl}};uc._$litElement$=!0,uc.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:uc});var sN=globalThis.litElementPolyfillSupport;sN?.({LitElement:uc});(globalThis.litElementVersions??=[]).push("4.0.5");var V8=i=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(i,e)}):customElements.define(i,e)};var lN={attribute:!0,type:String,converter:Jp,reflect:!1,hasChanged:$m},cN=(i=lN,e,t)=>{let{kind:r,metadata:o}=t,n=globalThis.litPropertyMetadata.get(o);if(n===void 0&&globalThis.litPropertyMetadata.set(o,n=new Map),n.set(t.name,i),r==="accessor"){let{name:u}=t;return{set(h){let m=e.get.call(this);e.set.call(this,h),this.requestUpdate(u,m,i)},init(h){return h!==void 0&&this.P(u,void 0,i),h}}}if(r==="setter"){let{name:u}=t;return function(h){let m=this[u];e.call(this,h),this.requestUpdate(u,m,i)}}throw Error("Unsupported decorator location: "+r)};function Gm(i){return(e,t)=>typeof t=="object"?cN(i,e,t):((r,o,n)=>{let u=o.hasOwnProperty(n);return o.constructor.createProperty(n,u?{...r,wrapped:!0}:r),u?Object.getOwnPropertyDescriptor(o,n):void 0})(i,e,t)}function j8(i){return Gm({...i,state:!0,attribute:!1})}var H8={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},q8=i=>(...e)=>({_$litDirective$:i,values:e}),Zm=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};var $8=q8(class extends Zm{constructor(i){if(super(i),i.type!==H8.ATTRIBUTE||i.name!=="class"||i.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(i){return" "+Object.keys(i).filter(e=>i[e]).join(" ")+" "}update(i,[e]){if(this.st===void 0){this.st=new Set,i.strings!==void 0&&(this.nt=new Set(i.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(let r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}let t=i.element.classList;for(let r of this.st)r in e||(t.remove(r),this.st.delete(r));for(let r in e){let o=!!e[r];o===this.st.has(r)||this.nt?.has(r)||(o?(t.add(r),this.st.add(r)):(t.remove(r),this.st.delete(r)))}return yl}});var Ki={d:(i,e)=>{for(var t in e)Ki.o(e,t)&&!Ki.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})},o:(i,e)=>Object.prototype.hasOwnProperty.call(i,e),r:i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}},J8={};Ki.d(J8,{k:()=>ls});var xv={};Ki.r(xv),Ki.d(xv,{templates:()=>xN});var wv={};Ki.r(wv),Ki.d(wv,{templates:()=>wN});var kv={};Ki.r(kv),Ki.d(kv,{templates:()=>kN});var Sv={};Ki.r(Sv),Ki.d(Sv,{templates:()=>SN});var Cv={};Ki.r(Cv),Ki.d(Cv,{templates:()=>CN});var Ev={};Ki.r(Ev),Ki.d(Ev,{templates:()=>EN});var Tv={};Ki.r(Tv),Ki.d(Tv,{templates:()=>TN});var Mv={};Ki.r(Mv),Ki.d(Mv,{templates:()=>MN});var Av={};Ki.r(Av),Ki.d(Av,{templates:()=>AN});var Iv={};Ki.r(Iv),Ki.d(Iv,{templates:()=>IN});var Pv={};Ki.r(Pv),Ki.d(Pv,{templates:()=>PN});var Dv={};Ki.r(Dv),Ki.d(Dv,{templates:()=>DN});var Lv={};Ki.r(Lv),Ki.d(Lv,{templates:()=>LN});var Fv={};Ki.r(Fv),Ki.d(Fv,{templates:()=>FN});var zv={};Ki.r(zv),Ki.d(zv,{templates:()=>zN});var Nv={};Ki.r(Nv),Ki.d(Nv,{templates:()=>NN});var Ov={};Ki.r(Ov),Ki.d(Ov,{templates:()=>ON});var or=(i=>{var e={};return Ki.d(e,i),e})({LitElement:()=>uc,css:()=>cv,html:()=>B8}),X8=(i,e,t)=>{let r=i[0];for(let o=1;o<i.length;o++)r+=e[t?t[o-1]:o-1],r+=i[o];return r},Y8=i=>{return typeof(e=i)!="string"&&"strTag"in e?X8(i.strings,i.values):i;var e},Bv="lit-localize-status",Rv=class{constructor(e){this.__litLocalizeEventHandler=t=>{t.detail.status==="ready"&&this.host.requestUpdate()},this.host=e}hostConnected(){window.addEventListener(Bv,this.__litLocalizeEventHandler)}hostDisconnected(){window.removeEventListener(Bv,this.__litLocalizeEventHandler)}},hN=i=>i.addController(new Rv(i)),Xm=class{constructor(){this.settled=!1,this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}resolve(e){this.settled=!0,this._resolve(e)}reject(e){this.settled=!0,this._reject(e)}},bl=[];for(let i=0;i<256;i++)bl[i]=(i>>4&15).toString(16)+(15&i).toString(16);var pN="",fN="h",mN="s";function gN(i,e){return(e?fN:mN)+function(t){let r=0,o=8997,n=0,u=33826,h=0,m=40164,b=0,_=52210;for(let S=0;S<t.length;S++)o^=t.charCodeAt(S),r=435*o,n=435*u,h=435*m,b=435*_,h+=o<<8,b+=u<<8,n+=r>>>16,o=65535&r,h+=n>>>16,u=65535&n,_=b+(h>>>16)&65535,m=65535&h;return bl[_>>8]+bl[255&_]+bl[m>>8]+bl[255&m]+bl[u>>8]+bl[255&u]+bl[o>>8]+bl[255&o]}(typeof i=="string"?i:i.join(pN))}var Q8=new WeakMap,G8=new Map;function yN(i,e,t){if(i){let r=t?.id??function(n){let u=typeof n=="string"?n:n.strings,h=G8.get(u);return h===void 0&&(h=gN(u,typeof n!="string"&&!("strTag"in n)),G8.set(u,h)),h}(e),o=i[r];if(o){if(typeof o=="string")return o;if("strTag"in o)return X8(o.strings,e.values,o.values);{let n=Q8.get(o);return n===void 0&&(n=o.values,Q8.set(o,n)),{...o,values:n.map(u=>e.values[u])}}}}return Y8(e)}function bv(i){window.dispatchEvent(new CustomEvent(Bv,{detail:i}))}var vv,e7,Ym,Uv,t7,e1="",gu=new Xm;gu.resolve();var Km=0,bN=()=>e1,vN=i=>{if(i===(vv??e1))return gu.promise;if(!Ym||!Uv)throw Error("Internal error");if(!Ym.has(i))throw Error("Invalid locale code");Km++;let e=Km;return vv=i,gu.settled&&(gu=new Xm),bv({status:"loading",loadingLocale:i}),(i===e7?Promise.resolve({templates:void 0}):Uv(i)).then(t=>{Km===e&&(e1=i,vv=void 0,t7=t.templates,bv({status:"ready",readyLocale:i}),gu.resolve())},t=>{Km===e&&(bv({status:"error",errorLocale:i,errorMessage:t.toString()}),gu.reject(t))}),gu.promise},Cs=Y8,W8=!1,An=(i=>{var e={};return Ki.d(e,i),e})({customElement:()=>V8,property:()=>Gm,state:()=>j8}),_N=["cs","de","el","es","fr","it","ja","nl","no","pl","pt","ru","sr","tr","uk","zh","zh-CN"],xN={s182ab2d6c997515f:"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0435\u0433\u043E \u043D\u0430 \u0433\u043B\u0430\u0432\u043D\u044B\u0439 \u044D\u043A\u0440\u0430\u043D \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438 \u0443\u0434\u043E\u0431\u0441\u0442\u0432\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F.",s1b9047d53d9f9d22:'2) \u041D\u0430\u0436\u0430\u0442\u044C "\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F"',s37a9e8aec5713460:"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435",s5c6aad7a7e4a1437:'3) \u041D\u0430\u0436\u0430\u0442\u044C "\u041D\u0430 \u044D\u043A\u0440\u0430\u043D \xAB\u0414\u043E\u043C\u043E\u0439\xBB"',s6196153c4b0c1ea0:"\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C",s922329d6f6213590:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 Dock",sa5ef80b4bb9b39f8:"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C",sa7551383d1897fcc:'2) \u041D\u0430\u0436\u043C\u0438\u0442\u0435 "\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 Dock"',sba52286c21552a4e:"\u0423\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u044D\u0442\u043E \u043D\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u043E \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438 \u0443\u0434\u043E\u0431\u0441\u0442\u0432\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F.",sc79fd7641eb9a975:"\u0421\u043F\u0440\u044F\u0442\u0430\u0442\u044C \u0418\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u044E",scdaf4bbff76674c8:"\u041D\u0430 \u044D\u043A\u0440\u0430\u043D \xAB\u0414\u043E\u043C\u043E\u0439\xBB",sdfe23506a3b0cdc8:"1) \u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0432 Safari \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435",se740f75b95a51807:"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0435\u0433\u043E \u0432 Dock \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u0438 \u0438 \u0443\u0434\u043E\u0431\u0441\u0442\u0432\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043D\u0438\u044F.",sfea652f6580ff086:"\u042D\u0442\u043E\u0442 \u0432\u0435\u0431-\u0441\u0430\u0439\u0442 \u0438\u043C\u0435\u0435\u0442 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F."},wN={s182ab2d6c997515f:"Daha iyi bir deneyim ve kolay eri\u015Fim i\xE7in Ana Ekran\u0131n\u0131za ekleyin.",s1b9047d53d9f9d22:"2) Gezinme \xE7ubu\u011Funda Payla\u015F'a bas\u0131n",s37a9e8aec5713460:"Daha Fazla",s5c6aad7a7e4a1437:"3) Ana Ekrana Ekle'ye bas\u0131n",s6196153c4b0c1ea0:"Y\xFCkle",s922329d6f6213590:"Dock\u2019a Ekle",sa5ef80b4bb9b39f8:"K\xFC\xE7\xFClt",sa7551383d1897fcc:"2) Dock\u2019a ekleye bas\u0131n",sba52286c21552a4e:"Daha iyi bir deneyim ve kolay eri\u015Fim i\xE7in cihaz\u0131n\u0131za y\xFCkleyin.",sc79fd7641eb9a975:"Talimatlar\u0131 gizle",scdaf4bbff76674c8:"Ana Ekrana Ekle",sdfe23506a3b0cdc8:"1) Safari taray\u0131c\u0131s\u0131nda a\xE7\u0131n",se740f75b95a51807:"Daha iyi bir deneyim ve kolay eri\u015Fim i\xE7in Dock\u2019a ekleyin.",sfea652f6580ff086:"Bu site uygulama i\u015Flevselli\u011Fine sahiptir."},kN={s182ab2d6c997515f:"F\xFCgen Sie es zu Ihrem Startbildschirm hinzu, um eine umfassende Erfahrung und einen leichten Zugriff zu erhalten.",s1b9047d53d9f9d22:"2) Dr\xFCcken Sie auf Teilen in der Navigationsleiste",s37a9e8aec5713460:"Mehr",s5c6aad7a7e4a1437:"3) Dr\xFCcken Sie Hinzuf\xFCgen zum Startbildschirm",s6196153c4b0c1ea0:"Installieren",s922329d6f6213590:"Zum Dock hinzuf\xFCgen",sa5ef80b4bb9b39f8:"Weniger",sa7551383d1897fcc:"2) Dr\xFCcken Sie auf Zum Dock hinzuf\xFCgen",sba52286c21552a4e:"Installieren Sie es auf Ihrem Ger\xE4t f\xFCr eine umfassende Erfahrung und einen leichten Zugriff.",sc79fd7641eb9a975:"Anleitung ausblenden",scdaf4bbff76674c8:"Hinzuf\xFCgen zum Startbildschirm",sdfe23506a3b0cdc8:"1) In Safari-Browser \xF6ffnen",se740f75b95a51807:"F\xFCgen Sie es zu Ihrem Dock hinzu, um eine umfassende Erfahrung und einen leichten Zugriff zu erhalten.",sfea652f6580ff086:"Diese Website verf\xFCgt \xFCber App-Funktionalit\xE4t."},SN={s182ab2d6c997515f:"A\xF1\xE1delo a tu pantalla de inicio para una experiencia amplia y acceso f\xE1cil.",s1b9047d53d9f9d22:"2) Presionar Compartir en la barra de direcciones",s37a9e8aec5713460:"M\xE1s",s5c6aad7a7e4a1437:"3) Presionar A\xF1adir a pantalla de inicio",s6196153c4b0c1ea0:"Instalar",s922329d6f6213590:"A\xF1adir al Dock",sa5ef80b4bb9b39f8:"Menos",sa7551383d1897fcc:"2) Presionar A\xF1adir al Dock",sba52286c21552a4e:"Inst\xE1lalo en tu dispositivo para una experiencia amplia y acceso f\xE1cil.",sc79fd7641eb9a975:"Esconder instrucciones",scdaf4bbff76674c8:"A\xF1adir a pantalla de inicio",sdfe23506a3b0cdc8:"1) Abrir en el navegador web Safari",se740f75b95a51807:"A\xF1\xE1delo a tu Dock para una experiencia amplia y acceso f\xE1cil.",sfea652f6580ff086:"Este sitio tiene funcionalidad de aplicaci\xF3n."},CN={s182ab2d6c997515f:"Voeg het toe aan je startscherm voor een uitgebreide ervaring en gemakkelijke toegang.",s1b9047d53d9f9d22:"2) Druk op delen in de navigatiebalk",s37a9e8aec5713460:"Meer",s5c6aad7a7e4a1437:"3) Druk op Toevoegen aan het startscherm",s6196153c4b0c1ea0:"Installeren",s922329d6f6213590:"Toevoegen aan Dock",sa5ef80b4bb9b39f8:"Minder",sa7551383d1897fcc:"2) Druk op Toevoegen aan Dock",sba52286c21552a4e:"Installeer het op je apparaat voor een uitgebreide ervaring en gemakkelijke toegang.",sc79fd7641eb9a975:"Instructie verbergen",scdaf4bbff76674c8:"Toevoegen aan het startscherm",sdfe23506a3b0cdc8:"1) Open in Safari-browser",se740f75b95a51807:"Voeg het toe aan je Dock voor een uitgebreide ervaring en makkelijke toegang.",sfea652f6580ff086:"Deze site heeft app-functionaliteit."},EN={s182ab2d6c997515f:"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AD\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03B7\u03BD \u03BF\u03B8\u03CC\u03BD\u03B7 \u0391\u03C6\u03B5\u03C4\u03B7\u03C1\u03AF\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03B5\u03BA\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03BA\u03B1\u03B9 \u03B5\u03CD\u03BA\u03BF\u03BB\u03B7 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7.",s1b9047d53d9f9d22:"2) \u03A0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 \u039A\u03BF\u03B9\u03BD\u03BF\u03C0\u03BF\u03AF\u03B7\u03C3\u03B7 \u03C3\u03C4\u03B7 \u03B3\u03C1\u03B1\u03BC\u03BC\u03AE \u03C0\u03BB\u03BF\u03AE\u03B3\u03B7\u03C3\u03B7\u03C2",s37a9e8aec5713460:"\u03A0\u03B5\u03C1\u03B9\u03C3\u03C3\u03CC\u03C4\u03B5\u03C1\u03B1",s5c6aad7a7e4a1437:"3) \u03A0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 \u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u03BF\u03B8\u03CC\u03BD\u03B7 \u0391\u03C6\u03B5\u03C4\u03B7\u03C1\u03AF\u03B1\u03C2",s6196153c4b0c1ea0:"\u0395\u03B3\u03BA\u03B1\u03C4\u03AC\u03C3\u03C4\u03B1\u03C3\u03B7",s922329d6f6213590:"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u03A0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7",sa5ef80b4bb9b39f8:"\u039B\u03B9\u03B3\u03CC\u03C4\u03B5\u03C1\u03B1",sa7551383d1897fcc:"2) \u03A0\u03B1\u03C4\u03AE\u03C3\u03C4\u03B5 \u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u03A0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7",sba52286c21552a4e:"\u0395\u03B3\u03BA\u03B1\u03C4\u03B1\u03C3\u03C4\u03AE\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03B7 \u03C3\u03C5\u03C3\u03BA\u03B5\u03C5\u03AE \u03C3\u03B1\u03C2 \u03B3\u03B9\u03B1 \u03B5\u03BA\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03BA\u03B1\u03B9 \u03B5\u03CD\u03BA\u03BF\u03BB\u03B7 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7.",sc79fd7641eb9a975:"\u0391\u03C0\u03CC\u03BA\u03C1\u03C5\u03C8\u03B7 \u039F\u03B4\u03B7\u03B3\u03B9\u03CE\u03BD",scdaf4bbff76674c8:"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AE\u03BA\u03B7 \u03C3\u03C4\u03B7\u03BD \u039F\u03B8\u03CC\u03BD\u03B7 \u0391\u03C6\u03B5\u03C4\u03B7\u03C1\u03AF\u03B1\u03C2",sdfe23506a3b0cdc8:"1) \u0391\u03BD\u03BF\u03AF\u03BE\u03C4\u03B5 \u03C4\u03BF\u03BD \u03C0\u03B5\u03C1\u03B9\u03B7\u03B3\u03B7\u03C4\u03AE Safari",se740f75b95a51807:"\u03A0\u03C1\u03BF\u03C3\u03B8\u03AD\u03C3\u03C4\u03B5 \u03C4\u03BF \u03C3\u03C4\u03B7\u03BD \u03A0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7 \u03B3\u03B9\u03B1 \u03B5\u03BA\u03C4\u03B5\u03C4\u03B1\u03BC\u03AD\u03BD\u03B7 \u03B5\u03BC\u03C0\u03B5\u03B9\u03C1\u03AF\u03B1 \u03BA\u03B1\u03B9 \u03B5\u03CD\u03BA\u03BF\u03BB\u03B7 \u03C0\u03C1\u03CC\u03C3\u03B2\u03B1\u03C3\u03B7.",sfea652f6580ff086:"\u0391\u03C5\u03C4\u03CC\u03C2 \u03BF \u03B9\u03C3\u03C4\u03CC\u03C4\u03BF\u03C0\u03BF\u03C2 \u03AD\u03C7\u03B5\u03B9 \u03BB\u03B5\u03B9\u03C4\u03BF\u03C5\u03C1\u03B3\u03B9\u03BA\u03AE \u03B5\u03C6\u03B1\u03C1\u03BC\u03BF\u03B3\u03AE\u03C2."},TN={s182ab2d6c997515f:"Ajoutez-le \xE0 votre \xE9cran d'accueil pour une exp\xE9rience \xE9tendue et un acc\xE8s facile.",s1b9047d53d9f9d22:"2) Appuyez sur Partager dans la barre de navigation",s37a9e8aec5713460:"Plus",s5c6aad7a7e4a1437:"3) Appuyez sur Ajouter \xE0 l'\xE9cran d'accueil",s6196153c4b0c1ea0:"Installer",s922329d6f6213590:"Ajouter au Dock",sa5ef80b4bb9b39f8:"Moins",sa7551383d1897fcc:"2) Appuyez sur Ajouter au Dock",sba52286c21552a4e:"Installez-le sur votre appareil pour une exp\xE9rience compl\xE8te et un acc\xE8s facile.",sc79fd7641eb9a975:"Masquer les instructions",scdaf4bbff76674c8:"Ajouter \xE0 l'\xE9cran d'accueil",sdfe23506a3b0cdc8:"1) Ouvrir dans le navigateur Safari",se740f75b95a51807:"Ajoutez-le \xE0 votre Dock pour une exp\xE9rience \xE9tendue et un acc\xE8s facile.",sfea652f6580ff086:"Ce site poss\xE8de des fonctionnalit\xE9s d'application."},MN={s182ab2d6c997515f:"\u0414\u043E\u0434\u0430\u0458\u0442\u0435 \u0433\u0430 \u043D\u0430 Home Screen \u0437\u0430 \u0448\u0438\u0440\u043E\u043A\u0435 \u043C\u043E\u0433\u0443\u045B\u043D\u043E\u0441\u0442\u0438 \u0438 \u043B\u0430\u043A \u043F\u0440\u0438\u0441\u0442\u0443\u043F.",s1b9047d53d9f9d22:"2) \u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 Share \u0443 \u043D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u043E\u043D\u043E\u0458 \u0442\u0440\u0430\u0446\u0438",s37a9e8aec5713460:"\u0412\u0438\u0448\u0435",s5c6aad7a7e4a1437:"3) \u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 Add to Home Screen",s6196153c4b0c1ea0:"\u0418\u043D\u0441\u0442\u0430\u043B\u0438\u0440\u0430\u0458",sa5ef80b4bb9b39f8:"\u041C\u0430\u045A\u0435",sa7551383d1897fcc:"3) \u041F\u0440\u0438\u0442\u0438\u0441\u043D\u0438\u0442\u0435 Add to Dock",sba52286c21552a4e:"\u0418\u043D\u0441\u0442\u0430\u043B\u0438\u0440\u0430\u0458\u0442\u0435 \u0433\u0430 \u043D\u0430 \u0432\u0430\u0448\u0435\u043C \u0443\u0440\u0435\u0452\u0430\u0458\u0443 \u0437\u0430 \u0448\u0438\u0440\u043E\u043A\u0435 \u043C\u043E\u0433\u0443\u045B\u043D\u043E\u0441\u0442\u0438 \u0438 \u043B\u0430\u043A \u043F\u0440\u0438\u0441\u0442\u0443\u043F.",sc79fd7641eb9a975:"\u0421\u0430\u043A\u0440\u0438\u0458 \u0443\u043F\u0443\u0442\u0441\u0442\u0432\u043E",sdfe23506a3b0cdc8:"1) \u041E\u0442\u0432\u043E\u0440\u0438\u0442\u0435 \u0443 Safari \u043F\u0440\u0435\u0433\u043B\u0435\u0434\u0430\u0447\u0443",se740f75b95a51807:"\u0414\u043E\u0434\u0430\u0458\u0442\u0435 \u0433\u0430 \u0443 \u0432\u0430\u0448\u0443 Dock \u0437\u0430 \u0448\u0438\u0440\u043E\u043A\u0435 \u043C\u043E\u0433\u0443\u045B\u043D\u043E\u0441\u0442\u0438 \u0438 \u043B\u0430\u043A \u043F\u0440\u0438\u0441\u0442\u0443\u043F.",sfea652f6580ff086:"\u041E\u0432\u0430\u0458 \u0441\u0430\u0458\u0442 \u0438\u043C\u0430 \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u043D\u043E\u0441\u0442 \u0430\u043F\u043B\u0438\u043A\u0430\u0446\u0438\u0458\u0435.",s922329d6f6213590:"Add to Dock",scdaf4bbff76674c8:"Add to Home Screen"},AN={s182ab2d6c997515f:"Dodaj do swojego Ekranu G\u0142\xF3wnego, aby uzyska\u0107 bogate do\u015Bwiadczenie i \u0142atwy dost\u0119p.",s1b9047d53d9f9d22:'2) Wybierz "Udost\u0119pnij"',s37a9e8aec5713460:"Wi\u0119cej",s5c6aad7a7e4a1437:'3) Wybierz "Dodaj do Ekranu G\u0142\xF3wnego"',s6196153c4b0c1ea0:"Zainstaluj",s922329d6f6213590:"Dodaj do Docka",sa5ef80b4bb9b39f8:"Mniej",sa7551383d1897fcc:'2) Wybierz "Dodaj do Docka"',sba52286c21552a4e:"Zainstaluj na swoim urz\u0105dzeniu, aby uzyska\u0107 bogate do\u015Bwiadczenie i \u0142atwy dost\u0119p.",sc79fd7641eb9a975:"Ukryj instrukcj\u0119",scdaf4bbff76674c8:"Dodaj do Ekranu G\u0142\xF3wnego",sdfe23506a3b0cdc8:"1) Otw\xF3rz przegl\u0105dark\u0119 Safari",se740f75b95a51807:"Dodaj do swojego Docka, aby uzyska\u0107 bogate do\u015Bwiadczenie i \u0142atwy dost\u0119p.",sfea652f6580ff086:"Ta strona posiada funkcje aplikacji."},IN={s182ab2d6c997515f:"\u0414\u043E\u0434\u0430\u0439\u0442\u0435 \u043D\u0430 \u0414\u043E\u043C\u0430\u0448\u043D\u0456\u0439 \u0435\u043A\u0440\u0430\u043D \u0434\u043B\u044F \u0437\u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 \u0442\u0430 \u0448\u0438\u0440\u0448\u0438\u0445 \u043C\u043E\u0436\u043B\u0438\u0432\u043E\u0441\u0442\u0435\u0439.",s1b9047d53d9f9d22:"2) \u041D\u0430\u0442\u0438\u0441\u043D\u0443\u0442\u0438 \xAB\u041F\u043E\u0434\u0456\u043B\u0438\u0442\u0438\u0441\u044F\xBB",s37a9e8aec5713460:"\u0414\u0435\u0442\u0430\u043B\u044C\u043D\u0456\u0448\u0435",s5c6aad7a7e4a1437:"3) \u041D\u0430\u0442\u0438\u0441\u043D\u0443\u0442\u0438 \xAB\u041D\u0430 \u041F\u043E\u0447\u0430\u0442\u043A\u043E\u0432\u0438\u0439 \u0435\u043A\u0440\u0430\u043D\xBB",s6196153c4b0c1ea0:"\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0438",s922329d6f6213590:"\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u0430 Dock",sa5ef80b4bb9b39f8:"\u0417\u0433\u043E\u0440\u043D\u0443\u0442\u0438",sa7551383d1897fcc:"2) \u041D\u0430\u0442\u0438\u0441\u043D\u0443\u0442\u0438 \xAB\u0414\u043E\u0434\u0430\u0442\u0438 \u043D\u0430 Dock\xBB",sba52286c21552a4e:"\u0412\u0441\u0442\u0430\u043D\u043E\u0432\u0456\u0442\u044C \u043D\u0430 \u0432\u0430\u0448 \u043F\u0440\u0438\u0441\u0442\u0440\u0456\u0439 \u0434\u043B\u044F \u0437\u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 \u0442\u0430 \u0448\u0438\u0440\u0448\u0438\u0445 \u043C\u043E\u0436\u043B\u0438\u0432\u043E\u0441\u0442\u0435\u0439.",sc79fd7641eb9a975:"\u0421\u0445\u043E\u0432\u0430\u0442\u0438 \u0406\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0456\u044E",scdaf4bbff76674c8:"\u041D\u0430 \u041F\u043E\u0447\u0430\u0442\u043A\u043E\u0432\u0438\u0439 \u044D\u043A\u0440\u0430\u043D",sdfe23506a3b0cdc8:"1) \u0412\u0456\u0434\u043A\u0440\u0438\u0442\u0438 \u0432 Safari \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0456",se740f75b95a51807:"\u0414\u043E\u0434\u0430\u0439\u0442\u0435 \u043D\u0430 \u043F\u0430\u043D\u0435\u043B\u044C Dock \u0434\u043B\u044F \u0437\u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0443 \u0442\u0430 \u0448\u0438\u0440\u0448\u0438\u0445 \u043C\u043E\u0436\u043B\u0438\u0432\u043E\u0441\u0442\u0435\u0439.",sfea652f6580ff086:"\u0426\u0435\u0439 \u0441\u0430\u0439\u0442 \u043C\u0430\u0454 \u0444\u0443\u043D\u043A\u0446\u0456\u0457 \u0434\u043E\u0434\u0430\u0442\u043A\u0443."},PN={s182ab2d6c997515f:"\u5C07\u5176\u52A0\u5165\u4E3B\u5C4F\u5E55\uFF0C\u4EE5\u7372\u5F97\u66F4\u8C50\u5BCC\u7684\u9AD4\u9A57\u548C\u4FBF\u6377\u8A2A\u554F\u3002",s1b9047d53d9f9d22:"2) \u9EDE\u64CA\u5217\u8868\u4E0A\u7684\u5206\u4EAB\u6309\u9215",s37a9e8aec5713460:"\u8A73\u7D30\u8CC7\u8A0A",s5c6aad7a7e4a1437:"3) \u9EDE\u64CA\u52A0\u5165\u4E3B\u756B\u9762",s6196153c4b0c1ea0:"\u5B89\u88DD",s922329d6f6213590:"\u6DFB\u52A0\u5230Dock\u6B04",sa5ef80b4bb9b39f8:"\u7C21\u77ED\u8CC7\u8A0A",sa7551383d1897fcc:"2) \u9EDE\u9078\u6DFB\u52A0\u5230Dock\u6B04",sba52286c21552a4e:"\u5728\u60A8\u7684\u88DD\u7F6E\u4E0A\u5B89\u88DD\u5B83\uFF0C\u4EE5\u7372\u5F97\u66F4\u8C50\u5BCC\u7684\u9AD4\u9A57\u548C\u4FBF\u6377\u8A2A\u554F\u3002",sc79fd7641eb9a975:"\u96B1\u85CF\u5B89\u88DD\u6D41\u7A0B",scdaf4bbff76674c8:"\u5C07App\u52A0\u5165\u4E3B\u756B\u9762",sdfe23506a3b0cdc8:"1) \u5728Safari\u4E0A\u700F\u89BD\u6B64\u7DB2\u9801",se740f75b95a51807:"\u5C07\u5176\u52A0\u5165\u4F60\u7684Dock\u6B04\uFF0C\u4EE5\u7372\u5F97\u66F4\u8C50\u5BCC\u7684\u9AD4\u9A57\u548C\u4FBF\u6377\u8A2A\u554F\u3002",sfea652f6580ff086:"\u6B64\u7DB2\u7AD9\u5177\u6709\u61C9\u7528\u7A0B\u5F0F\u529F\u80FD\u3002"},DN={s182ab2d6c997515f:"\u5C06\u5176\u6DFB\u52A0\u5230\u4E3B\u5C4F\u5E55\uFF0C\u4EE5\u4EAB\u53D7\u66F4\u5168\u9762\u7684\u4F53\u9A8C\u5E76\u4FBF\u4E8E\u8BBF\u95EE\u3002",s1b9047d53d9f9d22:"2) \u70B9\u51FB\u5217\u8868\u4E0A\u7684\u5206\u4EAB\u6309\u94AE",s37a9e8aec5713460:"\u8BE6\u7EC6\u8D44\u8BAF",s5c6aad7a7e4a1437:"3) \u70B9\u51FB\u52A0\u5165\u4E3B\u753B\u9762",s6196153c4b0c1ea0:"\u5B89\u88C5",s922329d6f6213590:"\u6DFB\u52A0\u5230Dock",sa5ef80b4bb9b39f8:"\u7B80\u77ED\u8D44\u8BAF",sa7551383d1897fcc:"2) \u6309\u4E0B\u6DFB\u52A0\u5230Dock",sba52286c21552a4e:"\u5728\u60A8\u7684\u8BBE\u5907\u4E0A\u5B89\u88C5\uFF0C\u4EE5\u4EAB\u6709\u66F4\u5168\u9762\u7684\u4F53\u9A8C\u548C\u4FBF\u6377\u7684\u8BBF\u95EE\u3002",sc79fd7641eb9a975:"\u9690\u85CF\u5B89\u88C5\u6D41\u7A0B",scdaf4bbff76674c8:"\u5C06App\u52A0\u5165\u4E3B\u753B\u9762",sdfe23506a3b0cdc8:"1) \u5728Safari\u4E0A\u6D4F\u89C8\u6B64\u7F51\u9875",se740f75b95a51807:"\u5C06\u5176\u6DFB\u52A0\u5230\u60A8\u7684Dock\uFF0C\u4EE5\u4EAB\u53D7\u66F4\u5168\u9762\u7684\u4F53\u9A8C\u5E76\u4FBF\u4E8E\u8BBF\u95EE\u3002",sfea652f6580ff086:"\u6B64\u7F51\u7AD9\u5177\u5907app\u7684\u529F\u80FD\u6027\u3002"},LN={s182ab2d6c997515f:"Aggiungilo alla schermata principale per un'esperienza pi\xF9 completa e un accesso facile.",s1b9047d53d9f9d22:"2) Premi Condividi nella barra di navigazione",s37a9e8aec5713460:"Pi\xF9",s5c6aad7a7e4a1437:"3) Premi Aggiungi alla schermata principale",s6196153c4b0c1ea0:"Installa",s922329d6f6213590:"Aggiungi al Dock",sa5ef80b4bb9b39f8:"Meno",sa7551383d1897fcc:"2) Premi Aggiungi al Dock",sba52286c21552a4e:"Installalo sul tuo dispositivo per un'esperienza pi\xF9 completa e un accesso facile.",sc79fd7641eb9a975:"Nascondi istruzioni",scdaf4bbff76674c8:"Aggiungi alla schermata principale",sdfe23506a3b0cdc8:"1) Apri nel browser Safari",se740f75b95a51807:"Aggiungilo al Dock per un'esperienza pi\xF9 completa e un accesso facile.",sfea652f6580ff086:"Questo sito ha funzionalit\xE0 di app."},FN={s182ab2d6c997515f:"P\u0159idejte jej na plochu pro roz\u0161\xED\u0159en\xE9 vyu\u017Eit\xED a snadn\xFD p\u0159\xEDstup.",s1b9047d53d9f9d22:"2) Stiskn\u011Bte tla\u010D\xEDtko Sd\xEDlet na naviga\u010Dn\xEDm panelu",s37a9e8aec5713460:"Vice",s5c6aad7a7e4a1437:"3) Stiskn\u011Bte tla\u010D\xEDtko P\u0159idat na plochu",s6196153c4b0c1ea0:"Nainstalovat",s922329d6f6213590:"P\u0159idat do Docku",sa5ef80b4bb9b39f8:"M\xE9n\u011B",sa7551383d1897fcc:"2) Stiskn\u011Bte P\u0159idat do Docku",sba52286c21552a4e:"Nainstalujte si jej na sv\xE9 za\u0159\xEDzen\xED pro roz\u0161\xED\u0159en\xE9 vyu\u017Eit\xED a snadn\xFD p\u0159\xEDstup.",sc79fd7641eb9a975:"Skr\xFDt instrukce",scdaf4bbff76674c8:"P\u0159idat na plochu",sdfe23506a3b0cdc8:"1) Otev\u0159ete v prohl\xED\u017Ee\u010Di Safari",se740f75b95a51807:"P\u0159idejte jej do sv\xE9ho Docku pro roz\u0161\xED\u0159en\xE9 vyu\u017Eit\xED a snadn\xFD p\u0159\xEDstup.",sfea652f6580ff086:"Tento web m\xE1 funkce aplikace."},zN={s182ab2d6c997515f:"Legg den til p\xE5 Hjem-skjermen din for \xE5 f\xE5 en bedre brukeropplevelse og raskere tilgang.",s1b9047d53d9f9d22:"2) Trykk p\xE5 Del-knappen i navigasjonslinjen",s37a9e8aec5713460:"Mer",s5c6aad7a7e4a1437:"3) Velg Legg til p\xE5 Hjem-skjerm",s6196153c4b0c1ea0:"Installer",s922329d6f6213590:"Legg til i Dock",sa5ef80b4bb9b39f8:"Mindre",sa7551383d1897fcc:"2) Velg Legg til i Dock",sba52286c21552a4e:"Installer den p\xE5 enheten din for \xE5 f\xE5 en bedre brukeropplevelse og raskere tilgang.",sc79fd7641eb9a975:"Skjul instruksjoner",scdaf4bbff76674c8:"Legg til p\xE5 Hjem-skjerm",sdfe23506a3b0cdc8:"1) \xC5pne i Safari",se740f75b95a51807:"Legg den til i Docken din for \xE5 f\xE5 en bedre brukeropplevelse og raskere tilgang.",sfea652f6580ff086:"Denne siden har app-funksjonalitet."},NN={s182ab2d6c997515f:"Adicione \xE0 Tela de In\xEDcio para uma melhor experi\xEAncia e mais f\xE1cil acesso.",s1b9047d53d9f9d22:"2) Pressione Compartilhar na barra de endere\xE7o",s37a9e8aec5713460:"Mais",s5c6aad7a7e4a1437:"3) Pressione Adicionar \xE0 Tela de In\xEDcio",s6196153c4b0c1ea0:"Instalar",s922329d6f6213590:"Adicionar ao Dock",sa5ef80b4bb9b39f8:"Menos",sa7551383d1897fcc:"2) Pressione Adicionar ao Dock",sba52286c21552a4e:"Instale no dispositivo para uma melhor experi\xEAncia e mais f\xE1cil acesso.",sc79fd7641eb9a975:"Ocultar Instru\xE7\xF5es",scdaf4bbff76674c8:"Adicionar \xE0 Tela de In\xEDcio",sdfe23506a3b0cdc8:"1) Abra no navegador Safari",se740f75b95a51807:"Adicione ao Dock para uma melhor experi\xEAncia e mais f\xE1cil acesso.",sfea652f6580ff086:"Este site possui funcionalidade de aplicativo."},ON={s182ab2d6c997515f:"\u30DB\u30FC\u30E0\u753B\u9762\u306B\u8FFD\u52A0\u3057\u3066\u3001\u5E45\u5E83\u3044\u4F53\u9A13\u3068\u7C21\u5358\u306A\u30A2\u30AF\u30BB\u30B9\u3092\u5B9F\u73FE\u3057\u3066\u304F\u3060\u3055\u3044\u3002",s1b9047d53d9f9d22:"2) \u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3\u30D0\u30FC\u3067\u5171\u6709\u3092\u62BC\u3059",s37a9e8aec5713460:"\u5C55\u958B",s5c6aad7a7e4a1437:"3) \u300C\u30DB\u30FC\u30E0\u753B\u9762\u306B\u8FFD\u52A0\u300D\u3092\u62BC\u3059",s6196153c4b0c1ea0:"\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB",s922329d6f6213590:"Dock\u306B\u8FFD\u52A0",sa5ef80b4bb9b39f8:"\u6298\u308A\u305F\u305F\u3080",sa7551383d1897fcc:"2) \u300CDock\u306B\u8FFD\u52A0\u300D\u3092\u62BC\u3059",sba52286c21552a4e:"\u30C7\u30D0\u30A4\u30B9\u306B\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B\u3053\u3068\u3067\u3001\u3088\u308A\u5145\u5B9F\u3057\u305F\u4F53\u9A13\u3068\u7C21\u5358\u306A\u30A2\u30AF\u30BB\u30B9\u3092\u5B9F\u73FE\u3067\u304D\u307E\u3059\u3002",sc79fd7641eb9a975:"\u8AAC\u660E\u3092\u975E\u8868\u793A",scdaf4bbff76674c8:"\u30DB\u30FC\u30E0\u753B\u9762\u306B\u8FFD\u52A0",sdfe23506a3b0cdc8:"1) Safari\u3067\u958B\u304F",se740f75b95a51807:"\u30C9\u30C3\u30AF\u306B\u8FFD\u52A0\u3057\u3066\u3001\u5E45\u5E83\u3044\u4F53\u9A13\u3068\u7C21\u5358\u306A\u30A2\u30AF\u30BB\u30B9\u3092\u5B9F\u73FE\u3057\u3066\u304F\u3060\u3055\u3044\u3002",sfea652f6580ff086:"\u3053\u306E\u30B5\u30A4\u30C8\u306F\u30A2\u30D7\u30EA\u6A5F\u80FD\u304C\u3042\u308A\u307E\u3059\u3002"},i7=new Map([["ru",xv],["tr",wv],["de",kv],["es",Sv],["nl",Cv],["el",Ev],["fr",Tv],["sr",Mv],["pl",Av],["uk",Iv],["zh",Pv],["zh-CN",Dv],["it",Lv],["cs",Fv],["no",zv],["pt",Nv],["ja",Ov]]),{getLocale:Poe,setLocale:Z8}=(nf={sourceLocale:"en",targetLocales:_N,loadLocale:async i=>i7.get(i)},function(i){if(W8)throw Error("lit-localize can only be configured once");Cs=i,W8=!0}((i,e)=>yN(t7,i,e)),e1=e7=nf.sourceLocale,Ym=new Set(nf.targetLocales),Ym.add(nf.sourceLocale),Uv=nf.loadLocale,{getLocale:bN,setLocale:vN}),nf,Vv=class{constructor(){this.icons=[{src:""}],this.screenshots=void 0,this.short_name="PWA",this.name="Progressive web application",this.description="Progressive web application"}},BN=or.css`.gallery{position:relative;--scrollbar-background-color:#fff;--scrollbar-thumb-color:rgb(146, 146, 146);--scrollbar-thumb-hover-color:rgb(100, 100, 100);--nav-btn-background-color:#fff;--nav-btn-fill-color:#141414}.gallery .gallery_scroller{scroll-snap-type:x mandatory;overflow-x:auto;overflow-y:hidden;display:flex;align-items:center;padding:10px 13px;padding-bottom:10px;margin:0 10px;-webkit-overflow-scrolling:touch}.gallery .gallery_scroller img{border-radius:6px;max-height:min(45vh,500px);box-shadow:0 3px 10px 0 rgba(0,0,0,.15);scroll-snap-align:center;scroll-snap-stop:always;position:relative}.gallery .gallery_scroller img+img{margin-left:15px}.gallery .gallery_scroller::-webkit-scrollbar{width:4px;height:2px}.gallery .gallery_scroller::-webkit-scrollbar-thumb{background:var(--scrollbar-thumb-color);border-radius:4px}.gallery .gallery_scroller::-webkit-scrollbar-thumb:hover{background:var(--scrollbar-thumb-hover-color)}.gallery .gallery_scroller::-webkit-scrollbar-track{background:var(--scrollbar-background-color);border-radius:4px}.gallery .gallery_scroller .scroller_wrap{display:flex;flex-direction:row;padding-right:13px}.gallery .btn{position:absolute;display:flex;align-items:center;-webkit-user-select:none;user-select:none;top:50%;transform:translateY(-50%);height:30px;width:30px;border-radius:50%;background-color:var(--nav-btn-background-color);box-shadow:rgba(0,0,0,.3) 2px 4px 4px 1px;background-repeat:no-repeat;opacity:.8;z-index:1}.gallery .btn.prev{left:5px}.gallery .btn.prev svg{margin-left:4px}.gallery .btn.next{right:5px}.gallery .btn.next svg{transform:rotate(180deg);margin-left:6px}.gallery .btn:hover{box-shadow:rgba(0,0,0,.5) 2px 4px 4px 1px;cursor:pointer;opacity:1}.gallery .btn svg{width:20px;height:20px}.gallery .btn svg path{fill:var(--nav-btn-fill-color)}.gallery.apple_desktop{--scrollbar-background-color:rgba(0, 0, 0, 0.1);--scrollbar-thumb-color:rgb(100, 100, 100);--scrollbar-thumb-hover-color:rgba(0, 0, 0, 0.85)}.gallery.apple_desktop .gallery_scroller{margin:0;padding-top:15px}.gallery.apple_desktop .btn{height:26px;width:26px;box-shadow:rgba(0,0,0,.3) 0 2px 2px 1px}.gallery.apple_desktop .btn:hover{box-shadow:rgba(0,0,0,.3) 0 2px 2px 1px}.gallery.apple_desktop .btn:active{filter:brightness(95%)}.gallery.apple_desktop .btn:active .svg{filter:brightness(110%)}.gallery.apple_desktop .btn svg{width:12px;height:auto;opacity:1}.gallery.apple_desktop .btn svg{margin-left:7px}.gallery.apple_mobile .btn.prev svg{margin-left:7px}.gallery.apple_mobile .btn svg{width:16px;height:auto}.gallery.apple_desktop .btn,.gallery.apple_mobile .btn{opacity:1}@media(hover:none)and (pointer:coarse){.gallery .btn.next,.gallery .btn.prev{display:none}.gallery_scroller::-webkit-scrollbar{display:none}}@media(prefers-color-scheme:dark){.gallery{--scrollbar-background-color:#424242;--nav-btn-background-color:#555555;--nav-btn-fill-color:#fff}.gallery.apple_desktop{--scrollbar-thumb-color:var(--nav-btn-fill-color);--scrollbar-background-color:var(--nav-btn-background-color);--scrollbar-thumb-hover-color:var(--nav-btn-fill-color)}.gallery.apple_desktop .btn:active{filter:brightness(110%)}.gallery.apple_desktop .btn:active .svg{filter:brightness(90%)}}`,RN=(i,e,t,r)=>or.html`${i?or.html`<div id="paginated_gallery" class="gallery ${e}"><div class="gallery_scroller"><div class="scroller_wrap">${i.map(o=>or.html`<img draggable="false" src='${o.src}'>`)}</div></div><span class="btn prev" @click="${r}">${e!="default"?or.html`<svg id="arrow-left" viewBox="0 0 23.023 18.518"><path fill="currentColor" d="M0 9.253c0 .305.134.586.378.818l8.106 8.093c.244.232.5.342.793.342.598 0 1.075-.44 1.075-1.05 0-.293-.11-.586-.306-.769l-2.734-2.783-4.834-4.407-.256.598 3.93.244h15.442c.635 0 1.075-.451 1.075-1.086s-.44-1.087-1.075-1.087H6.152l-3.93.245.256.61 4.834-4.419 2.734-2.783a1.09 1.09 0 0 0 .306-.77C10.352.44 9.875 0 9.277 0c-.293 0-.549.098-.818.366L.38 8.436c-.247.23-.38.511-.38.816Z"/></svg>`:or.html`<svg id="arrow-left" viewBox="0 0 96 96"><path d="M39.3756,48.0022l30.47-25.39a6.0035,6.0035,0,0,0-7.6878-9.223L26.1563,43.3906a6.0092,6.0092,0,0,0,0,9.2231L62.1578,82.615a6.0035,6.0035,0,0,0,7.6878-9.2231Z" fill="%23999" fill-rule="evenodd"/></svg>`} </span><span class="btn next" @click="${t}">${e!="default"?or.html`<svg height="15" width="15"><use href="#arrow-left"></use></svg>`:or.html` <svg height="15" width="15"><use href="#arrow-left"></use></svg> `}</span></div>`:""}`,_v=function(i,e,t,r){var o,n=arguments.length,u=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,e,t,r);else for(var h=i.length-1;h>=0;h--)(o=i[h])&&(u=(n<3?o(u):n>3?o(e,t,u):o(e,t))||u);return n>3&&u&&Object.defineProperty(e,t,u),u},K8=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},sf=class extends or.LitElement{constructor(){super(...arguments),this.screenshots=[],this.theme="default",this.calcScrollSize=()=>{let i=this.shadowRoot.querySelector("#paginated_gallery");if(!i)return;let e=i.querySelector(".gallery_scroller");if(!e)return;let t=Array.from(e.querySelectorAll("img"));if(!t)return;let r=t.find(o=>o.offsetWidth+o.offsetLeft>=e.scrollLeft);return r?{scroller:e,item:r}:void 0},this.scrollToNextPage=()=>{let i=this.calcScrollSize();i&&i.item.nextElementSibling&&i.scroller.scrollTo({top:0,left:i.scroller.scrollLeft+i.scroller.clientWidth+i.item.nextElementSibling.clientWidth/2,behavior:"smooth"})},this.scrollToPrevPage=()=>{let i=this.calcScrollSize();i&&i.item.previousElementSibling&&i.scroller.scrollTo({top:0,left:i.scroller.scrollLeft-i.scroller.clientWidth-i.item.previousElementSibling.clientWidth/2,behavior:"smooth"})},this._init=()=>{}}static get styles(){return BN}firstUpdated(){let i=this.calcScrollSize();i&&setTimeout(()=>{i.scroller.scrollTo({top:0,left:0})},300)}connectedCallback(){super.connectedCallback(),this._init()}render(){return or.html`${RN(this.screenshots,this.theme,this.scrollToNextPage,this.scrollToPrevPage)}`}};_v([(0,An.property)(),K8("design:type",Object)],sf.prototype,"screenshots",void 0),_v([(0,An.property)(),K8("design:type",String)],sf.prototype,"theme",void 0),sf=_v([(0,An.customElement)("pwa-gallery")],sf);var UN=sf,VN=(i,e,t,r)=>or.html`<div class="touch-header" id="touch-header"></div><div class="body-header"><div class="icon"><img src="${t}" alt="icon" class="icon-image"></div><div class="about"><div class="name"><label>${i}</label></div><div class="hostname">${location.hostname}</div></div><button class="material-button primary install" @click='${r}'>${Cs("Install")}</button></div>${e?or.html`<div class="description">${e}</div>`:""}`,Ld=(i,e,t)=>{let r=new CustomEvent(e,{detail:{message:t}});i.dispatchEvent(r)},wo=class{static isAppleMobile(){return!(!(["iPhone","iPad","iPod"].includes(navigator.platform)||navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)||!("serviceWorker"in navigator))}static isAppleDesktop(){let e=navigator.userAgent.toLowerCase();if(navigator.maxTouchPoints||!e.match(/macintosh/))return!1;let t=/version\/(\d{2})\./.exec(e);if(!(t&&t[1]&&parseInt(t[1])>=17))return!1;let r=!!document.createElement("audio").canPlayType('audio/wav; codecs="1"'),o=!!new OffscreenCanvas(1,1).getContext("webgl");return r&&o}static isStandalone(){return!!(window.matchMedia("(display-mode: standalone)").matches||"standalone"in navigator&&navigator.standalone===!0)}static async getInstalledRelatedApps(){if("getInstalledRelatedApps"in navigator)try{await navigator.getInstalledRelatedApps().then(e=>e)}catch{}return[]}static async isRelatedAppsInstalled(){return!!(await this.getInstalledRelatedApps()).length}static eventInstalledSuccess(e){Ld(e,"pwa-install-success-event","App install success (Chromium/Android only)")}static eventInstalledFail(e){Ld(e,"pwa-install-fail-event","App install failed (Chromium/Android only)")}static eventUserChoiceResult(e,t){Ld(e,"pwa-user-choice-result-event",t)}static eventInstallAvailable(e){Ld(e,"pwa-install-available-event","App install available")}static eventInstallHowTo(e){Ld(e,"pwa-install-how-to-event","App install instruction showed")}static eventGallery(e){Ld(e,"pwa-install-gallery-event","App install gallery showed")}},of=function(i,e,t,r){var o,n=arguments.length,u=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,e,t,r);else for(var h=i.length-1;h>=0;h--)(o=i[h])&&(u=(n<3?o(u):n>3?o(e,t,u):o(e,t))||u);return n>3&&u&&Object.defineProperty(e,t,u),u},Jm=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},yu=class extends or.LitElement{constructor(){super(...arguments),this.props={name:"",description:"",icon:""},this.install={handleEvent:()=>{}},this.hideDialog=()=>{},this.disableClose=!1,this._callInstall=()=>{this.install.handleEvent()},this._callHide=()=>{this.hideDialog(),this.setupAppearence()},this.bindedElement=null,this._saveBodyStyle=document.body.style.overscrollBehaviorY,this.dragMobileSheet=(i,e,t)=>{if(!i||!e||!t)return null;let r=0,o=e.clientHeight+t.clientHeight,n=_=>_.clientY||(_.changedTouches&&_.changedTouches.length?_.changedTouches[0].clientY:0),u=_=>{window.addEventListener("mouseup",h),window.addEventListener("mousemove",m),window.addEventListener("touchend",h),window.addEventListener("touchmove",m),r=n(_)-e.getBoundingClientRect().top,document.body.style.overscrollBehaviorY="none"},h=_=>{if(document.body.style.overscrollBehaviorY=this._saveBodyStyle,!this.disableClose&&n(_)>=window.innerHeight-25)b(_,window.innerHeight+50,!0);else if(window.innerHeight-n(_)>i.clientHeight/2.5){b(_,window.innerHeight-i.clientHeight);try{wo.eventGallery(this.getRootNode().host)}catch{}}else b(_,window.innerHeight-o-35)},m=_=>{let S=n(_);this.disableClose&&window.innerHeight-S<70||S<=window.innerHeight-i.clientHeight+r||(i.style.setProperty("transition","none"),i.style.setProperty("--translateY",`translateY(${S-r}px)`))},b=(_,S,T)=>{window.removeEventListener("mouseup",h),window.removeEventListener("mousemove",m),window.removeEventListener("touchend",h),window.removeEventListener("touchmove",m),window.innerWidth>=768||(!S&&n(_)>=window.innerHeight-o?i.style.setProperty("--translateY",`translateY(calc(100vh - ${o}px))`):i.style.setProperty("--translateY",`translateY(${(S||n(_))+35}px)`),i.style.setProperty("transition","transform 500ms cubic-bezier(0.4, 0, 0, 1) 0s"),T&&(e.removeEventListener("mousedown",u),e.removeEventListener("touchstart",u),setTimeout(this._callHide,250)))};return e.addEventListener("mousedown",u),e.addEventListener("touchstart",u,{passive:!0}),b(new MouseEvent("mouseup"),window.innerHeight-o-35),{touchElement:e,listener:u}},this.setupAppearence=()=>{this.bindedElement&&(this.bindedElement.touchElement.removeEventListener("mousedown",this.bindedElement.listener),this.bindedElement.touchElement.removeEventListener("touchstart",this.bindedElement.listener)),this.bindedElement=this.dragMobileSheet(this.parentElement?.parentElement,this.parentElement?.getElementsByClassName("touch-header")[0],this.parentElement?.getElementsByClassName("body-header")[0])},this._init=()=>{this.setupAppearence(),window.addEventListener("resize",this.setupAppearence)}}firstUpdated(){this._init()}createRenderRoot(){return this}connectedCallback(){super.connectedCallback()}render(){return or.html`${VN(this.props.name,this.props.description,this.props.icon,this._callInstall)}`}};of([(0,An.property)({type:Object}),Jm("design:type",Object)],yu.prototype,"props",void 0),of([(0,An.property)({type:Object}),Jm("design:type",Object)],yu.prototype,"install",void 0),of([(0,An.property)(),Jm("design:type",Object)],yu.prototype,"hideDialog",void 0),of([(0,An.property)(),Jm("design:type",Object)],yu.prototype,"disableClose",void 0),yu=of([(0,An.customElement)("pwa-bottom-sheet")],yu);var jN=yu,HN=or.css`#pwa-install-element{-webkit-user-select:none;user-select:none}#pwa-install-element .install-dialog{--text-color-normal:#212121;--background-color:#fff;--border-bottom-color:#DBDCDE;--scrollbar-background-color:#fff;font-family:Roboto,"Segoe UI",system-ui;position:fixed;display:inline-block;opacity:0;visibility:hidden;z-index:2147483001}#pwa-install-element .install-dialog.chrome{max-width:380px;width:90%;min-height:90px;margin:0 auto;right:150px;left:auto;background-color:var(--background-color);filter:drop-shadow(0 5px 15px rgba(0, 0, 0, .3));font-size:15px;color:var(--text-color-normal);border-radius:8px;top:-100px;transition:top .5s ease-in-out,opacity .8s ease-in-out,max-height .35s ease-in-out}#pwa-install-element .install-dialog.chrome.available{opacity:1;top:28px;visibility:visible}#pwa-install-element .install-dialog.chrome .dialog-body{display:grid;grid-template-columns:70px 1fr}#pwa-install-element .install-dialog.chrome .dialog-body .icon{display:flex;align-items:flex-start}#pwa-install-element .install-dialog.chrome .dialog-body .icon .icon-image{width:48px;height:48px;margin:0 auto;margin-top:10px;border-radius:6px}#pwa-install-element .install-dialog.chrome .dialog-body .about{display:grid;grid-template-rows:30px auto}#pwa-install-element .install-dialog.chrome .dialog-body .about .hostname,#pwa-install-element .install-dialog.chrome .dialog-body .about .name{padding:0 5px;overflow:hidden}#pwa-install-element .install-dialog.chrome .dialog-body .about .name{font-weight:500;font-size:18px;line-height:24px;margin-top:5px;align-items:flex-start;display:flex}#pwa-install-element .install-dialog.chrome .dialog-body .about .name label{text-overflow:ellipsis;word-break:break-all;white-space:nowrap;overflow:hidden}#pwa-install-element .install-dialog.chrome .dialog-body .about .hostname{font-size:13px;font-weight:400;opacity:.7;line-height:14px;overflow-x:hidden;text-overflow:ellipsis;text-align:left;word-break:break-all;white-space:nowrap}#pwa-install-element .install-dialog.chrome .dialog-body .about+hr{margin-top:10px}#pwa-install-element .install-dialog.chrome .dialog-body .description{font-weight:400;line-height:20px;grid-column:1/3;padding:0 6px;margin:10px 5px 5px;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical;max-height:115px;overflow:hidden;overflow-y:auto;text-overflow:ellipsis;text-align:left}#pwa-install-element .install-dialog.chrome .dialog-body .app-description{font-size:13px;margin-bottom:10px}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar{width:4px;height:4px}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar-thumb{background:#929292;border-radius:4px}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar-thumb:hover{background:#646464}#pwa-install-element .install-dialog.chrome .dialog-body .app-description::-webkit-scrollbar-track{background:var(--scrollbar-background-color);border-radius:4px}#pwa-install-element .install-dialog.chrome .dialog-body .install-description{font-size:14px}#pwa-install-element .install-dialog.chrome .dialog-body hr{height:1px;width:100%;grid-column:1/3;background-color:var(--border-bottom-color);border:none;margin:0}#pwa-install-element .install-dialog.chrome .dialog-body .action-buttons{display:grid;grid-template-columns:50% auto;grid-column-start:1;grid-column-end:3;gap:10px;padding:10px 10px}#pwa-install-element .install-dialog.chrome .dialog-body .action-buttons .primary{grid-column-start:2}#pwa-install-element .install-dialog.chrome .dialog-body pwa-gallery{grid-column:1/3;max-height:0;opacity:0;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;overflow:hidden}#pwa-install-element .install-dialog.chrome.gallery pwa-gallery{transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out;max-height:70vh;opacity:1}#pwa-install-element .install-dialog.mobile{--touch-header-color:#DBDCE0;top:0;max-width:414px;width:100%;bottom:auto;left:0;right:0;transition:none;transform:translateY(100vh);border-radius:0;border-top-left-radius:15px;border-top-right-radius:15px;padding-bottom:35px}#pwa-install-element .install-dialog.mobile .dialog-body{grid-template-columns:1fr}#pwa-install-element .install-dialog.mobile .dialog-body .touch-header{height:30px;width:100%;padding-top:10px;box-sizing:border-box;cursor:grab}#pwa-install-element .install-dialog.mobile .dialog-body .touch-header:active{cursor:grabbing}#pwa-install-element .install-dialog.mobile .dialog-body .touch-header::before{content:"";width:40px;height:5px;border-radius:3px;background:var(--touch-header-color);margin:0 auto;display:block}#pwa-install-element .install-dialog.mobile .dialog-body .body-header{display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:15px;padding:18px 20px;padding-top:0;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .install{text-transform:capitalize;height:40px;padding:0 23px}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .about{grid-template-rows:auto auto;grid-gap:6px}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .about .name{padding:0;line-height:20px;font-size:16px}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .about .hostname{font-size:14px;font-weight:400;opacity:.7;line-height:14px;overflow-x:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap;padding:0}#pwa-install-element .install-dialog.mobile .dialog-body .body-header .icon .icon-image{margin:0;width:45px;height:45px}#pwa-install-element .install-dialog.mobile .dialog-body .description{padding:15px 20px 0;margin:0;margin-bottom:15px;-webkit-line-clamp:6;max-height:150px}#pwa-install-element .install-dialog.mobile .dialog-body pwa-gallery{max-height:100%;padding-bottom:15px;opacity:1}#pwa-install-element .install-dialog.mobile .material-button{border-radius:20px}#pwa-install-element .install-dialog.mobile.available{--translateY:translateY(calc(100vh - 85px));opacity:1;top:0;visibility:visible;transform:var(--translateY)}#pwa-install-element .material-button{--text-color-primary:#fff;--text-color-secondary:#374fc6;--background-color-primary:#374fc6;--background-color-ripple:#fff;position:relative;display:inline-block;box-sizing:border-box;border:none;border-radius:6px;padding:0 16px;min-width:64px;height:36px;vertical-align:middle;text-align:center;text-overflow:ellipsis;text-transform:uppercase;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);font-family:Roboto,"Segoe UI",BlinkMacSystemFont,system-ui,-apple-system;font-size:14px;font-weight:500;line-height:37px;overflow:hidden;outline:0;cursor:pointer;transition:box-shadow .2s}#pwa-install-element .material-button.primary{color:var(--text-color-primary);background-color:var(--background-color-primary)}#pwa-install-element .material-button.secondary{background-color:rgba(0,0,0,0);color:var(--text-color-secondary);box-shadow:none}#pwa-install-element .material-button.secondary::after,#pwa-install-element .material-button.secondary::before{background-color:var(--background-color-primary)}#pwa-install-element .material-button.secondary:active,#pwa-install-element .material-button.secondary:hover{box-shadow:none}#pwa-install-element .material-button.secondary.close{height:26px;min-width:26px;line-height:0;margin-right:0;margin-left:auto;padding:0;border-radius:50%}#pwa-install-element .material-button.secondary.close svg{width:16px;fill:var(--text-color-secondary)}#pwa-install-element .material-button.secondary.close::after{width:25px;height:25px;border-radius:50%}#pwa-install-element .material-button.secondary.close::before{border-radius:50%}#pwa-install-element .material-button::before{content:"";position:absolute;top:0;bottom:0;left:0;right:0;background-color:var(--background-color-ripple);opacity:0;transition:opacity .2s}#pwa-install-element .material-button::after{content:"";position:absolute;left:50%;top:50%;border-radius:50%;padding:50%;width:32px;height:32px;background-color:var(--background-color-ripple);opacity:0;transform:translate(-50%,-50%) scale(1);transition:opacity 1s,transform .5s}#pwa-install-element .material-button:hover{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}#pwa-install-element .material-button:hover::before{opacity:.08}#pwa-install-element .material-button:hover:focus::before{opacity:.3}#pwa-install-element .material-button:active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}#pwa-install-element .material-button:active::after{opacity:.32;transform:translate(-50%,-50%) scale(0);transition:transform 0s}@media(prefers-color-scheme:dark){#pwa-install-element .install-dialog{--text-color-normal:#fff;--background-color:#1e1e1e;--border-bottom-color:#404140;--scrollbar-background-color:#424242}#pwa-install-element .install-dialog.mobile{--touch-header-color:#3f403f}#pwa-install-element .install-dialog .material-button{--text-color-primary:#1B222C;--text-color-secondary:#a7c7fa;--background-color-primary:#a7c7fa}}@media(max-width:767px)and (min-height:495px){#pwa-install-element .install-dialog.chrome.mobile{display:inline-block}#pwa-install-element .install-dialog.chrome{display:none}}@media(min-width:768px),(max-height:495px){#pwa-install-element .install-dialog.chrome.mobile{display:none}#pwa-install-element .install-dialog.chrome{display:inline-block}}@media(max-height:420px){#pwa-install-element .install-dialog.chrome .dialog-body .description{-webkit-line-clamp:3;max-height:70px}}@media(hover:none)and (pointer:coarse){#pwa-install-element .install-dialog.chrome .dialog-body .description::-webkit-scrollbar{display:none}}`,qN=or.css`#pwa-install-element .install-dialog.apple{--text-color-normal:#333;--text-color-description:#333;--background-color:rgba(255, 255, 255, 0.8);--text-color-button:#fff;--background-color-button:#fff;--background-color-button-active:#DBDAE0;--border-bottom-color:rgba(0, 0, 0, 0.1);--icon-how-to-color:#527AFB;font-family:system-ui,-apple-system,HelveticaNeue,BlinkMacSystemFont,Roboto,"Segoe UI";max-width:380px;width:auto;margin:0 auto;right:0;left:0;font-size:15px;color:var(--text-color-normal);bottom:0;transition:transform .4s cubic-bezier(.33,1,.66,1),opacity .5s cubic-bezier(1,0,1,-2),border .35s ease-in-out;overflow:hidden;pointer-events:none;opacity:0;visibility:visible;transform:translateY(100%);will-change:opacity,transform}#pwa-install-element .install-dialog.apple.dialog-body{display:grid;grid-template-columns:95px 1fr;grid-template-rows:1fr auto;grid-template-areas:"icon description" "welcome welcome" "how-to how-to" "gallery gallery" "button button";border-radius:10px;border-bottom:1px solid transparent;background-color:var(--background-color);filter:drop-shadow(0 5px 15px rgba(0, 0, 0, .5));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}#pwa-install-element .install-dialog.apple.dialog-body .icon{display:flex;align-items:center;grid-area:icon;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple.dialog-body .icon .icon-image{width:64px;height:64px;margin:0 auto;border-radius:6px}#pwa-install-element .install-dialog.apple.dialog-body .close{height:26px;min-width:26px;line-height:0;margin-right:7px;margin-top:7px;margin-left:auto;padding:0;border-radius:50%;opacity:.5;outline:0;color:var(--text-color-normal);border:none;background-color:rgba(0,0,0,0);cursor:pointer;transition:opacity .2s ease-in-out,background-color .2s ease-in-out;grid-area:description}#pwa-install-element .install-dialog.apple.dialog-body .close svg{fill:var(--text-color-normal);width:18px}#pwa-install-element .install-dialog.apple.dialog-body .close:active,#pwa-install-element .install-dialog.apple.dialog-body .close:hover{opacity:1;background-color:var(--background-color-button)}#pwa-install-element .install-dialog.apple.dialog-body .about{display:grid;grid-template-rows:35px 60px;border-bottom:1px solid var(--border-bottom-color);grid-area:description}#pwa-install-element .install-dialog.apple.dialog-body .about .description,#pwa-install-element .install-dialog.apple.dialog-body .about .name{padding-right:15px;overflow:hidden}#pwa-install-element .install-dialog.apple.dialog-body .about .name{font-weight:600;padding-top:10px;padding-right:10px;line-height:22px;align-items:flex-start;display:flex}#pwa-install-element .install-dialog.apple.dialog-body .about .description{font-size:12px;line-height:15px;margin-bottom:15px;overflow-y:auto;color:var(--text-color-description)}#pwa-install-element .install-dialog.apple.dialog-body .welcome-to-install{font-size:15px;grid-area:welcome;text-align:left;font-weight:400;padding:15px;width:auto;border-bottom:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple .action-buttons{grid-area:button;grid-column-start:1;grid-column-end:3;padding:15px}#pwa-install-element .install-dialog.apple .dialog-button{display:grid;height:50px;width:100%;line-height:50px;border-radius:8px;color:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .dialog-button.button{border:none;outline:0;font-family:system-ui,-apple-system,HelveticaNeue,BlinkMacSystemFont;cursor:pointer;-webkit-user-select:none;user-select:none;font-weight:400;font-size:17px;padding:0;margin:0;background-color:var(--background-color-button)}#pwa-install-element .install-dialog.apple .dialog-button.button.install{padding:0 15px;text-align:left}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text{opacity:0;display:flex;align-items:center;justify-content:space-between;transition:opacity .4s ease-in-out .1s;overflow:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text>span{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text>svg{flex-shrink:0;width:20px}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text.show{opacity:1;visibility:visible;width:auto;height:auto}#pwa-install-element .install-dialog.apple .dialog-button.button.install .button-text.hide{opacity:0;position:absolute;width:0;height:0;visibility:hidden}#pwa-install-element .install-dialog.apple .dialog-button.button.gallery{display:flex;align-items:center;min-width:50px;width:auto;margin-right:15px}#pwa-install-element .install-dialog.apple .dialog-button.button.gallery #pwa-gallery{margin:0 auto;width:23px;fill:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .dialog-button.button:active{background-color:var(--background-color-button-active)}#pwa-install-element .install-dialog.apple .how-to-body{opacity:0;max-height:0;overflow:hidden;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;grid-area:how-to}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description{display:grid;-webkit-user-select:none;user-select:none;grid-auto-columns:1fr;grid-template-rows:1fr 1fr 1fr;gap:10px;padding:15px;padding-bottom:0}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step{display:inline-flex;flex-direction:row;gap:15px;align-items:center;font-size:14px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap{position:relative;display:inline-flex;flex-shrink:0;color:var(--icon-how-to-color);width:50px;height:50px;align-items:center;border-radius:6px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-add,#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-safari,#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{margin:0 auto}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{margin-bottom:4px;transform:scale(.9)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-add{transform:scale(.8);fill:var(--text-color-normal)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap #pwa-safari{transform:scale(.92)}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .svg-wrap .step-count{position:absolute;line-height:12px;top:3px;left:4px}#pwa-install-element .install-dialog.apple .how-to-body .how-to-description .description-step .step-text{font-weight:600;text-align:left}#pwa-install-element .install-dialog.apple pwa-gallery{grid-column:1/3;max-height:0;opacity:0;transition:opacity ease-in-out .5s,max-height .5s ease-in-out;overflow:hidden}#pwa-install-element .install-dialog.apple pwa-gallery+.action-buttons{display:flex}#pwa-install-element .install-dialog.apple.available{opacity:1;pointer-events:unset;transform:translateY(0);transition:transform .5s cubic-bezier(.33,1,.66,1),border .35s ease-in-out}#pwa-install-element .install-dialog.apple.gallery pwa-gallery{transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out;max-height:70vh;opacity:1}#pwa-install-element .install-dialog.apple.how-to .dialog-body{border-bottom:1px solid #e0e0e0}#pwa-install-element .install-dialog.apple.how-to .how-to-body{opacity:1;max-height:400px;overflow-y:auto;transition:opacity .3s ease-in-out .2s,max-height .5s ease-in-out}#pwa-install-element .install-dialog.apple.desktop{--text-color-normal:rgba(0, 0, 0, 0.85);--text-color-description:rgba(0, 0, 0, 0.85);--icon-how-to-color:rgba(0, 0, 0, 0.50);--background-color:rgb(246 246 246 / 85%);--background-color-button:#c6c1c6;--background-color-button-active:linear-gradient(0deg, rgba(64,121,250,1) 0%, rgba(84,144,251,1) 100%);--border-bottom-color:rgb(185 185 185);grid-template-columns:1fr;grid-template-rows:1fr auto;grid-template-areas:"icon" "description" "welcome" "how-to" "gallery" "button";gap:0;column-gap:0;padding:16px;max-width:260px;background:var(--background-color);border:1px solid var(--border-bottom-color)}#pwa-install-element .install-dialog.apple.desktop .icon{height:64px;padding-bottom:16px}#pwa-install-element .install-dialog.apple.desktop .icon .icon-image{border-radius:10px;width:52px;height:52px;filter:drop-shadow(0 1px 1px rgba(0, 0, 0, .15))}#pwa-install-element .install-dialog.apple.desktop .close{grid-area:icon;background:var(--background-color-button);opacity:1;height:20px;min-width:20px;margin-right:-5px;margin-top:-5px}#pwa-install-element .install-dialog.apple.desktop .close svg{width:14px}#pwa-install-element .install-dialog.apple.desktop .about{display:flex;flex-direction:column;align-items:center}#pwa-install-element .install-dialog.apple.desktop .about .name{font-size:13px;line-height:16px;font-weight:700;padding:0}#pwa-install-element .install-dialog.apple.desktop .about .description{padding:16px 0;margin:0;padding-top:10px;border-bottom:1px solid var(--border-bottom-color);min-width:100%}#pwa-install-element .install-dialog.apple.desktop .about .description,#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{text-align:center;font-size:11px;line-height:14px}#pwa-install-element .install-dialog.apple.desktop .about,#pwa-install-element .install-dialog.apple.desktop .icon,#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{border:none}#pwa-install-element .install-dialog.apple.desktop .welcome-to-install{padding:0;padding-top:16px}#pwa-install-element .install-dialog.apple.desktop .action-buttons{padding:0;padding-top:16px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button{font-size:13px;font-weight:400;padding:6px 8px;border-radius:6px;height:auto;line-height:18px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.install{color:#fff;background:var(--background-color-button-active);transition:background .3s ease-in-out .1s,color .3s ease-in-out}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.install svg{transform:none;width:18px}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.gallery{width:30px;min-width:30px;margin-right:10px;background:var(--background-color-button)}#pwa-install-element .install-dialog.apple.desktop .action-buttons .dialog-button.button.gallery #pwa-gallery{width:14px;transition:transform .4s ease-in-out}#pwa-install-element .install-dialog.apple.desktop .close:active,#pwa-install-element .install-dialog.apple.desktop .dialog-button.button:active{filter:brightness(105%)}#pwa-install-element .install-dialog.apple.desktop .close:active .button-text,#pwa-install-element .install-dialog.apple.desktop .dialog-button.button:active .button-text{filter:brightness(90%)}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description{padding:0;padding-top:16px;grid-template-rows:1fr 1fr}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step{font-size:12px;gap:16px}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap{width:32px;height:32px;color:var(--icon-how-to-color)}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap #pwa-share{width:16px;margin-bottom:2px;transform:none}#pwa-install-element .install-dialog.apple.desktop .how-to-body .how-to-description .description-step .svg-wrap #pwa-add{width:18px;transform:none}#pwa-install-element .install-dialog.apple.desktop.gallery #pwa-gallery{transform:rotate(180deg)}#pwa-install-element .install-dialog.apple.desktop.how-to .action-buttons .dialog-button.button.install{color:var(--text-color-normal);background:var(--background-color-button)}@media(min-width:667px){#pwa-install-element .install-dialog.apple{top:0;bottom:unset;transform:translateY(calc(-100% - 40px));right:28px;left:auto}#pwa-install-element .install-dialog.apple.available{top:28px;bottom:auto;max-height:calc(95vh - 28px)}}@media(min-width:667px)and (max-width:1366px){#pwa-install-element .install-dialog.apple{right:max(28px,env(safe-area-inset-right,28px));left:auto}}@media(max-width:666px){#pwa-install-element .install-dialog.apple .description-step .step-text{font-size:13px}#pwa-install-element .install-dialog.apple.available{bottom:20px;max-height:calc(85vh - 20px)}#pwa-install-element .install-dialog.apple.dialog-body{filter:drop-shadow(rgba(0, 0, 0, .5) 0 0 15px)}}@media(max-width:428px){#pwa-install-element .install-dialog.apple.dialog-body{max-width:100vw;filter:drop-shadow(rgba(0, 0, 0, .5) 0 -5px 10px);border-bottom-left-radius:0;border-bottom-right-radius:0}#pwa-install-element .install-dialog.apple.dialog-body .action-buttons{padding-bottom:max(15px,env(safe-area-inset-bottom))}#pwa-install-element .install-dialog.apple.dialog-body.available{bottom:0;max-height:85vh}}@media(max-height:548px){#pwa-install-element .install-dialog.apple.dialog-body.available{overflow-y:auto;max-height:calc(90vh - 28px - env(safe-area-inset-bottom,0px))}}@media(max-height:600px){#pwa-install-element .install-dialog.apple pwa-gallery{overflow-y:auto}}@media(prefers-color-scheme:dark){#pwa-install-element .install-dialog.apple.dialog-body{--text-color-normal:#fff;--text-color-description:#9E9AA1;--background-color:rgb(25 25 25 / 90%);--background-color-button:#353535;--background-color-button-active:#454545;--border-bottom-color:#353535}#pwa-install-element .install-dialog.apple.dialog-body .close:active,#pwa-install-element .install-dialog.apple.dialog-body .dialog-button.button:active{filter:brightness(105%)}#pwa-install-element .install-dialog.apple.dialog-body .close:active .button-text,#pwa-install-element .install-dialog.apple.dialog-body .dialog-button.button:active .button-text{filter:brightness(90%)}#pwa-install-element .install-dialog.apple.dialog-body.desktop{--text-color-description:var(--text-color-normal);--icon-how-to-color:#bcb8b6;--background-color:rgb(45 45 45 / 90%);--border-bottom-color:#5b5b5b;--background-color-button:#6d6765;--background-color-button-active:linear-gradient(0deg, rgba(59,108,200,1) 0%, rgba(66,123,250,1) 100%);outline:1px solid #1c1c1c;color-scheme:dark}}`,jv=(i=>{var e={};return Ki.d(e,i),e})({classMap:()=>$8}),$N=(i,e,t,r,o,n,u,h,m,b,_,S,T)=>{let P=()=>({available:m,gallery:T}),F=!o&&h.screenshots&&h.screenshots.length;return or.html`<div id="pwa-install-element"><div class="install-dialog chrome ${(0,jv.classMap)(P())}"><div class="dialog-body"><div class="icon"><img src="${u}" alt="icon" class="icon-image" draggable="false"></div><div class="about"><div class="name"><label>${i}</label> ${n?"":or.html`<button class="material-button secondary close" @click='${b}'><svg viewBox="0 0 24 24"><path d="M5.3 18.7c.2.2.4.3.7.3s.5-.1.7-.3l5.3-5.3 5.3 5.3a1.08 1.08 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3c.4-.4.4-1 0-1.4L13.4 12l5.3-5.3c.4-.4.4-1 0-1.4s-1-.4-1.4 0L12 10.6 6.7 5.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l5.3 5.3-5.3 5.3c-.4.4-.4 1 0 1.4z"/></svg></button>`}</div><div class="hostname">${location.hostname}</div></div>${e?or.html`<div class="description app-description">${e}</div>`:""} ${r?"":or.html`<hr><div class="description install-description">${t||`${Cs("This site has app functionality.")} ${Cs("Install it on your device for extensive experience and easy access.")}`}</div>`} ${F?or.html`<pwa-gallery .screenshots=${h.screenshots}></pwa-gallery>`:""}<div class="action-buttons">${F?or.html`<button class="material-button secondary" @click='${S}'>${Cs(T?"Less":"More")}</button>`:""} <button class="material-button primary install" @click='${_}'>${Cs("Install")}</button></div></div></div><div class="install-dialog chrome mobile ${(0,jv.classMap)(P())}"><div class="dialog-body"><pwa-bottom-sheet .props=${{name:i,icon:u,description:e}} .disableClose=${n} .install=${_} .hideDialog=${b}></pwa-bottom-sheet>${F?or.html`<pwa-gallery .screenshots=${h.screenshots}></pwa-gallery>`:""}</div></div></div>`},QN=(i,e,t,r,o,n,u,h,m,b,_,S,T,P,F)=>{let G=!o&&h.screenshots&&h.screenshots.length;return or.html`<aside id="pwa-install-element"><article class="install-dialog apple ${(0,jv.classMap)({available:m,"how-to":T,gallery:F,desktop:S})} dialog-body"><div class="icon"><img src="${u}" alt="icon" class="icon-image" draggable="false"></div>${n?"":or.html`<button type="button" title="close" class="close" @click='${b}'><svg viewBox="0 0 24 24"><path d="M5.3 18.7c.2.2.4.3.7.3s.5-.1.7-.3l5.3-5.3 5.3 5.3a1.08 1.08 0 0 0 .7.3 1.08 1.08 0 0 0 .7-.3c.4-.4.4-1 0-1.4L13.4 12l5.3-5.3c.4-.4.4-1 0-1.4s-1-.4-1.4 0L12 10.6 6.7 5.3c-.4-.4-1-.4-1.4 0s-.4 1 0 1.4l5.3 5.3-5.3 5.3c-.4.4-.4 1 0 1.4z"/></svg></button>`}<div class="about"><div class="name">${i}</div><div class="description">${e||location.hostname}</div></div>${r?"":or.html`<div class="welcome-to-install">${t||`${Cs("This site has app functionality.")} ${Cs(S?"Add it to your Dock for extensive experience and easy access.":"Add it to your Home Screen for extensive experience and easy access.")}`}</div>`}<div class="how-to-body"><div class="how-to-description">${S?"":or.html`<div class="description-step"><div class="svg-wrap"><svg id="pwa-safari" viewBox="0 0 20.283 19.932" width="24" height="24"><g fill="currentColor"><path d="M9.96 19.922c5.45 0 9.962-4.522 9.962-9.961C19.922 4.51 15.4 0 9.952 0 4.511 0 0 4.512 0 9.96c0 5.44 4.521 9.962 9.96 9.962Zm0-1.66A8.26 8.26 0 0 1 1.67 9.96c0-4.61 3.672-8.3 8.281-8.3 4.61 0 8.31 3.69 8.31 8.3 0 4.61-3.69 8.3-8.3 8.3Z"/><path d="m5.87 14.883 5.605-2.735a1.47 1.47 0 0 0 .683-.673l2.725-5.596c.312-.664-.166-1.182-.85-.84L8.447 7.764c-.302.136-.508.341-.674.673L5.03 14.043c-.312.645.196 1.152.84.84Zm4.09-3.72A1.19 1.19 0 0 1 8.77 9.97c0-.664.527-1.201 1.19-1.201a1.2 1.2 0 0 1 1.202 1.2c0 .655-.537 1.192-1.201 1.192Z"/></g></svg></div><div class="step-text">${Cs("1) Open in Safari browser")}</div></div>`}<div class="description-step"><div class="svg-wrap"><svg id="pwa-share" width="25" height="32" viewBox="0 0 17.695 26.475"><g fill="currentColor"><path d="M17.334 10.762v9.746c0 2.012-1.025 3.027-3.066 3.027H3.066C1.026 23.535 0 22.52 0 20.508v-9.746C0 8.75 1.025 7.734 3.066 7.734h2.94v1.573h-2.92c-.977 0-1.514.527-1.514 1.543v9.57c0 1.015.537 1.543 1.514 1.543h11.152c.967 0 1.524-.527 1.524-1.543v-9.57c0-1.016-.557-1.543-1.524-1.543h-2.91V7.734h2.94c2.04 0 3.066 1.016 3.066 3.028Z"/><path d="M8.662 15.889c.42 0 .781-.352.781-.762V5.097l-.058-1.464.654.693 1.484 1.582a.698.698 0 0 0 .528.235c.4 0 .713-.293.713-.694 0-.205-.088-.361-.235-.508l-3.3-3.183c-.196-.196-.362-.264-.567-.264-.195 0-.361.069-.566.264L4.795 4.94a.681.681 0 0 0-.225.508c0 .4.293.694.703.694.186 0 .4-.079.538-.235l1.474-1.582.664-.693-.058 1.465v10.029c0 .41.351.762.771.762Z"/></g></svg></div><div class="step-text">${Cs("2) Press Share in Navigation bar").replace(S?"2)":"0)","1)")}</div></div><div class="description-step"><div class="svg-wrap">${S?or.html`<svg id="pwa-add" viewBox="0 0 23.389 17.979" width="25" height="25"><g fill="currentColor"><path d="M1.045 3.291v1.377h20.937V3.291Zm2.021 14.688h16.895c2.05 0 3.066-1.006 3.066-3.018V3.027C23.027 1.016 22.012 0 19.961 0H3.066C1.026 0 0 1.016 0 3.027v11.934c0 2.012 1.025 3.018 3.066 3.018Zm.02-1.573c-.977 0-1.514-.517-1.514-1.533V3.115c0-1.015.537-1.543 1.514-1.543H19.94c.967 0 1.514.528 1.514 1.543v11.758c0 1.016-.547 1.533-1.514 1.533Z"/><path d="M4.2 14.014c0 .508.35.85.868.85h12.92c.518 0 .87-.343.87-.85v-1.465c0-.508-.352-.85-.87-.85H5.068c-.517 0-.869.342-.869.85Z"/></g></svg>`:or.html`<svg id="pwa-add" width="25" height="25"><g><path d="m23.40492,1.60784c-1.32504,-1.32504 -3.19052,-1.56912 -5.59644,-1.56912l-10.65243,0c-2.33622,0 -4.2017,0.24408 -5.5267,1.56912c-1.32504,1.34243 -1.56911,3.17306 -1.56911,5.50924l0,10.5827c0,2.40596 0.22665,4.254 1.55165,5.57902c1.34246,1.32501 3.19052,1.5691 5.59647,1.5691l10.60013,0c2.40592,0 4.2714,-0.24408 5.59644,-1.5691c1.325,-1.34245 1.55166,-3.17306 1.55166,-5.57902l0,-10.51293c0,-2.40596 -0.22666,-4.25401 -1.55166,-5.57901zm-0.38355,5.21289l0,11.24518c0,1.51681 -0.20924,2.94643 -1.02865,3.78327c-0.83683,0.83685 -2.30134,1.0635 -3.81815,1.0635l-11.33234,0c-1.51681,0 -2.96386,-0.22665 -3.80073,-1.0635c-0.83683,-0.83684 -1.04607,-2.26646 -1.04607,-3.78327l0,-11.19288c0,-1.5517 0.20924,-3.01617 1.02865,-3.85304c0.83687,-0.83683 2.31876,-1.04607 3.87042,-1.04607l11.28007,0c1.51681,0 2.98132,0.22666 3.81815,1.06353c0.81941,0.81941 1.02865,2.26645 1.02865,3.78327zm-10.53039,12.08205c0.64506,0 1.02861,-0.43586 1.02861,-1.13326l0,-4.34117l4.53294,0c0.66252,0 1.13326,-0.36613 1.13326,-0.99376c0,-0.64506 -0.43586,-1.02861 -1.13326,-1.02861l-4.53294,0l0,-4.53294c0,-0.6974 -0.38355,-1.13326 -1.02861,-1.13326c-0.62763,0 -0.99376,0.45332 -0.99376,1.13326l0,4.53294l-4.51552,0c-0.69737,0 -1.15069,0.38355 -1.15069,1.02861c0,0.62763 0.48817,0.99376 1.15069,0.99376l4.51552,0l0,4.34117c0,0.66252 0.36613,1.13326 0.99376,1.13326z"/></g></svg>`}</div><div class="step-text">${Cs(S?"2) Press Add to Dock":"3) Press Add to Home Screen")}</div></div></div></div>${G?or.html`<pwa-gallery .screenshots=${h.screenshots} .theme="${S?"apple_desktop":"apple_mobile"}"></pwa-gallery>`:""}<div class="action-buttons">${G?or.html`<button class="dialog-button button gallery" @click=${P}>${S?or.html`<svg id="pwa-gallery" viewBox="0 0 10 6"><path d="m1.102 2.21 3.169 3.24c.22.222.462.333.729.333a.94.94 0 0 0 .378-.083 1.19 1.19 0 0 0 .347-.25L8.89 2.21a.8.8 0 0 0 .246-.593.838.838 0 0 0-.118-.44.884.884 0 0 0-.312-.311.84.84 0 0 0-1.063.167L4.854 3.92h.299L2.359 1.033a.868.868 0 0 0-.642-.286.822.822 0 0 0-.43.119.935.935 0 0 0-.312.312.863.863 0 0 0-.115.44c0 .116.02.223.057.32a.898.898 0 0 0 .185.272Z"/></svg>`:or.html`<svg id="pwa-gallery" width="26" height="26" viewBox="0 0 23.538 18.022"><path d="M2.79 18.022h17.958c1.834 0 2.79-.969 2.79-2.778V2.791C23.538.969 22.582 0 20.748 0H2.791C.956 0 0 .956 0 2.79v12.454c0 1.835.956 2.778 2.79 2.778zM.879 2.83C.878 1.55 1.55.88 2.816.88h17.906c1.228 0 1.938.671 1.938 1.95v12.067L16.756 9.47c-.517-.414-.995-.685-1.615-.685-.607 0-1.085.22-1.576.672L8.927 13.59l-1.938-1.796c-.426-.387-.853-.607-1.382-.607-.504 0-.879.207-1.305.594L.878 14.986zm6.46 6.356a2.39 2.39 0 002.377-2.39c0-1.304-1.072-2.39-2.377-2.39a2.401 2.401 0 00-2.39 2.39 2.393 2.393 0 002.39 2.39z"/></svg>`}</button>`:""} <button class="dialog-button button install" @click=${_}><span class="button-text ${T?"show":"hide"}">${Cs("Hide Instruction")}</span> <span class="button-text ${T?"hide":"show"}"><span>${Cs(S?"Add to Dock":"Add to Home Screen")}</span> <svg viewBox="0 0 25 25"><use href="#pwa-add"></use></svg></span></button></div></article></aside>`},Ss=function(i,e,t,r){var o,n=arguments.length,u=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,e,t,r);else for(var h=i.length-1;h>=0;h--)(o=i[h])&&(u=(n<3?o(u):n>3?o(e,t,u):o(e,t))||u);return n>3&&u&&Object.defineProperty(e,t,u),u},Qs=function(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)},ls=class extends or.LitElement{constructor(){super(...arguments),this.manifestUrl="/manifest.json",this.icon="",this.name="",this.description="",this.installDescription="",this.disableDescription=!1,this.disableScreenshots=!1,this.manualApple=!1,this.manualChrome=!1,this.disableChrome=!1,this.disableClose=!1,this.externalPromptEvent=null,this.platforms=[],this.userChoiceResult="",this.isDialogHidden=JSON.parse(window.sessionStorage.getItem("pwa-hide-install")||"false"),this.isInstallAvailable=!1,this.isAppleMobilePlatform=!1,this.isAppleDesktopPlatform=!1,this.isUnderStandaloneMode=!1,this.isRelatedAppsInstalled=!1,this._manifest=new Vv,this._howToRequested=!1,this._galleryRequested=!1,this._install={handleEvent:()=>{window.defferedPromptEvent&&(this.hideDialog(),window.defferedPromptEvent.prompt(),window.defferedPromptEvent.userChoice.then(i=>{this.userChoiceResult=i.outcome,wo.eventUserChoiceResult(this,this.userChoiceResult)}).catch(i=>{wo.eventInstalledFail(this)}),window.defferedPromptEvent=null)},passive:!0},this.install=()=>{this.isAppleMobilePlatform||this.isAppleDesktopPlatform?(this._howToRequested=!0,this.requestUpdate()):this._install.handleEvent()},this._hideDialog={handleEvent:()=>{this.isDialogHidden=!0,window.sessionStorage.setItem("pwa-hide-install","true"),this.requestUpdate()},passive:!0},this._hideDialogUser=()=>{wo.eventUserChoiceResult(this,"dismissed"),this.userChoiceResult="dismissed",this.hideDialog()},this.hideDialog=()=>{this._hideDialog.handleEvent()},this.showDialog=(i=!1)=>{this.isDialogHidden=!1,i&&(this.isInstallAvailable=!0),window.sessionStorage.setItem("pwa-hide-install","false"),this.requestUpdate()},this.getInstalledRelatedApps=async()=>await wo.getInstalledRelatedApps(),this._howToForApple={handleEvent:()=>{this._howToRequested=!this._howToRequested,this._howToRequested&&this._galleryRequested&&(this._galleryRequested=!1),this.requestUpdate(),this._howToRequested&&wo.eventInstallHowTo(this)},passive:!0},this._toggleGallery={handleEvent:()=>{this._galleryRequested=!this._galleryRequested,this._howToRequested&&this._galleryRequested&&(this._howToRequested=!1),this._galleryRequested&&wo.eventGallery(this),this.requestUpdate()},passive:!0},this._init=async()=>{if(window.defferedPromptEvent=null,this._checkInstalled(),!this.disableChrome){let i=e=>{window.defferedPromptEvent=e,e.preventDefault(),this.platforms=e.platforms,this.isRelatedAppsInstalled||this.isUnderStandaloneMode?this.isInstallAvailable=!1:(this.isInstallAvailable=!0,wo.eventInstallAvailable(this)),this.userChoiceResult==="accepted"&&(this.isDialogHidden=!0,wo.eventInstalledSuccess(this)),this.requestUpdate()};this.externalPromptEvent!=null?setTimeout(()=>i(this.externalPromptEvent),300):window.addEventListener("beforeinstallprompt",i)}window.addEventListener("appinstalled",i=>{window.defferedPromptEvent=null,this.isInstallAvailable=!1,this.requestUpdate(),wo.eventInstalledSuccess(this)});try{let i=await fetch(this.manifestUrl),e=await i.json();if(!i.ok||!e||!Object.keys(e))throw Error("Manifest not found");this.icon=this.icon||e.icons?.length?e.icons[0].src:"",this.name=this.name||e.short_name||e.name||"",this.description=this.description||e.description||"",this._manifest=e}catch{this.icon=this.icon||this._manifest.icons?.[0].src||"",this.name=this.name||this._manifest.short_name||"",this.description=this.description||this._manifest.description||""}},this._requestUpdate=()=>{this.requestUpdate()}}static get styles(){return[HN,qN]}async _checkInstalled(){this.isUnderStandaloneMode=wo.isStandalone(),this.isRelatedAppsInstalled=await wo.isRelatedAppsInstalled(),this.isAppleMobilePlatform=wo.isAppleMobile(),this.isAppleDesktopPlatform=wo.isAppleDesktop(),this.isAppleMobilePlatform||this.isAppleDesktopPlatform?this.isUnderStandaloneMode||(this.manualApple&&this.hideDialog(),setTimeout(()=>{this.isInstallAvailable=!0,this.requestUpdate(),wo.eventInstallAvailable(this)},1e3)):this.manualChrome&&this.hideDialog()}connectedCallback(){(i=>{try{i7.get(i)?Z8(i):Z8(i.slice(0,2))}catch{}})(navigator.language),this._init(),UN.finalized,jN.finalized,super.connectedCallback()}willUpdate(i){this.externalPromptEvent&&i.has("externalPromptEvent")&&typeof this.externalPromptEvent=="object"&&this._init()}render(){return this.isAppleMobilePlatform||this.isAppleDesktopPlatform?or.html`${QN(this.name,this.description,this.installDescription,this.disableDescription,this.disableScreenshots,this.disableClose,this.icon,this._manifest,this.isInstallAvailable&&!this.isDialogHidden,this._hideDialogUser,this._howToForApple,this.isAppleDesktopPlatform,this._howToRequested,this._toggleGallery,this._galleryRequested)}`:or.html`${$N(this.name,this.description,this.installDescription,this.disableDescription,this.disableScreenshots,this.disableClose,this.icon,this._manifest,this.isInstallAvailable&&!this.isDialogHidden,this._hideDialogUser,this._install,this._toggleGallery,this._galleryRequested)}`}};Ss([(0,An.property)({attribute:"manifest-url"}),Qs("design:type",Object)],ls.prototype,"manifestUrl",void 0),Ss([(0,An.property)(),Qs("design:type",Object)],ls.prototype,"icon",void 0),Ss([(0,An.property)(),Qs("design:type",Object)],ls.prototype,"name",void 0),Ss([(0,An.property)(),Qs("design:type",Object)],ls.prototype,"description",void 0),Ss([(0,An.property)({attribute:"install-description"}),Qs("design:type",Object)],ls.prototype,"installDescription",void 0),Ss([(0,An.property)({attribute:"disable-install-description",type:Boolean}),Qs("design:type",Object)],ls.prototype,"disableDescription",void 0),Ss([(0,An.property)({attribute:"disable-screenshots",type:Boolean}),Qs("design:type",Object)],ls.prototype,"disableScreenshots",void 0),Ss([(0,An.property)({attribute:"manual-apple",type:Boolean}),Qs("design:type",Object)],ls.prototype,"manualApple",void 0),Ss([(0,An.property)({attribute:"manual-chrome",type:Boolean}),Qs("design:type",Object)],ls.prototype,"manualChrome",void 0),Ss([(0,An.property)({attribute:"disable-chrome",type:Boolean}),Qs("design:type",Object)],ls.prototype,"disableChrome",void 0),Ss([(0,An.property)({attribute:"disable-close",type:Boolean}),Qs("design:type",Object)],ls.prototype,"disableClose",void 0),Ss([(0,An.state)(),Qs("design:type",Object)],ls.prototype,"externalPromptEvent",void 0),ls=Ss([(i,e)=>(i.addInitializer(hN),i),(0,An.customElement)("pwa-install")],ls);var Doe=J8.k;function r7(i){let e,t,r,o,n,u,h;return{c(){e=Ke("button"),t=bi("svg"),r=bi("path"),o=Ot(),n=Ke("div"),n.textContent="Click to Install",J(r,"fill-rule","evenodd"),J(r,"d","M5.5 17a4.5 4.5 0 0 1-1.44-8.765 4.5 4.5 0 0 1 8.302-3.046 3.5 3.5 0 0 1 4.504 4.272A4 4 0 0 1 15 17H5.5Zm5.25-9.25a.75.75 0 0 0-1.5 0v4.59l-1.95-2.1a.75.75 0 1 0-1.1 1.02l3.25 3.5a.75.75 0 0 0 1.1 0l3.25-3.5a.75.75 0 1 0-1.1-1.02l-1.95 2.1V7.75Z"),J(r,"clip-rule","evenodd"),J(t,"xmlns","http://www.w3.org/2000/svg"),J(t,"viewBox","0 0 20 20"),J(t,"fill","currentColor"),J(t,"class","w-5 h-5 mr-1 sm:mr-2"),J(e,"class",i[0])},m(m,b){Ne(m,e,b),qe(e,t),qe(t,r),qe(e,o),qe(e,n),u||(h=It(e,"click",i[4]),u=!0)},p(m,b){b&1&&J(e,"class",m[0])},d(m){m&&ze(e),u=!1,h()}}}function GN(i){let e,t,r=i[1]&&r7(i);return{c(){r&&r.c(),e=Ot(),t=Ke("pwa-install"),Ic(t,"class","z-50"),Ic(t,"name","Ch\xE9rie"),Ic(t,"description","Your Relationship Conversation Assist."),Ic(t,"manifest-url","/files/manifest.json"),Ic(t,"icon","https://chatbond-static.s3.us-west-002.backblazeb2.com/cherie/pwa/manifest-icon-192.maskable.png"),Ic(t,"id",i[2])},m(o,n){r&&r.m(o,n),Ne(o,e,n),Ne(o,t,n)},p(o,[n]){o[1]?r?r.p(o,n):(r=r7(o),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:gt,o:gt,d(o){o&&(ze(e),ze(t)),r&&r.d(o)}}}function WN(){return crypto.randomUUID()}function ZN(){var i=window.navigator.userAgent,e=!!i.match(/iPad/i)||!!i.match(/iPhone/i),t=!!i.match(/WebKit/i),r=!!i.match(/Safari/i)&&!i.match(/CriOS/i);return e&&t&&!r}function Hv(){let i=window.navigator.userAgent;var e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),r=!!e.match(/WebKit/i),o=t&&r&&!e.match(/CriOS/i);return o?"mobile-safari":/Android/.test(i)?"android":r?"desktop-safari":"not-safari"}function KN(i,e,t){let r,{position:o="navbar"}=e,n,u=`pwa-install-${WN()}`,h=un(!1);Fi(i,h,S=>t(1,r=S)),Sr(()=>{n=document.getElementById(u),n.isUnderStandaloneMode?h.set(!1):(console.log("PWA install is available."),h.set(!0))});let m=S=>{switch(S){case"apple-mobile":n.isAppleDesktopPlatform=!1,n.isAppleMobilePlatform=!0;break;case"apple-desktop":n.isAppleMobilePlatform=!1,n.isAppleDesktopPlatform=!0;break;case"chrome":n.isAppleMobilePlatform=!1,n.isAppleDesktopPlatform=!1;break}n.hideDialog()};function b(){if(ZN()){Swal.fire({icon:"error",title:"Oops...",text:"Unfortunately, this app can only be installed using the Safari browser on iOS due to platform restrictions \u{1F625}."});return}n?(Hv()=="mobile-safari"?(console.log("opening safari pwa install dialogue window"),m("apple-mobile")):Hv()=="android"?(console.log("opening desktop safari pwa install dialogue window"),m("chrome")):Hv()=="desktop-safari"?(console.log("opening chrome pwa install dialogue window"),m("apple-desktop")):(console.log("opening chrome pwa install dialogue window"),m("chrome")),n.showDialog(!0)):console.error("PWA Install element is not ready or showDialog is not a function.")}let _="bg-gradient-to-r from-purple-500 to-purple-900 text-white font-medium rounded-full flex justify-center items-center m-1";return o==="navbar"?_+=" w-32 p-1":o==="landing-page"?_+=" w-48 sm:w-64 p-2 sm:p-3":o==="mobile"&&(_+=" w-full p-2"),i.$$set=S=>{"position"in S&&t(5,o=S.position)},[_,r,u,h,b,o]}var qv=class extends pt{constructor(e){super(),yt(this,e,KN,GN,ut,{position:5})}},n7=qv;function JN(i){let e,t,r,o,n,u,h,m,b,_,S,T;return{c(){e=Ke("div"),t=Ke("div"),r=Ke("span"),o=nr(i[1]),n=Ot(),u=Ke("label"),h=nr(i[0]),m=Ot(),b=Ke("span"),_=nr(i[2]),S=Ot(),T=Ke("input"),J(u,"for","minmax-range"),J(u,"class","block mb-2 text-sm font-medium text-gray-900 dark:text-white"),J(t,"class","flex justify-between items-center"),J(T,"id","minmax-range"),J(T,"type","range"),J(T,"min","0"),J(T,"max","100"),T.value=i[3],J(T,"step","1"),J(T,"class","w-full h-2 bg-gray-400 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),J(e,"class","bg-slate-200 dark:bg-slate-600 rounded-lg m-3 sm:m-5 p-2 sm:p-4")},m(P,F){Ne(P,e,F),qe(e,t),qe(t,r),qe(r,o),qe(t,n),qe(t,u),qe(u,h),qe(t,m),qe(t,b),qe(b,_),qe(e,S),qe(e,T)},p(P,[F]){F&2&&mn(o,P[1]),F&1&&mn(h,P[0]),F&4&&mn(_,P[2]),F&8&&(T.value=P[3])},i:gt,o:gt,d(P){P&&ze(e)}}}function XN(i,e,t){let{sliderName:r="Name"}=e,{startScaleName:o="Low"}=e,{endScaleName:n="High"}=e,{value:u="50"}=e;return i.$$set=h=>{"sliderName"in h&&t(0,r=h.sliderName),"startScaleName"in h&&t(1,o=h.startScaleName),"endScaleName"in h&&t(2,n=h.endScaleName),"value"in h&&t(3,u=h.value)},[r,o,n,u]}var $v=class extends pt{constructor(e){super(),yt(this,e,XN,JN,ut,{sliderName:0,startScaleName:1,endScaleName:2,value:3})}},t1=$v;function o7(i){let e,t,r,o,n,u,h,m,b,_,S,T,P,F,G,$,ee,ue,fe,Y;function je(He){i[9](He)}let Ce={sliderName:"\u{1F4AA} Effort",startScaleName:"Lazy",endScaleName:"Effortful"};i[0]!==void 0&&(Ce.value=i[0]),h=new t1({props:Ce}),Ri.push(()=>Wr(h,"value",je));function xe(He){i[10](He)}let Le={sliderName:"\u{1F48E} Clarity",startScaleName:"Low",endScaleName:"High"};i[1]!==void 0&&(Le.value=i[1]),_=new t1({props:Le}),Ri.push(()=>Wr(_,"value",xe));function we(He){i[11](He)}let st={sliderName:"\u2705 Truthfulness",startScaleName:"Low",endScaleName:"High"};return i[2]!==void 0&&(st.value=i[2]),P=new t1({props:st}),Ri.push(()=>Wr(P,"value",we)),{c(){e=Ke("div"),t=Ke("div"),r=Ke("button"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z" clip-rule="evenodd"></path></svg>',o=Ot(),n=Ke("div"),n.innerHTML='<h1 class="text-xl sm:text-2xl md:text-3xl">\u{1F91F} Rate Answer</h1>',u=Ot(),qt(h.$$.fragment),b=Ot(),qt(_.$$.fragment),T=Ot(),qt(P.$$.fragment),G=Ot(),$=Ke("div"),ee=Ke("button"),ee.textContent="Submit",J(r,"class","absolute top-2 right-2 text-red-400 dark:text-red-300 hover:text-red-500 dark:hover:text-red-500"),J(n,"class","m-3 sm:m-4 md:m-5"),J(ee,"type","button"),J(ee,"class","m-3 focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800"),J($,"class","flex justify-center items-center"),J(t,"class","bg-white dark:bg-slate-700 text-black dark:text-white p-6 rounded-lg w-full md:w-2/3 lg:w-1/2 relative m-5"),J(e,"class","fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-80 flex justify-center items-center z-50")},m(He,zt){Ne(He,e,zt),qe(e,t),qe(t,r),qe(t,o),qe(t,n),qe(t,u),Ut(h,t,null),qe(t,b),Ut(_,t,null),qe(t,T),Ut(P,t,null),qe(t,G),qe(t,$),qe($,ee),ue=!0,fe||(Y=[It(r,"click",i[4]),It(ee,"click",i[5])],fe=!0)},p(He,zt){let rt={};!m&&zt&1&&(m=!0,rt.value=He[0],Gr(()=>m=!1)),h.$set(rt);let jt={};!S&&zt&2&&(S=!0,jt.value=He[1],Gr(()=>S=!1)),_.$set(jt);let $t={};!F&&zt&4&&(F=!0,$t.value=He[2],Gr(()=>F=!1)),P.$set($t)},i(He){ue||(Pe(h.$$.fragment,He),Pe(_.$$.fragment,He),Pe(P.$$.fragment,He),ue=!0)},o(He){Be(h.$$.fragment,He),Be(_.$$.fragment,He),Be(P.$$.fragment,He),ue=!1},d(He){He&&ze(e),Vt(h),Vt(_),Vt(P),fe=!1,kr(Y)}}}function YN(i){let e,t,r,o,n,u,h,m,b=i[3]&&o7(i);return{c(){e=Ke("wc-toast"),t=Ot(),r=Ke("button"),r.textContent="Rate",o=Ot(),b&&b.c(),n=Zi(),J(r,"class","bg-blue-500 text-white py-2 px-2 sm:px-4 rounded-full text-sm")},m(_,S){Ne(_,e,S),Ne(_,t,S),Ne(_,r,S),Ne(_,o,S),b&&b.m(_,S),Ne(_,n,S),u=!0,h||(m=It(r,"click",i[4]),h=!0)},p(_,[S]){_[3]?b?(b.p(_,S),S&8&&Pe(b,1)):(b=o7(_),b.c(),Pe(b,1),b.m(n.parentNode,n)):b&&(Hi(),Be(b,1,1,()=>{b=null}),qi())},i(_){u||(Pe(b),u=!0)},o(_){Be(b),u=!1},d(_){_&&(ze(e),ze(t),ze(r),ze(o),ze(n)),b&&b.d(_),h=!1,m()}}}function eO(i,e,t){let{answerId:r}=e,{effortValue:o=50}=e,{clarityValue:n=50}=e,{truthfulnessValue:u=50}=e,{saveEndpoint:h="/"}=e,{csrf:m=""}=e,b=!1;function _(){t(3,b=!b)}function S($){cn.error($)}async function T(){try{if(!(await fetch(h+"?csrf"+m,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":m},body:JSON.stringify({effort:o,clarity:n,truthfulness:u})})).ok)throw new Error("Failed to save rating");t(3,b=!1)}catch($){console.error("Error saving rating:",$),S(`${$.message||"Unknown error"}`)}}function P($){o=$,t(0,o)}function F($){n=$,t(1,n)}function G($){u=$,t(2,u)}return i.$$set=$=>{"answerId"in $&&t(6,r=$.answerId),"effortValue"in $&&t(0,o=$.effortValue),"clarityValue"in $&&t(1,n=$.clarityValue),"truthfulnessValue"in $&&t(2,u=$.truthfulnessValue),"saveEndpoint"in $&&t(7,h=$.saveEndpoint),"csrf"in $&&t(8,m=$.csrf)},[o,n,u,b,_,T,r,h,m,P,F,G]}var Qv=class extends pt{constructor(e){super(),yt(this,e,eO,YN,ut,{answerId:6,effortValue:0,clarityValue:1,truthfulnessValue:2,saveEndpoint:7,csrf:8})}},s7=Qv;var tO=Date.now();function co(i){return`${i}-${tO++}`}var Gv=Symbol.for("svelte-maplibre");function jo(){return y0(Gv)}function iO(i){let e=new WeakMap;return t=>{let r=e.get(t.originalEvent);if(r!==void 0)return r;let n=t.target.queryRenderedFeatures(t.point).find(u=>i.get(u.layer.id)?.interactive)?.layer.id;return e.set(t.originalEvent,n),n}}function l7(){let i=new Map;return g0(Gv,{map:un(null),source:Jc(null),layer:Jc(null),popupTarget:Jc(null),cluster:un(),loadedImages:un(new Set),minzoom:un(0),maxzoom:un(24),layerEvent:un(null),layerInfo:i,eventTopMost:iO(i)})}function a7(i){return{subscribe:i.subscribe}}function Wv({key:i,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:r=!1}){let o=jo(),n=un(null),u=a7(n),h={...o,[i]:a7(n)};if(e&&(h.popupTarget=u),r){let m=un(null);h.layerEvent=m,o.layerEvent=m}return t&&(h.cluster=un()),g0(Gv,h),{...o,self:n}}function Fd(){return Wv({key:"source",setCluster:!0})}function i1(i=!0){return Wv({key:"layer",setPopupTarget:i,setMouseEvent:i})}function r1(){return Wv({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}var rO=ws(pa());function Jv(i){let e;return t=>{if(t)for(let r in t){let o=e?.[r],n=t[r];o!==n&&i(r,n,o)}else if(e)for(let r in e)i(r,void 0,e[r]);e=t}}function Xv(i,...e){let t=[i];for(let r of e)if(r)Array.isArray(r)&&r[0]===i?t.push(...r.slice(1)):t.push(r);else continue;if(t.length!==1)return t.length===2?t[1]:t}function Yv(i){return i===!0?["has","point_count"]:i===!1?["!",["has","point_count"]]:void 0}var Gs=nO;function nO(i){var e,t,r;if(i){if(Array.isArray(i)){for(e=[],t=i.length,r=0;r<t;r++){var o=i[r];o!=null&&e.push(o)}return e}if(typeof i=="object"){e={};var n=Object.keys(i);for(t=n.length,r=0;r<t;r++){var u=n[r],h=i[u];h!=null&&(e[u]=h)}return e}}}function u7(i){let e=i[0],t,r,o=d7(i);return{c(){o.c(),t=Zi()},m(n,u){o.m(n,u),Ne(n,t,u),r=!0},p(n,u){u[0]&1&&ut(e,e=n[0])?(Hi(),Be(o,1,1,gt),qi(),o=d7(n),o.c(),Pe(o,1),o.m(t.parentNode,t)):o.p(n,u)},i(n){r||(Pe(o),r=!0)},o(n){Be(o),r=!1},d(n){n&&ze(t),o.d(n)}}}function d7(i){let e,t=i[36].default,r=Si(t,i,i[35],null);return{c(){r&&r.c()},m(o,n){r&&r.m(o,n),e=!0},p(o,n){r&&r.p&&(!e||n[1]&16)&&Ei(r,t,o,o[35],e?Ci(t,o[35],n,null):Ti(o[35]),null)},i(o){e||(Pe(r,o),e=!0)},o(o){Be(r,o),e=!1},d(o){r&&r.d(o)}}}function oO(i){let e,t,r=i[0]&&u7(i);return{c(){r&&r.c(),e=Zi()},m(o,n){r&&r.m(o,n),Ne(o,e,n),t=!0},p(o,n){o[0]?r?(r.p(o,n),n[0]&1&&Pe(r,1)):(r=u7(o),r.c(),Pe(r,1),r.m(e.parentNode,e)):r&&(Hi(),Be(r,1,1,()=>{r=null}),qi())},i(o){t||(Pe(r),t=!0)},o(o){Be(r),t=!1},d(o){o&&ze(e),r&&r.d(o)}}}function sO(i,e,t){let r,o,n,u,h,m,b,_,S,T,P,F,{$$slots:G={},$$scope:$}=e,{id:ee=co("layer")}=e,{source:ue=void 0}=e,{sourceLayer:fe=void 0}=e,{beforeId:Y=void 0}=e,{beforeLayerType:je=void 0}=e,{type:Ce}=e,{paint:xe=void 0}=e,{layout:Le=void 0}=e,{filter:we=void 0}=e,{applyToClusters:st=void 0}=e,{minzoom:He=void 0}=e,{maxzoom:zt=void 0}=e,{manageHoverState:rt=!1}=e,{hovered:jt=null}=e,{interactive:$t=!0}=e,{hoverCursor:dt=void 0}=e,{eventsIfTopMost:vt=!1}=e,bt=yo(),{map:Qt,source:Yt,self:ki,minzoom:oi,maxzoom:tt,eventTopMost:Fe,layerInfo:Kt}=i1();Fi(i,Qt,lt=>t(31,S=lt)),Fi(i,Yt,lt=>t(32,T=lt)),Fi(i,ki,lt=>t(0,_=lt)),Fi(i,oi,lt=>t(34,F=lt)),Fi(i,tt,lt=>t(33,P=lt)),hr(()=>{_&&S&&(Kt.delete(_),S?.removeLayer(_))});let ti;function Xi(lt){if(!$t||!_||!S||vt&&Fe(lt)!==_)return;let _i=lt.features??[],Ue=_i[0]?.properties?.cluster_id,fi={event:lt,map:S,clusterId:Ue,layer:_,source:h,features:_i};bt(lt.type,fi)}function nt(lt){if(!$t||!_||!S||vt&&Fe(lt)!==_)return;dt&&(S.getCanvas().style.cursor=dt);let _i=lt.features??[];t(6,jt=_i[0]??null);let Ue=_i[0]?.properties?.cluster_id;bt("mouseenter",{event:lt,map:S,clusterId:Ue,layer:_,source:h,features:_i})}function Wt(lt){if(!$t||!S)return;if(vt&&Fe(lt)!==_){t(6,jt=null),rt&&ti!==void 0&&(S?.setFeatureState({source:h,sourceLayer:fe,id:ti},{hover:!1}),ti=void 0);return}S.getCanvas().style.cursor=dt;let _i=lt.features??[],Ue=_i[0]?.properties?.cluster_id,fi=_i[0]?.id;fi!==ti&&(rt&&(ti!==void 0&&S?.setFeatureState({source:h,id:ti,sourceLayer:fe},{hover:!1}),S?.setFeatureState({source:h,id:fi,sourceLayer:fe},{hover:!0})),ti=fi,t(6,jt=_i[0]??null)),bt("mousemove",{event:lt,map:S,clusterId:Ue,layer:_,source:h,features:_i})}function yi(lt){if(!(!$t||!_||!S)){if(dt&&(S.getCanvas().style.cursor=""),t(6,jt=null),rt&&ti!==void 0){let _i={source:h,id:ti,sourceLayer:fe};S?.setFeatureState(_i,{hover:!1}),ti=void 0}bt("mouseleave",{map:S,layer:_,source:h})}}let Rt=!0;function vi(lt){S&&(S.off("click",lt,Xi),S.off("dblclick",lt,Xi),S.off("contextmenu",lt,Xi),S.off("mouseenter",lt,nt),S.off("mousemove",lt,Wt),S.off("mouseleave",lt,yi))}return hr(()=>{S&&_&&vi(_)}),i.$$set=lt=>{"id"in lt&&t(7,ee=lt.id),"source"in lt&&t(8,ue=lt.source),"sourceLayer"in lt&&t(9,fe=lt.sourceLayer),"beforeId"in lt&&t(10,Y=lt.beforeId),"beforeLayerType"in lt&&t(11,je=lt.beforeLayerType),"type"in lt&&t(12,Ce=lt.type),"paint"in lt&&t(13,xe=lt.paint),"layout"in lt&&t(14,Le=lt.layout),"filter"in lt&&t(15,we=lt.filter),"applyToClusters"in lt&&t(16,st=lt.applyToClusters),"minzoom"in lt&&t(17,He=lt.minzoom),"maxzoom"in lt&&t(18,zt=lt.maxzoom),"manageHoverState"in lt&&t(19,rt=lt.manageHoverState),"hovered"in lt&&t(6,jt=lt.hovered),"interactive"in lt&&t(20,$t=lt.interactive),"hoverCursor"in lt&&t(21,dt=lt.hoverCursor),"eventsIfTopMost"in lt&&t(22,vt=lt.eventsIfTopMost),"$$scope"in lt&&t(35,$=lt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&65536&&t(30,r=Yv(st)),i.$$.dirty[0]&1073774592&&t(24,o=Xv("all",r,we)),i.$$.dirty[0]&131072|i.$$.dirty[1]&8&&t(26,n=He??F),i.$$.dirty[0]&262144|i.$$.dirty[1]&4&&t(25,u=zt??P),i.$$.dirty[0]&256|i.$$.dirty[1]&2&&t(29,h=ue||T),i.$$.dirty[0]&654343809|i.$$.dirty[1]&1&&S&&_!==ee&&h){_&&(vi(_),Kt.delete(_));let lt=Y;if(!Y&&je){let _i=S.getStyle().layers,Ue=typeof je=="function"?je:xi=>xi.type===je,fi=_i?.find(Ue);fi&&(lt=fi.id)}En(ki,_=ee,_),S.addLayer(Gs({id:_,type:Ce,source:h,"source-layer":fe,filter:o,paint:xe,layout:Le,minzoom:n,maxzoom:u}),lt),t(23,Rt=!0),S.on("click",_,Xi),S.on("dblclick",_,Xi),S.on("contextmenu",_,Xi),S.on("mouseenter",_,nt),S.on("mousemove",_,Wt),S.on("mouseleave",_,yi)}i.$$.dirty[0]&1048577&&_&&Kt.set(_,{interactive:$t}),i.$$.dirty[0]&1|i.$$.dirty[1]&1&&t(28,m=_?Jv((lt,_i)=>S?.setPaintProperty(_,lt,_i)):void 0),i.$$.dirty[0]&1|i.$$.dirty[1]&1&&t(27,b=_?Jv((lt,_i)=>S?.setLayoutProperty(_,lt,_i)):void 0),i.$$.dirty[0]&268443648&&m?.(xe),i.$$.dirty[0]&134234112&&b?.(Le),i.$$.dirty[0]&100663297|i.$$.dirty[1]&1&&_&&S?.setLayerZoomRange(_,n,u),i.$$.dirty[0]&25165825|i.$$.dirty[1]&1&&_&&(Rt?t(23,Rt=!1):S?.setFilter(_,o))},[_,Qt,Yt,ki,oi,tt,jt,ee,ue,fe,Y,je,Ce,xe,Le,we,st,He,zt,rt,$t,dt,vt,Rt,o,u,n,b,m,h,r,S,T,P,F,$,G]}var e_=class extends pt{constructor(e){super(),yt(this,e,sO,oO,ut,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}},vl=e_;var h7=ws(pa());function lO(i){let e,t=i[12].default,r=Si(t,i,i[11],null);return{c(){r&&r.c()},m(o,n){r&&r.m(o,n),e=!0},p(o,[n]){r&&r.p&&(!e||n&2048)&&Ei(r,t,o,o[11],e?Ci(t,o[11],n,null):Ti(o[11]),null)},i(o){e||(Pe(r,o),e=!0)},o(o){Be(r,o),e=!1},d(o){r&&r.d(o)}}}function cO(i,e,t){let r,o,n,{$$slots:u={},$$scope:h}=e,{lngLat:m}=e,{class:b=void 0}=e,{draggable:_=!1}=e,{feature:S=null}=e,{offset:T=void 0}=e,{rotation:P=0}=e,{opacity:F=1}=e,G=yo(),{map:$,layerEvent:ee,self:ue}=r1();Fi(i,$,Le=>t(14,n=Le)),Fi(i,ee,Le=>t(13,r=Le)),Fi(i,ue,Le=>t(10,o=Le));let fe=()=>xe("dragstart"),Y=()=>{Ce(),xe("drag")},je=()=>{Ce(),xe("dragend")};En(ue,o=new h7.default.Marker(Gs({draggable:_,rotation:P,className:b,offset:T,opacity:F.toString()})).setLngLat(m).addTo(n),o),_&&(o.on("dragstart",fe),o.on("drag",Y),o.on("dragend",je)),hr(()=>o?.remove());function Ce(){let Le=o?.getLngLat();Le&&(Array.isArray(m)?t(3,m=[Le.lng,Le.lat]):m&&"lon"in m?t(3,m={lon:Le.lng,lat:Le.lat}):t(3,m=Le))}function xe(Le){let we=o?.getLngLat();if(!we)return;let st=[we.lng,we.lat],He={map:n,marker:o,lngLat:st,features:[{type:"Feature",properties:S?.properties??{},geometry:{type:"Point",coordinates:st}}]};En(ee,r={...He,layerType:"marker",type:Le},r),G(Le,He)}return i.$$set=Le=>{"lngLat"in Le&&t(3,m=Le.lngLat),"class"in Le&&t(4,b=Le.class),"draggable"in Le&&t(5,_=Le.draggable),"feature"in Le&&t(6,S=Le.feature),"offset"in Le&&t(7,T=Le.offset),"rotation"in Le&&t(8,P=Le.rotation),"opacity"in Le&&t(9,F=Le.opacity),"$$scope"in Le&&t(11,h=Le.$$scope)},i.$$.update=()=>{i.$$.dirty&1032&&o?.setLngLat(m),i.$$.dirty&1152&&o?.setOffset(T??[0,0]),i.$$.dirty&1280&&o?.setRotation(P),i.$$.dirty&1536&&o?.setOpacity(F.toString())},[$,ee,ue,m,b,_,S,T,P,F,o,h,u]}var t_=class extends pt{constructor(e){super(),yt(this,e,cO,lO,ut,{lngLat:3,class:4,draggable:5,feature:6,offset:7,rotation:8,opacity:9})}},i_=t_;function uO(i){let e,t=i[15].default,r=Si(t,i,i[23],null);return{c(){r&&r.c()},m(o,n){r&&r.m(o,n),e=!0},p(o,n){r&&r.p&&(!e||n&8388608)&&Ei(r,t,o,o[23],e?Ci(t,o[23],n,null):Ti(o[23]),null)},i(o){e||(Pe(r,o),e=!0)},o(o){Be(r,o),e=!1},d(o){r&&r.d(o)}}}function dO(i){let e,t,r;function o(u){i[16](u)}let n={id:i[1],type:"fill",source:i[2],sourceLayer:i[3],beforeId:i[4],beforeLayerType:i[5],paint:i[6],layout:i[7],filter:i[8],minzoom:i[9],maxzoom:i[10],hoverCursor:i[11],manageHoverState:i[12],eventsIfTopMost:i[13],interactive:i[14],$$slots:{default:[uO]},$$scope:{ctx:i}};return i[0]!==void 0&&(n.hovered=i[0]),e=new vl({props:n}),Ri.push(()=>Wr(e,"hovered",o)),e.$on("click",i[17]),e.$on("dblclick",i[18]),e.$on("contextmenu",i[19]),e.$on("mouseenter",i[20]),e.$on("mousemove",i[21]),e.$on("mouseleave",i[22]),{c(){qt(e.$$.fragment)},m(u,h){Ut(e,u,h),r=!0},p(u,[h]){let m={};h&2&&(m.id=u[1]),h&4&&(m.source=u[2]),h&8&&(m.sourceLayer=u[3]),h&16&&(m.beforeId=u[4]),h&32&&(m.beforeLayerType=u[5]),h&64&&(m.paint=u[6]),h&128&&(m.layout=u[7]),h&256&&(m.filter=u[8]),h&512&&(m.minzoom=u[9]),h&1024&&(m.maxzoom=u[10]),h&2048&&(m.hoverCursor=u[11]),h&4096&&(m.manageHoverState=u[12]),h&8192&&(m.eventsIfTopMost=u[13]),h&16384&&(m.interactive=u[14]),h&8388608&&(m.$$scope={dirty:h,ctx:u}),!t&&h&1&&(t=!0,m.hovered=u[0],Gr(()=>t=!1)),e.$set(m)},i(u){r||(Pe(e.$$.fragment,u),r=!0)},o(u){Be(e.$$.fragment,u),r=!1},d(u){Vt(e,u)}}}function hO(i,e,t){let{$$slots:r={},$$scope:o}=e,{id:n=co("fill")}=e,{source:u=void 0}=e,{sourceLayer:h=void 0}=e,{beforeId:m=void 0}=e,{beforeLayerType:b=void 0}=e,{paint:_}=e,{layout:S=void 0}=e,{filter:T=void 0}=e,{minzoom:P=void 0}=e,{maxzoom:F=void 0}=e,{hoverCursor:G=void 0}=e,{manageHoverState:$=!1}=e,{hovered:ee=null}=e,{eventsIfTopMost:ue=!1}=e,{interactive:fe=!0}=e;function Y(He){ee=He,t(0,ee)}function je(He){ji.call(this,i,He)}function Ce(He){ji.call(this,i,He)}function xe(He){ji.call(this,i,He)}function Le(He){ji.call(this,i,He)}function we(He){ji.call(this,i,He)}function st(He){ji.call(this,i,He)}return i.$$set=He=>{"id"in He&&t(1,n=He.id),"source"in He&&t(2,u=He.source),"sourceLayer"in He&&t(3,h=He.sourceLayer),"beforeId"in He&&t(4,m=He.beforeId),"beforeLayerType"in He&&t(5,b=He.beforeLayerType),"paint"in He&&t(6,_=He.paint),"layout"in He&&t(7,S=He.layout),"filter"in He&&t(8,T=He.filter),"minzoom"in He&&t(9,P=He.minzoom),"maxzoom"in He&&t(10,F=He.maxzoom),"hoverCursor"in He&&t(11,G=He.hoverCursor),"manageHoverState"in He&&t(12,$=He.manageHoverState),"hovered"in He&&t(0,ee=He.hovered),"eventsIfTopMost"in He&&t(13,ue=He.eventsIfTopMost),"interactive"in He&&t(14,fe=He.interactive),"$$scope"in He&&t(23,o=He.$$scope)},[ee,n,u,h,m,b,_,S,T,P,F,G,$,ue,fe,r,Y,je,Ce,xe,Le,we,st,o]}var r_=class extends pt{constructor(e){super(),yt(this,e,hO,dO,ut,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}},n1=r_;var p7=ws(pa());function pO(i,e,t){let r,{map:o}=jo();Fi(i,o,m=>t(4,r=m));let{position:n="top-left"}=e,{container:u=void 0}=e,h=null;return hr(()=>{r?.loaded()&&h&&r.removeControl(h)}),i.$$set=m=>{"position"in m&&t(1,n=m.position),"container"in m&&t(2,u=m.container)},i.$$.update=()=>{if(i.$$.dirty&30&&r&&!h){let m;typeof u=="string"?m=document.querySelector(u)??void 0:m=u,t(3,h=new p7.default.FullscreenControl({container:m})),r.addControl(h,n)}},[o,n,u,h,r]}var n_=class extends pt{constructor(e){super(),yt(this,e,pO,null,ut,{position:1,container:2})}},af=n_;function zd(i,e,t,r,o){let n=!1;i.getSource(e)&&(n=!0,i.removeSource(e));let u=()=>{r(e)&&(i.addSource(e,t),o())};if(n){let h=()=>{e&&(i.getSource(e)?setTimeout(h,1):u())};h()}else u()}function Nd(i,e,t){Ns().then(()=>{let r=ng(i);if(!r)return;r.getSource(e)===t&&r.removeSource(e)})}function f7(i){let e=i[0],t,r,o=m7(i);return{c(){o.c(),t=Zi()},m(n,u){o.m(n,u),Ne(n,t,u),r=!0},p(n,u){u&1&&ut(e,e=n[0])?(Hi(),Be(o,1,1,gt),qi(),o=m7(n),o.c(),Pe(o,1),o.m(t.parentNode,t)):o.p(n,u)},i(n){r||(Pe(o),r=!0)},o(n){Be(o),r=!1},d(n){n&&ze(t),o.d(n)}}}function m7(i){let e,t=i[15].default,r=Si(t,i,i[14],null);return{c(){r&&r.c()},m(o,n){r&&r.m(o,n),e=!0},p(o,n){r&&r.p&&(!e||n&16384)&&Ei(r,t,o,o[14],e?Ci(t,o[14],n,null):Ti(o[14]),null)},i(o){e||(Pe(r,o),e=!0)},o(o){Be(r,o),e=!1},d(o){r&&r.d(o)}}}function fO(i){let e,t,r=i[0]&&f7(i);return{c(){r&&r.c(),e=Zi()},m(o,n){r&&r.m(o,n),Ne(o,e,n),t=!0},p(o,[n]){o[0]?r?(r.p(o,n),n&1&&Pe(r,1)):(r=f7(o),r.c(),Pe(r,1),r.m(e.parentNode,e)):r&&(Hi(),Be(r,1,1,()=>{r=null}),qi())},i(o){t||(Pe(r),t=!0)},o(o){Be(r),t=!1},d(o){o&&ze(e),r&&r.d(o)}}}function mO(i,e,t){let r,o,n,{$$slots:u={},$$scope:h}=e,{id:m=co("geojson")}=e,{data:b}=e,{generateId:_=!1}=e,{promoteId:S=void 0}=e,{filter:T=void 0}=e,{lineMetrics:P=void 0}=e,{cluster:F=void 0}=e,{map:G,cluster:$,self:ee}=Fd();Fi(i,G,Y=>t(13,o=Y)),Fi(i,$,Y=>t(16,n=Y)),Fi(i,ee,Y=>t(0,r=Y));let ue,fe=!0;return hr(()=>{r&&ue&&o&&(Nd(G,r,ue),En(ee,r=null,r),t(11,ue=void 0))}),i.$$set=Y=>{"id"in Y&&t(4,m=Y.id),"data"in Y&&t(5,b=Y.data),"generateId"in Y&&t(6,_=Y.generateId),"promoteId"in Y&&t(7,S=Y.promoteId),"filter"in Y&&t(8,T=Y.filter),"lineMetrics"in Y&&t(9,P=Y.lineMetrics),"cluster"in Y&&t(10,F=Y.cluster),"$$scope"in Y&&t(14,h=Y.$$scope)},i.$$.update=()=>{i.$$.dirty&1024&&En($,n=F,n),i.$$.dirty&12273&&o&&r!==m&&(En(ee,r=m,r),zd(o,r,Gs({type:"geojson",data:b,filter:T,lineMetrics:P,generateId:_,promoteId:S,cluster:!!F,clusterMinPoints:F?.minPoints,clusterMaxZoom:F?.maxZoom,clusterRadius:F?.radius,clusterProperties:F?.properties}),Y=>o&&Y===r,()=>{r&&(t(11,ue=o?.getSource(r)),t(12,fe=!0))})),i.$$.dirty&8208&&o?.on("style.load",()=>{t(11,ue=o?.getSource(m))}),i.$$.dirty&6176&&ue&&(fe?t(12,fe=!1):ue.setData(b)),i.$$.dirty&3072&&ue?.setClusterOptions(Gs({cluster:!!F,clusterMaxZoom:F?.maxZoom,clusterRadius:F?.radius}))},[r,G,$,ee,m,b,_,S,T,P,F,ue,fe,o,h,u]}var o_=class extends pt{constructor(e){super(),yt(this,e,mO,fO,ut,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}},s_=o_;var g7=ws(pa());function gO(i,e,t){let r,{map:o}=jo();Fi(i,o,T=>t(8,r=T));let{position:n="top-left"}=e,{positionOptions:u=void 0}=e,{fitBoundsOptions:h=void 0}=e,{trackUserLocation:m=!1}=e,{showAccuracyCircle:b=!0}=e,{showUserLocation:_=!0}=e,S=null;return hr(()=>{r?.loaded()&&S&&r.removeControl(S)}),i.$$set=T=>{"position"in T&&t(1,n=T.position),"positionOptions"in T&&t(2,u=T.positionOptions),"fitBoundsOptions"in T&&t(3,h=T.fitBoundsOptions),"trackUserLocation"in T&&t(4,m=T.trackUserLocation),"showAccuracyCircle"in T&&t(5,b=T.showAccuracyCircle),"showUserLocation"in T&&t(6,_=T.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&r&&!S&&(t(7,S=new g7.default.GeolocateControl({positionOptions:u,fitBoundsOptions:h,trackUserLocation:m,showAccuracyCircle:b,showUserLocation:_})),r.addControl(S,n))},[o,n,u,h,m,b,_,S,r]}var a_=class extends pt{constructor(e){super(),yt(this,e,gO,null,ut,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}},l_=a_;function y7(i){let e=i.getCenter(),t=Math.round(i.getZoom()*100)/100,r=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,r),n=Math.round(e.lat*o)/o,u=Math.round(e.lng*o)/o,h=`${t}/${n}/${u}`,m=i.getBearing(),b=i.getPitch();return(m||b)&&(h+=`/${Math.round(m*10)/10}`),b&&(h+=`/${Math.round(b)}`),`#${h}`}function b7(i){return i.replace("#","").split("/").map(parseFloat)}var C7=ws(pa());var lf=c_;function c_(i,e){return i===e||i!==i&&e!==e?!0:typeof i!=typeof e||{}.toString.call(i)!={}.toString.call(e)||i!==Object(i)||!i?!1:Array.isArray(i)?v7(i,e):{}.toString.call(i)=="[object Set]"?v7(Array.from(i),Array.from(e)):{}.toString.call(i)=="[object Object]"?bO(i,e):yO(i,e)}function yO(i,e){return i.toString()===e.toString()}function v7(i,e){var t=i.length;if(t!=e.length)return!1;for(var r=0;r<t;r++)if(!c_(i[r],e[r]))return!1;return!0}function bO(i,e){var t=Object.keys(i),r=t.length;if(r!=Object.keys(e).length)return!1;for(var o=0;o<r;o++){var n=t[o];if(!(e.hasOwnProperty(n)&&c_(i[n],e[n])))return!1}return!0}var _7=ws(pa());function vO(i,e,t){let r,{map:o}=jo();Fi(i,o,_=>t(6,r=_));let{position:n="top-left"}=e,{showCompass:u=!0}=e,{showZoom:h=!0}=e,{visualizePitch:m=!1}=e,b=null;return hr(()=>{r?.loaded()&&b&&r.removeControl(b)}),i.$$set=_=>{"position"in _&&t(1,n=_.position),"showCompass"in _&&t(2,u=_.showCompass),"showZoom"in _&&t(3,h=_.showZoom),"visualizePitch"in _&&t(4,m=_.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&r&&!b&&(t(5,b=new _7.default.NavigationControl({showCompass:u,showZoom:h,visualizePitch:m})),r.addControl(b,n))},[o,n,u,h,m,b,r]}var u_=class extends pt{constructor(e){super(),yt(this,e,vO,null,ut,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}},cf=u_;var x7=ws(pa());function _O(i,e,t){let r,{map:o}=jo();Fi(i,o,b=>t(5,r=b));let{position:n="bottom-left"}=e,{maxWidth:u=void 0}=e,{unit:h="metric"}=e,m=null;return hr(()=>{r?.loaded()&&m&&r.removeControl(m)}),i.$$set=b=>{"position"in b&&t(1,n=b.position),"maxWidth"in b&&t(2,u=b.maxWidth),"unit"in b&&t(3,h=b.unit)},i.$$.update=()=>{i.$$.dirty&62&&r&&!m&&(t(4,m=new x7.default.ScaleControl({maxWidth:u,unit:h})),r.addControl(m,n))},[o,n,u,h,m,r]}var d_=class extends pt{constructor(e){super(),yt(this,e,_O,null,ut,{position:1,maxWidth:2,unit:3})}},uf=d_;var xO=i=>({map:i[0]&8,loadedImages:i[0]&16,allImagesLoaded:i[0]&32}),w7=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function k7(i){let e,t,r=i[2]&&S7(i),o=i[36].default,n=Si(o,i,i[35],w7);return{c(){r&&r.c(),e=Ot(),n&&n.c()},m(u,h){r&&r.m(u,h),Ne(u,e,h),n&&n.m(u,h),t=!0},p(u,h){u[2]?r?(r.p(u,h),h[0]&4&&Pe(r,1)):(r=S7(u),r.c(),Pe(r,1),r.m(e.parentNode,e)):r&&(Hi(),Be(r,1,1,()=>{r=null}),qi()),n&&n.p&&(!t||h[0]&56|h[1]&16)&&Ei(n,o,u,u[35],t?Ci(o,u[35],h,xO):Ti(u[35]),w7)},i(u){t||(Pe(r),Pe(n,u),t=!0)},o(u){Be(r),Be(n,u),t=!1},d(u){u&&ze(e),r&&r.d(u),n&&n.d(u)}}}function S7(i){let e,t,r,o,n,u,h,m;return e=new cf({props:{position:i[6]}}),r=new l_({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),n=new af({props:{position:i[6]}}),h=new uf({props:{position:i[6]}}),{c(){qt(e.$$.fragment),t=Ot(),qt(r.$$.fragment),o=Ot(),qt(n.$$.fragment),u=Ot(),qt(h.$$.fragment)},m(b,_){Ut(e,b,_),Ne(b,t,_),Ut(r,b,_),Ne(b,o,_),Ut(n,b,_),Ne(b,u,_),Ut(h,b,_),m=!0},p(b,_){let S={};_[0]&64&&(S.position=b[6]),e.$set(S);let T={};_[0]&64&&(T.position=b[6]),r.$set(T);let P={};_[0]&64&&(P.position=b[6]),n.$set(P);let F={};_[0]&64&&(F.position=b[6]),h.$set(F)},i(b){m||(Pe(e.$$.fragment,b),Pe(r.$$.fragment,b),Pe(n.$$.fragment,b),Pe(h.$$.fragment,b),m=!0)},o(b){Be(e.$$.fragment,b),Be(r.$$.fragment,b),Be(n.$$.fragment,b),Be(h.$$.fragment,b),m=!1},d(b){b&&(ze(t),ze(o),ze(u)),Vt(e,b),Vt(r,b),Vt(n,b),Vt(h,b)}}}function wO(i){let e,t,r,o,n,u,h=i[3]&&i[0]&&k7(i);return{c(){e=Ke("div"),h&&h.c(),J(e,"class",t=Ka(i[1])+" svelte-p00lfq"),ar(e,"expand-map",!i[1])},m(m,b){Ne(m,e,b),h&&h.m(e,null),o=!0,n||(u=Gh(r=i[9].call(null,e)),n=!0)},p(m,b){m[3]&&m[0]?h?(h.p(m,b),b[0]&9&&Pe(h,1)):(h=k7(m),h.c(),Pe(h,1),h.m(e,null)):h&&(Hi(),Be(h,1,1,()=>{h=null}),qi()),(!o||b[0]&2&&t!==(t=Ka(m[1])+" svelte-p00lfq"))&&J(e,"class",t),(!o||b[0]&2)&&ar(e,"expand-map",!m[1])},i(m){o||(Pe(h),o=!0)},o(m){Be(h),o=!1},d(m){m&&ze(e),h&&h.d(),n=!1,u()}}}function kO(i,e,t){let r,o,n,u,{$$slots:h={},$$scope:m}=e,{map:b=null}=e,{class:_=void 0}=e,{style:S}=e,{diffStyleUpdates:T=!1}=e,{center:P=void 0}=e,{zoom:F=void 0}=e,{pitch:G=0}=e,{bearing:$=0}=e,{bounds:ee=void 0}=e,{hash:ue=!1}=e,{loaded:fe=!1}=e,{minZoom:Y=0}=e,{maxZoom:je=22}=e,{zoomOnDoubleClick:Ce=!0}=e,{locale:xe=void 0}=e,{interactive:Le=!0}=e,{attributionControl:we=!0}=e,{cooperativeGestures:st=!1}=e,{preserveDrawingBuffer:He=!1}=e,{maxBounds:zt=void 0}=e,{images:rt=[]}=e,{standardControls:jt=!1}=e,{filterLayers:$t=void 0}=e,{transformRequest:dt=void 0}=e,vt=yo(),{map:bt,loadedImages:Qt}=l7();Fi(i,bt,nt=>t(3,n=nt)),Fi(i,Qt,nt=>t(4,u=nt));let Yt=new Set;async function ki(nt,Wt=!1){if(n&&!(!n.loaded()&&!Wt))if("url"in nt){Yt.add(nt.id);try{let yi=await n.loadImage(nt.url);n?.addImage(nt.id,yi.data,nt.options),u.add(nt.id),Qt.set(u)}catch(yi){vt("error",yi)}finally{Yt.delete(nt.id)}}else n.addImage(nt.id,nt.data,nt.options),u.add(nt.id),Qt.set(u)}let oi,tt,Fe,Kt;function ti(nt){if(ue){let Wt=b7(window.location.hash);Wt.length>=3&&(t(11,F=Wt[0]),t(10,P=[Wt[2],Wt[1]])),Wt.length==5&&(t(15,$=Wt[3]),t(14,G=Wt[4]))}return En(bt,n=new C7.default.Map(Gs({container:nt,style:S,locale:xe,center:P,zoom:F,pitch:G,bearing:$,minZoom:Y,maxZoom:je,interactive:Le,preserveDrawingBuffer:He,maxBounds:zt,bounds:ee,attributionControl:we,transformRequest:dt,cooperativeGestures:st})),n),n.on("load",Wt=>{t(0,fe=!0),vt("load",n)}),n.on("error",Wt=>vt("error",{...Wt,map:n})),n.on("movestart",Wt=>vt("movestart",{...Wt,map:n})),n.on("moveend",Wt=>{if(t(10,P=Wt.target.getCenter()),t(11,F=Wt.target.getZoom()),t(12,ee=Wt.target.getBounds()),vt("moveend",{...Wt,map:n}),ue){let yi=window.location.href.replace(/(#.+)?$/,y7(n));window.history.replaceState(window.history.state,"",yi)}}),n.on("zoomstart",Wt=>vt("zoomstart",{...Wt,map:n})),n.on("zoom",Wt=>{t(11,F=Wt.target.getZoom()),vt("zoom",{...Wt,map:n})}),n.on("zoomend",Wt=>{t(11,F=Wt.target.getZoom()),vt("zoomend",{...Wt,map:n})}),n.on("style.load",()=>{if(n){let Wt=n.getStyle();if(t(32,oi=Wt.layers.map(yi=>yi.id)),t(33,tt=Object.keys(Wt.sources)),Kt)for(let[yi,Rt]of Object.entries(Kt))n.addSource(yi,Rt);if(Fe)for(let yi of Fe)n.addLayer(yi);for(let yi of rt)ki(yi,!0)}}),n.on("styledata",Wt=>{if(n&&$t){let yi=n.getStyle().layers;if(yi)for(let Rt of yi)$t(Rt)||n.setLayoutProperty(Rt.id,"visibility","none")}vt("styledata",{...Wt,map:n})}),{destroy(){t(0,fe=!1),n?.remove(),En(bt,n=null,n)}}}let Xi=S;return i.$$set=nt=>{"map"in nt&&t(13,b=nt.map),"class"in nt&&t(1,_=nt.class),"style"in nt&&t(16,S=nt.style),"diffStyleUpdates"in nt&&t(17,T=nt.diffStyleUpdates),"center"in nt&&t(10,P=nt.center),"zoom"in nt&&t(11,F=nt.zoom),"pitch"in nt&&t(14,G=nt.pitch),"bearing"in nt&&t(15,$=nt.bearing),"bounds"in nt&&t(12,ee=nt.bounds),"hash"in nt&&t(18,ue=nt.hash),"loaded"in nt&&t(0,fe=nt.loaded),"minZoom"in nt&&t(19,Y=nt.minZoom),"maxZoom"in nt&&t(20,je=nt.maxZoom),"zoomOnDoubleClick"in nt&&t(21,Ce=nt.zoomOnDoubleClick),"locale"in nt&&t(22,xe=nt.locale),"interactive"in nt&&t(23,Le=nt.interactive),"attributionControl"in nt&&t(24,we=nt.attributionControl),"cooperativeGestures"in nt&&t(25,st=nt.cooperativeGestures),"preserveDrawingBuffer"in nt&&t(26,He=nt.preserveDrawingBuffer),"maxBounds"in nt&&t(27,zt=nt.maxBounds),"images"in nt&&t(28,rt=nt.images),"standardControls"in nt&&t(2,jt=nt.standardControls),"filterLayers"in nt&&t(29,$t=nt.filterLayers),"transformRequest"in nt&&t(30,dt=nt.transformRequest),"$$scope"in nt&&t(35,m=nt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&t(6,r=typeof jt=="boolean"?void 0:jt),i.$$.dirty[0]&8&&t(13,b=n),i.$$.dirty[0]&196616|i.$$.dirty[1]&14&&n&&!lf(S,Xi)){let nt=n.getStyle();if(oi&&(Fe=nt.layers.filter(Wt=>!oi.includes(Wt.id))),tt){let Wt=Object.keys(nt.sources).filter(yi=>!tt.includes(yi));Kt={};for(let yi of Wt)Kt[yi]=nt.sources[yi]}t(34,Xi=S),n.setStyle(S,{diff:T}),En(Qt,u=new Set,u),t(31,Yt=new Set)}if(i.$$.dirty[0]&268435481|i.$$.dirty[1]&1&&fe&&n?.loaded())for(let nt of rt)!u.has(nt.id)&&!Yt.has(nt.id)&&!n.hasImage(nt.id)&&ki(nt);i.$$.dirty[0]&268435472&&t(5,o=rt.every(nt=>u.has(nt.id))),i.$$.dirty[0]&1032&&P&&!lf(P,n?.getCenter())&&n?.panTo(P),i.$$.dirty[0]&2056&&F&&!lf(F,n?.getZoom())&&n?.zoomTo(F),i.$$.dirty[0]&4104&&ee&&!lf(ee,n?.getBounds())&&n?.fitBounds(ee),i.$$.dirty[0]&2097160&&(Ce?n?.doubleClickZoom.enable():n?.doubleClickZoom.disable())},[fe,_,jt,n,u,o,r,bt,Qt,ti,P,F,ee,b,G,$,S,T,ue,Y,je,Ce,xe,Le,we,st,He,zt,rt,$t,dt,Yt,oi,tt,Xi,m,h]}var h_=class extends pt{constructor(e){super(),yt(this,e,kO,wO,ut,{map:13,class:1,style:16,diffStyleUpdates:17,center:10,zoom:11,pitch:14,bearing:15,bounds:12,hash:18,loaded:0,minZoom:19,maxZoom:20,zoomOnDoubleClick:21,locale:22,interactive:23,attributionControl:24,cooperativeGestures:25,preserveDrawingBuffer:26,maxBounds:27,images:28,standardControls:2,filterLayers:29,transformRequest:30},null,[-1,-1])}},p_=h_;var SO=ws(pa());var{Map:Kle}=Ac;var EO=ws(pa());var Od=Uint8Array,E7=Uint16Array,TO=Int32Array,MO=new Od([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),AO=new Od([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mce=new Od([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T7=function(i,e){for(var t=new E7(31),r=0;r<31;++r)t[r]=e+=1<<i[r-1];for(var o=new TO(t[30]),r=1;r<30;++r)for(var n=t[r];n<t[r+1];++n)o[n]=n-t[r]<<5|r;return{b:t,r:o}},M7=T7(MO,2),IO=M7.b,PO=M7.r;IO[28]=258,PO[258]=28;var A7=T7(AO,0),Ace=A7.b,Ice=A7.r,DO=new E7(32768);for(yr=0;yr<32768;++yr)_l=(yr&43690)>>1|(yr&21845)<<1,_l=(_l&52428)>>2|(_l&13107)<<2,_l=(_l&61680)>>4|(_l&3855)<<4,DO[yr]=((_l&65280)>>8|(_l&255)<<8)>>1;var _l,yr;var o1=new Od(288);for(yr=0;yr<144;++yr)o1[yr]=8;var yr;for(yr=144;yr<256;++yr)o1[yr]=9;var yr;for(yr=256;yr<280;++yr)o1[yr]=7;var yr;for(yr=280;yr<288;++yr)o1[yr]=8;var yr,LO=new Od(32);for(yr=0;yr<32;++yr)LO[yr]=5;var yr;var FO=new Od(0);var zO=typeof TextDecoder<"u"&&new TextDecoder,NO=0;try{zO.decode(FO,{stream:!0}),NO=1}catch{}var BO=ws(pa());function RO(i){let e,t;return e=new n1({props:{paint:{"fill-color":"#008800","fill-opacity":.5}}}),{c(){qt(e.$$.fragment)},m(r,o){Ut(e,r,o),t=!0},p:gt,i(r){t||(Pe(e.$$.fragment,r),t=!0)},o(r){Be(e.$$.fragment,r),t=!1},d(r){Vt(e,r)}}}function UO(i){let e,t,r,o,n,u,h,m,b,_;return e=new cf({props:{position:"top-left",showCompass:!1}}),r=new af({props:{position:"top-left"}}),n=new uf({}),h=new i_({props:{lngLat:i[1],draggable:!0}}),h.$on("dragend",i[6]),b=new s_({props:{id:"states",data:i[2],$$slots:{default:[RO]},$$scope:{ctx:i}}}),{c(){qt(e.$$.fragment),t=Ot(),qt(r.$$.fragment),o=Ot(),qt(n.$$.fragment),u=Ot(),qt(h.$$.fragment),m=Ot(),qt(b.$$.fragment)},m(S,T){Ut(e,S,T),Ne(S,t,T),Ut(r,S,T),Ne(S,o,T),Ut(n,S,T),Ne(S,u,T),Ut(h,S,T),Ne(S,m,T),Ut(b,S,T),_=!0},p(S,T){let P={};T&2&&(P.lngLat=S[1]),h.$set(P);let F={};T&4&&(F.data=S[2]),T&16384&&(F.$$scope={dirty:T,ctx:S}),b.$set(F)},i(S){_||(Pe(e.$$.fragment,S),Pe(r.$$.fragment,S),Pe(n.$$.fragment,S),Pe(h.$$.fragment,S),Pe(b.$$.fragment,S),_=!0)},o(S){Be(e.$$.fragment,S),Be(r.$$.fragment,S),Be(n.$$.fragment,S),Be(h.$$.fragment,S),Be(b.$$.fragment,S),_=!1},d(S){S&&(ze(t),ze(o),ze(u),ze(m)),Vt(e,S),Vt(r,S),Vt(n,S),Vt(h,S),Vt(b,S)}}}function VO(i){let e,t,r,o,n,u,h,m,b,_,S,T,P,F,G,$,ee,ue,fe;return $=new p_({props:{center:i[1],zoom:3,class:"map rounded-lg w-full",style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",$$slots:{default:[UO]},$$scope:{ctx:i}}}),{c(){e=Ke("div"),t=Ke("div"),r=Ke("button"),r.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 mr-1"><path fill-rule="evenodd" d="m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" clip-rule="evenodd"></path></svg>

      Locate Me`,o=Ot(),n=Ke("div"),u=Ke("label"),h=nr("Max distance: "),m=nr(i[0]),b=nr(" km"),_=Ot(),S=Ke("div"),T=Ke("input"),P=Ot(),F=Ke("div"),F.innerHTML=`<svg class="flex-shrink-0 w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20"><path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path></svg> <span class="sr-only">Info</span> <div class="ms-3 text-sm font-medium">You can also click and hold the map marker on the map and move it to your
      desired location.</div> <button type="button" class="ms-auto -mx-1.5 -my-1.5 bg-green-50 text-green-500 rounded-lg focus:ring-2 focus:ring-green-400 p-1.5 hover:bg-green-200 inline-flex items-center justify-center h-8 w-8 dark:bg-gray-800 dark:text-green-400 dark:hover:bg-gray-700" data-dismiss-target="#alert-3" aria-label="Close"><span class="sr-only">Close</span> <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"></path></svg></button>`,G=Ot(),qt($.$$.fragment),J(r,"class","bg-orange-500 text-white py-3 px-5 rounded-lg mb-5 md:mb-0 mr-2 md:mr-4 flex flex-row whitespace-nowrap"),J(u,"for","default-range"),J(u,"class","block text-sm font-medium text-gray-900 dark:text-white"),J(T,"id","default-range"),J(T,"type","range"),J(T,"min","15"),J(T,"max","4000"),J(T,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),J(S,"class","py-2 w-full grow"),J(n,"class","flex-grow flex flex-col justify-center items-center w-full"),J(t,"class","flex flex-col md:flex-row justify-center items-center w-full my-1"),J(F,"id","alert-3"),J(F,"class","flex items-center p-4 mb-4 text-green-800 rounded-lg bg-green-100 dark:bg-gray-800 dark:text-green-400"),J(F,"role","alert"),J(e,"class","flex flex-col justify-center w-full")},m(Y,je){Ne(Y,e,je),qe(e,t),qe(t,r),qe(t,o),qe(t,n),qe(n,u),qe(u,h),qe(u,m),qe(u,b),qe(n,_),qe(n,S),qe(S,T),zs(T,i[0]),qe(e,P),qe(e,F),qe(e,G),Ut($,e,null),ee=!0,ue||(fe=[It(r,"click",i[5]),It(T,"change",i[11]),It(T,"input",i[11])],ue=!0)},p(Y,[je]){(!ee||je&1)&&mn(m,Y[0]),je&1&&zs(T,Y[0]);let Ce={};je&2&&(Ce.center=Y[1]),je&16390&&(Ce.$$scope={dirty:je,ctx:Y}),$.$set(Ce)},i(Y){ee||(Pe($.$$.fragment,Y),ee=!0)},o(Y){Be($.$$.fragment,Y),ee=!1},d(Y){Y&&ze(e),Vt($),ue=!1,kr(fe)}}}function jO(i,e){let t;return function(...r){clearTimeout(t),t=setTimeout(()=>{i.apply(this,r)},e)}}async function HO(i,e,t,r){try{let o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:e,longitude:t,radius:r})});o.ok?console.log("Data posted successfully"):console.error("Error in posting data",o.statusText)}catch(o){console.error("Error in posting data",o)}}function qO(i,e,t){let r,o,n,{lat:u=50}=e,{lon:h=50}=e,{rad:m=500}=e,{postGeoDataURL:b="/post-url"}=e,_=un(m);Fi(i,_,ee=>t(0,o=ee));let S=un([h,u]);Fi(i,S,ee=>t(1,n=ee));function T(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(ee=>{S.set([ee.coords.longitude,ee.coords.latitude])},ee=>{console.error("Error getting location:",ee),alert("Unable to retrieve your location.")}):alert("Geolocation is not supported by your browser.")}function P(ee){S.set(ee.detail.lngLat)}var F=function(ee,ue,fe){fe||(fe=64);for(var Y={latitude:ee[1],longitude:ee[0]},je=ue,Ce=[],xe=je/(111.32*Math.cos(Y.latitude*Math.PI/180)),Le=je/110.574,we,st,He,zt=0;zt<fe;zt++)we=zt/fe*(2*Math.PI),st=xe*Math.cos(we),He=Le*Math.sin(we),Ce.push([Y.longitude+st,Y.latitude+He]);return Ce.push(Ce[0]),{type:"Feature",geometry:{type:"Polygon",coordinates:[Ce]}}};let G=jO(HO,250);function $(){o=i5(this.value),_.set(o)}return i.$$set=ee=>{"lat"in ee&&t(7,u=ee.lat),"lon"in ee&&t(8,h=ee.lon),"rad"in ee&&t(9,m=ee.rad),"postGeoDataURL"in ee&&t(10,b=ee.postGeoDataURL)},i.$$.update=()=>{i.$$.dirty&1027&&n&&o&&G(b,n[1],n[0],o),i.$$.dirty&3&&t(2,r=F(n,o))},[o,n,r,_,S,T,P,u,h,m,b,$]}var f_=class extends pt{constructor(e){super(),yt(this,e,qO,VO,ut,{lat:7,lon:8,rad:9,postGeoDataURL:10})}},I7=f_;function P7(i,e,t){let r=i.slice();return r[11]=e[t],r}function D7(i){let e,t;return{c(){e=Ke("img"),J(e,"class","w-10 h-10 rounded-full mr-3 md:mr-5"),rg(e.src,t=i[11].photo)||J(e,"src",t),J(e,"alt","Rounded avatar")},m(r,o){Ne(r,e,o)},p(r,o){o&2048&&!rg(e.src,t=r[11].photo)&&J(e,"src",t)},d(r){r&&ze(e)}}}function $O(i){let e,t,r,o=i[11].label+"",n,u,h=i[11].photo&&D7(i);return{c(){e=Ke("div"),h&&h.c(),t=Ot(),r=Ke("span"),n=nr(o),J(e,"option",u=i[11]),J(e,"slot","option"),J(e,"class","flex flex-row items-center")},m(m,b){Ne(m,e,b),h&&h.m(e,null),qe(e,t),qe(e,r),qe(r,n)},p(m,b){m[11].photo?h?h.p(m,b):(h=D7(m),h.c(),h.m(e,t)):h&&(h.d(1),h=null),b&2048&&o!==(o=m[11].label+"")&&mn(n,o),b&2048&&u!==(u=m[11])&&J(e,"option",u)},d(m){m&&ze(e),h&&h.d()}}}function L7(i){let e,t,r,o;return{c(){e=Ke("div"),t=Ke("button"),r=Ke("span"),o=nr(i[2]),J(r,"class","m-2 font-semibold"),J(t,"class","bg-blue-600 hover:bg-blue-500 text-white py-1 px-4 rounded-lg inline-flex items-center"),J(t,"aria-label","Finish onboarding"),J(e,"class","flex justify-center mt-4 m-10")},m(n,u){Ne(n,e,u),qe(e,t),qe(t,r),qe(r,o)},p(n,u){u&4&&mn(o,n[2])},d(n){n&&ze(e)}}}function F7(i){let e,t;return{c(){e=Ke("input"),J(e,"type","hidden"),J(e,"name",i[0]),e.value=t=i[11].id},m(r,o){Ne(r,e,o)},p(r,o){o&1&&J(e,"name",r[0]),o&8&&t!==(t=r[11].id)&&(e.value=t)},d(r){r&&ze(e)}}}function QO(i){let e,t,r,o,n,u;function h(T){i[7](T)}let m={options:i[4],placeholder:i[1],outerDivClass:"!w-full !input !input-bordered !border !border-gray-300 !rounded-md !p-2.5 !bg-white !text-gray-900 !text-sm md:!text-base focus:!ring-blue-500 focus:!border-blue-500 dark:!bg-gray-700 dark:!border-gray-600 dark:!placeholder-gray-400 dark:!text-white dark:focus:!ring-blue-500 dark:focus:!border-blue-500",liSelectedClass:"!bg-orange-500 dark:!bg-blue-600 !p-2 !text-white",ulOptionsClass:"!p-1 !m-1 !bg-white dark:!bg-gray-700 !text-slate-600 dark:!text-white",liUserMsgClass:"!p-1 !m-1 !bg-white dark:!bg-gray-700 !text-slate-600 dark:!text-white",liActiveOptionClass:"!bg-slate-200 dark:!bg-blue-700 !rounded-lg",maxSelect:1,maxSelectMsg:WO,$$slots:{option:[$O,({option:T})=>({11:T}),({option:T})=>T?2048:0]},$$scope:{ctx:i}};i[3]!==void 0&&(m.selected=i[3]),e=new au({props:m}),Ri.push(()=>Wr(e,"selected",h));let b=i[3].length>0&&i[2]&&L7(i),_=On(i[3]),S=[];for(let T=0;T<_.length;T+=1)S[T]=F7(P7(i,_,T));return{c(){qt(e.$$.fragment),r=Ot(),b&&b.c(),o=Ot();for(let T=0;T<S.length;T+=1)S[T].c();n=Zi()},m(T,P){Ut(e,T,P),Ne(T,r,P),b&&b.m(T,P),Ne(T,o,P);for(let F=0;F<S.length;F+=1)S[F]&&S[F].m(T,P);Ne(T,n,P),u=!0},p(T,[P]){let F={};if(P&2&&(F.placeholder=T[1]),P&18432&&(F.$$scope={dirty:P,ctx:T}),!t&&P&8&&(t=!0,F.selected=T[3],Gr(()=>t=!1)),e.$set(F),T[3].length>0&&T[2]?b?b.p(T,P):(b=L7(T),b.c(),b.m(o.parentNode,o)):b&&(b.d(1),b=null),P&9){_=On(T[3]);let G;for(G=0;G<_.length;G+=1){let $=P7(T,_,G);S[G]?S[G].p($,P):(S[G]=F7($),S[G].c(),S[G].m(n.parentNode,n))}for(;G<S.length;G+=1)S[G].d(1);S.length=_.length}},i(T){u||(Pe(e.$$.fragment,T),u=!0)},o(T){Be(e.$$.fragment,T),u=!1},d(T){T&&(ze(r),ze(o),ze(n)),Vt(e,T),b&&b.d(T),Zl(S,T)}}}var GO=500,WO=(i,e)=>`${i} of ${e} selected`;function ZO(i,e,t){let{items:r=[{id:2,object:{name:"Cherry",profileImage:{photo:"https://your-image-url.jpg"}}},{id:3,object:{name:"Pear",profileImage:{photo:"https://another-image-url.jpg"}}}]}=e,{formInputName:o="input_name"}=e,{placeholder:n="Select options..."}=e,{componentID:u="searchable-dropdown"}=e,{submitButtonText:h=null}=e,m,b=!0,_=[],S=r.map(F=>({id:F.id,label:F.object.name,photo:F.object.profileImage&&F.object.profileImage.thumbnail_url||null}));Xa(()=>{_.length>0&&b&&(T(_),b=!1,clearTimeout(m),m=setTimeout(()=>{b=!0},GO))});function T(F){let G=document.getElementById(u);if(G){let $=new CustomEvent("dropdownSelectionChanged",{detail:{selected:F}});G.dispatchEvent($)}}function P(F){_=F,t(3,_)}return i.$$set=F=>{"items"in F&&t(5,r=F.items),"formInputName"in F&&t(0,o=F.formInputName),"placeholder"in F&&t(1,n=F.placeholder),"componentID"in F&&t(6,u=F.componentID),"submitButtonText"in F&&t(2,h=F.submitButtonText)},[o,n,h,_,S,r,u,P]}var m_=class extends pt{constructor(e){super(),yt(this,e,ZO,QO,ut,{items:5,formInputName:0,placeholder:1,componentID:6,submitButtonText:2})}},z7=m_;function KO(i){let e;return{c(){e=Ke("div"),e.textContent="\u{1F31A}",J(e,"class","theme-toggle-light-icon text-xl sm:text-2xl")},m(t,r){Ne(t,e,r)},d(t){t&&ze(e)}}}function JO(i){let e;return{c(){e=Ke("div"),e.textContent="\u{1F31E}",J(e,"class","theme-toggle-dark-icon text-xl sm:text-2xl")},m(t,r){Ne(t,e,r)},d(t){t&&ze(e)}}}function XO(i){let e,t,r;function o(h,m){return h[0]==="darkmode"?JO:KO}let n=o(i,-1),u=n(i);return{c(){e=Ke("button"),u.c(),J(e,"type","button"),J(e,"class","theme-toggle text-primary-content w-9 h-9 md:w-10 md:h-10 bg-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600 dark:bg-slate-500 rounded-full flex items-center justify-center")},m(h,m){Ne(h,e,m),u.m(e,null),t||(r=It(e,"click",i[1]),t=!0)},p(h,[m]){n!==(n=o(h,m))&&(u.d(1),u=n(h),u&&(u.c(),u.m(e,null)))},i:gt,o:gt,d(h){h&&ze(e),u.d(),t=!1,r()}}}function YO(i,e,t){let r=localStorage.getItem("color-theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"darkmode":"lightmode");Sr(async()=>{await Ns(),document.documentElement.setAttribute("data-theme",r),document.documentElement.classList.toggle("dark",r==="darkmode"),n()});function o(){t(0,r=r==="darkmode"?"lightmode":"darkmode"),localStorage.setItem("color-theme",r),document.documentElement.setAttribute("data-theme",r),document.documentElement.classList.toggle("dark",r==="darkmode"),n()}function n(){t(0,r)}return[r,o]}var g_=class extends pt{constructor(e){super(),yt(this,e,YO,XO,ut,{})}},N7=g_;var eB={MultiSelectComponent:B9,PhotoUploader:w8,SelectLocationPrefsMap:I7,EmojiPicker:d9,AnswerWriter:s9,SingleSelect:z7,PhoneNumberPicker:Yw,PwaInstallButton:n7,PwaSubscribePush:Pp,ThemeToggle:N7,RateAnswer:s7,NotificationPermissions:H9};window.svelteInstances=window.svelteInstances||{};function tB(i,e,t={}){let r=eB[i];if(!r)throw new Error(`Component ${i} not found in registry`);let o=document.getElementById(e);if(!o)throw new Error(`Could not find element with id ${e}`);o.innerHTML="",window.svelteInstances[e]&&(window.svelteInstances[e].$destroy(),window.svelteInstances[e]=null),window.svelteInstances[e]=new r({target:o,props:t})}window.renderSvelteComponent=function(i,e,t={}){tB(i,e,t)};window.successToast=function(i,e=1e3){cn.success(i,{duration:e})};window.errorToast=function(i,e=1e3){cn.error(i,{duration:e})};
/*! Bundled license information:

cropperjs/dist/cropper.js:
  (*!
   * Cropper.js v1.6.1
   * https://fengyuanchen.github.io/cropperjs
   *
   * Copyright 2015-present Chen Fengyuan
   * Released under the MIT license
   *
   * Date: 2023-09-17T03:44:19.860Z
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.2/LICENSE.txt
   *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/lit-html.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-element/lit-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/custom-element.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/property.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/state.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/event-options.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/base.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-all.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-async.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-nodes.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directives/class-map.js:
  (**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
//# sourceMappingURL=main.js.map
